  <HTML>
  <HEAD>
  <!-- This HTML file has been created by texi2html 1.52 (hacked by david@detron.se)
     from manual.texi on 20 June 1998 -->

  <TITLE>MySQL Reference Manual for version 3.21.31. - MySQL のコンパイルとインストール</TITLE>
  </HEAD>
  <BODY BGCOLOR=#FFFFFF TEXT=#000000 LINK=#101090 VLINK=#7030B0>
Go to the <A HREF="manual_Introduction.html">first</A>, <A HREF="manual_Licensing_and_Support.html">previous</A>, <A HREF="manual_Compatibility.html">next</A>, <A HREF="manual_Concept_Index.html">last</A> section, <A HREF="manual_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="Installing" HREF="manual_toc.html#Installing"><STRONG>MySQL</STRONG> のコンパイルとインストール</A></H1>

<P>
<A NAME="IDX15"></A>
<A NAME="IDX16"></A>
<A NAME="IDX17"></A>
<A NAME="IDX18"></A>


<H2><A NAME="Getting it" HREF="manual_toc.html#Getting it"><STRONG>MySQL</STRONG> を得る方法は？</A></H2>

<P>
<STRONG>MySQL</STRONG> の最新ニュースを読むために、いつでも 
<a HREF="http://www.tcx.se/"> <STRONG>MySQL</STRONG> のホームページ</a> をチェックでき
ます。

</P>
<P>
しかし TcX のインターネット接続はそんなに速くないので、実際には下記のミ
ラーの一つからダウンロードする方が良いでしょう。

</P>
<P>
ヨーロッパ:

<UL>
<LI>

<IMG SRC="Img/austria.png">  
<a HREF="http://gd.tuwien.ac.at/db/mysql/">
Austria WWW [Univ. of Technology/Vienna]</a>
<LI>

<IMG SRC="Img/bulgaria.png">  
<a HREF="ftp://ftp.ntrl.net/pub/mirror/mysql">
Bulgaria FTP [Naturella]</a>
<LI>

<IMG SRC="Img/czech-republic.png">  
<a HREF="http://mirror.opf.slu.cz/mysql/">
Czech Republic WWW [CESNET]</a>
<LI>

<IMG SRC="Img/denmark.png">  
<a HREF="http://mysql.ake.dk">
Denmark WWW [Ake]</a>
<LI>

<IMG SRC="Img/denmark.png">  
<a HREF="http://SunSITE.auc.dk/mysql/">
Denmark WWW [SunSITE]</a>
<LI>

<IMG SRC="Img/denmark.png">  
<a HREF="ftp://SunSITE.auc.dk/pub/databases/mysql/">
Denmark FTP [SunSITE]</a>
<LI>

<IMG SRC="Img/estonia.png">  
<a HREF="http://mysql.tradenet.ee">
Estonia WWW [Tradenet]</a>
<LI>

<IMG SRC="Img/france.png">  
<a HREF="http://www.minet.net/devel/mysql/">
France WWW [minet]</a>
<LI>

<IMG SRC="Img/germany.png">  
<a HREF="http://www.fh-wolfenbuettel.de/ftp/pub/database/mysql/">
Germany WWW [Wolfenbuettel]</a>
<LI>

<IMG SRC="Img/germany.png">  
<a HREF="http://mysql.staufen.de/">
Germany WWW [Staufen]</a>
<LI>

<IMG SRC="Img/hungary.png">  
<a HREF="http://xenia.sote.hu/ftp/mirrors/www.tcx.se-mysql/">
Hungary WWW [Xenia]</a>
<LI>

<IMG SRC="Img/israel.png">  
<a HREF="http://mysql.netvision.net.il/">
Israel WWW [Netvision]</a>
<LI>

<IMG SRC="Img/israel.png">  
<a HREF="ftp://mysql.netvision.net.il/mirrors/mysql/">
Israel FTP [Netvision]</a>
<LI>

<IMG SRC="Img/italy.png">  
<a HREF="http://www.matrice.it/risorse/mysql/">
Italy WWW [Matrice]</a>
<LI>

<IMG SRC="Img/poland.png">  
<a HREF="http://sunsite.icm.edu.pl/mysql/">
Poland WWW [Sunsite]</a>
<LI>

<IMG SRC="Img/poland.png">  
<a HREF="ftp://sunsite.icm.edu.pl/pub/unix/mysql/">
Poland FTP [Sunsite]</a>
<LI>

<IMG SRC="Img/portugal.png">  
<a HREF="http://mysql.telenet.pt">
Portugal WWW [Telenet]</a>
<LI>

<IMG SRC="Img/russia.png">  
<a HREF="ftp://ftp-mysql.cityline.ru/pub/MySQL">
Russia FTP [Cityline]</a>
<LI>

<IMG SRC="Img/romania.png">  
<a HREF="http://www.dnttm.ro/mysql">
Romania WWW [Timisoara]</a>
<LI>

<IMG SRC="Img/romania.png">  
<a HREF="ftp://ftp.dnttm.ro/pub/mysql">
Romania FTP [Timisoara]</a>
<LI>

<IMG SRC="Img/romania.png">  
<a HREF="http://www.lbi.ro/MySQL">
Romania WWW [Bucharest]</a>
<LI>

<IMG SRC="Img/romania.png">  
<a HREF="ftp://ftp.lbi.ro/mirrors/ftp.tcx.se">
Romania FTP [Bucharest]</a>

<LI>

<IMG SRC="Img/sweden.png">  
<a HREF="http://ftp.sunet.se/pub/unix/databases/relational/mysql/">
Sweden WWW [Sunet]</a>
<LI>

<IMG SRC="Img/sweden.png">  
<a HREF="ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/">
Sweden FTP [Sunet]</a>

<LI>

<IMG SRC="Img/great-britain.png">  
<a HREF="http://mysql.omnipotent.net/">
UK WWW [Omnipotent/UK]</a>
<LI>

<IMG SRC="Img/great-britain.png">  
<a HREF="ftp://mysql.omnipotent.net/">
UK FTP [Omnipotent/UK]</a>

<LI>

<IMG SRC="Img/great-britain.png">  
<a HREF="http://ftp.plig.org/pub/mysql/">
UK WWW [PLiG/UK]</a>
<LI>

<IMG SRC="Img/great-britain.png">  
<a HREF="ftp://ftp.plig.org/pub/mysql/">
UK FTP [PLiG/UK]</a>
</UL>

<P>
北アメリカ:

<UL>
<LI>

<IMG SRC="Img/canada.png">  
<a HREF="http://mysql.polaris.ca/">
Canada WWW [Polaris Computing]</a>

<LI>

<IMG SRC="Img/canada.png">  
<a HREF="http://web.tryc.on.ca/mysql/">
Canada WWW [Tryc]</a>

<LI>

<IMG SRC="Img/canada.png">  
<a HREF="http://mysql.cyberus.ca/">
Canada WWW [Cyberus]</a>

<LI>

<IMG SRC="Img/canada.png">   
<a HREF="ftp://mysql.cyberus.ca/"> 
Canada FTP [Cyberus]</a> 

<LI>

<IMG SRC="Img/usa.png">  
<a HREF="http://mysql.he.net">
USA WWW [Hurricane Electric/San Jose]</a>

<LI>

<IMG SRC="Img/usa.png">  
<a HREF="http://www.buoy.com/mysql/">
USA WWW [Buoy/New York]</a>

<LI>

<IMG SRC="Img/usa.png">
<a HREF="http://epsilon.hpnc.com/mysql">
USA WWW [Hypernet Communications/Dallas]</a>

<LI>

<IMG SRC="Img/usa.png">
<a HREF="http://mysql.he.net">
USA WWW [Hurricane Electric/California]</a>

<LI>

<IMG SRC="Img/usa.png">  
<a HREF="ftp://ftp.netcasting.net/pub/mysql/">
USA FTP [Netcasting/West Coast]</a>

<LI>

<IMG SRC="Img/usa.png">  
<a HREF="http://mysql.savages.com">
USA WWW [Savages/Oregon]</a>

<LI>

<IMG SRC="Img/usa.png">  
<a HREF="http://www.mysql.net">
USA WWW [Circle Net/North Carolina]</a>

<LI>

<IMG SRC="Img/usa.png">  
<a HREF="http://www.gina.net/mysql/">
USA WWW [Gina net/Florida]</a>

<LI>

<IMG SRC="Img/usa.png">  
<a HREF="ftp://ftp.digex.net/pub/database/mysql/index.html">
USA FTP [DIGEX]</a>
</UL>

<P>
アジア:

<UL>
<LI>

<IMG SRC="Img/south-korea.png">  
<a HREF="http://linux.kreonet.re.kr/mysql/">
Korea WWW [KREONet]</a>
<LI>

<IMG SRC="Img/japan.png">  
<a HREF="http://www.happysize.co.jp/mysql/">
Japan WWW [HappySize]</a>
<LI>

<IMG SRC="Img/japan.png">  
<a HREF="ftp://ftp.happysize.co.jp/pub/mysql/">
Japan FTP [HappySize]</a>
<LI>

<IMG SRC="Img/singapore.png">  
<a HREF="http://mysql.com5.net">
Singapore WWW [Com5 Productions]</a>
<LI>

<IMG SRC="Img/singapore.png">  
<a HREF="ftp://ftp.com5.net/pub/mysql">
Singapore FTP [Com5 Productions]</a>
<LI>

<IMG SRC="Img/taiwan.png">  
<a HREF="http://www.iem.nctu.edu.tw/data/mysql">
Taiwan WWW [NCTU]</a>
</UL>

<P>
オーストラリア:

<UL>
<LI>

<IMG SRC="Img/australia.png">  
<a HREF="http://mysql.bluep.com/">
Australia WWW [Blue Planet/Melbourne]</a>
<LI>

<IMG SRC="Img/australia.png">  
<a HREF="ftp://mysql.bluep.com/mirror1/mysql/">
Australia FTP [Blue Planet/Melbourne]</a>
<LI>

<IMG SRC="Img/australia.png">  
<a HREF="ftp://ftp.sage-au.org.au/pub/database/mysql">
Australia FTP [Sage]</a>
</UL>

<P>
<A NAME="IDX19"></A>
<A NAME="IDX20"></A>
<A NAME="IDX21"></A>
<A NAME="IDX22"></A>
<A NAME="IDX23"></A>


<H2><A NAME="Which version" HREF="manual_toc.html#Which version">どの <STRONG>MySQL</STRONG> バージョンを使うべきか？</A></H2>

<P>
最初の決定は、あなたが最新の開発リリースを使用したいのか、または最新の安
定リリースを使用したいのかです。

</P>
<P>
通常は、あなたが開発を開始するのなら、開発リリースで行うことを勧めます。
開発リリースには普通は本当に悪いバグはなく、あなたのマシン上で、crash-me 
とベンチマークテストで簡単にテストできるからです。 「<A HREF="manual_Benchmarks.html#Benchmarks"><STRONG>MySQL</STRONG> benchmark suite</A>」節参照 。

</P>
<P>
２番目の決定は、ソースを欲しいかバイナリリリースを欲しいかです。

</P>
<P>
あなたが現在バイナリリリースがあるプラットフォーム上で <STRONG>MySQL</STRONG> の
実行を望むのなら、それを使用してください。<STRONG>MySQL</STRONG> のバイナリバー
ジョンの方がインストールは簡単です。

</P>
<P>
<STRONG>MySQL</STRONG> を作る C と C++ コードを読みたい(そして/または変更したい)
場合は常にソース配布を入手するべきです。コードはいつでも究極のマニュアル
です。ソース配布はまたバイナリ配布よりも多くのテストと例を含んでいます。

</P>
<P>
我々の名前付けの計画を明確にします:

</P>
<P>
<STRONG>MySQL</STRONG> の全てのバージョンは、我々の標準テストと、比較的安全な使
用を保証するベンチマークを通して実行されます。標準テストは以前に見つけら
れた全てのバグをテストするため、whole time は大きくなります。そのためよ
り良い whole time を得ます。

</P>
<P>
<STRONG>MySQL</STRONG> リリース番号は３つの数値と拡張子からなります。

</P>
<P>
そして <CODE>mysql-3.21.17-alpha-beta</CODE> のようなリリース名は次の意味にな
ります。

</P>
<DL COMPACT>

<DT>最初の数値。この場合は 3
<DD>
これはファイル形式を表します。つまり全てのバージョン 3 リリースは同じファ
イルフォーマットを持ちます。そしてバージョン 4 が現れた時、全てのテーブ
ルは新しい形式に変換する必要があります (このための良いツールはもちろん含
まれます)。
<DT>２番目の数値。この場合は 21
<DD>
これはリリースレベルです。通常は二つから選択します。一つはリリース/安定
ブランチで、もう一つは開発ブランチです。通常は両方とも安定ですが、開発バー
ジョンはきまぐれで、ドキュメントがなく、いくつかのシステムではコンパイル
に失敗します。
<DT>３番目の数値。この場合は 17
<DD>
これはバージョン番号です。これはリリース毎に増加します。普通はあなたの選
択したリリースの最新バージョンを求めます。
<DT>拡張子。この場合は beta
<DD>

<UL>
<LI>

Alpha は、100% テストされていないいくつかの新しい大きなコードセクション
が存在することを意味し、知られているバグは News 節(通常はありません)に記
述されています。多くの alpha リリースには新しいコマンドと拡張もあります。
<LI>

Beta は全ての新しいコードがテストされたことを意味します。大きな新しいも
のは追加されません。知られているバグはありません。
<LI>

Gamma はしばらくたった beta で、正しく働くように見えます。これは多くの他
の会社がリリースと呼ぶものです。
<LI>

リリース(拡張子なし)は、多くの様々な場所で、バグレポートなしでそのバージョ
ンがしばらくの間動作していたことを意味します(プラットフォーム固有のバグ
は除きます)。
</UL>

</DL>

<P>
全てのリリースは少なくても次のテストがされていることに注意してください:

</P>
<DL COMPACT>

<DT>内部テストスイート
<DD>
これは顧客のための製品システムの一部です。多くのテーブルと多くのメガバイ
トのデータを持っています。
<DT><STRONG>MySQL</STRONG> ベンチマークスイート
<DD>
これは一般的なクエリの範囲を実行します。これは、最適化の最新バッチが実際
にコードをより速く作れるかどうかを確認するテストでもあります。
 「<A HREF="manual_Benchmarks.html#Benchmarks"><STRONG>MySQL</STRONG> benchmark suite</A>」節参照 。
<DT>crash-me テスト
<DD>
これは、データベースがサポートしているものと、その制限を見つけ出そうとし
ます。 「<A HREF="manual_Benchmarks.html#Benchmarks"><STRONG>MySQL</STRONG> benchmark suite</A>」節参照 。
</DL>

<P>
他のテストは我々の内部製品です。我々は通常最新のバージョンを(少なくとも
一つのマシンで)このために使用し、動作のため 100Gbyte 以上のデータを持ち
ます。

</P>


<H2><A NAME="Many versions" HREF="manual_toc.html#Many versions">いつどのようにリリースを更新するのか？</A></H2>

<P>
我々は <STRONG>MySQL</STRONG> の更新時には次のポリシーを使用しています:

</P>
<P>
それぞれのマイナーアップデートは、バージョン文字列中の最後の数値を増加さ
せます。主要な新機能や前のバージョンとのマイナーな非互換があった時には、
バージョン文字列中の2番目の数値が増加されます。ファイル形式が変更した時、
最初の数値が増加します。

</P>

<UL>
<LI>

安定にテストされたリリースは年に約 1-2 回現れます。しかし小さなバグが見
つかった場合は、バグフィックスだけのリリースがリリースされます。
<LI>

作業中のリリースは約 1-8 週間に現れます。
<LI>

いくつかのプラットフォームのためのバイナリリリースは我々によってメジャー
リリースから作られます。他の人が他のシステムのためにバイナリリリースを作
りますが、おそらく頻繁ではありません。
<LI>

通常、小さなバグを見つけて修正するとすぐに、有効なパッチを作ります。
<LI>

危険ではないけれども困らされるバグには、我々に知らせて頂ければ有効なパッ
チを作成します。その他の場合、大きなパッチの中にそれらの多くを結合します。
</UL>



<H2><A NAME="Which OS" HREF="manual_toc.html#Which OS"><STRONG>MySQL</STRONG> がサポートする OS は？</A></H2>

<P>
我々は GNU autoconf を使用していますので、<STRONG>MySQL</STRONG> は POSIX スレッ
ドと C++ コンパイラが動作する全ての新しいシステムに移植可能です。クライ
アントコードは C++ を必要としますが、スレッドは必要ではありません。我々
は自身のソフトウェアを、最初に Sun Solaris (現在は 2.5 &#38; 2.6) 上で、いく
つかは RedHat Linux 5.0 上で使用/開発しています。

</P>
<P>
次の OS/スレッドパッケージは、<STRONG>MySQL</STRONG> のコンパイル成功が報告され
ています。多くの OS では、ネイティブスレッドは最新バージョンで働くことに
注意してください。

</P>

<UL>
<LI>

Solaris 2.5 &#38; 2.6 with native threads.
<LI>

SunOS 4.x with the included MIT threads package.
<LI>

BSDI 2.x with the included MIT threads package.
<LI>

BSDI 3.0 and 3.1 native threads.
<LI>

SGI IRIX 6.x with native threads.
<LI>

AIX 4.x whith native threads.
<LI>

DEC UNIX 4.x with native threads.
<LI>

Linux 2.0+ with LinuxThreads 0.5, 0.6 and 0.7.
<LI>

FreeBSD 2.x with the included MIT threads package.
<LI>

FreeBSD 3.x with native threads.
<LI>

SCO OpenServer with a recent port of the FSU-threads package.
<LI>

NetBSD 1.3 Intel and NetBSD 1.3 Alpha.
<LI>

Openbsd 2.1
<LI>

HPUX 10.20 with the included MIT threads package.
<LI>

Win95 and NT.  This version is currently only available for users with
a <STRONG>MySQL</STRONG> license or <STRONG>MySQL</STRONG> email support.
</UL>



<H2><A NAME="Installing-source" HREF="manual_toc.html#Installing-source">ソースコードからの <STRONG>MySQL</STRONG> のコンパイル</A></H2>

<P>
必要なもの:

</P>

<OL>
<LI>

GNU <CODE>gzip</CODE>。配布の伸張のため。
<LI>

適当な <CODE>tar</CODE>。配布の展開のため。GNU <CODE>tar</CODE> は働くことが知られて
います。
<LI>

ANSI <CODE>C++</CODE> コンパイラ。gcc &#62;= 2.7, SGI C++, SunPro C++ は働くことが
知られています。<CODE>libg++</CODE> は <CODE>gcc</CODE> 使用時には必要ではありません。
<LI>

良い <CODE>make</CODE> プログラム。問題があれば GNU <CODE>make</CODE> を試すことをお
勧めします。
</OL>



<H3><A NAME="Quick-install" HREF="manual_toc.html#Quick-install">素早いインストールの概要</A></H3>

<P>
ディレクトリ内で tar アーカイブの展開。tar ファイルは
mysql-VERSION.tar.gz (VERSION は 3.21.31 のような番号です) 
のような名前です。mysql-VERSION という名前のディレクトリが作成されます。

</P>
<DL COMPACT>

<DT><CODE>zcat mysql-VERSION.tar.gz | tar xvf -</CODE>
<DD>
現在のディレクトリに配布を展開します。
<DT><CODE>cd mysql-VERSION</CODE>
<DD>
ディレクトリを変更します。
<DT><CODE>./configure</CODE>
<DD>
リリースを構成します。ここでいくつかのオプションを追加できます。
configure オプションの一覧は <TT>`./configure --help'</TT> を使用してくださ
い。
<DT><CODE>make</CODE>
<DD>
全てをコンパイルします。
<DT><CODE>make install</CODE>
<DD>
全てをインストールします。
<DT><CODE>./scripts/mysql_install_db</CODE>
<DD>
<STRONG>MySQL</STRONG> 特権テーブルをセットアップします。これは <STRONG>MySQL</STRONG> 
を最初にインストールする時だけ必要です。データベースに接続するユーザの正
しい初期パーミッションを得るためには、このスクリプトを実行前に編集します。
 「<A HREF="manual_Installing.html#mysql_install_db">mysql_install_db 実行時の問題</A>」節参照 
<DT><CODE>'installation_directory'/bin/mysqladmin version</CODE>
<DD>
サーバが動いているかどうかを確認します。<TT>`./configure'</TT> にオプション
を追加しない場合は、'installation_directory' は <TT>`/usr/local'</TT> です。
得られる出力の例を示します(厳密にこれが得られるわけではありません！):

<PRE>
mysqladmin  Ver 6.3 Distrib 3.21.17, for pc-linux-gnu on i686
TCX Datakonsult AB, by Monty

Server version          3.21.17-alpha
Protocol version        10
Connection              Localhost via UNIX socket
TCP port                3306
UNIX socket             /tmp/mysql.sock
Uptime:                 16 sec

Running threads: 1  Questions: 20  Reloads: 2  Open tables: 3
</PRE>

</DL>

<P>
<STRONG>MySQL</STRONG> をリコンフィグした場合は、新しい configure を行う前に 
<CODE>rm config.cache</CODE> または <CODE>make distclean</CODE> を行う必要があること
を覚えていてください。

</P>
<P>
GNU <CODE>make</CODE> は常に推奨され、時々は必要とされます。

</P>


<H3><A NAME="configure switches" HREF="manual_toc.html#configure switches">有用な configure スイッチ:</A></H3>


<UL>
<LI>

クライアントだけをコンパイルするためには <CODE>--without-server</CODE> を使用
します。クライアントライブラリだけを持ちたくて C++ コンパイラを持ってい
ない場合、C++ コンパイラをテストする(ソース配布内の) configure 内のコー
ドを削除できます。そして --without-server でコンパイルします。この場合、
<CODE>mysql.cc</CODE> (C++ を必要とする <STRONG>MySQL</STRONG> クライアント) に関する 
warning は無視してください。
<LI>

データを <TT>`/usr/local/var'</TT> 配下に持ちたくない場合、次のようなものを
使用します: <CODE>--prefix=/usr/local</CODE> または 
<CODE>--prefix=/usr/local --localstatedir=/usr/local/data/mysql</CODE>
<LI>

ソケットをデフォルト位置 (デフォルトは <TT>`/tmp'</TT> または 
<TT>`/var/run'</TT>) に持ちたくない場合、
<CODE>--with-unix-socket-path=absolute_file_name</CODE> を使用します。
<LI>

sql_yacc.yy コンパイル時に次のようなエラーになる場合:

<CODE>Internal compiler error: program cc1plus got fatal signal 11</CODE> また
は <CODE>Out of virtual memory</CODE> 次の configure スイッチを試せます:
<CODE>--with-low-memory</CODE>。これは gcc を使用する場合は <CODE>-fno-inline</CODE> 
を、他のものを使用する場合は -O0 をコンパイル行に追加します。問題は、
sql_yacc.cc のインライン関数でのコンパイルに gcc が約 180M を要求するこ
とです。
<LI>

バイナリ配布用、さらなる速度を得るため、またはいくつかの RedHat 配布での
問題を避けるために、プログラムを静的にコンパイルしたい場合は、
<CODE>LDFLAGS=-static ./configure</CODE> で configure してください。
<LI>

gcc を使用していて、インストールされた g++ や libstdc++ を持っていない場
合、次で configure してください: <CODE>CC=gcc CXX=gcc ./configure</CODE>
<LI>

全ての <CODE>DEFAULT</CODE> 値を使用したくなくて、全ての <CODE>NOT NULL</CODE> 項目
を使用しない <CODE>INSERT</CODE> についてエラーを得たい場合、
<CODE>CXXFLAGS=-DDONT_USE_DEFAULT_FIELDS ./configure</CODE> で configure して
ください。
<LI>

デフォルト文字セットを変更します。

デフォルトでは <STRONG>MySQL</STRONG> は ISO8859-1 (Latin1) 文字セットを使用しま
す。コンパイル時に configure スイッチ <CODE>--with-charset=charset</CODE> によっ
て変更できます。

[charset] は次の一つです: <CODE>big5</CODE>, <CODE>czech</CODE>, <CODE>dec8</CODE>,
<CODE>dos</CODE>, <CODE>german1</CODE>, <CODE>hp8</CODE>, <CODE>koi8_ru</CODE>, <CODE>latin1</CODE>,
<CODE>latin2</CODE>, <CODE>swe7</CODE>, <CODE>usa7</CODE> <CODE>ujis</CODE> または <CODE>sjis</CODE>。

 「<A HREF="manual_Server.html#Character sets">データとソートに使用される文字セット</A>」節参照 

サーバとクライアント間で文字を変換したい場合は、<CODE>SET OPTION
CHARACTER SET</CODE> を見てください。 「<A HREF="manual_Syntax.html#Set option">SET OPTION 構文</A>」節参照 。
</UL>

<P>
<EM>警告:</EM> テーブル生成後に文字セットを変更する場合、全てのテーブルに 
<CODE>isamchk -r -q</CODE> を行う必要があります。そうしなければ、いくつかの場
合(すべてではない!)、データは不正に格納されます。

</P>
<LI>

コンピュータ/OS 固有のスイッチについては、この章の後のメニューを見てくだ
さい。
</UL>



<H3><A NAME="Applying patches" HREF="manual_toc.html#Applying patches">パッチの適用</A></H3>

<P>
時々メーリングリスト上にパッチが現れます。それらを適用するには次のような
ことを行います:

</P>

<PRE>
cd 'old-mysql-source-distribution-path'
gunzip &#60; patch-file-name.gz | patch -p1

rm config.cache
make clean
</PRE>

<P>
そしてそれから通常のソースインストール指示を <CODE>./configure</CODE> の段階か
ら追いします。

</P>
<P>
そしてあなたの <STRONG>MySQL</STRONG> サーバを再起動します。

</P>


<H2><A NAME="Installation problems" HREF="manual_toc.html#Installation problems">コンパイルの問題</A></H2>

<P>
コンパイルが次のように失敗した場合:

</P>

<PRE>
configure: error: installation or configuration problem: C++ compiler
cannot create executables.
</PRE>

<P>
環境変数 <CODE>CXX</CODE> を <CODE>"gcc -O3"</CODE> に設定してみてください 
(<CODE>gcc</CODE> を使用している場合)。例えば <CODE>CXX="gcc -O3" ./configure</CODE>。
これを使用する場合、libg++ をインストールしておく必要ありません。

</P>
<P>
g++, libg++, libstdc++ を使用して問題があった場合は、
上記の configure によっておそらくこれらをいつも解決できるでしょう！

</P>
<P>
libg++ をインストールすることもできます。デフォルトの <TT>`configure'</TT> 
は <CODE>c++</CODE> をコンパイラ名として使用し、そして GNU <CODE>c++</CODE> は 
<CODE>-lg++</CODE> をリンクします。

</P>

<OL>
<LI>


<PRE>
making all in mit-pthreads
make: Fatal error in reader: Makefile, line 18: Badly formed macro assignment
</PRE>

これは、あなたの make を GNU <CODE>make</CODE> にアップグレードする必要がある
ことを意味します。
<LI>

あなたの C または C++ コンパイラにフラグを追加したい場合は、CC と CXX 環
境変数にフラグを追加してください。例えば:


<PRE>
CC="gcc -O4"
CXX="gcc -O4"
export CC CXX
</PRE>

<LI>

<CODE>make</CODE> が <CODE>Can't find Makefile.PL</CODE> で止まった場合、GNU
<CODE>make</CODE> を使用してみるべきです。Solaris と FreeBSD は厄介な 
<CODE>make</CODE> プログラムを持っていることが知られています。

<LI>

make からエラーメッセージを得て、エラーメッセージが次の形式の場合:
<CODE>pthread.h: No such file or directory</CODE>

これは <CODE>make</CODE> を GNU <CODE>make</CODE> にアップグレードする必要があること
を意味します (GNU <CODE>make</CODE> versoin 3.75 は働くことが知られています)。

<LI>

次のようなエラーメッセージを得る場合: <CODE>client/libmysql.c:273: parse
error before `__attribute__'</CODE>

これは gcc コンパイラ (2.7.2 は働くことが知られています) をアップグレー
ドする必要があることを意味します。

<LI>

configure が失敗して、<a HREF="mailto:mysql@tcx.se">mysql@tcx.se</a> にメールしようとする場合、
config.log から問題解決の助けになると考える数行を含めてください。また、
configure が異常終了する場合 configure からの出力の最後の数行も含めてく
ださい。バグはスクリプト 'mysqlbug' を使用して投稿してください。

<a HREF="mailto:mysql@tcx.se">mysql@tcx.se</a> に質問を投稿する時は <STRONG>常に <CODE>mysqlbug</CODE> 
を使用してください</STRONG>。 「<A HREF="manual_Questions.html#Bug reports">バグを見つけたと思う。私を助けるためにあなたが必要な情報は？</A>」節参照 。

問題がバグでないとしても、mysqlbug はあなたの他の問題を解決するのを助け
るようないくつかのシステム情報を収集します！

<LI>

mysqld または <STRONG>MySQL</STRONG> クライアントのデバッグが必要な場合、
configure を次のように実行してください:
<CODE>configure --with-debug=yes</CODE> そしてあなたのクライアントを
新しいクライアントライブラリとリンクしてください。

クライアントを実行する前に、次を行います:

<PRE>
MYSQL_DEBUG=d:t:O,/tmp/client.trace
export MYSQL_DEBUG
</PRE>

これでトレースファイル <TT>`/tmp/client.trace'</TT> が得られます。

<LI>

mysqld のコンパイル時に、次のような３つのエラーになる場合:

<PRE>
  cxx: Error: mysqld.cc, line 645: In this statement, the referenced type of
       the pointer value "&#38;length" is "unsigned long", which is not compatible
       with "int".
  new_sock = accept(sock, (struct sockaddr *)&#38;cAddr, &#38;length);
</PRE>

それは configure が、<CODE>accept()</CODE>, <CODE>getsockname()</CODE> そして 
<CODE>getpeername()</CODE> の最後の引数の型を決定できませんでした。次の行の後
を検索してください:


<PRE>
/* Define as the base type of the last arg to accept */
#define SOCKET_SIZE_TYPE ###
</PRE>

そして ### を、あなたの OS に依存して size_t または int に変更してくださ
い。

<LI>

あなたのクライアントコードに問題がある場合、バグレポートをメールする前に、
まず <CODE>mysql --debug=d:t:o,/tmp/client.trace</CODE> でテストしてください。
 「<A HREF="manual_Questions.html#Bug reports">バグを見つけたと思う。私を助けるためにあなたが必要な情報は？</A>」節参照 。
</OL>



<H2><A NAME="Compilation-notes" HREF="manual_toc.html#Compilation-notes">一般的なコンパイルの注意</A></H2>

<P>
全ての <STRONG>MySQL</STRONG> プログラムは(gcc 使用の Solaris 上で)綺麗に(警告無
しで)コンパイルします。しかし異なるシステム include ファイルのため、警告
が現れることがあります。mit-pthreads 使用時に発生する警告については次を
見てください。

</P>
<P>
sql_yacc.yy をコンパイルするためには bison を使用する必要があるでしょう。
次のようなエラーを得た場合:

<PRE>
"sql_yacc.yy", line xxx fatal: default action causes potential... 
</PRE>

<P>
bison (GNU yacc) をインストールする必要があります。<STRONG>MySQL</STRONG> は既に
コンパイルされた sql_yacc.cc ファイル付きなので、通常はこれを行う必要は
ありません。

</P>
<P>
スタティックリンクされたコードを持ちたい場合、(gcc で) 次を使用します:
<CODE>LDFLAGS="-static" ./configure ...</CODE>

</P>


<H2><A NAME="MIT-pthreads" HREF="manual_toc.html#MIT-pthreads">MIT-pthreads notes. (FreeBSD)</A></H2>

<P>
You can on most systems force the usage of mit-pthreads with the configure
switch <CODE>--with-mit-threads</CODE>.

</P>
<P>
Building in a non source directory is not supported when using
MIT-threads. This is because we want to keep our changes to this code
minimal.

</P>
<P>
MIT-pthreads doesn't support the <CODE>AF_UNIX</CODE> protocol so we must use
the TCP/IP protocol for all connections (which is a little slower).  If
you can't connect to a table, try using the host (<CODE>-h</CODE> or
<CODE>--host</CODE>) switch to <CODE>mysql</CODE>.  This must be done if you have
compiled the client code <CODE>--without-server</CODE> because the default
connection is to use Unix sockets.

</P>
<P>
<STRONG>MySQL</STRONG> compiled with MIT threads has system locking disabled by
default for performance reasons. One can start the server with system
locking with the <CODE>--use-locking</CODE> switch.

</P>
<P>
Sometimes (at least on Solaris) the pthread <CODE>bind()</CODE> command fails
to bind to a socket without any error message. The result of this is
that all connections to server fails.  

</P>

<PRE>
&#62; mysqladmin ver mysqladmin: connect to server at '' failed;
    error: 'Can't connect to mysql server on localhost (146)'
</PRE>

<P>
The solution to this is to kill the <CODE>mysqld</CODE> daemon and restart it.
This has only happened to us when we have forced the daemon down and done
a restart immediately.

</P>
<P>
<CODE>sleep()</CODE> isn't interruptible with <CODE>SIGINT</CODE> (break) with
MIT-threads. This is only notable in <CODE>mysqladmin --sleep</CODE>. One must
wait for the end of the <CODE>sleep()</CODE> before the interrupt is served
and the process stops.

</P>
<P>
We haven't got readline to work with MIT threads. (This isn't needed,
but may be interesting for someone)

</P>
<P>
When linking (at least on Solaris) you will receive warning messages
like:

</P>

<PRE>
ld: warning: symbol `_iob' has differing sizes:
	(file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
	/my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
ld: warning: symbol `__iob' has differing sizes:
	(file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
	/my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
</PRE>

<P>
Some other warnings which also can be ignored:

</P>

<PRE>
implicit declaration of function `int strtoll(...)'
implicit declaration of function `int strtoul(...)'
</PRE>



<H2><A NAME="Perl-installation" HREF="manual_toc.html#Perl-installation">Perl installation comments.</A></H2>

<P>
The included perl client code requires perl5.004 or later.

</P>
<P>
If you got a the following error (from mysqlperl or DBD-mysql):

</P>

<PRE>
/usr/bin/perl: can't resolve symbol '__moddi3'
/usr/bin/perl: can't resolve symbol '__divdi3'
</PRE>

<P>
You are probably using gcc (or using an old binary compiled with
gcc). Add <CODE>-L/usr/lib/gcc-lib/... -lgcc</CODE> to the link command when
the mysql.so library gets build (check the output for mysql.so when you
compile the perl client).
<CODE>-L/...</CODE>  is the path to the directory where <CODE>libgcc.a</CODE>
exists.

</P>
<P>
Another problem may be that perl and MySQL isn't both compiled with gcc.
In this case you can solve this by compile everything with gcc.

</P>
<P>
If you want to use the perl module on a system that doesn't support dynamic
linking (like SCO) you can always make a static version of perl with
DBI and DBD-mysql:

</P>
<P>
First you create a statically linked DBI by doing:

<PRE>
perl Makefile.PL LINKTYPE=static
make
make install
make perl
</PRE>

<P>
After this you must install the new perl. The output of <CODE>make perl</CODE> will
contain the exact make command!  On SCO this is
<CODE>make -f Makefile.aperl inst_perl MAP_TARGET=perl</CODE>

</P>
<P>
Next you create a statically linked DBD::mysql:

<PRE>
perl Makefile.PL LINKTYPE=static
make
make install
make perl
</PRE>

<P>
You should also install the new perl (see the DBI perl installation above).

</P>


<H2><A NAME="Machine-OS" HREF="manual_toc.html#Machine-OS">Special things to consider for some machine/OS combinations.</A></H2>



<H3><A NAME="Solaris" HREF="manual_toc.html#Solaris">Solaris notes.</A></H3>

<P>
Sun native threads only work on Solaris 2.5 and higher. For 2.4 and
earlier versions, you can use MIT-pthreads.  「<A HREF="manual_Installing.html#MIT-pthreads">MIT-pthreads notes. (FreeBSD)</A>」節参照 .

</P>
<P>
If there are too many processes that try to connect very rapidly to the
<CODE>mysqld</CODE> one will get <CODE>Error in accept : Protocol error</CODE> in
the mysql log.

</P>
<P>
If you have the Sun Workshop 4.2 compiler you can configure with:
<CODE>CC=cc CFLAGS="-Xa -fast -xstrconst -mt" CXX=CC CXXFLAGS="-xsb -noex -fast -mt"
./configure</CODE>

</P>
<P>
You may also have to change the row in configure:

</P>
<P>
<CODE>#if !defined(__STDC__) || __STDC__ != 1</CODE> to <CODE>#if
!defined(__STDC__)</CODE> because if you turn on <CODE>__STDC__</CODE> with the
<CODE>-Xc</CODE> switch, the Sun compiler can't compile with the Solaris
<TT>`pthread.h'</TT> header files anymore. This is a Sun bug (Broken
compiler or broken include file).

</P>
<P>
If the compiled <CODE>mysqld</CODE> gives a error like: <CODE>libc internal
error: _rmutex_unlock: rmutex not held</CODE> you have tried to compile
<STRONG>MySQL</STRONG> with the Sun compiler without enabling the multi thread switch
<CODE>-mt</CODE>. Add <CODE>-mt</CODE> to CFLAGS and CXXFLAGS and try again.

</P>
<P>
If you get the following error when compiling <STRONG>MySQL</STRONG> with gcc:

</P>

<PRE>
gcc -O3 -g -O2 -DDBUG_OFF  -o thr_alarm ...
./thr_alarm.c: In function `signal_hand':
./thr_alarm.c:556: too many arguments to function `sigwait'
</PRE>

<P>
This means that your gcc is not configured for your version of Solaris!
The proper thing to do in this case is to get the newest egcs or gcc version
and compile this with your current gcc compiler!
At least for Solaris 2.5, almost all binary versions of gcc have old, unusable
include files that will break all programs that use threads (and possible
other programs!)

</P>
<P>
The tar in Solaris can't handle long file names;  You may get the
following error (or something similar) when unpacking the <STRONG>MySQL</STRONG>
distribution:

</P>

<PRE>
x mysql-3.21.21a-beta-sun-solaris2.6-sparc/perl/Mysql-modules/blib/lib/auto/Msql-Mysql-modules, 0 bytes, 0 tape blocks
tar: directory checksum error
</PRE>

<P>
In this case you have to use gnu tar to unpack the distribution.
You can find copy of precompiled gnu tar (gtar) for Solaris at
<a HREF="http://www.mysql.com/Downloads/">http://www.mysql.com/Downloads/</a>

</P>


<H3><A NAME="SunOS" HREF="manual_toc.html#SunOS">SunOS 4 notes.</A></H3>

<P>
On SunOS 4, MIT-pthreads is needed. You must have GNU <CODE>make</CODE> to compile
(because of MIT-pthreads).

</P>
<P>
In readline you may get warnings about duplicate defines. These may be
ignored.

</P>
<P>
When compiling mysqld there will be some warnings about <CODE>implicit
declaration of function</CODE>. These may be ignored.

</P>


<H3><A NAME="Linux" HREF="manual_toc.html#Linux">Linux notes for all versions</A></H3>

<P>
On Linux you should use the <CODE>--skip-locking</CODE> flag to <CODE>mysqld</CODE>
if you start it yourself. Normally the demon is started by <CODE>safe_mysqld</CODE>
and the flag is added automatically. This flag is needed because a bug
in Linux file locking calls. This bug is known to exist as recently as
Linux version 2.0.33.

</P>
<P>
If you can't start mysqld or if mysql_install_db doesn't work, please
continue reading!  This only happens on Linux system with problems
in the Linuxthreads or libc/glibc library. There is a lot of simple
workarounds to get <STRONG>MySQL</STRONG> to work!  The simplest is to use the
binary version (not the RPM) of <STRONG>MySQL</STRONG> for Linux x86; One nice aspect
of this version is that it's probably 10% faster than any version
you would compile yourself! 
 「<A HREF="manual_Performance.html#Compile and link options"><STRONG>MySQL</STRONG> の速度に影響するコンパイルとリンク方法</A>」節参照 

</P>
<P>
When using LinuxThreads you will see a minimum of three processes
running. These are in fact threads. There will be one thread for the
Linux Threads manager, one thread to handle connections, and one thread
to handle alarms and signals.

</P>
<P>
if you are using RedHat you might get errors like:

</P>

<PRE>
/usr/bin/perl is needed...
/usr/sh is needed...
/usr/sh is needed...
</PRE>

<P>
If so upgrade rpm itself to rpm-2.4.11-1.i386.rpm &#38;
rpm-devel-2.4.11-1.i386.rpm (or later versions).

</P>
<P>
You can get the 4.2 updates from
<a HREF="ftp://ftp.redhat.com/updates/4.2/i386">ftp://ftp.redhat.com/updates/4.2/i386</a>. Or
<a HREF="http://www.sunsite.unc.edu/pub/Linux/distributions/redhat/code/rpm/">http://www.sunsite.unc.edu/pub/Linux/distributions/redhat/code/rpm/</a>
for other distributions.

</P>



<H4><A NAME="Linux-x86" HREF="manual_toc.html#Linux-x86">Linux-x86 notes.</A></H4>

<P>
LinuxThreads should be installed before configuring <STRONG>MySQL</STRONG>!

</P>
<P>
<STRONG>MySQL</STRONG> requires libc version 5.4.12 or newer. glibc version 2.0.6 and
later should also work. There has been some problems with the glibc rpms
from RedHat so if you have problems, check if there are any updates!

</P>
<P>
On some older Linux distributions <CODE>configure</CODE> may give a error
about: <CODE>Syntax error in sched.h. Change _P to __P in the
/usr/include/sched.h file.\
 See the Installation chapter in the Reference Manual</CODE>. Just do what the
error says and add a extra underscore to the <CODE>_P</CODE> macro that only
has one underscore. Then try again.

</P>
<P>
You may get some warnings when compiling: (these can be ignored)

</P>

<PRE>
mysqld.cc -o objs-thread/mysqld.o
mysqld.cc: In function `void init_signals()':
mysqld.cc:315: warning: assignment of negative value `-1' to `long unsigned int'
mysqld.cc: In function `void * signal_hand(void *)':
mysqld.cc:346: warning: assignment of negative value `-1' to `long unsigned int'
</PRE>

<P>
If you want in Debian GNU/Linux to get <STRONG>MySQL</STRONG> to auto start when
system boots, do the following:

</P>

<PRE>
&#62; cp scripts/mysql.server /etc/init.d/mysql.server
&#62; /usr/sbin/update-rc.d mysql.server defaults 99
</PRE>

<P>
If mysqld always core dumps when starting, the problem may be that you
have an old <TT>`/lib/libc.a'</TT>.  Try renaming this, remove sql/mysqld
and do a new make install and try again.  This problem has been reported
on some Slackware installations. RedHat 5.0 has also a similar problem with
some new glibc versions. More about this later.

</P>


<H4><A HREF="manual_toc.html#">RedHat 5.0</A></H4>

<P>
If you install all the official redhat patches (including glibc-2.0.6-9
and glibc-devel-2.0.6-9) it should work out of the box (se above for how
to configure).

</P>
<P>
The updates are needed since there is a bug in glibc 2.0.5 in how
pthread_key_create variables are freed. With glibc 2.0.5 you must use
the static-linked <STRONG>MySQL</STRONG> binary distribution. If you want to
compile from source you must install the corrected version of
Linuxthreads from <a HREF="http://www.tcx.se/Downloads/Linux">http://www.tcx.se/Downloads/Linux</a> or
upgrade your glibc.

</P>
<P>
If you have a wrong glibc or linuxthread version the symptom is that
mysqld crashes after each connections. For example <CODE>mysqladmin version</CODE>
will crash mysqld when it finishes!

</P>
<P>
Another symptom of wrong libraries is that mysqld crashes at once when it
starts. One some Linux systems this can be fixed by configuring with
<CODE>LDFLAGS=-static ./configure</CODE>.  On some RedHat 5.0 system it will only
work WITHOUT <CODE>LDFLAGS=-static</CODE>.  This is known to happen even with
new versions as glibc 2.0.7-4 !

</P>
<P>
For the source distribution of glibc 2.0.7 you can find a patch at
<a HREF="http://www.tcx.se/Download/Linux/glibc-2.0.7-total-patch.tgz">http://www.tcx.se/Download/Linux/glibc-2.0.7-total-patch.tgz</a>
that is easy to apply and is tested with <CODE>MySQL</CODE>!

</P>
<P>
If you experience crashes like these when you build <STRONG>MySQL</STRONG>, you can
always download the newest binary version of <STRONG>MySQL</STRONG>.  This is compiled
staticly to avoid library conflicts and should work on all Linux systems!

</P>
<P>
If you want to compile this yourself, check how to debug mysqld!
As <STRONG>MySQL</STRONG> comes with an internal debugger its very easy to get
a trace file that probably will help solve your problem very quickly!
 「<A HREF="manual_Porting.html#Debugging"><STRONG>MySQL</STRONG> のデバッグ</A>」節参照 

</P>


<H4><A NAME="Linux-Sparc" HREF="manual_toc.html#Linux-Sparc">Linux-Sparc notes.</A></H4>

<P>
In some implementations <CODE>readdir_r</CODE> is broken.  This will be
noticed when <CODE>SHOW DATABASES</CODE> always returns an empty set.  This
can be fixed by removing <CODE>HAVE_READDIR_R</CODE> from <TT>`config.h'</TT>.

</P>
<P>
Some problems will require patching your Linux installation.  The patch can
be found at
<a HREF="http://www.tcx.se/patches/Linux-sparc-2.0.30.diff">http://www.tcx.se/patches/Linux-sparc-2.0.30.diff</a>. This patch is
against the Linux distribution <TT>`sparclinux-2.0.30.tar.gz'</TT>, that is
available at vger.rutgers.edu.  This is a version Lf linux which was
never merged with the official 2.0.30.  You must also install
linuxthreads 0.6 or newer.

</P>
<P>
Thanks to jacques@solucorp.qc.ca for the above information.

</P>


<H4><A NAME="Linux-Alpha" HREF="manual_toc.html#Linux-Alpha">Linux-Alpha notes.</A></H4>

<P>
The first problem is linuxthreads.  You must patch linuxthreads for
alpha because the RedHat distribution uses an old (broken) linuxthreads
version.

</P>

<OL>
<LI>

Obtain the glibc2.5c source from any GNU ftp site.
<LI>

Get the file
<a HREF="ftp://www.tcx.se/pub/mysql/linux/patched-glibc-linuxthreads-0.6.tgz">ftp://www.tcx.se/pub/mysql/linux/patched-glibc-linuxthreads-0.6.tgz</a>.
This includes a fixed .c file.  Copy this to the glibc
<TT>`./linuxthreads'</TT> directory.
<LI>

Configure and compile glibc (You have to read the manual how to do this
together with linuxthreads). Don't install this!
<LI>

Rename your old version of /usr/lib/libpthread.a to /usr/lib/libpthread.a-old
<LI>

Copy the file glibc.../linuxthreads/libpthread.a to /usr/lib.
<LI>

Configure <STRONG>MySQL</STRONG> with (everything on one row):

<PRE>
CC=gcc CCFLAGS="-Dalpha_linux_port" CXX=gcc CXXFLAGS="-O3 -Dalpha_linux_port" ./configure --prefix=/usr/local/mysql
</PRE>

<LI>

Try to compile mysys/thr_lock and mysys/thr_alarm.  Test that these
work!
<LI>

Recompile mysqld.
</OL>

<P>
Note that Alpha-Linux is still an alpha platform for <STRONG>MySQL</STRONG>.  With RedHat
5.0 and the patched linuxthreads you have a very good chance of it working.

</P>


<H3><A NAME="Alpha-DEC-Unix" HREF="manual_toc.html#Alpha-DEC-Unix">Alpha-DEC-Unix notes.</A></H3>

<P>
When compiling threaded programs under Digital UNIX using CC / CXX the
documentation recommends the switch to cc and cxx and the libraries
<CODE>-lmach -lexc</CODE> (in addition to <CODE>-lpthread</CODE>).

</P>
<P>
So you have to configure with something like this:

</P>
<P>
<CODE>CC="cc -pthread" CXX="cxx -pthread -O" ./configure
-with-named-thread-libs="-lpthread -lmach -lexc -lc"</CODE>

</P>
<P>
When compiling mysqld you will may this warning for mysqld for a couple
of lines:

</P>

<PRE>
mysqld.cc: In function void handle_connections()':
mysqld.cc:626: passing long unsigned int *' as argument 3 of accept(int,sockad
ddr *, int *)'
</PRE>

<P>
You can safely ignore these. This is because configure can't detect
warnings, only errors.

</P>
<P>
You may get problems with the server exiting directly. If so, try
starting it with <CODE>nohup safe_mysqld [options]</CODE>

</P>
<P>
<CODE>nohup</CODE> is a command that ignores any <CODE>SIGHUP</CODE> sent from the
terminal.

</P>


<H3><A NAME="Alpha-DEC-OSF1" HREF="manual_toc.html#Alpha-DEC-OSF1">Alpha-DEC-OSF1 notes.</A></H3>

<P>
If you have problems compiling and have Dec CC and gcc installed you can try
the following compile line (with sh or bash):

</P>
<P>
CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql

</P>
<P>
On OSF1 V4.0D and compiler "DEC C V5.6-071 on Digital UNIX V4.0 (Rev. 878)"
the compiler had some strange behaviour (One gets undefined 'asm' symbols).
/bin/ld appears also to be broken (one gets _exit undefined when linking
mysqld).
On this we have managed to compile <STRONG>MySQL</STRONG> with the following configure line,
after replacing /bin/ld from OSF 4.0C:

</P>
<P>
CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql

</P>
<P>
In some versions of OSF1, the <CODE>alloca()</CODE> functions is broken. Fix
this by removing <CODE>'HAVE_ALLOCA'</CODE> from config.h.

</P>
<P>
The <CODE>alloca()</CODE> function can also have a wrong prototype in
<CODE>/usr/include/alloca.h</CODE>.  This warning can be ignored.

</P>
<P>
Configure will automaticly use the following thread libraries:
<CODE>-with-named-thread-libs="-lpthread -lmach -lexc -lc"</CODE>

</P>
<P>
When using gcc you can also try to use:

</P>
<P>
CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ....

</P>


<H3><A NAME="SGI-IRIX" HREF="manual_toc.html#SGI-IRIX">SGI-IRIX notes.</A></H3>

<P>
You may have to undefine some things in <TT>`config.h'</TT> (generated by
<TT>`./configure'</TT>).

</P>
<P>
In some Irix implementations the <CODE>alloca()</CODE> function is broken. If
the mysqld server dies on some selects, remove <CODE>HAVE_ALLOC</CODE> &#38;
<CODE>HAVE_ALLOCA_H</CODE> from <TT>`config.h'</TT>.  If mysqladmin create doesn't
work, remove <CODE>HAVE_READDIR_R</CODE> from config.h. Also you may have to
remove <CODE>HAVE_TERM_H</CODE>.

</P>
<P>
Irix 6.2 doesn't support POSIX threads out of of the box.  You have
install these patches, available from SGI if you have support:

</P>
<P>
1403, 1404, 1644, 1717, 1918, 2000, 2044

</P>
<P>
If you get the something like the following error when compiling mysql.cc:

</P>

<PRE>
"/usr/include/curses.h", line 82: error(1084): invalid combination of type
</PRE>

<P>
Type the following in the mysql installation directory:

</P>

<PRE>
&#62; extra/replace bool curses_bool &#60; /usr/include/curses.h &#62; include/curses.h
&#62; make
</PRE>

<P>
There have also been reports about scheduling problems. This is because
if only one thread is running, things go slow. Avoid this by starting
another client. This may lead to a 2-10 fold increase in execution speed
thereafter for the other thread.

</P>
<P>
This is a poorly-understood problem with IRIS threads, so you may have to
improvise to find solutions until this can be fixed.

</P>
<P>
If you are compiling with gcc, you can use the following configure line:

</P>
<P>
CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-thread-safe-client

</P>


<H3><A NAME="FreeBSD" HREF="manual_toc.html#FreeBSD">FreeBSD notes.</A></H3>

<P>
If you get a error on 'make install' that it can't find /usr/include/pthreads,
configure didn't detect that one neads mit-threads on FreeBSD. This is fixed
by doing:

</P>

<PRE>
rm config.cache
./configure --with-mit-threads
</PRE>

<P>
If you get link errors when compiling mysqlperl (Type
<CODE>ient.a(my_getwd.o): RRS text relocation at 0x9a9f for
"__db_pargs_"</CODE>)

</P>
<P>
You must recompile the Perl code with <CODE>-DPIC -fpic</CODE>.

</P>
<P>
Do the following:

</P>

<OL>
<LI>

First install everything.
<LI>

Change in <TT>`client/Makefile'</TT> the line: <CODE>CFLAGS = -g -O2</CODE> to
<CODE>CFLAGS = -O2 -DPIC -fpic</CODE>
<LI>

<CODE>cd client</CODE>
<LI>

<CODE>rm *.o</CODE>
<LI>

<CODE>make libmysqlclient.a</CODE>
<LI>

<CODE>cd ../perl</CODE>
<LI>

<CODE>make</CODE>
</OL>

<P>
This shall hopefully be handled automatically in the future.

</P>
<P>
The FreeBSD <CODE>make</CODE> behaviour is slightly different from GNU
<CODE>make</CODE>. If you have a problem that <TT>`perl/Makefile'</TT>
doesn't get generated, you should install GNU <CODE>make</CODE>.

</P>
<P>
If mysql or mysqladmin takes a long time to respond, a user said the
following:

</P>
<P>
Are you running the ppp user process? On ine FreeBSD box (2.2.5) MySQL
clients takes a couple of seconds to connect to mysqld if the ppp
process is running.

</P>
<P>
FreeBSD is also known to have a very low default file handle limit.
 「<A HREF="manual_Problems.html#Not enough file handles">File not found</A>」節参照 

</P>
<P>
If you have a problem that select NOW() returns GMT and not your local time,
you have to set the <CODE>TZ</CODE> environment variable to your current timezone.

</P>
<P>
Make sure that you modify the <CODE>/etc/hosts</CODE> file so that the
<CODE>localhost</CODE>  entry is correct (else you will have problems
connecting to the database).

</P>
<P>
If you are using FreeBSD 2.2.26:

</P>
<P>
Don't forget to apply the ttcp and mmap-22 patches to the OS (for security
reasons).  Please see <a HREF="http://www.freebsd.org">http://www.freebsd.org</a> for these CERT patches.

</P>



<H4><A NAME="FreeBSD-3.0" HREF="manual_toc.html#FreeBSD-3.0">FreeBSD-3.0 notes.</A></H4>

<P>
You have to configure with:

</P>
<P>
<CODE>--with-named-thread-libs=-lc_r</CODE>

</P>
<P>
The pthreads library for FreeBSD doesn't contain the <CODE>sigwait</CODE>
function and there is some bugs in it.  To fix this, get the
<TT>`FreeBSD-3.0-libc_r-1.0.diff'</TT> file and apply this in the
<TT>`/usr/src/lib/libc_r/uthread'</TT> directory. Follow after this the
instructions that can be found with <CODE>man pthread</CODE> about how to
recompile the <CODE>libc_r</CODE> library.

</P>
<P>
You can test if you have a 'modern' <CODE>libpthread.a</CODE> with:

</P>

<PRE>
&#62; nm /usr/lib/libc_r.a | grep sigwait.
</PRE>

<P>
If the above doesn't find <CODE>sigwait</CODE> you have to use the above patch
and recompile <CODE>libc_r</CODE>.

</P>


<H3><A NAME="BSDI2" HREF="manual_toc.html#BSDI2">BSD/OS 2.# notes</A></H3>

<P>
From Jan Legenhausen <a HREF="mailto:jleg@csl-gmbh.net">jleg@csl-gmbh.net</a>.

</P>
<P>
I finally got mysqlperl working on BSDI2.1.

</P>
<P>
What i did was almost nothing:

<OL>
<LI>

cd client
<LI>

Leave the Makefile as it is! (i use <CODE>GCC="shlicc2"</CODE> per default;
perl5 automagically uses shlicc2 - you should use _one_ version (either
<CODE>gcc</CODE> or <CODE>shlicc2</CODE>) for both <CODE>Mysql.c</CODE> and
<CODE>libmysqlclient.a</CODE>!)
<LI>

<CODE>rm *.o</CODE>
<LI>

<CODE>gmake libmysqlclient.a</CODE>
<LI>

<CODE>cd ../perl/mysqlperl</CODE>
<LI>

<CODE>make clean</CODE>
<LI>

add <CODE>$sysliblist=" -L$tmp -lgcc -lcompat";</CODE> to Makefile.PL line 45
(just to be sure - i didn't check if one could leave out this one)
<LI>

<CODE>perl Makefile.PL</CODE>
<LI>

remove all old <CODE>libmysqlclient.a</CODE>'s in <CODE>/usr/lib</CODE> and
<CODE>/usr/contrib/lib</CODE>
<LI>

<CODE>make install</CODE>
</OL>

<P>
If you get the following error when compiling <STRONG>MySQL</STRONG>:

</P>

<PRE>
item_func.h: In method `Item_func_ge::Item_func_ge(const Item_func_ge &#38;)':
item_func.h:28: virtual memory exhausted
make[2]: *** [item_func.o] Error 1
</PRE>

<P>
Then your ulimit for virtual memory is too low. Try using: <CODE>ulimit
-v 80000</CODE> and do <CODE>make</CODE> again.

</P>
<P>
If you are using gcc you can also add the flag '-fno-inline' to the compile
line when compiling sql_yacc.cc.

</P>
<P>
If you have a problem that select NOW() returns GMT and not your local time,
you have to set the <CODE>TZ</CODE> environment variable to your current timezone.

</P>



<H4><A NAME="BSDI3" HREF="manual_toc.html#BSDI3">BSD/OS 3.# notes.</A></H4>


<OL>
<LI>

Upgrade to BSD/OS 3.1. If that is not possible, install BSDIpatch M300-038.
<LI>

Use the following configuration when installing <STRONG>MySQL</STRONG>:

<PRE>
env CXX=shlicc++ CC=shlicc2 ./configure --prefix=/usr/local/mysql
--localstatedir=/var/mysql --without-perl
--with-unix-socket-path=/var/mysql/mysql.sock 
</PRE>

The following is also known to work:

<PRE>
env CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
--with-unix-socket-path=/var/mysql/mysql.sock 
</PRE>

<LI>

If you have problems with performance under heavy load, try using the
--skip-thread-prior switch to safe_mysqld!  This will run all threads
with the same priority and on BSDI 3.1 this gives better performance.
(At least until BSDI has fixed their thread scheduler).
</OL>

<P>
You can change the directory locations if you wish, or just use their
defaults by not specifying them.

</P>


<H3><A NAME="SCO" HREF="manual_toc.html#SCO">SCO notes.</A></H3>

<P>
The current port is only tested on a 'sco3.2v5.0.4' system.
There has also been a lot of progress on a port to 'sco 3.2v4.2'.

</P>

<OL>
<LI>

For OpenServer 5.0.X You need to use GDS in Skunkware 95 (95q4c).  This
is necessary because GNU gcc 2.7.2 in Skunkware 97 does not have GNU
<CODE>as</CODE>.
<LI>

You need the port of GCC 2.5.? for this product and the Developement
system.  They are required on this version of SCO UNIX.  You can not
just use the GCC Dev system.
<LI>

One should get FSU thread package and install this first.  This can be
found at:
<a HREF="http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz">http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz</a>
You can also get a precompiled package from:
<a HREF="ftp://www.tcx.se/pub/mysql/Downloads/SCO/FSU-threads-3.5c.tar.gz">ftp://www.tcx.se/pub/mysql/Downloads/SCO/FSU-threads-3.5c.tar.gz</a>
<LI>

FSU pthreads can be compiled with SCO UNIX 4.2 with tcpip.  Or
OpenServer 3.0 or Open Desktop 3.0 (OS 3.0 ODT 3.0), with the SCO
Developement System installed using a good port of GCC 2.5.X ODT or OS
3.0 you will need a good port of GCC 2.5.? There are a lot of problems
without a good port.  The port for this product requires the SCO UNIX
Developement system.  Without it, you are missing the libraries and the
linker that is needed.
<LI>

To build FSU pthreads in your system do the following:

<OL>
<LI>

Run ./configure in threads/src directory and select the SCO OpenServer
option. This command copy Makefile.SCO5 to Makefile.
<LI>

Run make.
<LI>

To install in default /usr/include directory, login as root and cd to
thread/src directory, run make install.
</OL>

<LI>

Remember to use GNU <CODE>make</CODE> when making <STRONG>MySQL</STRONG>.
<LI>

If you don't start safe_mysqld as root, you will probably only get the
default 110 open files per process.  mysqld will write a note about this
in the log file.
<LI>

With SCO 3.2V4.2 you must use a FSU-pthreads version 3.5c or newer.
The following configure line should work:

<PRE>
CFLAGS="-D_XOPEN_XPG4" CXX=gcc CXXFLAGS="-D_XOPEN_XPG4" ./configure
--with-debug=yes --prefix=/usr/local/mysql
--with-named-thread-libs="-lgthreads -lsocket -lgen -lgthreads"
--with-named-curses-libs="-lcurses"
--without-perl
</PRE>

You may get some problems with some include files. In this case you can
find new SCO specific include files at:
<a HREF="ftp://www.tcx.se/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz">ftp://www.tcx.se/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz</a>.
You should unpack this in the mysql-source-distributions/include directory!
</OL>

<P>
SCO development notes:

</P>

<UL>
<LI>

<STRONG>MySQL</STRONG> should automaticly detect FSU-threads and link mysqld
with: <CODE>-lgthreads -lsocket -lgthreads</CODE>
<LI>

The SCO development libraries are reentrant in FSU pthreads. SCO claims
that its libraries function are reentrant so they must be reentrant with
FSU pthreads. FSU pthreads on OpenServer tries to use the SCO scheme to
make reentrant library.
<LI>

FSU threads (at least the version at www.tcx.se) comes linked with
GNU malloc.  If you get problems with memory usage, check that gmalloc.o
is included in libgthreads.a and libgthreads.so
<LI>

In FSU pthreads, the following system calls are pthread aware: read,
write, getmsg, connect, accept, select and wait.
</UL>



<H3><A NAME="IBM-AIX" HREF="manual_toc.html#IBM-AIX">IBM-AIX notes.</A></H3>

<P>
When using the IBM compiler, something like this is needed:

</P>

<PRE>
CC="xlc_r -ma -O3 -qstrict" CXX="xlC_r -ma -O3 -qstrict" ./configure
</PRE>

<P>
Automatic detection of xlC is missing from autoconf. 

</P>


<H3><A NAME="HPUX" HREF="manual_toc.html#HPUX">HPUX notes.</A></H3>

<P>
There is a couple of 'small' problems when compiling mysql on HPUX.
Below we describe some problems and workarounds when using the HPUX compiler
and gcc 2.8.0 .

</P>
<P>
gcc 2.8.0 can't compile readline on HPUX (internal compiler error).
mit-pthreads can't be compiled with HPUX compiler, because it can't compile 
.S (assembler) files.

</P>
<P>
We got <STRONG>MySQL</STRONG> to compile on HPUX 10.20 by doing the following:

<PRE>
CC=cc CFLAGS="+z +e -Dhp9000s800 -D__hpux__" CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-low-memory
cd mit-pthreads
rm config.cache
CC=gcc CXX=gcc ./configure
cd ..
make
make install
scripts/mysql_install_db
</PRE>



<H2><A NAME="Win32" HREF="manual_toc.html#Win32">Win32 notes</A></H2>

<P>
The <STRONG>MySQL</STRONG>-win32 version has by now proven itself to be very
stable. The <STRONG>MySQL</STRONG>-win32 version has all the features as the
corresponding Unix version of <STRONG>MySQL</STRONG> with the following exceptions:

</P>
<DL COMPACT>

<DT><CODE>ALTER TABLE</CODE>
<DD>
One can't do a <CODE>ALTER TABLE</CODE> on file if it is hold open by another thread
or the table cache.  On <STRONG>MySQL</STRONG>-win32 I have added code to close the
file owned by the thread that does <CODE>ALTER TABLE</CODE> but <STRONG>MySQL</STRONG>
can't yet close the the file descriptors used by other threads. We have to do
a major recode of the file lock system to handle this. For now, when using
<CODE>ALTER TABLE</CODE>, one must be sure that no other threads are using the table.
One can be sure of this by doing a 'mysqladmin refresh' before doing an
<CODE>ALTER TABLE</CODE>.
<DT><CODE>Increasing the table cache</CODE>
<DD>
Win32 has only a very limited number of open files it can handle at the
the same time (about 255). Because of this one shouldn't increase the
number of open connections or number of cached tables very much on Win32.
<DT><CODE>Win95 and threads</CODE>
<DD>
Win95 leaks memory for each threads.  Because of this one shouldn't
run mysqld for an extended time on Win95 if one does many connections as each
connection in <STRONG>MySQL</STRONG> creates a new thread!  NT doesn't suffer from this bug.
</DL>

<P>
Other win32 specific issues are described in the README file that comes
with the <STRONG>MySQL</STRONG>-win32 distribution.

</P>


<H2><A NAME="Install-binary" HREF="manual_toc.html#Install-binary">Installation instructions for <STRONG>MySQL</STRONG> binary release</A></H2>

<P>
<STRONG>Please</STRONG> always use the mysqlbug script when posting questions to the
mailinglist (<a HREF="mailto:mysql@tcx.se">mysql@tcx.se</a>). Even if the problem isn't a bug,
mysqlbug gathers some system information that will help other solve your
problem!  「<A HREF="manual_Questions.html#Bug reports">バグを見つけたと思う。私を助けるためにあなたが必要な情報は？</A>」節参照 .

</P>

<OL>
<LI>

Get the distribution. That is a file called something like
mysql-version-OS.tgz. For example a file holding a <STRONG>MySQL</STRONG>
version 3.21.15 for a intel linux machine is called
<TT>`mysql-3.21.15-alpha-pc-linux-gnu-i586.tgz'</TT>.
<LI>

Pick a directory to put <STRONG>MySQL</STRONG> in: In the following we will use
<TT>`/usr/local/mysql'</TT> as the installation directory and <STRONG>MySQL</STRONG>
version VERSION (something like 3.21.15) for SunOS5 (Solaris), for
example.
<LI>

All of the following instructions assume you have permission to create
files in <TT>`/usr/local'</TT>.

Use the following commands to create the directory and unpack the
distribution:


<PRE>
&#62; cd /usr/local
&#62; zcat /&#60;where ever you put it&#62;/mysql-3.20.0-SunOS5.tgz | tar xvf -
&#62; ln -s mysql-VERSION mysql
</PRE>

<LI>

After this you should install the <STRONG>MySQL</STRONG> privilege tables.

In some binary versions the grant tables may already be created, for
others distributions you should edit the <TT>`scripts/mysql_install_db'</TT>
script to have the privileges you want and run it. The default
privileges is that anybody may create/use the databases named 'test' or
starting with "test_". The <STRONG>MySQL</STRONG> user root can do
anything. Note that you do not have to run the <STRONG>MySQL</STRONG> server as
root. Any user is ok as long as it can read and write in the installtion
directories/files.

If you want to recreate the privilege tables remove all the *.ISM and
 *.ISD files in the mysql database directory, edit the
scripts/mysql_install_db script to have the privileges you want and run
it.

This creates the privilige tables if they don't exist:

<PRE>
&#62; scripts/mysql_install_db
</PRE>

 「<A HREF="manual_Installing.html#mysql_install_db">mysql_install_db 実行時の問題</A>」節参照 

If you want to change things in the grant tables after installing you
should use <CODE>mysql -u root mysql</CODE> to connect to the grant tables
as the 'root' user.

The <CODE>mysql_install_db</CODE> script also starts the <CODE>mysqld</CODE> daemon.

<LI>

Normally, start the <STRONG>MySQL</STRONG> server daemon (not needed the first
time):


<PRE>
&#62; bin/safe_mysqld --log &#38;
</PRE>

<LI>

You can test that the daemon is running by doing this:


<PRE>
&#62; bin/mysqladmin ver
</PRE>

That should print something like this. The exact output depends on you
platfrom and use.

<PRE>
bin/mysqladmin  Ver 6.3 Distrib 3.21.15-alpha, for SOLARIS 2.5 on SPARCstation
TCX Datakonsult AB, by Monty

Server version          3.21.15-alpha
Protocol version        9
Connection              Localhost via UNIX socket
TCP port                3306
UNIX socket             /tmp/mysql.sock
Uptime:                 2 days 1 hour 42 min 3 sec

Running threads: 2  Questions: 450378  Reloads: 17  Open tables: 64
</PRE>

</OL>



<H3><A HREF="manual_toc.html#">To get perl work do the following:</A></H3>


<PRE>
cd perl/DBI
perl Makefile.PL
make
make install
cd ../Mysql-modules
perl Makefile.PL
make
make install
</PRE>

<P>
You should use the <CODE>safe_mysqld</CODE> script to the server.
<CODE>safe_mysqld</CODE> expects one of two conditions to be true:

</P>

<OL>
<LI>

You're executing the script from the base mysql installation directory
(for example <CODE>/usr/local/mysql</CODE>)
<LI>

The server should reside in <CODE>/my/</CODE>.  To get it to run correctly,
you should cd to <CODE>/usr/local/mysql</CODE> and then execute
<CODE>safe_mysqld</CODE> or modify the script so that it expects the base
mysql directory to be <TT>`/usr/local/mysql'</TT> rather than the default
<TT>`/my/'</TT>.
</OL>

<P>
When you execute this:

</P>

<PRE>
&#62; bin/mysqld --help
</PRE>

<P>
You will get the options for mysqld (and safe_mysqld) and the current
paths. Normally you only should need to change the
<CODE>--basedir=path</CODE>. You can test the path switches by executing:

</P>

<PRE>
&#62; bin/mysqld --basedir=/usr/local --help
</PRE>

<P>
If you would like to use mysqlaccess and have the mysql distribution in
some nonstandard place, you must change the path to mysql in
mysqlaccess. <CODE>bin/mysqlaccess</CODE> about line 308:

</P>

<PRE>
$MYSQL = '/usr/local/bin/mysql --batch --unbuffered';
</PRE>

<P>
If you don't change the path, you will get a 'broken pipe' error when
using mysqlaccess.

</P>
<P>
If you would like <STRONG>MySQL</STRONG> to start when you boot your machine,
you can copy <CODE>bin/mysql.server</CODE> to where your system has it startup
files. More information can be bound in the bin/mysql.server script
itself.

</P>


<H3><A HREF="manual_toc.html#">Linux notes.</A></H3>


<UL>
<LI>

MySQL needs at least Linux 2.0.
<LI>

The binary release is linked with -static, which means that you don't have
to worry about which version of your system libraries. You don't have
to install LinuxThreads either.  A program linked with -static is slightly
bigger but also slighty faster (3-5%) than a dynamicly linked program. The
only problem is that you can't use UDF (user definable functions) with
a -static program.  If you are going to write or use UDF functions (this is
only something for C or C++ programmers) you have to compile <STRONG>MySQL</STRONG>
yourself.
<LI>

The Linux-intel binary release of MySQL is configured for the highest possible
speed (we are even using the pentium compiler, pgcc):

<PRE>
CC=gcc
CFLAGS="-O6 -mpentium -mstack-align-double -fomit-frame-pointer"
CXX=gcc
CXXFLAGS=-O6 -mpentium -mstack-align-double -fomit-frame-pointer -felide-constructors"
LDFLAGS=-static
./configure --prefix=/usr/local/mysql -enable-assembler
</PRE>

All of the above is typed as one long line!
<LI>

The perl distribution needs perl5.004.03 or newer.
</UL>



<H3><A HREF="manual_toc.html#">HP/UX notes.</A></H3>

<P>
The binary distribution of <STRONG>MySQL</STRONG> for HP/UX is distributed as an
HP depot file.  This means that you must be running at least HP/UX 10.x
to have access to HP's software depot tools.

</P>
<P>
This version of <STRONG>MySQL</STRONG> was compiled on an HP 9000/8xx server
under HP/UX 10.20, and uses MIT Pthreads. It is known to work
well under this configuration. This version does <STRONG>not</STRONG> use HP's native
thread package. It is highly unlikely that <STRONG>MySQL</STRONG> will use HP native
threads on anything but HP/UX 10.30 or later.

</P>
<P>
Other configurations that may work:

</P>
<P>
9000/7xx - HP/UX 10.20+
9000/8xx - HP/UX 10.30 (does not use HP native threads)

</P>
<P>
The following configurations almost definitely won't work:

</P>
<P>
9000/7xx or 8xx - HP/UX 10.x where x &#60; 2
9000/7xx or 8xx - HP/UX 9.x

</P>
<P>
To install (everything, including server, client and development tools):

</P>
<P>
/usr/sbin/swinstall -s &#60;full path to the depot file&#62; mysql.full

</P>
<P>
To install server only:

</P>
<P>
/usr/sbin/swinstall -s &#60;full path to the depot file&#62; mysql.server

</P>
<P>
To install client pack only:

</P>
<P>
/usr/sbin/swinstall -s &#60;full path to the depot file&#62; mysql.client

</P>
<P>
To install development tools only:

</P>
<P>
/usr/sbin/swinstall -s &#60;full path to the depot file&#62; mysql.developer

</P>
<P>
The depot will place binaries/libraries in /opt/mysql and data in
/var/opt/mysql. The depot will also create the appropriate entries in
/sbin/init.d and /sbin/rc2.d to automatically start the server on boot. This
obviously entails being root to install.

</P>
<P>
<A NAME="IDX24"></A>
<A NAME="IDX25"></A>


<H3><A HREF="manual_toc.html#">Linking client libraries</A></H3>

<P>
Clients have to be linked with: <CODE>-lmysqlclient</CODE>

</P>


<H2><A NAME="mysql_install_db" HREF="manual_toc.html#mysql_install_db">mysql_install_db 実行時の問題</A></H2>

<P>
デフォルト特権では、だれでも <CODE>test</CODE> という名前、または <CODE>test_</CODE> 
で始まる名前のデータベースを作成/使用できます。<CODE>root</CODE> は全てを行え
ます。 「<A HREF="manual_Privilege_system.html#Privileges">特権システムがどのように働くか？</A>」節参照 。

</P>
<P>
デフォルトを変更するには、そのスクリプトを実行する前に編集します。これが 
<STRONG>MySQL</STRONG> の初めてのインストールであれば、このコマンドを実行する必
要があります。これを行わなければ次のエラーを得るでしょう: <CODE>Can't
find file: './mysql/host.frm'</CODE>。このスクリプトは、初回時には mysqld デー
モンも開始します。

</P>
<P>
インストール後に承認テーブル内を変更したい場合は、'root' ユーザとして承
認テーブルに接続するために <CODE>mysql -u root mysql</CODE> を使用してください。

</P>
<P>
通常の <STRONG>MySQL</STRONG> サーバデーモンを開始する(初回時には必要ありません)
には: <CODE>'installation_directory'/bin/safe_mysqld --log</CODE>

</P>
<P>
<CODE>mysql_install_db</CODE> が特権テーブルをインストールせずに、次で終わるこ
とがあります:

</P>

<PRE>
Starting mysql server
starting mysqld demon with databases from xxxxxx
mysql demon ended
</PRE>

<P>
この場合、xxxxxx ディレクトリ内のログをかなり慎重に検査すべきです！ これ
は mysqld が開始しなかった理由を含んでいます。何が起こったかを理解できな
い場合は、バグレポートを mysqlbug を使って投稿する時に、少なくともログを
含めるべきです。

</P>
<P>
<CODE>mysql_install_db</CODE> 実行時に起こりうる問題は:

</P>
<DL COMPACT>

<DT><CODE>既に動いている mysqld デーモンがある。</CODE>
<DD>
この場合、mysql_install_db を実行する必要は全くありません。
mysql_install_db を実行する必要があるのは、<STRONG>MySQL</STRONG> を最初にインス
トールした時だけです。

<DT><CODE>二番目の mysqld デーモンのインストールは、他のデーモンが実行中は働かない。</CODE>
<DD>
問題は、新しいサーバが古いものと同じソケットとポートを使用するように試み
ることです。
次のように、異なるソケットとポートで新しいサーバを開始できます:


<PRE>
MYSQL_UNIX_PORT=/tmp/mysqld-new.sock
MYSQL_TCP_PORT=3307
export MYSQL_UNIX_PORT MYSQL_TCP_PORT
scripts/mysql_install_db
</PRE>

この後、異なるソケットとポートでデーモンを開始するようにサーバのブートス
クリプトを編集すべきです (safe_mysqld --socket=...  --port=....)。

<DT><CODE>mysqld が突然クラッシュする。</CODE>
<DD>
RedHat 5.0 と glibc 2.0.7-5 より前のバージョンの glibc を実行する場合、
全ての glibc パッチをインストールしてあるかをチェックすべきです！
<CODE>MySQL</CODE> メールアーカイブ中にこれについての情報が多くあります。
 「<A HREF="manual_Installing.html#Linux">Linux notes for all versions</A>」節参照 

<DT><CODE>サーバに接続できない (mit-threads 使用時)</CODE>
<DD>
<CODE>mysql_install_db</CODE> がサーバに接続できないときは、<TT>`/etc/hosts'</TT> 
ファイル中に次のようなエントリがあることをチェックすべきです:


<PRE>
127.0.0.1		localhost
</PRE>

上記はスレッドライブラリを持たないシステムで、<STRONG>MySQL</STRONG> が 
mit-threads を使用する必要がある時だけでの問題です。

<DT><CODE>(/tmp に?)ソケットファイルの生成するための書き込み権がない</CODE>
<DD>
この場合、mysqld を手動で開始し、自分の特権情報を追加する必要があります。
バイナリバージョンを使用していて、/usr/local/mysql にインストールしてい
ない場合は、mysqld のパスを引数付きで指定すべきです。
<CODE>mysqld --help</CODE> で mysqld が使用するパスと変更方法についての情報を
得ることができます。次を行うことで、safe_mysqld にパスを指定することもで
きます:


<PRE>
MYSQL_UNIX_PATH=/some_directory_for_tmp_files/mysqld.sock
MYSQL_TCP_PORT=3306
TMPDIR=/some_directory_for_tmp_files/
export MYSQL_UNIX_PATH MYSQL_TCP_PORT TMPDIR

scripts/mysql_install_db
   or
bin/mysqld --skip-grant

bin/mysql -u root mysql
</PRE>

この後、mysql_install_db 内の sql コマンドを実行できます。
<DT><CODE>パスが mysqld が期待するものと異なる。</CODE>
<DD>
コマンドライン引数で mysqld の全てのパスを上書きできます。詳細は 
<CODE>mysqld --help</CODE> を使用してください。bin/safe_mysqld を編集して、あ
なたのインストールのパスを反映できます。
</DL>

<P>
全てが働くかを調べる簡単なテストは:
<CODE>bin/mysqladmin version</CODE>

</P>


<H2><A NAME="Starting MySQL" HREF="manual_toc.html#Starting MySQL"><STRONG>MySQL</STRONG> 起動の問題</A></H2>

<P>
mysqld が正常に開始したかどうかを見るには、ログファイルをチェックしてく
ださい。

</P>
<P>
<CODE>mysqld</CODE> デーモンは 'mysql-data-dir' へ cd して開始します。この後、
mysqld-data-dir が './' (カレントディレクトリ) に変更されます。全てのパ
ス (データベース, pid ファイル, そしてログファイル) はこのディレクトリを
ベースパス './' とします。何らかの正しくないパスの問題がある場合は、あな
たのカレントパスを見るために <CODE>mysqld --help</CODE> を試して下さい。全ての
パスは、<CODE>safe_mysqld</CODE> または <CODE>mysqld</CODE> への開始オプションによっ
て変更できます。

</P>

<PRE>
cd &#60;localstatedir default /usr/local/var&#62;
tail &#60;your host name&#62;.log
</PRE>

<P>
<STRONG>MySQL</STRONG> が動いていることを確かめるには、次のテストを実行してくだ
さい:

</P>

<PRE>
&#62; cd /usr/local/bin
&#62; ./mysqlshow
+-----------+
| Databases |
+-----------+
| mysql     |
+-----------+

&#62; ./mysqlshow mysql
Database: mysql
+--------+
| Tables |
+--------+
| db     |
| host   |
| user   |
+--------+

&#62; ./mysql -e "select host,db,user from db" mysql
+------+--------+------+
| host | db     | user |
+------+--------+------+
| %    | test   |      |
| %    | test_% |      |
+------+--------+------+
</PRE>

<P>
ベンチマークスイートもあるので、異なるプラットフォーム上で 
<STRONG>MySQL</STRONG> 性能を比較できます。近い将来、<STRONG>MySQL</STRONG> を他の SQL 
データベースと比較できるようにもなります。

</P>

<PRE>
&#62; cd bench
&#62; run-auto-increment-test
</PRE>

<P>
test サブディレクトリ内のテストを実行することもできます。
<TT>`auto_increment.tst'</TT> を実行するには:

</P>

<PRE>
./mysql -vf test &#60; ./tests/auto_increment.tst
</PRE>

<P>
期待される結果はファイル <TT>`./tests/auto_increment.res'</TT> 内に見られま
す。

</P>
<P>
safe_mysqld スクリプトは、わずかに異なるパスだったとしても、mysqld のソー
スとバイナリバージョンを開始できるように書かれています！

</P>
<P>
インストールディレクトリから safe_mysqld を開始する限り、あなたはどこに
でも <STRONG>MySQL</STRONG> のバイナリリリースをインストールできます:

</P>

<PRE>
cd mysql_installation_directory
bin/safe_mysqld &#38;
</PRE>

<P>
mysqld の開始オプションを変更したい場合は、いつでも safe_mysqld を編集で
きます！ この場合、いつか MySQL のアップグレードを決めるときに 
safe_mysqld を上書きしないように、どこか他の場所にコピーすべきです！

</P>



<H2><A NAME="Automatic start" HREF="manual_toc.html#Automatic start"><STRONG>MySQL</STRONG> の自動起動/停止</A></H2>

<P>
<STRONG>MySQL</STRONG> を起動または停止するには、次のコマンドを使用します:

</P>

<PRE>
scripts/mysql.server stop
scripts/mysql.server start
</PRE>

<P>
<STRONG>MySQL</STRONG> を製品アプリケーションに使用するために起動する時は、この
起動と停止のコマンドを <TT>`/etc/rc*'</TT> ファイル内の適切な場所に追加しま
す。固有の場所から、そして固有のユーザで safe_mysqld を開始するように
mysql.server スクリプトを編集できます。またここで mysqld への開始オプショ
ンを追加することもできます。

</P>
<P><HR><P>
Go to the <A HREF="manual_Introduction.html">first</A>, <A HREF="manual_Licensing_and_Support.html">previous</A>, <A HREF="manual_Compatibility.html">next</A>, <A HREF="manual_Concept_Index.html">last</A> section, <A HREF="manual_toc.html">table of contents</A>.
 </BODY>
 </HTML>
