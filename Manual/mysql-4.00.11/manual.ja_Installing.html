<html><head>
  <!-- This HTML file has been created by texi2html 1.52 (hacked by david@detron.se)
     from manual.ja.texi on 20 March 2003 -->

  <title>MySQL Reference Manual for version 4.0.11-gamma. - 2  MySQL のインストール</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body bgcolor="silver" text="#000000" link="#101090" vlink="#7030B0">
Go to the <a href="manual.ja_Introduction.html">first</a>, <a href="manual.ja_Introduction.html">previous</a>, <a href="manual.ja_Tutorial.html">next</a>, <a href="manual.ja_Concept_Index.html">last</a> section, <a href="manual.ja_toc.html">table of contents</a>.
<p></p><hr><p>


</p><h1><a name="Installing" href="manual.ja_toc.html#Installing">2  MySQL のインストール</a></h1>

<p>
<a name="IDX167"></a>

</p>

<p>
この章では、どのようにして MySQL を得、インストールするのかをのべます: 

</p>

<ul>
<li>

MySQL を得ることができるサイトのリスト →
 「<a href="manual.ja_Installing.html#Getting_MySQL">2.2.1  MySQL を得る方法</a>」節.

</li><li>

どのプラットフォームをサポートしているかは →  「<a href="manual.ja_Installing.html#Which_OS">2.2.5  MySQL がサポートする OS</a>」節. Please note that
not all supported systems are equally good for running MySQL on them.
On some it is much more robust and efficient than others-see  「<a href="manual.ja_Installing.html#Which_OS">2.2.5  MySQL がサポートする OS</a>」節
for details.

</li><li>

MySQL のいくつかのバージョンは、バイナリ、ソース両方の配布物があります。
最も新しい開発を見たいという人と、新しいコードをテストして我々を助けたいと
いう人のために、現在のソースツリーへのアクセスも公開します。
どのバージョンを使用するのか、どのタイプを使用するかを決めるためには
 →  「<a href="manual.ja_Installing.html#Which_version">2.2.6  使用すべき MySQL のバージョン</a>」節. 
迷った時はバイナリディストリビューションを使用してください。

</li><li>

バイナリとソースのインストールについては →
  「<a href="manual.ja_Installing.html#Installing_binary">2.2.10  Installing a MySQL Binary Distribution</a>」節, と  「<a href="manual.ja_Installing.html#Installing_source">2.3  MySQL ソースディストリビューションのインストール</a>」節.
それぞれのセットには、あなたが出くわすかもしれない
システムに特有の問題のセクションが含まれます。

</li><li>

インストール後に行うことの説明は →  「<a href="manual.ja_Installing.html#Post-installation">2.4  インストール後の設定とテスト</a>」節. 
MySQL のインストールにおいて、バイナリまたはソース配布にかかわらず、
これらのプロシージャは適用します。
</li></ul>



<h2><a name="Quick_Standard_Installation" href="manual.ja_toc.html#Quick_Standard_Installation">2.1  Quick Standard Installation of MySQL</a></h2>



<h3><a name="Linux-RPM" href="manual.ja_toc.html#Linux-RPM">2.1.1  Installing MySQL on Linux</a></h3>

<p>
<a name="IDX168"></a>
<a name="IDX169"></a>
<a name="IDX170"></a>

</p>
<p>
（訳注：もし RedHat 以外の Linux を使用しており、.rpm を、自分が使用している
パッケージ管理システムの管理下におきたい場合、
<strong>alien : http://kitenet.net/programs/alien/</strong> というツールを
使用します。これは RPM(Debian, Slackware) を自分が使用しているパッケージの形式に変換してくれます。）

</p>
<p>
RPM を使用して MySQL をインストールすることを推奨します。
MySQL RPM は SuSE Linux 7.3 で作成していますが、
他の <code>rpm</code> と <code>glibc</code> をサポートしている Linux でも動作するでしょう。

</p>
<p>
RPM file での問題, 例えば, ``<code>Sorry, the host 'xxxx' could not be looked up</code>''
に遭遇した場合には →  「<a href="manual.ja_Installing.html#Binary_notes-Linux">2.6.1.1  Linux Notes for Binary Distributions</a>」節.

</p>
<p>
以下が使用するであろう RPM files です:

</p>

<ul>
<li><code>MySQL-server-VERSION.i386.rpm</code>

MySQL サーバー。
ただ単に他のマシン上で走っている MySQL サーバーに接続するだけなら、
これは不要でしょう。
Please note,
that this package was called <code>MySQL-VERSION.i386.rpm</code> before
MySQL 4.0.10.

</li><li><code>MySQL-client-VERSION.i386.rpm</code>

MySQL クライアント標準プログラム。
このパッケージはほとんどの場合インストールすることになるでしょう。

</li><li><code>MySQL-bench-VERSION.i386.rpm</code>

Tests and benchmarks. Requires Perl and msql-mysql-modules RPMs.

</li><li><code>MySQL-devel-VERSION.i386.rpm</code>

他の MySQL クライアント(perlモジュールのような)をコンパイルするのに必要な
ライブラリーとインクルードファイルを含みます。

</li><li><code>MySQL-shared-VERSION.i386.rpm</code>

This package contains the shared libraries (<code>libmysqlclient.so*</code>)
which certain languages and applications need to dynamically load and
use MySQL.

</li><li><code>MySQL-embedded-VERSION.i386.rpm</code>

The embedded MySQL server library (MySQL 4.x and onwards only).

</li><li><code>MySQL-VERSION.src.rpm</code>

上記全てのソース。これは他のアーキテクチャ用に RPM を作成する場合にのみ必要でしょう。
(例えば Alpha や SPARC).
</li></ul>

<p>
To see all files in an RPM package, run:

</p><pre>shell&gt; rpm -qpl MySQL-VERSION.i386.rpm
</pre>

<p>
インストールの最小の方法：

</p>

<pre>shell&gt; rpm -i MySQL-server-VERSION.i386.rpm MySQL-client-VERSION.i386.rpm
</pre>

<p>
クライアントパッケージだけをインストール：

</p>

<pre>shell&gt; rpm -i MySQL-client-VERSION.i386.rpm
</pre>

<p>
RPM はデータを <tt>`/var/lib/mysql'</tt> に保存します。
RPM は起動時にサーバーを立ちあげるように、<tt>`/etc/init.d/'</tt> に登録します。
(以前にインストールがされていて、前にインストールされた MySQL 起
動ファイルを何か変更している場合、それをコピーしておいた方がいいでしょう。
そうすればその変更を失うことはありません。)

</p>
<p>
If you want to install the MySQL RPM on older Linux distributions that do
not support init scripts in <tt>`/etc/init.d'</tt> (directly or via a symlink),
you should create a symbolic link pointing to the old location before
installing the RPM:

</p>

<pre>shell&gt; cd /etc ; ln -s rc.d/init.d .
</pre>

<p>
However, all current major Linux distributions should already support this
new directory layout as it is required for LSB (Linux Standard Base)
compliance.

</p>
<p>
RPM ファイルのインストール後は、<code>mysqld</code> デーモンが実行されていて、
MySQL の使用を開始することができます。
 「<a href="manual.ja_Installing.html#Post-installation">2.4  インストール後の設定とテスト</a>」節参照.

</p>
<p>
うまくいかない場合、バイナリインストールの章でさらに情報を探すことができま
す。  「<a href="manual.ja_Installing.html#Installing_binary">2.2.10  Installing a MySQL Binary Distribution</a>」節参照.

</p>



<h3><a name="Windows_installation" href="manual.ja_toc.html#Windows_installation">2.1.2  Windows への MySQL のインストール</a></h3>

<p>
Windows用の MySQLサーバ には，２つの配布形態があります。:

</p><ol>
<li>

バイナリ配布は，セットアッププログラムが含まれ，必要な全てのインストール作業を行い，
あなたは直ぐにサーバをスタートさせることができます。
</li><li>

The source distribution contains all the code and support files
for building the executables using the VC++ 6.0 compiler.
 「<a href="manual.ja_Installing.html#Windows_source_build">2.3.7  Windows Source Distribution</a>」節参照.
</li></ol>

<p>
大雑把な言い方をすると，バイナリ配布を使用する方がいいでしょう。

</p>
<p>
You will need the following:

</p><ul>
<li>

A 32-bit Windows Operating System such as 9x, Me, NT, 2000, or XP.
The NT family (NT, Windows 2000 and XP) permits running the MySQL server
as a service.  「<a href="manual.ja_Installing.html#NT_start">2.6.2.2  Starting MySQL on Windows NT, 2000 or XP</a>」節参照.

If you want to use tables bigger than 4G, you should install MySQL
on an NTFS or newer filesystem. Don't forget to use <code>MAX_ROWS</code> and
<code>AVG_ROW_LENGTH</code> when you create the table.  「<a href="manual.ja_Reference.html#CREATE_TABLE">6.5.3  <code>CREATE TABLE</code> 構文</a>」節参照.
</li><li>

TCP/IP protocol support.
</li><li>

A copy of the MySQL binary or distribution for Windows, which
can be downloaded from <a href="http://www.mysql.com/downloads/">http://www.mysql.com/downloads/</a>.

Note: The distribution files are supplied with a zipped format
and we recommend the use of an adequate FTP client with resume
feature to avoid corruption of files during the download process.
</li><li>

A <code>ZIP</code> program to unpack the distribution file.
</li><li>

Enough space on the hard drive to unpack, install, and create the
databases in accorandance with your requirements.
</li><li>

If you plan to connect to the MySQL server via <code>ODBC</code>, you
will also need the <code>MyODBC</code> driver.  「<a href="manual.ja_Clients.html#ODBC">8.3  MySQL ODBC サポート</a>」節参照.
</li></ul>



<h4><a name="Windows_binary_installation" href="manual.ja_toc.html#Windows_binary_installation">2.1.2.1  Installing the Binaries</a></h4>


<ol>
<li>

If you are working on an NT/2000/XP server, logon as a user with
administrator privileges.
</li><li>

If you are doing an upgrade of an earlier MySQL installation,
it is necessary to stop the server. If you are running the server
as a service, use:


<pre>C:\&gt; NET STOP MySQL
</pre>

Otherwise, use:


<pre>C:\mysql\bin&gt; mysqladmin -u root shutdown
</pre>

</li><li>

On NT/2000/XP machines, if you want to change the server executable
(e.g., -max or -nt), it is also necessary to remove the service:


<pre>C:\mysql\bin&gt; mysqld-max-nt --remove
</pre>

</li><li>

Unzip the distribution file to a temporary directory.
</li><li>

Run the <tt>`setup.exe'</tt> file to begin the installation process.
If you want to install into another directory than the default
<tt>`c:\mysql'</tt>, use the <code>Browse</code> button to specify your
preferred directory.
</li><li>

Finish the install process.
</li></ol>



<h4><a name="Windows_prepare_environment" href="manual.ja_toc.html#Windows_prepare_environment">2.1.2.2  Preparing the Windows MySQL Environment</a></h4>

<p>
Starting with MySQL 3.23.38, the Windows distribution includes
both the normal and the MySQL-Max server binaries.
Here is a list of the different MySQL servers you can use:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>Binary</strong> </td><td> <strong>Description</strong>
</td></tr>
<tr><td><code>mysqld</code> </td><td>
Compiled with full debugging and automatic memory allocation
checking, symbolic links, InnoDB, and BDB tables.
</td></tr>
<tr><td><code>mysqld-opt</code> </td><td>
Optimised binary with no support for transactional tables.
</td></tr>
<tr><td><code>mysqld-nt</code> </td><td>
Optimised binary for NT/2000/XP with support for named pipes.
You can run this version on Windows 9x/Me, but in this case no
named pipes are created and you must have TCP/IP installed.
</td></tr>
<tr><td><code>mysqld-max</code> </td><td>
Optimised binary with support for symbolic links,
InnoDB and BDB tables.
</td></tr>
<tr><td><code>mysqld-max-nt</code> </td><td>
Like <code>mysqld-max</code>, but compiled with support for named pipes.
</td></tr>
</tbody></table>

<p>
Starting from 3.23.50, named pipes are only enabled if one starts mysqld with
<code>--enable-named-pipe</code>.

</p>
<p>
All of the preceding binaries are optimised for the Pentium Pro
processor but should work on any Intel processor &gt;= i386.

</p>
<p>
You will need to use an option file to specify your MySQL configuration
under the following circumstances:

</p><ul>
<li>

The installation or data directories are different from the default
locations (<tt>`c:\mysql'</tt> and <tt>`c:\mysql\data'</tt>).
</li><li>

You want to use one of these servers:

<ul>
<li>mysqld.exe

</li><li>mysqld-max.exe

</li><li>mysqld-max-nt.exe

</li></ul>

</li><li>

You need to tune the server settings.
</li></ul>

<p>
Normally you can use the <code>WinMySQLAdmin</code> tool to edit the
option file <code>my.ini</code>.  In this case you don't have to worry
about the following section.

</p>
<p>
There are two option files with the same function: <tt>`my.cnf'</tt> and
<tt>`my.ini'</tt>.  However, to avoid confusion, it's best if you use only
of one them. Both files are plain text.  The <tt>`my.cnf'</tt> file, if used,
should be created in the root directory of the C drive.  The <tt>`my.ini'</tt>
file, if used, should be created in the Windows system directory.  (This
directory is typically something like <tt>`C:\WINDOWS'</tt> or <tt>`C:\WINNT'</tt>.
You can determine its exact location from the value of the <code>windir</code>
environment variable.)  MySQL looks first for the <code>my.ini</code> file,
then for the <tt>`my.cnf'</tt> file.

</p>
<p>
If your PC uses a boot loader where the C drive isn't the boot drive,
your only option is to use the <tt>`my.ini'</tt> file.  Also note that
if you use the <code>WinMySQLAdmin</code> tool, it uses only the <tt>`my.ini'</tt>
file.  The <tt>`\mysql\bin'</tt> directory contains a help file with
instructions for using this tool.

</p>
<p>
Using <code>notepad.exe</code>, create the option file and edit the
<code>[mysqld]</code> section to specify values for the <code>basedir</code> and
<code>datadir</code> parameters:

</p>

<pre>[mysqld]
# set basedir to installation path, e.g., c:/mysql
basedir=the_install_path
# set datadir to location of data directory,
# e.g., c:/mysql/data or d:/mydata/data
datadir=the_data_path
</pre>

<p>
Note that Windows pathnames should be specified in option files using
forward slashes rather than backslashes.  If you do use backslashes, you
must double them.

</p>
<p>
If you would like to use a data directory different from the default of
<tt>`c:\mysql\data'</tt>, you must copy the entire contents of the
<tt>`c:\mysql\data'</tt> directory to the new location.

</p>
<p>
If you want to use the <code>InnoDB</code> transactional tables, you
need to manually create two new directories to hold the InnoDB
data and log files@-e.g., <tt>`c:\ibdata'</tt> and <tt>`c:\iblogs'</tt>.
You will also need to add some extra lines to the option
file.  「<a href="manual.ja_Table_types.html#InnoDB_start">7.5.2  InnoDB 起動オプション</a>」節参照.

</p>
<p>
If you don't want to use <code>InnoDB</code> tables, add the
<code>skip-innodb</code> option to the option file.

</p>
<p>
Now you are ready to test starting the server.

</p>



<h4><a name="Windows_server_first_start" href="manual.ja_toc.html#Windows_server_first_start">2.1.2.3  Starting the Server for the First Time</a></h4>

<p>
Testing from a DOS command prompt is the best thing to do because
the server displays status messages that appear in the DOS window.
If something is wrong with your configuration, these messages will
make it easier for you to identify and fix any problems.

</p>
<p>
Make sure you are in the directory where the server is located, then
enter this command:

</p>

<pre>C:\mysql\bin&gt; mysqld-max --standalone
</pre>

<p>
You should see the following messages as the server starts up:

</p>

<pre>InnoDB: The first specified datafile c:\ibdata\ibdata1 did not exist:
InnoDB: a new database to be created!
InnoDB: Setting file c:\ibdata\ibdata1 size to 209715200
InnoDB: Database physically writes the file full: wait...
InnoDB: Log file c:\iblogs\ib_logfile0 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile0 size to 31457280
InnoDB: Log file c:\iblogs\ib_logfile1 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile1 size to 31457280
InnoDB: Log file c:\iblogs\ib_logfile2 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile2 size to 31457280
InnoDB: Doublewrite buffer not found: creating new
InnoDB: Doublewrite buffer created
InnoDB: creating foreign key constraint system tables
InnoDB: foreign key constraint system tables created
011024 10:58:25  InnoDB: Started
</pre>

<p>
For further information about running MySQL on Windows,
see  「<a href="manual.ja_Installing.html#Windows">2.6.2  Windows Notes</a>」節.

</p>


<h3><a name="Mac_OS_X_installation" href="manual.ja_toc.html#Mac_OS_X_installation">2.1.3  Installing MySQL on Mac OS X</a></h3>

<p>
<a name="IDX171"></a>
<a name="IDX172"></a>

</p>
<p>
Beginning with MySQL 4.0.11, you can install MySQL on Mac OS X 10.2
("Jaguar") using a Mac OS X <code>PKG</code> binary package instead of the
binary tarball distribution.

</p>
<p>
The package is located inside a disk image (<code>.dmg</code>) file, that you
first need to mount by double-clicking its icon in the Finder. It should
then mount the image and display its contents.

</p>
<p>
<strong>NOTE</strong>: Before proceeding with the installation, please make sure
that no other MySQL server is running!

</p>
<p>
Please shut down all running MySQL instances before continuing by either
using the MySQL Manager Application (on Mac OS X Server) or via
<code>mysqladmin shutdown</code> on the command line.

</p>
<p>
To actually install the MySQL PKG, double click on the package icon. This
will launch the Mac OS Package Installer, which will guide you through
the installation of MySQL.

</p>
<p>
The Mac OS X PKG of MySQL will install itself into
<tt>`/usr/local/mysql-&lt;version&gt;'</tt> and will also install a symbolic link
<tt>`/usr/local/mysql'</tt>, pointing to the new location. If a directory named
<tt>`/usr/local/mysql'</tt> already exists, it will be renamed to
<tt>`/usr/local/mysql.bak'</tt> first. Additionally, it will install the mysql
grant tables by executing <code>mysql_install_db</code> after the installation.

</p>
<p>
The installation layout is similar to the one of the binary distribution,
all MySQL binaries are located in directory <tt>`/usr/local/mysql/bin'</tt>.
The MySQL socket will be put into <tt>`/etc/mysql.sock'</tt> by default.
 「<a href="manual.ja_Installing.html#Installation_layouts">2.2.7  インストールレイアウト</a>」節参照.

</p>
<p>
It requires a user account named <code>mysql</code> (which should exist by default
on Mac OS X 10.2 and up).

</p>
<p>
If you are running Mac OS X Server, you already have a version MySQL
installed. Make sure to read Apple's help about installing MySQL (Run the
"Help View" application, select "Mac OS X Server" help, and do a search for
"MySQL" and read the item entitled "Installing MySQL").

</p>
<p>
If you previously used Marc Liyanage's MySQL packages for MacOS X from
<a href="http://www.entropy.ch">http://www.entropy.ch</a>, you can simply follow the update instructions
given on his pages.

</p>
<p>
After the installation, you can start up MySQL by running the following
commands in a terminal window. Please note that you need to have
administrator privileges to perform this task!

</p>

<pre>shell&gt; cd /usr/local/mysql
shell&gt; sudo ./bin/mysqld_safe
(Enter your password)
(Press CTRL+Z)
shell&gt; bg
(Press CTRL+D to exit the shell)
</pre>

<p>
You should now be able to connect to the MySQL server, e.g. by running
<tt>`/usr/local/mysql/bin/mysql'</tt>.

</p>


<h2><a name="General_Installation_Issues" href="manual.ja_toc.html#General_Installation_Issues">2.2  General Installation Issues</a></h2>



<h3><a name="Getting_MySQL" href="manual.ja_toc.html#Getting_MySQL">2.2.1  MySQL を得る方法</a></h3>

<p>
<a name="IDX173"></a>
<a name="IDX174"></a>
<a name="IDX175"></a>
<a name="IDX176"></a>
<a name="IDX177"></a>
<a name="IDX178"></a>

</p>
<p>
現在のバージョンとダウンロードの指示についての情報は
MySQL ウェブページ (<a href="http://www.mysql.com/">http://www.mysql.com/</a>) をチェックしてください。

</p>

<p>
主なダウンロードミラーはここにあります:
<a href="http://mirrors.sunsite.dk/mysql/">http://mirrors.sunsite.dk/mysql/</a>.
  
For a complete upto-date list of MySQL web/download mirrors, see
<a href="http://www.mysql.com/downloads/mirrors.html">http://www.mysql.com/downloads/mirrors.html</a>.
There you will also find information about becoming a MySQL mirror
site and how to report a bad or out-of-date mirror.

</p>



<h3><a name="Verifying_Package_Integrity" href="manual.ja_toc.html#Verifying_Package_Integrity">2.2.2  Verifying Package Integrity Using <code>MD5 Checksums</code> or <code>GnuPG</code></a></h3>

<p>
After you have downloaded the MySQL package that suits your needs and before
you attempt to install it, you should make sure it is intact and has not
been tampered with.

</p>
<p>
MySQL AB offers two means of integrity checking: <code>MD5 checksums</code> and
cryptographic signatures using <code>GnuPG</code>, the <code>GNU Privacy Guard</code>.

</p>

<h3>2.2.3  Verifying the <code>MD5 Checksum</code></h3>

<p>
After you have downloaded the package, you should check, if the MD5 checksum
matches the one provided on the MySQL download pages. Each package has an
individual checksum, that you can verify with the following command:

</p>

<pre>shell&gt; md5sum &lt;package&gt;
</pre>

<p>
Note, that not all operating systems support the <code>md5sum</code> command - on
some it is simply called <code>md5</code>, others do not ship it at all. On Linux,
it is part of the <code>GNU Text Utilities</code> package, which is available for
a wide range of platforms. You can download the source code from
<a href="http://www.gnu.org/software/textutils/">http://www.gnu.org/software/textutils/</a> as well. If you have
<code>OpenSSL</code> installed, you can also use the command <code>openssl md5
&lt;package&gt;</code> instead. A DOS/Windows implementation of the <code>md5</code> command
is available from <a href="http://www.fourmilab.ch/md5/">http://www.fourmilab.ch/md5/</a>.

</p>
<p>
Example:

</p><pre>shell&gt; md5sum mysql-standard-4.0.10-gamma-pc-linux-i686.tar.gz
155836a7ed8c93aee6728a827a6aa153
                mysql-standard-4.0.10-gamma-pc-linux-i686.tar.gz
</pre>

<p>
You should check, if the resulting checksum matches the one printed on
the download page right below the respective package.

</p>
<p>
Most mirror sites also offer a file named <tt>`MD5SUMS'</tt>, which also includes
the MD5 checksums for all files included in the <tt>`Downloads'</tt> directory.
Please note however that it's very easy to modify this file and it's not a
very reliable method! If in doubt, you should consult different mirror sites
and compare the results.

</p>

<h3>2.2.4  Signature Checking Using <code>GnuPG</code></h3>

<p>
A more reliable method of verifying the integrity of a package is using
cryptographic signatures. MySQL AB uses the <code>GNU Privacy Guard</code>
(<code>GnuPG</code>), an <code>Open Source</code> alternative to the very well-known
<code>Pretty Good Privacy</code> (<code>PGP</code>) by Phil Zimmermann.
See <a href="http://www.gnupg.org/">http://www.gnupg.org/</a> and <a href="http://www.openpgp.org/">http://www.openpgp.org/</a>
for more information about <code>OpenPGP</code>/<code>GnuPG</code> and how to obtain
and install <code>GnuPG</code> on your system. Most Linux distributions already
ship with <code>GnuPG</code> installed by default.

</p>
<p>
Beginning with MySQL 4.0.10 (February 2003), MySQL AB has started signing
their downloadable packages with <code>GnuPG</code>. Cryptographic signatures are
a much more reliable method of verifying the integrity and authenticity of
a file.

</p>
<p>
To verify the signature for a specific package, you first need to obtain a
copy of MySQL AB's public GPG build key <a href="mailto:build@mysql.com">build@mysql.com</a>. You can
either cut and paste it directly from here, or obtain it from
<a href="http://www.keyserver.net/">http://www.keyserver.net/</a>.

</p>

<pre>Key ID:
pub  1024D/5072E1F5 2003-02-03
     MySQL Package signing key (www.mysql.com) &lt;build@mysql.com&gt;
Fingerprint: A4A9 4068 76FC BD3C 4567  70C8 8C71 8D3B 5072 E1F5

Public Key (ASCII-armored):

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see http://www.gnupg.org

mQGiBD4+owwRBAC14GIfUfCyEDSIePvEW3SAFUdJBtoQHH/nJKZyQT7h9bPlUWC3
RODjQReyCITRrdwyrKUGku2FmeVGwn2u2WmDMNABLnpprWPkBdCk96+OmSLN9brZ
fw2vOUgCmYv2hW0hyDHuvYlQA/BThQoADgj8AW6/0Lo7V1W9/8VuHP0gQwCgvzV3
BqOxRznNCRCRxAuAuVztHRcEAJooQK1+iSiunZMYD1WufeXfshc57S/+yeJkegNW
hxwR9pRWVArNYJdDRT+rf2RUe3vpquKNQU/hnEIUHJRQqYHo8gTxvxXNQc7fJYLV
K2HtkrPbP72vwsEKMYhhr0eKCbtLGfls9krjJ6sBgACyP/Vb7hiPwxh6rDZ7ITnE
kYpXBACmWpP8NJTkamEnPCia2ZoOHODANwpUkP43I7jsDmgtobZX9qnrAXw+uNDI
QJEXM6FSbi0LLtZciNlYsafwAPEOMDKpMqAK6IyisNtPvaLd8lH0bPAnWqcyefep
rv0sxxqUEMcM3o7wwgfN83POkDasDbs3pjwPhxvhz6//62zQJ7Q7TXlTUUwgUGFj
a2FnZSBzaWduaW5nIGtleSAod3d3Lm15c3FsLmNvbSkgPGJ1aWxkQG15c3FsLmNv
bT6IXQQTEQIAHQUCPj6jDAUJCWYBgAULBwoDBAMVAwIDFgIBAheAAAoJEIxxjTtQ
cuH1cY4AnilUwTXn8MatQOiG0a/bPxrvK/gCAJ4oinSNZRYTnblChwFaazt7PF3q
zIhMBBMRAgAMBQI+PqPRBYMJZgC7AAoJEElQ4SqycpHyJOEAn1mxHijft00bKXvu
cSo/pECUmppiAJ41M9MRVj5VcdH/KN/KjRtW6tHFPYhMBBMRAgAMBQI+QoIDBYMJ
YiKJAAoJELb1zU3GuiQ/lpEAoIhpp6BozKI8p6eaabzF5MlJH58pAKCu/ROofK8J
Eg2aLos+5zEYrB/LsrkCDQQ+PqMdEAgA7+GJfxbMdY4wslPnjH9rF4N2qfWsEN/l
xaZoJYc3a6M02WCnHl6ahT2/tBK2w1QI4YFteR47gCvtgb6O1JHffOo2HfLmRDRi
Rjd1DTCHqeyX7CHhcghj/dNRlW2Z0l5QFEcmV9U0Vhp3aFfWC4Ujfs3LU+hkAWzE
7zaD5cH9J7yv/6xuZVw411x0h4UqsTcWMu0iM1BzELqX1DY7LwoPEb/O9Rkbf4fm
Le11EzIaCa4PqARXQZc4dhSinMt6K3X4BrRsKTfozBu74F47D8Ilbf5vSYHbuE5p
/1oIDznkg/p8kW+3FxuWrycciqFTcNz215yyX39LXFnlLzKUb/F5GwADBQf+Lwqq
a8CGrRfsOAJxim63CHfty5mUc5rUSnTslGYEIOCR1BeQauyPZbPDsDD9MZ1ZaSaf
anFvwFG6Llx9xkU7tzq+vKLoWkm4u5xf3vn55VjnSd1aQ9eQnUcXiL4cnBGoTbOW
I39EcyzgslzBdC++MPjcQTcA7p6JUVsP6oAB3FQWg54tuUo0Ec8bsM8b3Ev42Lmu
QT5NdKHGwHsXTPtl0klk4bQk4OajHsiy1BMahpT27jWjJlMiJc+IWJ0mghkKHt92
6s/ymfdf5HkdQ1cyvsz5tryVI3Fx78XeSYfQvuuwqp2H139pXGEkg0n6KdUOetdZ
Whe70YGNPw1yjWJT1IhMBBgRAgAMBQI+PqMdBQkJZgGAAAoJEIxxjTtQcuH17p4A
n3r1QpVC9yhnW2cSAjq+kr72GX0eAJ4295kl6NxYEuFApmr1+0uUq/SlsQ==
=YJkx
-----END PGP PUBLIC KEY BLOCK-----
</pre>

<p>
You can import this key into your public <code>GPG</code> keyring by using
<code>gpg --import</code>. See the <code>GPG</code> documentation for more info
on how to work with public keys.

</p>
<p>
After you have downloaded and imported the public build key,
now download your desired MySQL package and the corresponding
signature, which is also available from the download page.
The signature has the file name extension <tt>`.asc'</tt>. For example,
the signature for <tt>`mysql-standard-4.0.10-gamma-pc-linux-i686.tar.gz'</tt>
would be <tt>`mysql-standard-4.0.10-gamma-pc-linux-i686.tar.gz.asc'</tt>.
Make sure that both files are stored in the same directory and then run
the following command to verify the signature for this file:

</p>

<pre>shell&gt; gpg --verify &lt;package&gt;.asc

Example:

shell&gt; gpg --verify mysql-standard-4.0.10-gamma-pc-linux-i686.tar.gz.asc
gpg: Warning: using insecure memory!
gpg: Signature made Mon 03 Feb 2003 08:50:39 PM MET using DSA key ID 5072E1F5
gpg: Good signature from
     "MySQL Package signing key (www.mysql.com) &lt;build@mysql.com&gt;"
</pre>

<p>
The "Good signature" message indicates that everything is all right.

</p>
<p>
For <code>RPM</code> packages, there is no separate signature - <code>RPM</code> packages
actually have a built-in <code>GPG</code> signature and <code>MD5 checksum</code>. You can
verify them by running the following command:

</p>

<pre>shell&gt; rpm --checksig &lt;package&gt;.rpm

Example:

shell&gt; rpm --checksig MySQL-server-4.0.10-0.i386.rpm
MySQL-server-4.0.10-0.i386.rpm: md5 gpg OK
</pre>

<p>
<strong>Note:</strong> If you are using RPM 4.1 and it complains about <code>(GPG)
NOT OK (MISSING KEYS: GPG#5072e1f5)</code> (even though you have imported it into
your GPG public keyring), you need to import the key into the RPM keyring
first. RPM 4.1 does not use your GPG keyring (and GPG itself) anymore, but
rather maintains its own keyring (because it's a system wide application and
the GPG public keyring is user-specific file). To import the MySQL public
key into the RPM keyring, please use the following command:

</p>

<pre>shell&gt; rpm --import &lt;pubkey&gt;

Example:

shell&gt; rpm --import mysql_pubkey.asc
</pre>

<p>
In case you notice that the <code>MD5 checksum</code> or <code>GPG</code> signatures
do not match, first try to download the respective package one more time,
maybe from another mirror site. If you repeatedly can not successfully
verify the integrity of the package, please notify us about such incidents
including the full package name and the download site you have been using
at <a href="mailto:webmaster@mysql.com">webmaster@mysql.com</a> or <a href="mailto:build@mysql.com">build@mysql.com</a>.

</p>



<h3><a name="Which_OS" href="manual.ja_toc.html#Which_OS">2.2.5  MySQL がサポートする OS</a></h3>

<p>
<a name="IDX179"></a>
<a name="IDX180"></a>
<a name="IDX181"></a>
<a name="IDX182"></a>
<a name="IDX183"></a>

</p>
<p>
我々は GNU Autoconf を使用していますので、MySQL は POSIX スレッ
ドと C++ コンパイラが動作する全ての新しいシステムに移植可能です。(クライ
アントコードのコンパイルだけは C++ を必要としますが、スレッドは必要ではありません。)
我々は自身のソフトウェアを、最初に Sun Solaris (現在は 2.5 ～ 2.7) 上と
SuSE Linux Version 7.x で使用し開発します。

</p>
<p>
多くの OS では、ネイティブスレッドは最新バージョ
ンだけで動作することに注意してください。
MySQL は次の OS/スレッドパッケージの組み合わせで、コンパイルの
成功が報告されています。

</p>

<ul>
<li>

AIX 4.x, 5.x with native threads.   「<a href="manual.ja_Installing.html#IBM-AIX">2.6.6.4  IBM-AIX notes</a>」節参照.
</li><li>

Amiga.
</li><li>

BSDI 2.x with the MIT-pthreads package.   「<a href="manual.ja_Installing.html#BSDI">2.6.4.5  BSD/OS Version 2.x Notes</a>」節参照.
</li><li>

BSDI 3.0, 3.1 and 4.x with native threads.   「<a href="manual.ja_Installing.html#BSDI">2.6.4.5  BSD/OS Version 2.x Notes</a>」節参照.
</li><li>

DEC Unix 4.x with native threads.   「<a href="manual.ja_Installing.html#Alpha-DEC-UNIX">2.6.6.6  Alpha-DEC-UNIX Notes (Tru64)</a>」節参照.
</li><li>

FreeBSD 2.x with the MIT-pthreads package.   「<a href="manual.ja_Installing.html#FreeBSD">2.6.4.1  FreeBSD Notes</a>」節参照.
</li><li>

FreeBSD 3.x and 4.x with native threads.   「<a href="manual.ja_Installing.html#FreeBSD">2.6.4.1  FreeBSD Notes</a>」節参照.
</li><li>

HP-UX 10.20 with the DCE threads or the MIT-pthreads package.
 「<a href="manual.ja_Installing.html#HP-UX_10.20">2.6.6.2  HP-UX Version 10.20 Notes</a>」節参照.
</li><li>

HP-UX 11.x with the native threads.   「<a href="manual.ja_Installing.html#HP-UX_11.x">2.6.6.3  HP-UX Version 11.x Notes</a>」節参照.
</li><li>

Linux 2.0+ with LinuxThreads 0.7.1+ or <code>glibc</code> 2.0.7+.   「<a href="manual.ja_Installing.html#Linux">2.6.1  Linux Notes (All Linux Versions)</a>」節参照.
</li><li>

Mac OS X.   「<a href="manual.ja_Installing.html#Mac_OS_X">2.6.5  Mac OS X Notes</a>」節参照.
</li><li>

NetBSD 1.3/1.4 Intel and NetBSD 1.3 Alpha (Requires GNU make).   「<a href="manual.ja_Installing.html#NetBSD">2.6.4.2  NetBSD notes</a>」節参照.
</li><li>

OpenBSD &gt; 2.5 with native threads. OpenBSD &lt; 2.5 with the
MIT-pthreads package.   「<a href="manual.ja_Installing.html#OpenBSD">2.6.4.3  OpenBSD 2.5 Notes</a>」節参照.
</li><li>

OS/2 Warp 3, FixPack 29 and OS/2 Warp 4, FixPack 4.   「<a href="manual.ja_Installing.html#OS/2">2.6.7  OS/2 Notes</a>」節参照.
</li><li>

SGI Irix 6.x with native threads.   「<a href="manual.ja_Installing.html#SGI-Irix">2.6.6.8  SGI Irix Notes</a>」節参照.
</li><li>

Solaris 2.5 and above with native threads on SPARC and x86.   「<a href="manual.ja_Installing.html#Solaris">2.6.3  Solaris Notes</a>」節参照.
</li><li>

SunOS 4.x with the MIT-pthreads package.   「<a href="manual.ja_Installing.html#Solaris">2.6.3  Solaris Notes</a>」節参照.
</li><li>

Caldera (SCO) OpenServer with a recent port of the FSU Pthreads package. 
 「<a href="manual.ja_Installing.html#Caldera">2.6.6.9  Caldera (SCO) Notes</a>」節参照.
</li><li>

Caldera (SCO) UnixWare 7.0.1.   「<a href="manual.ja_Installing.html#Caldera_Unixware">2.6.6.10  Caldera (SCO) Unixware Version 7.0 Notes</a>」節参照.
</li><li>

Tru64 Unix
</li><li>

Windows 9x, Me, NT, 2000 and XP.   「<a href="manual.ja_Installing.html#Windows">2.6.2  Windows Notes</a>」節参照.
</li></ul>

<p>
全てのプラットフォームが MySQL Server をちゃんと動作させるものではありません。
我々は以下のような評価基準に基づいて重要な要件を任せるに足るプラットフォームで
あるかを判断しています。：

</p>

<ul>
<li>

スレッドライブラリーの安定性。
プラットフォームが世間的にとてもよい評価を受けそれ以外が完全に動いたとしても、
MySQL が使用するスレッドライブラリーの動作が不安定ならば
MySQL は安定して動作しないでしょう。

</li><li>

マルチプロセッサシステム上での <strong>SMP</strong> の優位性を引き出すための
カーネルやスレッドライブラリの能力。
言い換えると、プロセスがスレッドを生成するときに、元のプロセスが動いていた 
CPU と異なる CPU 上でスレッドが動作することが可能であるべきです。

</li><li>

コンテキストスイッチングの多用を避け、頻繁なセマフォの取り合いによって
排他制御を行う場合のカーネル又はスレッドライブラリーのスレッド実行能力。
言い換えれば、CPUの切り替えに用いられる<code>pthread_mutex_lock()</code>の実装に
不安がある場合です。この場合は MySQL の実行をはなはだしく阻害します。
このことを考慮せずにいるとCPUを増設するほど MySQL の実行が遅くなる
事象を生じるでしょう。

</li><li>

一般ファイルシステムの安定性とパフォーマンス

</li><li>

テーブルが大きい場合、大規模ファイルを完全に、そして効率よく扱うためのファ
イルシステムの能力。

</li><li>

使用プラットフォームに対する MySQL AB の経験。
使用しているプラットフォームについてよく知っていればプラットフォームに依存する
部分での最適化や改良をコンパイル時に行うことができます。
それから、MySQL の環境設定についてアドバイスも行えます。

</li><li>

我々が内部的に行なう、コンフィグレーションと同様のテストのすべて。

</li><li>

The number of users that have successfully run MySQL on that
platform in similar configurations. If this number is high, the chances of
hitting some platform-specific surprises are much smaller.
</li></ul>

<p>
Based on the preceding criteria, the best platforms for running
MySQL at this point are x86 with SuSE Linux 7.1, 2.4 kernel, and
ReiserFS (or any similar Linux distribution) and SPARC with Solaris 2.7
or 2.8. FreeBSD comes third, but we really hope it will join the top
club once the thread library is improved. We also hope that at some
point we will be able to include all other platforms on which
MySQL compiles, runs okay, but not quite with the same level of
stability and performance, into the top category. This will require some
effort on our part in cooperation with the developers of the OS/library
components MySQL depends upon. If you are interested in making
one of those components better, are in a position to influence their
development, and need more detailed instructions on what MySQL
needs to run better, send an e-mail to
<a href="mailto:internals@lists.mysql.com">internals@lists.mysql.com</a>.

</p>
<p>
Please note that the preceding comparison is not to say that one OS is better or
worse than the other in general. We are talking about choosing a particular OS
for a dedicated purpose@-running MySQL, and compare platforms in that
regard only. With this in mind, the result of this comparison
would be different if we included more issues into it. And in some cases,
the reason one OS is better than the other could simply be that we have put
forth more effort into testing on and optimising for that particular platform.
We are just stating our observations to help you decide on which
platform to use MySQL on in your setup.

</p>



<h3><a name="Which_version" href="manual.ja_toc.html#Which_version">2.2.6  使用すべき MySQL のバージョン</a></h3>

<p>
<a name="IDX184"></a>
<a name="IDX185"></a>
<a name="IDX186"></a>
<a name="IDX187"></a>
<a name="IDX188"></a>

</p>
<p>
make を行う前に決める事は、あなたが最新の開発リリースを使用するのか、
または最新の安定リリースを使用するのかです：

</p>

<ul>
<li>

通常、あなたが最初に MySQL を使い始める場合、またはバイナリ配布
がない他のシステムに MySQL を移植しようとする場合、
我々は安定リリース (現在は バージョン 3.23) の選択を
勧めます。注意: すべての MySQL リリースはそれぞれのリリー
スの前に MySQL ベンチマークと広範囲なテストスイートでチェックされ
ます。

</li><li>

そうでなくて、古いシステムで実行していてアップグレードしたいけれども、
開発版は試したくない場合は、あなたが使用している物と同じブランチ中の
最新のもの(あなたが使用している物より新しいバージョンの物)に
アップグレードすべきです。 このバージョンでは、致命的なバグだけを修正し、
比較的安全で小さな変更を行っています。
</li></ul>

<p>
make 前の２番目の決定事項は、ソースディストリビューションとバイナリディ
ストリビューションのどちらを使用するかです。多くの場合、バイナリがプラッ
トフォーム用に存在していれば、おそらくバイナリディストリビューションを使
用すべきです。通常、それはソースディストリビューションよりも簡単にインス
トールできます。

</p>
<p>
次のケースでは、おそらくソースインストールの方が良いでしょう:

</p>

<ul>
<li>

MySQL をどこか明示的な場所にインストールしたい場合(標準バイナリ
ディストリビューションは、どこの場所でも ``実行準備'' ができていますが、もっ
と柔軟にすることもできます)。

</li><li>

異なるユーザの要求を満たすため、我々は２つのバイナリバージョンを提供してい
ます; ひとつは、トランザクションテーブル処理なしでコンパイルされたもので、
もう一つは、トランザクション安全なテーブルのような、もっとも重要な拡張され
たオプションで configure されたものです。両方のバージョンとも、同じソース
ディストリビューションからコンパイルされます。すべてのネイティブ 
<code>MySQL</code> クライアントは両方の MySQL バージョンに接続できます。

拡張 MySQL バイナリディストリビューションは <code>-max</code> 接尾語が
つけられていて、<code>mysqld-max</code> と同じオプションで configure されていま
す。 「<a href="manual.ja_MySQL_Database_Administration.html#mysqld-max">4.7.5  <code>mysqld-max</code>, An Extended <code>mysqld</code> Server</a>」節参照.

MySQL-Max RPM を使用したい場合は、最初に標準 MySQL RPM をイ
ンストールすべきです。

</li><li>

<code>mysqld</code> を、標準バイナリディストリビューションには無いいくつかの拡
張機能付きで configure したい場合。使用できる代表的な拡張オプションは次
の通りです:


<ul>
<li><code>--with-innodb</code>

</li><li><code>--with-berkeley-db</code>

</li><li><code>--with-raid</code>

</li><li><code>--with-libwrap</code>

</li><li><code>--with-named-z-lib  (This is done for some of the binaries)</code>

</li><li><code>--with-debug[=full]</code>

</li></ul>

</li><li>

デフォルトのバイナリディストリビューションは通常すべての文字セットをサポー
トするようにコンパイルされていて、同じプロセッサファミリの多種のプロセッ
サ上で動作します。

より速い MySQL サーバを得たい場合、必要な文字セットだけをサポー
トするように再コンパイルでき、より良いコンパイラ(<code>pgcc</code>のような)や、あなた
のプロセッサ用により最適化されたコンパイラオプションを使用できます。

</li><li>

バグを発見して MySQL 開発チームにそれを報告する場合、バグを修正
するためにソースディストリビューションに適用する必要のあるパッチが、おそ
らく得られるでしょう。

</li><li>

MySQL を作る C と C++ コードを読みたい(そして/または変更したい)
場合はソース配布を入手するべきです。ソースコードはいつでも究極のマニュア
ルです。ソース配布はバイナリ配布よりも多くのテストと例も含んでいます。
</li></ul>

<p>
<a name="IDX189"></a>
<a name="IDX190"></a>

</p>
<p>
MySQL の命名法では、リリース番号は3つの数値とサフィックスからな
ります。例えば、<code>mysql-3.21.17-beta</code> のようなリリース名は次のように
解釈されます:

</p>

<ul>
<li>

最初の数値(<code>3</code>)はファイル形式を表します。全てのバージョン 3 リリー
スは同じファイルフォーマットを持ちます。

</li><li>

2番目の数値(<code>21</code>)はリリースレベルです。通常は二つから選択します。一
つはリリース/安定ブランチで(現在は <code>23</code>)、もう一つは開発ブランチです(現在は <code>4.0</code>)。
通常は両方とも安定ですが、開発バージョンはきまぐれで、ドキュメントがなく、いくつかのシ
ステムではコンパイルに失敗します。

</li><li>

3番目の数値(<code>17</code>)はリリースレベル内のバージョン番号です。これは新し
い配布の度に増加します。普通はあなたの選択したリリースレベルの最新バージョ
ンを求めます。

</li><li>

サフィックス(<code>beta</code>)はリリースの安定レベルを表します:


<ul>
<li>

<code>alpha</code> は、100% テストされていないいくつかの新しい大きなコードセク
ションが存在することを示し、知られているバグは News 節に記述されています
(通常はありません)。 「<a href="manual.ja_News.html#News">D  MySQL Change History</a>」節参照. 多くの alpha リリースには新しいコマ
ンドと拡張もあります。
大きなコード変更を含む開発中のものは、alpha リリース上に現れます。しかし
全てリリース前にテストされます。それぞれの MySQL リリースには既知
のバグはありません。

</li><li>

<code>beta</code> は全ての新しいコードがテストされたことを意味します。大きな新
しいものは追加されません。知られているバグはありません。
alpha バージョンで、少なくとも一カ月間、致命的なバグが報告されなくて、古
いコマンドをより信頼できなくするような新しい機能を追加する計画がない時に、
alpha から beta にバージョンが変更されます。

</li><li>

<code>gamma</code> は beta がしばらくして、正しく動くように見えるものです。
小さな修正だけが追加されます。
これは多くの他の会社がリリースと呼ぶものです。

</li><li>

サフィックスがない場合は、多くの異なる場所で、プラットフォーム固有のバグ
を除いてバグレポートなしでそのバージョンがしばらくの間動作していたことを
意味します。 致命的なバグ修正だけがリリースに適用されます。
これは我々が stable リリースと呼ぶものです。
</li></ul>

</li></ul>

<p>
MySQL の全てのバージョンは、比較的安全に使用できることを確かめ
るため、我々は標準テストとベンチマークを通して確認しています。標準テス
トは以前に見つかった全てのバグをチェックするように拡張されるため、テスト
スイートはより良く保持されます。

</p>
<p>
<a name="IDX191"></a>
<a name="IDX192"></a>

</p>
<p>
全てのリリースは少なくても次のテストがされていることに注意してください:

</p>
<dl compact="">

<dt>内部テストスイート
</dt><dd>
これは顧客のための製品システムの一部です。多くのテーブルと何百というメガ
バイトのデータを持っています。

</dd><dt>MySQL ベンチマークスイート
</dt><dd>
これは一般的な範囲のクエリを実行します。これは、最適化の最新バッチが実際
にコードをより速く作れるかどうかを確認するテストでもあります。
 「<a href="manual.ja_MySQL_Optimization.html#MySQL_Benchmarks">5.1.4  The MySQL Benchmark Suite</a>」節参照.

</dd><dt><code>crash-me</code> テスト
</dt><dd>
これは、データベースがサポートしている機能と、その許容量と制限を決定しよ
うとします。   「<a href="manual.ja_MySQL_Optimization.html#MySQL_Benchmarks">5.1.4  The MySQL Benchmark Suite</a>」節参照.
</dd></dl>

<p>
他のテストは我々の内部製品環境で最新の MySQL バージョンを我々が
少なくとも1つのマシンで使用することです。我々は動作のため 100ギガバイト
以上のデータを持ちます。

</p>



<h3><a name="Installation_layouts" href="manual.ja_toc.html#Installation_layouts">2.2.7  インストールレイアウト</a></h3>

<p>
<a name="IDX193"></a>
<a name="IDX194"></a>
<a name="IDX195"></a>
<a name="IDX196"></a>

</p>
<p>
この節では、バイナリとソース配布のインストールで生成されるディレクトリの
デフォルトのレイアウトを説明します。

</p>
<p>
バイナリ配布はアンパックすることによりインストールされ、インストール場所
はあなたが選択した場所(通常 <tt>`/usr/local/mysql'</tt>)の中の次のディレクト
リを選択し生成します:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>ディレクトリ</strong> </td><td> <strong>ディレクトリの内容</strong>
</td></tr>
<tr><td><tt>`bin'</tt> </td><td> クライアントプログラム, <code>mysqld</code> サーバ
</td></tr>
<tr><td><tt>`data'</tt> </td><td> ログファイル, データベース
</td></tr>
<tr><td><tt>`include'</tt> </td><td> インクルード(ヘッダ)ファイル
</td></tr>
<tr><td><tt>`lib'</tt> </td><td> ライブラリ
</td></tr>
<tr><td><tt>`scripts'</tt> </td><td> <code>mysql_install_db</code>
</td></tr>
<tr><td><tt>`share/mysql'</tt> </td><td> エラーメッセージファイル
</td></tr>
<tr><td><tt>`sql-bench'</tt> </td><td> ベンチマーク
</td></tr>
</tbody></table>

<p>
ソース配布は configure しコンパイルした後にインストールされます。デフォ
ルトではインストールステップは <tt>`/usr/local'</tt> 配下のファイルを次のサ
ブディレクトリにインストールします:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>ディレクトリ</strong> </td><td> <strong>ディレクトリの内容</strong>
</td></tr>
<tr><td><tt>`bin'</tt> </td><td> クライアントプログラムとスクリプト
</td></tr>
<tr><td><tt>`include/mysql'</tt> </td><td> インクルードファイル
</td></tr>
<tr><td><tt>`info'</tt> </td><td> Info 形式のドキュメント
</td></tr>
<tr><td><tt>`lib/mysql'</tt> </td><td> ライブラリ
</td></tr>
<tr><td><tt>`libexec'</tt> </td><td> <code>mysqld</code> サーバ
</td></tr>
<tr><td><tt>`share/mysql'</tt> </td><td> エラーメッセージファイル
</td></tr>
<tr><td><tt>`sql-bench'</tt> </td><td> ベンチマークと <code>crash-me</code> テスト
</td></tr>
<tr><td><tt>`var'</tt> </td><td> データベースとログファイル
</td></tr>
</tbody></table>

<p>
ソースインストールのレイアウトはバイナリインストールと次の点が異なります:

</p>

<ul>
<li>

<code>mysqld</code> サーバは <tt>`bin'</tt> ではなく 
<tt>`libexec'</tt> ディレクトリにインストールされます。

</li><li>

データディレクトリは <tt>`data'</tt> ではなく 
<tt>`var'</tt> です。

</li><li>

<code>mysql_install_db</code> は <tt>`/usr/local/mysql/scripts'</tt> ではなく
<tt>`/usr/local/bin'</tt> ディレクトリにインストールされます。

</li><li>

ヘッダーファイルのディレクトリは <tt>`include/mysql'</tt> で、
ライブラリのディレクトリは <tt>`lib/mysql'</tt> です。
<tt>`include'</tt> や <tt>`lib'</tt> ではありません。
</li></ul>

<p>
スクリプト <tt>`scripts/make_binary_distribution'</tt> を実行することにより、
コンパイルされたソースディストリビューションから、あなた自身のバイナリイン
ストレーションを生成できます。

</p>



<h3><a name="Many_versions" href="manual.ja_toc.html#Many_versions">2.2.8  アップデートがリリースされる方法と時</a></h3>

<p>
<a name="IDX197"></a>
<a name="IDX198"></a>

</p>
<p>
MySQL は MySQL AB でかなり速く進化していて、我々はこれを他の 
MySQL ユーザに共有してもらいたいです。我々は、他の人が必要とし
ていると思われるとても便利な機能を持った時に、リリースの作成を試みます。

</p>
<p>
我々は、実装が簡単な機能を要求するユーザの手助けも試みます。我々は、我々
のライセンスユーザが求めるものにも注目し、特に我々の拡張 email サポート
顧客が求めるものに注目して、彼らの手助けを試みます。

</p>
<p>
新しいリリースをダウンロードする必要はありません。News 節は、新しいリリー
スが、あなたが本当に求める何かを持っているかどうかをあなたに教えます。
 「<a href="manual.ja_News.html#News">D  MySQL Change History</a>」節参照.

</p>
<p>
我々は MySQL の更新時は次のポリシーにしたがって行います：

</p>

<ul>
<li>

それぞれのマイナーアップデートで、バージョン文字列中の最後の数値が増加し
ます。主要な新機能や前のバージョンとのマイナーな非互換があった時には、バー
ジョン文字列中の2番目の数値が増加します。ファイル形式が変更した時、最初
の数値が増加します。

</li><li>

安定にテストされたリリースは年に約 1-2 回現れます。しかし小さなバグが見
つかった場合は、バグフィックスだけのリリースがリリースされます。

</li><li>

作業中のリリースは約 1-8 週間毎に現れます。

</li><li>

いくつかのプラットフォームのためのバイナリ配布は我々によってメジャーリリー
スから作られます。他の人が他のシステムのためにバイナリ配布を作りますが、
おそらく頻繁ではありません。

</li><li>

通常、小さなバグを見つけて修正するとすぐに、有効なパッチを作ります。
They are posted to <a href="mailto:bugs@lists.mysql.com">bugs@lists.mysql.com</a> and will
be added to the next release.

</li><li>

危険ではないけれども困らされるバグには、MySQL ソースレポジトリに
変更を加え、次のリリースには修正されます。

</li><li>

偶然、致命的なバグがリリース中にある場合、我々は新しいリリースを可能な限
りすぐに作ります。他の会社もそうしてもらいたいです。
</li></ul>

<p>
現在の安定リリースはバージョン 3.23 です;
我々はすでにバージョン 4.0 の開発に移行しています。
しかし、安定バージョンでもバグはまだ修正されます。
我々は、バグ修正と``行なわなければいけない''ことを無視するような、完全な
凍結を考えていません。``幾分かの凍結''とは、``ほとんど確実に既に動作して
いるものに影響を与えない''小さなことを追加するかもしれないということを意
味します。

</p>
<p>
MySQL uses a slightly different naming scheme from most other products.
In general it's relatively safe to use any version that has been out for
a couple of weeks without being replaced with a new version.
 「<a href="manual.ja_Installing.html#Which_version">2.2.6  使用すべき MySQL のバージョン</a>」節参照.

</p>


<h3><a name="MySQL_binaries" href="manual.ja_toc.html#MySQL_binaries">2.2.9  MySQL Binaries Compiled by MySQL AB</a></h3>

<p>
<a name="IDX199"></a>

</p>
<p>
サービスとして、我々 MySQL AB は MySQL のバイナリ配布を提供しています。
これらのコンパイルは MySQL AB 内部でおこなったり、我々にマシンの
アクセスを提供してもらっている顧客のマシン上で行っています。

</p>
<p>
これらの配布物は <code>Build-tools/Do-compile</code> で作成され (このスクリプトは
<code>scripts/make_binary_distribution</code> を使用して
ソースをコンパイルし <code>tar.gz</code> バイナリを作成します)、
以下のコンパイルオプションで調整されています。

</p>
<p>
Binaries built on MySQL AB development systems:

</p>
<dl compact="">

<dt>Linux 2.4.xx i386 with <code>gcc</code> 2.95.3
</dt><dd>
<code>CFLAGS="-O2 -mcpu=pentiumpro" CXX=gcc CXXFLAGS="-O2 -mcpu=pentiumpro -felide-constructors" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --disable-shared --with-client-ldflags=-all-static --with-mysqld-ldflags=-all-static</code>

</dd><dt>Linux 2.4.xx ia64 with <code>ecc</code> (Intel C++ Itanium Compiler 7.0)
</dt><dd>
<code>CC=ecc CFLAGS=-tpp1 CXX=ecc CXXFLAGS=-tpp1 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile</code>

</dd><dt>Linux 2.4.xx alpha with <code>ccc</code> (Compaq C V6.2-505 / Compaq C++ V6.3-006)
</dt><dd>
<code>CC=ccc CFLAGS="-fast -arch generic" CXX=cxx CXXFLAGS="-fast -arch generic -noexceptions -nortti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-mysqld-ldflags=-non_shared --with-client-ldflags=-non_shared --disable-shared</code>

</dd><dt>Linux 2.2.xx sparc with <code>egcs</code> 1.1.2
</dt><dd>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --disable-shared</code>

</dd><dt>Linux 2.4.xx s390 with <code>gcc</code> 2.95.3
</dt><dd>
<code>CFLAGS="-O2" CXX=gcc CXXFLAGS="-O2 -felide-constructors" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --disable-shared --with-client-ldflags=-all-static --with-mysqld-ldflags=-all-static</code>

</dd><dt>Sun Solaris 2.8 sparc with <code>gcc</code> 3.2
</dt><dd>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --with-named-z-libs=no --with-named-curses-libs=-lcurses --disable-shared</code>

</dd><dt>Sun Solaris 2.9 sparc with <code>gcc</code> 2.95.3
</dt><dd>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --with-named-curses-libs=-lcurses --disable-shared</code>

</dd><dt>Sun Solaris 2.9 sparc with <code>cc-5.0</code> (Sun Forte 5.0)
</dt><dd>
<code>CC=cc-5.0 CXX=CC ASFLAGS="-xarch=v9" CFLAGS="-Xa -xstrconst -mt -D_FORTEC_ -xarch=v9" CXXFLAGS="-noex -mt -D_FORTEC_ -xarch=v9" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --with-named-z-libs=no --enable-thread-safe-client --disable-shared</code>

</dd><dt>IBM AIX 4.3.2 ppc with <code>gcc</code> 3.2.1
</dt><dd>
<code>CFLAGS="-O2 -mcpu=powerpc -Wa,-many " CXX=gcc CXXFLAGS="-O2 -mcpu=powerpc -Wa,-many  -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --disable-shared</code>

</dd><dt>IBM AIX 5.1.0 ppc with <code>gcc</code> 3.2.1
</dt><dd>
<code>CFLAGS="-O2 -mcpu=powerpc -Wa,-many" CXX=gcc CXXFLAGS="-O2 -mcpu=powerpc -Wa,-many  -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --with-server-suffix="-pro" --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --disable-shared --with-innodb</code>

</dd><dt>HP-UX 10.20 pa-risc1.1 with <code>gcc</code> 3.1
</dt><dd>
<code>CFLAGS="-DHPUX -I/opt/dce/include -O3 -fPIC" CXX=gcc CXXFLAGS="-DHPUX -I/opt/dce /include -felide-constructors -fno-exceptions -fno-rtti -O3 -fPIC" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --with-pthread --with-named-thread-libs=-ldce --with-lib-ccflags=-fPIC --disable-shared</code>

</dd><dt>HP-UX 11.11 pa-risc2.0 with <code>aCC</code> (HP ANSI C++ B3910B A.03.33)
</dt><dd>
<code>CC=cc CXX=aCC CFLAGS=+DD64 CXXFLAGS=+DD64 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --disable-shared</code>

</dd><dt>Apple Mac OS X 10.2 powerpc with <code>gcc</code> 3.1
</dt><dd>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared</code>

</dd><dt>FreeBSD 4.7 i386 with <code>gcc</code> 2.95.4
</dt><dd>
<code>CFLAGS=-DHAVE_BROKEN_REALPATH ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --with-named-z-libs=not-used --disable-shared</code>
</dd></dl>

<p>
The following binaries are built on third-party systems kindly provided to
MySQL AB by other users. Please note that these are only provided as a
courtesy. Since MySQL AB does not have full control over these systems, we
can only provide limited support for the binaries built on these systems.

</p>
<dl compact="">

<dt>SCO Unix 3.2v5.0.6 i386 with <code>gcc</code> 2.95.3
</dt><dd>
<code>CFLAGS="-O3 -mpentium" LDFLAGS=-static CXX=gcc CXXFLAGS="-O3 -mpentium -felide-constructors" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --enable-thread-safe-client --disable-shared</code>

</dd><dt>Caldera Open Unix 8.0.0 i386 with <code>CC</code> 3.2
</dt><dd>
<code>CC=cc CFLAGS="-O" CXX=CC ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --enable-thread-safe-client --disable-shared</code>

</dd><dt>Compaq Tru64 OSF/1 V5.1 732 alpha with <code>cc/cxx</code> (Compaq C V6.3-029i / DIGITAL C++ V6.1-027)
</dt><dd>
<code>CC="cc -pthread" CFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all" CXX="cxx -pthread" CXXFLAGS="-O4 -ansi_alias -fast -inline speed -speculate all -noexceptions -nortti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-prefix=/usr/local/mysql --with-named-thread-libs="-lpthread -lmach -lexc -lc" --disable-shared --with-mysqld-ldflags=-all-static</code>

</dd><dt>SGI Irix 6.5 IP32 with <code>gcc</code> 3.0.1
</dt><dd>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared</code>
</dd></dl>

<p>
The following compile options have been used for binary packages MySQL AB
used to provide in the past. These binaries are currently not being updated
anymore, but the compile options are kept in here for reference purposes.

</p>
<dl compact="">

<dt>Linux 2.2.x with x686 with <code>gcc</code> 2.95.2
</dt><dd>
<code>CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static --disable-shared --with-extra-charsets=complex</code>

</dd><dt>SunOS 4.1.4 2 sun4c with <code>gcc</code> 2.7.2.1
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors" ./configure --prefix=/usr/local/mysql --disable-shared --with-extra-charsets=complex --enable-assembler</code>

</dd><dt>SunOS 5.5.1 (and above) sun4u with <code>egcs</code> 1.0.3a or 2.90.27 or gcc 2.95.2 and newer
</dt><dd>
<code>CC=gcc CFLAGS="-O3" CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-low-memory --with-extra-charsets=complex --enable-assembler</code>

</dd><dt>SunOS 5.6 i86pc with <code>gcc</code> 2.8.1
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-low-memory --with-extra-charsets=complex</code>

</dd><dt>BSDI BSD/OS 3.1 i386 with <code>gcc</code> 2.7.2.1
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>

</dd><dt>BSDI BSD/OS 2.1 i386 with <code>gcc</code> 2.7.2
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>

</dd><dt>AIX 2 4 with <code>gcc</code> 2.7.2.2
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>
</dd></dl>

<p>
上で示したオプション以外で最適化を施した方はだれでも、開発者向けの
メーリングリストにポストできます。
<a href="mailto:internals@lists.mysql.com">internals@lists.mysql.com</a>.

</p>
<p>
RPM 配布では MySQL 3.22 を user-contributed としています。
3.22 をはじめ、いくつかの RPM パッケージは MySQL AB 製です。

</p>
<p>
MySQL のデバッグバージョンをコンパイルしたい場合は、
<code>--with-debug</code> または <code>--with-debug=full</code> を上記の configure 行
に追加して、すべての <code>-fomit-frame-pointer</code> オプションを取り除いてく
ださい。

</p>
<p>
For the Windows distribution, please see  「<a href="manual.ja_Installing.html#Windows_installation">2.1.2  Windows への MySQL のインストール</a>」節.

</p>



<h3><a name="Installing_binary" href="manual.ja_toc.html#Installing_binary">2.2.10  Installing a MySQL Binary Distribution</a></h3>

<p>
<a name="IDX200"></a>
<a name="IDX201"></a>

</p>
<p>
See also  「<a href="manual.ja_Installing.html#Windows_binary_installation">2.1.2.1  Installing the Binaries</a>」節,
 「<a href="manual.ja_Installing.html#Linux-RPM">2.1.1  Installing MySQL on Linux</a>」節, and  「<a href="manual.ja_Clients.html#Building_clients">8.4.7  Building Client Programs</a>」節.

</p>
<p>
MySQL の バイナリ配布プログラムをインストールする際は以下のツールが必要になります：

</p>

<ul>
<li>

GNU <code>gunzip</code>。ソースを伸長するのに必要です。

</li><li>

ファイルアーカイバ <code>tar</code>。これもソースを展開するのに必要です。
GNU <code>tar</code>の動作は確認されています。Sun <code>tar</code>の使用には問題があります。
</li></ul>

<p>
<a name="IDX202"></a>
<a name="IDX203"></a>
Linux では別の形式、RPM-based(RPM Package Manager)配布も行われています。
 「<a href="manual.ja_Installing.html#Linux-RPM">2.1.1  Installing MySQL on Linux</a>」節参照.

</p>
<p>
もしもこの問題にぶつかってしまった場合は <code>mysqlbug</code> を使用してください。
質問等は <a href="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> に送ってください。
問題点がバグに該当しなくても <code>mysqlbug</code> は情報を集めていますので解決の
手助けになることと思います。 <code>mysqlbug</code> を使用すれば問題の解決方法を得る
確率が増します。<code>mysqlbug</code> は解凍されたプログラムの <tt>`bin'</tt> 以下にあります。
 「<a href="manual.ja_Introduction.html#Bug_reports">1.6.1.3  バグや問題を報告する方法</a>」節参照.

</p>
<p>
<a name="IDX204"></a>
MySQL バイナリ配布プログラムのインストール及び
立ち上げまでに必要となる基本操作は以下の通りです。

</p>

<pre>shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
shell&gt; cd /usr/local
shell&gt; gunzip &lt; /path/to/mysql-VERSION-OS.tar.gz | tar xvf -
shell&gt; ln -s full-path-to-mysql-VERSION-OS mysql
shell&gt; cd mysql
shell&gt; scripts/mysql_install_db
shell&gt; chown -R root  .
shell&gt; chown -R mysql data
shell&gt; chgrp -R mysql .
shell&gt; bin/safe_mysqld --user=mysql &amp;
or
shell&gt; bin/mysqld_safe --user=mysql &amp;
if you are running MySQL 4.x
</pre>

<p>
<a name="IDX205"></a>
<a name="IDX206"></a>
<a name="IDX207"></a>

</p>
<p>
新しいユーザを追加するには <code>bin/mysql_setpermission</code> スクリプトを
使用できます。使用の際は<code>DBI</code>と<code>Msql-Mysql-modules</code>の
Perlモジュールをインストールする必要があります。

</p>
<p>
より詳細な情報をここから示します。

</p>
<p>
バイナリ配布のプログラムをインストールする際は以下に従ってください。
その後、 「<a href="manual.ja_Installing.html#Post-installation">2.4  インストール後の設定とテスト</a>」節に進んでインストールの終了処理と動作試験を行ってください。

</p>

<ol>
<li>

バイナリ配布プログラムを解凍するためのディレクトリを用意してください。
そして、そこにバイナリ配布ファイルを置いてください。
以下の例では <tt>`/usr/local'</tt> にファイルを解凍し、<tt>`/usr/local/mysql'</tt> に
MySQLをインストールします。（従って以下の例では操作するユーザが
<tt>`/usr/local'</tt> に対して書き込み権限を持つことを前提としています。
もしも <tt>`/usr/local'</tt> への書き込みが禁じられている場合は
<code>root</code>としてインストールを行う必要があります。

</li><li>

プログラムの配布は以下のサイトから行ってください。
 「<a href="manual.ja_Installing.html#Getting_MySQL">2.2.1  MySQL を得る方法</a>」節.

MySQLのバイナリ配布は圧縮された <code>tar</code> 形式で行われており、
<tt>`mysql-VERSION-OS.tar.gz'</tt> のような形式の名前が付けられています。
ここで、<code>VERSION</code> はバージョン番号（例えば <code>3.21.15</code>）を
<code>OS</code> はプラットホームとなるOS（例えば <code>pc-linux-gnu-i586</code>）を示します。

</li><li>

バイナリ配布ファイルに <code>-max</code> という表示があるものがありますが、
これはこのプログラムが transaction-safe 機能やその他の機能をサポート
していることを示しています。 「<a href="manual.ja_MySQL_Database_Administration.html#mysqld-max">4.7.5  <code>mysqld-max</code>, An Extended <code>mysqld</code> Server</a>」節参照。
全てのバイナリプログラムは同じソースファイルからmakeされたものです。

</li><li>

<code>mysqld</code>が動作するためのユーザとグループを作成してください。


<pre>shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
</pre>

これらのコマンドは <code>mysql</code> グループと <code>mysql</code> ユーザを作成するものです。
<code>useradd</code> や <code>groupadd</code> というコマンドもありますが、
これらは使用プラットホームによって使い方が若干異なります。
また、<code>adduser</code> や <code>addgroup</code> と呼ばれる場合もあります。
<code>mysql</code> 以外のユーザやグループでも使用できます。

</li><li>

インストール先のディレクトリを変更する場合は以下のようにします。
まずディレクトリを移動します。


<pre>shell&gt; cd /usr/local
</pre>

</li><li>

以下のように移動したディレクトリ上でプログラムの展開を行い
インストールディレクトリを作成してください。


<pre>shell&gt; gunzip &lt; /path/to/mysql-VERSION-OS.tar.gz | tar xvf -
shell&gt; ln -s full-path-to-mysql-VERSION-OS mysql
</pre>

最初のコマンドで <tt>`mysql-VERSION-OS'</tt> という名前のディレクトリを作成します。
次のコマンドはそのディレクトリへのシンボリックリンクを作成し、
ユーザに単純な <tt>`/usr/local/mysql'</tt> という名前での利用を可能にします。

</li><li>

以下のようにインストールディレクトリへ移動します。


<pre>shell&gt; cd mysql
</pre>

複数のファイルが <code>mysql</code> 以下のディレクトリに展開されているのが
おわかりになると思います。 中でもインストールに重要な役目を果たすものは
<tt>`bin'</tt> と <tt>`scripts'</tt> のサブディレクトリにあります。

<dl compact="">

<dt><tt>`bin'</tt>
</dt><dd>
<a name="IDX208"></a>
<a name="IDX209"></a>
This directory contains client programs and the server
You should add the full pathname of this directory to your
<code>PATH</code> environment variable so that your shell finds the MySQL
programs properly.  「<a href="manual.ja_Environment_variables.html#Environment_variables">F  Environment Variables</a>」節参照.

</dd><dt><tt>`scripts'</tt>
</dt><dd>
このディレクトリには <code>mysql_install_db</code> という <code>mysql</code> への
アクセス管理を行うデータベースを初期化するためのスクリプトが置いてあります。
</dd></dl>

</li><li>

<code>mysqlaccess</code>を使う必要があり、なおかつ、標準ディレクトリとは異なる場所に
インストールを行いたい場合は、<code>mysqlaccess</code> が <code>mysql</code>クライアントを
起動できるように環境設定を行う必要があります。
<tt>`bin/mysqlaccess'</tt>の18行目位にある以下のような行を変更してください。


<pre>$MYSQL     = '/usr/local/bin/mysql';    # path to mysql executable
</pre>

これを実際に <code>mysql</code> がインストールされているディレクトリに変更してください。
これをしないと <code>mysqlaccess</code> を使う際に <code>Broken pipe</code> エラーが発生します。

</li><li>

以下のようにすることによりアクセス管理データベースを作ることができます
（初めてMySQLをインストールする時だけ必要）。

<pre>shell&gt; scripts/mysql_install_db
</pre>

使用する MySQL のバージョンが 3.22.10 より古い場合はこの操作をする時に MySQL サーバが
立ち上がっている必要がありましたが、現在のバージョンでは必要ありません。

</li><li>

Change ownership of binaries to <code>root</code> and ownership of the data
directory to the user that you will run <code>mysqld</code> as:


<pre>shell&gt; chown -R root  /usr/local/mysql/.
shell&gt; chown -R mysql /usr/local/mysql/data
shell&gt; chgrp -R mysql /usr/local/mysql/.
</pre>

最初のコマンドによって全てのファイルの <code>owner</code> 属性が <code>root</code> になります。
二行目のコマンドによってデータディレクトリ以下のファイル全ての <code>owner</code> 属性が
<code>mysql</code> になります。
最後のコマンドによって全てのファイルの <code>group</code> 属性が <code>mysql</code> になります。

</li><li>

Perlモジュール<code>DBI</code>、<code>DBD</code>のインストールが必要なら 「<a href="manual.ja_Installing.html#Perl_support">2.7  Perl Installation Comments</a>」節の項をご覧下さい。

</li><li>

MySQL を OS のブート時に自動的に起動したい場合は <code>support-files/mysql.server</code> を
貴方のシステムの的確な場所にコピーして使用できます。
より詳しい情報は <code>support-files/mysql.server</code> のスクリプト自体や  「<a href="manual.ja_Installing.html#Automatic_start">2.4.3  MySQL の自動起動と自動停止</a>」節 にあります。

</li></ol>

<p>
全てのファイルの展開とインストールが終了したら初期化と稼動試験を行います。

</p>
<p>
以下のようにしてMySQLサーバを立ち上げることができます。

</p>

<pre>shell&gt; bin/safe_mysqld --user=mysql &amp;
</pre>

<p>
Now proceed to  「<a href="manual.ja_MySQL_Database_Administration.html#safe_mysqld">4.7.2  <code>safe_mysqld</code>, The Wrapper Around <code>mysqld</code></a>」節, and
 「<a href="manual.ja_Installing.html#Post-installation">2.4  インストール後の設定とテスト</a>」節参照.

</p>



<h2><a name="Installing_source" href="manual.ja_toc.html#Installing_source">2.3  MySQL ソースディストリビューションのインストール</a></h2>

<p>
<a name="IDX210"></a>
<a name="IDX211"></a>
<a name="IDX212"></a>

</p>
<p>
ソースインストールに取り掛かる前に、最初に我々のバイナリがあなたのプラット
フォームに有効で、動作するかどうかをチェックしてください。我々は、我々のバ
イナリが可能な限りのオプションで構築されていることを確認するために多くの努
力をしています。

</p>
<p>
ソースから MySQL を作成しインストールするためには次のツールが必
要です:

</p>

<ul>
<li>

GNU <code>gunzip</code>。配布の伸張のため。

</li><li>

適正な <code>tar</code>。配布の展開のため。GNU <code>tar</code> は動くことが知られて
います。Sun の <code>tar</code> は問題があることが知られています。

</li><li>

A working ANSI C++ compiler.  <code>gcc</code> &gt;= 2.95.2, <code>egcs</code> &gt;= 1.0.2
or <code>egcs 2.91.66</code>, SGI C++, and SunPro C++ are some of the
compilers that are known to work.  <code>libg++</code> is not needed when
using <code>gcc</code>.  <code>gcc</code> 2.7.x has a bug that makes it impossible
to compile some perfectly legal C++ files, such as
<tt>`sql/sql_base.cc'</tt>.  If you only have <code>gcc</code> 2.7.x, you must
upgrade your <code>gcc</code> to be able to compile MySQL. <code>gcc</code>
2.8.1 is also known to have problems on some platforms, so it should be
avoided if a new compiler exists for the platform.

MySQL 3.23.x のコンパイル時は、<code>gcc</code> &gt;= 2.95.2 を推奨します。

</li><li>

良い <code>make</code> プログラム。GNU <code>make</code> は常に推奨され、時々は必要
とされます。問題があれば GNU <code>make</code> 3.75 以上を試すことをお勧めしま
す。
</li></ul>

<p>
<code>-fno-exceptions</code> オプションを解釈する <strong>gcc</strong> の最近のバージョ
ンを使用している場合は、それを使用することが<strong>とても重要</strong>です。そう
でなければ、ランダムにクラッシュするバイナリができあがるでしょう。また、
<code>-fno-exceptions</code> に加え、<code>-felide-contructors</code> と 
<code>-fno-rtti</code> を使用することをお奨めします。
疑いがある時は、次を行なってください:

</p>

<pre>
CFLAGS="-O3" CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions \
       -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler \
       --with-mysqld-ldflags=-all-static

</pre>

<p>
多くのシステムで、これは速くて安定したバイナリを与えます。

</p>
<p>
問題が起きたときは、<a href="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> に質問を投稿する時に 
<strong><code>mysqlbug</code> を常に使用してください</strong>。問題がバグでないとして
も、<code>mysqlbug</code> はあなたの問題を解決する助けになるであろうシステム情
報を収集します。<code>mysqlbug</code> を使用しないと、あなたの問題の解決を得る
可能性が小さくなります！ <code>mysqlbug</code> は、配布のアンパック後に 
<tt>`scripts'</tt> ディレクトリ内に見つけられます。
 「<a href="manual.ja_Introduction.html#Bug_reports">1.6.1.3  バグや問題を報告する方法</a>」節参照.

</p>



<h3><a name="Quick_install" href="manual.ja_toc.html#Quick_install">2.3.1  素早いインストールの概要</a></h3>

<p>
MySQL をソースからインストールするために行なわなければならない
基本的なコマンド:

</p>

<pre>shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
shell&gt; gunzip &lt; mysql-VERSION.tar.gz | tar -xvf -
shell&gt; cd mysql-VERSION
shell&gt; ./configure --prefix=/usr/local/mysql
shell&gt; make
shell&gt; make install
shell&gt; scripts/mysql_install_db
shell&gt; chown -R root  /usr/local/mysql
shell&gt; chown -R mysql /usr/local/mysql/var
shell&gt; chgrp -R mysql /usr/local/mysql
shell&gt; cp support-files/my-medium.cnf /etc/my.cnf
shell&gt; /usr/local/mysql/bin/safe_mysqld --user=mysql &amp;
or
shell&gt; /usr/local/mysql/bin/mysqld_safe --user=mysql &amp;
if you are running MySQL 4.x.
</pre>

<p>
InnoDB テーブルをサポートしたい場合は、<code>/etc/my.cnf</code> ファイルを編集し
て、<code>innodb_...</code> で始まるパラメータの前の <code>#</code> 文字を削除すべきで
す。
 「<a href="manual.ja_MySQL_Database_Administration.html#Option_files">4.1.2  <tt>`my.cnf'</tt> オプションファイル</a>」節参照, and  「<a href="manual.ja_Table_types.html#InnoDB_start">7.5.2  InnoDB 起動オプション</a>」節.

</p>
<p>
RPM ソースから開始する場合は：

</p>

<pre>shell&gt; rpm --rebuild --clean MySQL-VERSION.src.rpm
</pre>

<p>
これはインストールできるRPMバイナリを作成します

</p>
<p>
もし <code>DBI</code> と <code>Msql-Mysql-modules</code> Perl モジュールをインストールするなら、
<code>bin/mysql_setpermission</code> スクリプトが使用する新しいユーザーを
追加することができます。

</p>
<p>
次にさらに詳細な説明を行ないます:

</p>
<p>
ソース配布のインストールには、次のステップに従い、それから インストール
後の初期化とテストのために  「<a href="manual.ja_Installing.html#Post-installation">2.4  インストール後の設定とテスト</a>」節 に進んでください。

</p>

<ol>
<li>

配布をアンパックしたいディレクトリを選んで、そこに移ってください。

</li><li>

配布ファイルを  「<a href="manual.ja_Installing.html#Getting_MySQL">2.2.1  MySQL を得る方法</a>」節. にリストされたサイトの一つから得てください。

</li><li>

MySQL で Berkeley DB テーブルの使用に興味がある場合、Berkeley DB ソースコー
ドのパッチバージョンを入手する必要があります。処理の前に Berkeley DB テー
ブルの章を読んでください。   「<a href="manual.ja_Table_types.html#BDB">7.6  <code>BDB</code> or <code>BerkeleyDB</code> Tables</a>」節参照.

MySQL ソース配布は圧縮された <code>tar</code> アーカイブとして提供さ
れ、<tt>`mysql-VERSION.tar.gz'</tt> のような名前を持ちます。ここで 
<code>VERSION</code> は 4.0.11-gamma のような番号です。

</li><li>

<code>mysqld</code> を実行するユーザーとグループを追加します:


<pre>shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
</pre>

これらのコマンドは <code>mysql</code> グループと <code>mysql</code> ユーザを追加します。
<code>useradd</code> と <code>groupadd</code> 構文は、別のバージョンの UNIX 上では少し異なるでしょ
う。<code>adduser</code> と <code>addgroup</code> と呼ばれることもあります。ユーザとグ
ループは <code>mysql</code> の代わりに他の何かにすることもできます。

</li><li>

カレントディレクトリに配布をアンパックしてください:

<pre>shell&gt; gunzip &lt; /path/to/mysql-VERSION.tar.gz | tar xvf -
</pre>

このコマンドは <tt>`mysql-VERSION'</tt> という名前のディレクトリを作成します。

</li><li>

Change into the top-level directory of the unpacked distribution:


<pre>shell&gt; cd mysql-VERSION
</pre>

注意: 現在のこのトップレベルディレクトリで MySQL の configure と
build を行なう必要があります。別のディレクトリでは build できません。

</li><li>

リリースを configure し、全てをコンパイルしてください:


<pre>shell&gt; ./configure --prefix=/usr/local/mysql
shell&gt; make
</pre>

<code>configure</code> の実行時、いくつかのオプションを指定できます。オプショ
ンの一覧は <code>./configure --help</code> を実行してください。 「<a href="manual.ja_Installing.html#configure_options">2.3.3  典型的な <code>configure</code> オプション</a>」節, さらに有用なオプションのいくつかに
ついて議論しています。

<code>configure</code> が失敗して、援助を得るために <a href="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> にメー
ルを送ろうとする場合、<tt>`config.log'</tt> から問題の解決の手助けにできると
考えられる行を含めてください。<code>configure</code> が異常終了する場合、
<code>configure</code> からの出力の最後の数行も含めてください。バグレポートは 
<code>mysqlbug</code> スクリプトを使用して投稿してください。 「<a href="manual.ja_Introduction.html#Bug_reports">1.6.1.3  バグや問題を報告する方法</a>」節参照。

コンパイルが失敗する場合、いくらかのよくある問題での手助けのため、
 「<a href="manual.ja_Installing.html#Compilation_problems">2.3.5  MySQL コンパイル時の問題</a>」節 を参照してください。

</li><li>

全てをインストールしてください:


<pre>shell&gt; make install
</pre>

このコマンドは <code>root</code> として実行する必要があります。

</li><li>

MySQL 権限テーブルを生成してください(以前に MySQL をイ
ンストールしていない時にだけ必要です):


<pre>shell&gt; scripts/mysql_install_db
</pre>

注意: 3.22.10 より古い MySQL バージョンでは、
<code>mysql_install_db</code> 実行時に MySQL サーバが開始されましたが、
これはもはや真ではありません！

</li><li>

バイナリのオーナーを <code>root</code> に、
データディレクトリの所有権を <code>mysqld</code> を実行するユーザに変更し
てください:


<pre>shell&gt; chown -R root  /usr/local/mysql
shell&gt; chown -R mysql /usr/local/mysql/var
shell&gt; chgrp -R mysql /usr/local/mysql
</pre>

最初のコマンドはファイルの <code>owner</code> 属性を <code>root</code> ユーザーに変更し、
2番目のコマンドは <code>owner</code> を <code>mysql</code> ユーザに変更し、
3番目のコマンドは <code>group</code> 属性を <code>mysql</code> グループに変更します。

</li><li>

Perl <code>DBI</code>/<code>DBD</code> インタフェースのサポートをインストールしたい
場合、 「<a href="manual.ja_Installing.html#Perl_support">2.7  Perl Installation Comments</a>」節 を見てください。

</li><li>

MySQL をマシン起動時に自動的に開始したい場合、
<code>support-files/mysql.server</code> をシステムのスタートアップファイルがあ
る場所にコピーしてください。さらなる情報は 
<code>support-files/mysql.server</code> スクリプト自身の中と、
 「<a href="manual.ja_Installing.html#Automatic_start">2.4.3  MySQL の自動起動と自動停止</a>」節 に見つけられます。
 「<a href="manual.ja_Installing.html#Automatic_start">2.4.3  MySQL の自動起動と自動停止</a>」節.
</li></ol>

<p>
全てがインストールされた後、配布の初期化とテストを行なうべきです。

</p>

<pre>shell&gt; /usr/local/mysql/bin/safe_mysqld --user=mysql &amp;
</pre>

<p>
コマンドがすぐに <code>mysqld daemon ended</code> エラーで失敗する場合、
<tt>`mysql-data-directory/'hostname'.err'</tt> ファイルになんらかの情報を
見つけることができます。 よくあることとして、すでに他の <code>mysqld</code> が
走っている場合などがあります。  「<a href="manual.ja_MySQL_Database_Administration.html#Multiple_servers">4.1.4  同一マシン上に複数の MySQL サーバーを走らせる</a>」節参照.

</p>
<p>
Now proceed to  「<a href="manual.ja_Installing.html#Post-installation">2.4  インストール後の設定とテスト</a>」節.

</p>



<h3><a name="Applying_patches" href="manual.ja_toc.html#Applying_patches">2.3.2  パッチの適用</a></h3>

<p>
<a name="IDX213"></a>
<a name="IDX214"></a>

</p>
<p>
時々、パッチは、メーリング・リストに流されたり、または
MySQL Web サイトのパッチエリア
 (<a href="http://www.mysql.com/downloads/patches.html">http://www.mysql.com/downloads/patches.html</a>) に置かれます。

</p>

<p>
メーリング・リストからのパッチを適用するには、パッチが載っているメッセージを
ファイルに保存して、あなたの MySQL ソース・ツリーの
一番上のディレクトリーに移動し、以下のようにコマンドを実行します：

</p>

<pre>shell&gt; patch -p1 &lt; patch-file-name
shell&gt; rm config.cache
shell&gt; make clean
</pre>

<p>
FTPサイトに置かれるパッチは、プレーンテキストファイルとして、
あるいは <code>gzip</code> で圧縮されたファイルとして頒布されます。
プレーンテキストのパッチの場合は、上に示したメーリングリストの
パッチと同様に適用します。 圧縮されたパッチを適用するには、
MySQL ソース・ツリーの
一番上のディレクトリーに移動し、以下のようにコマンドを実行します：

</p>

<pre>shell&gt; gunzip &lt; patch-file-name.gz | patch -p1
shell&gt; rm config.cache
shell&gt; make clean
</pre>

<p>
それから通常のソースインストールの指示を <code>./configure</code> ステップから
始めます。<code>make install</code> ステップ実行後、あなたの MySQL サー
バを再起動します。

</p>
<p>
<code>make install</code> を実行する前に、現在走っているサーバーを止める必要があるかもしれません。
( <code>mysqladmin shutdown</code> で止めます ) 
いくつかのシステムでは、現在実行しているものを止めない限り、
新しいバージョンをインストールできないようになっています。

</p>



<h3><a name="configure_options" href="manual.ja_toc.html#configure_options">2.3.3  典型的な <code>configure</code> オプション</a></h3>

<p>
<a name="IDX215"></a>
<a name="IDX216"></a>
<a name="IDX217"></a>
<a name="IDX218"></a>
<a name="IDX219"></a>
<a name="IDX220"></a>

</p>
<p>
<code>configure</code> スクリプトは MySQL 配布をどのようにコンフィグ
するかを制御するための多くの処理を提供します。典型的には、
<code>configure</code> コマンドラインにオプションを使用してこれを行ないます。
いくつかの環境変数を使用しても <code>configure</code> に影響を与えることができ
ます。  「<a href="manual.ja_Environment_variables.html#Environment_variables">F  Environment Variables</a>」節参照.
 <code>configure</code> がサポートするオプションの一覧は、次のコマンドを
実行してください:

</p>

<pre>shell&gt; ./configure --help
</pre>

<p>
一般的に使用される <code>configure</code> オプションのいくつかを以下に説明します:

</p>

<ul>
<li>

MySQL クライアントライブラリとクライアントプログラムだけをコン
パイルするには、<code>--without-server</code> オプションを使用してください:


<pre>shell&gt; ./configure --without-server
</pre>

C++ コンパイラがなければ、<code>mysql</code> はコンパイルできません(これは C++ 
を要求するクライアントプログラムの一つです)。この場合、<code>configure</code> 
から C++ コンパイラをテストするコードを削除でます。それから 
<code>./configure</code> を <code>--without-server</code> オプションつきで実行してく
ださい。コンパイルステップは <code>mysql</code> の作成を試みますが、
<tt>`mysql.cc'</tt> についての警告は無視できます。(<code>make</code> が止まる場合、
エラーが発生しても残りの作成を継続するように <code>make -k</code> を試してくだ
さい。)

</li><li>

組み込み MySQL ライブラリ(<code>libmysqld.a</code>)を得たい場合は、
<code>--with-embedded-server</code> オプションを使用してください。(version 4.0以
上)

</li><li>

ログファイルとデータベースディレクトリを <tt>`/usr/local/var'</tt> 配下にお
きたくない場合は、次の <code>configure</code> コマンドのうちのどれかを使用してく
ださい:


<pre>shell&gt; ./configure --prefix=/usr/local/mysql
shell&gt; ./configure --prefix=/usr/local \
           --localstatedir=/usr/local/mysql/data
</pre>

最初のコマンドはインストールプレフィックスを変更し、デフォルトの 
<tt>`/usr/local'</tt> ではなく <tt>`/usr/local/mysql'</tt> 配下にインストールし
ます。次のコマンドはデフォルトのインストールプレフィックスを保存しますが、
データベースディレクトリのデフォルト位置(通常は <tt>`/usr/local/var'</tt>)を
上書きし、<code>/usr/local/mysql/data</code> に変更します。
MySQL をコンパイルした後でも、これらのオプションはオプションファイルで変更
できます  「<a href="manual.ja_MySQL_Database_Administration.html#Option_files">4.1.2  <tt>`my.cnf'</tt> オプションファイル</a>」節参照.

<a name="IDX221"></a>
<a name="IDX222"></a>
<a name="IDX223"></a>
</li><li>

UNIX を使用していて、ソケットの位置をデフォルト位置(通常は <tt>`/tmp'</tt> または 
<tt>`/var/run'</tt>)でなく他のどこかにしたい場合は、<code>configure</code> コマン
ドを次のように使用します:


<pre>shell&gt; ./configure --with-unix-socket-path=/usr/local/mysql/tmp/mysql.sock
</pre>

ファイル名は絶対パスでなければなりません！
MySQL オプションファイルを使用することで、<tt>`mysql.sock'</tt> の場所をあとで
変更することもできます。  「<a href="manual.ja_Problems.html#Problems_with_mysql.sock">A.4.5  MySQL ソケットファイル <tt>`/tmp/mysql.sock'</tt> を変更する方法、削除から守る方法</a>」節参照.

<a name="IDX224"></a>
<a name="IDX225"></a>
</li><li>

静的リンクされたプログラムをコンパイルしたい場合(例えば、バイナリ配布を
作成するため、もっと速くするため、いくつかの RedHat 配布での問題を回避す
るため)は、次のように <code>configure</code> を実行します:


<pre>shell&gt; ./configure --with-client-ldflags=-all-static \
           --with-mysqld-ldflags=-all-static
</pre>

<a name="IDX226"></a>
<a name="IDX227"></a>
<a name="IDX228"></a>
<a name="IDX229"></a>
<a name="IDX230"></a>
<a name="IDX231"></a>
<a name="IDX232"></a>
</li><li>

<code>gcc</code> を使用していて、<code>libg++</code> や <code>libstdc++</code> がインストー
ルされていない場合、<code>configure</code> に <code>gcc</code> を C++ コンパイラとし
て使用することを伝えてください:


<pre>shell&gt; CC=gcc CXX=gcc ./configure
</pre>

<code>gcc</code> を C++ コンパイラとして使用する時、<code>libg++</code> または 
<code>libstdc++</code> のリンクは試みません。
This may be a good idea to do even if you
have the above libraries installed, as some versions of these libraries have
caused strange problems for MySQL users in the past.

あなたが使用しているコンパイラによって、設定するいくつかの標準的な環境変数
があります:

<a name="IDX233"></a>
<a name="IDX234"></a>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>Compiler</strong> </td><td> <strong>Recommended options</strong>
</td></tr>
<tr><td>gcc 2.7.2.1 </td><td>
CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors"
</td></tr>
<tr><td>egcs 1.0.3a </td><td>
CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti"
</td></tr>
<tr><td>gcc 2.95.2 </td><td>
CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro \
-felide-constructors -fno-exceptions -fno-rtti"
</td></tr>
<tr><td>pgcc 2.90.29 or newer </td><td>
CFLAGS="-O3 -mpentiumpro -mstack-align-double" CXX=gcc \
CXXFLAGS="-O3 -mpentiumpro -mstack-align-double -felide-constructors \
-fno-exceptions -fno-rtti"
</td></tr>
</tbody></table>

多くの場合、上述のオプションと次の configure 行オプションの使用によって、
最適な MySQL バイナリを得ることができます:


<pre>--prefix=/usr/local/mysql --enable-assembler \
--with-mysqld-ldflags=-all-static
</pre>

言い換えれば、すべての最近の gcc バージョン用には、完全な configure 行は次
のようなものになります:


<pre>CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro \
-felide-constructors -fno-exceptions -fno-rtti" ./configure \
--prefix=/usr/local/mysql --enable-assembler \
--with-mysqld-ldflags=-all-static
</pre>

我々が MySQL Web サイト <a href="http://www.mysql.com/">http://www.mysql.com/</a> 上で提供して
いるバイナリは、完全に最適化されてコンパイルされ、多くのユーザに完全です。
 「<a href="manual.ja_Installing.html#MySQL_binaries">2.2.9  MySQL Binaries Compiled by MySQL AB</a>」節参照。さらに速いバイナリを作成するために調整できることが
いくつかありますが、これは上級ユーザ向けです。
 「<a href="manual.ja_MySQL_Optimization.html#Compile_and_link_options">5.5.3  MySQL の速度に影響するコンパイルとリンク方法</a>」節参照.

コンパイラやリンカが共有ライブラリ <tt>`libmysqlclient.so.#'</tt> を生成でき
ないというエラーになる場合、<code>--disable-shared</code> オプションを 
<code>configure</code> に与えることで、この問題を回避できます。この場合、
<code>configure</code> は共有ライブラリ <tt>`libmysqlclient.so.#'</tt> を作成しま
せん。

<a name="IDX235"></a>
<a name="IDX236"></a>
</li><li>

非 <code>NULL</code> 項目(すなわち、<code>NULL</code> が許されていない項目)に 
<code>DEFAULT</code> 項目値を使用しないように MySQL をコンフィグでき
ます。これは、非 <code>NULL</code> 値を要求する全ての項目に値を明示的に指定し
なければ、<code>INSERT</code> ステートメントはエラーを生成します。デフォルト値
の使用を抑えるには、次のように <code>configure</code> を実行します:

<a name="IDX237"></a>
<a name="IDX238"></a>

<pre>shell&gt; CXXFLAGS=-DDONT_USE_DEFAULT_FIELDS ./configure
</pre>

<a name="IDX239"></a>
<a name="IDX240"></a>
<a name="IDX241"></a>
</li><li>

デフォルトでは、MySQL は ISO-8859-1 (Latin1) 文字セットを使用し
ます。デフォルトセットを変更するには、<code>--with-charset</code> オプションを
使用します:

<pre>shell&gt; ./configure --with-charset=CHARSET
</pre>

<code>CHARSET</code> は次のうちの一つです:  <code>big5</code>, <code>cp1251</code>, <code>cp1257</code>,
<code>czech</code>, <code>danish</code>, <code>dec8</code>, <code>dos</code>, <code>euc_kr</code>,
<code>gb2312</code>, <code>gbk</code>, <code>german1</code>, <code>hebrew</code>, <code>hp8</code>,
<code>hungarian</code>, <code>koi8_ru</code>, <code>koi8_ukr</code>, <code>latin1</code>,
<code>latin2</code>, <code>sjis</code>, <code>swe7</code>, <code>tis620</code>, <code>ujis</code>,
<code>usa7</code>, or <code>win1251ukr</code>.
 「<a href="manual.ja_MySQL_Database_Administration.html#Character_sets">4.6.1  データとソートに使用されるキャラクター・セット</a>」節参照.

サーバとクライアント間で文字を変換したい場合は、
<code>SET CHARACTER SET</code> コマンドを調べるべきです。
 「<a href="manual.ja_MySQL_Optimization.html#SET_OPTION">5.5.6  <code>SET</code> 構文</a>」節参照.

<a name="IDX242"></a>
<strong>警告:</strong> テーブルを生成した後に文字セットを変更する場合、
<code>myisamchk -r -q --set-character-set=charset</code> を全てのテーブルに実行する必要があります。
そうでないと、インデックスは正しくソートされません。(これは、MySQL のイ
ンストール時、いくつかのテーブルの生成時、異なる文字セットを使用して 
MySQL の再コンフィグ時、そして再インストール時に発生します。)

オプション <code>--with-extra-charsets=LIST</code> で、サーバ内に組み込むべき追加
文字セットを指定することができます。

ここで、<code>LIST</code> は空白で区切られた文字セットのリストです。
<code>complex</code> は動的にロードできないすべての文字を含み、<code>all</code> はバイ
ナリにすべての文字セットを含みます。

</li><li>

デバッグコードつきで MySQL を構築するには、
<code>--with-debug</code> オプションを使用します:

<pre>shell&gt; ./configure --with-debug
</pre>

これにより、いくつかのエラーを見つけられる安全なメモリ割り当てが含まれ、
何が発生しているかについての出力を提供します。
 「<a href="manual.ja_Porting.html#Debugging_server">E.1  MySQL server のデバッグ</a>」節参照.

</li><li>

あなたのクライアントプログラムがスレッドを使用している場合、
MySQL クライアントライブラリを 
<code>--enable-thread-safe-client</code> configure オプションでスレッド安全用に
コンパイルする必要があります。これは、スレッドアプリケーションがリンクす
べき <code>libmysqlclient_r</code> ライブラリを生成します。
 「<a href="manual.ja_Clients.html#Threaded_clients">8.4.8  スレッドクライアントを作る方法</a>」節参照.

</li><li>

固有のシステムに関係するオプションについては、この章より後のシステム固有
の節で見つけることができます。
 「<a href="manual.ja_Installing.html#Operating_System_Specific_Notes">2.6  Operating System Specific Notes</a>」節参照.
</li></ul>



<h3><a name="Installing_source_tree" href="manual.ja_toc.html#Installing_source_tree">2.3.4  開発ソースツリーからのインストール</a></h3>

<p>
<a name="IDX243"></a>
<a name="IDX244"></a>
<a name="IDX245"></a>

</p>
<p>
<strong>警告:</strong> 我々の新しいテストコードについて我々を手助けすることに興味
がある場合にだけ、この節を読むべきです。MySQL を得て、あなたのシ
ステム上で実行したいだけの場合は、標準リリースディストリビューションを使
用すべきです(ソースまたはバイナリディストリビューション)。

</p>
<p>
我々のもっとも新しい開発ソースツリーを得るには、次の手順に従ってください:

</p>

<ol>
<li>

Download <code>BitKeeper</code> from
<a href="http://www.bitmover.com/cgi-bin/download.cgi">http://www.bitmover.com/cgi-bin/download.cgi</a>.  You will need
<code>Bitkeeper</code> 3.0 or newer to access our repository.

</li><li>

Follow the instructions to install it.

</li><li>

After <code>BitKeeper</code> is installed, first go to the directory you
want to work from, and then use one of the following commands to clone
the MySQL version branch of your choice:

To clone the 3.23 branch, use this command:


<pre>shell&gt; bk clone bk://mysql.bkbits.net/mysql-3.23 mysql-3.23
</pre>

To clone the 4.0 branch, use this command:


<pre>shell&gt; bk clone bk://mysql.bkbits.net/mysql-4.0 mysql-4.0
</pre>

To clone the 4.1 branch, use this command:


<pre>shell&gt; bk clone bk://mysql.bkbits.net/mysql-4.1 mysql-4.1
</pre>

In the preceding examples the source tree will be set up in the
<tt>`mysql-3.23/'</tt>, <tt>`mysql-4.0/'</tt>, or <tt>`mysql-4.1/'</tt>
subdirectory of your current directory.

If you are behind a firewall and can only initiate HTTP connections,
you can also use <code>BitKeeper</code> via HTTP.

If you are required to use a proxy server, simply set the environment
variable <code>http_proxy</code> to point to your proxy:


<pre>shell&gt; export http_proxy="http://your.proxy.server:8080/"
</pre>

Now, simply replace the <code>bk://</code> with <code>http://</code> when doing
a clone. Example:


<pre>shell&gt; bk clone http://mysql.bkbits.net/mysql-4.1 mysql-4.1
</pre>

The initial download of the source tree may take a while, depending on the
speed of your connection - please be patient.

</li><li>

You will need GNU <code>make</code>, <code>autoconf 2.53 (or newer)</code>,
<code>automake 1.5</code>, <code>libtool 1.4</code>, and <code>m4</code> to run the next
set of commands.  Note that <code>automake 1.7 or newer</code> doesn't yet work.

If you are using trying to configure MySQL 4.1 you will also need
<code>bison 1.75</code>.  Older versions of <code>bison</code> may report this error:
<code>sql_yacc.yy:#####: fatal error: maximum table size (32767)
exceeded</code>. Note: the maximum table size is not actually exceeded,
the error is caused by bugs in these earlier <code>bison</code> versions.

The typical command to do in a shell is:


<pre>cd mysql-4.0
bk -r get -Sq
aclocal; autoheader; autoconf; automake
(cd innobase ; aclocal; autoheader; autoconf; automake) # for InnoDB
(cd bdb/dist ; sh s_all ) # for Berkeley DB
./configure  # Add your favorite options here
make
</pre>

If you get some strange error during this stage, check that you really
have <code>libtool</code> installed!

A collection of our standard configure scripts is located in the
<tt>`BUILD/'</tt> subdirectory.  If you are lazy, you can use
<tt>`BUILD/compile-pentium-debug'</tt>. To compile on a different architecture,
modify the script by removing flags that are Pentium-specific.

</li><li>

When the build is done, run <code>make install</code>.  Be careful with this
on a production machine; the command may overwrite your live release
installation.  If you have another installation of MySQL, we
recommand that you run <code>./configure</code> with different values for the
<code>prefix</code>, <code>with-tcp-port</code>, and <code>unix-socket-path</code> options than
those used for your production server.

</li><li>

Play hard with your new installation and try to make the new features
crash.  Start by running <code>make test</code>.   「<a href="manual.ja_Extending_MySQL.html#MySQL_test_suite">9.1.2  MySQL Test Suite</a>」節参照.

</li><li>

If you have gotten to the <code>make</code> stage and the distribution does
not compile, please report it to <a href="mailto:bugs@lists.mysql.com">bugs@lists.mysql.com</a>.  If you
have installed the latest versions of the required GNU tools, and they
crash trying to process our configuration files, please report that also.
However, if you execute <code>aclocal</code> and get a <code>command not found</code>
error or a similar problem, do not report it.  Instead, make sure all
the necessary tools are installed and that your <code>PATH</code> variable is
set correctly so that your shell can find them.

</li><li>

After the initial <code>bk clone</code> operation to get the source tree, you
should run <code>bk pull</code> periodically to get the updates.

</li><li>

You can examine the change history for the tree with all the diffs by using
<code>bk sccstool</code>.  If you see some funny diffs or code that you have a
question about, do not hesitate to send e-mail to
<a href="mailto:internals@lists.mysql.com">internals@lists.mysql.com</a>. Also, if you think you have a better idea
on how to do something, send an e-mail to the same address with a patch.
<code>bk diffs</code> will produce a patch for you after you have made changes
to the source. If you do not have the time to code your idea, just send
a description.

</li><li>

<code>BitKeeper</code> has a nice help utility that you can access via
<code>bk helptool</code>.

</li><li>

Please note that any commits (<code>bk ci</code> or <code>bk citool</code>) will
trigger the posting of a message with the changeset to our internals
mailing list, as well as the usual openlogging.org submission with
just the changeset comments.
Generally, you wouldn't need to use commit (since the public tree will
not allow <code>bk push</code>), but rather use the <code>bk diffs</code> method
described previously.

</li></ol>

<p>
You can also browse changesets, comments and sourcecode online
by browsing to e.g. <a href="http://mysql.bkbits.net:8080/mysql-4.1">http://mysql.bkbits.net:8080/mysql-4.1</a> For MySQL 4.1.

</p>
<p>
The manual is in a separate tree which can be cloned with:

</p>

<pre>shell&gt; bk clone bk://mysql.bkbits.net/mysqldoc mysqldoc
</pre>



<h3><a name="Compilation_problems" href="manual.ja_toc.html#Compilation_problems">2.3.5  MySQL コンパイル時の問題</a></h3>

<p>
<a name="IDX246"></a>
<a name="IDX247"></a>
<a name="IDX248"></a>
<a name="IDX249"></a>
<a name="IDX250"></a>

</p>
<p>
Solaris や Linux 上で <code>gcc</code> を使用した場合、一切警告無く
全ての MySQL プログラムがきれいに作れます。
他のシステムではインクルードファイルの違いから警告が出るかもしれません。
 MIT-pthreads を使用した際の警告は  「<a href="manual.ja_Installing.html#MIT-pthreads">2.3.6  MIT-pthreads に関して</a>」節 を参照してください。
他の問題は、以下をチェックしてください。

</p>
<p>
多くの問題の解決のために、再 configure が必要です。
あなたが再構成する必要があるならば、以下に気をつけてください：

</p>
<p>
<a name="IDX251"></a>
<a name="IDX252"></a>
<a name="IDX253"></a>
<a name="IDX254"></a>

</p><ul>
<li>

もし <code>configure</code> を一度実行した後に実行するならば、 <code>configure</code> は
前に作った情報を利用します。この情報は <tt>`config.cache'</tt> に保存されます。
 <code>configure</code> は起動時にこのファイルを探し、もし存在するならば、
その中の情報が正しい物として読み込みます。
これはあなたが再コンフィグするならば無効になります。

</li><li>

<code>configure</code> を実行するごとに、 <code>make</code> を実行してコンパイルしなければなりません。
しかし、最初に、前のビルドでできたオブジェクトを、消しておいてください。
なぜなら、違うコンフィグオプションにより生成されたからです。
</li></ul>

<p>
古いコンフィグやオブジェクトファイルの使用を防ぐため、
 <code>configure</code> 前に以下のコマンドを実行してください：

</p>

<pre>shell&gt; rm config.cache
shell&gt; make clean
</pre>

<p>
こうするかわりに、<code>make distclean</code> としても構いません。

</p>
<p>
以下に、 MySQL をコンパイルする際に起こりやすい問題をあげておきます：

</p>

<ul>
<li>

<a name="IDX255"></a>
<a name="IDX256"></a>
<a name="IDX257"></a>
<a name="IDX258"></a>
<a name="IDX259"></a>
<a name="IDX260"></a>
<tt>`sql_yacc.cc'</tt> コンパイル時に、以下のようなエラーが出た場合、
メモリー、スワップが足りません：


<pre>Internal compiler error: program cc1plus got fatal signal 11
  or
Out of virtual memory
  or
Virtual memory exhausted
</pre>

この問題は、<code>gcc</code> がインライン展開で <tt>`sql_yacc.cc'</tt> をコンパイルするのに、
とても多くのメモリーを必要とするからです。
この場合、 <code>configure</code> を <code>--with-low-memory</code> オプション指定で実行します：


<pre>shell&gt; ./configure --with-low-memory
</pre>

このオプションは、 <code>gcc</code> を使用しているなら <code>-fno-inline</code> オプションを
コマンドラインに加え、<code>gcc</code> 以外ならば <code>-O0</code> を加えます。
多くのメモリーとスワップを持っていない限りは、<code>--with-low-memory</code>
オプションを使用すべきです。
この問題はけっこうなハードウェア構成でも起こることが知られています。
通常、 <code>--with-low-memory</code> オプションでこの問題は解決できます。

</li><li>

標準では、<code>configure</code> は <code>c++</code> という名前でコンパイラーを使用し、
GNU <code>c++</code> は <code>-lg++</code> を使ってリンクします。
もし <code>gcc</code> を使用しているならば、コンフィグ時に以下のような問題が出るかもしれません：

<a name="IDX261"></a>

<pre>configure: error: installation or configuration problem:
C++ compiler cannot create executables.
</pre>

<a name="IDX262"></a>
<a name="IDX263"></a>
この問題は、<code>g++</code>, <code>libg++</code> あるいは <code>libstdc++</code> に関連したものです。

原因の一つとして考えられることは、 <code>g++</code> を持っていないか、あるいは、
<code>g++</code> はあっても <code>libg++</code> か <code>libstdc++</code> がないという事です。
<tt>`config.log'</tt> ファイルは c++ コンパイラが動作しなかった理由を記録しています！
この問題を解決するに当たり、あなたが持っている C++ コンパイラーの代わりに
 <code>gcc</code> を使用しても構いません。<code>CXX</code> 環境変数に <code>"gcc -O3"</code> としてみてください。
例えば：

<a name="IDX264"></a>
<a name="IDX265"></a>

<pre>shell&gt; CXX="gcc -O3" ./configure
</pre>

これは <code>gcc</code> が <code>g++</code> と同様に C++ ソースをコンパイルするので動きますが、
<code>libg++</code> か <code>libstdc++</code> が標準ではリンクされません。

他の解決方法は、もちろん、<code>g++</code>, <code>libg++</code>, <code>libstdc++</code> をインストールすることです。
We would however like to recommend
you to not use <code>libg++</code> or <code>libstdc++</code> with MySQL as this will
only increase the binary size of mysqld without giving you any benefits.
Some versions of these libraries have also caused strange problems for
MySQL users in the past.

</li><li>

もし以下のエラーのどれかが起きた場合、 GNU <code>make</code> のバージョンを上げてください：


<pre>making all in mit-pthreads
make: Fatal error in reader: Makefile, line 18:
Badly formed macro assignment
  or
make: file `Makefile' line 18: Must be a separator (:
  or
pthread.h: No such file or directory
</pre>

<a name="IDX266"></a>
<a name="IDX267"></a>
<a name="IDX268"></a>
<a name="IDX269"></a>
Solaris と FreeBSD の <code>make</code> プログラムには問題があることが知られています。

GNU <code>make</code> Version 3.75 は動作確認されています。

<a name="IDX270"></a>
<a name="IDX271"></a>
<a name="IDX272"></a>
<a name="IDX273"></a>
<a name="IDX274"></a>
<a name="IDX275"></a>
<a name="IDX276"></a>
<a name="IDX277"></a>
</li><li>

もし C,C++ のためにフラグを与えたい場合、<code>CFLAGS</code> と <code>CXXFLAGS</code> 環境変数に
フラグを追加してください。同様に、 <code>CC</code> と <code>CXX</code> にコンパイラー名を
与えることもできます。
例えば：


<pre>shell&gt; CC=gcc
shell&gt; CFLAGS=-O3
shell&gt; CXX=gcc
shell&gt; CXXFLAGS=-O3
shell&gt; export CC CFLAGS CXX CXXFLAGS
</pre>

 「<a href="manual.ja_Installing.html#MySQL_binaries">2.2.9  MySQL Binaries Compiled by MySQL AB</a>」節 にはフラグの定義がリストされています。
色々なシステム上で役に立つと思います。

</li><li>

以下のようなエラーの場合、<code>gcc</code> コンパイラーをアップグレードしてください：


<pre>client/libmysql.c:273: parse error before `__attribute__'
</pre>

<code>gcc</code> 2.8.1 は動作することが確認されていますが、
<code>gcc</code> 2.95.2 以上をお勧めします。

</li><li>

<code>mysqld</code> コンパイル時に以下のようなエラーが出た場合、
<code>configure</code> が <code>accept()</code>, <code>getsockname()</code>, <code>getpeername()</code>
の最後の引数を正しく検出していません：


<pre>cxx: Error: mysqld.cc, line 645: In this statement, the referenced
     type of the pointer value "&amp;length" is "unsigned long", which
     is not compatible with "int".
new_sock = accept(sock, (struct sockaddr *)&amp;cAddr, &amp;length);
</pre>

これを修正するには、<tt>`config.h'</tt> ファイル(<code>configure</code> により作られる) を修正します。
いかのように：


<pre>/* Define as the base type of the last arg to accept */
#define SOCKET_SIZE_TYPE XXX
</pre>

<code>XXX</code> を <code>size_t</code> か <code>int</code> (あなたのオペレーティングシステムが依存している型)に変えます。
(<code>configure</code> すると毎回 <tt>`config.h'</tt> は作り直されるので、
この修正は <code>configure</code> する度に行わなければならないことに注意)

</li><li>

<tt>`sql_yacc.cc'</tt> ファイルは <tt>`sql_yacc.yy'</tt> から生成されます。
通常、
MySQL が既に生成されたコピーとともにあるので、
<tt>`sql_yacc.cc'</tt> ファイルを自分自身で作成することはありません。
しかし、以下のエラーの場合、再作成する必要があります：


<pre>"sql_yacc.yy", line xxx fatal: default action causes potential...
</pre>

これはあなたの <code>yacc</code> のバージョンが不十分であることを示しています。
<code>bison</code> (GNU 版 <code>yacc</code>) を代わりにインストールして使用する必要があります。

</li><li>

もし <code>mysqld</code> か MySQL クライアントをデバッグしたいなら、
<code>configure</code> を <code>--with-debug</code> オプション付きで実行します。
そしてコンパイルし、新しいクライアントライブラリーでクライアントをリンクします。
 「<a href="manual.ja_Porting.html#Debugging_client">E.2  Debugging a MySQL client</a>」節参照.
</li></ul>



<h3><a name="MIT-pthreads" href="manual.ja_toc.html#MIT-pthreads">2.3.6  MIT-pthreads に関して</a></h3>

<p>
<a name="IDX278"></a>
<a name="IDX279"></a>

</p>
<p>
このセクションではMIT-pthreadsを使っているさいに起こる問題についていくつか述べて
います。

</p>
<p>
Linux では、MIT-pthreads を使用してはならず、
LinuxThreads をインストールするべきです！
 「<a href="manual.ja_Installing.html#Linux">2.6.1  Linux Notes (All Linux Versions)</a>」節参照.

</p>
<p>
もしあなたのシステムが本来のスレッドのサポートを提供しなければ、あなたは、
MIT-pthreadsパッケージを使って、MySQL を構築する必要があります。
これにはほとんどのFreeBSDシステム、SunOS4.x,Solaris 2.4とそれ以前、ほかいくつか
が含まれます。
 「<a href="manual.ja_Installing.html#Which_OS">2.2.5  MySQL がサポートする OS</a>」節参照.

</p>
<p>
Note, that beginning with MySQL 4.0.2 MIT-pthreads are no longer part of
the source distribution! If you require this package, you need to download
it separately from
<a href="http://www.mysql.com/Downloads/Contrib/pthreads-1_60_beta6-mysql.tar.gz">http://www.mysql.com/Downloads/Contrib/pthreads-1_60_beta6-mysql.tar.gz</a>

</p>
<p>
After downloading, extract this source archive into the top level of the
MySQL source directory. It will create a new subdirectory
<code>mit-pthreads</code>.

</p>

<ul>
<li>

ほとんどのシステム上では <code>--with-mit-threads</code> オプションで
<code>configure</code> 実行することによって、
MIT-pthreadsが使われることを強制することができます。


<pre>shell&gt; ./configure --with-mit-threads
</pre>

MIT-pthreadsを使う時、非ソースディレクトリで構築することはサポートされていませ
ん。なぜなら、私たちはこのコードへ私たちの変更を最小にしたいからです。

</li><li>

MIT-pthreads が使われているかどうかチェックはサーバコードを configure するときに
だけ行われます。もし、あなたが <code>--without-server</code> を使ってクライアントコードのみを
ビルドすることを設定したならば、クライアントは MIT-othreads が使われているかいないか、
UNIXソケット接続がデフォルトで使われているのかわかりません。なぜなら UNIX ソケットは
MIT-pthreads 下では動作しないからです。また、あなたはそのようなインスタンスでは
 <code>-h</code> または  <code>--host</code> を使う必要があります。

</li><li>

MySQL が MIT-pthreads を使ってコンパイルされると、パフォーマンス上の問題のた
めシステムロックはデフォルトでディスエーブルとされます。  <code>--external-locking</code> オプション
を指定してサーバーに伝えることで、システムロックは使えるようになります。
This is only
needed if you want to be able to run two MySQL servers against the same
data files (not recommended).

</li><li>

ときどき(少なくともSolarisでは) pthread の <code>bind()</code> コマンドは何のエラーメッセージ
なしにソケットへの bind に失敗することがあります。これは結果としてサーバーへの接続
失敗となります。たとえば、


<pre>shell&gt; mysqladmin version
mysqladmin: connect to server at '' failed;
error: 'Can't connect to mysql server on localhost (146)'
</pre>

これを解決するために <code>mysqld</code> サーバーを終了して、再起動してください。こ
れは私たちがサーバーダウンを強制して、すぐにリスタートさせようとしたときだけ起こ
りました。

</li><li>

MIT-pthreads を使っていると、<code>sleep()</code> システムコールは <code>SIGINT</code> (break) 
では割り込みできません。 これは　<code>mysqladmin --sleep</code> を走らせているときにだけ
起こることがわかっています。
割り込みが発生してプロセスが停止する前に、あなたは終了させるための <code>sleep()</code> コールを待たなく
てはなりません。

</li><li>

リンクしているとき(少なくともSolarisでは)、あなたはこのような warning メッセージ
を受け取るでしょう。これらは無視してかまいません。


<pre>ld: warning: symbol `_iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
ld: warning: symbol `__iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
</pre>

</li><li>

他のいくつかの warnings もまた無視してかまいません。


<pre>implicit declaration of function `int strtoll(...)'
implicit declaration of function `int strtoul(...)'
</pre>

</li><li>

私たちはまだ MIT-pthread とともに動く <code>readline</code> を手に入れていません(これは必要では
ないのですが、おそらく誰かには興味があるでしょう)。
</li></ul>



<h3><a name="Windows_source_build" href="manual.ja_toc.html#Windows_source_build">2.3.7  Windows Source Distribution</a></h3>

<p>
You will need the following:

</p>

<ul>
<li>

VC++ 6.0 compiler (updated with 4 or 5 SP and Pre-processor package)
The Pre-processor package is necessary for the macro assembler.
More details at:
<a href="http://msdn.microsoft.com/vstudio/sp/vs6sp5/faq.asp">http://msdn.microsoft.com/vstudio/sp/vs6sp5/faq.asp</a>.
</li><li>

The MySQL source distribution for Windows, which can be downloaded
from <a href="http://www.mysql.com/downloads/">http://www.mysql.com/downloads/</a>.
</li></ul>

<p>
Building MySQL

</p>

<ol>
<li>

Create a work directory (e.g., workdir).
</li><li>

Unpack the source distribution in the aforementioned directory.
</li><li>

Start the VC++ 6.0 compiler.
</li><li>

In the <code>File</code> menu, select <code>Open Workspace</code>.
</li><li>

Open the <tt>`mysql.dsw'</tt> workspace you find on the work directory.
</li><li>

From the <code>Build</code> menu,
select the <code>Set Active Configuration</code> menu.
</li><li>

Click over the screen selecting <code>mysqld - Win32 Debug</code>
and click OK.
</li><li>

Press <code>F7</code> to begin the build of the debug server, libs, and
some client applications.
</li><li>

When the compilation finishes, copy the libs and the executables
to a separate directory.
</li><li>

Compile the release versions that you want, in the same way.
</li><li>

Create the directory for the MySQL stuff: e.g., <tt>`c:\mysql'</tt>
</li><li>

From the workdir directory copy for the c:\mysql directory the
following directories:


<ul>
<li>Data

</li><li>Docs

</li><li>Share

</li></ul>

</li><li>

Create the directory <tt>`c:\mysql\bin'</tt> and copy all the servers
and clients that you compiled previously.
</li><li>

If you want, also create the <tt>`lib'</tt> directory and copy the
libs that you compiled previously.
</li><li>

Do a clean using Visual Studio.
</li></ol>

<p>
Set up and start the server in the same way as for the binary
Windows distribution.  「<a href="manual.ja_Installing.html#Windows_prepare_environment">2.1.2.2  Preparing the Windows MySQL Environment</a>」節参照.

</p>



<h2><a name="Post-installation" href="manual.ja_toc.html#Post-installation">2.4  インストール後の設定とテスト</a></h2>

<p>
<a name="IDX280"></a>
<a name="IDX281"></a>
<a name="IDX282"></a>

</p>

<p>
初めて MySQLをインストールしたら(バイナリからでもソースからでもですが)、
サーバーを動作させるために、許可テーブルを初期化しなくてはなりません。
またマシンの起動時、停止時に、サーバーを自動で開始、停止することもできます。

</p>
<p>
通常、許可テーブルのインストールとサーバーの開始は、
ソースディストリビューションなら以下のようにします：
<a name="IDX283"></a>
<a name="IDX284"></a>

</p>

<pre>shell&gt; ./scripts/mysql_install_db
shell&gt; cd mysql_installation_directory
shell&gt; ./bin/safe_mysqld --user=mysql &amp;
</pre>

<p>
バイナリディストリビューション(RPM または pkg パッケージではない)では次を
行ないます:

</p>

<pre>shell&gt; cd mysql_installation_directory
shell&gt; ./scripts/mysql_install_db
shell&gt; ./bin/safe_mysqld --user=mysql &amp;
or
shell&gt; ./bin/mysqld_safe --user=mysql &amp;
if you are running MySQL 4.x.
</pre>

<p>
これは、いくつかのデータベースを生成します。<code>mysql</code> データベースは全
てのデータベース権限を保持します。<code>test</code> データベースは 
MySQL をテストするために使用できます。そして、
<code>mysql_install_db</code> を実行したユーザの権限エントリと <code>root</code> ユー
ザも生成します(パスワードはありません)。これは <code>mysqld</code> サーバの起動
も行ないます。

</p>
<p>
<code>mysql_install_db</code> は古い権限テーブルを上書きしません。そのため、どの
ような環境でも安全に実行できます。<code>test</code> データベースを持ちたくないな
ら、<code>mysqladmin -u root drop test</code> で削除できます。

</p>
<p>
テストは、MySQL のトップディレクトリーから簡単に実行できます。
バイナリ配布を使用する場合、これ(トップディレクトリ)は
インストール先のディレクトリーになるでしょう(<tt>`/usr/local/mysql'</tt>)。
ソース配布の場合、これは MySQL のソースディレクトリです。
<a name="IDX285"></a>

</p>
<p>
コマンドは本節といかに続く節で説明しますが、<code>BINDIR</code> は
<code>mysqladmin</code> や <code>safe_mysqld</code> がインストールされたディレクトリを示します。
バイナリ配布を使用している場合、<code>BINDIR</code> はバイナリ配布の <tt>`bin'</tt> ディレクトリになります。
ソースからインストールした場合、<code>BINDIR</code> は、<code>configure</code> で特別指定しない限り、
<tt>`/usr/local/bin'</tt> です。
<code>EXECDIR</code> は <code>mysqld</code> サーバーのインストール先です。
バイナリ配布を使用している場合、これは <code>BINDIR</code> ディレクトリと同一になります。
ソースからインストールした場合、<tt>`/usr/local/libexec'</tt> です。

</p>
<p>
テストについて以下に詳細に説明します:
<a name="IDX286"></a>

</p>

<ol>
<li>

If necessary, start the <code>mysqld</code> server and set up the initial
MySQL grant tables containing the privileges that determine how
users are allowed to connect to the server.  This is normally done with the
<code>mysql_install_db</code> script:


<pre>shell&gt; scripts/mysql_install_db
</pre>

通常、<code>mysql_install_db</code> の実行は初めて MySQL をインストール
したあと一度だけ必要です。  すでにインストールされているものを
アップグレードする際にはこの手順は飛ばせます。
（しかし、<code>mysql_install_db</code> は実に安全で、すでにテーブルが
存在している場合はいかなるテーブルも更新しません。したがって、
実行すべきかどうかわからない場合は、<code>mysql_install_db</code> を常に
走らせることができます）

<code>mysql_install_db</code> は 6個のテーブルを作ります (<code>user</code>, <code>db</code>,
<code>host</code>, <code>tables_priv</code>, <code>columns_priv</code>, <code>func</code>)
<code>mysql</code> データベースに。 初期の権限状態についての説明は
 「<a href="manual.ja_MySQL_Database_Administration.html#Default_privileges">4.3.4  MySQL 権限許可の初期設定</a>」節.  これらの権限は MySQL <code>root</code> ユーザーに
なんでもできるように許可し、そして、だれもが
<code>'test'</code> という名前か <code>'test_'</code> ではじまる名前をもつ
データベースを作成、使用できるように許可されています。

もし許可テーブルを設定していない場合、サーバーを起動時に以下のエラーが出ます：

<a name="IDX287"></a>

<pre>mysqld: Can't find file: 'host.frm'
</pre>

バイナリ配布の MySQL では、もし MySQL を
<code>./bin/safe_mysqld</code> を実行しないで起動した場合に、このエラーがおきます!
 「<a href="manual.ja_MySQL_Database_Administration.html#safe_mysqld">4.7.2  <code>safe_mysqld</code>, The Wrapper Around <code>mysqld</code></a>」節.

<code>root</code> で <code>mysql_install_db</code> を実行する必要があるとあなたは思うかもしれません。
しかし、 MySQL は <code>root</code> 以外のユーザーで起動できます。
データベースディレクトリがサーバーを起動したユーザに対して読み書きが許可されていれば良いのです。
MySQL を一般ユーザーで走らせる方法は
 「<a href="manual.ja_Problems.html#Changing_MySQL_user">A.3.2  一般ユーザで MySQL を動かす方法</a>」節.

もし <code>mysql_install_db</code> で問題が出たら、
 「<a href="manual.ja_Installing.html#mysql_install_db">2.4.1  <code>mysql_install_db</code> 実行時の問題</a>」節. を参照のこと。

<code>mysql_install_db</code> スクリプトを走らせるにはいくつか選択があります：


<ul>
<li>

<code>mysql_install_db</code> を走らせる前に編集して、許可の初期状態を変更してもいいでしょう。
これは多くのマシンに同じ権限設定をして MySQL をインストールする際に
役立ちます。 この場合、いくつかの <code>INSERT</code> 構文を <code>mysql.user</code> と
<code>mysql.db</code> テーブルにたいして追加するようにするだけですみます!

</li><li>

もしインストール後に許可を変更したい場合、 <code>mysql -u root mysql</code> で MySQL <code>root</code> ユーザーで接続して直接許可テーブルを変更する SQL 文を実行します。

</li><li>

すでに許可テーブルが作成された状態で、完全に許可テーブルを作成し直すことができます。
これはすでにインストールされたテーブルがある場合や、
<code>mysql_install_db</code> を編集した後にそう思うかもしれません。<code>mysql_install_db</code>.
</li></ul>

これらの選択については  「<a href="manual.ja_MySQL_Database_Administration.html#Default_privileges">4.3.4  MySQL 権限許可の初期設定</a>」節 からさらに情報が得られます。

</li><li>

MySQL サーバーを以下のようにして起動します：


<pre>shell&gt; cd mysql_installation_directory
shell&gt; bin/safe_mysqld &amp;
</pre>

サーバの起動に問題があれば、 「<a href="manual.ja_Installing.html#Starting_server">2.4.2  MySQL サーバー起動時の問題</a>」節 を見てください。

</li><li>

code{mysqladmin} でサーバーが走っているか確認します。
サーバーが立ち上がり接続を受け付けるか確認する簡単な方法を以下に示します：


<pre>shell&gt; BINDIR/mysqladmin version
shell&gt; BINDIR/mysqladmin variables
</pre>

例えば、<code>mysqladmin version</code> の出力はあなたのプラットフォームと
 MySQL のバージョンを出力します。
出力は以下の様にでます：


<pre>shell&gt; BINDIR/mysqladmin version
mysqladmin  Ver 8.14 Distrib 3.23.32, for linux on i586
Copyright (C) 2000 MySQL AB &amp; MySQL Finland AB &amp; TCX DataKonsult AB
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL license.

Server version          3.23.32-debug
Protocol version        10
Connection              Localhost via Unix socket
TCP port                3306
UNIX socket             /tmp/mysql.sock
Uptime:                 16 sec

Threads: 1  Questions: 9  Slow queries: 0
Opens: 7  Flush tables: 2  Open tables: 0
Queries per second avg: 0.000
Memory in use: 132K  Max memory used: 16773K
</pre>

<code>BINDIR/mysqladmin</code> の使用方法は、<code>--help</code> オプションで起動することにより得られます。

</li><li>

Verify that you can shut down the server:
<a name="IDX288"></a>
<a name="IDX289"></a>


<pre>shell&gt; BINDIR/mysqladmin -u root shutdown
</pre>

</li><li>

サーバーをリスタートするには、<code>safe_mysqld</code> か <code>mysqld</code> を直接実行します。
例えば：

<a name="IDX290"></a>
<a name="IDX291"></a>


<pre>shell&gt; BINDIR/safe_mysqld --log &amp;
</pre>

<code>safe_mysqld</code> が失敗するなら、 MySQL のインストールディレクトリーから実行してみてください。
もしそれでも起動しないなら、 「<a href="manual.ja_Installing.html#Starting_server">2.4.2  MySQL サーバー起動時の問題</a>」節 を参照のこと。

</li><li>

いくつかの簡単なテストでサーバーが動いているか確認できます。
以下のようになります：


<pre>shell&gt; BINDIR/mysqlshow
+-----------+
| Databases |
+-----------+
| mysql     |
+-----------+

shell&gt; BINDIR/mysqlshow mysql
Database: mysql
+--------------+
|    Tables    |
+--------------+
| columns_priv |
| db           |
| func         |
| host         |
| tables_priv  |
| user         |
+--------------+

shell&gt; BINDIR/mysql -e "SELECT host,db,user FROM db" mysql
+------+--------+------+
| host | db     | user |
+------+--------+------+
| %    | test   |      |
| %    | test_% |      |
+------+--------+------+
</pre>

他のプラットフォームで MySQL のパフォーマンスを比較するために
 <tt>`sql-bench'</tt> にベンチマークがあります。
<tt>`sql-bench/Results'</tt> ディレクトリには、他のデータベースやプラットフォームで
ベンチを実行した結果があります。
全てのテストを実行するには、以下のようにします：


<pre>shell&gt; cd sql-bench
shell&gt; run-all-tests
</pre>

RPM バイナリ配布には <tt>`sql-bench'</tt> ディレクトリがありません。
(RPM のソース配布には含まれます)
この場合、ベンチマークをインストールしなくてはなりません。
MySQL バージョン 3.22 のバイナリ配布から、
<tt>`mysql-bench-VERSION-i386.rpm'</tt> という名前で RPM パッケージを作っており、
これにはベンチマークのデータとコードが含まれます。

<tt>`tests'</tt> サブディレクトリでテストすることも可能です。
例えば、<tt>`auto_increment.tst'</tt> の実行は以下のようにします：


<pre>shell&gt; BINDIR/mysql -vvf test &lt; ./tests/auto_increment.tst
</pre>

The expected results are shown in the <tt>`./tests/auto_increment.res'</tt> file.
</li></ol>



<h3><a name="mysql_install_db" href="manual.ja_toc.html#mysql_install_db">2.4.1  <code>mysql_install_db</code> 実行時の問題</a></h3>
<p>
<a name="IDX292"></a>
<a name="IDX293"></a>

</p>
<p>
<code>mysql_install_db</code> スクリプトの目的は、新しい MySQL 権限テー
ブルを生成することです。他のデータには何も影響しません！ 既に MySQL 権限テー
ブルをインストールしている場合は、何も行ないません！

</p>
<p>
権限テーブルを再生成したい場合は、<code>mysqld</code> サーバが動作していれば、それを落
としてから、次のように行なってください:

</p>

<pre>mv mysql-data-directory/mysql mysql-data-directory/mysql-old
mysql_install_db
</pre>

<p>
この節では <code>mysql_install_db</code> を実行した際にでくわすかもしれない問題について述べます：

</p>
<dl compact="">

<dt><strong><code>mysql_install_db</code> doesn't install the grant tables</strong>
</dt><dd>
これは <code>mysql_install_db</code> が権限テーブルをインストールできなかった事のメッセージですが、
続いて以下のようにメッセージが出た場合：


<pre>starting mysqld daemon with databases from XXXXXX
mysql daemon ended
</pre>

この場合、注意深く log ファイルを調べてください！
エラーメッセージに出ている <tt>`XXXXXX'</tt> ディレクトリにログファイルがあり、
これに <code>mysqld</code> がなぜスタートしなかったか記されているはずです。
もし何が起こったかわからない場合、このログファイルを含んで <code>mysqlbug</code> を使用して
バグレポートを投稿してください！
 「<a href="manual.ja_Introduction.html#Bug_reports">1.6.1.3  バグや問題を報告する方法</a>」節参照.

</dd><dt><strong>There is already a <code>mysqld</code> daemon running</strong>
</dt><dd>
この場合、 <code>mysql_install_db</code> を実行する必要はありません。
<code>mysql_install_db</code> を実行するのは MySQL を初めてインストールした後、
たった一回だけです。

</dd><dt><strong>Installing a second <code>mysqld</code> daemon doesn't work when one daemon is running</strong>
</dt><dd>
これはすでに MySQL がインストールされており、
しかし新しいインストールを違うところに行おうとした場合に発生します。
(例えば、一度に二つのインストールを実行した場合など)
一般にこの問題は二つ目のサーバーを動いているサーバーと同じポート、ソケットを使用して起動しようとした場合に発生します。
この場合、<code>Can't start server: Bind on TCP/IP port: Address already in use</code> エラーメッセージか
<code>Can't start server : Bind on unix socket...</code> エラーメッセージが出ます。
 「<a href="manual.ja_MySQL_Database_Administration.html#Installing_many_servers">4.1.3  同じマシンに多くのサーバをインストールする</a>」節参照.

</dd><dt><strong>You don't have write access to <tt>`/tmp'</tt></strong>
</dt><dd>
<a name="IDX294"></a>
<a name="IDX295"></a>
<a name="IDX296"></a>

もしソケットファイルを標準の場所(<tt>`/tmp'</tt>)に作成するための書き込み許可がないなら、
あるいは、一時ファイルを <tt>`/tmp'</tt> に作成できないなら、
<code>mysql_install_db</code> の実行時、あるいは <code>mysqld</code> の起動／使用時に
エラーとなるでしょう。

違うディレクトリーにソケットファイルや一時ファイルを指定するには：

<a name="IDX297"></a>
<a name="IDX298"></a>
<a name="IDX299"></a>
<a name="IDX300"></a>

<pre>shell&gt; TMPDIR=/some_tmp_dir/
shell&gt; MYSQL_UNIX_PORT=/some_tmp_dir/mysqld.sock
shell&gt; export TMPDIR MYSQL_UNIX_PORT
</pre>

See  「<a href="manual.ja_Problems.html#Problems_with_mysql.sock">A.4.5  MySQL ソケットファイル <tt>`/tmp/mysql.sock'</tt> を変更する方法、削除から守る方法</a>」節.

<tt>`some_tmp_dir'</tt> は書き込みが可能なディレクトリーを指定しなくてはなりません。
 「<a href="manual.ja_Environment_variables.html#Environment_variables">F  Environment Variables</a>」節参照.

この後、<code>mysql_install_db</code> を走らせ、サーバーを起動する事ができます：


<pre>shell&gt; scripts/mysql_install_db
shell&gt; BINDIR/safe_mysqld &amp;
</pre>

</dd><dt><strong><code>mysqld</code> crashes immediately</strong>
</dt><dd>
もし RedHat バージョン 5.0 上で 2.0.7-5 より古い <code>glibc</code> を使用している場合、
全ての <code>glibc</code> パッチを当てなくてはなりません！
これに関しては MySQL メールのアーカイブに情報が多くあります。
<a href="http://lists.mysql.com/">http://lists.mysql.com/</a>.
Also, see  「<a href="manual.ja_Installing.html#Linux">2.6.1  Linux Notes (All Linux Versions)</a>」節.

<code>mysqld</code> を <code>--skip-grant-tables</code> 指定で起動することもできます。
そして以下のように <code>mysql</code> を使用して自分自身の手により許可を加えます：


<pre>shell&gt; BINDIR/safe_mysqld --skip-grant-tables &amp;
shell&gt; BINDIR/mysql -u root mysql
</pre>

<code>mysql</code> から手動で <code>mysql_install_db</code> に書かれている SQL コマンドを実行します。
許可テーブルをサーバーに読み込ますためには、
 <code>mysqladmin flush-privileges</code> か <code>mysqladmin reload</code> を実行します。
</dd></dl>



<h3><a name="Starting_server" href="manual.ja_toc.html#Starting_server">2.4.2  MySQL サーバー起動時の問題</a></h3>
<p>
<a name="IDX301"></a>
<a name="IDX302"></a>

</p>
<p>
トランザクションをサポートするテーブル(BDB, InnoDB)を使用しようとする場合、
最初に <tt>`my.cnf'</tt> ファイルを生成して、使用しようとするテーブル型の起動オプショ
ンを設定すべきです。  「<a href="manual.ja_Table_types.html#Table_types">7  MySQL テーブル型</a>」節参照.

</p>
<p>
通常 <code>mysqld</code> サーバーの起動は、以下の三つの方法のうち一つで行います：

</p>

<ul>
<li>

<code>mysql.server</code> による起動。このスクリプトはシステムの起動時、停止時に使われます。
詳細は  「<a href="manual.ja_Installing.html#Automatic_start">2.4.3  MySQL の自動起動と自動停止</a>」節.

</li><li>

<code>safe_mysqld</code> による起動。これは <code>mysqld</code> への適切なオプションを決定し、
それらのオプションでサーバーの起動を試みます。  「<a href="manual.ja_MySQL_Database_Administration.html#safe_mysqld">4.7.2  <code>safe_mysqld</code>, The Wrapper Around <code>mysqld</code></a>」節参照.

</li><li>

For Windows NT/2000/XP, please see  「<a href="manual.ja_Installing.html#NT_start">2.6.2.2  Starting MySQL on Windows NT, 2000 or XP</a>」節.

</li><li>

By invoking <code>mysqld</code> directly.
</li></ul>

<p>
<code>mysqld</code> デーモンの起動時に、デーモンはデータディレクトリにディレクトリを変えます。
ログファイルと pid (process ID) ファイルがこのディレクトリに書ける事、
そしてデータベースがこのディレクトリにある事を、デーモンは要求します。

</p>
<p>
データディレクトリの場所は配布物のコンパイル時に指定されています。
<code>mysqld</code> があなたのシステム上にデータベースディレクトリを見つけれなかった場合、
サーバーは動きません。
 <code>mysqld</code> を <code>--help</code> オプションで起動すれば <code>mysqld</code> の
デフォルトのパスを知ることができますので、
サーバーが起動しない理由が違うパスを使用しているために起こっているかどうかがわかります。
パスが違う場合、<code>mysqld</code> のコマンドラインの引数に正しいパスを指定して、デフォルト値を
上書きすることが可能です。(これらオプションは <code>safe_mysqld</code> にも同様に使用できます)

</p>
<p>
通常、MySQL がインストールされたディレクトリのベースディレクトリだけを
 <code>mysqld</code> に教えればいいはずです。
これは <code>--basedir</code> オプションを指定します。
 <code>--help</code> オプションを使用すればパスの変更が確認できます。
(<code>--help</code> は<em>必ず</em> 最後に指定のこと)
　例えば：

</p>

<pre>shell&gt; EXECDIR/mysqld --basedir=/usr/local --help
</pre>

<p>
パスの設定が思い通りに言ったことを確認したら、 <code>--help</code> オプションを外してサーバーを起動します。

</p>
<p>
どの方法でサーバーを起動しても、もし起動に失敗すれば、ログファイルを確認してください。
なぜ失敗したか記録されています。ログファイルはデータベースディレクトリにあります。
(バイナリ配布の場合 <tt>`/usr/local/mysql/data'</tt> 、ソース配布の場合 <tt>`/usr/local/var'</tt>、
 Windows では <tt>`\mysql\data\mysql.err'</tt> )
データベースディレクトリに <tt>`host_name.err'</tt> と <tt>`host_name.log'</tt> という
ファイル (<code>host_name</code> はあなたのサーバー名) を探してください。
以下のようにしてそのファイルの最後の数行を確認します：

</p>

<pre>shell&gt; tail host_name.err
shell&gt; tail host_name.log
</pre>

<p>
ログファイル中に次のような何かを見つけた場合:

</p><pre>000729 14:50:10  bdb:  Recovery function for LSN 1 27595 failed
000729 14:50:10  bdb:  warning: ./test/t1.db: No such file or directory
000729 14:50:10  Can't init databases
</pre>

<p>
これは <code>--bdb-recover</code> 付きで <code>mysqld</code> が起動され、Berkeley DB がデータ
ベースを復元しようとした時にログファイルに悪い何かを見つけたということを意
味します。継続を可能にするためには、古い Berkeley DB ログファイルをデータ
ベースディレクトリから、あとで検査できる他の場所に移すべきです。ログファイ
ルは <tt>`log.0000000001'</tt> (番号は時間の経つと増加します)と名付けられてい
ます。

</p>
<p>
BDB テーブルサポートで <code>mysqld</code> を実行していて、<code>mysqld</code> が起動時にコア
ダンプする場合、BDB recover log にいくつかの問題の原因があり得ます。この場
合、<code>mysqld</code> を <code>--bdb-no-recover</code> で起動を試みることができます。
これで救える場合は、データディレクトリから全ての <tt>`log.*'</tt> ファイルを削
除し、そして <code>mysqld</code> を再び起動してみてください。

</p>
<p>
以下のエラーの場合、他のプログラム（か他の <code>mysqld</code> サーバー）が
<code>mysqld</code> が使用しようとしている TCP/IP ソケットを使っています：

</p>

<pre>Can't start server: Bind on TCP/IP port: Address already in use
  or
Can't start server : Bind on unix socket...
</pre>

<p>
他の <code>mysqld</code> サーバーが走っていないかを <code>ps</code> で確認します。
もし他のサーバーが起動していないなら、 <code>telnet your-host-name tcp-ip-port-number</code> 
コマンドを実行し、何回か <code>RETURN</code> キーをたたいてみてください。
もし、 <code>telnet: Unable to connect to remote host: Connection refused</code> のような
エラーが出た場合、なにかが <code>mysqld</code> が使用しようとしているポートを既に使っています。
See  「<a href="manual.ja_Installing.html#mysql_install_db">2.4.1  <code>mysql_install_db</code> 実行時の問題</a>」節 and  「<a href="manual.ja_MySQL_Database_Administration.html#Multiple_servers">4.1.4  同一マシン上に複数の MySQL サーバーを走らせる</a>」節.

</p>
<p>
もし <code>mysqld</code> がすでに走っている場合、以下のコマンドにてパスの設定を知ることができます：

</p>

<pre>shell&gt; mysqladmin variables
</pre>

<p>
または

</p>

<pre>shell&gt; mysqladmin -h 'your-host-name' variables
</pre>

<p>
If you get <code>Errcode 13</code>, which means <code>Permission denied</code>, when
starting <code>mysqld</code> this means that you didn't have the right to
read/create files in the MySQL database or log directory. In this case
you should either start <code>mysqld</code> as the root user or change the
permissions for the involved files and directories so that you have the
right to use them.

</p>
<p>
もし <code>safe_mysqld</code> がサーバーを起動しても接続できないようなら、
 <tt>`/etc/hosts'</tt> ファイルに以下のような記述を持たせてください：

</p>

<pre>127.0.0.1       localhost
</pre>

<p>
この問題はスレッドライブラリーがなくて MySQL を MIT-pthreads を
使用するようにして作ったシステムにだけ起こります。

</p>
<p>
<code>mysqld</code> を起動できない場合、問題を見つけるためにトレースファイルの作
成を試みることができます。  「<a href="manual.ja_Porting.html#Making_trace_files">E.1.2  Creating Trace Files</a>」節参照.

</p>
<p>
InnoDB テーブルを使用している場合、InnoDB 固有の起動オプションを参照してく
ださい。  「<a href="manual.ja_Table_types.html#InnoDB_start">7.5.2  InnoDB 起動オプション</a>」節参照.

</p>
<p>
BDB (Berkeley DB) テーブルを使用する場合は、BDB 固有の起動オプションに精通
すべきです。  「<a href="manual.ja_Table_types.html#BDB_start">7.6.3  <code>BDB</code> startup options</a>」節参照.

</p>



<h3><a name="Automatic_start" href="manual.ja_toc.html#Automatic_start">2.4.3  MySQL の自動起動と自動停止</a></h3>

<p>
<a name="IDX303"></a>
<a name="IDX304"></a>
<a name="IDX305"></a>

</p>
<p>
<code>mysql.server</code> と <code>safe_mysqld</code> スクリプトは、システム起動時に自
動的にサーバを起動するために使用できます。<code>mysql.server</code> はサーバを停
止するためにも使用できます。

</p>
<p>
<code>mysql.server</code> とスクリプトは <code>start</code>, <code>stop</code> 引数を指定することにより
サーバーを起動、停止できます：

</p>

<pre>shell&gt; mysql.server start
shell&gt; mysql.server stop
</pre>

<p>
<code>mysql.server</code> は MySQL インストールディレクトリの <tt>`share/mysql'</tt> ディレクトリ、
または MySQL ソースツリーの <tt>`support-files'</tt> ディレクトリにあります。

</p>
<p>
<code>mysql.server</code> はサーバーを起動時する前に MySQL がインストールされた
ディレクトリにディレクトリを変え、<code>safe_mysqld</code> を起動します。
もし標準以外にインストールしているバイナリ配布を使用しているなら、 
<code>mysql.server</code> を編集する必要があるかもしれません。
<code>safe_mysqld</code> を起動する前に正しいディレクトリに <code>cd</code> するように変更します。
<code>safe_mysqld</code> に他のオプションを与えるように <code>mysql.server</code> を変えても構いません。
他のユーザーで実行したい場合、この節の後で示すように、適切な <code>user</code> 
行を <tt>`/etc/my.cnf'</tt> ファイルに追加してください。

</p>
<p>
<code>mysql.server stop</code> はサーバーにシグナルを送ってサーバーを停止します。
You can also take down the server manually by executing
<code>mysqladmin shutdown</code>.

</p>
<p>
You need to add these start and stop commands to the appropriate places
in your <tt>`/etc/rc*'</tt> files when you want to start up MySQL automatically
on your server.

</p>
<p>
On most current Linux distributions, it is sufficient to copy the file
<code>mysql.server</code> into the <tt>`/etc/init.d'</tt> directory (or
<tt>`/etc/rc.d/init.d'</tt> on older Red Hat systems). Afterwards, run the
following command to enable the startup of MySQL on system bootup:

</p>

<pre>shell&gt; chkconfig --add mysql.server
</pre>

<p>
As an alternative to the above, some operating systems also use
<tt>`/etc/rc.local'</tt> or <tt>`/etc/init.d/boot.local'</tt> to start additional
services on bootup. To start up MySQL using this method, you could append
something like the following to it:

</p>

<pre>/bin/sh -c 'cd /usr/local/mysql ; ./bin/safe_mysqld --user=mysql &amp;'
</pre>

<p>
<a name="IDX306"></a>
グローバル設定ファイルである <tt>`/etc/my.cnf'</tt> に、 <code>mysql.server</code> の
オプションを記述することも可能です。<tt>`/etc/my.cnf'</tt> ファイルは以下のような
記述になっています：

</p>

<pre>[mysqld]
datadir=/usr/local/mysql/var
socket=/var/tmp/mysql.sock
port=3306
user=mysql

[mysql_server]
basedir=/usr/local/mysql
</pre>

<p>
<code>mysql.server</code> スクリプトは次のオプションを理解します:
<code>datadir</code>, <code>basedir</code> そして <code>pid-file</code>.

</p>
<p>
次の表は、各起動スクリプトがオプションファイルからどのオプショングループを読み込むかを示しています:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>Script</strong> </td><td> <strong>Option groups</strong>
</td></tr>
<tr><td><code>mysqld</code> </td><td> <code>mysqld</code> and <code>server</code>
</td></tr>
<tr><td><code>mysql.server</code> </td><td> <code>mysql.server</code>, <code>mysqld</code>, and <code>server</code>
</td></tr>
<tr><td><code>safe_mysqld</code> </td><td> <code>mysql.server</code>, <code>mysqld</code>, and <code>server</code>
</td></tr>
</tbody></table>

<p>
 「<a href="manual.ja_MySQL_Database_Administration.html#Option_files">4.1.2  <tt>`my.cnf'</tt> オプションファイル</a>」節参照.

</p>



<h2><a name="Upgrade" href="manual.ja_toc.html#Upgrade">2.5  MySQL のアップグレード/ダウングレード</a></h2>

<p>
<a name="IDX307"></a>
<a name="IDX308"></a>

</p>
<p>
MySQL 形式とデータファイルは、MySQL が同じベースバージョ
ンである限り、同じアーキテクチャ上の異なるバージョン間でいつでも移動でき
ます。現在のベースバージョンは 3 です。MySQL の実行時に
キャラクタ・セットが変更された場合(これはソート順も変更します)、全てのテーブル
に <code>myisamchk -r -q --set-character-set=charset</code> を行なう必要があります。
そうしなければ、インデックスが正しい順になりません。

</p>
<p>
もしあなたが神経質だったり新しいバージョンを恐れている場合、いつでもあな
たの古い <code>mysqld</code> を <code>mysqld-old-version-number</code> のような何
かにリネームできます。もし新しい <code>mysqld</code> が予期せぬ何かを行った場
合、単純にそれをシャットダウンし、古い <code>mysqld</code> を再起動することが
できます！

</p>
<p>
アップグレード時には、もちろん、古いデータベースをバックアップもしておく
べきです。

</p>
<p>
アップグレード後、再コンパイルされたクライアントプログラムで、
<code>Commands out sync</code> や予期せぬコアダンプのような問題が起きる場合、
おそらく、プログラムのコンパイル時に古いヘッダやライブラリファイルを使用
したのでしょう。この場合、<tt>`mysql.h'</tt> ファイルと <tt>`libmysql.a'</tt> ラ
イブラリが、新しい MySQL 配布からのものであるかどうかを確かめる
ために、日付をチェックすべきです。もし違っていれば、プログラムを再コンパ
イルしてください！

</p>
<p>
もし新しい <code>mysqld</code> サーバーが起動できないとか、パスワード無しで
接続できないとか、いくつかの問題が発生した場合、以前のインストールでできた
古い <tt>`my.cnf'</tt> ファイルがあるかどうかを確認してください！
<code>program-name --print-defaults</code> で確認できます.  もしこの出力が
プログラムの名称以外の物を返した場合、有効になっている <code>my.cnf</code> ファイルが
あります！

</p>
<p>
新しいリリースの MySQL をインストールした場合に常に
 <code>Msql-Mysql-modules</code> を再構築、再インストールすることは
いい考えです。すべての <code>DBI</code> スクリプトが MySQL の
アップグレード後にコアダンプする兆候に気づいた場合は、特に
そうしてください。

</p>

<p>
<a name="IDX309"></a>
<a name="IDX310"></a>


</p><h3><a name="Upgrading-from-4.0" href="manual.ja_toc.html#Upgrading-from-4.0">2.5.1  Upgrading From Version 4.0 to Version 4.1</a></h3>

<p>
In general what you have to do when upgrading to 4.1 from an earlier
MySQL version:

</p>

<ul>
<li>

Run the script <code>mysql_fix_privilege_tables</code> to generate the new 
password field
that is needed for secure handling of passwords.
</li></ul>

<p>
The following is a more complete lists tell what you have to watch out
for when upgrading to version 4.1;

</p>

<ul>
<li>

Functions that return a DATE, DATETIME or TIME result is now fixed
up when returned to the client.


<pre>mysql&gt; SELECT cast("2001-1-1" as DATE)
    -&gt; '2001-01-01'
</pre>

</li><li>

All column and tables now have a character set, which shows up in
<code>SHOW CREATE TABLE</code> and <code>mysqldump</code>.
(MySQL 4.0.6 and above can read the new dump files, but not previous
MySQL versions).
</li><li>

Timestamp is now returned as string of type <code>'YYYY-MM-DD HH:MM:DD'</code>.
If you want to have this as a number you should add +0 to the timestamp
column.  Different timestamp lengths are not supported.
</li></ul>

<p>
<a name="IDX311"></a>
<a name="IDX312"></a>


</p><h3><a name="Upgrading-from-3.23" href="manual.ja_toc.html#Upgrading-from-3.23">2.5.2  バージョン 3.23 から バージョン 4.0 へのアップグレード</a></h3>

<p>
In general what you have to do when upgrading to 4.0 from an earlier
MySQL version:

</p>

<ul>
<li>

Run the script <code>mysql_fix_privilege_tables</code> to add new 
privileges and features
to the MySQL privilege tables.
</li><li>

Edit any MySQL startup scripts or configure files to not use any of the
deprecated options listed below.
</li><li>

Convert your old ISAM files to MyISAM files with the command:
<code>mysql_convert_table_format database</code>.  Note that this should only
be run if all tables in the given database is ISAM or MyISAM tables. If
this is not the case you should run <code>ALTER TABLE table_name TYPE=MyISAM</code>
on all ISAM tables.
</li><li>

Ensure that you don't have any MySQL clients that uses shared libraries
(like the Perl Msql-Mysql-modules). If you have, you should recompile
them as structures used in <tt>`libmysqlclient.so'</tt> have changed.
</li></ul>

<p>
MySQL 4.0 will work even if you don't do the above, but you will not be
able to use the new security privileges that MySQL 4.0 and you may run
into problems when upgrading later to MySQL 4.1 or newer.  The ISAM file
format still works in MySQL 4.0 but it's deprecated and will be disabled
in MySQL 5.0.

</p>
<p>
古いクライアントは、4.0 のサーバ と問題なく動作するはずです。

</p>
<p>
Even if you do the above, you can still downgrade to MySQL 3.23.52 or
newer if you run into problems with the MySQL 4.0 series.  In this case
you have to do a <code>mysqldump</code> of any tables using a full-text index
and restore these in 3.23 (because 4.0 uses a new format for full-text
index).

</p>
<p>
次のリストは、バージョン 4.0 にアップグレードする際に気をつけなければなら
ないことです;

</p>

<ul>
<li>

MySQL 4.0 has a lot of new privileges in the <code>mysql.user</code> table.
 「<a href="manual.ja_MySQL_Database_Administration.html#GRANT">4.3.1  <code>GRANT</code> と <code>REVOKE</code> 構文</a>」節参照.

To get these new privileges to work, one must run the
<code>mysql_fix_privilege_tables</code> script.  Until this script is run all
users have the <code>SHOW DATABASES</code>, <code>CREATE TEMPORARY TABLES</code>,
and <code>LOCK TABLES</code> privileges. <code>SUPER</code> and <code>EXECUTE</code>
privileges take their value from <code>PROCESS</code>.
<code>REPLICATION SLAVE</code> and <code>REPLICATION CLIENT</code> take their
values from <code>FILE</code>.

If you have any scripts that creates new users, you may want to change
them to use the new privileges.  If you are not using <code>GRANT</code>
commands in the scripts, this is a good time to change your scripts.

In version 4.0.2 the option <code>--safe-show-database</code> is deprecated
(and no longer does anything).  「<a href="manual.ja_MySQL_Database_Administration.html#Privileges_options">4.2.3  セキュリティに関する <code>mysqld</code> の起動オプション</a>」節参照.

If you get access denied errors for new users in version 4.0.2, you
should check if you need some of the new grants that you didn't need
before.  In particular, you will need <code>REPLICATION SLAVE</code>
(instead of <code>FILE</code>) for new slaves.
</li><li>

The startup parameters <code>myisam_max_extra_sort_file_size</code> and
<code>myisam_max_extra_sort_file_size</code> are now given in bytes
(was megabytes before 4.0.3).
External system locking of MyISAM/ISAM files is now turned off by default.
One can turn this on by doing <code>--external-locking</code>. (For most users
this is never needed).
</li><li>

The following startup variables/options have been renamed:
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>From</strong> </td><td> <strong>to</strong>.
</td></tr>
<tr><td><code>myisam_bulk_insert_tree_size</code> </td><td> <code>bulk_insert_buffer_size</code>
</td></tr>
<tr><td><code>query_cache_startup_type</code> </td><td> <code>query_cache_type</code>
</td></tr>
<tr><td><code>record_buffer</code> </td><td> <code>read_buffer_size</code>
</td></tr>
<tr><td><code>record_rnd_buffer</code> </td><td> <code>read_rnd_buffer_size</code>
</td></tr>
<tr><td><code>sort_buffer</code> </td><td> <code>sort_buffer_size</code>
</td></tr>
<tr><td><code>warnings</code> </td><td> <code>log-warnings</code>
</td></tr>
<tr><td><code>err-log</code> </td><td> <code>--log-error</code> (for <code>mysqld_safe</code>)
</td></tr>
</tbody></table>

The startup options <code>record_buffer</code>, <code>sort_buffer</code> and
<code>warnings</code> will still work in MySQL 4.0 but are deprecated.
</li><li>

The following SQL variables have changed name.
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>From</strong> </td><td> <strong>To</strong>.
</td></tr>
<tr><td><code>SQL_BIG_TABLES</code> </td><td> <code>BIG_TABLES</code>
</td></tr>
<tr><td><code>SQL_LOW_PRIORITY_UPDATES</code> </td><td> <code>LOW_PRIORITY_UPDATES</code>
</td></tr>
<tr><td><code>SQL_MAX_JOIN_SIZE</code> </td><td> <code>MAX_JOIN_SIZE</code>
</td></tr>
<tr><td><code>SQL_QUERY_CACHE_TYPE</code> </td><td> <code>QUERY_CACHE_TYPE</code>
</td></tr>
</tbody></table>
The old names still work in MySQL 4.0 but are deprecated.
</li><li>

You have to use <code>SET GLOBAL SQL_SLAVE_SKIP_COUNTER=#</code> instead of
<code>SET SQL_SLAVE_SKIP_COUNTER=#</code>.
</li><li>

Renamed mysqld startup options <code>--skip-locking</code> to
<code>--skip-external-locking</code> and <code>--enable-locking</code> to
<code>--external-locking</code>.
</li><li>

<code>SHOW MASTER STATUS</code> now returns an empty set if binary log is not
enabled.
</li><li>

<code>SHOW SLAVE STATUS</code> now returns an empty set if slave is not initialised.
</li><li>

mysqld now has the option <code>--temp-pool</code> enabled by default as this
gives better performance with some OS (Most notable Linux).
</li><li>

<code>DOUBLE</code> and <code>FLOAT</code> columns now honour the
<code>UNSIGNED</code> flag on storage (before, <code>UNSIGNED</code> was ignored for
these columns).
</li><li>

<code>ORDER BY column DESC</code> now always sorts <code>NULL</code> values
first; in 3.23 this was not always consistent. Note: MySQL 4.0.11 restored
the original behaviour.
</li><li>

<code>SHOW INDEX</code> has 2 columns more (<code>Null</code> and <code>Index_type</code>)
than it had in 3.23.
</li><li>

<code>CHECK</code>, <code>SIGNED</code>, <code>LOCALTIME</code> and <code>LOCALTIMESTAMP</code>
are now reserved words.
</li><li>

The result of all bitwise operators <code>|</code>, <code>&amp;</code>, <code>&lt;&lt;</code>,
<code>&gt;&gt;</code>, and <code>~</code> is now unsigned.  This may cause problems if you
are using them in a context where you want a signed result.
 「<a href="manual.ja_Reference.html#Cast_Functions">6.3.5  Cast Functions</a>」節参照.
</li><li>

<strong>Note</strong>: when you use subtraction between integer values where
one is of type <code>UNSIGNED</code>, the result will be unsigned!  In other
words, before upgrading to MySQL 4.0, you should check your application
for cases where you are subtracting a value from an unsigned entity and
want a negative answer or subtracting an unsigned value from an
integer column. You can disable this behaviour by using the
<code>--sql-mode=NO_UNSIGNED_SUBTRACTION</code> option when starting
<code>mysqld</code>.   「<a href="manual.ja_Reference.html#Cast_Functions">6.3.5  Cast Functions</a>」節参照.
</li><li>

<code>MATCH ... AGAINST (... IN BOOLEAN MODE)</code> を使用するためには、
<code>REPAIR TABLE table_name USE_FRM</code> を実行してテーブルをリビルド
する必要があります。
たとえ テーブルの型が <code>MyISAM</code> であったとしても。
</li><li>

<code>LOCATE()</code> と <code>INSTR()</code> はケース依存です。
もしいずれかの引数がバイナリ文字列ならば。Otherwise they are case-insensitive.
</li><li>

<code>STRCMP()</code> now uses the current character set when doing comparisons,
which means that the default comparison behaviour now is case-insensitive.
</li><li>

<code>HEX(string)</code> は、与えられた `文字列' を、
16進数で表記しなおした `文字列' を返すようになりました。
もし、`数値'の16進表記を得たい場合は、 <code>HEX()</code> の引数は
数値にしなくてはなりません。
(訳注： 4.0ではこうなります. (EUC-JP)

<pre>mysql&gt; select HEX("xyz"),HEX("あ"),HEX("16"),HEX(16);
+------------+-----------+-----------+---------+
| HEX("xyz") | HEX("あ") | HEX("16") | HEX(16) |
+------------+-----------+-----------+---------+
| 78797A     | A4A2      | 3136      | 10      |
+------------+-----------+-----------+---------+
</pre>

これが、3.23ではこうなっていました.

<pre>mysql&gt; select HEX("xyz"),HEX("あ"),HEX("16"),HEX(16);
+------------+-----------+-----------+---------+
| HEX("xyz") | HEX("あ") | HEX("16") | HEX(16) |
+------------+-----------+-----------+---------+
| 0          | 0         | 10        | 10      |
+------------+-----------+-----------+---------+
</pre>

)
</li><li>

3.23 では <code>INSERT INTO ... SELECT</code> は常に <code>IGNORE</code> が有効になっ
ていました。4.0.1 では、<code>IGNORE</code> を記述しない場合、MySQL はエラーの場
合に停止します(そして、おそらくロールバックします)。
</li><li>

！！！<tt>`safe_mysqld'</tt> は <tt>`mysqld_safe'</tt> に名前が変わりました！！！
For some time we
will in our binary distributions include <code>safe_mysqld</code> as a symlink to
<code>mysqld_safe</code>.
</li><li>

古い C API 関数 <code>mysql_drop_db</code>, <code>mysql_create_db</code>,
<code>mysql_connect</code> は、もう、サポートされなくなりました。
ただし、MySQL を <code>CFLAGS=-DUSE_OLD_FUNCTIONS</code> フラグでコンパイルすれば、まだ使うことはできます。
しかし、このフラグを使用する代わりに
クライアントを新しい 4.0 API に変更する方が良いです。
</li><li>

<code>MYSQL_FIELD</code> 構造体では、
<code>length</code> と <code>max_length</code> が
<code>unsigned int</code> から <code>unsigned long</code> に変更されました。
これを <code>printf()</code> 形式関数に使用する場合にいくつかの警告が出ること以
外は、問題は発生しません。
</li><li>

テーブルから全レコードを削除したくて、何レコードが削除されたかを気にしない
時には、<code>TRUNCATE TABLE</code> を使用すべきです。(なぜなら <code>TRUNCATE
TABLE</code> は <code>DELETE FROM table_name</code> よりも速いからです)。
</li><li>

<code>TRUNCATE TABLE</code> や <code>DROP DATABASE</code> の実行時に、有効な 
<code>LOCK TABLES</code> やトランザクションがある場合、エラーになります。
</li><li>

BIGINT フィールドに値を格納する場合に整数を使用すべきです(MySQL 3.23 で行
なっていた文字列を使用する代わりに)。文字列でもまだ働きますが、整数の使用
の方がより効率的です。
</li><li>

<code>SHOW OPEN TABLE</code> のフォーマットが変更されました。
</li><li>

マルチスレッドのクライアントは、<code>mysql_thread_init()</code> と
<code>mysql_thread_end()</code> を使用せねばなりません。  「<a href="manual.ja_Clients.html#Threaded_clients">8.4.8  スレッドクライアントを作る方法</a>」節参照.
</li><li>

Perl DBD::mysql をコンパイルし直す場合は、
Msql-Mysql-modules version 1.2218 以上のものでなくてはなりません。
古い DBD モジュールは推奨されない <code>drop_db()</code> 呼び出しを使用している
ためです。
</li><li>

<code>RAND(seed)</code> は、3.23 に比べて、より違ったランダムを返すようになりました。
これは <code>RAND(seed)</code> と <code>RAND(seed+1)</code> により違いがでるという事です。
</li><li>

The default type returned by <code>IFNULL(A,B)</code> is now set to be the
more 'general' of the types of <code>A</code> and <code>B</code>. (The order is
<code>STRING</code>, <code>REAL</code> or <code>INTEGER</code>).
</li></ul>



<h3><a name="Upgrading-from-3.22" href="manual.ja_toc.html#Upgrading-from-3.22">2.5.3  バージョン 3.22 から バージョン 3.23 へのアップグレード</a></h3>

<p>
<a name="IDX313"></a>
<a name="IDX314"></a>

</p>
<p>
MySQL バージョン 3.23 は新しい <code>MyISAM</code> 型のテーブルと、
古い <code>ISAM</code> 型のテーブルをサポートします。
バージョン 3.23 を使用する際、古いテーブル(ISAM) を変換する必要はありません。
デフォルトでは、新しく作られるテーブルが <code>MyISAM</code> 型になります。
(これは <code>mysqld</code> を <code>--default-table-type=isam</code> オプションで
起動することにより、変更できます)。
 <code>ISAM</code> テーブルを <code>MyISAM</code> に変更するには、
 <code>ALTER TABLE table_name TYPE=MyISAM</code> を使用するか、<code>mysql_convert_table_format</code> 
perl スクリプトを使用します。

</p>
<p>
バージョン 3.22 と バージョン 3.21 のクライアントは問題なく
バージョン 3.23 サーバーで動作します。

</p>
<p>
以下に、バージョン 3.23 にアップグレードするときに、注目する必要があるものを列挙します：

</p>

<ul>
<li>

<code>tis620</code> 文字セットを使用しているすべてのテーブルを <code>myisamchk
-r</code> または <code>REPAIR TABLE</code> で fix する必要があります。

</li><li>

シンボリックリンクされたデータベースに対し <code>DROP DATABASE</code> を行なう場
合は、リンクとオリジナルデータベースが削除されます。(3.22 では configure 
が <code>readlink</code> システムコールを検出しないため、これは起りません。)

</li><li>

<code>OPTIMIZE TABLE</code> は現在、<code>MyISAM</code> テーブルだけに動作します。他
のテーブル型については、<code>ALTER TABLE</code> を使用して、テーブルを最適化で
きます。<code>OPTIMIZE TABLE</code> の間は、テーブルは他のスレッドからロックされ
ます。

</li><li>

MySQL クライアント <code>mysql</code> は現在、デフォルトで
<code>--no-named-commands (-g)</code> オプションで起動されます。このオプションは
<code>--enable-named-commands (-G)</code> で無効にできます。これは、非互換問題を
引き起こす場合があります。たとえば、セミコロン無しの named command を使用
する SQL スクリプトです！ 長い形式のコマンドは行頭でまだ動作します。

</li><li>

Date functions that work on parts of dates (like <code>MONTH()</code>) will now
return 0 for <code>0000-00-00</code> dates. (MySQL 3.22 returned <code>NULL</code>.)

</li><li>

<code>german</code> 文字ソート順を使用する場合、ソート順についていくつか変更され
ているので、<code>isamchk -r</code> ですべてのテーブルを修復する必要があります！

</li><li>

<code>IF</code> のデフォルトの戻り値型は現在両方の引数に依存します。最初の引数だけではありません。

</li><li>

<code>AUTO_INCREMENT</code> は負数では働きません。
この理由は、負数は -1 から 0 へのラッピング時に問題を引き起こすためです。
MyISAM の <code>AUTO_INCREMENT</code> は現在、低レベルの部分で処理され、以
前よりとても速いです。MyISAM テーブルでは、テーブルからいくつかのレコード
を削除したとしても、古い数値は再利用されません。

</li><li>

<code>CASE</code>, <code>DELAYED</code>, <code>ELSE</code>, <code>END</code>, <code>FULLTEXT</code>,
<code>INNER</code>, <code>RIGHT</code>, <code>WHEN</code> は
予約語になりました。

</li><li>

<code>FLOAT(X)</code> は本当の浮動小数点型になりました。桁数固定の値ではありません。

</li><li>

<code>DECIMAL(length,dec)</code> 宣言時、length 引数はもはや符号や小数点の場所を含みません。

</li><li>

<code>TIME</code> 文字列は以下のフォーマットのいずれかでなければなりません：
<code>[[[DAYS] [H]H:]MM:]SS[.fraction]</code> か
<code>[[[[[H]H]H]H]MM]SS[.fraction]</code>.

</li><li>

<code>LIKE</code> は、同一文字の比較 <code>'='</code> ルールを使用して、
比較を行うようになりました。
もし古い比較方法にするならば、 MySQL を <code>CXXFLAGS=-DLIKE_CMP_TOUPPER</code>
 フラグでコンパイルします。

</li><li>

<code>REGEXP</code> は、通常の文字列(非 binary) では、ケース非依存になりました。

</li><li>

<code>MyISAM</code> テーブル(<code>.MYI</code>) の検査・修復には、<code>CHECK TABLE</code>
を使用するか、<code>myisamchk</code> を使用します。
<code>isamchk</code> は ISAM(<code>.ISM</code>) テーブル用に使用します。

</li><li>

もし、バージョン 3.22 と バージョン 3.23 の間で互換性を持たせて <code>mysqldump</code> を行いたいならば、
 <code>--opt</code> や <code>--all</code> オプションを <code>mysqldump</code> に指定してはいけません。

</li><li>

全ての <code>DATE_FORMAT()</code> をチェックしてください。
各フォーマット文字の前には <samp>`%'</samp> 文字が必要になりました。
(MySQL 3.22 バージョン以降ではこの文法が許されます。)

</li><li>

<code>mysql_fetch_fields_direct</code> が関数になり (今まではマクロだったのが)、
<code>MYSQL_FIELD</code> 型ではなく <code>MYSQL_FIELD</code> ポインター型を返します。

</li><li>

<code>mysql_num_fields()</code> は、 <code>MYSQL*</code> object をもはや使うことができません。
(これは今、 <code>MYSQL_RES*</code> を引数に取る関数になりました)。
代わりに、 <code>mysql_field_count()</code> を使用すべきです。

</li><li>

<code>MySQL</code> バージョン 3.22 では, <code>SELECT DISTINCT ...</code> の出力は
ほとんどいつもソートされました。 3.23 では, ソートを行った結果を得るには
<code>GROUP BY</code> か <code>ORDER BY</code> を使用しなくてはなりません。

</li><li>

もし、一致するレコードが無かった場合、<code>SUM()</code> は 0 の代わりに <code>NULL</code> を返すようになりました。
これは ANSI SQL 準拠です。

</li><li>

<code>NULL</code> 値での <code>AND</code> や <code>OR</code> は現在 0 ではなく 
<code>NULL</code> を返します。
これは主に、<code>NOT NULL</code> = <code>NULL</code> として、<code>AND/OR</code> 式上で 
<code>NOT</code> を使用するクエリに影響します。<code>LPAD()</code> と <code>RPAD()</code> は
長さ引数よりも長い場合、結果文字列は短くなります。
</li></ul>



<h3><a name="Upgrading-from-3.21" href="manual.ja_toc.html#Upgrading-from-3.21">2.5.4  バージョン 3.21 から バージョン 3.22 へのアップグレード</a></h3>

<p>
<a name="IDX315"></a>
<a name="IDX316"></a>

</p>
<p>
バージョン 3.21 と バージョン 3.22 の間には互換性に影響する変更はありません。

</p>
<p>
<code>DATE</code> 型のフィールドを持たせて作成した新しいテーブルは、
日付の格納に新しい方法を使用することだけが、唯一の落とし穴です。
これらの新しいフィールドに古いバージョンの 
<code>mysqld</code> からアクセスすることはできません。

</p>
<p>
<code>MySQL</code> バージョン 3.22 インストール後、新しいサーバを開始して、
<code>mysql_fix_privilege_tables</code> スクリプトを実行すべきです。これは
<code>GRANT</code> コマンドを使用するために必要な権限を追加します。これを忘れ
ると、<code>ALTER TABLE</code> 、<code>CREATE INDEX</code>、<code>DROP INDEX</code> を
使用しようとした時に <code>Access denied</code> になります。
MySQL root ユーザがパスワードを要求する場合、
<code>mysql_fix_privilege_tables</code> への引数としてそれを与えてください。

</p>
<p>
C API インタフェース <code>mysql_real_connect()</code> は変更されました。この
関数を呼び出す古いクライアントプログラムを持っている場合は、新しい 
<code>db</code> 引数に <code>0</code> を置く(またはより速い接続のために <code>db</code> 要
素を送るようにクライアントをコーディングしなおす)必要があります。
<code>mysql_real_connect()</code> を呼び出す前に
<code>mysql_init()</code> を呼ばなくてはなりません！
この変更は、<code>MYSQL</code> の構造体にオプションを保存するための
新しい <code>mysql_options()</code> 関数を有効にします。

</p>
<p>
<code>mysqld</code> 変数 <code>key_buffer</code> は <code>key_buffer_size</code> に名前が
変わりました。しかし、まだ前の名前もスターとアップファイル中で使用できま
す。

</p>



<h3><a name="Upgrading-from-3.20" href="manual.ja_toc.html#Upgrading-from-3.20">2.5.5  バージョン 3.20 から バージョン 3.21 へのアップグレード</a></h3>

<p>
<a name="IDX317"></a>

</p>
<p>
既に バージョン 3.20.28 より前のバージョンが稼働していて、バージョン 3.21.x に変更したい場合は、
次を行なう必要があります:

</p>
<p>
<code>safe_mysqld --old-protocol</code> で <code>mysqld</code> 3.21 サーバを起動すれ
ば、バージョン 3.20 配布からのクライアントでそれを使用できます。この場合、新しいク
ライアント関数 <code>mysql_errno()</code> はサーバのエラーは何も返さず、
<code>CR_UNKNOWN_ERROR</code> だけを返します (ただしクライアントのエラーについ
ては働きます)。そして サーバは古い <code>password()</code> チェックを新しいものの代わ
りに使用します。

</p>
<p>
<code>mysqld</code> に <code>--old-protocol</code> オプションを<em>使わない</em>場合、
次の変更をする必要があります:

</p>

<ul>
<li>

全てのクライアントコードは再コンパイルする必要があります。ODBC を使用し
ている場合は新しい <strong>MyODBC</strong> 2.x ドライバを入手する必要があります。
</li><li>

<code>mysql.user</code> テーブル内の <code>password</code> フィールドを 
<code>CHAR(16)</code> に変換するために、スクリプト 
<code>scripts/add_long_password</code> を実行する必要があります。
</li><li>

全てのパスワードは <code>mysql.user</code> テーブル内に再配置する必要がありま
す(31ビットパスワードの代わりに、62ビットを得るために)。
</li><li>

テーブル形式は変更されていないので、どのテーブルも変換する必要はありませ
ん。
</li></ul>

<p>
MySQL バージョン 3.20.28 とそれ以降は、クライアントに影響を及ぼさずに、新
しい <code>user</code> テーブル形式を処理することができます。バージョン 3.20.28 より前の 
MySQL バージョンを持っている場合は、<code>user</code> テーブルを変換
すると、パスワードはその上ではもう働きません。安全のため、最初に少なくと
も バージョン 3.20.28 にアップグレードし、それから バージョン 3.21.x に
アップグレードすべきです。

</p>
<p>
<a name="IDX318"></a>
新しいクライアントコードは バージョン 3.20.x <code>mysqld</code> サーバで動作するので、
もし バージョン 3.21.x で問題があった場合は、クライアントをもう一度再コンパイルする必
要はなく、古い バージョン 3.20.x サーバを使用することができます。

</p>
<p>
<code>mysqld</code> に <code>--old-protocol</code> オプションを使用しない場合、古い
クライアントはエラーメッセージを発します:

</p>

<pre>ERROR: Protocol mismatch. Server Version = 10 Client Version = 9
</pre>

<p>
新しい Perl インタフェース <code>DBI</code>/<code>DBD</code> は古い <code>mysqlperl</code> 
インタフェースもサポートします。<code>mysqlperl</code> を使用する場合に行う必
要のある変更は、<code>connect()</code> 関数の引数の変更だけです。新しい引数は:
<code>host</code>, <code>database</code>, <code>user</code>, <code>password</code> (<code>user</code> 
と <code>password</code> 引数の順番が変更されました)。
 「<a href="manual.ja_Clients.html#Perl_DBI_Class">8.2.2  The <code>DBI</code> Interface</a>」節参照.

</p>
<p>
次の変更は古いアプリケーションでのクエリに影響します:

</p>

<ul>
<li>

<code>HAVING</code> は現在 <code>ORDER BY</code> 節より前になければいけません。
</li><li>

<code>LOCATE()</code> へのパラメータは交換されました。
</li><li>

新しい予約語がいくつかあります。最も注意すべきは <code>DATE</code>,
<code>TIME</code> そして <code>TIMESTAMP</code> です。
</li></ul>



<h3><a name="Upgrading-to-arch" href="manual.ja_toc.html#Upgrading-to-arch">2.5.6  他のアーキテクチャへのアップグレード</a></h3>

<p>
<a name="IDX319"></a>

</p>
<p>
もし、MySQL バージョン 3.23 を使用しているならば、
違うアーキテクチャのマシンに、<code>.frm</code>, <code>.MYI</code>,<code>.MYD</code> ファイルを
コピーすることが出来ます。
ただし、両者間で、同じ浮動小数点のフォーマットをサポートしている場合に限ります。
(MySQL はどのようなバイト交換にも気をつけます)。

</p>
<p>
現在 MySQL <code>ISAM</code> データファイルとインデックスファイル
( <tt>`*.ISD'</tt> と <tt>`*.ISM'</tt> ファイル) はアーキテクチャ依存で、
いくつかのケースでは OS 依存です。
アプリケーションを、現在のマシンとは異なるアーキテクチャ/OS を
持つ他のマシンに移したい場合は、単純にファイルを他のマシンにコピーするこ
とでデータベースを移行しようとすべきではありません。<code>mysqldump</code> を
使用すべきです。

</p>
<p>
デフォルトでは <code>mysqldump</code> は、完全な SQL ステートメントファイルを
生成します。それからそのファイルを他のマシンへ転送し、<code>mysql</code> クラ
イアントへの入力として与えることができます。

</p>
<p>
有効なオプションが何かを見るためには、<code>mysqldump --help</code> を試してく
ださい。データを MySQL のより新しいバージョンに移す場合、速くコ
ンパクトなダンプを得るために、より新しいバージョンで <code>mysqldump --opt</code> 
を使用すべきです。

</p>
<p>
２つのマシン間でデータベースを移動する最も簡単な (しかし最も速くはない) 
方法は、データベースが置かれているマシン上で次のコマンドを実行することで
す:

</p>

<pre>shell&gt; mysqladmin -h 'other hostname' create db_name
shell&gt; mysqldump --opt db_name \
        | mysql -h 'other hostname' db_name
</pre>

<p>
遅いネットワーク上でリモートマシンからデータベースをコピーしたい場合は、
次を使用できます:

</p>

<pre>shell&gt; mysqladmin create db_name
shell&gt; mysqldump -h 'other hostname' --opt --compress db_name \
        | mysql db_name
</pre>

<p>
You can also store the result in a file, then transfer the file to the
target machine and load the file into the database there.  For example,
you can dump a database to a file on the source machine like this:

</p>

<pre>shell&gt; mysqldump --quick db_name | gzip &gt; db_name.contents.gz
</pre>

<p>
(The file created in this example is compressed.) データベースの中身を含んでいるファイルを、目的のマシンに転送して、次のコ
マンドを実行してください:

</p>

<pre>shell&gt; mysqladmin create db_name
shell&gt; gunzip &lt; db_name.contents.gz | mysql db_name
</pre>

<p>
<a name="IDX320"></a>
<a name="IDX321"></a>
データベース転送を実行するために、<code>mysqldump</code> と <code>mysqlimport</code> 
も使用できます。大きなテーブルでは、これは単純な <code>mysqldump</code> の使用
よりもとても速いです。次に示すコマンドでは、<code>DUMPDIR</code> は
<code>mysqldump</code> からの出力を格納するために使用するディレクトリの完全な
パス名を表わしています。

</p>
<p>
まず、出力ファイルのためのディレクトリを作成して、データベースをダンプし
ます:

</p>

<pre>shell&gt; mkdir DUMPDIR
shell&gt; mysqldump --tab=DUMPDIR db_name
</pre>

<p>
それから、<code>DUMPDIR</code> ディレクトリ内のファイルを目的のマシン上の対応
するディレクトリに転送し、MySQL にファイルをロードします:

</p>

<pre>shell&gt; mysqladmin create db_name           # create database
shell&gt; cat DUMPDIR/*.sql | mysql db_name   # create tables in database
shell&gt; mysqlimport db_name DUMPDIR/*.txt   # load data into tables
</pre>

<p>
<code>mysql</code> データベースのコピーも忘れないでください。それは承認テーブ
ル (<code>user</code>, <code>db</code>, <code>host</code>) が格納されるためです。
<code>mysql</code> データベースをその場所に置くまで、新しいマシン上では 
MySQL <code>root</code> ユーザとしてコマンドを実行する必要があります。

</p>
<p>
新しいマシン上へ <code>mysql</code> データベースを導入した後、サーバが承認テー
ブル情報を再ロードするために、<code>mysqladmin flush-privileges</code> を実行してください。

</p>



<h2><a name="Operating_System_Specific_Notes" href="manual.ja_toc.html#Operating_System_Specific_Notes">2.6  Operating System Specific Notes</a></h2>



<h3><a name="Linux" href="manual.ja_toc.html#Linux">2.6.1  Linux Notes (All Linux Versions)</a></h3>

<p>
以下の注意は、<strong>glibc</strong> に関して、MySQL をあなた自身で作成す
るシチュエーションだけに適用されます。Linux を x86 マシンで実行する場合、
多くの場合は我々のバイナリを使用した方が良いです。我々は <strong>glibc</strong> の
最良パッチバージョンと我々のバイナリをリンクします。我々は最良のコンパイラ
オプションでそれを作成し、高負荷サーバについて適切になるように試みています。
以下のテキストを読んで、何をあなたがやるべきかについて迷った時は、あなたの
必要にかなうかどうかをみるために、我々のバイナリをまず試してください。そし
て、我々のバイナリが十分でないとわかった後にだけ、あなた自身の作成について
考えてください。この場合、それについての評価します。そのため、次回にはより
良いバイナリを作成できます。典型的なユーザについて、そして、多くの同時接続
と 2G Bytes 制限を超えるテーブルを設定する場合でも、多くの場合、我々のバイナリ
は最良の選択です。

</p>
<p>
Linux では MySQL は LinuxThreads を使用します。
もし <code>glibc2</code> を持たない古い Linux を使用している場合、
MySQL のコンパイルの前に、
LinuxThreads をインストールしなければなりません。
LinuxThreads は <a href="http://www.mysql.com/downloads/os-linux.html">http://www.mysql.com/downloads/os-linux.html</a>. から得ることが
できます。

</p>
<p>
<strong>注意:</strong> 我々は SMP システム上での Linux 2.2.14 と MySQL で奇妙な問
題を経験しました; SMP システムの場合、Linux 2.4 ASAP にアップグレードする
ことをお勧めします！ これを行なうことで、あなたのシステムはより速くより安
定するでしょう！

</p>
<p>
注意: 2.1.1 以前の <code>glibc</code> バージョンは
<code>pthread_mutex_timedwait</code> 処理に致命的なバグがあります。これは
<code>INSERT DELAYED</code> を行なう時に使用されます。glibc をアップグレードする
前に <code>INSERT DELAYED</code> は使用しないようにお奨めします。

</p>
<p>
1000以上の同時接続を使用する予定であれば、LinuxThreads にいくつかの変更
をして、再コンパイルし、MySQL を新しい <tt>`libpthread.a'</tt> を使用するように再リ
ンクする必要があります。<tt>`sysdeps/unix/sysv/linux/bits/local_lim.h'</tt> 内の 
<code>PTHREAD_THREADS_MAX</code> を 4096 に増加し、
<tt>`linuxthreads/internals.h'</tt> 中の <code>STACK_SIZE</code> を 
256 KB に減少させてください。注意: <code>STACK_SIZE</code> がデフォルトの 2MB である
場合、MySQL は 600-1000 程度の接続で安定でなくなります。

</p>
<p>
MySQL が十分なファイルをオープンまたは接続できないという問題を
得た場合、十分なファイルを操作するように構築された Linux を持っていない
ということです。

</p>
<p>
Linux 2.2 以降では、割り当てられたファイル記述子の数を次のようにしてチェッ
クできます:

</p>

<pre>cat /proc/sys/fs/file-max
cat /proc/sys/fs/dquot-max
cat /proc/sys/fs/super-max
</pre>

<p>
16M 以上のメモリがある場合は、次のような何かを起動スクリプト(SuSE では 
<tt>`/etc/init.d/boot.local'</tt>)に追加すべきです:

</p>

<pre>echo 65536 &gt; /proc/sys/fs/file-max
echo 8192 &gt; /proc/sys/fs/dquot-max
echo 1024 &gt; /proc/sys/fs/super-max
</pre>

<p>
上記は、root でコマンドラインからも実行できますが、この場合、コンピュータ
をリブートすると古い制限が使われます。

</p>
<p>
You can also run the preceding commands from the command-line as root, but
these settings will be lost the next time your computer reboots.

</p>
<p>
Alternatively, you can set these parameters on bootup by using the
<code>sysctl</code> tool, which is used by many Linux distributions (SuSE has
added it as well, beginning with SuSE Linux 8.0). Just put the following
values into a file named <tt>`/etc/sysctl.conf'</tt>:

</p>

<pre># Increase some values for MySQL
fs.file-max = 65536
fs.dquot-max = 8192
fs.super-max = 1024
</pre>

<p>
<tt>`/etc/my.cnf'</tt> にも追加すべきです:

</p>

<pre>[safe_mysqld]
open-files-limit=8192
</pre>

<p>
上記は MySQL に、最大 8192 接続/ファイルを生成することを許可します。

</p>
<p>
The <code>STACK_SIZE</code> constant in LinuxThreads controls the spacing of thread
stacks in the address space.  It needs to be large enough so that there will
be plenty of room for the stack of each individual thread, but small enough
to keep the stack of some threads from running into the global <code>mysqld</code>
data.  Unfortunately, the Linux implementation of <code>mmap()</code>, as we have
experimentally discovered, will successfully unmap an already mapped region
if you ask it to map out an address already in use, zeroing out the data
on the entire page, instead of returning an error.  So, the safety of
<code>mysqld</code> or any other threaded application depends on the "gentleman"
behaviour of the code that creates threads.  The user must take measures to
make sure the number of running threads at any time is sufficiently low for
thread stacks to stay away from the global heap.  With <code>mysqld</code>, you
should enforce this "gentleman" behaviour by setting a reasonable value for
the <code>max_connections</code> variable.

</p>
<p>
If you build MySQL yourself and do not want to mess with patching
LinuxThreads, you should set <code>max_connections</code> to a value no higher
than 500.  It should be even less if you have a large key buffer,  large
heap tables, or some other things that make <code>mysqld</code> allocate a lot
of memory, or if you are running a 2.2 kernel with a 2G patch. If you are
using our binary or RPM version 3.23.25 or later, you can safely set
<code>max_connections</code> at 1500, assuming no large key buffer or heap tables
with lots of data.  The more you reduce <code>STACK_SIZE</code> in LinuxThreads
the more threads you can safely create.  We recommend the values between
128K and 256K.

</p>
<p>
多くの同時接続を使用したい場合は、fork 爆弾攻撃を避けようとして、子供の 
fork や複製について、プロセスにペナルティを課すという、バージョン 2.2 カー
ネルの "機能" に悩まされるでしょう。これにより、あなたが並行クライアントの
数を増加するようには、MySQL がスケールしません。シングル CPU システムでは、
とても遅いスレッド生成で明らかにこれが見られます。これは、MySQL への接続に
長い時間(1分程度)が掛かり、それを切断するのにも長い時間掛かるということを
意味します。複数 CPU システムでは、クライアント数の増加に従って、クエリ速
度が徐々に落ちていくのが観測されました。問題の解決を見つけようとする処理の
中で、我々のユーザからカーネルパッチを受け取りました。我々はいくつかの限定
されたテストで、このパッチが MySQL のスケーラビリティを非常に改善した結果
を得ました。このパッチはここにあります
<a href="http://www.mysql.com/Downloads/Patches/linux-fork.patch">http://www.mysql.com/Downloads/Patches/linux-fork.patch</a>. We have
now done rather extensive testing of this patch on both development and
production systems.  It has significantly
improved <code>MySQL</code> performance without causing any problems and we now
recommend it to our users who are still running high-load servers on
2.2 kernels.  This issue has been fixed in the 2.4 kernel, so if you are not
satisfied with
the current performance of your system, rather than patching your 2.2 kernel,
it might be easier to just upgrade to 2.4, which will also give you a nice
SMP boost in addition to fixing this fairness bug.

</p>
<p>
We have tested MySQL on the 2.4 kernel on a 2-CPU machine and
found MySQL scales <strong>much</strong> better@-there was virtually no slowdown
on queries throughput all the way up
to 1000 clients, and the MySQL scaling factor (computed as the ratio of
maximum throughput to the throughput with one client) was 180%.
We have observed similar results on a 4-CPU system@-virtually no
slowdown as the number of
clients was increased up to 1000, and 300% scaling factor. So for a high-load
SMP server we would definitely recommend the 2.4 kernel at this point. We
have discovered that it is essential to run <code>mysqld</code> process with the
highest possible priority on the 2.4 kernel to achieve maximum performance.
This can be done by adding
<code>renice -20 $$</code> command to <code>safe_mysqld</code>. In our testing on a
4-CPU machine, increasing the priority gave 60% increase in throughput with
400 clients.

</p>
<p>
We are currently also trying to collect
more info on how well <code>MySQL</code> performs on 2.4 kernel on 4-way and 8-way
systems. If you have access such a system and have done some benchmarks,
please send a mail to <a href="mailto:docs@mysql.com">docs@mysql.com</a> with the results - we will
include them in the manual.

</p>
<p>
There is another issue that greatly hurts MySQL performance,
especially on SMP systems.  The implementation of mutex in
LinuxThreads in <code>glibc-2.1</code> is very bad for programs with many
threads that only
hold the mutex for a short time. On an SMP system, ironic as it is, if
you link MySQL against unmodified <code>LinuxThreads</code>,
removing processors from the machine improves MySQL performance
in many cases.  We have made a patch available for <code>glibc 2.1.3</code>
to correct this behaviour
(<a href="http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch">http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch</a>).

</p>
<p>
With <code>glibc-2.2.2</code>
MySQL version 3.23.36 will use the adaptive mutex, which is much
better than even the patched one in <code>glibc-2.1.3</code>. Be warned, however,
that under some conditions, the current mutex code in <code>glibc-2.2.2</code>
overspins, which hurts MySQL performance. The chance of this
condition can be reduced by renicing <code>mysqld</code> process to the highest
priority. We have also been able to correct the overspin behaviour with
a patch, available at
<a href="http://www.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch">http://www.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch</a>.
It combines the correction of overspin, maximum number of
threads, and stack spacing all in one. You will need to apply it in the
<code>linuxthreads</code> directory with
<code>patch -p0 &lt;/tmp/linuxthreads-2.2.2.patch</code>.
We hope it will be included in
some form in to the future releases of <code>glibc-2.2</code>. In any case, if
you link against <code>glibc-2.2.2</code> you still need to correct
<code>STACK_SIZE</code> and <code>PTHREAD_THREADS_MAX</code>. We hope that the defaults
will be corrected to some more acceptable values for high-load
MySQL setup in the future, so that your own build can be reduced
to <code>./configure; make; make install</code>.

</p>
<p>
We recommend that you use the above patches to build a special static
version of <code>libpthread.a</code> and use it only for statically linking
against <code>MySQL</code>. We know that the patches are safe for <code>MySQL</code>
and significantly improve its performance, but we cannot say anything
about other applications. If you link other applications against the
patched version of the library, or build a patched shared version and
install it on your system, you are doing it at your own risk with regard
to other applications that depend on <code>LinuxThreads</code>.

</p>
<p>
If you experience any strange problems during the installation of
MySQL, or with some common utilties hanging, it is very likely that
they are either library or compiler related. If this is the case, using our
binary will resolve them.

</p>
<p>
一つ知られている問題として、バイナリ配布を <code>libc5</code> の古い Linux システム
(RedHat 4.x , Slackware 3.6 以下, Debian 1.3 bo 以下など)
で使用すると、ホスト名解決の致命的なエラーが出ます.
 「<a href="manual.ja_Installing.html#Binary_notes-Linux">2.6.1.1  Linux Notes for Binary Distributions</a>」節参照.

</p>
<p>
LinuxThreads を使用している場合、最低３つのプロセスが走ります。
これらは実スレッドで、一つは LinuxThreads マネージャーのために、
一つは接続のハンドルに、もうひとつはアラームとシグナルのハンドルです。

</p>
<p>
注意: linux カーネルと linuxthread ライブラリはデフォルトでは 1024 スレッ
ドだけ持つことができます。これはパッチを適用していないシステム上では 
MySQL への接続は最大 1021 だけであるということを意味します。ページ 
<a href="http://www.volano.com/linuxnotes.html">http://www.volano.com/linuxnotes.html</a> はこの制限をどのように回避
するかの情報が含まれています。

</p>
<p>
もし <code>mysqld</code> デーモンプロセスが <code>ps</code> などでみると死んでいるようであれば, 
通常これは MySQL バグか、壊れたテーブルを持っています。
 「<a href="manual.ja_Problems.html#Crashing">A.4.1  What To Do If MySQL Keeps Crashing</a>」節参照.

</p>
<p>
Linux 上で、<code>mysqld</code> が SIGSEGV シグナルで死んだ時にコアダンプを得たい場合、
<code>--core-file</code> オプションを付けて <code>mysqld</code> を起動できます。注意:
<code>ulimit -c 1000000</code> を <code>safe_mysqld</code> に追加するか
<code>--core-file-size=1000000</code> をつけて <code>safe_mysqld</code> を起動して、
<code>core file size</code> を増加する必要があります。
 「<a href="manual.ja_MySQL_Database_Administration.html#safe_mysqld">4.7.2  <code>safe_mysqld</code>, The Wrapper Around <code>mysqld</code></a>」節参照.

</p>
<p>
もし MySQL クライアントをリンクしようとして以下のエラーになった場合：

</p>

<pre>ld.so.1: ./my: fatal: libmysqlclient.so.4:
open failed: No such file or directory
</pre>

<p>
実行時には、以下のうちの一つの方法で問題を解決できます：

</p>

<ul>
<li>

クライアントを以下のフラグで(<code>-Lpath</code>のかわりに)リンクします：
<code>-Wl,r/path-libmysqlclient.so</code>.

</li><li>

<code>libmysqclient.so</code> を <tt>`/usr/lib'</tt> にコピーします

<a name="IDX322"></a>
<a name="IDX323"></a>
</li><li>

<code>LD_RUN_PATH</code> 環境変数を <tt>`libmysqlclient.so'</tt> が存在する場所に設定します。
(クライアントを実行する前に設定します)
</li></ul>

<p>
富士通コンパイラ <code>(fcc / FCC)</code> を使用している場合、MySQL 
のコンパイルにいくつかの問題があります。Linux ヘッダファイルはとても 
<code>gcc</code> 指向であるためです。

</p>
<p>
次の <code>configure</code> 行は <code>fcc/FCC</code> で動作します:

</p>

<pre>CC=fcc CFLAGS="-O -K fast -K lib -K omitfp -Kpreex -D_GNU_SOURCE \
-DCONST=const -DNO_STRTOLL_PROTO" CXX=FCC CXXFLAGS="-O -K fast -K lib \
-K omitfp -K preex --no_exceptions --no_rtti -D_GNU_SOURCE -DCONST=const \
-Dalloca=__builtin_alloca -DNO_STRTOLL_PROTO \
'-D_EXTERN_INLINE=static __inline'" ./configure --prefix=/usr/local/mysql \
--enable-assembler --with-mysqld-ldflags=-all-static --disable-shared \
--with-low-memory
</pre>



<h4><a name="Binary_notes-Linux" href="manual.ja_toc.html#Binary_notes-Linux">2.6.1.1  Linux Notes for Binary Distributions</a></h4>

<p>
<a name="IDX324"></a>
<a name="IDX325"></a>

</p>
<p>
MySQL は少なくとも Linux バージョン 2.0 を必要とします。

</p>
<p>
<strong>Warning</strong>:
We have reports from some MySQL users that they have got serious
stability problems with MySQL with Linux kernel 2.2.14.  If you are
using this kernel you should upgrade to 2.2.19 (or newer) or to a 2.4
kernel.  If you have a multi-cpu box, then you should seriously consider
using 2.4 as this will give you a significant speed boost.

</p>
<p>
バイナリリリースは <code>-static</code> でリンクされており、これはあなたのシステムが
どのバージョンのライブラリーを使用しているか気にする必要がありません。
よって、LinuxThreads もこの場合必要ありません。
<code>-static</code> でリンクされたプログラムのサイズは
ダイナミックリンクされたプログラムより大きくなりますが、少し(3-5%)速くなります。
しかし一つの問題として、このスタティックリンクされたプログラムでは、
ユーザー定義関数(UDF)が使用できないことです。
もし UDF を使用する(書く)場合(C, C++とかで)、自分自身で MySQL を
ダイナミックリンクを使用してコンパイルしなくてはなりません。

</p>
<p>
もし <code>glibc2</code> ではなく libc ベースのシステムを使用しているなら、
このバイナリリリースではホスト名解決と <code>getpwnam()</code> にいくつか問題が出ます。
(これは <code>glibc</code> がホスト名解決と <code>getpwent()</code> にいくつかの外部ライブラリに
依存しているためで、たとえ <code>-static</code> リンクしても解決しません).
この場合、<code>mysql_install_db</code> 実行時に以下のエラーが出るでしょう：

</p>

<pre>Sorry, the host 'xxxx' could not be looked up
</pre>

<p>
あるいは、<code>--user</code> オプションで <code>mysqld</code> を起動しようとしたとき、
以下のエラーが出る場合：

</p>

<pre>getpwnam: No such file or directory
</pre>

<p>
この問題は、以下のうちのどれかの方法で解決できます：

</p>

<ul>
<li>

MySQL ソース配布を入手し( RPM か <code>tar.gz</code> )、代わりに
インストールします。
</li><li>

<code>mysql_install_db --force</code> を実行します; これは <code>mysql_install_db</code> に
かかれている <code>resolveip</code> テストを実行しません。
また許可テーブル内でホスト名が使えなくなっています； 
ホスト名でなく IP アドレスで登録します (<code>localhost</code> は除).
もし <code>--force</code> を持っていないような古い MySQL を使用しているなら、
エディターで、<code>resolveip</code> テストを <code>mysql_install</code> から削除します。
</li><li>

<code>mysqld</code> を <code>--user</code> の代わりに <code>su</code> で起動。
</li></ul>

<p>
Linux-Intel binary と MySQL RPM リリースは、もっとも速くなるように
調整されています。我々はもっとも早く安定したコンパイラーを常に使用しています。

</p>
<p>
MySQL Perl サポートは Perl 5.004_03 以上のバージョンを必要としま
す。

</p>
<p>
Linux 2.2 バージョンのいくつかでは、TCP/IP 上で <code>mysqld</code> サーバに多く
の新しい接続を行なう時に、エラー <code>Resource temporarily unavailable</code> 
を得ることがあります。

</p>
<p>
この問題は、Linux では TCP/IP ソケットをクローズする時と、それがシステムに
よって実際に解放される間に遅延があるためです。TCP/IP スロットの数は有限な
ので、TCP/IP 上で MySQL <tt>`test-connect'</tt> ベンチマークを実行し
た時のように、短い時間にとても多くの新しい TCP/IP 接続が行なわれた場合に上
記エラーが得られます。

</p>
<p>
我々はこの問題について、異なる Linux メーリングリストで何回かメールを受け
ました。しかし、当然、我々はこれを解決することはできません。

</p>
<p>
この問題の知られている'解決策'は、あなたのクライアント内で永続的な接続を使
用するか、データベースサーバとクライアントが同じマシン上で実行されている場
合にソケットを使用することだけです。我々は、将来、<code>Linux 2.4</code> カーネ
ルでこの問題が解決されることを希望します。

</p>



<h4><a name="Linux-x86" href="manual.ja_toc.html#Linux-x86">2.6.1.2  Linux x86 Notes</a></h4>

<p>
MySQL は <code>libc</code> 5.4.12 以上が必要です。<code>libc</code> 5.4.46 で動作します。
<code>glibc</code> 2.0.6 以上でも動作します。
<code>glibc</code> の RPM にはいくつか問題があり、アップデートをチェックしてください。
<code>glibc</code> 2.0.7-19 と 2.0.7-29 RPM で動作します。

</p>
<p>
If you are using Red Hat 8.0 or a new glibc 2.2.x library you should start
mysqld with the option <code>--thread-stack=192K</code>.  If you don't do it
mysqld will die in <code>gethostbyaddr()</code> because the new glibc library
requires &gt; 128K memory on stack for this call. This stack size is now the
default on MySQL 4.0.10 and above.

</p>
<p>
If you are using gcc 3.0 and above to compile MySQL, you must install
the <code>libstdc++v3</code> library before compiling MySQL; if you don't do
this you will get an error about a missing <code>__cxa_pure_virtual</code>
symbol during linking!

</p>
<p>
古い Linux 配布物では、<code>configure</code> 時に以下のようなエラーが出るかもしれません：

</p>

<pre>Syntax error in sched.h. Change _P to __P in the /usr/include/sched.h file.
See the Installation chapter in the Reference Manual.
</pre>

<p>
これは <code>_P</code> マクロが一つのアンダースコアしか持っていないためで、
このエラーメッセージに示されたように対処してください。

</p>
<p>
以下のようなワーニングは無視して構いません：

</p>

<pre>mysqld.cc -o objs-thread/mysqld.o
mysqld.cc: In function `void init_signals()':
mysqld.cc:315: warning: assignment of negative value `-1' to
`long unsigned int'
mysqld.cc: In function `void * signal_hand(void *)':
mysqld.cc:346: warning: assignment of negative value `-1' to
`long unsigned int'
</pre>

<p>
Debian GNU/Linux では、MySQL をマシンの起動時に立ちあげるためには、
以下のようにします：

</p>

<pre>shell&gt; cp support-files/mysql.server /etc/init.d/mysql.server
shell&gt; /usr/sbin/update-rc.d mysql.server defaults 99
</pre>

<p>
<code>mysql.server</code> スクリプトは MySQL をインストールした先の
 <tt>`share/mysql'</tt> directory にあります。
あるいは、MySQL のソースの中の <tt>`support-files'</tt> ディレクトリにあります。

</p>
<p>
<code>mysqld</code> がつねにスタート時にコアをはく場合、
古い <tt>`/lib/libc.a'</tt> を使用しているかもしれません。
<tt>`sql/mysqld'</tt> を消去して、新しく <code>make install</code> してみてください。
これはいくつかの Slackware で報告された現象です。

</p>
<p>
もし <code>mysqld</code> をリンクする場合に以下のようなエラーが出た場合、
 <tt>`libg++.a'</tt> が正しくインストールされていません：

</p>

<pre>/usr/lib/libc.a(putc.o): In function `_IO_putc':
putc.o(.text+0x0): multiple definition of `_IO_putc'
</pre>

<p>
<tt>`libg++.a'</tt> の使用を避けるには、 <code>configure</code> を以下のようにします：

</p>

<pre>shell&gt; CXX=gcc ./configure
</pre>



<h4><a name="Linux-SPARC" href="manual.ja_toc.html#Linux-SPARC">2.6.1.3  Linux SPARC Notes</a></h4>

<p>
いくつかの埋め込み関数, <code>readdir_r()</code> が壊れます。
この顕れとして、<code>SHOW DATABASES</code> が常に空を返します。
これは configure 後、コンパイルする前に、
<tt>`config.h'</tt> から <code>HAVE_READDIR_R</code> を取り除くことで解決します。

</p>
<p>
その他いくつかの問題は、あなたの Linux にパッチを当てる必要があります。
パッチは <a href="http://www.mysql.com/Downloads/patches/Linux-sparc-2.0.30.diff">http://www.mysql.com/Downloads/patches/Linux-sparc-2.0.30.diff</a>. にあります。
このパッチは、<code>vger.rutgers.edu</code> にある <tt>`sparclinux-2.0.30.tar.gz'</tt> 用です。
(これは正式の 2.0.30 とは違います。パッチを正式2.0.30に当てないように)
そして LinuxThreads Version 0.6 かそれ以上にしなくてはなりません。

</p>



<h4><a name="Linux-Alpha" href="manual.ja_toc.html#Linux-Alpha">2.6.1.4  Linux Alpha Notes</a></h4>

<p>
MySQL Version 3.23.12 が、Linux-Alpha 上で最初にテストされたバージョンです。
もし MySQL を Linux-Alpha 上で使用したいと考えたなら、
このバージョンより新しいものを使用します。

</p>
<p>
We have tested MySQL on Alpha with our benchmarks and test suite,
and it appears to work nicely. 

</p>
<p>
We currently build the MySQL binary packages on SuSE Linux 7.0 for AXP,
kernel 2.4.4-SMP, Compaq C compiler (V6.2-505) and Compaq C++ compiler
(V6.3-006) on a Compaq DS20 machine with an Alpha EV6 processor.

</p>
<p>
You can find the above compilers at
<a href="http://www.support.compaq.com/alpha-tools/">http://www.support.compaq.com/alpha-tools/</a>).  By using these compilers,
instead of gcc, we get about 9-14% better performance with MySQL.

</p>
<p>
Note that until MySQL version 3.23.52 and 4.0.2 we optimised the binary for
the current CPU only (by using the <code>-fast</code> compile option); this meant
that you could only use our binaries if you had an Alpha EV6 processor.

</p>
<p>
Starting with all following releases we added the <code>-arch generic</code> flag
to our compile options, which makes sure the binary runs on all Alpha
processors. We also compile statically to avoid library problems.

</p>

<pre>CC=ccc CFLAGS="-fast -arch generic" CXX=cxx \
CXXFLAGS="-fast -arch generic -noexceptions -nortti" \
./configure --prefix=/usr/local/mysql --disable-shared \
--with-extra-charsets=complex --enable-thread-safe-client \
--with-mysqld-ldflags=-non_shared --with-client-ldflags=-non_shared
</pre>

<p>
If you want to use egcs the following configure line worked for us:

</p>

<pre>CFLAGS="-O3 -fomit-frame-pointer" CXX=gcc \
CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors \
-fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql \
--disable-shared
</pre>

<p>
Some known problems when running MySQL on Linux-Alpha:

</p>

<ul>
<li>

Debugging threaded applications like MySQL will not work with
<code>gdb 4.18</code>.  You should download and use gdb 5.1 instead!

</li><li>

If you try linking <code>mysqld</code> statically when using <code>gcc</code>, the
resulting image will core dump at start.  In other words, <strong>don't</strong>
use <code>--with-mysqld-ldflags=-all-static</code> with <code>gcc</code>.
</li></ul>



<h4><a name="Linux-PowerPC" href="manual.ja_toc.html#Linux-PowerPC">2.6.1.5  Linux PowerPC Notes</a></h4>

<p>
MySQL は最新の <code>glibc</code> を使用した MkLinux で動作します。
(<code>glibc</code> 2.0.7 でテストしました).

</p>



<h4><a name="Linux-MIPS" href="manual.ja_toc.html#Linux-MIPS">2.6.1.6  Linux MIPS Notes</a></h4>

<p>
Qube2 (Linux Mips) 上で MySQL を動作させるには、
最新の <code>glibc</code> ライブラリでなくてはなりません
(<code>glibc-2.0.7-29C2</code> は動作することが分かっています)。 
そして、 <code>egcs</code> C++ compiler (<code>egcs-1.0.2-9</code>, <code>gcc 2.95.2</code> 以上) を
使用しなくてはなりません。

</p>



<h4><a name="Linux-IA64" href="manual.ja_toc.html#Linux-IA64">2.6.1.7  Linux IA64 Notes</a></h4>

<p>
To get MySQL to compile on Linux IA64, we use the following compile line:
Using <code>gcc-2.96</code>:

</p>

<pre>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc \
CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors \
-fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql \
"--with-comment=Official MySQL binary" --with-extra-charsets=complex
</pre>

<p>
On IA64 the MySQL client binaries are using shared libraries. This means
that if you install our binary distribution in some other place than
<tt>`/usr/local/mysql'</tt> you need to either modify <tt>`/etc/ld.so.conf'</tt>
or add the path to the directory where you have <tt>`libmysqlclient.so'</tt>
to the <code>LD_LIBRARY_PATH</code> environment variable.

</p>
<p>
 「<a href="manual.ja_Problems.html#Link_errors">A.3.1  Problems When Linking with the MySQL Client Library</a>」節参照.

</p>


<h3><a name="Windows" href="manual.ja_toc.html#Windows">2.6.2  Windows Notes</a></h3>

<p>
This section describes using MySQL on Windows. This information
is also provided in the <tt>`README'</tt> file that comes with the
MySQL Windows distribution.  「<a href="manual.ja_Installing.html#Windows_installation">2.1.2  Windows への MySQL のインストール</a>」節参照.

</p>



<h4><a name="Win95_start" href="manual.ja_toc.html#Win95_start">2.6.2.1  Starting MySQL on Windows 95, 98 or Me</a></h4>

<p>
MySQL は TCP/IP をクライアントからサーバーへの接続に使用します。
こうすればネットワーク上のどのマシンからでも MySQL サーバーに
接続できるようになります。 このため、MySQL を起動する前に、
あなたは TCP/IP をインストールしなくてはなりません。
これは Windows CD-ROM にあります。

</p>
<p>
もし古い Win95 (for example OSR2) を使用しているなら、
これは古い Winsock パッケージを使用しているかもしれません！
MySQL は Winsock 2 を要求します！ 最新の Winsock は
<a href="http://www.microsoft.com/">http://www.microsoft.com/</a> にあります。
 Win98 はデフォルトで新しい Winsock 2 ライブラリですので、
これは Win98 には当てはまりません。

</p>
<p>
<code>mysqld</code> サーバーを起動するには, MS-DOS を起動し、以下のように入力します：

</p>

<pre>C:\&gt; C:\mysql\bin\mysqld
</pre>

<p>
これは <code>mysqld</code> をバックグラウンドで動かします。

</p>
<p>
MySQL サーバーの kill には：

</p>

<pre>C:\&gt; C:\mysql\bin\mysqladmin -u root shutdown
</pre>

<p>
This calls the MySQL administation utility as user `root', which
is the default Administrator in the MySQL grant system. Please
note that the MySQL grant system is wholly independent from any
login users under Windows.

</p>
<p>
注意: Win95 と Win98 は名前付パイプをサポートしていません。Win95 と 
Win98 では、Windows NT サーバホスト上で動いているリモートの 
MySQL への接続だけに、名前付パイプを使用できます。
(The MySQL server must also support named pipes, of course.
For example, using <code>mysqld-opt</code> under NT/2000/XP will not
allow named pipe connections.  You should use either
<code>mysqld-nt</code> or <code>mysqld-max-nt</code>.)

</p>
<p>
<code>mysqld</code> が起動しない場合、<tt>`\mysql\data\mysql.err'</tt> ファイルがそ
の問題の原因を示す何らかのメッセージをサーバが書き出していないかチェック
してください。<code>mysqld --standalone</code> でサーバの起動を試みることもでき
ます; この場合、問題の解決の助けになるであろう、いくつかの有用な情報が画
面上で得られます。

</p>
<p>
最後の選択肢は <code>mysqld</code> を <code>--standalone --debug</code> 付きで起動す
ることです。この場合、<code>mysqld</code> はログをファイル 
<tt>`C:\mysqld.trace'</tt> に書き出します。これには、<code>mysqld</code> が何故起動
しないかの理由が含まれます。  「<a href="manual.ja_Porting.html#Making_trace_files">E.1.2  Creating Trace Files</a>」節参照.

</p>
<p>
Use <code>mysqld --help</code> to display all the options that
<code>mysqld</code> understands!

</p>



<h4><a name="NT_start" href="manual.ja_toc.html#NT_start">2.6.2.2  Starting MySQL on Windows NT, 2000 or XP</a></h4>

<p>
NT 4 上で TCP/IP を用いて MySQL を動作させるには、service pack 3(以上) が必須です！ 

</p>
<p>
Normally you should install MySQL as a service on Windows NT/2000/XP.
In case the server was already running, first stop it using
the following command:

</p>

<pre>C:\mysql\bin&gt; mysqladmin -u root shutdown
</pre>

<p>
This calls the MySQL administation utility as user `<code>root</code>',
which is the default <code>Administrator</code> in the MySQL grant system.
Please note that the MySQL grant system is wholly independent from
any login users under Windows.

</p>
<p>
Now install the server service:

</p>

<pre>C:\mysql\bin&gt; mysqld-max-nt --install
</pre>

<p>
If any options are required, they must be specified as
``<code>Start parameters</code>'' in the Windows <code>Services</code>
utility before you start the MySQL service.

</p>
<p>
The <code>Services</code> utility
(<code>Windows Service Control Manager</code>) can be found in the
<code>Windows Control Panel</code> (under <code>Administrative Tools</code>
on Windows 2000). It is advisable to close the Services utility
while performing the <code>--install</code> or <code>--remove</code>
operations, this prevents some odd errors.

</p>
<p>
For information about which server binary to run, see
 「<a href="manual.ja_Installing.html#Windows_prepare_environment">2.1.2.2  Preparing the Windows MySQL Environment</a>」節.

</p>
<p>
Please note that from MySQL version 3.23.44, you have the choice
of set up the service as <code>Manual</code> instead (if you don't wish
the service to be started automatically during the boot process):

</p>

<pre>C:\mysql\bin&gt; mysqld-max-nt --install-manual
</pre>

<p>
サービスは <code>MySQL</code> という名前で登録されます。 一度インストールしたら、
これは Services (コントロールパネルにある)
を使用するか、<code>NET START MySQL</code> コマンドを使用するかして、
起動されなくてはなりません。

</p>
<p>
Once running, <code>mysqld-max-nt</code> can be stopped using
<code>mysqladmin</code>, from the Services utility, or by using the
command <code>NET STOP MySQL</code>.

</p>
<p>
When running as a service, the operating system will automatically stop
the MySQL service on computer shutdown. In MySQL versions &lt; 3.23.47,
Windows only waited for a few seconds for the shutdown to complete, and
killed the database server process if the time limit was exceeded
(potentially causing problems). For instance, at the next startup the
<code>InnoDB</code> storage engine had to do crash recovery. Starting from
MySQL version 3.23.48, the Windows will wait longer for the MySQL server
shutdown to complete. If you notice this is not enough for your
intallation, it is safest to run the MySQL server not as a service, but
from the Command prompt, and shut it down with <code>mysqladmin shutdown</code>.

</p>
<p>
There is a problem that Windows NT (but not Windows 2000/XP) by default only
waits 20 seconds for a service to shut down, and after that kills the
service process. You can increase this default by opening the Registry
Editor <tt>`\winnt\system32\regedt32.exe'</tt> and editing the value of
<code>WaitToKillServiceTimeout</code> at
<tt>`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control'</tt>
in the Registry tree. Specify the new larger value in milliseconds,
for example 120000 to have Windows NT wait upto 120 seconds.

</p>
<p>
Please note that when run as a service, <code>mysqld-max-nt</code>
has no access to a console and so no messages can be seen.
Errors can be checked in <tt>`c:\mysql\data\mysql.err'</tt>.

</p>
<p>
もし <code>mysqld-max-nt</code> をサービスとしてインストールする場合に
問題が発生した場合、フルパスで実行してみてください：

</p>

<pre>C:\&gt; C:\mysql\bin\mysqld-max-nt --install
</pre>

<p>
If this doesn't work, you can get <code>mysqld-max-nt</code> to
start properly by fixing the path in the registry!

</p>
<p>
サービスとして <code>mysqld-max-nt</code> を起動したくないなら以下のようにします：

</p>

<pre>C:\&gt; C:\mysql\bin\mysqld-max-nt --standalone
</pre>

<p>
or

</p>

<pre>C:\&gt; C:\mysql\bin\mysqld --standalone --debug
</pre>

<p>
最新のバージョンでは、デバッグのトレースを <tt>`C:\mysqld.trace'</tt> に出します。
 「<a href="manual.ja_Porting.html#Making_trace_files">E.1.2  Creating Trace Files</a>」節参照.

</p>



<h4><a name="Windows_running" href="manual.ja_toc.html#Windows_running">2.6.2.3  Windows 上で MySQL を実行</a></h4>

<p>
<a name="IDX326"></a>
<a name="IDX327"></a>

</p>
<p>
MySQL supports TCP/IP on all Windows platforms and named pipes on
NT/2000/XP. The default is to use named pipes for local connections
on NT/2000/XP and TCP/IP for all other cases if the client has TCP/IP
installed. The host name specifies which protocol is used:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>Host name</strong> </td><td> <strong>Protocol</strong>
</td></tr>
<tr><td>NULL (none) </td><td>
On NT/2000/XP, try named pipes first; if that doesn't work, use TCP/IP.
On 9x/Me, TCP/IP is used.
</td></tr>
<tr><td>. </td><td> Named pipes
</td></tr>
<tr><td>localhost </td><td>
TCP/IP to current host
</td></tr>
<tr><td>hostname </td><td>
TCP/IP
</td></tr>
</tbody></table>

<p>
MySQL クライアントに named pipes を強制的に使用させるには、
<code>--pipe</code> オプションか、ホストに <code>.</code> を指定します。
そして、<code>--socket</code> オプションでパイプの名前を指定します。

</p>
<p>
Note that starting from 3.23.50, named pipes are only enabled if mysqld is
started with <code>--enable-named-pipe</code>.  This is because some users
have experienced problems shutting down the MySQL server when one uses
named pipes.

</p>
<p>
MySQL が動いているかどうかは、以下のようにして確認できます：

</p>

<pre>C:\&gt; C:\mysql\bin\mysqlshow
C:\&gt; C:\mysql\bin\mysqlshow -u root mysql
C:\&gt; C:\mysql\bin\mysqladmin version status proc
C:\&gt; C:\mysql\bin\mysql test
</pre>

<p>
If <code>mysqld</code> is slow to answer to connections on Windows 9x/Me, there is
probably a problem with your DNS.  In this case, start <code>mysqld</code> with
<code>--skip-name-resolve</code> and use only <code>localhost</code> and IP numbers in
the MySQL grant tables.  You can also avoid DNS when connecting to a
<code>mysqld-nt</code> MySQL server running on NT/2000/XP by using the
<code>--pipe</code> argument to specify use of named pipes.  This works for most
MySQL clients.

</p>
<p>
2つの MySQL コマンドラインツールがあります：
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>Binary</strong> </td><td> <strong>Description</strong>
</td></tr>
<tr><td><code>mysql</code> </td><td> ネイティブな Windows 用にコンパイルされている。非常に限られたコマンドライン編集機能しか持たない
</td></tr>
<tr><td><code>mysqlc</code> </td><td> Cygnus GNU コンパイラとライブラリを用いてコンパイルされている。GNU readline によるコマンドライン編集機能を持つ。
</td></tr>
</tbody></table>

</p>
<p>
もし <code>mysqlc.exe</code> を使用したいなら,
<tt>`C:\mysql\lib\cygwinb19.dll'</tt> をあなたの Windows システムディレクトリ 
(<tt>`\windows\system'</tt> もしくは同様のパス)にコピーしなくてはなりません。

</p>
<p>
Windows の MySQL の初期の権限は、ローカルの全てのユーザーに
対して、全てのデータベースで全ての権限がパスワードなしに与えられています。
MySQL を安全にするために、全てのユーザーにパスワードを
設定すべきです。また、<code>mysql.user</code> テーブルから
<code>Host='localhost'</code> で <code>User=''</code> となっているレコードを
削除すべきです。

</p>
<p>
<code>root</code> ユーザーにもパスワードを設定すべきです。次の例では、
すべての権限を持つ匿名ユーザを削除したあとに、
<code>root</code> ユーザパスワードを設定しています:

</p>

<pre>C:\&gt; C:\mysql\bin\mysql mysql
mysql&gt; DELETE FROM user WHERE Host='localhost' AND User='';
mysql&gt; QUIT
C:\&gt; C:\mysql\bin\mysqladmin reload
C:\&gt; C:\mysql\bin\mysqladmin -u root password your_password
</pre>

<p>
パスワードを設定した後、もし <code>mysqld</code> サーバーを停止させるなら、
以下のようにします：

</p>

<pre>C:\&gt; mysqladmin --user=root --password=your_password shutdown
</pre>

<p>
もしあなたが Windows 下で、古い MySQL バージョン 3.21 のシェアウェ
アバージョンを使用しているなら、上記のコマンドは次のエラーで失敗します:
<code>parse error near 'SET password'</code>。回避策は、現在の 
MySQL バージョンにアップグレードすることです。これもフリーです。

</p>
<p>
現在の MySQL バージョンでは、<code>GRANT</code> と <code>REVOKE</code> コ
マンドで、簡単に新しいユーザを追加でき、権限を変更することができます。
 「<a href="manual.ja_MySQL_Database_Administration.html#GRANT">4.3.1  <code>GRANT</code> と <code>REVOKE</code> 構文</a>」節参照.

</p>



<h4><a name="Windows_and_SSH" href="manual.ja_toc.html#Windows_and_SSH">2.6.2.4  SSH を利用してリモートの MySQL に Windows から接続</a></h4>

<p>
<a name="IDX328"></a>
<a name="IDX329"></a>

</p>
<p>
以下は SSH を用いてリモートの MySQL サーバに安全に接続するための
方法について述べたものです。
(by David Carlson <a href="mailto:dcarlson@mplcomm.com">dcarlson@mplcomm.com</a>):

</p>

<ul>
<li>

Install an SSH client on your Windows machine.  As a user, the best non-free
one I've found is from <code>SecureCRT</code> from <a href="http://www.vandyke.com/">http://www.vandyke.com/</a>.
Another option is <code>f-secure</code> from <a href="http://www.f-secure.com/">http://www.f-secure.com/</a>. You
can also find some free ones on <code>Google</code> at
<a href="http://directory.google.com/Top/Computers/Security/Products_and_Tools/Cryptography/SSH/Clients/Windows/">http://directory.google.com/Top/Computers/Security/Products_and_Tools/Cryptography/SSH/Clients/Windows/</a>.

</li><li>

Windows SSH クライアントを起動。
Set <code>Host_Name = yourmysqlserver_URL_or_IP</code>.
Set <code>userid=your_userid</code> to log in to your server (probably not the same
as your MySQL login/password.

</li><li>

Set up port forwarding. Either do a remote forward (Set <code>local_port: 3306</code>, <code>remote_host: yourmysqlservername_or_ip</code>, <code>remote_port: 3306</code> )
or a local forward (Set <code>port: 3306</code>,  <code>host: localhost</code>, <code>remote port: 3306</code>).

</li><li>

Save everything, otherwise you'll have to redo it the next time.

</li><li>

Log in to your server with SSH session you just created.

</li><li>

On your Windows machine, start some ODBC application (such as Access).

</li><li>

Create a new file in Windows and link to MySQL using the ODBC
driver the same way you normally do, except type in <code>localhost</code>
for the MySQL host server@-not <code>yourmysqlservername</code>.
</li></ul>

<p>
You should now have an ODBC connection to MySQL, encrypted using SSH.

</p>



<h4><a name="Windows_symbolic_links" href="manual.ja_toc.html#Windows_symbolic_links">2.6.2.5  Windows 上で、異なるディスクにデータを分割する</a></h4>

<p>
<a name="IDX330"></a>
<a name="IDX331"></a>
<a name="IDX332"></a>

</p>
<p>
Windows 上では、3.23.16 以上のバージョンの MySQL ディストリビュー
ション中の <code>mysqld-max</code> と <code>mysql-max-nt</code> サーバは、
<code>-DUSE_SYMDIR</code> オプション付きでコンパイルされています。これはデータ
ベースに対するシンボリックリンクを追加することで異なるディスクにデータベー
スを置くことを可能にします（Unix におけるシンボリック・リンクと同様の方法
で）。

</p>
<p>
Windows 上では、宛先ディレクトリへのパスを持つファイルを作成し、
そのファイルを <code>database.sym</code> というファイル名で <code>mysql_data</code> ディレクトリ
の中に保存することで、データベースへのシンボリックリンクを作成します。
Note that the symbolic link will only be used if the directory
<code>mysql_data_dir\database</code> doesn't exist.

</p>
<p>
例えば、MySQL データディレクトリが <tt>`C:\mysql\data'</tt> で、
<tt>`D:\data\foo'</tt> に置かれているデータベース <code>foo</code> を持ちたければ、
テキスト <code>D:\data\foo\</code> を含む <tt>`C:\mysql\data\foo.sym'</tt> を作成す
べきです。その後、データベース <code>foo</code> に作成されるすべてのテーブルは 
<tt>`D:\data\foo'</tt> に作成されるでしょう。

</p>
<p>
Note that because of the speed penalty you get when opening every table,
we have not enabled this by default even if you have compiled
MySQL with support for this. To enable symlinks you should put
in your <tt>`my.cnf'</tt> or <tt>`my.ini'</tt> file the following entry:

</p>

<pre>[mysqld]
use-symbolic-links
</pre>

<p>
In MySQL 4.0 we will enable symlinks by default. Then you
should instead use the <code>skip-symlink</code> option if you want to
disable this.

</p>



<h4><a name="Windows_client_compiling" href="manual.ja_toc.html#Windows_client_compiling">2.6.2.6  Windows 上で MySQL クライアントをコンパイルする</a></h4>

<p>
<a name="IDX333"></a>
<a name="IDX334"></a>

</p>
<p>
ソースファイル中で <tt>`mysql.h'</tt> をインクルードする前に <tt>`windows.h'</tt> を
インクルードするべきです：

</p>

<pre>#if defined(_WIN32) || defined(_WIN64)
#include &lt;windows.h&gt;
#endif
#include &lt;mysql.h&gt;
</pre>

<p>
あなたのコードを、必要に応じて <tt>`libmysql.dll'</tt> 中でロードするための
ラッパーである <tt>`libmysql.lib'</tt> ライブラリに動的にリンクすることも
できますし、また <tt>`mysqlclient.lib'</tt> ライブラリを静的にリンクすることも
できます。

</p>
<p>
mysqlclient ライブラリはスレッド対応ライブラリとしてコンパイル
されていますので、あなたのコードもマルチスレッド対応になるように
コンパイルするべきことに注意してください。

</p>



<h4><a name="Windows_vs_Unix" href="manual.ja_toc.html#Windows_vs_Unix">2.6.2.7  Windows 用 MySQL と Unix 用 MySQL の比較</a></h4>

<p>
<a name="IDX335"></a>
<a name="IDX336"></a>

</p>
<p>
MySQL-Windows バージョンは現在それ自体とても安定した(stableな)状態で供給されています。
MySQL-win32 バージョンは すべての機能が UNIX バージョンの MySQL と対応しています。
ただし、下記のような例外があります。

</p>
<dl compact="">

<dt><strong>Win95 とスレッド</strong>
</dt><dd>
Win95は、各々のスレッドの作成のためにメインメモリのおよそ200バイトをメモリリーク
します。もしあなたが多くの接続をすれば、MySQL の各々の接続が新しい
スレッドを作成するので、あなたはWin95では長時間、<code>mysqld</code> を実行させるべきではあり
ません！
WindowsNT と Windows98 はこのバグを持ちません。

</dd><dt><strong>並行読み出し</strong>
</dt><dd>
MySQL は <code>INSERT</code> と <code>SELECT</code> を混ぜることを可能にするために <code>pread()</code>
及び <code>pwrite()</code> 関数コールに依存します。現時点では <code>pread()</code>/<code>pwrite()</code>
をエミュレートするために Mutex を用いています。長期的な計画では、
ファイルレベルのインターフェースを仮想インターフェースで置き換えて
いくつもりなので、さらに速度を上げるために Windows NT/2000/XP 上で
<code>readfile()</code>/<code>writefile()</code> インターフェースを使うことができます。
現在の実装は、しかし MySQL が利用可能なファイル数の上限が 1024 に
なっています。これは Unix では可能な数の並行スレッドを NT/2000/XP 上では
動作させることができないことを意味しています。

</dd><dt><strong>ブロック読み込み</strong>
</dt><dd>
MySQL はそれぞれの接続のためにブロック読み込みを使います。
これは以下の事柄を意味しています：


<ul>
<li>

接続は、Unix の MySQL で起こるように、8時間の後に自動的に接続が断
ち切られるわけではありません

</li><li>

もし接続が「ハングすれば」、MySQLを終了しないでそれを中断することは、不可能です。

</li><li>

<code>mysqladmin kill</code> は、スリープしている接続上では働かないはずです。

</li><li>

スリープ中の接続があるかぎり、<code>mysqladmin shutdown</code> は中断することができません。
</li></ul>

We plan to fix this problem when our Windows developers have figured out a
nice workaround.

</dd><dt><strong><code>DROP DATABASE</code></strong>
</dt><dd>
複数のスレッドで使われているデータベースはDROPをすることができません。

</dd><dt><strong>タスクマネージャーからの MySQL の終了</strong>
</dt><dd>
Windows95では「Windowsの終了」やタスクマネージャから MySQL を終了することはできません。
<code>mysqladmin shutdown</code> で終了しなければなりません。

</dd><dt><strong>大文字小文字を区別しない名前</strong>
</dt><dd>
Windowsではファイルネームは大文字小文字が区別されません。
そのため、Windows用の MySQL では、テーブル名は大文字小文字が区別されません。
唯一の制限は、ステートメント(SQL文)中においては、データベースとテーブルの名前は
同じケース(大文字小文字)を使用して指定されなければならないという点です。
 「<a href="manual.ja_Reference.html#Name_case_sensitivity">6.1.3  名前のケース依存性</a>」節参照.

</dd><dt><strong>The <samp>`\'</samp> directory character</strong>
</dt><dd>
Windows 95のパス名コンポーネントは、 <samp>`\'</samp> によって離されますが、その文字は同じく
MySQL のエスケープ文字でもあります。もしあなたが <code>LOAD DATA INFILE</code> または
<code>SELECT ... INTO OUTFILE</code> を使う場合には、<samp>`\'</samp> を二重に使わなくてはなりません。


<pre>mysql&gt; LOAD DATA INFILE "C:\\tmp\\skr.txt" INTO TABLE skr;
mysql&gt; SELECT * INTO OUTFILE 'C:\\tmp\\skr.txt' FROM skr;
</pre>

かわりに、UNIX でのファイルネーム形式 <samp>`/'</samp> で書く必要があります。


<pre>mysql&gt; LOAD DATA INFILE "C:/tmp/skr.txt" INTO TABLE skr;
mysql&gt; SELECT * INTO OUTFILE 'C:/tmp/skr.txt' FROM skr;
</pre>

</dd><dt><strong><code>Can't open named pipe</code> エラー</strong>
</dt><dd>
もしあなたが NT 上で最新の mysql-clients と MySQL 3.22 バージョン
を使えば、あなたは、次のエラーを得ることになるはずです:


<pre>error 2017: can't open named pipe to host: . pipe...
</pre>

<a name="IDX337"></a>
これは、MySQL のリリースバージョンがデフォルトで NT の 名前つきパイプを
使っているために起こっています。
新しい MySQL クライアントで <code>--host=localhost</code> オプションを用いるか、
以下の情報を含むオプションファイル <tt>`C:\my.cnf'</tt> を作成することで、このエラーを
回避することができます。


<pre>[client]
host = localhost
</pre>

Starting from 3.23.50, named pipes are only enabled if <code>mysqld</code> is started
with <code>--enable-named-pipe</code>.

</dd><dt><strong><code>Access denied for user</code> error</strong>
</dt><dd>
もしあなたが同じマシン上の MySQL サーバーにアクセスした時
<code>Access denied for user: 'some-user@unknown' to database 'mysql'</code>
 エラーを得るなら、これはあなたの MySQL があなた
のマシンのホスト名を正しく解決できてないことを意味します。

これを修正するには、
以下の情報を持つファイル <tt>`\windows\hosts'</tt> を作成するべきです。
(注:Windows95,98には\Windowsフォルダ上にサンプルとして「lmhosts.sam」ファイルが
既にあるはずです)


<pre>127.0.0.1       localhost
</pre>

</dd><dt><strong><code>ALTER TABLE</code></strong>
</dt><dd>
<code>ALTER TABLE</code> ステートメントの実行中、テーブルは他のスレッドが使用できないようロック
されます。これは Windows が他のスレッドによって使用中のファイルを削除
できないという事実のためにしなければならないことです（私たちはこの
問題を回避するための方法を将来見出すかもしれません）。

</dd><dt><strong></strong>
</dt><dd>
<code>DROP TABLE</code> on a table that is in use by a <code>MERGE</code> table will
not work on Windows because the <code>MERGE</code> handler does the table mapping
hidden from the upper layer of MySQL.  Because Windows doesn't allow you
to drop files that are open, you first must flush all <code>MERGE</code>
tables (with <code>FLUSH TABLES</code>) or drop the <code>MERGE</code> table before
dropping the table.  We will fix this at the same time we introduce
<code>VIEW</code>s.
</dd><dt><strong></strong>
</dt><dd>
<code>DATA DIRECTORY</code> and <code>INDEX DIRECTORY</code> directives in
<code>CREATE TABLE</code> is ignored on Windows, because Windows doesn't support
symbolic links.
</dd></dl>

<p>
Here are some open issues for anyone who might want to help us with the Windows
release:

</p>
<p>
<a name="IDX338"></a>

</p>

<ul>
<li>

Make a single-user <code>MYSQL.DLL</code> server.  This should include everything in
a standard MySQL server, except thread creation.  This will make
MySQL much easier to use in applications that don't need a true
client/server and don't need to access the server from other hosts.

</li><li>

MySQL のインストールされたもののための、素敵な開始・シャットダウン
アイコンの追加。

</li><li>

NT上で <code>mysqld</code> をサービスとして <code>--install</code> フラグで登録するとき、
コマンドラインにデフォルトオプションも一緒に追加できると素敵です。
差し当たって、 回避策は代わりに <tt>`C:\my.cnf'</tt> ファイル内のパラメータをリストすることです。

</li><li>

タスクマネージャから <code>mysqld</code> を終了させることができればほんとうに親切でしょう。
今のところ、あなたは <code>mysqladmin shutdown</code> を使わなければなりません。

</li><li>

<code>mysql</code> のコマンドライン・ツールで使うために <code>readline</code> をWindowsに移植しませんか？

</li><li>

標準の MySQL クライアント(<code>mysql</code>、<code>mysqlshow</code>、<code>mysqladmin</code>、および、<code>mysqldump</code>)のGUI
バージョンがあればいいでしょうねぇ。

</li><li>

<tt>`net.c'</tt> 中のソケット読み出し・書き込み関数が割り込み不可だったら素敵
でした。これは Windows 上で <code>mysqladmin kill</code> を用いて、オープンなスレッドを
kill することができるでしょう。

</li><li>

<code>mysqld</code> はデフォルトロケールではなく、常に「C」ロケールで起動します。私たちは、
ソート順に関して <code>mysqld</code> が現在のロケールを使用するようにしたいです。

</li><li>

Windows によって提供されている、より高速でスレッドセーフなインクリメント・
デクリメントメソッドを使うためのマクロの追加
</li></ul>

<p>
他の Windows 特有の事柄は MySQL-Windows ディストリビューションに同梱されている
 <tt>`README'</tt> ファイルで説明されています。

</p>



<h3><a name="Solaris" href="manual.ja_toc.html#Solaris">2.6.3  Solaris Notes</a></h3>

<p>
<a name="IDX339"></a>
<a name="IDX340"></a>
<a name="IDX341"></a>
<a name="IDX342"></a>
<a name="IDX343"></a>

</p>
<p>
Solaris では MySQL ソースを展開するときトラブルが出るでしょう！
Solaris の <code>tar</code> は長い名前を扱えず、 MySQL を展開する場合、
以下のようなエラーになります：

</p>

<pre>x mysql-3.22.12-beta/bench/Results/ATIS-mysql_odbc-NT_4.0-cmp-db2,\
informix,ms-sql,mysql,oracle,solid,sybase, 0 bytes, 0 tape blocks
tar: directory checksum error
</pre>

<p>
この場合、GNU <code>tar</code> (<code>gtar</code>) を展開に使用してください。
コンパイルずみのものが以下にあります：
<a href="http://www.mysql.com/downloads/os-solaris.html">http://www.mysql.com/downloads/os-solaris.html</a>.

</p>
<p>
Sun ネイティブスレッドは Solaris 2.5 以上で動きます。
バージョン 2.4 以下の場合、MySQL は時動的に MIT-pthreads を使用します
 「<a href="manual.ja_Installing.html#MIT-pthreads">2.3.6  MIT-pthreads に関して</a>」節参照.

</p>
<p>
もし、configure 時に、以下のエラーが出たなら：

</p>

<pre>checking for restartable system calls... configure: error can not run test
programs while cross compiling
</pre>

<p>
これはコンパイラーのインストールでなにかを間違っています!
この場合、あなたは、より新しいバージョンへコンパイラーをアップグレードすべきです。
以下の行を <code>config.cache</code> ファイルに追加することによって、
この問題を解決してもかまいません：

</p>

<pre>ac_cv_sys_restartable_syscalls=${ac_cv_sys_restartable_syscalls='no'}
</pre>

<p>
もしあなたが SPARC の Solaris を使用しているなら、
<code>gcc</code> 2.95.2 を推奨します。
これは <a href="ttp://gcc.gnu.org/">ttp://gcc.gnu.org/</a>. で見つけれます。
<code>egcs</code> 1.1.1 と <code>gcc</code> 2.8.1 は SPARC 上では完全に動作しないことに注意！

</p>
<p>
<code>gcc</code> 2.95.2 を使用した、推奨する <code>configure</code> は:

</p>

<pre>CC=gcc CFLAGS="-O3" \
CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti" \
./configure --prefix=/usr/local/mysql --with-low-memory --enable-assembler
</pre>

<p>
If you have an UltraSPARC, you can get 4% more performance by adding
"-mcpu=v8 -Wa,-xarch=v8plusa" to CFLAGS and CXXFLAGS.

</p>
<p>
If you have Sun's Forte 5.0 (or newer) compiler, you can
run <code>configure</code> like this:

</p>

<pre>CC=cc CFLAGS="-Xa -fast -native -xstrconst -mt" \
CXX=CC CXXFLAGS="-noex -mt" \
./configure --prefix=/usr/local/mysql --enable-assembler
</pre>

<p>
You can create a 64 bit binary with:

</p>

<pre>CC=cc CFLAGS="-Xa -fast -native -xstrconst -mt -xarch=v9" \
CXX=CC CXXFLAGS="-noex -mt -xarch=v9" ASFLAGS="-xarch=v9" \
./configure --prefix=/usr/local/mysql --enable-assembler
</pre>

<p>
In the MySQL benchmarks, we got a 4% speedup on an UltraSPARC when using
Forte 5.0 in 32 bit mode compared to using gcc 3.2 with -mcpu flags.

</p>
<p>
If you create a 64 bit binary, it's 4 % slower than the 32 bit binary, but
mysqld can instead handle more treads and memory.

</p>
<p>
If you get a problem with <code>fdatasync</code> or <code>sched_yield</code>,
you can fix this by adding <code>LIBS=-lrt</code> to the configure line

</p>
<p>
The following paragraph is only relevant for older compilers than
WorkShop 5.3:

</p>
<p>
You may also have to edit the <code>configure</code> script to change this line:

</p>

<pre>#if !defined(__STDC__) || __STDC__ != 1
</pre>

<p>
to this:

</p>

<pre>#if !defined(__STDC__)
</pre>

<p>
もし <code>-Xc</code> オプションで <code>__STDC__</code> を有効にした場合、
Sun compiler は Solaris の  <tt>`pthread.h'</tt> ヘッダーファイルを使用して
コンパイルすることができません。
これはサンのバグです(インクルードファイルかコンパイラーのバグ)

</p>
<p>
もし <code>mysqld</code> を起動時に以下のエラーが出た場合、
マルチスレッドを外して(オプション <code>-mt</code> を指定) Sun compiler を使って
 MySQL をコンパイルし直してください：

</p>

<pre>libc internal error: _rmutex_unlock: rmutex not held
</pre>

<p>
<code>-mt</code> を <code>CFLAGS</code> と <code>CXXFLAGS</code> に加えます。

</p>
<p>
If you are using the SFW version of gcc (which comes with Solaris 8),
you must add <tt>`/opt/sfw/lib'</tt> to the environment variable
<code>LD_LIBRARY_PATH</code> before running configure.

</p>
<p>
If you are using the gcc available from <code>sunfreeware.com</code>, you may
have many problems.  You should recompile gcc and GNU binutils on the
machine you will be running them from to avoid any problems.

</p>
<p>
If you get the following error when compiling MySQL with <code>gcc</code>,
it means that your <code>gcc</code> is not configured for your version of Solaris:

</p>

<pre>shell&gt; gcc -O3 -g -O2 -DDBUG_OFF  -o thr_alarm ...
./thr_alarm.c: In function `signal_hand':
./thr_alarm.c:556: too many arguments to function `sigwait'
</pre>

<p>
The proper thing to do in this case is to get the newest version of
<code>gcc</code> and compile it with your current <code>gcc</code> compiler!  At
least for Solaris 2.5, almost all binary versions of <code>gcc</code> have
old, unusable include files that will break all programs that use
threads (and possibly other programs)!

</p>
<p>
Solaris は スタテックリンクのシステムライブラリーを用意していません
(<code>libpthreads</code> and <code>libdl</code>)。
そのため、<code>--static</code> オプションで MySQL をコンパイルできません。
もしこれを試みた場合、以下のエラーになります：

</p>

<pre>ld: fatal: library -ldl: not found

or

undefined reference to `dlopen'

or

cannot find -lrt
</pre>

<p>
もし多くのプロセスが速く <code>mysqld</code> に接続を試みた場合、
 MySQL ログに以下のようにエラーが出ます:

</p>

<pre>Error in accept: Protocol error
</pre>

<p>
サーバーを <code>--set-variable back_log=50</code> オプションで起動すれば、この問題に対処できるでしょう。
Please note that <code>--set-variable</code> is
deprecated since MySQL 4.0, just use <code>--back_log=50</code> on its own.
 「<a href="manual.ja_MySQL_Database_Administration.html#Command-line_options">4.1.1  <code>mysqld</code> コマンド行オプション</a>」節参照.

</p>
<p>
もし自分の MySQL クライアントプログラムをリンクして
実行時に以下のようにエラーが出た場合：

</p>

<pre>ld.so.1: ./my: fatal: libmysqlclient.so.#:
open failed: No such file or directory
</pre>

<p>
これは以下のどれかで回避できます：

</p>

<ul>
<li>

以下のフラグでクライアントをリンクします(<code>-Lpath</code> の代わりに):
<code>-Wl,r/full-path-to-libmysqlclient.so</code>.

</li><li>

Copy <tt>`libmysqclient.so'</tt> to <tt>`/usr/lib'</tt>.

<a name="IDX344"></a>
<a name="IDX345"></a>
</li><li>

Add the pathname of the directory where <tt>`libmysqlclient.so'</tt> is located
to the <code>LD_RUN_PATH</code> environment variable before running your client.
</li></ul>

<p>
configure や MySQL が <code>-lz</code> のリンクを試み、あなたがそれを
インストールしていないという問題がある場合は、２つの選択肢があります:

</p>

<ul>
<li>

圧縮通信プロトコルを使用できるようにしたい場合、ftp.gnu.org から zlib を
入手してインストールする必要があります。

</li><li>

<code>--with-named-z-libs=no</code> をつけて configure を行ないます。
</li></ul>

<p>
If you are using gcc and have problems with loading <code>UDF</code> functions
into MySQL, try adding <code>-lgcc</code> to the link line for the
<code>UDF</code> function.

</p>
<p>
MySQL を自動的に開始させたい場合、
<tt>`support-files/mysql.server'</tt> を <tt>`/etc/init.d'</tt> にコピーし、
<code>/etc/rc3.d/S99mysql.server</code> という名前でシンボリックリンクを生成し
てください。

</p>
<p>
As Solaris doesn't support core files for <code>setuid()</code> applications,
you can't get a core file from <code>mysqld</code> if you are using the
<code>--user</code> option.

</p>



<h4><a name="Solaris_2.7" href="manual.ja_toc.html#Solaris_2.7">2.6.3.1  Solaris 2.7/2.8 Notes</a></h4>

<p>
通常、Solaris 2.6 のバイナリは Solaris 7 , 8 で使用できます。
ほとんどの Solaris 2.6 の問題も Solaris 7 , 8 に適用できます。

</p>
<p>
注意: MySQL Version 3.23.4 以上では、新しいバージョンの Solaris を自動
検出し、以下の問題についての回避策を有効にします！

</p>
<p>
Solaris 7 , 8 は、インクルードファイルにいくつかバグがあります。
<code>gcc</code> で以下のようなエラーが出た場合：

</p>

<pre>/usr/include/widec.h:42: warning: `getwc' redefined
/usr/include/wchar.h:326: warning: this is the location of the previous
definition
</pre>

<p>
以下のようにして回避します：

</p>
<p>
<code>/usr/include/widec.h</code> を <code>.../lib/gcc-lib/os/gcc-version/include</code> にコピー
41 行目を変更:

</p>

<pre>変更前：
#if     !defined(lint) &amp;&amp; !defined(__lint)

変更後：

#if     !defined(lint) &amp;&amp; !defined(__lint) &amp;&amp; !defined(getwc)
</pre>

<p>
代わりに、<tt>`/usr/include/widec.h'</tt> を直接変更してもかまいません。
どちらの方法にしても、ファイルを修正後は、<tt>`config.cache'</tt> を
消して <code>configure</code> を再実行しなくてはなりません！

</p>
<p>
<code>make</code> 実行時に以下のようなエラーになった場合、<code>configure</code> が
 <tt>`curses.h'</tt> ファイルを検出できていません (これは <code>/usr/include/widec.h</code> の
エラーのためにおきます):

</p>

<pre>In file included from mysql.cc:50:
/usr/include/term.h:1060: syntax error before `,'
/usr/include/term.h:1081: syntax error before `;'
</pre>

<p>
これを解決するには、以下のうち一つを行います：

</p>

<ul>
<li>

Configure with <code>CFLAGS=-DHAVE_CURSES_H CXXFLAGS=-DHAVE_CURSES_H ./configure</code>.

</li><li>

前述したとおり、<tt>`/usr/include/widec.h'</tt> を修正し、configure を再実行します。

</li><li>

<code>#define HAVE_TERM</code> 行を <tt>`config.h'</tt> ファイルから消し、
<code>make</code> を再実行します。
</li></ul>

<p>
クライアントプログラムのリンク時に、リンカが <code>-lz</code> を見つけられない
という問題が発生した場合、問題はおそらく <tt>`libz.so'</tt> ファイルが 
<tt>`/usr/local/lib'</tt> にインストールされたことです。次の方法の一つでこれ
を修正できます:

</p>

<ul>
<li>

<code>LD_LIBRARY_PATH</code> に <tt>`/usr/local/lib'</tt> を追加

</li><li>

<code>/lib</code> から <code>libz.so</code> へのリンクを追加

</li><li>

Solaris 8 を使用している場合、Solaris 8 CD ディストリビューションからオ
プションの zlib をインストール可能。

</li><li>

<code>--with-named-z-libs=no</code> オプション付きで MySQL を 
configure する。
</li></ul>



<h4><a name="Solaris_x86" href="manual.ja_toc.html#Solaris_x86">2.6.3.2  Solaris x86 Notes</a></h4>

<p>
On Solaris 2.8 on x86, <code>mysqld</code> will core dump if you run
'strip' in.
（訳注： GNU binutils を Sun 上で使用すると、CPU, version にかかわらず、
  この現象に遭遇します。その場合は、/usr/ccs/bin/ の方を使います。）

</p>
<p>
<code>gcc</code> か <code>egcs</code> を Solaris x86 で使用した場合、load 時にコアダンプする場合、
以下のように <code>configure</code> します:

</p>

<pre>CC=gcc CFLAGS="-O3 -fomit-frame-pointer -DHAVE_CURSES_H" \
CXX=gcc \
CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors -fno-exceptions \
-fno-rtti -DHAVE_CURSES_H" \
./configure --prefix=/usr/local/mysql
</pre>

<p>
これは <code>libstdc++</code> ライブラリーと C++ の問題を回避します。

</p>
<p>
もしこれが該当しない場合、デバッグモードでコンパイルして
デバッグのトレースファイルを書き出すようにして起動するか、
<code>gdb</code> を使用して起動してください.   「<a href="manual.ja_Porting.html#Using_gdb_on_mysqld">E.1.3  Debugging mysqld under gdb</a>」節参照.

</p>



<h3><a name="BSD_Notes" href="manual.ja_toc.html#BSD_Notes">2.6.4  BSD Notes</a></h3>

<p>
This section provides information for the various BSD flavours,
as well as specific versions within those.

</p>



<h4><a name="FreeBSD" href="manual.ja_toc.html#FreeBSD">2.6.4.1  FreeBSD Notes</a></h4>

<p>
FreeBSD 3.x is recommended for running MySQL since the thread package
is much more integrated.

</p>
<p>
The easiest and therefore the preferred way to install is to use the
mysql-server and mysql-client ports available on
<a href="http://www.freebsd.org/">http://www.freebsd.org/</a>.

</p>
<p>
Using these gives you:

</p><ul>
<li>

A working MySQL with all optimisations known to work on your version
of FreeBSD enabled.

</li><li>

Automatic configuration and build.

</li><li>

Startup scripts installed in /usr/local/etc/rc.d.

</li><li>

Ability to see which files that are installed with pkg_info -L. And to
remove them all with pkg_delete if you no longer want MySQL on that
machine.
</li></ul>

<p>
It is recommended you use MIT-pthreads on FreeBSD 2.x and native threads on
Versions 3 and up. It is possible to run with  native threads on some late
2.2.x versions but you may encounter problems shutting down <code>mysqld</code>.

</p>
<p>
The MySQL <tt>`Makefile'</tt>s require GNU make (<code>gmake</code>) to work.  If
you want to compile MySQL you need to install GNU <code>make</code> first.

</p>
<p>
Be sure to have your name resolver setup correct.  Otherwise, you may
experience resolver delays or failures when connecting to <code>mysqld</code>.

</p>
<p>
Make sure that the <code>localhost</code> entry in the <tt>`/etc/hosts'</tt> file is
correct (otherwise, you will have problems connecting to the database).  The
<tt>`/etc/hosts'</tt> file should start with a line:

</p>

<pre>127.0.0.1       localhost localhost.your.domain
</pre>

<p>
The recommended way to compile and install MySQL on FreeBSD with
gcc (2.95.2 and up) is:

</p>

<pre>CC=gcc CFLAGS="-O2 -fno-strength-reduce" \
CXX=gcc CXXFLAGS="-O2 -fno-rtti -fno-exceptions -felide-constructors \
-fno-strength-reduce" \
./configure --prefix=/usr/local/mysql --enable-assembler
gmake
gmake install
./scripts/mysql_install_db
cd /usr/local/mysql
./bin/mysqld_safe &amp;
</pre>

<p>
If you notice that <code>configure</code> will use MIT-pthreads, you should read
the MIT-pthreads notes.   「<a href="manual.ja_Installing.html#MIT-pthreads">2.3.6  MIT-pthreads に関して</a>」節参照.

</p>
<p>
If you get an error from <code>make install</code> that it can't find
<tt>`/usr/include/pthreads'</tt>, <code>configure</code> didn't detect that you need
MIT-pthreads.  This is fixed by executing these commands:

</p>

<pre>shell&gt; rm config.cache
shell&gt; ./configure --with-mit-threads
</pre>

<p>
FreeBSD is also known to have a very low default file handle limit.
 「<a href="manual.ja_Problems.html#Not_enough_file_handles">A.2.16  File Not Found</a>」節参照.  Uncomment the ulimit -n section in
safe_mysqld or raise the limits for the <code>mysqld</code> user in /etc/login.conf
(and rebuild it with cap_mkdb /etc/login.conf).  Also be sure you set the
appropriate class for this user in the password file if you are not
using the default (use: chpass mysqld-user-name).   「<a href="manual.ja_MySQL_Database_Administration.html#safe_mysqld">4.7.2  <code>safe_mysqld</code>, The Wrapper Around <code>mysqld</code></a>」節参照.

</p>
<p>
If you have a lot of memory you should consider rebuilding
the kernel to allow MySQL to take more than 512M of RAM.
Take a look at <code>option MAXDSIZ</code> in the LINT config
file for more info.

</p>
<p>
If you get problems with the current date in MySQL, setting the
<code>TZ</code> variable will probably help.   「<a href="manual.ja_Environment_variables.html#Environment_variables">F  Environment Variables</a>」節参照.

</p>
<p>
To get a secure and stable system you should only use FreeBSD kernels
that are marked <code>-RELEASE</code>.

</p>



<h4><a name="NetBSD" href="manual.ja_toc.html#NetBSD">2.6.4.2  NetBSD notes</a></h4>

<p>
To compile on NetBSD you need GNU <code>make</code>. Otherwise, the compile will
crash when <code>make</code> tries to run <code>lint</code> on C++ files.

</p>



<h4><a name="OpenBSD" href="manual.ja_toc.html#OpenBSD">2.6.4.3  OpenBSD 2.5 Notes</a></h4>

<p>
On OpenBSD Version 2.5, you can compile MySQL with native threads
with the following options:

</p>

<pre>CFLAGS=-pthread CXXFLAGS=-pthread ./configure --with-mit-threads=no
</pre>



<h4><a name="OpenBSD_2.8" href="manual.ja_toc.html#OpenBSD_2.8">2.6.4.4  OpenBSD 2.8 Notes</a></h4>

<p>
Our users have reported that OpenBSD 2.8 has a threading bug which causes
problems with MySQL.  The OpenBSD Developers have fixed the problem,
but as of January 25th, 2001, it's only available in the ``-current'' branch.
The symptoms of this threading bug are: slow response, high load, high CPU
usage, and crashes.

</p>
<p>
If you get an error like <code>Error in accept:: Bad file descriptor</code> or
error 9 when trying to open tables or directories, the problem is probably
that you haven't allocated enough file descriptors for MySQL.

</p>
<p>
In this case try starting <code>safe_mysqld</code> as root with the following
options:

</p>
<p>
<code>--user=mysql --open-files-limit=2048</code>

</p>


<h4><a name="BSDI" href="manual.ja_toc.html#BSDI">2.6.4.5  BSD/OS Version 2.x Notes</a></h4>

<p>
If you get the following error when compiling MySQL, your
<code>ulimit</code> value for virtual memory is too low:

</p>

<pre>item_func.h: In method `Item_func_ge::Item_func_ge(const Item_func_ge &amp;)':
item_func.h:28: virtual memory exhausted
make[2]: *** [item_func.o] Error 1
</pre>

<p>
Try using <code>ulimit -v 80000</code> and run <code>make</code> again.  If this
doesn't work and you are using <code>bash</code>, try switching to <code>csh</code>
or <code>sh</code>; some BSDI users have reported problems with <code>bash</code>
and <code>ulimit</code>.

</p>
<p>
If you are using <code>gcc</code>, you may also use have to use the
<code>--with-low-memory</code> flag for <code>configure</code> to be able to compile
<tt>`sql_yacc.cc'</tt>.

</p>
<p>
If you get problems with the current date in MySQL, setting the
<code>TZ</code> variable will probably help.   「<a href="manual.ja_Environment_variables.html#Environment_variables">F  Environment Variables</a>」節参照.

</p>



<h4><a name="BSDI3" href="manual.ja_toc.html#BSDI3">2.6.4.6  BSD/OS Version 3.x Notes</a></h4>

<p>
Upgrade to BSD/OS Version 3.1.  If that is not possible, install
BSDIpatch M300-038.

</p>
<p>
Use the following command when configuring MySQL:

</p>

<pre>shell&gt; env CXX=shlicc++ CC=shlicc2 \
       ./configure \
           --prefix=/usr/local/mysql \
           --localstatedir=/var/mysql \
           --without-perl \
           --with-unix-socket-path=/var/mysql/mysql.sock
</pre>

<p>
The following is also known to work:

</p>

<pre>shell&gt; env CC=gcc CXX=gcc CXXFLAGS=-O3 \
       ./configure \
           --prefix=/usr/local/mysql \
           --with-unix-socket-path=/var/mysql/mysql.sock
</pre>

<p>
You can change the directory locations if you wish, or just use the
defaults by not specifying any locations.

</p>
<p>
If you have problems with performance under heavy load, try using the
<code>--skip-thread-priority</code> option to <code>mysqld</code>!  This will run
all threads with the same priority; on BSDI Version 3.1, this gives better
performance (at least until BSDI fixes their thread scheduler).

</p>
<p>
If you get the error <code>virtual memory exhausted</code> while compiling,
you should try using <code>ulimit -v 80000</code> and run <code>make</code> again.
If this doesn't work and you are using <code>bash</code>, try switching to
<code>csh</code> or <code>sh</code>; some BSDI users have reported problems with
<code>bash</code> and <code>ulimit</code>.

</p>



<h4><a name="BSDI4" href="manual.ja_toc.html#BSDI4">2.6.4.7  BSD/OS Version 4.x Notes</a></h4>

<p>
BSDI Version 4.x has some thread-related bugs.  If you want to use
MySQL on this, you should install all thread-related patches.  At
least M400-023 should be installed.

</p>
<p>
On some BSDI Version 4.x systems, you may get problems with shared libraries.
The symptom is that you can't execute any client programs, for example,
<code>mysqladmin</code>.  In this case you need to reconfigure not to use
shared libraries with the <code>--disable-shared</code> option to configure.

</p>
<p>
Some customers have had problems on BSDI 4.0.1 that the <code>mysqld</code>
binary after a while can't open tables.  This is because some
library/system related bug causes <code>mysqld</code> to change current
directory without asking for this!

</p>
<p>
The fix is to either upgrade to 3.23.34 or after running <code>configure</code>
remove the line <code>#define HAVE_REALPATH</code> from <code>config.h</code>
before running make.

</p>
<p>
Note that the above means that you can't symbolic link a database directories
to another database directory or symbolic link a table to another database
on BSDI!  (Making a symbolic link to another disk is okay).

</p>



<h3><a name="Mac_OS_X" href="manual.ja_toc.html#Mac_OS_X">2.6.5  Mac OS X Notes</a></h3>



<h4><a name="Mac_OS_X_Public_Beta" href="manual.ja_toc.html#Mac_OS_X_Public_Beta">2.6.5.1  Mac OS X Public Beta</a></h4>

<p>
MySQL should work without any problems on Mac OS X Public Beta
(Darwin).  You don't need the pthread patches for this OS!

</p>



<h4><a name="Mac_OS_X_Server" href="manual.ja_toc.html#Mac_OS_X_Server">2.6.5.2  Mac OS X Server</a></h4>

<p>
Before trying to configure MySQL on Mac OS X server you must
first install the pthread package from
<a href="http://www.prnet.de/RegEx/mysql.html">http://www.prnet.de/RegEx/mysql.html</a>.

</p>
<p>
Our binary for Mac OS X is compiled on Darwin 6.3 with the following
configure line:

</p>

<pre>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc \
CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors \
-fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql \
--with-extra-charsets=complex --enable-thread-safe-client \
--enable-local-infile --disable-shared
</pre>

<p>
You might want to also add aliases to your shell's resource file to
access <code>mysql</code> and <code>mysqladmin</code> from the command-line:

</p>

<pre>alias mysql '/usr/local/mysql/bin/mysql'
alias mysqladmin '/usr/local/mysql/bin/mysqladmin'
</pre>

<p>
Alternatively, you could simply add <code>/usr/local/mysql/bin</code> to
your <code>PATH</code> environment variable, e.g. by adding the following
to <tt>`$HOME/.tcshrc'</tt>:

</p>

<pre>setenv PATH $PATH:/usr/local/bin
</pre>



<h3><a name="Other_Unix_Notes" href="manual.ja_toc.html#Other_Unix_Notes">2.6.6  Other Unix Notes</a></h3>



<h4><a name="Binary_notes-HP-UX" href="manual.ja_toc.html#Binary_notes-HP-UX">2.6.6.1  HP-UX Notes for Binary Distributions</a></h4>

<p>
<a name="IDX346"></a>
<a name="IDX347"></a>

</p>
<p>
Some of the binary distributions of MySQL for HP-UX are
distributed as an HP depot file and as a tar file.  To use the depot
file you must be running at least HP-UX 10.x to have access to HP's
software depot tools.

</p>
<p>
The HP version of MySQL was compiled on an HP 9000/8xx server
under HP-UX 10.20, and uses MIT-pthreads.  It is known to work well under
this configuration.  MySQL Version 3.22.26 and newer can also be
built with HP's native thread package.

</p>
<p>
Other configurations that may work:

</p>

<ul>
<li>

HP 9000/7xx running HP-UX 10.20+
</li><li>

HP 9000/8xx running HP-UX 10.30
</li></ul>

<p>
The following configurations almost definitely won't work:

</p>

<ul>
<li>

HP 9000/7xx or 8xx running HP-UX 10.x where x &lt; 2
</li><li>

HP 9000/7xx or 8xx running HP-UX 9.x
</li></ul>

<p>
To install the distribution, use one of the commands here, where
<code>/path/to/depot</code> is the full pathname of the depot file:

</p>

<ul>
<li>

To install everything, including the server, client and development tools:


<pre>shell&gt; /usr/sbin/swinstall -s /path/to/depot mysql.full
</pre>

</li><li>

To install only the server:


<pre>shell&gt; /usr/sbin/swinstall -s /path/to/depot mysql.server
</pre>

</li><li>

To install only the client package:


<pre>shell&gt; /usr/sbin/swinstall -s /path/to/depot mysql.client
</pre>

</li><li>

To install only the development tools:


<pre>shell&gt; /usr/sbin/swinstall -s /path/to/depot mysql.developer
</pre>

</li></ul>

<p>
The depot places binaries and libraries in <tt>`/opt/mysql'</tt> and data in
<tt>`/var/opt/mysql'</tt>. The depot also creates the appropriate entries in
<tt>`/etc/init.d'</tt> and <tt>`/etc/rc2.d'</tt> to start the server automatically
at boot time.  Obviously, this entails being <code>root</code> to install.

</p>
<p>
To install the HP-UX tar.gz distribution, you must have a copy of GNU
<code>tar</code>.

</p>



<h4><a name="HP-UX_10.20" href="manual.ja_toc.html#HP-UX_10.20">2.6.6.2  HP-UX Version 10.20 Notes</a></h4>

<p>
There are a couple of small problems when compiling MySQL on
HP-UX.  We recommend that you use <code>gcc</code> instead of the HP-UX native
compiler, because <code>gcc</code> produces better code!

</p>
<p>
We recommend using gcc 2.95 on HP-UX.  Don't use high optimisation
flags (like -O6) as this may not be safe on HP-UX.

</p>
<p>
The following configure line should work with gcc 2.95:

</p>

<pre>CFLAGS="-I/opt/dce/include -fpic" \
CXXFLAGS="-I/opt/dce/include -felide-constructors -fno-exceptions \
-fno-rtti" CXX=gcc ./configure --with-pthread \
--with-named-thread-libs='-ldce' --prefix=/usr/local/mysql --disable-shared
</pre>

<p>
The following configure line should work with gcc 3.1:

</p>

<pre>CFLAGS="-DHPUX -I/opt/dce/include -O3 -fPIC" CXX=gcc \
CXXFLAGS="-DHPUX -I/opt/dce/include -felide-constructors -fno-exceptions \
-fno-rtti -O3 -fPIC" ./configure --prefix=/usr/local/mysql \
--with-extra-charsets=complex --enable-thread-safe-client \
--enable-local-infile  --with-pthread \
--with-named-thread-libs=-ldce --with-lib-ccflags=-fPIC
--disable-shared
</pre>



<h4><a name="HP-UX_11.x" href="manual.ja_toc.html#HP-UX_11.x">2.6.6.3  HP-UX Version 11.x Notes</a></h4>

<p>
For HP-UX Version 11.x we recommend MySQL Version 3.23.15 or later.

</p>
<p>
Because of some critical bugs in the standard HP-UX libraries, you should
install the following patches before trying to run MySQL on HP-UX 11.0:

</p>

<pre>PHKL_22840 Streams cumulative
PHNE_22397 ARPA cumulative
</pre>

<p>
This will solve the problem of getting <code>EWOULDBLOCK</code> from <code>recv()</code>
and <code>EBADF</code> from <code>accept()</code> in threaded applications.

</p>
<p>
If you are using <code>gcc</code> 2.95.1 on an unpatched HP-UX 11.x system,
you will get the error:

</p>

<pre>In file included from /usr/include/unistd.h:11,
                 from ../include/global.h:125,
                 from mysql_priv.h:15,
                 from item.cc:19:
/usr/include/sys/unistd.h:184: declaration of C function ...
/usr/include/sys/pthread.h:440: previous declaration ...
In file included from item.h:306,
                 from mysql_priv.h:158,
                 from item.cc:19:
</pre>

<p>
The problem is that HP-UX doesn't define <code>pthreads_atfork()</code> consistently.
It has conflicting prototypes in
<tt>`/usr/include/sys/unistd.h'</tt>:184 and
<tt>`/usr/include/sys/pthread.h'</tt>:440 (details below).

</p>
<p>
One solution is to copy <tt>`/usr/include/sys/unistd.h'</tt> into
<tt>`mysql/include'</tt> and edit <tt>`unistd.h'</tt> and change it to match
the definition in <tt>`pthread.h'</tt>.  Here's the diff:

</p>

<pre>183,184c183,184
&lt;      extern int pthread_atfork(void (*prepare)(), void (*parent)(),
&lt;                                                void (*child)());
---
&gt;      extern int pthread_atfork(void (*prepare)(void), void (*parent)(void),
&gt;                                                void (*child)(void));
</pre>

<p>
After this, the following configure line should work:

</p>

<pre>CFLAGS="-fomit-frame-pointer -O3 -fpic" CXX=gcc \
CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti -O3" \
./configure --prefix=/usr/local/mysql --disable-shared
</pre>

<p>
If you are using MySQL 4.0.5 with the HP-UX compiler you can use:
(tested with cc B.11.11.04):

</p>

<pre>CC=cc CXX=aCC CFLAGS=+DD64 CXXFLAGS=+DD64 ./configure --with-extra-character-set=complex
</pre>

<p>
You can ignore any errors of the following type:

</p>

<pre>aCC: warning 901: unknown option: `-3': use +help for online documentation
</pre>

<p>
If you get the following error from <code>configure</code>

</p>

<pre>checking for cc option to accept ANSI C... no
configure: error: MySQL requires a ANSI C compiler (and a C++ compiler).
Try gcc. See the Installation chapter in the Reference Manual.
</pre>

<p>
Check that you don't have the path to the K&amp;R compiler before the path
to the HP-UX C and C++ compiler.

</p>
<p>
Another reason for not beeing able to compile is that you didn't define
the <code>+DD64</code> flags above.

</p>


<h4><a name="IBM-AIX" href="manual.ja_toc.html#IBM-AIX">2.6.6.4  IBM-AIX notes</a></h4>

<p>
<a name="IDX348"></a>

</p>
<p>
Automatic detection of <code>xlC</code> is missing from Autoconf, so a
<code>configure</code> command something like this is needed when compiling
MySQL (This example uses the IBM compiler):

</p>

<pre>export CC="xlc_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192 "
export CXX="xlC_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192"
export CFLAGS="-I /usr/local/include"
export LDFLAGS="-L /usr/local/lib"
export CPPFLAGS=$CFLAGS
export CXXFLAGS=$CFLAGS

./configure --prefix=/usr/local \
		--localstatedir=/var/mysql \
		--sysconfdir=/etc/mysql \
		--sbindir='/usr/local/bin' \
		--libexecdir='/usr/local/bin' \
		--enable-thread-safe-client \
		--enable-large-files
</pre>

<p>
Above are the options used to compile the MySQL distribution that
can be found at <a href="http://www-frec.bull.com/">http://www-frec.bull.com/</a>.

</p>
<p>
If you change the <code>-O3</code> to <code>-O2</code> in the above configure line,
you must also remove the <code>-qstrict</code> option (this is a limitation in
the IBM C compiler).

</p>
<p>
If you are using <code>gcc</code> or <code>egcs</code> to compile MySQL, you
<strong>must</strong> use the <code>-fno-exceptions</code> flag, as the exception
handling in <code>gcc</code>/<code>egcs</code> is not thread-safe!  (This is tested with
<code>egcs</code> 1.1.)  There are also some known problems with IBM's assembler,
which may cause it to generate bad code when used with gcc.

</p>
<p>
We recommend the following <code>configure</code> line with <code>egcs</code> and
<code>gcc 2.95</code> on AIX:

</p>

<pre>CC="gcc -pipe -mcpu=power -Wa,-many" \
CXX="gcc -pipe -mcpu=power -Wa,-many" \
CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti" \
./configure --prefix=/usr/local/mysql --with-low-memory
</pre>

<p>
The <code>-Wa,-many</code> is necessary for the compile to be successful.  IBM is
aware of this problem but is in to hurry to fix it because of the workaround
available.  We don't know if the <code>-fno-exceptions</code> is required with
<code>gcc 2.95</code>, but as MySQL doesn't use exceptions and the above
option generates faster code, we recommend that you should always use this
option with <code>egcs / gcc</code>.

</p>
<p>
If you get a problem with assembler code try changing the -mcpu=xxx to
match your CPU. Typically power2, power, or powerpc may need to be used,
alternatively you might need to use 604 or 604e. I'm not positive but I
would think using "power" would likely be safe most of the time, even on
a power2 machine.

</p>
<p>
If you don't know what your CPU is then do a "uname -m", this will give
you back a string that looks like "000514676700", with a format of
xxyyyyyymmss where xx and ss are always 0's, yyyyyy is a unique system
id and mm is the id of the CPU Planar. A chart of these values can be
found at
<a href="http://publib.boulder.ibm.com/doc_link/en_US/a_doc_lib/cmds/aixcmds5/uname.htm">http://publib.boulder.ibm.com/doc_link/en_US/a_doc_lib/cmds/aixcmds5/uname.htm</a>.
This will give you a machine type and a machine model you can use to
determine what type of CPU you have.

</p>
<p>
If you have problems with signals (MySQL dies unexpectedly
under high load) you may have found an OS bug with threads and
signals.  In this case you can tell MySQL not to use signals by
configuring with:

</p>

<pre>shell&gt; CFLAGS=-DDONT_USE_THR_ALARM CXX=gcc \
       CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti \
       -DDONT_USE_THR_ALARM" \
       ./configure --prefix=/usr/local/mysql --with-debug --with-low-memory
</pre>

<p>
This doesn't affect the performance of MySQL, but has the side
effect that you can't kill clients that are ``sleeping'' on a connection with
<code>mysqladmin kill</code> or <code>mysqladmin shutdown</code>.  Instead, the client
will die when it issues its next command.

</p>
<p>
On some versions of AIX, linking with <code>libbind.a</code> makes
<code>getservbyname</code> core dump.  This is an AIX bug and should be reported
to IBM.

</p>
<p>
For AIX 4.2.1 and gcc you have to do the following changes.

</p>
<p>
After configuring, edit <tt>`config.h'</tt> and <tt>`include/my_config.h'</tt>
and change the line that says

</p>

<pre>#define HAVE_SNPRINTF 1
</pre>

<p>
to

</p>

<pre>#undef HAVE_SNPRINTF
</pre>

<p>
And finally, in <tt>`mysqld.cc'</tt> you need to add a prototype for initgoups.

</p>

<pre>#ifdef _AIX41
extern "C" int initgroups(const char *,int);
#endif
</pre>

<p>
If you need to allocate a lot of memory to the mysqld process, it's not
enough to just set 'ulimit -d unlimited'. You may also have to set
in <code>mysqld_safe</code> something like:

</p>

<pre>export LDR_CNTRL='MAXDATA=0x80000000'
</pre>

<p>
You can find more about using a lot of memory at:
<a href="http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm">http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm</a>.

</p>


<h4><a name="SunOS" href="manual.ja_toc.html#SunOS">2.6.6.5  SunOS 4 Notes</a></h4>

<p>
On SunOS 4, MIT-pthreads is needed to compile MySQL, which in turn
means you will need GNU <code>make</code>.

</p>
<p>
Some SunOS 4 systems have problems with dynamic libraries and <code>libtool</code>.
You can use the following <code>configure</code> line to avoid this problem:

</p>

<pre>shell&gt; ./configure --disable-shared --with-mysqld-ldflags=-all-static
</pre>

<p>
When compiling <code>readline</code>, you may get warnings about duplicate defines.
These may be ignored.

</p>
<p>
When compiling <code>mysqld</code>, there will be some <code>implicit declaration
of function</code> warnings. These may be ignored.

</p>



<h4><a name="Alpha-DEC-UNIX" href="manual.ja_toc.html#Alpha-DEC-UNIX">2.6.6.6  Alpha-DEC-UNIX Notes (Tru64)</a></h4>

<p>
If you are using egcs 1.1.2 on Digital Unix, you should upgrade to gcc
2.95.2, as egcs on DEC has some serious bugs!

</p>
<p>
When compiling threaded programs under Digital Unix, the documentation
recommends using the <code>-pthread</code> option for <code>cc</code> and <code>cxx</code> and
the libraries <code>-lmach -lexc</code> (in addition to <code>-lpthread</code>).  You
should run <code>configure</code> something like this:

</p>

<pre>CC="cc -pthread" CXX="cxx -pthread -O" \
./configure --with-named-thread-libs="-lpthread -lmach -lexc -lc"
</pre>

<p>
When compiling <code>mysqld</code>, you may see a couple of warnings like this:

</p>

<pre>mysqld.cc: In function void handle_connections()':
mysqld.cc:626: passing long unsigned int *' as argument 3 of
accept(int,sockadddr *, int *)'
</pre>

<p>
You can safely ignore these warnings.  They occur because <code>configure</code>
can detect only errors, not warnings.

</p>
<p>
If you start the server directly from the command-line, you may have problems
with it dying when you log out.  (When you log out, your outstanding processes
receive a <code>SIGHUP</code> signal.)  If so, try starting the server like this:

</p>

<pre>shell&gt; nohup mysqld [options] &amp;
</pre>

<p>
<code>nohup</code> causes the command following it to ignore any <code>SIGHUP</code>
signal sent from the terminal.  Alternatively, start the server by running
<code>safe_mysqld</code>, which invokes <code>mysqld</code> using <code>nohup</code> for you.
 「<a href="manual.ja_MySQL_Database_Administration.html#safe_mysqld">4.7.2  <code>safe_mysqld</code>, The Wrapper Around <code>mysqld</code></a>」節参照.

</p>
<p>
If you get a problem when compiling mysys/get_opt.c, just remove the
line #define _NO_PROTO from the start of that file!

</p>
<p>
If you are using Compac's CC compiler, the following configure line should
work:

</p>

<pre>CC="cc -pthread"
CFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed all -arch host"
CXX="cxx -pthread"
CXXFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed all -arch host \
-noexceptions -nortti"
export CC CFLAGS CXX CXXFLAGS
./configure \
--prefix=/usr/local/mysql \
--with-low-memory \
--enable-large-files \
--enable-shared=yes \
--with-named-thread-libs="-lpthread -lmach -lexc -lc"
gnumake
</pre>

<p>
If you get a problem with libtool, when compiling with shared libraries
as above, when linking <code>mysql</code>, you should be able to get around
this by issuing:

</p>

<pre>cd mysql
/bin/sh ../libtool --mode=link cxx -pthread  -O3 -DDBUG_OFF \
-O4 -ansi_alias -ansi_args -fast -inline speed \
-speculate all \ -arch host  -DUNDEF_HAVE_GETHOSTBYNAME_R \
-o mysql  mysql.o readline.o sql_string.o completion_hash.o \
../readline/libreadline.a -lcurses \
../libmysql/.libs/libmysqlclient.so  -lm
cd ..
gnumake
gnumake install
scripts/mysql_install_db
</pre>



<h4><a name="Alpha-DEC-OSF1" href="manual.ja_toc.html#Alpha-DEC-OSF1">2.6.6.7  Alpha-DEC-OSF/1 Notes</a></h4>

<p>
If you have problems compiling and have DEC <code>CC</code> and <code>gcc</code>
installed, try running <code>configure</code> like this:

</p>

<pre>CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql
</pre>

<p>
If you get problems with the <tt>`c_asm.h'</tt> file, you can create and use
a 'dummy' <tt>`c_asm.h'</tt> file with:

</p>

<pre>touch include/c_asm.h
CC=gcc CFLAGS=-I./include \
CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql
</pre>

<p>
Note that the following problems with the <code>ld</code> program can be fixed
by downloading the latest DEC (Compaq) patch kit from:
<a href="http://ftp.support.compaq.com/public/unix/">http://ftp.support.compaq.com/public/unix/</a>.

</p>
<p>
On OSF/1 V4.0D and compiler "DEC C V5.6-071 on Digital Unix V4.0 (Rev. 878)"
the compiler had some strange behaviour (undefined <code>asm</code> symbols).
<code>/bin/ld</code> also appears to be broken (problems with <code>_exit
undefined</code> errors occuring while linking <code>mysqld</code>).  On this system, we
have managed to compile MySQL with the following <code>configure</code>
line, after replacing <code>/bin/ld</code> with the version from OSF 4.0C:

</p>

<pre>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
</pre>

<p>
With the Digital compiler "C++ V6.1-029", the following should work:

</p>

<pre>CC=cc -pthread
CFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all \
       -arch host
CXX=cxx -pthread
CXXFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all \
          -arch host -noexceptions -nortti
export CC CFLAGS CXX CXXFLAGS
./configure --prefix=/usr/mysql/mysql --with-mysqld-ldflags=-all-static \
            --disable-shared --with-named-thread-libs="-lmach -lexc -lc"
</pre>

<p>
In some versions of OSF/1, the <code>alloca()</code> function is broken. Fix
this by removing the line in <tt>`config.h'</tt> that defines <code>'HAVE_ALLOCA'</code>.

</p>
<p>
The <code>alloca()</code> function also may have an incorrect prototype in
<code>/usr/include/alloca.h</code>.  This warning resulting from this can be ignored.

</p>
<p>
<code>configure</code> will use the following thread libraries automatically:
<code>--with-named-thread-libs="-lpthread -lmach -lexc -lc"</code>.

</p>
<p>
When using <code>gcc</code>, you can also try running <code>configure</code> like this:

</p>

<pre>shell&gt; CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ...
</pre>

<p>
If you have problems with signals (MySQL dies unexpectedly
under high load), you may have found an OS bug with threads and
signals. In this case you can tell MySQL not to use signals by
configuring with:

</p>

<pre>shell&gt; CFLAGS=-DDONT_USE_THR_ALARM \
       CXXFLAGS=-DDONT_USE_THR_ALARM \
       ./configure ...
</pre>

<p>
This doesn't affect the performance of MySQL, but has the side
effect that you can't kill clients that are ``sleeping'' on a connection with
<code>mysqladmin kill</code> or <code>mysqladmin shutdown</code>.  Instead, the client
will die when it issues its next command.

</p>
<p>
With <code>gcc</code> 2.95.2, you will probably run into the following compile error:

</p>

<pre>sql_acl.cc:1456: Internal compiler error in `scan_region', at except.c:2566
Please submit a full bug report.
</pre>

<p>
To fix this you should change to the <code>sql</code> directory and do a ``cut
and paste'' of the last <code>gcc</code> line, but change <code>-O3</code> to
<code>-O0</code> (or add <code>-O0</code> immediately after <code>gcc</code> if you don't
have any <code>-O</code> option on your compile line).  After this is done you
can just change back to the top-level directly and run <code>make</code>
again.

</p>



<h4><a name="SGI-Irix" href="manual.ja_toc.html#SGI-Irix">2.6.6.8  SGI Irix Notes</a></h4>

<p>
If you are using Irix Version 6.5.3 or newer <code>mysqld</code> will only be able to
create threads if you run it as a user with <code>CAP_SCHED_MGT</code>
privileges (like <code>root</code>) or give the <code>mysqld</code> server this privilege
with the following shell command:

</p>

<pre>shell&gt; chcap "CAP_SCHED_MGT+epi" /opt/mysql/libexec/mysqld
</pre>

<p>
You may have to undefine some things in <tt>`config.h'</tt> after running
<code>configure</code> and before compiling.

</p>
<p>
In some Irix implementations, the <code>alloca()</code> function is broken.  If the
<code>mysqld</code> server dies on some <code>SELECT</code> statements, remove the lines
from <tt>`config.h'</tt> that define <code>HAVE_ALLOC</code> and <code>HAVE_ALLOCA_H</code>.
If <code>mysqladmin create</code> doesn't work, remove the line from <tt>`config.h'</tt>
that defines <code>HAVE_READDIR_R</code>.  You may have to remove the
<code>HAVE_TERM_H</code> line as well.

</p>
<p>
SGI recommends that you install all of the patches on this page as a set:
<a href="http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html">http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html</a>

</p>
<p>
At the very minimum, you should install the latest kernel rollup, the
latest <code>rld</code> rollup, and the latest <code>libc</code> rollup.

</p>
<p>
You definitely need all the POSIX patches on this page, for pthreads support:

</p>
<p>
<a href="http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html">http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html</a>

</p>
<p>
If you get the something like the following error when compiling
<tt>`mysql.cc'</tt>:

</p>

<pre>"/usr/include/curses.h", line 82: error(1084): invalid combination of type
</pre>

<p>
Type the following in the top-level directory of your MySQL source
tree:

</p>

<pre>shell&gt; extra/replace bool curses_bool &lt; /usr/include/curses.h \
&gt; include/curses.h
shell&gt; make
</pre>

<p>
There have also been reports of scheduling problems.  If only one thread is
running, things go slow.  Avoid this by starting another client.  This may
lead to a 2-to-10-fold increase in execution speed thereafter for the other
thread.  This is a poorly understood problem with Irix threads; you may have
to improvise to find solutions until this can be fixed.

</p>
<p>
If you are compiling with <code>gcc</code>, you can use the following
<code>configure</code> command:

</p>

<pre>CC=gcc CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql --enable-thread-safe-client \
--with-named-thread-libs=-lpthread
</pre>

<p>
On Irix 6.5.11 with native Irix C and C++ compilers ver. 7.3.1.2, the
following is reported to work

</p>

<pre>CC=cc CXX=CC CFLAGS='-O3 -n32 -TARG:platform=IP22 -I/usr/local/include \
-L/usr/local/lib' CXXFLAGS='-O3 -n32 -TARG:platform=IP22 \
-I/usr/local/include -L/usr/local/lib' ./configure \
--prefix=/usr/local/mysql --with-innodb --with-berkeley-db \
--with-libwrap=/usr/local \
--with-named-curses-libs=/usr/local/lib/libncurses.a
</pre>



<h4><a name="Caldera" href="manual.ja_toc.html#Caldera">2.6.6.9  Caldera (SCO) Notes</a></h4>

<p>
The current port is tested only on a ``sco3.2v5.0.4'' and
``sco3.2v5.0.5'' system.  There has also been a lot of progress on a
port to ``sco 3.2v4.2''.

</p>
<p>
For the moment the recommended compiler on OpenServer is gcc 2.95.2.  With this
you should be able to compile MySQL with just:

</p>

<pre>CC=gcc CXX=gcc ./configure ... (options)
</pre>


<ol>
<li>

For OpenServer 5.0.X you need to use gcc-2.95.2p1 or newer from the
Skunkware.  <a href="http://www.caldera.com/skunkware/">http://www.caldera.com/skunkware/</a> and choose browser
OpenServer packages or by ftp to ftp2.caldera.com in the
pub/skunkware/osr5/devtools/gcc directory.

</li><li>

You need the port of GCC 2.5.x for this product and the Development
system.  They are required on this version of Caldera (SCO) Unix.  You cannot
just use the GCC Dev system.

</li><li>

You should get the FSU Pthreads package and install it first.  This can be
found at
<a href="http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz">http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz</a>.
You can also get a precompiled package from
<a href="http://www.mysql.com/Downloads/SCO/FSU-threads-3.5c.tar.gz">http://www.mysql.com/Downloads/SCO/FSU-threads-3.5c.tar.gz</a>.

</li><li>

FSU Pthreads can be compiled with Caldera (SCO) Unix 4.2 with tcpip.  Or
OpenServer 3.0 or Open Desktop 3.0 (OS 3.0 ODT 3.0), with the Caldera (SCO)
Development System installed using a good port of GCC 2.5.x ODT or OS
3.0 you will need a good port of GCC 2.5.x There are a lot of problems
without a good port.  The port for this product requires the SCO Unix
Development system.  Without it, you are missing the libraries and the
linker that is needed.

</li><li>

To build FSU Pthreads on your system, do the following:


<ol>
<li>

Run <code>./configure</code> in the <tt>`threads/src'</tt> directory and select
the SCO OpenServer option. This command copies <tt>`Makefile.SCO5'</tt> to
<tt>`Makefile'</tt>.

</li><li>

Run <code>make</code>.

</li><li>

To install in the default <tt>`/usr/include'</tt> directory, login as root,
then <code>cd</code> to the <tt>`thread/src'</tt> directory, and run <code>make
install</code>.
</li></ol>

</li><li>

Remember to use GNU <code>make</code> when making MySQL.

</li><li>

If you don't start <code>safe_mysqld</code> as root, you probably will get only the
default 110 open files per process.  <code>mysqld</code> will write a note about this
in the log file.

</li><li>

With SCO 3.2V5.0.5, you should use FSU Pthreads version 3.5c or newer.
You should also use gcc 2.95.2 or newer!

The following <code>configure</code> command should work:


<pre>shell&gt; ./configure --prefix=/usr/local/mysql --disable-shared
</pre>

</li><li>

With SCO 3.2V4.2, you should use FSU Pthreads version 3.5c or newer.
The following <code>configure</code> command should work:


<pre>shell&gt; CFLAGS="-D_XOPEN_XPG4" CXX=gcc CXXFLAGS="-D_XOPEN_XPG4" \
       ./configure \
           --prefix=/usr/local/mysql \
           --with-named-thread-libs="-lgthreads -lsocket -lgen -lgthreads" \
           --with-named-curses-libs="-lcurses"
</pre>

You may get some problems with some include files. In this case, you can
find new SCO-specific include files at
<a href="http://www.mysql.com/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz">http://www.mysql.com/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz</a>.
You should unpack this file in the <tt>`include'</tt> directory of your
MySQL source tree.
</li></ol>

<p>
Caldera (SCO) development notes:

</p>

<ul>
<li>

MySQL should automatically detect FSU Pthreads and link <code>mysqld</code>
with <code>-lgthreads -lsocket -lgthreads</code>.

</li><li>

The Caldera (SCO) development libraries are re-entrant in FSU Pthreads.
Caldera claim sthat its libraries' functions are re-entrant, so they must
be reentrant with FSU Pthreads.  FSU Pthreads on OpenServer tries to use
the SCO scheme to make re-entrant libraries.

</li><li>

FSU Pthreads (at least the version at <a href="http://www.mysql.com/">http://www.mysql.com/</a>) comes
linked with GNU <code>malloc</code>.  If you encounter problems with memory usage,
make sure that <tt>`gmalloc.o'</tt> is included in <tt>`libgthreads.a'</tt> and
<tt>`libgthreads.so'</tt>.

</li><li>

In FSU Pthreads, the following system calls are pthreads-aware: <code>read()</code>,
<code>write()</code>, <code>getmsg()</code>, <code>connect()</code>, <code>accept()</code>,
<code>select()</code>, and <code>wait()</code>.

</li><li>

The CSSA-2001-SCO.35.2 (the patch is listed in custom as
erg711905-dscr_remap security patch (version 2.0.0) breaks FSU threads and
makes mysqld unstable.  You have to remove this one if you want to run
mysqld on an OpenServer 5.0.6 machine.
</li></ul>

<p>
If you want to install DBI on Caldera (SCO), you have to edit the
<tt>`Makefile'</tt> in DBI-xxx and each subdirectory.

</p>
<p>
Note that the following assumes gcc 2.95.2 or newer:

</p>

<pre>OLD:                                  NEW:
CC = cc                               CC = gcc
CCCDLFLAGS = -KPIC -W1,-Bexport       CCCDLFLAGS = -fpic
CCDLFLAGS = -wl,-Bexport              CCDLFLAGS =

LD = ld                               LD = gcc -G -fpic
LDDLFLAGS = -G -L/usr/local/lib       LDDLFLAGS = -L/usr/local/lib
LDFLAGS = -belf -L/usr/local/lib      LDFLAGS = -L/usr/local/lib

LD = ld                               LD = gcc -G -fpic
OPTIMISE = -Od                        OPTIMISE = -O1

OLD:
CCCFLAGS = -belf -dy -w0 -U M_XENIX -DPERL_SCO5 -I/usr/local/include

NEW:
CCFLAGS = -U M_XENIX -DPERL_SCO5 -I/usr/local/include
</pre>

<p>
This is because the Perl dynaloader will not load the <code>DBI</code> modules
if they were compiled with <code>icc</code> or <code>cc</code>.

</p>
<p>
Perl works best when compiled with <code>cc</code>.

</p>



<h4><a name="Caldera_Unixware" href="manual.ja_toc.html#Caldera_Unixware">2.6.6.10  Caldera (SCO) Unixware Version 7.0 Notes</a></h4>

<p>
You must use a version of MySQL at least as recent as Version 3.22.13
because that version fixes some portability problems under Unixware.

</p>
<p>
We have been able to compile MySQL with the following <code>configure</code>
command on Unixware Version 7.0.1:

</p>

<pre>CC=cc CXX=CC ./configure --prefix=/usr/local/mysql
</pre>

<p>
If you want to use <code>gcc</code>, you must use <code>gcc</code> 2.95.2 or newer.

</p>
<p>
Caldera provides libsocket.so.2 at
<a href="ftp://stage.caldera.com/pub/security/tools">ftp://stage.caldera.com/pub/security/tools</a> for 
pre-OSR506 security fixes. Also, the telnetd fix at
<a href="ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/">ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/</a>
as both libsocket.so.2 and libresolv.so.1 with instructions for
installing on pre-OSR506 systems.

</p>
<p>
It's probably a good idea to install the above patches before trying to
compile/use MySQL.

</p>


<h3><a name="OS/2" href="manual.ja_toc.html#OS/2">2.6.7  OS/2 Notes</a></h3>

<p>
MySQL uses quite a few open files. Because of this, you should add
something like the following to your <tt>`CONFIG.SYS'</tt> file:

</p>

<pre>SET EMXOPT=-c -n -h1024
</pre>

<p>
If you don't do this, you will probably run into the following error:

</p>

<pre>File 'xxxx' not found (Errcode: 24)
</pre>

<p>
When using MySQL with OS/2 Warp 3, FixPack 29 or above is
required.  With OS/2 Warp 4, FixPack 4 or above is required. This is a
requirement of the Pthreads library.  MySQL must be installed
in a partition that supports long filenames such as HPFS, FAT32, etc.

</p>
<p>
The <tt>`INSTALL.CMD'</tt> script must be run from OS/2's own <tt>`CMD.EXE'</tt>
and may not work with replacement shells such as <tt>`4OS2.EXE'</tt>.

</p>
<p>
The <tt>`scripts/mysql-install-db'</tt> script has been renamed.  It is now called
<tt>`install.cmd'</tt> and is a REXX script, which will set up the default
MySQL security settings and create the WorkPlace Shell icons
for MySQL.

</p>
<p>
Dynamic module support is compiled in but not fully tested. Dynamic
modules should be compiled using the Pthreads run-time library.

</p>

<pre>gcc -Zdll -Zmt -Zcrtdll=pthrdrtl -I../include -I../regex -I.. \
    -o example udf_example.cc -L../lib -lmysqlclient udf_example.def
mv example.dll example.udf
</pre>

<p>
<strong>Note</strong>: Due to limitations in OS/2, UDF module name stems must not
exceed 8 characters. Modules are stored in the <tt>`/mysql2/udf'</tt>
directory; the <code>safe-mysqld.cmd</code> script will put this directory in
the <code>BEGINLIBPATH</code> environment variable. When using UDF modules,
specified extensions are ignored@-it is assumed to be <tt>`.udf'</tt>.
For example, in Unix, the shared module might be named <tt>`example.so'</tt>
and you would load a function from it like this:

</p>

<pre>mysql&gt; CREATE FUNCTION metaphon RETURNS STRING SONAME "example.so";
</pre>

<p>
Is OS/2, the module would be named <tt>`example.udf'</tt>, but you would not
specify the module extension:

</p>

<pre>mysql&gt; CREATE FUNCTION metaphon RETURNS STRING SONAME "example";
</pre>



<h3><a name="BeOS" href="manual.ja_toc.html#BeOS">2.6.8  BeOS Notes</a></h3>

<p>
We are really interested in getting MySQL to work on BeOS, but
unfortunately we don't have any person who knows BeOS or has time to do
a port.

</p>
<p>
We are interested in finding someone to do a port, and we will help them
with any technical questions they may have while doing the port.

</p>
<p>
We have previously talked with some BeOS developers that have said that
MySQL is 80% ported to BeOS, but we haven't heard from them
in a while.

</p>



<h3><a name="Novell_Netware" href="manual.ja_toc.html#Novell_Netware">2.6.9  Novell NetWare Notes</a></h3>

<p>
We are really interested in getting MySQL to work on NetWare, but
unfortunately we don't have any person who knows NetWare or has time to do
a port.

</p>
<p>
We are interested in finding someone to do a port, and we will help them
with any technical questions they may have while doing the port.

</p>



<h2><a name="Perl_support" href="manual.ja_toc.html#Perl_support">2.7  Perl Installation Comments</a></h2>

<p>
<a name="IDX349"></a>
<a name="IDX350"></a>

</p>



<h3><a name="Perl_installation" href="manual.ja_toc.html#Perl_installation">2.7.1  Installing Perl on Unix</a></h3>

<p>
MySQLのPerlでの使用に関するサポートは
<code>DBI</code>/<code>DBD</code>クライアントインターフェスの提供で行なわれます。
 「<a href="manual.ja_Clients.html#Perl">8.2  MySQL Perl API</a>」節参照.
<code>DBI</code>/<code>DBD</code>はPerl5.004かそれ以上のバージョンが必要になります。
古いバージョンのPerlでは<strong>動きません</strong>。

</p>
<p>
MySQL の Perl support にはここまでで既にインストールが済んでいる筈の
MySQL のクライアントプログラミングサポートが必要となります。
もしも RPM ファイルからインストールをされているのならば
クライアントプログラムはクライアントRPMにあるものの、
クライアントプログラミングサポートはデベロッパー RPM にあります。
まずデベロッパー RPM をインストールされたがどうかお確かめ下さい。

</p>
<p>
バージョン3.22.8からは Perl support がメインの MySQL 配布ファイルとは別になっています。
もし Perl support が必要であれば <a href="http://www.mysql.com/downloads/api-dbi.html">http://www.mysql.com/downloads/api-dbi.html</a>. からお取りください。

</p>
<p>
Perl関係プログラムのの配布は<code>tar</code>形式圧縮ファイルとして行われており、
ファイル名が <tt>`MODULE-VERSION.tar.gz'</tt> の形式になっています。
ここで、<code>MODULE</code>はモジュール名称、<code>VERSION</code>はバージョン番号を表しています。
<code>Data-Dumper</code>、<code>DBI</code>、及び、<code>Msql-Mysql-modules</code>を入手してインストールしてください。
インストール手順は以下に示す通りです。なお、ここでは<code>Data-Dumper</code>のみの手順が示されていますが、
他のモジュールについても同様な手順でインストールできます。

</p>

<ol>
<li>

以下のようにして作業ディレクトリで配布ファイルを伸長・展開してください。

<pre>shell&gt; gunzip &lt; Data-Dumper-VERSION.tar.gz | tar xvf -
</pre>

This command creates a directory named <tt>`Data-Dumper-VERSION'</tt>.

</li><li>

展開先のトップディレクトリーに移動します。

<pre>shell&gt; cd Data-Dumper-VERSION
</pre>

</li><li>

コンパイル＆ビルドを行います。

<pre>shell&gt; perl Makefile.PL
shell&gt; make
shell&gt; make test
shell&gt; make install
</pre>

</li></ol>

<p>
出来上がったモジュールの動作を確認するために<code>make test</code>のコマンドは重要になってきます。
このコマンドを<code>Msql-Mysql-modules</code>をインストールしている時に使ってみてください。
MySQLサーバが動いていなければ失敗することになります。

</p>
<p>
MySQLをバージョンアップした際に <code>DBI</code> が core ダンプした場合は
必ず <code>Msql-Mysql-modules</code> を再コンパイルしてインストールしなおしてください。
そうでなくても MySQL のバージョンを変更した場合は再コンパイルしたほうが賢明です。

</p>
<p>
貴方のユーザ権限ではPerlのモジュールをインストールできない場合でも
以下の例のようにしてローカルディレクトリにモジュールをインストールできます。

</p>

<pre><a href="http://www.iserver.com/support/contrib/perl5/modules.html">http://www.iserver.com/support/contrib/perl5/modules.html</a>
</pre>

<p>
<code>Installing New Modules that Require Locally Installed Modules</code>.
という見出しの文書をご覧下さい。

</p>



<h3><a name="ActiveState_Perl" href="manual.ja_toc.html#ActiveState_Perl">2.7.2  Installing ActiveState Perl on Windows</a></h3>

<p>
<a name="IDX351"></a>
<a name="IDX352"></a>
<a name="IDX353"></a>

</p>
<p>
<code>DBD</code>モジュールとActiveState Perlをインストールするには以下の手順で行います。

</p>

<ul>
<li>

ActiveState Perlはこのサイトからダウンロードできます。
<a href="http://www.activestate.com/Products/ActivePerl/">http://www.activestate.com/Products/ActivePerl/</a>
and install it.

</li><li>

先ず、DOSのシェルを立ち上げてください。

</li><li>

必要であれば次のようにHTTP_proxy変数をセットしてください。


<pre>set HTTP_proxy=my.proxy.com:3128
</pre>

</li><li>

次のようにPPMプログラムを立ち上げます。


<pre>C:\&gt; c:\perl\bin\ppm.pl
</pre>

</li><li>

<code>DBI</code>がインストールされていなければインストールします。


<pre>ppm&gt; install DBI
</pre>

</li><li>

ここまで来たら次のようなコマンドを実行してください。


<pre>install \
ftp://ftp.de.uu.net/pub/CPAN/authors/id/JWIED/DBD-mysql-1.2212.x86.ppd
</pre>

</li></ul>

<p>
以上でActiveState Perlのバージョン5.6がとりあえず動くことになります。

</p>
<p>
もしも動作しない場合は次のように <strong>MyODBC</strong> ドライバーをインストールして
ODBC経由でMySQLサーバに接続する必要があります。

</p>

<pre>use DBI;
$dbh= DBI-&gt;connect("DBI:ODBC:$dsn","$user","$password") ||
  die "Got error $DBI::errstr when connecting to $dsn\n";
</pre>



<h3><a name="Windows_Perl" href="manual.ja_toc.html#Windows_Perl">2.7.3  Installing the MySQL Perl Distribution on Windows</a></h3>

<p>
MySQL Perlの配布パッケージには<code>DBI</code>、<code>DBD:MySQL</code>、そして、<code>DBD:ODBC</code>が含まれています。

</p>

<ul>
<li>

Windows 用 Perl の配布パッケージをこのサイトからダウンロードしてください。
<a href="http://www.mysql.com/downloads/os-win32.html">http://www.mysql.com/downloads/os-win32.html</a>.

</li><li>

<code>C:</code>で配布パッケージを解凍してください。<tt>`C:\PERL'</tt>に必要なファイルが現れます。

</li><li>

次にコマンドパスに<tt>`C:\PERL\BIN'</tt>を追加してください。

</li><li>

ディレクトリ、<tt>`C:\PERL\BIN\MSWIN32-x86-thread'</tt> か <tt>`C:\PERL\BIN\MSWIN32-x86'</tt> もコマンドパスに追加してください。

</li><li>

<code>perl -v</code>と入力して<code>perl</code>の起動をチェックしてみましょう。
</li></ul>



<h3><a name="Perl_support_problems" href="manual.ja_toc.html#Perl_support_problems">2.7.4  Problems Using the Perl <code>DBI</code>/<code>DBD</code> Interface</a></h3>

<p>
<a name="IDX354"></a>
<a name="IDX355"></a>

</p>
<p>
Perl が "<tt>`../mysql/mysql.so'</tt>を見つけられない" というメッセージを出した場合、
それは多分 Perl のシェアードライブラリ <tt>`libmysqlclient.so'</tt> を見つけることが出来ないのでしょう。

</p>
<p>
これは以下のような方法で解決できます。

</p>

<ul>
<li>

<code>Msql-Mysql-modules</code>は通常、<code>perl Makefile.PL</code> とコンパイルされますが、
<code>perl Makefile.PL -static -config</code>とコンパイルしてください。

</li><li>

<tt>`libmysqlclient.so'</tt>をシェアードライブラリが置いてあるディレクトリにコピーしてください
(通常は<tt>`/usr/lib'</tt>や<tt>`/lib'</tt>といったディレクトリになるはずです)。

</li><li>

Linux の場合は <tt>`/etc/ld.so.conf'</tt> ファイルを使って <tt>`libmysqlclient.so'</tt> のあるディレクトリを
パスに追加することが出来ます。

<a name="IDX356"></a>
<a name="IDX357"></a>
</li><li>

<tt>`libmysqlclient.so'</tt>のあるディレクトリを<code>LD_RUN_PATH</code>に追加することによって
そこへのパスが追加されます。
</li></ul>

<p>
<code>DBD-mysql</code> が次のようなエラーを発生する場合があります。
この原因の一つは <code>gcc</code>(又は<code>gcc</code>でコンパイルされた古いバイナリ配布パッケージ)をお使いのケースです。

</p>

<pre>/usr/bin/perl: can't resolve symbol '__moddi3'
/usr/bin/perl: can't resolve symbol '__divdi3'
</pre>

<p>
<tt>`mysql.so'</tt> ライブラリをビルドする時に <code>-L/usr/lib/gcc-lib/... -lgcc</code> を
リンクコマンドに追加してください(<code>make</code>コマンド実行時の出力をチェックすれば確認できます。)。
オプション<code>-L</code>で指定されるのは<code>libgcc.a</code>のあるディレクトリになります。

</p>
<p>
もう一つの原因はPerlとMySQLのどちからが<code>gcc</code>でコンパイルされており、どちらかがそうでない場合です。
この場合はどちらも<code>gcc</code>でコンパイルし、この不一致を解消すれば解決します。

</p>
<p>
<code>Msql-Mysql-modules</code>がテストで次のようなエラーを出した時、

</p>

<pre>t/00base............install_driver(mysql) failed:
Can't load '../blib/arch/auto/DBD/mysql/mysql.so' for module DBD::mysql:
../blib/arch/auto/DBD/mysql/mysql.so: undefined symbol:
uncompress at /usr/lib/perl5/5.00503/i586-linux/DynaLoader.pm line 169.
</pre>

<p>
これは、ファイル圧縮用ライブラリ -lz へのパスを追加すれば解決いたします。
<tt>`lib/DBD/mysql/Install.pm'</tt> に以下のような変更を行ってください。

</p>

<pre>$sysliblist .= " -lm";

to

$sysliblist .= " -lm -lz";
</pre>

<p>
After this, you <strong>must</strong> run 'make realclean' and then proceed with the
installation from the beginning.

</p>
<p>
このあと'make realclean'を実行し、最初からインストールをやり直す必要があります。

</p>
<p>
Caldera (SCO) のようなダイナミックリンクが使用できないシステムで Perl モジュールを使用する際は
<code>DBI</code>や<code>DBD-mysql</code>をスタティックリンクしたバージョンのPerlを作成する必要があります。
<code>DBD</code>をスタティックにリンクするには、Perlのインストールディレクトリに
<code>DBI</code>のプログラムを置き<code>DBD</code>をリンクし、インストールします。

</p>
<p>
Caldera (SCO) では以下のような環境変数をセットする必要があります。

</p>

<pre>shell&gt; LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib:/usr/progressive/lib
or
shell&gt; LD_LIBRARY_PATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\
/usr/progressive/lib:/usr/skunk/lib
shell&gt; LIBPATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\
/usr/progressive/lib:/usr/skunk/lib
shell&gt; MANPATH=scohelp:/usr/man:/usr/local1/man:/usr/local/man:\
/usr/skunk/man:
</pre>

<p>
<code>DBI</code> をスタティックにリンクしたPerlを作成するためには、
先ず以下のコマンドを <code>DBI</code> がインストールされているディレクトリで実行してください。

</p>

<pre>shell&gt; perl Makefile.PL -static -config
shell&gt; make
shell&gt; make install
shell&gt; make perl
</pre>

<p>
次に新しいPerlをインストールします。
通常 <code>make perl</code> でインストールに必要なファイル類を作成しますが、
Caldera (SCO)の場合は <code>make -f Makefile.aperl inst_perl MAP_TARGET=perl</code> のように行う必要があります。

</p>
<p>
次に、ここで作成された Perl で目的の <code>DBD::mysql</code> をスタティックにリンクされた Perl を作成するために使います。
<code>Msql-Mysql-modules</code> がインストールされたディレクトリで以下のようなコマンドを実行してください。

</p>

<pre>shell&gt; perl Makefile.PL -static -config
shell&gt; make
shell&gt; make install
shell&gt; make perl
</pre>

<p>
最後に、この新しいPerlプログラムをインストールしてください。
<code>make perl</code>で必要なコマンドを再確認することができます。

</p>

<p></p><hr><p>
Go to the <a href="manual.ja_Introduction.html">first</a>, <a href="manual.ja_Introduction.html">previous</a>, <a href="manual.ja_Tutorial.html">next</a>, <a href="manual.ja_Concept_Index.html">last</a> section, <a href="manual.ja_toc.html">table of contents</a>.
 
 
</p></body></html>