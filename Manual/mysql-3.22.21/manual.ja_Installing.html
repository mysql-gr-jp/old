  <HTML>
  <HEAD>
  <!-- This HTML file has been created by texi2html 1.52 (hacked by david@detron.se)
     from manual.ja.texi on 1 December 1999 -->

  <TITLE>MySQL Reference Manual for version 3.22.21. - 4  MySQL のインストール</TITLE>
  </HEAD>
  <BODY BGCOLOR=#FFFFFF TEXT=#000000 LINK=#101090 VLINK=#7030B0>
Go to the <A HREF="manual.ja_Introduction.html">first</A>, <A HREF="manual.ja_Licensing_and_Support.html">previous</A>, <A HREF="manual.ja_Compatibility.html">next</A>, <A HREF="manual.ja_Concept_Index.html">last</A> section, <A HREF="manual.ja_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="Installing" HREF="manual.ja_toc.html#Installing">4  <STRONG>MySQL</STRONG> のインストール</A></H1>

<P>
この章では、どのようにして <STRONG>MySQL</STRONG> を得、インストールするのかをのべます: 

</P>

<UL>
<LI>

<STRONG>MySQL</STRONG> を得ることができるサイトのリスト →
 「<A HREF="manual.ja_Installing.html#Getting_MySQL">4.1  <STRONG>MySQL</STRONG> を得る方法</A>」節.

<LI>

どのプラットフォームをサポートしているかは →  「<A HREF="manual.ja_Installing.html#Which_OS">4.2  <STRONG>MySQL</STRONG> がサポートする OS</A>」節.

<LI>

<STRONG>MySQL</STRONG> のいくつかのバージョンは、バイナリ、ソース両方の配布物があります。
どのバージョンを使用するのか、どのタイプを使用するかを決めるためには
 →  「<A HREF="manual.ja_Installing.html#Many_versions">4.4  アップデートがリリースされる方法と時</A>」節.

<LI>

バイナリとソースのインストールについては →
  「<A HREF="manual.ja_Installing.html#Installing_binary">4.6  <STRONG>MySQL</STRONG> バイナリ配布のインストール</A>」節, と  「<A HREF="manual.ja_Installing.html#Installing_source">4.7  <STRONG>MySQL</STRONG> ソース配布のインストール</A>」節.
それぞれのセットには、あなたが出くわすかもしれない
システムに特有の問題のセクションが含まれます。

<LI>

インストール後に行うことの説明は →  「<A HREF="manual.ja_Installing.html#Post-installation">4.15  インストール後の設定とテスト</A>」節. 
<STRONG>MySQL</STRONG> のインストールにおいて、バイナリまたはソース配布にかかわらず、
これらのプロシージャは適用します。
</UL>

<P>
<A NAME="IDX29"></A>
<A NAME="IDX30"></A>
<A NAME="IDX31"></A>
<A NAME="IDX32"></A>


<H2><A NAME="Getting_MySQL" HREF="manual.ja_toc.html#Getting_MySQL">4.1  <STRONG>MySQL</STRONG> を得る方法</A></H2>

<P>
現在のバージョンとダウンロードの指示についての情報は
<a HREF="http://www.mysql.com/"> <STRONG>MySQL</STRONG> ホームページ</a> をチェックしてく
ださい。

</P>
<P>
しかし、TcX のインターネット接続はそんなに速くありません; 下記に一覧され
たミラーサイトの一つから実際にダウンロードすることを<EM>お勧めします</EM>。

</P>
<P>
悪いまたは遅れているミラーは <a HREF="mailto:webmaster@mysql.com">webmaster@mysql.com</a> に報告してくださ
い。

</P>

<P>
<STRONG>ヨーロッパ:</STRONG>

</P>

<UL>
<LI>

<IMG SRC="Img/austria.png"> Austria [Univ. of Technology/Vienna]  
<a HREF="http://gd.tuwien.ac.at/db/mysql/"> WWW</a>
<a HREF="ftp://gd.tuwien.ac.at/db/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/bulgaria.png"> Bulgaria [Naturella]  
<a HREF="ftp://ftp.ntrl.net/pub/mirror/mysql"> FTP</a>
<LI>

 Croatia [HULK]  
<a HREF="http://ftp.linux.hr/pub/mysql/"> WWW</a>
<a HREF="ftp://ftp.linux.hr/pub/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/czech-republic.png"> Czech Republic [Masaryk University in Brno]  
<a HREF="http://mysql.linux.cz/index.html"> WWW</a>
<a HREF="ftp://ftp.fi.muni.cz/pub/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/czech-republic.png"> Czech Republic [www.sopik.cz]  
<a HREF="http://www.mysql.cz/"> WWW</a>
<LI>

<IMG SRC="Img/denmark.png"> Denmark [Borsen]  
<a HREF=" http://mysql.borsen.dk/"> WWW</a>
<LI>

<IMG SRC="Img/denmark.png"> Denmark [SunSITE]  
<a HREF="http://SunSITE.auc.dk/mysql/"> WWW</a>
<a HREF="ftp://SunSITE.auc.dk/pub/databases/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/estonia.png"> Estonia [OKinteractive]  
<a HREF="http://mysql.mirror.ok.ee"> WWW</a>
<LI>

<IMG SRC="Img/france.png"> France [minet]  
<a HREF="http://www.minet.net/devel/mysql/"> WWW</a>
<LI>

<IMG SRC="Img/finland.png"> Finland [EUnet] 
<a HREF="http://mysql.eunet.fi/"> WWW</a>
<LI>

<IMG SRC="Img/finland.png"> Finland [clinet] 
<a HREF="ftp://ftp.clinet.fi/mirrors/ftp.mysql.org/pub/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/germany.png"> Germany [Bonn University, Bonn]  
<a HREF="http://www.wipol.uni-bonn.de/MySQL//"> WWW</a>
<a HREF="ftp://ftp.wipol.uni-bonn.de/pub/mirror/MySQL/"> FTP</a>
<LI>

<IMG SRC="Img/germany.png"> Germany [Wolfenbuettel]  
<a HREF="http://www.fh-wolfenbuettel.de/ftp/pub/database/mysql/"> WWW</a>
<a HREF="ftp://ftp.fh-wolfenbuettel.de/pub/database/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/germany.png"> Germany [Staufen]  
<a HREF="http://mysql.staufen.de/"> WWW</a>
<LI>

<IMG SRC="Img/germany.png"> Germany [Cable &#38; Wireless]  
<a HREF="ftp://ftp.ecrc.net/pub/database/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/greece.png"> Greece [NTUA, Athens]  
<a HREF="http://www.ntua.gr/mysql/"> WWW</a>
<a HREF="ftp://ftp.ntua.gr/pub/databases/mysql/"> FTP</a>
<LI>

 Island [GM]  
<a HREF="http://mysql.gm.is/"> WWW</a>
<a HREF="ftp://ftp.gm.is/pub/mysql"> WWW</a>
<LI>

<IMG SRC="Img/italy.png"> Italy [Teta Srl]  
<a HREF="http://www.teta.it/mysql/"> WWW</a>
<LI>

 Ireland [Ireland On-Line/Dublin]  
<a HREF="http://mysql.iol.ie"> WWW</a>
<a HREF="ftp://ftp.iol.ie/pub/mysql"> FTP</a>
<LI>

<IMG SRC="Img/poland.png"> Poland [Sunsite]  
<a HREF="http://sunsite.icm.edu.pl/mysql/"> WWW</a>
<a HREF="ftp://sunsite.icm.edu.pl/pub/unix/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/portugal.png"> Portugal [lerianet]  
<a HREF="http://mysql.leirianet.pt"> WWW</a>
<a HREF="ftp://ftp.leirianet.pt/pub/mysql/">FTP</a>
<LI>

<IMG SRC="Img/russia.png"> Russia [DirectNet]  
<a HREF="http://mysql.directnet.ru"> WWW</a>
<LI>

<IMG SRC="Img/russia.png"> Russia [IZHCOM]  
<a HREF="http://mysql.udm.net/"> WWW</a>
<a HREF="ftp://ftp.izhcom.ru/pub/mysql/">FTP</a>
<LI>

<IMG SRC="Img/russia.png"> Russia [Scientific Center/Chernogolovka]  
<a HREF="ftp://ftp.chg.ru/pub/databases/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/romania.png"> Romania [Timisoara]  
<a HREF="http://www.dnttm.ro/mysql"> WWW</a>
<a HREF="ftp://ftp.dnttm.ro/pub/mysql"> FTP</a>
<LI>

<IMG SRC="Img/romania.png"> Romania [Bucharest]  
<a HREF="http://www.lbi.ro/MySQL"> WWW</a>
<a HREF="ftp://ftp.lbi.ro/mirrors/ftp.tcx.se"> FTP</a>

<LI>

 Spain [MasterD]
<a HREF="http://mysql.masterd.es"> WWW</a>

<LI>

<IMG SRC="Img/sweden.png"> Sweden [Sunet]  
<a HREF="http://ftp.sunet.se/pub/unix/databases/relational/mysql/"> WWW</a>
<a HREF="ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/"> FTP</a>

<LI>

 Switzerland [Sunsite] 
<a HREF="http://sunsite.cnlab-switch.ch/ftp/mirror/mysql/"> WWW</a>
<a HREF="ftp://sunsite.cnlab-switch.ch/mirror/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/great-britain.png"> UK [Omnipotent/UK]  
<a HREF="http://mysql.omnipotent.net/"> WWW</a>
<a HREF="ftp://mysql.omnipotent.net/"> FTP</a>

<LI>

<IMG SRC="Img/great-britain.png"> UK [PLiG/UK]  
<a HREF="http://ftp.plig.org/pub/mysql/"> WWW</a>
<a HREF="ftp://ftp.plig.org/pub/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/great-britain.png"> UK [SunSITE] 
<a HREF="http://sunsite.org.uk/packages/mysql/"> WWW</a>
<a HREF="ftp://sunsite.org.uk/packages/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/ukraine.png"> Ukraine [PACO] 
<a HREF="http://mysql.paco.net.ua"> WWW</a>
<a HREF="ftp://mysql.paco.net.ua/"> FTP</a>

</UL>

<P>
<STRONG>北アメリカ:</STRONG>

</P>

<UL>

<LI>

<IMG SRC="Img/canada.png"> Canada [Tryc]  
<a HREF="http://web.tryc.on.ca/mysql/"> WWW</a>

<LI>

<IMG SRC="Img/canada.png"> Canada [Cyberus]  
<a HREF="http://mysql.cyberus.ca/"> WWW</a>
<a HREF="ftp://mysql.cyberus.ca/"> FTP</a> 

<LI>

<IMG SRC="Img/usa.png"> USA [Hurricane Electric/San Jose]  
<a HREF="http://mysql.he.net"> WWW</a>

<LI>

<IMG SRC="Img/usa.png"> USA [Circle Net/North Carolina]  
<a HREF="http://www.mysql.net"> WWW</a>

<LI>

<IMG SRC="Img/usa.png"> USA [Gina net/Florida]  
<a HREF="http://www.gina.net/mysql/"> WWW</a>

<LI>

<IMG SRC="Img/usa.png"> USA [pingzero/Los Angeles] 
<a HREF="http://mysql.pingzero.net/"> WWW</a>

<LI>

<IMG SRC="Img/usa.png"> USA [Wisconsin University/Wisconsin] 
<a HREF="http://mirror.sit.wisc.edu/mysql/"> WWW</a>
<a HREF="ftp://mirror.sit.wisc.edu/mirrors/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/usa.png"> USA [DIGEX]  
<a HREF="ftp://ftp.digex.net/pub/packages/database/mysql/"> FTP</a>

</UL>

<P>
<STRONG>南アメリカ:</STRONG>

</P>

<UL>
<LI>

 Brazil [Matrix]  
<a HREF="http://mysql.matrix.com.br"> WWW</a>
<LI>

<IMG SRC="Img/chile.png"> Chile [Vision]  
<a HREF="http://mysql.vision.cl/"> WWW</a>

</UL>

<P>
<STRONG>アジア:</STRONG>

</P>

<UL>
<LI>

 China [Freecode]  
<a HREF="http://www.freecode.com.cn/mirror/mysql/"> WWW</a>

<LI>

 China [Netfirm]  
<a HREF="http://mysql.netfirm.net"> WWW</a>

<LI>

<IMG SRC="Img/south-korea.png"> Korea [KREONet]  
<a HREF="http://linux.kreonet.re.kr/mysql/"> WWW</a>

<LI>

<IMG SRC="Img/japan.png"> Japan [SoftAgency]  
<a HREF="http://www.softagency.co.jp/MySQL"> WWW</a>　　
<a HREF="http://www.softagency.co.jp/mysql.html"> 日本語版MySQLのダウンロード(WWW) </a>

<LI>

<IMG SRC="Img/japan.png"> Japan [Nagoya Syouka University]  
<a HREF="http://mirror.nucba.ac.jp/mirror/mysql"> WWW</a>
<a HREF="ftp://mirror.nucba.ac.jp/mirror/mysql"> FTP</a>

<LI>

<IMG SRC="Img/singapore.png"> Singapore [HJC] 
<a HREF="http://mysql.hjc.edu.sg"> WWW</a>
<a HREF="ftp://ftp.hjc.edu.sg/mysql"> FTP</a>

<LI>

<IMG SRC="Img/taiwan.png"> Taiwan [HT]  
<a HREF="http://mysql.ht.net.tw"> WWW</a>
</UL>

<P>
<STRONG>オーストラリア:</STRONG>

</P>

<UL>
<LI>

<IMG SRC="Img/australia.png"> Australia [AARNet/Queensland]  
<a HREF="http://mirror.aarnet.edu.au/mysql"> WWW</a>
<a HREF="ftp://mirror.aarnet.edu.au/pub/mysql"> FTP</a>

<LI>

<IMG SRC="Img/australia.png"> Australia [Tas]  
<a HREF="http://ftp.tas.gov.au/mysql"> WWW</a>
<a HREF="ftp://ftp.tas.gov.au/pub/mysql"> FTP</a>

<LI>

<IMG SRC="Img/australia.png"> Australia [Blue Planet/Melbourne]  
<a HREF="http://mysql.bluep.com/"> WWW</a>

<LI>

<IMG SRC="Img/australia.png"> Australia [ITworks Consulting/Victoria]  
<a HREF="http://mysql.itworks.com.au"> WWW</a>

</UL>

<P>
<STRONG>アフリカ:</STRONG>

</P>

<UL>

<LI>

<IMG SRC="Img/south-africa1.png"> South-Africa [Mweb/]  
<a HREF="http://www.mysql.mweb.co.za"> WWW</a>

<LI>

<IMG SRC="Img/south-africa1.png"> South-Africa [The Internet Solution/Johannesburg]  
<a HREF="ftp://ftp.is.co.za/linux/mysql/"> FTP</a>

</UL>



<H2><A NAME="Which_OS" HREF="manual.ja_toc.html#Which_OS">4.2  <STRONG>MySQL</STRONG> がサポートする OS</A></H2>

<P>
我々は GNU Autoconf を使用していますので、<STRONG>MySQL</STRONG> は POSIX スレッ
ドと C++ コンパイラが動作する全ての新しいシステムに移植可能です。(クライ
アントコードのコンパイルだけは C++ を必要としますが、スレッドは必要ではありません。)
我々は自身のソフトウェアを、最初に Sun Solaris (現在は 2.5 &#38; 2.6 &#38; 2.7) 上で、より
小さい範囲は RedHat Linux 5.0 上で、使用し開発します。

</P>
<P>
<STRONG>MySQL</STRONG> は次の OS/スレッドパッケージの組み合わせで、コンパイルの
成功が報告されています。多くの OS では、ネイティブスレッドは最新バージョ
ンだけで動作することに注意してください。

</P>

<UL>
<LI>

AIX 4.x with native threads
<LI>

BSDI 2.x with the included MIT-pthreads package
<LI>

BSDI 3.0, 3.1 and 4.x with native threads
<LI>

DEC UNIX 4.x with native threads
<LI>

FreeBSD 2.x with the included MIT-pthreads package
<LI>

FreeBSD 3.x with native threads
<LI>

HP-UX 10.20 with the included MIT-pthreads package
<LI>

HP-UX 11.x with the native threads.
<LI>

Linux 2.0+ with LinuxThreads 0.7.1 or <CODE>glibc</CODE> 2.0.7
<LI>

MacOS X Server
<LI>

NetBSD 1.3/1.4 Intel and NetBSD 1.3 Alpha (Requires GNU make)
<LI>

OpenBSD 2.x with the included MIT-pthreads package
<LI>

OS/2 Warp 3, FixPack 29 and OS/2 Warp 4, FixPack 4
<LI>

SGI Irix 6.x with native threads
<LI>

Solaris 2.5, 2.6 and 2.7 with native threads on SPARC and x86
<LI>

SunOS 4.x with the included MIT-pthreads package
<LI>

SCO OpenServer with a recent port of the FSU Pthreads package
<LI>

SCO UnixWare 7.0.1
<LI>

Tru64 Unix
<LI>

Win95, Win98 and NT (the newest version is currently available only for
users with a <STRONG>MySQL</STRONG> license or <STRONG>MySQL</STRONG> email support).
For those who wish to test before they buy, we have released
<a HREF="http://www.mysql.com/mysql_w32.htmy"><STRONG>MySQL</STRONG> 3.21.29</a> (an
older version) as shareware.
</UL>

<P>
<A NAME="IDX33"></A>
<A NAME="IDX34"></A>
<A NAME="IDX35"></A>
<A NAME="IDX36"></A>
<A NAME="IDX37"></A>


<H2><A NAME="Which_version" HREF="manual.ja_toc.html#Which_version">4.3  使用する <STRONG>MySQL</STRONG> バージョン</A></H2>

<P>
make のための最初の決定は、あなたが最新の開発リリースを使用したいのか、
または最新の安定リリースを使用したいのかです。

</P>

<UL>
<LI>

通常、あなたが最初に <STRONG>MySQL</STRONG> を使い始める場合、またはバイナリ配布
がない他のシステムに移植しようとする場合、我々は開発リリースで行うことを
勧めます。開発リリースには普通は本当に悪いバグはなく、あなたのマシン上で、
<CODE>crash-me</CODE> とベンチマークテストで簡単にテストできるからです。
 「<A HREF="manual.ja_Performance.html#Benchmarks">10.8  Using your own benchmarks</A>」節参照。

<LI>

そうでなくて、古いシステムで実行していてアップグレードしたいけれども、
3.22 を試してみたくない場合は、3.21.33 にアップグレードすべきです。この
バージョンでは、致命的なバグだけを修正し、小さくし、比較的安全な変更を試
みました。
</UL>

<P>
make のための２番目の決定は、ソース配布とバイナリ配布のどちらを使用した
いかです:

</P>

<UL>
<LI>

あなたが現在バイナリ配布が存在するプラットフォーム上で <STRONG>MySQL</STRONG> を
実行したいのなら、それを使用してください。通常、ソース配布よりもインストー
ルは簡単です。

<LI>

<STRONG>MySQL</STRONG> を作る C と C++ コードを読みたい(そして/または変更したい)
場合はソース配布を入手するべきです。ソースコードはいつでも究極のマニュア
ルです。ソース配布はバイナリ配布よりも多くのテストと例も含んでいます。
</UL>

<P>
<STRONG>MySQL</STRONG> の命名法では、リリース番号は3つの数値とサフィックスからな
ります。例えば、<CODE>mysql-3.21.17-beta</CODE> のようなリリース名は次のように
解釈されます:

</P>

<UL>
<LI>

最初の数値(<CODE>3</CODE>)はファイル形式を表します。全てのバージョン 3 リリー
スは同じファイルフォーマットを持ちます。バージョン 4 が現れた時、全ての
テーブルは新しい形式に変換する必要があります (このための良いツールはもち
ろん含まれます)。

<LI>

2番目の数値(<CODE>21</CODE>)はリリースレベルです。通常は二つから選択します。一
つはリリース/安定ブランチで、もう一つは開発ブランチです。通常は両方とも
安定ですが、開発バージョンはきまぐれで、ドキュメントがなく、いくつかのシ
ステムではコンパイルに失敗します。

<LI>

3番目の数値(<CODE>17</CODE>)はリリースレベル内のバージョン番号です。これは新し
い配布の度に増加します。普通はあなたの選択したリリースレベルの最新バージョ
ンを求めます。

<LI>

サフィックス(<CODE>beta</CODE>)はリリースの安定レベルを表します:


<UL>
<LI>

<CODE>alpha</CODE> は、100% テストされていないいくつかの新しい大きなコードセク
ションが存在することを示し、知られているバグは News 節(通常はありませ
ん)に記述されています。 「<A HREF="manual.ja_News.html#News">D  <STRONG>MySQL</STRONG> change history</A>」節参照。多くの alpha リリースには新しいコマ
ンドと拡張もあります。

<LI>

<CODE>beta</CODE> は全ての新しいコードがテストされたことを意味します。大きな新
しいものは追加されません。知られているバグはありません。

<LI>

<CODE>gamma</CODE> は beta がしばらくして、正しく動くように見えるものです。こ
れは多くの他の会社がリリースと呼ぶものです。

<LI>

サフィックスがない場合は、多くの異なる場所で、プラットフォーム固有のバグ
を除いてバグレポートなしでそのバージョンがしばらくの間動作していたことを
意味します。これは我々が stable リリースと呼ぶものです。
</UL>

</UL>

<P>
<STRONG>MySQL</STRONG> の全てのバージョンは、比較的安全に使用できることを確かめ
るため、我々の標準テストとベンチマークを通して実行されています。標準テス
トは以前に見つかった全てのバグをチェックするように拡張されるため、テスト
スイートはより良く保持されます。

</P>
<P>
全てのリリースは少なくても次のテストがされていることに注意してください:

</P>
<DL COMPACT>

<DT>内部テストスイート
<DD>
これは顧客のための製品システムの一部です。多くのテーブルと何百というメガ
バイトのデータを持っています。

<DT><STRONG>MySQL</STRONG> ベンチマークスイート
<DD>
これは一般的な範囲のクエリを実行します。これは、最適化の最新バッチが実際
にコードをより速く作れるかどうかを確認するテストでもあります。
 「<A HREF="manual.ja_Performance.html#Benchmarks">10.8  Using your own benchmarks</A>」節参照。

<DT><CODE>crash-me</CODE> テスト
<DD>
これは、データベースがサポートしている機能と、その許容量と制限を決定しよ
うとします。 「<A HREF="manual.ja_Performance.html#Benchmarks">10.8  Using your own benchmarks</A>」節参照。
</DL>

<P>
他のテストは我々の内部製品環境で最新の <STRONG>MySQL</STRONG> バージョンを我々が
少なくとも1つのマシンで使用することです。我々は動作のため 100ギガバイト
以上のデータを持ちます。

</P>


<H2><A NAME="Many_versions" HREF="manual.ja_toc.html#Many_versions">4.4  アップデートがリリースされる方法と時</A></H2>

<P>
<STRONG>MySQL</STRONG> は TcX でかなり速く進化していて、我々はこれを他の 
<STRONG>MySQL</STRONG> ユーザに共有してもらいたいです。我々は、他の人が必要とし
ていると思われるとても便利な機能を持った時に、リリースの作成を試みます。

</P>
<P>
我々は、実装が簡単な機能を要求するユーザの手助けも試みます。我々は、我々
のライセンスユーザが求めるものにも注目し、特に我々の拡張 email サポート
顧客が求めるものに注目して、彼らの手助けを試みます。

</P>
<P>
新しいリリースをダウンロードする必要はありません。News 節は、新しいリリー
スが、あなたが本当に求める何かを持っているかどうかをあなたに教えます。
 「<A HREF="manual.ja_News.html#News">D  <STRONG>MySQL</STRONG> change history</A>」節参照。

</P>
<P>
我々は <STRONG>MySQL</STRONG> の更新時には次のポリシーを使用します:

</P>

<UL>
<LI>

それぞれのマイナーアップデートで、バージョン文字列中の最後の数値が増加し
ます。主要な新機能や前のバージョンとのマイナーな非互換があった時には、バー
ジョン文字列中の2番目の数値が増加します。ファイル形式が変更した時、最初
の数値が増加します。

<LI>

安定にテストされたリリースは年に約 1-2 回現れます。しかし小さなバグが見
つかった場合は、バグフィックスだけのリリースがリリースされます。

<LI>

作業中のリリースは約 1-8 週間毎に現れます。

<LI>

いくつかのプラットフォームのためのバイナリ配布は我々によってメジャーリリー
スから作られます。他の人が他のシステムのためにバイナリ配布を作りますが、
おそらく頻繁ではありません。

<LI>

通常、小さなバグを見つけて修正するとすぐに、有効なパッチを作ります。

<LI>

危険ではないけれども困らされるバグには、我々に知らせて頂ければ有効なパッ
チを作成します。その他の場合、大きなパッチの中にそれらの多くを結合します。

<LI>

偶然、致命的なバグがリリース中にある場合、我々は新しいリリースを可能な限
りすぐに作ります。他の会社もそうしてもらいたいです。:)
</UL>

<P>
現在の安定リリースは 3.22 です; 我々はすでに 3.23 の開発に移行しています。
安定バージョンでもバグは
まだ修正されます。バグ修正と ``行なわれるべき'' ことからも離れるような、
完全な凍結とは思っていません。``いくらか凍結'' は ``ほとんど確実に既に動
作しているものに影響しない'' 小さなことを追加するであろうことを意味しま
す。

</P>


<H2><A NAME="Installation_layouts" HREF="manual.ja_toc.html#Installation_layouts">4.5  インストールレイアウト</A></H2>

<P>
この節では、バイナリとソース配布のインストールで生成されるディレクトリの
デフォルトのレイアウトを説明します。

</P>
<P>
バイナリ配布はアンパックすることによりインストールされ、インストール場所
はあなたが選択した場所(通常 <TT>`/usr/local/mysql'</TT>)の中の次のディレクト
リを選択し生成します:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>ディレクトリ</STRONG> </TD><TD> <STRONG>ディレクトリの内容</STRONG>
</TR NOSAVE>
<TR><TD><TT>`bin'</TT> </TD><TD> クライアントプログラム, <CODE>mysqld</CODE> サーバ
</TR NOSAVE>
<TR><TD><TT>`data'</TT> </TD><TD> ログファイル, データベース
</TR NOSAVE>
<TR><TD><TT>`include'</TT> </TD><TD> Include (header) files
</TR NOSAVE>
<TR><TD><TT>`lib'</TT> </TD><TD> Libraries
</TR NOSAVE>
<TR><TD><TT>`scripts'</TT> </TD><TD> <CODE>mysql_install_db</CODE>
</TR NOSAVE>
<TR><TD><TT>`share/mysql'</TT> </TD><TD> エラーメッセージファイル
</TR NOSAVE>
<TR><TD><TT>`sql-bench'</TT> </TD><TD> ベンチマーク
</TR>
</TABLE>

<P>
ソース配布は configure しコンパイルした後にインストールされます。デフォ
ルトではインストールステップは <TT>`/usr/local'</TT> 配下のファイルを次のサ
ブディレクトリにインストールします:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>ディレクトリ</STRONG> </TD><TD> <STRONG>ディレクトリの内容</STRONG>
</TR NOSAVE>
<TR><TD><TT>`bin'</TT> </TD><TD> クライアントプログラムとスクリプト
</TR NOSAVE>
<TR><TD><TT>`include/mysql'</TT> </TD><TD> インクルードファイル
</TR NOSAVE>
<TR><TD><TT>`info'</TT> </TD><TD> Info 形式のドキュメント
</TR NOSAVE>
<TR><TD><TT>`lib/mysql'</TT> </TD><TD> Libraries
</TR NOSAVE>
<TR><TD><TT>`libexec'</TT> </TD><TD> <CODE>mysqld</CODE> サーバ
</TR NOSAVE>
<TR><TD><TT>`share/mysql'</TT> </TD><TD> エラーメッセージファイル
</TR NOSAVE>
<TR><TD><TT>`sql-bench'</TT> </TD><TD> ベンチマークと <CODE>crash-me</CODE> test
</TR NOSAVE>
<TR><TD><TT>`var'</TT> </TD><TD> データベースとログファイル
</TR>
</TABLE>

<P>
ソースインストールのレイアウトはバイナリインストールと次の点が異なります:

</P>

<UL>
<LI>

<CODE>mysqld</CODE> サーバは <TT>`/bin'</TT> ではなく 
<TT>`libexec'</TT> ディレクトリにインストールされます。
<LI>

データディレクトリは <TT>`data'</TT> ではなく 
<TT>`var'</TT> です。
<LI>

<CODE>mysql_install_db</CODE> は <TT>`/usr/local/mysql/scripts'</TT> ではなく
<TT>`/usr/local/bin'</TT> ディレクトリにインストールされます。

<LI>

ヘッダーファイルのディレクトリは <TT>`include/mysql'</TT> で、
ライブラリのディレクトリは <TT>`lib/mysql'</TT> です。
<TT>`include'</TT> や <TT>`lib'</TT> ではありません。
</UL>



<H2><A NAME="Installing_binary" HREF="manual.ja_toc.html#Installing_binary">4.6  <STRONG>MySQL</STRONG> バイナリ配布のインストール</A></H2>

<P>
次にさらに詳細な説明を行ないます:

</P>
<P>
<STRONG>MySQL</STRONG> バイナリ配布をインストールするには、次のツールが必要です:

</P>

<UL>
<LI>

GNU <CODE>gunzip</CODE>。配布の伸長のため。

<LI>

適正な <CODE>tar</CODE>。配布の展開のため。GNU <CODE>tar</CODE> は動くことが知られて
います。
</UL>

<P>
<A NAME="IDX38"></A>
<A NAME="IDX39"></A>
Linux では、代わりのインストール方法として RPM (RedHat Package
Manager) を使用することができます。  「<A HREF="manual.ja_Installing.html#Linux-RPM">4.6.1  Linux RPM notes</A>」節参照.

</P>
<P>
問題が起きたときは、<a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> に質問を投稿する時に 
<CODE>mysqlbug</CODE> を<STRONG>常に使用してください</STRONG>。問題がバグでないとして
も、<CODE>mysqlbug</CODE> はあなたの問題を解決する助けになるであろうシステム情
報を収集します。<CODE>mysqlbug</CODE> を使用しないと、あなたの問題の解決を得る
可能性が小さくなります！ <CODE>mysqlbug</CODE> は、配布のアンパック後に 
<TT>`bin'</TT> ディレクトリ内に見つけられます。 「<A HREF="manual.ja_Questions.html#Bug_reports">2.3  バグや問題を報告する方法</A>」節参照.

</P>
<P>
<STRONG>MySQL</STRONG> バイナリ配布をインストールし、使用するために行なわなければならない
基本的なコマンド:

</P>

<PRE>
shell&#62; gunzip &#60; mysql-VERSION-OS.tar.gz | tar xvf -
shell&#62; ln -s mysql-VERSION-OS mysql
shell&#62; cd mysql
shell&#62; scripts/mysql_install_db
shell&#62; bin/safe_mysqld &#38;
</PRE>

<P>
Here follows a more detailed description:

</P>
<P>
バイナリ配布のインストールには、次のステップに従い、それから インストー
ル後のセットアップとテストのために  「<A HREF="manual.ja_Installing.html#Post-installation">4.15  インストール後の設定とテスト</A>」節 に進んでくだ
さい。

</P>

<OL>
<LI>

配下に配布をアンパックしたいディレクトリを選んで、そこに移ってください。
以下の例では、<TT>`/usr/local'</TT> 配下に配布をアンパックし、<STRONG>MySQL</STRONG> 
をインストールするディレクトリ <TT>`/usr/local/mysql'</TT> を生成します。(し
たがって、以下の指示は <TT>`/usr/local'</TT> にファイルを生成するパーミッショ
ンを持っているとみなします。ディレクトリがプロテクトされている場合は、
<CODE>root</CODE> でインストールを行なう必要があります。)

<LI>

配布ファイル  「<A HREF="manual.ja_Installing.html#Getting_MySQL">4.1  <STRONG>MySQL</STRONG> を得る方法</A>」節. にリストされたサイトの一つから得てください。

<STRONG>MySQL</STRONG> バイナリ配布は圧縮された <CODE>tar</CODE> アーカイブとして提供
され、<TT>`mysql-VERSION-OS.tar.gz'</TT> のような名前を持ちます。ここで 
<CODE>VERSION</CODE> は数値(例えば、<CODE>3.21.15</CODE>)で、<CODE>OS</CODE> は配布が意図
しているオペレーティングシステムの種類を表します(例えば 
<CODE>pc-linux-gnu-i586</CODE>)。

<LI>

配布をアンパックし、インストールディレクトリを生成してください:


<PRE>
shell&#62; gunzip &#60; mysql-VERSION-OS.tar.gz | tar xvf -
shell&#62; ln -s mysql-VERSION-OS mysql
</PRE>

最初のコマンドは <TT>`mysql-VERSION-OS'</TT> という名前のディレクトリを生成
します。二番目のコマンドはそのディレクトリにシンボリックリンクを作成しま
す。これはインストールディレクトリを <TT>`/usr/local/mysql'</TT> として、よ
り簡単に参照させるためです。

<LI>

インストールディレクトリに移ってください:


<PRE>
shell&#62; cd mysql
</PRE>

いくつかのファイルとサブディレクトリが <CODE>mysql</CODE> ディレクトリ中に見つ
けられます。インストール目的の最も重要なものは <TT>`bin'</TT> と 
<TT>`scripts'</TT> サブディレクトリです。

<DL COMPACT>

<DT><TT>`bin'</TT>
<DD>
<A NAME="IDX40"></A>
<A NAME="IDX41"></A>
このディレクトリはクライアントプログラムとサーバを含んでいます。シェルが 
<STRONG>MySQL</STRONG> プログラムを正しく見つけられるように、このディレクトリの
フルパス名をあなたの <CODE>PATH</CODE> 環境変数に追加すべきです。
<DT><TT>`scripts'</TT>
<DD>
このディレクトリは <CODE>mysql_install_db</CODE> スクリプトを含んでいます。こ
れはサーバアクセスパーミッションを初期化するために使用されます。
</DL>

<LI>

<CODE>mysqlaccess</CODE> を使用し、かつ <STRONG>MySQL</STRONG> 配布を非標準の場所に持
ちたい場合は、<CODE>mysqlaccess</CODE> が <CODE>mysql</CODE> クライアントを見つけよ
うとする場所を変更する必要があります。<TT>`bin/mysqlaccess'</TT> スクリプト
の 18 行目付近を編集してください。次のような行を探してください:


<PRE>
$MYSQL     = '/usr/local/bin/mysql';    # path to mysql executable
</PRE>

パスを <CODE>mysql</CODE> が実際にシステム上におかれている場所を示すように変更
してください。これを行なわないと、<CODE>mysqlaccess</CODE> 実行時に 
<CODE>broken pipe</CODE> エラーになるでしょう。

<LI>

<STRONG>MySQL</STRONG> 許可テーブルを作成します
 (これは初めて <STRONG>MySQL</STRONG> をインストールするときだけ行います):

<PRE>
shell&#62; scripts/mysql_install_db
</PRE>

3.22.10以前のバージョンの <STRONG>MySQL</STRONG> は、<CODE>mysql_install_db</CODE>. 実行時に
<STRONG>MySQL</STRONG> を起動していましたが、もはやこれは起動しなくなりました

<LI>

Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> インタフェースのサポートをインストールしたい
場合、 「<A HREF="manual.ja_Installing.html#Perl_support">4.10  Perl のインストールについて</A>」節 を見てください。

<LI>

<STRONG>MySQL</STRONG> をマシン起動時に自動的に開始したい場合、
<CODE>support-files/mysql.server</CODE> をシステムのスタートアップファイルがある場所にコ
ピーしてください。さらなる情報は <CODE>support-files/mysql.server</CODE> スクリプト自身
の中と、 「<A HREF="manual.ja_Installing.html#Automatic_start">4.15.3  <STRONG>MySQL</STRONG> の自動起動と自動停止</A>」節 に見つけられます。
</OL>

<P>
全てがアンパックされてインストールされた後、配布の初期化とテストを行なう
べきです。

</P>
<P>
<STRONG>MySQL</STRONG> サーバーは以下のコマンドで開始できます：

</P>

<PRE>
shell&#62; bin/safe_mysqld &#38;
</PRE>

<P>
 「<A HREF="manual.ja_Installing.html#Post-installation">4.15  インストール後の設定とテスト</A>」節参照.

</P>
<P>
<A NAME="IDX42"></A>
<A NAME="IDX43"></A>


<H3><A NAME="Linux-RPM" HREF="manual.ja_toc.html#Linux-RPM">4.6.1  Linux RPM notes</A></H3>

<P>
（訳注：もし RedHat 以外の Linux を使用しており、.rpm を、自分が使用している
パッケージ管理システムの管理下におきたい場合、<STRONG>alien : http://kitenet.net/programs/alien/</STRONG> というツールを
使用します。これは RPM(Debian, Slackware) を自分が使用しているパッケージの形式に変換してくれます。
）

</P>
<P>
RPM を使用して <STRONG>MySQL</STRONG> をインストールすることを推奨します。
<STRONG>MySQL</STRONG> RPMS は RedHat 5.2 で作成していますが、
他の <CODE>rpm</CODE> と <CODE>glibc</CODE> をサポートしている Linux でも動作するでしょう。

</P>
<P>
RPM file での問題, 例えば <CODE>Sorry, the host
'xxxx' could not be looked up</CODE> は、see  「<A HREF="manual.ja_Installing.html#Binary_notes-Linux">4.6.3.1  Linux notes</A>」節.

</P>
<P>
以下が使用するであろう RPM files です:

</P>

<UL>
<LI><CODE>MySQL-VERSION.i386.rpm</CODE>

<STRONG>MySQL</STRONG> サーバー。
ただ単に他のマシン上で走っている <STRONG>MySQL</STRONG> サーバーに接続するだけなら、
これは不要でしょう。

<LI><CODE>MySQL-client-VERSION.i386.rpm</CODE>

<STRONG>MySQL</STRONG> クライアント標準プログラム。
このパッケージはほとんどの場合インストールすることになるでしょう。

<LI><CODE>MySQL-bench-VERSION.i386.rpm</CODE>

ベンチマーク。perl msql-mysql-modules RPM が必要。

<LI><CODE>MySQL-devel-VERSION.i386.rpm</CODE>

他の <STRONG>MySQL</STRONG> クライアント(perlモジュールのような)をコンパイルするのに必要な
ライブラリーとインクルードファイルを含みます。

<LI><CODE>MySQL-VERSION.src.rpm</CODE>

上記全てのソース。これは他のアーキテクチャ用に RPM を作成する場合にのみ必要でしょう。
(例えば Alpha or SPARC).
</UL>

<P>
RPM パッケージに含まれるファイルをみるには:

<PRE>
shell&#62; rpm -qpl MySQL-VERSION.i386.rpm
</PRE>

<P>
インストールの最小の方法：

</P>

<PRE>
shell&#62; rpm -i MySQL-VERSION.i386.rpm MySQL-client-VERSION.i386.rpm
</PRE>

<P>
クライアントパッケージだけをインストール：

</P>

<PRE>
shell&#62; rpm -i MySQL-client-VERSION.i386.rpm
</PRE>

<P>
RPM はデータを <TT>`/var/lib/mysql'</TT> に保存します。
RPM は起動時にサーバーを立ちあげるように、<TT>`/etc/rc.d/'</TT> に登録します。
(This means that if you have performed a previous
installation, you may want to make a copy of your previously-installed
<STRONG>MySQL</STRONG> startup file if you made any changes to it, so you don't lose
your changes.)

</P>
<P>
After installing the RPM file(s), the <TT>`mysqld'</TT> demon should be running
and you should now be able to start using MySQL.
 「<A HREF="manual.ja_Installing.html#Post-installation">4.15  インストール後の設定とテスト</A>」節参照.

</P>
<P>
If something goes wrong, can find more information in the binary
installation chapter.  「<A HREF="manual.ja_Installing.html#Installing_binary">4.6  <STRONG>MySQL</STRONG> バイナリ配布のインストール</A>」節参照.

</P>
<P>
<A NAME="IDX44"></A>
<A NAME="IDX45"></A>


<H3><A NAME="Building_clients" HREF="manual.ja_toc.html#Building_clients">4.6.2  クライアントプログラムのビルド</A></H3>

<P>
自分で書いたか、第三者が作成した <STRONG>MySQL</STRONG> クライアントプログラムをコンパイルする場合、
<CODE>-lmysqlclient</CODE> オプションを使用してリンクされなければなりません。
また <CODE>-L</CODE> オプションを指定して、ライブラリがどこにあるか指定する必要がある場合もあります。
例えばライブラリが <TT>`/usr/local/mysql/lib'</TT> にインストールされるならば、
リンクの時に <CODE>-L/usr/local/mysql/lib -lmysqlclient</CODE> と指定します。

</P>
<P>
<STRONG>MySQL</STRONG> ヘッダーファイルを使用するクライアントのために、
あなたがそれらをコンパイルする時には、<CODE>-I</CODE> オプションを指定しなければならない事もあります。
(例えば, <CODE>-I/usr/local/mysql/include</CODE>)

</P>



<H3><A NAME="Binary_install_system_issues" HREF="manual.ja_toc.html#Binary_install_system_issues">4.6.3  System 特有の問題</A></H3>

<P>
以下のセクションでは特定のシステム上に起こると認められたいくつかの問題のを示します。

</P>


<H4><A NAME="Binary_notes-Linux" HREF="manual.ja_toc.html#Binary_notes-Linux">4.6.3.1  Linux notes</A></H4>

<P>
TcX のバイナリリリースは <CODE>-static</CODE> でリンクされており、これはあなたのシステムが
どのバージョンのライブラリーを使用しているか気にする必要がありません。
よって、LinuxThreads もこの場合必要ありません。
<CODE>-static</CODE> でリンクされたプログラムのサイズは
ダイナミックリンクされたプログラムより大きくなりますが、少し(3-5%)速くなります。
しかし一つの問題として、このスタティックリンクされたプログラムでは、
ユーザー定義関数(UDF)が使用できないことです。
もし UDF を使用する(書く)場合(C, C++とかで)、自分自身で <STRONG>MySQL</STRONG> を
ダイナミックリンクを使用してコンパイルしなくてはなりません。

</P>
<P>
もし <CODE>glibc2</CODE> ではなく libc5 のシステムを使用しているなら、
このバイナリリリースではホスト名解決とgetpwnam()にいくつか問題が出ます。
(これは <CODE>glibc</CODE> がホスト名解決とgetwpent()にいくつかの外部ライブラリに
依存しているためで、たとえ <CODE>-static</CODE> リンクしても解決しません).
この場合、<CODE>mysql_install_db</CODE> 実行時に以下のエラーが出るでしょう：

</P>

<PRE>
Sorry, the host 'xxxx' could not be looked up
</PRE>

<P>
あるいは、<CODE>--user</CODE> オプションで mysqld を起動しようとしたとき、
以下のエラーが出る場合：

</P>

<PRE>
getpwnam: No such file or directory
</PRE>

<P>
この問題は、以下のうちのどれかの方法で解決できます：

</P>

<UL>
<LI>

<STRONG>MySQL</STRONG> ソース配布を入手し( RPM か <CODE>tar</CODE> )、代わりに
インストールします。

<LI>

<CODE>mysql_install_db --force</CODE> を実行します; これは <CODE>mysql_install_db</CODE> に
かかれている <CODE>resolveip</CODE> テストを実行しません。
また許可テーブル内でホスト名が使えなくなっています； 
ホスト名でなく IP アドレスで登録します (<CODE>localhost</CODE> は除).
もし <CODE>--force</CODE> を持っていないような古い <STRONG>MySQL</STRONG> を使用しているなら、
エディターで、<CODE>resolveip</CODE> テストを <CODE>mysql_install</CODE> から削除します。
<LI>

mysqld を <CODE>--user</CODE> の代わりに <CODE>su</CODE> で起動。
</UL>

<P>
Linux-Intel binary と <STRONG>MySQL</STRONG> RPM リリースは、もっとも速くなるように
調整されています。我々はもっとも早く安定したコンパイラーを常に使用しています。

</P>



<H4><A NAME="Binary_notes-HP-UX" HREF="manual.ja_toc.html#Binary_notes-HP-UX">4.6.3.2  HP-UX notes</A></H4>

<P>
The binary distribution of <STRONG>MySQL</STRONG> for HP-UX is distributed as an
HP depot file and as a tar file.  To use the depot file you must be running at
least HP-UX 10.x to have access to HP's software depot tools.

</P>
<P>
The HP version of <STRONG>MySQL</STRONG> was compiled on an HP 9000/8xx server
under HP-UX 10.20, and uses MIT-pthreads. It is known to work
well under this configuration.
<STRONG>MySQL</STRONG> 3.22.26 and newer can also be built with HP's native
thread package.

</P>
<P>
Other configurations that may work:

</P>

<UL>
<LI>

HP 9000/7xx running HP-UX 10.20+
<LI>

HP 9000/8xx running HP-UX 10.30
</UL>

<P>
The following configurations almost definitely won't work:

</P>

<UL>
<LI>

HP 9000/7xx or 8xx running HP-UX 10.x where x &#60; 2
<LI>

HP 9000/7xx or 8xx running HP-UX 9.x
</UL>

<P>
To install the distribution, use one of the
commands below, where <CODE>/path/to/depot</CODE> is the full path to the depot file:

</P>

<UL>
<LI>

To install everything, including the server, client and development tools:


<PRE>
shell&#62; /usr/sbin/swinstall -s /path/to/depot mysql.full
</PRE>

<LI>

To install only the server:


<PRE>
shell&#62; /usr/sbin/swinstall -s /path/to/depot mysql.server
</PRE>

<LI>

To install only the client package:


<PRE>
shell&#62; /usr/sbin/swinstall -s /path/to/depot mysql.client
</PRE>

<LI>

To install only the development tools:


<PRE>
shell&#62; /usr/sbin/swinstall -s /path/to/depot mysql.developer
</PRE>

</UL>

<P>
The depot places binaries and libraries in <TT>`/opt/mysql'</TT> and data in
<TT>`/var/opt/mysql'</TT>. The depot also creates the appropriate entries in
<TT>`/sbin/init.d'</TT> and <TT>`/sbin/rc2.d'</TT> to start the server automatically
at boot time. Obviously, this entails being <CODE>root</CODE> to install.

</P>
<P>
To install the HP-UX tar distribution, you must have a copy of GNU <CODE>tar</CODE>.

</P>


<H2><A NAME="Installing_source" HREF="manual.ja_toc.html#Installing_source">4.7  <STRONG>MySQL</STRONG> ソース配布のインストール</A></H2>

<P>
ソースから <STRONG>MySQL</STRONG> を作成しインストールするためには次のツールが必
要です:

</P>

<UL>
<LI>

GNU <CODE>gunzip</CODE>。配布の伸張のため。

<LI>

適正な <CODE>tar</CODE>。配布の展開のため。GNU <CODE>tar</CODE> は動くことが知られて
います。

<LI>

ANSI C++ コンパイラ。<CODE>gcc</CODE> &#62;= 2.8.1, <CODE>egcs</CODE> &#62;= 1.0.2, SGI C++,
SunPro C++ は働くことが知られているコンパイラのいくつかです。
<CODE>libg++</CODE> は <CODE>gcc</CODE> 使用時には必要ではありません。<CODE>gcc</CODE>
2.7.x は、<TT>`sql/sql_base.cc'</TT> のような、完全に正当な C++ ファイルのい
くつかをコンパイルできないというバグがあります。<CODE>gcc</CODE> 2.7.x だけし
かなければ、<STRONG>MySQL</STRONG> をコンパイルできるように <CODE>gcc</CODE> をアップ
グレードする必要があります。

<LI>

良い <CODE>make</CODE> プログラム。GNU <CODE>make</CODE> は常に推奨され、時々は必要
とされます。問題があれば GNU <CODE>make</CODE> 3.75 以上を試すことをお勧めしま
す。
</UL>

<P>
問題が起きたときは、<a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> に質問を投稿する時に 
<STRONG><CODE>mysqlbug</CODE> を常に使用してください</STRONG>。問題がバグでないとして
も、<CODE>mysqlbug</CODE> はあなたの問題を解決する助けになるであろうシステム情
報を収集します。<CODE>mysqlbug</CODE> を使用しないと、あなたの問題の解決を得る
可能性が小さくなります！ <CODE>mysqlbug</CODE> は、配布のアンパック後に 
<TT>`scripts'</TT> ディレクトリ内に見つけられます。 「<A HREF="manual.ja_Questions.html#Bug_reports">2.3  バグや問題を報告する方法</A>」節参照。

</P>



<H3><A NAME="Quick_install" HREF="manual.ja_toc.html#Quick_install">4.7.1  素早いインストールの概要</A></H3>

<P>
<STRONG>MySQL</STRONG> をソースからインストールするために行なわなければならない
基本的なコマンド(from an unpacked <CODE>tar</CODE> file):

</P>

<PRE>
shell&#62; ./configure
shell&#62; make
shell&#62; make install
shell&#62; scripts/mysql_install_db
shell&#62; /usr/local/mysql/bin/safe_mysqld &#38;
</PRE>

<P>
RPM ソースから開始する場合は：

</P>

<PRE>
shell&#62; rpm --rebuild MySQL-VERSION.src.rpm
</PRE>

<P>
これはインストールできるRPMバイナリを作成します

</P>
<P>
もし <CODE>DBI</CODE> と <CODE>Msql-Mysql-modules</CODE> Perl モジュールをインストールするなら、
<CODE>bin/mysql_setpermission</CODE> スクリプトが使用する新しいユーザーを
追加することができます。

</P>
<P>
次にさらに詳細な説明を行ないます:

</P>
<P>
ソース配布のインストールには、次のステップに従い、それから インストール
後の初期化とテストのために  「<A HREF="manual.ja_Installing.html#Post-installation">4.15  インストール後の設定とテスト</A>」節参照 に進んでください。

</P>

<OL>
<LI>

配布をアンパックしたいディレクトリを選んで、そこに移ってください。

<LI>

配布ファイルを  「<A HREF="manual.ja_Installing.html#Getting_MySQL">4.1  <STRONG>MySQL</STRONG> を得る方法</A>」節. にリストされたサイトの一つから得てください。

<STRONG>MySQL</STRONG> ソース配布は圧縮された <CODE>tar</CODE> アーカイブとして提供さ
れ、<TT>`mysql-VERSION.tar.gz'</TT> のような名前を持ちます。ここで 
<CODE>VERSION</CODE> は 3.22.21 のような番号です。

<LI>

カレントディレクトリに配布をアンパックしてください:

<PRE>
shell&#62; gunzip &#60; mysql-VERSION.tar.gz | tar xvf -
</PRE>

このコマンドは <TT>`mysql-VERSION'</TT> という名前のディレクトリを作成します。

<LI>

アンパックされた配布のトップレベルディレクトリに移ってください:

<PRE>
shell&#62; cd mysql-VERSION
</PRE>

<LI>

リリースを configure し、全てをコンパイルしてください:

<PRE>
shell&#62; ./configure --prefix=/usr/local/mysql
shell&#62; make
</PRE>

<CODE>configure</CODE> の実行時、いくつかのオプションを指定できます。オプショ
ンの一覧は <CODE>./configure --help</CODE> を実行してください。 「<A HREF="manual.ja_Installing.html#configure_options">4.7.3  典型的な configure オプション</A>」節, さらに有用なオプションのいくつかに
ついて議論しています。

<CODE>configure</CODE> が失敗して、援助を得るために <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> にメー
ルを送ろうとする場合、<TT>`config.log'</TT> から問題の解決の手助けにできると
考えられる行を含めてください。<CODE>configure</CODE> が異常終了する場合、
<CODE>configure</CODE> からの出力の最後の数行も含めてください。バグレポートは 
<CODE>mysqlbug</CODE> スクリプトを使用して投稿してください。 「<A HREF="manual.ja_Questions.html#Bug_reports">2.3  バグや問題を報告する方法</A>」節参照。

コンパイルが失敗する場合、いくらかのよくある問題での手助けのため、
 「<A HREF="manual.ja_Installing.html#Compilation_problems">4.8  コンパイルの問題か？</A>」節 を参照してください。

<LI>

全てをインストールしてください:

<PRE>
shell&#62; make install
</PRE>

このコマンドは <CODE>root</CODE> として実行する必要があります。

<LI>

<STRONG>MySQL</STRONG> 特権テーブルを生成してください(necessary only if you haven't
installed <STRONG>MySQL</STRONG> before):

<PRE>
shell&#62; scripts/mysql_install_db
</PRE>

注意: 3.22.10 より古い <STRONG>MySQL</STRONG> バージョンでは、
<CODE>mysql_install_db</CODE> 実行時に <STRONG>MySQL</STRONG> サーバが開始されましたが、
これはもはや真ではありません！

<LI>

Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> インタフェースのサポートをインストールしたい
場合、 「<A HREF="manual.ja_Installing.html#Perl_support">4.10  Perl のインストールについて</A>」節 を見てください。

<LI>

<STRONG>MySQL</STRONG> をマシン起動時に自動的に開始したい場合、
<CODE>support-files/mysql.server</CODE> をシステムのスタートアップファイルがあ
る場所にコピーしてください。さらなる情報は 
<CODE>support-files/mysql.server</CODE> スクリプト自身の中と、 「<A HREF="manual.ja_Installing.html#Automatic_start">4.15.3  <STRONG>MySQL</STRONG> の自動起動と自動停止</A>」節 に見つけられます。
</OL>

<P>
全てがインストールされた後、配布の初期化とテストを行なうべきです。

</P>
<P>
<STRONG>MySQL</STRONG> サーバーを以下のコマンドで開始できます。
<CODE>BINDIR</CODE> は <CODE>safe_mysqld</CODE> がインストールされているディレクトリ
(<TT>`/usr/local/bin'</TT> by default) です:

</P>

<PRE>
shell&#62; BINDIR/safe_mysqld &#38;
</PRE>

<P>
コマンドがすぐに <CODE>mysqld daemon ended</CODE> エラーで失敗する場合、
<TT>`mysql-data-directory/'hostname'.err'</TT> ファイルになんらかの情報を
見つけることができます。 よくあることとして、すでに他の <CODE>mysqld</CODE> が
走っている場合などがあります。  「<A HREF="manual.ja_Common_problems.html#Multiple_servers">19.3  同一マシン上に複数の <STRONG>MySQL</STRONG> サーバーを走らせる</A>」節参照.

</P>
<P>
 「<A HREF="manual.ja_Installing.html#Post-installation">4.15  インストール後の設定とテスト</A>」節参照。

</P>


<H3><A NAME="Applying_patches" HREF="manual.ja_toc.html#Applying_patches">4.7.2  パッチの適用</A></H3>

<P>
時々、パッチは、メーリング・リストに流されたり、または
<STRONG>MySQL</STRONG> FTPサイトの <a HREF="ftp://www.mysql.com/pub/mysql/Downloads/Patches">パッチエリア</a> に置かれます。

</P>
<P>
メーリング・リストからのパッチを適用するには、パッチが載っているメッセージを
ファイルに保存して、あなたの <STRONG>MySQL</STRONG> ソース・ツリーの
一番上のディレクトリーに移動し、以下のようにコマンドを実行します：

</P>

<PRE>
shell&#62; patch -p1 &#60; patch-file-name
shell&#62; rm config.cache
shell&#62; make clean
</PRE>

<P>
FTPサイトに置かれるパッチは、プレーンテキストファイルとして、
あるいは <CODE>gzip</CODE> で圧縮されたファイルとして頒布されます。
プレーンテキストのパッチの場合は、上に示したメーリングリストの
パッチと同様に適用します。 圧縮されたパッチを適用するには、
 <STRONG>MySQL</STRONG> ソース・ツリーの
一番上のディレクトリーに移動し、以下のようにコマンドを実行します：

</P>

<PRE>
shell&#62; gunzip  &#60; patch-file-name.gz | patch -p1
shell&#62; rm config.cache
shell&#62; make clean
</PRE>

<P>
それから通常のソースインストールの指示を <CODE>./configure</CODE> ステップから
始めます。<CODE>make install</CODE> ステップ実行後、あなたの <STRONG>MySQL</STRONG> サー
バを再起動します。

</P>
<P>
<CODE>make install</CODE> を実行する前に、現在走っているサーバーを止める必要があるかもしれません。
( <CODE>mysqladmin shutdown</CODE> で止めます ) 
いくつかのシステムでは、現在実行しているものを止めない限り、
新しいバージョンをインストールできないようになっています。

</P>



<H3><A NAME="configure_options" HREF="manual.ja_toc.html#configure_options">4.7.3  典型的な configure オプション</A></H3>

<P>
<CODE>configure</CODE> スクリプトは <STRONG>MySQL</STRONG> 配布をどのようにコンフィグ
するかを制御するための多くの処理を提供します。典型的には、
<CODE>configure</CODE> コマンドラインにオプションを使用してこれを行ないます。
いくつかの環境変数を使用しても <CODE>configure</CODE> に影響を与えることができ
ます。<CODE>configure</CODE> がサポートするオプションの一覧は、次のコマンドを
実行してください:

</P>

<PRE>
shell&#62; ./configure --help
</PRE>

<P>
良く使われる <CODE>configure</CODE> オプションのいくつか以下に説明します:

</P>

<UL>
<LI>

<STRONG>MySQL</STRONG> クライアントライブラリとクライアントプログラムだけをコン
パイルするには、<CODE>--without-server</CODE> オプションを使用してください:


<PRE>
shell&#62; ./configure --without-server
</PRE>

C++ コンパイラがなければ、<CODE>mysql</CODE> はコンパイルできません(これは C++ 
を要求するクライアントプログラムの一つです)。この場合、<CODE>configure</CODE> 
から C++ コンパイラをテストするコードを削除でます。それから 
<CODE>./configure</CODE> を <CODE>--without-server</CODE> オプションつきで実行してく
ださい。コンパイルステップは <CODE>mysql</CODE> の作成を試みますが、
<TT>`mysql.cc'</TT> についての警告は無視できます。(<CODE>make</CODE> が止まる場合、
エラーが発生しても残りの作成を継続するように <CODE>make -k</CODE> を試してくだ
さい。)

<LI>

ログファイルとデータベースディレクトリを <TT>`/usr/local/var'</TT> 配下にお
きたくない場合は、次の一つのような <CODE>configure</CODE> コマンドを使用してく
ださい:

<PRE>
shell&#62; ./configure --prefix=/usr/local/mysql
shell&#62; ./configure --prefix=/usr/local \
           --localstatedir=/usr/local/mysql/data
</PRE>

最初のコマンドはインストールプレフィックスを変更し、デフォルトの 
<TT>`/usr/local'</TT> ではなく <TT>`/usr/local/mysql'</TT> 配下にインストールし
ます。次のコマンドはデフォルトのインストールプレフィックスを保存しますが、
データベースディレクトリのデフォルト位置(通常は <TT>`/usr/local/var'</TT>)を
上書きし、<CODE>/usr/local/mysql/data</CODE> に変更します。

<LI>

UNIX を使用していて、ソケットの位置をデフォルト位置(通常は <TT>`/tmp'</TT> または 
<TT>`/var/run'</TT>)でなく他のどこかにしたい場合は、<CODE>configure</CODE> コマン
ドを次のように使用します:

<PRE>
shell&#62; ./configure --with-unix-socket-path=/usr/local/mysql/tmp/mysql.sock
</PRE>

ファイル名は絶対パス名でないといけません。

<LI>

静的リンクされたプログラムをコンパイルしたい場合(例えば、バイナリ配布を
作成するため、もっと速くするため、いくつかの RedHat 配布での問題を回避す
るため)は、次のように <CODE>configure</CODE> を実行します:


<PRE>
shell&#62; ./configure --with-client-ldflags=-all-static \
           --with-mysqld-ldflags=-all-static
</PRE>

<LI>

<CODE>gcc</CODE> を使用していて、<CODE>libg++</CODE> や <CODE>libstdc++</CODE> がインストー
ルされていない場合、<CODE>configure</CODE> に <CODE>gcc</CODE> を C++ コンパイラとし
て使用することを伝えてください:

<A NAME="IDX46"></A>
<A NAME="IDX47"></A>
<A NAME="IDX48"></A>
<A NAME="IDX49"></A>

<PRE>
shell&#62; CC=gcc CXX=gcc ./configure
</PRE>

<CODE>gcc</CODE> を C++ コンパイラとして使用する時、<CODE>libg++</CODE> または 
<CODE>libstdc++</CODE> のリンクは試みません。

コンパイラやリンカが共有ライブラリ <TT>`libmysqlclient.so.#'</TT> を生成でき
ないというエラーになる場合、<CODE>--disable-shared</CODE> オプションを 
<CODE>configure</CODE> に与えることで、この問題を回避できます。この場合、
<CODE>configure</CODE> は共有ライブラリ <CODE>libmysqlclient.so.#</CODE> を作成しま
せん。

<LI>

非 <CODE>NULL</CODE> 項目(すなわち、<CODE>NULL</CODE> が許されていない項目)に 
<CODE>DEFAULT</CODE> 項目値を使用しないように <STRONG>MySQL</STRONG> をコンフィグでき
ます。これは、非 <CODE>NULL</CODE> 値を要求する全ての項目に値を明示的に指定し
なければ、<CODE>INSERT</CODE> ステートメントはエラーを生成します。デフォルト値
の使用を抑えるには、次のように <CODE>configure</CODE> を実行します:

<A NAME="IDX50"></A>
<A NAME="IDX51"></A>

<PRE>
shell&#62; CXXFLAGS=-DDONT_USE_DEFAULT_FIELDS ./configure
</PRE>

<LI>

デフォルトでは、<STRONG>MySQL</STRONG> は ISO-8859-1 (Latin1) 文字セットを使用し
ます。デフォルトセットを変更するには、<CODE>--with-charset</CODE> オプションを
使用します:

<PRE>
shell&#62; ./configure --with-charset=CHARSET
</PRE>

<CODE>CHARSET</CODE> は次の一つです: <CODE>big5</CODE>, <CODE>cp1251</CODE>, <CODE>cp1257</CODE>,
<CODE>czech</CODE>, <CODE>danish</CODE>,<CODE>dec8</CODE>, <CODE>dos</CODE>, <CODE>euc_kr</CODE>,
<CODE>gb2312</CODE> <CODE>gbk</CODE>, <CODE>german1</CODE>, <CODE>hebrew</CODE>, <CODE>hp8</CODE>,
<CODE>hungarian</CODE>, <CODE>koi8_ru</CODE>, <CODE>koi8_ukr</CODE>, <CODE>latin1</CODE>, <CODE>latin2</CODE>,
<CODE>sjis</CODE>, <CODE>swe7</CODE>, <CODE>tis620</CODE>, <CODE>ujis</CODE>, <CODE>usa7</CODE>,
<CODE>win1251</CODE> or <CODE>win1251ukr</CODE>.
 「<A HREF="manual.ja_Server.html#Character_sets">9.1.1  データとソートに使用されるキャラクターセット</A>」節参照.

注意: 文字セットを変更したい場合は、コンフィグレーション間で <CODE>make
distclean</CODE> を行なう必要があります！

サーバとクライアント間で文字を変換したい場合は、
<CODE>SET OPTION CHARACTER SET</CODE> コマンドを調べるべきです。
 「<A HREF="manual.ja_Reference.html#SET_OPTION">7.25  <CODE>SET OPTION</CODE> 構文</A>」節参照.

<A NAME="IDX52"></A>
<STRONG>警告:</STRONG> テーブルを生成した後に文字セットを変更する場合、
<CODE>myisamchk -r -q</CODE> を全てのテーブルに実行する必要があります。そうでな
いと、インデックスは正しくソートされません。(これは、<STRONG>MySQL</STRONG> のイ
ンストール時、いくつかのテーブルの生成時、異なる文字セットを使用して 
<STRONG>MySQL</STRONG> の再コンフィグ時、そして再インストール時に発生します。)

<LI>

デバッグコードつきで <STRONG>MySQL</STRONG> をコンフィグするには、
<CODE>--with-debug</CODE> オプションを使用します:

<PRE>
shell&#62; ./configure --with-debug
</PRE>

これにより、いくつかのエラーを見つけられる安全なメモリ割り当てが含まれ、
何が発生しているかについての出力を提供します。
 「<A HREF="manual.ja_Porting.html#Debugging_server">G.1  MySQL server のデバッグ</A>」節参照.

<LI>

固有のシステムに関係するオプションについては、この章より後のシステム固有
の節で見つけることができます。 「<A HREF="manual.ja_Installing.html#Source_install_system_issues">4.11  System-specific issue</A>」節参照。
</UL>



<H2><A NAME="Compilation_problems" HREF="manual.ja_toc.html#Compilation_problems">4.8  コンパイルの問題か？</A></H2>

<P>
Solaris 上で <CODE>gcc</CODE> を使用した場合、一切警告無く全ての <STRONG>MySQL</STRONG> プログラムがきれいに作れます。
他のシステムではインクルードファイルの違いから警告が出るかもしれません。
 MIT-pthreads を使用した際の警告は  「<A HREF="manual.ja_Installing.html#MIT-pthreads">4.9  MIT-pthreads に関して</A>」節 を参照してください。
他の問題は、以下をチェックしてください。

</P>
<P>
多くの問題の解決のために、再 configure が必要です。
あなたが再構成する必要があるならば、以下に気をつけてください：

</P>
<P>
<A NAME="IDX53"></A>
<A NAME="IDX54"></A>

<UL>
<LI>

もし <CODE>configure</CODE> を一度実行した後に実行するならば、 <CODE>configure</CODE> は
前に作った情報を利用します。この情報は <TT>`config.cache'</TT> に保存されます。
 <CODE>configure</CODE> は起動時にこのファイルを探し、もし存在するならば、
その中の情報が正しい物として読み込みます。
これはあなたが再コンフィグするならば無効になります。
<LI>

<CODE>configure</CODE> を実行するごとに、 <CODE>make</CODE> を実行してコンパイルしなければなりません。
しかし、最初に、前のビルドでできたオブジェクト
(違うコンフィグオプションにより生成されたオブジェクト)を、消しておいてください。
</UL>

<P>
古いコンフィグやオブジェクトファイルの使用を防ぐため、
 <CODE>configure</CODE> 前に以下のコマンドを実行してください：

</P>

<PRE>
shell&#62; rm config.cache
shell&#62; make clean
</PRE>

<P>
こうするかわりに、<CODE>make distclean</CODE> としても構いません。

</P>
<P>
以下に、 <STRONG>MySQL</STRONG> をコンパイルする際に起こりやすい問題をあげておきます：

</P>

<UL>
<LI>

<A NAME="IDX55"></A>
<A NAME="IDX56"></A>
<A NAME="IDX57"></A>
<A NAME="IDX58"></A>
<A NAME="IDX59"></A>
<TT>`sql_yacc.cc'</TT> コンパイル時に、以下のようなエラーが出た場合、
メモリー、スワップが足りません：


<PRE>
Internal compiler error: program cc1plus got fatal signal 11
  or
Out of virtual memory
  or
Virtual memory exhausted
</PRE>

この問題は、<CODE>gcc</CODE> がインライン展開で <TT>`sql_yacc.cc'</TT> をコンパイルするのに、
とても多くのメモリーを必要とするからです。
この場合、 <CODE>configure</CODE> を <CODE>--with-low-memory</CODE> オプション指定で実行します：


<PRE>
shell&#62; ./configure --with-low-memory
</PRE>

このオプションは、 <CODE>gcc</CODE> を使用しているなら <CODE>-fno-inline</CODE> オプションを
コマンドラインに加え、<CODE>gcc</CODE> 以外ならば <CODE>-O0</CODE> を加えます。
多くのメモリーとスワップを持っていない限りは、<CODE>--with-low-memory</CODE> オプションを使用すべきです。
この問題はけっこうなハードウェア構成でも起こることが知られています。
通常、 <CODE>--with-low-memory</CODE> オプションでこの問題は解決できます。

<LI>

標準では、<CODE>configure</CODE> は <CODE>c++</CODE> という名前でコンパイラーを使用し、
GNU <CODE>c++</CODE> は <CODE>-lg++</CODE> を使ってリンクします。
もし <CODE>gcc</CODE> を使用しているならば、コンフィグ時に以下のような問題が出るかもしれません：

<A NAME="IDX60"></A>

<PRE>
configure: error: installation or configuration problem:
C++ compiler cannot create executables.
</PRE>

<A NAME="IDX61"></A>
<A NAME="IDX62"></A>
この問題は、<CODE>g++</CODE>, <CODE>libg++</CODE> あるいは <CODE>libstdc++</CODE> に関連したものです。

原因の一つとして考えられることは、 <CODE>g++</CODE> を持っていないか、あるいは、
<CODE>g++</CODE> はあっても <CODE>libg++</CODE> か <CODE>libstdc++</CODE> がないという事です。
<TT>`config.log'</TT> ファイルは c++ コンパイラが動作しなかった理由を記録しています！
この問題を解決するに当たり、あなたが持っている C++ コンパイラーの代わりに
 <CODE>gcc</CODE> を使用しても構いません。<CODE>CXX</CODE> 環境変数に <CODE>"gcc -O3"</CODE> としてみてください。
例えば：

<A NAME="IDX63"></A>
<A NAME="IDX64"></A>

<PRE>
shell&#62; CXX="gcc -O3" ./configure
</PRE>

これは <CODE>gcc</CODE> が <CODE>g++</CODE> と同様に C++ ソースをコンパイルするので動きますが、
<CODE>libg++</CODE> か <CODE>libstdc++</CODE> が標準ではリンクされません。

他の解決方法は、もちろん、<CODE>g++</CODE>, <CODE>libg++</CODE>, <CODE>libstdc++</CODE> をインストールすることです。

<LI>

もし以下のエラーのどれかが起きた場合、 GNU <CODE>make</CODE> のバージョンを上げてください：


<PRE>
making all in mit-pthreads
make: Fatal error in reader: Makefile, line 18:
Badly formed macro assignment
  or
make: file `Makefile' line 18: Must be a separator (:
  or
pthread.h: No such file or directory
</PRE>

<A NAME="IDX65"></A>
<A NAME="IDX66"></A>
<A NAME="IDX67"></A>
<A NAME="IDX68"></A>
Solaris と FreeBSD の <CODE>make</CODE> プログラムには問題があることが知られています。

GNU <CODE>make</CODE> version 3.75 は動作確認されています。

<A NAME="IDX69"></A>
<A NAME="IDX70"></A>
<A NAME="IDX71"></A>
<A NAME="IDX72"></A>
<A NAME="IDX73"></A>
<A NAME="IDX74"></A>
<A NAME="IDX75"></A>
<A NAME="IDX76"></A>
<LI>

もし C,C++ のためにフラグを与えたい場合、<CODE>CFLAGS</CODE> と <CODE>CXXFLAGS</CODE> 環境変数に
フラグを追加してください。同様に、 <CODE>CC</CODE> と <CODE>CXX</CODE> にコンパイラー名を
与えることもできます。
例えば：


<PRE>
shell&#62; CC=gcc
shell&#62; CFLAGS=-O6
shell&#62; CXX=gcc
shell&#62; CXXFLAGS=-O6
shell&#62; export CC CFLAGS CXX CXXFLAGS
</PRE>

 「<A HREF="manual.ja_Installing.html#TcX_binaries">4.14  TcX binaries</A>」節 にはフラグの定義がリストされています。
色々なシステム上で役に立つと思います。

<LI>

以下のようなエラーの場合、<CODE>gcc</CODE> コンパイラーをアップグレードしてください：


<PRE>
client/libmysql.c:273: parse error before `__attribute__'
</PRE>

<CODE>gcc</CODE> 2.8.1 は動作することが確認されていますが、
<CODE>egcs</CODE> 1.0.3a 以上をお勧めします。

<LI>

<CODE>mysqld</CODE> コンパイル時に以下のようなエラーが出た場合、
<CODE>configure</CODE> が<CODE>accept()</CODE>, <CODE>getsockname()</CODE>, <CODE>getpeername()</CODE>
の最後の引数を正しく検出していません：


<PRE>
cxx: Error: mysqld.cc, line 645: In this statement, the referenced
     type of the pointer value "&#38;length" is "unsigned long", which
     is not compatible with "int".
new_sock = accept(sock, (struct sockaddr *)&#38;cAddr, &#38;length);
</PRE>

これを修正するには、<TT>`config.h'</TT> ファイル(<CODE>configure</CODE> により作られる) を修正します。
いかのように：


<PRE>
/* Define as the base type of the last arg to accept */
#define SOCKET_SIZE_TYPE XXX
</PRE>

<CODE>XXX</CODE> を <CODE>size_t</CODE> か <CODE>int</CODE> (あなたのオペレーティングシステムが依存している型)に変えます。
(<CODE>configure</CODE> すると毎回 <TT>`config.h'</TT> は作り直されるので、
この修正は <CODE>configure</CODE> する度に行わなければならないことに注意)

<LI>

<TT>`sql_yacc.cc'</TT> ファイルは <TT>`sql_yacc.yy'</TT> から生成されます。
通常、
<STRONG>MySQL</STRONG> が既に生成されたコピーとともにあるので、
<TT>`sql_yacc.cc'</TT> ファイルを自分自身で作成することはありません。
しかし、以下のエラーの場合、再作成する必要があります：


<PRE>
"sql_yacc.yy", line xxx fatal: default action causes potential...
</PRE>

これはあなたの <CODE>yacc</CODE> のバージョンが不十分であることを示しています。
<CODE>bison</CODE> (the GNU version of <CODE>yacc</CODE>) を代わりにインストールして使用する必要があります。

<LI>

もし <CODE>mysqld</CODE> か <STRONG>MySQL</STRONG> クライアントをデバッグしたいなら、
<CODE>configure</CODE> を <CODE>--with-debug</CODE> オプション付きで実行します。
そしてコンパイルし、新しいクライアントライブラリーでクライアントをリンクします。
 「<A HREF="manual.ja_Porting.html#Debugging_client">G.2  Debugging a MySQL client</A>」節参照.
</UL>



<H2><A NAME="MIT-pthreads" HREF="manual.ja_toc.html#MIT-pthreads">4.9  MIT-pthreads に関して</A></H2>

<P>
このセクションではMIT-pthreadsを使っているさいに起こる問題についていくつか述べて
います。

</P>
<P>
Linux では、MIT-pthreads を使用してはならず、
LinuxThreads をインストールするべきです！
 「<A HREF="manual.ja_Installing.html#Linux">4.11.5  Linux notes (all Linux versions)</A>」節参照.

</P>
<P>
もしあなたのシステムが本来のスレッドのサポートを提供しなければ、あなたは、
MIT-pthreadsパッケージを使って、<STRONG>MySQL</STRONG> を構築する必要があります。
これにはほとんどのFreeBSDシステム、SunOS4.x,Solaris 2.4とそれ以前、ほかいくつか
が含まれます。
 「<A HREF="manual.ja_Installing.html#Which_OS">4.2  <STRONG>MySQL</STRONG> がサポートする OS</A>」節参照.

</P>

<UL>
<LI>

ほとんどのシステム上では <CODE>--with-mit-threads</CODE> オプションで
<CODE>configure</CODE> 実行することによって、
MIT-pthreadsが使われることを強制することができます。


<PRE>
shell&#62; ./configure --with-mit-threads
</PRE>

MIT-pthreadsを使う時、非ソースディレクトリで構築することはサポートされていませ
ん。なぜなら、私たちはこのコードへ私たちの変更を最小にしたいからです。

<LI>

MIT-pthreadsは、Unixソケット実装に使われている <CODE>AF_UNIX</CODE> プロトコルをサポートしません。
これは、もしあなたが使っている MIT-pthreads をコンパイルすれば、全ての接続は、
TCP/IP を使う(つまり少し遅くなる)ことを意味します。
もし、あなたが <STRONG>MySQL</STRONG> を構築したあとで、ローカルのサーバーに接続できないならば、
それはあなたのクライアントがデフォルトで Unix ソケットを使って
 <CODE>localhost</CODE> へ接続しようとしているのかもしれません。
明示的にローカルホスト名を指定するために、ホスト名指定のオプション
 (<CODE>-h</CODE> か <CODE>--host</CODE>) で <CODE>mysql</CODE> を使用して、TCP/IP 接続を試してみてください。

<LI>

MIT-pthreads が使われているかどうかチェックはサーバコードを configure するときに
だけ行われます。もし、あなたが <CODE>--without-server</CODE> を使ってクライアントコードのみを
ビルドすることを設定したならば、クライアントは MIT-othreads が使われているかいないか、
Unixソケット接続がデフォルトで使われているのかわかりません。なぜなら Unix ソケットは
MIT-pthreads 下では動作しないからです。また、あなたはそのようなインスタンスでは
 <CODE>-h</CODE> または  <CODE>--host</CODE> を使う必要があります。

<LI>

 <STRONG>MySQL</STRONG> が MIT-pthreads を使ってコンパイルされると、パフォーマンス上の問題のた
めシステムロックはデフォルトでディスエーブルとされます。  <CODE>--use-locking</CODE> オプション
を指定してサーバーに伝えることで、システムロックは使えるようになります。

<LI>

ときどき(少なくともSolarisでは) pthread の <CODE>bind()</CODE> コマンドは何のエラーメッセージ
なしにソケットへの bind に失敗することがあります。これは結果としてサーバーへの接続
失敗となります。たとえば、


<PRE>
shell&#62; mysqladmin version
mysqladmin: connect to server at '' failed;
error: 'Can't connect to mysql server on localhost (146)'
</PRE>

これを解決するために <CODE>mysqld</CODE> サーバーを終了して、再起動してください。こ
れは私たちがサーバーダウンを強制して、すぐにリスタートさせようとしたときだけ起こ
りました。

<LI>

MIT-pthreads を使っていると、<CODE>sleep()</CODE> システムコールは <CODE>SIGINT</CODE> (break) 
では割り込みできません。 これは　<CODE>mysqladmin --sleep</CODE> を走らせているときにだけ
起こることがわかっています。
割り込みが発生してプロセスが停止する前に、あなたは終了させるための <CODE>sleep()</CODE> コールを待たなく
てはなりません。

<LI>

リンクしているとき(少なくともSolarisでは)、あなたはこのような warning メッセージ
を受け取るでしょう。これらは無視してかまいません。


<PRE>
ld: warning: symbol `_iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
ld: warning: symbol `__iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
</PRE>

<LI>

他のいくつかの warnings もまた無視してかまいません。


<PRE>
implicit declaration of function `int strtoll(...)'
implicit declaration of function `int strtoul(...)'
</PRE>

<LI>

私たちはまだ MIT-pthread とともに動く <CODE>readline</CODE> を手に入れていません(これは必要では
ないのですが、おそらく誰かには興味があるでしょう)。
</UL>



<H2><A NAME="Perl_support" HREF="manual.ja_toc.html#Perl_support">4.10  Perl のインストールについて</A></H2>



<H3><A NAME="Perl_installation" HREF="manual.ja_toc.html#Perl_installation">4.10.1  Unix への Perl のインストール</A></H3>

<P>
<STRONG>MySQL</STRONG> は Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> インターフェースをサポートします。 「<A HREF="manual.ja_Clients.html#Perl">20.5  <STRONG>MySQL</STRONG> Perl API</A>」節参照. 
<CODE>DBI</CODE>/<CODE>DBD</CODE> インターフェースの Perl のクライアントは、Perl 5.004 以上が必要です。
これより古いバージョンの Perl ですと<EM>動きません</EM>。

</P>
<P>
<STRONG>MySQL</STRONG> Perl は、 <STRONG>MySQL</STRONG> クライアント・プログラミング・サポートが
既にインストールされていることが条件です。 
もしあなたが RPM ファイルから <STRONG>MySQL</STRONG> をインストールしたのなら、
クライアント・プログラムは、クライアント RPM にあります。 が、
クライアント・プログラミング・サポートは、開発者向け RPM にあります。 
開発者向け RPM をインストールしたことを確かめて下さい。 

</P>
<P>
これらは 3.22.8 から <STRONG>MySQL</STRONG> 配布とは分けられて配布されています。
もし Perl モジュールをインストールしたいなら、<a HREF="http://www.mysql.com/Contrib">http://www.mysql.com/Contrib</a> を
確認してください。ここにおかれています。

</P>
<P>
Perl の配布物は <CODE>tar</CODE> でアーカイブされ、圧縮されています。
<TT>`MODULE-VERSION.tar.gz'</TT> という命名規則で配布されています。
(<CODE>MODULE</CODE> はモジュール名、<CODE>VERSION</CODE> はバージョン番号)

</P>
<P>
<CODE>Data-Dumper</CODE>, <CODE>DBI</CODE>, <CODE>Msql-Mysql-modules</CODE> が必要です。
これを取ってきたら、以下のようにしてインストールします。
<CODE>Data-Dumper</CODE> モジュールを例にしますが、他も同様にできます。

</P>

<OL>
<LI>

配布物をカレントディレクトリに展開：

<PRE>
shell&#62; gunzip &#60; Data-Dumper-VERSION.tar.gz | tar xvf -
</PRE>

これは <TT>`Data-Dumper-VERSION'</TT> というディレクトリを作ります。

<LI>

展開したディレクトリに入ります：

<PRE>
shell&#62; cd Data-Dumper-VERSION
</PRE>

<LI>

コンパイル、インストール：

<PRE>
shell&#62; perl Makefile.PL
shell&#62; make
shell&#62; make test
shell&#62; make install
</PRE>

</OL>

<P>
モジュールが動作するかを確かめるので <CODE>make test</CODE> コマンドは重要です。
インターフェースコードのテストのために <CODE>Msql-Mysql-modules</CODE> の
インストール中にこれらのコマンドを実行する際には、
<STRONG>MySQL</STRONG> サーバーが稼働していなければなりません。
でなければ、テストは失敗します。

</P>
<P>
新しいリリースの <STRONG>MySQL</STRONG> をインストールした場合に常に
 <CODE>Msql-Mysql-modules</CODE> を再構築、再インストールすることは
いい考えです。すべての <CODE>DBI</CODE> スクリプトが <STRONG>MySQL</STRONG> の
アップグレード後にコアダンプする兆候に気づいた場合は、特に
そうしてください。

</P>
<P>
もし Perl module を正しくシステムディレクトリーやローカルのPerlディレクトリ
にインストールできない場合、以下の文献が役立ちます：

</P>

<PRE>
<a HREF="http://www.iserver.com/support/contrib/perl5/modules.html">http://www.iserver.com/support/contrib/perl5/modules.html</a>
</PRE>

<P>
このページの以下を参照してください：
<CODE>Installing New Modules that Require Locally Installed Modules</CODE>.

</P>



<H3><A NAME="ActiveState_Perl" HREF="manual.ja_toc.html#ActiveState_Perl">4.10.2  Win32 への ActiveState Perl のインストール</A></H3>

<P>
Win32 上に、 ActiveState Perl に <STRONG>MySQL</STRONG> <CODE>DBD</CODE> モジュールを
インストールするには、以下のようにしなくてはなりません：

</P>

<UL>
<LI>Open a DOS shell.

<LI>もし必要なら、HTTP_proxy 変数をセット。 例えば

<CODE>set HTTP_proxy=my.proxy.com:3128</CODE>
<LI>PPM プログラムの起動： <CODE>C:\perl\bin\ppm.pl</CODE>

<LI><CODE>DBI</CODE> のインストール(もし入っていなければ)： <CODE>install DBI</CODE>

<LI>この成功後に、 <CODE>DBD::mysql:</CODE> インストール

<CODE>http://www.mysql.com/Contrib/ppd/DBD-mysql.ppd</CODE>
</UL>

<P>
もし上記のように出来なければ、代わりに <STRONG>MyODBC</STRONG> ドライバーを入れ、
 <STRONG>MySQL</STRONG> サーバーに ODBC 経由で接続しなくてはなりません。

</P>

<PRE>
use DBI;
$dbh= DBI-&#62;connect("DBI:ODBC:$dsn","$user","$password") || 
  die "Got error $DBI::errstr when connecting to $dsn\n";
</PRE>



<H3><A NAME="Win32_Perl" HREF="manual.ja_toc.html#Win32_Perl">4.10.3  Win32 への <STRONG>MySQL</STRONG> Perl 配布物のインストール</A></H3>

<P>
<STRONG>MySQL</STRONG> Perl 配布は <CODE>DBI</CODE>,
<CODE>DBD:MySQL</CODE> , <CODE>DBD:ODBC</CODE> を含みます。

</P>

<UL>
<LI>

<a HREF="http://www.mysql.com/download.html">http://www.mysql.com/download.html</a> から  Perl distribution for Win32 を取得。
<LI><CODE>C:</CODE> で unzip します。 <TT>`C:\PERL'</TT> ができます。

<LI>あなたのパスに <TT>`C:\PERL\BIN'</TT> を加えます。

<LI>あなたのパスに <TT>`C:\PERL\BIN\MSWin32-x86-thread'</TT> か

<TT>`C:\PERL\BIN\MSWin32-x86'</TT> を加えます。
<LI>DOS shell で、 <CODE>perl -v</CODE> を実行して <CODE>perl</CODE> をテストします。

</UL>



<H3><A NAME="Perl_support_problems" HREF="manual.ja_toc.html#Perl_support_problems">4.10.4  Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> 使用時の問題</A></H3>

<P>
もし Perl が <CODE>../mysql/mysql.so</CODE> モジュールが見つからないとメッセージを出した場合、
シェアードライブラリ <TT>`libmysqlclient.so'</TT> を取りこめなかったと考えられます。

</P>
<P>
以下のような方法で解決方法があります：

</P>

<UL>
<LI>

<CODE>perl Makefile.PL</CODE> のかわりに <CODE>perl Makefile.PL -static</CODE> としてコンパイルします。

<LI>

<CODE>libmysqlclient.so</CODE> を他のシェアードライブラリがあるところ(<TT>`/usr/lib'</TT> とか <TT>`/lib'</TT>)にコピーします。

<LI>

<CODE>Linux</CODE> の場合、<TT>`/etc/ld.so.conf'</TT> ファイルに、<CODE>libmysqlclient.so</CODE>
 があるディレクトリを書き加え、<CODE>ldconfig -v</CODE> を実行します。

<LI>

<A NAME="IDX77"></A>
<A NAME="IDX78"></A>
<CODE>LD_RUN_PATH</CODE> (<CODE>LD_LIBRARY_PATH</CODE>) 環境変数に <CODE>libmysqlclient.so</CODE>
 があるディレクトリを書き加えます。
</UL>

<P>
もし <CODE>DBD-mysql</CODE> で以下のエラーが出た場合、
<CODE>gcc</CODE> (あるいは、<CODE>gcc</CODE> でコンパイルされた古いバイナリ) を使用していると
思われます：

</P>

<PRE>
/usr/bin/perl: can't resolve symbol '__moddi3'
/usr/bin/perl: can't resolve symbol '__divdi3'
</PRE>

<P>
<TT>`mysql.so'</TT> を作成する時のリンクコマンドに
 <CODE>-L/usr/lib/gcc-lib/... -lgcc</CODE> を追加してください。
(Perlクライアントを作る際の <CODE>make</CODE> の出力をチェックしてください)
<CODE>-L</CODE> オプションに指定するのは、あなたのシステム内の <TT>`libgcc.a'</TT> があるディレクトリです。

</P>
<P>
Perl と <STRONG>MySQL</STRONG> が <CODE>gcc</CODE> を使用して作られていない場合も原因としてあります。
この場合、両方を <CODE>gcc</CODE> でコンパイルすることにより、ミスマッチを避けることができます。

</P>
<P>
ダイナミックリンクをサポートしていないシステム(like SCO)でPerlモジュールを使用したい場合、
<CODE>DBI</CODE> と <CODE>DBD-mysql</CODE> を含むスタティックのPerlを作る事もできます。
これは、まず、 <CODE>DBI</CODE> コードがリンクされているPerlを作って現在のPerlの上にインストールします。
そして、 <CODE>DBD</CODE> コードをさらにリンクさせるPerlを作り、それをインストールします。

</P>
<P>
SCOでは、環境変数を以下のようにしなくてはなりません：

</P>

<PRE>
shell&#62; LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib:/usr/progressive/lib
or
shell&#62; LD_LIBRARY_PATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:/usr/progressive/lib:/usr/skunk/lib
shell&#62; LIBPATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:/usr/progressive/lib:/usr/skunk/lib
shell&#62; MANPATH=scohelp:/usr/man:/usr/local1/man:/usr/local/man:/usr/skunk/man:
</PRE>

<P>
最初、<CODE>DBI</CODE> をスタティックリンクしたPerlを作るために、
 <TT>`perl/DBI'</TT> ディレクトリで以下のように実行します：

</P>

<PRE>
shell&#62; perl Makefile.PL LINKTYPE=static
shell&#62; make
shell&#62; make install
shell&#62; make perl
</PRE>

<P>
この後、あなたは新しいPerlをインストールしなければなりません。
<CODE>make perl</CODE> をすると、インストール操作に実行するに必要な <CODE>make</CODE> コマンドを
表示します。
SCOでは、<CODE>make -f Makefile.aperl inst_perl MAP_TARGET=perl</CODE> とします。

</P>
<P>
次に、<CODE>DBD::mysql</CODE> をスタティックリンクしたPerlを作るために、
 <TT>`perl/Mysql-modules'</TT> ディレクトリで以下のように実行します：

</P>

<PRE>
shell&#62; perl Makefile.PL LINKTYPE=static
shell&#62; make
shell&#62; make install
shell&#62; make perl
</PRE>

<P>
これも新しいPerlをインストールしなくてはなりません。
<CODE>make perl</CODE> の出力は使用するコマンドを示します。

</P>


<H2><A NAME="Source_install_system_issues" HREF="manual.ja_toc.html#Source_install_system_issues">4.11  System-specific issue</A></H2>

<P>
以下のセクションは、ソース配布から <STRONG>MySQL</STRONG> をインストールする際に
特定のシステム上に起こると認められた問題のいくつかを示します.

</P>



<H3><A NAME="Solaris" HREF="manual.ja_toc.html#Solaris">4.11.1  Solaris notes</A></H3>

<P>
ソラリスでは <STRONG>MySQL</STRONG> ソースを展開するときトラブルが出るでしょう！
ソラリスの <CODE>tar</CODE> は長い名前を扱えず、 <STRONG>MySQL</STRONG> を展開する場合、
以下のようなエラーになります：

</P>

<PRE>
x mysql-3.22.12-beta/bench/Results/ATIS-mysql_odbc-NT_4.0-cmp-db2,informix,ms-sql,mysql,oracle,solid,sybase, 0 bytes, 0 tape blocks
tar: directory checksum error
</PRE>

<P>
この場合、GNU <CODE>tar</CODE> (<CODE>gtar</CODE>) を展開に使用してください。
コンパイルずみのものが以下にあります：
<a HREF="http://www.mysql.com/Downloads/">http://www.mysql.com/Downloads/</a>.

</P>
<P>
Sun ネイティブスレッドは Solaris 2.5 以上で動きます。
2.4 以下の場合、<STRONG>MySQL</STRONG> は時動的に MIT-pthreads を使用します  「<A HREF="manual.ja_Installing.html#MIT-pthreads">4.9  MIT-pthreads に関して</A>」節参照.

</P>
<P>
もし、configure 時に、以下のエラーが出たなら：

</P>

<PRE>
checking for restartable system calls... configure: error can not run test
programs while cross compiling
</PRE>

<P>
これはコンパイラーのインストールでなにかを間違っています!
この場合、あなたは、より新しいバージョンへコンパイラーをアップグレードすべきです。
以下の行を <CODE>config.cache</CODE> ファイルに追加することによって、
この問題を解決してもかまいません：

</P>

<PRE>
ac_cv_sys_restartable_syscalls=${ac_cv_sys_restartable_syscalls='no'}
</PRE>

<P>
もしあなたが SPARC の Solaris を使用しているなら、
<CODE>egcs</CODE> 1.1.2 以上を推奨します。
これは <a HREF="http://egcs.cygnus.com/">http://egcs.cygnus.com/</a>. で見つけれます。
<CODE>egs</CODE> 1.1.1 と <CODE>gcc</CODE> 2.8.1 は SPARC 上では完全に動作しないことに注意！

</P>
<P>
<CODE>egcs</CODE> 1.1.2 を使用した、推奨する <CODE>configure</CODE> は:

</P>

<PRE>
shell&#62; CC=gcc CFLAGS="-O6" \
       CXX=gcc CXXFLAGS="-O6 -felide-constructors -fno-exceptions -fno-rtti" \
       ./configure --prefix=/usr/local/mysql --with-low-memory
</PRE>

<P>
もし Sun Workshop 4.2 compiler を使用するなら、<CODE>configure</CODE> を以下のようにします：

</P>
<P>
CC=cc CFLAGS="-xstrconst -Xa -xO4 -native -mt" CXX=CC CXXFLAGS="-xO4 -native -noex -mt" ./configure --prefix=/usr/local/mysql

</P>

<PRE>
shell&#62; CC=cc CFLAGS="-Xa -fast -xO4 -native -xstrconst -mt" \
       CXX=CC CXXFLAGS="-noex -XO4 -mt" \
       ./configure
</PRE>

<P>
<CODE>configure</CODE> スクリプトの次の行を：

</P>

<PRE>
#if !defined(__STDC__) || __STDC__ != 1
</PRE>

<P>
以下に変えます:

</P>

<PRE>
#if !defined(__STDC__)
</PRE>

<P>
もし <CODE>-Xc</CODE> オプションで <CODE>__STDC__</CODE> を有効にした場合、
Sun compiler は Solaris の  <TT>`pthread.h'</TT> ヘッダーファイルを使用して
コンパイルすることができません。
これはサンのバグです(インクルードファイルかコンパイラーのバグ)

</P>
<P>
もし <CODE>mysqld</CODE> を起動時に以下のエラーが出た場合、
マルチスレッドを外して(オプション <CODE>-mt</CODE> を指定) Sun compiler を使って
 <STRONG>MySQL</STRONG> をコンパイルし直してください：

</P>

<PRE>
libc internal error: _rmutex_unlock: rmutex not held
</PRE>

<P>
<CODE>-mt</CODE> を <CODE>CFLAGS</CODE> と <CODE>CXXFLAGS</CODE> に加えます。

</P>
<P>
<CODE>gcc</CODE> で <STRONG>MySQL</STRONG> をコンパイルするときに以下のエラーが出た場合、
これは <CODE>gcc</CODE> があなたの Solaris のバージョン用に調整されていません！

</P>

<PRE>
shell&#62; gcc -O3 -g -O2 -DDBUG_OFF  -o thr_alarm ...
./thr_alarm.c: In function `signal_hand':
./thr_alarm.c:556: too many arguments to function `sigwait'
</PRE>

<P>
この場合、新しい <CODE>egcs</CODE> か <CODE>gcc</CODE> でコンパイルします！
少なくとも Solaris 2.5 では、ほとんどの <CODE>gcc</CODE> のバイナリのバージョンが古く、
スレッドを使用するプログラムにはこのインクルードファイルは使えません！

</P>
<P>
Solaris は スタテックリンクのシステムライブラリーを用意していません
(<CODE>libpthreads</CODE> and <CODE>libdl</CODE>)。
そのため、<CODE>--static</CODE> オプションで <STRONG>MySQL</STRONG> をコンパイルできません。
もしこれを試みた場合、以下のエラーになります：

</P>

<PRE>
ld: fatal: library -ldl: not found
</PRE>

<P>
もし多くのプロセスが速く <CODE>mysqld</CODE> に接続を試みた場合、
 <STRONG>MySQL</STRONG> ログに以下のようにエラーが出ます:

</P>

<PRE>
Error in accept: Protocol error
</PRE>

<P>
サーバーを <CODE>--set-variable back_log=50</CODE> オプションで起動すれば、この問題に対処できるでしょう。

</P>
<P>
もし自分の <STRONG>MySQL</STRONG> クライアントプログラムをリンクして
実行時に以下のようにエラーが出た場合：

</P>

<PRE>
ld.so.1: ./my: fatal: libmysqlclient.so.#: open failed: No such file or directory
</PRE>

<P>
これは以下のどれかで回避できます：

</P>
<DL COMPACT>

<DT>*
<DD>
以下のフラグでクライアントをリンクします(<CODE>-Lpath</CODE> の代わりに):
<CODE>-Wl,r/full-path-to-libmysqlclient.so</CODE>
<DT>*
<DD>
<CODE>libmysqclient.so</CODE> を <TT>`/usr/lib'</TT> にコピーします
<DT>*
<DD>
<A NAME="IDX79"></A>
<A NAME="IDX80"></A>
<CODE>LD_RUN_PATH</CODE> 環境変数を <TT>`libmysqlclient.so'</TT> が存在するところに
セットした後、クライアントを実行します。
</DL>



<H3><A NAME="Solaris_2.7" HREF="manual.ja_toc.html#Solaris_2.7">4.11.2  Solaris 2.7 notes</A></H3>

<P>
通常、Solaris 2.6 のバイナリは Solaris 2.7 で使用できます。
ほとんどの Solaris 2.6 の問題も Solaris 2.7 に適用できます。

</P>
<P>
Solaris 2.7 は、インクルードファイルにいくつかバグがあります。
<CODE>gcc</CODE> で以下のようなエラーが出た場合：

</P>

<PRE>
/usr/include/widec.h:42: warning: `getwc' redefined
/usr/include/wchar.h:326: warning: this is the location of the previous
definition
</PRE>

<P>
以下のようにして回避します：

</P>
<P>
<CODE>/usr/include/widec.h</CODE> を <CODE>.../lib/gcc-lib/os/gcc-version/include</CODE> にコピー
41 行目を変更:

</P>

<PRE>
変更前：

#if     !defined(lint) &#38;& !defined(__lint)

変更後：

#if     !defined(lint) &#38;& !defined(__lint) &#38;& !defined(getwc)
</PRE>

<P>
代わりに、<TT>`/usr/include/widec.h'</TT> を直接変更してもかまいません。
どちらの方法にしても、ファイルを修正後は、<TT>`config.cache'</TT> を
消して <CODE>configure</CODE> を再実行しなくてはなりません！

</P>
<P>
<CODE>make</CODE> 実行時に以下のようなエラーになった場合、<CODE>configure</CODE> が
 <TT>`curses.h'</TT> ファイルを検出できていません (これは <CODE>/usr/include/widec.h</CODE> の
エラーのためにおきます):

</P>

<PRE>
In file included from mysql.cc:50:
/usr/include/term.h:1060: syntax error before `,'
/usr/include/term.h:1081: syntax error before `;'
</PRE>

<P>
これを解決するには、以下のうち一つを行います：

</P>

<UL>
<LI>

前述したとおり、<TT>`/usr/include/widec.h'</TT> を修正し、configure を再実行します。
<LI>

<CODE>#define HAVE_TERM</CODE> 行を <TT>`config.h'</TT> ファイルから消し、
<CODE>make</CODE> を再実行します。
<LI>

<CODE>CFLAGS=-DHAVE_CURSES CXXFLAGS=-DHAVE_CURSES ./configure</CODE> とコンフィギャーします。
</UL>



<H3><A NAME="Solaris_x86" HREF="manual.ja_toc.html#Solaris_x86">4.11.3  Solarix x86 notes</A></H3>

<P>
<CODE>gcc</CODE> か <CODE>egcs</CODE> を Solaris x86 で使用した場合、load 時にコアダンプする場合、
以下のように <CODE>configure</CODE> します:

</P>

<PRE>
shell&#62; CC=gcc CFLAGS="-O6 -fomit-frame-pointer" \
       CXX=gcc \
       CXXFLAGS="-O6 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" \
       ./configure --prefix=/usr/local/mysql
</PRE>

<P>
これは <CODE>libstdc++</CODE> ライブラリーと C++ の問題を回避します。

</P>
<P>
もしこれが該当しない場合、デバッグモードでコンパイルして
デバッグのトレースファイルを書き出すようにして起動するか、
<CODE>gdb</CODE> を使用して起動してください。
 「<A HREF="manual.ja_Porting.html#Debugging_server">G.1  MySQL server のデバッグ</A>」節参照.

</P>


<H3><A NAME="SunOS" HREF="manual.ja_toc.html#SunOS">4.11.4  SunOS 4 notes</A></H3>

<P>
SunOS 4 では MIT-pthreads が必要です。
このために、 GNU <CODE>make</CODE> が <STRONG>MySQL</STRONG> のコンパイルに必要になります。

</P>
<P>
いくつかの SunOS 4 では dynamic libraries と <CODE>libtool</CODE> に問題があります。
これを避けるために、以下のようにして <CODE>configure</CODE> します：

</P>

<PRE>
shell&#62; ./configure --disable-shared --with-mysqld-ldflags=-all-static
</PRE>

<P>
<CODE>readline</CODE> のコンパイル時、二重定義のワーニングが出ますが、
これは無視して構いません。

</P>
<P>
<CODE>mysqld</CODE> をコンパイルする時、
いくつか <CODE>implicit declaration of function</CODE> ワーニングがでますが、
無視して構いません。

</P>


<H3><A NAME="Linux" HREF="manual.ja_toc.html#Linux">4.11.5  Linux notes (all Linux versions)</A></H3>

<P>
Linux では <STRONG>MySQL</STRONG> は LinuxThreads を使用します。
もし <CODE>glibc2</CODE> を持たない古い Linux を使用している場合、
<STRONG>MySQL</STRONG> のコンパイルの前に、
LinuxThreads をインストールしなければなりません。
<a HREF="http://www.mysql.com/Downloads/Linux">http://www.mysql.com/Downloads/Linux</a>

</P>
<P>
もし <CODE>mysqld</CODE> が動かなかったり、 <CODE>mysql_install_db</CODE> が動かない場合、
以下を読みすすめてください！
LinuxThreads か <CODE>libc</CODE>/<CODE>glibc</CODE> ライブラリーに問題のある Linux システムだけに起こります。
しかし <STRONG>MySQL</STRONG> を動かせるために簡単な方法が多くあります。
一番簡単な方法は、バイナリになった <STRONG>MySQL</STRONG> (not the RPM) を使用することです；
このバージョンのバイナリは、あなた自身がコンパイルしたものより 10% ほど速いでしょう！
 「<A HREF="manual.ja_Performance.html#Compile_and_link_options">10.2.1  MySQL の速度に影響するコンパイルとリンク方法</A>」節参照.

</P>
<P>
一つ知られている問題として、バイナリ配布を <CODE>libc5</CODE> の古い Linux システム
(RedHat 4.x , Slackware 3.6以下, Debian 1.3 bo 以下など)
で使用すると、ホスト名解決の致命的なエラーが出ます
 「<A HREF="manual.ja_Installing.html#Binary_notes-Linux">4.6.3.1  Linux notes</A>」節参照.

</P>
<P>
<CODE>myisamchk</CODE> は <CODE>libc.so.5.3.12</CODE> で使用するとハングります.
最新の <CODE>libc</CODE> にアップグレードしてください。

</P>
<P>
LinuxThreads を使用している場合、最低３つのプロセスが走ります。
これらは実スレッドで、一つは LinuxThreads マネージャーのために、
一つは接続のハンドルに、もうひとつはアラームとシグナルのハンドルです。

</P>
<P>
もし <CODE>mysqld</CODE> デーモンプロセスが <CODE>ps</CODE> などでみると死んでいるようであれば, 
通常これは <STRONG>MySQL</STRONG> バグか、壊れたテーブルを持っています。
 「<A HREF="manual.ja_Problems.html#Crashing">18.0.1  <STRONG>MySQL</STRONG> がクラッシュする場合に行うこと</A>」節参照.

</P>
<P>
LinuxThreads を使用していて <CODE>mysqladmin shutdown</CODE> が動かない場合、
LinuxThreads 0.7.1 以上にアップグレードしてください。

</P>
<P>
RedHat を使用していて, 以下のようなエラーが出た場合：

</P>

<PRE>
/usr/bin/perl is needed...
/usr/sh is needed...
/usr/sh is needed...
</PRE>

<P>
この場合、 <CODE>rpm</CODE> のバージョンを
 <TT>`rpm-2.4.11-1.i386.rpm'</TT> と <TT>`rpm-devel-2.4.11-1.i386.rpm'</TT> (以上)
 にしなくてはいけません。

</P>
<P>
RedHat 4.2 は以下からアップグレードが入手できます。
<a HREF="ftp://ftp.redhat.com/updates/4.2/i386">ftp://ftp.redhat.com/updates/4.2/i386</a>. 
あるいは他の場合は
<a HREF="http://www.sunsite.unc.edu/pub/Linux/distributions/redhat/code/rpm/">http://www.sunsite.unc.edu/pub/Linux/distributions/redhat/code/rpm/</a>

</P>
<P>
もし <STRONG>MySQL</STRONG> クライアントを実行して以下のエラーになった場合：

</P>

<PRE>
ld.so.1: ./my: fatal: libmysqlclient.so.4: open failed: No such file or directory
</PRE>

<P>
以下の方法で解決できます：

</P>

<UL>
<LI>

クライアントを以下のフラグで(<CODE>-Lpath</CODE>のかわりに)リンクします：
<CODE>-Wl,r/path-libmysqlclient.so</CODE>
<LI>

<CODE>libmysqclient.so</CODE> を <TT>`/usr/lib'</TT> にコピーします
<LI>

<A NAME="IDX81"></A>
<A NAME="IDX82"></A>
<CODE>LD_RUN_PATH</CODE> 環境変数を <TT>`libmysqlclient.so'</TT> が存在する場所に設定します。
(クライアントを実行する前に設定します)
</UL>

<P>
If you are using the Fujitsu compiler <CODE>(fcc / FCC)</CODE> you will have
some problems compiling <STRONG>MySQL</STRONG> because the Linux header files are very
<CODE>gcc</CODE> oriented.

</P>
<P>
The following <CODE>configure</CODE> line should work with <CODE>fcc/FCC</CODE>:

</P>

<PRE>
CC=fcc CFLAGS="-O -K fast -K lib -K omitfp -Kpreex -D_GNU_SOURCE -DCONST=const -DNO_STRTOLL_PROTO" CXX=FCC CXXFLAGS="-O -K fast -K lib  -K omitfp -K preex --no_exceptions --no_rtti -D_GNU_SOURCE -DCONST=const -Dalloca=__builtin_alloca -DNO_STRTOLL_PROTO '-D_EXTERN_INLINE=static __inline'" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static --disable-shared --with-low-memory
</PRE>



<H4><A NAME="Linux-x86" HREF="manual.ja_toc.html#Linux-x86">4.11.5.1  Linux-x86 notes</A></H4>

<P>
<STRONG>MySQL</STRONG> は <CODE>libc</CODE> 5.4.12 以上が必要です。<CODE>libc</CODE> 5.4.46 で動作します。
<CODE>glibc</CODE> 2.0.6 以上でも動作します。
<CODE>glibc</CODE> の RPM にはいくつか問題があり、アップデートをチェックしてください。
<CODE>glibc</CODE> 2.0.7-19 と 2.0.7-29 RPM で動作します。

</P>
<P>
古い Linux 配布物では、<CODE>configure</CODE> 時に以下のようなエラーが出るかもしれません：

</P>

<PRE>
Syntax error in sched.h. Change _P to __P in the /usr/include/sched.h file.
See the Installation chapter in the Reference Manual.
</PRE>

<P>
これは <CODE>_P</CODE> マクロが一つのアンダースコアしかもてないためで、
このエラーメッセージのように対処してください。

</P>
<P>
以下のようなワーニングは無視して構いません：

</P>

<PRE>
mysqld.cc -o objs-thread/mysqld.o
mysqld.cc: In function `void init_signals()':
mysqld.cc:315: warning: assignment of negative value `-1' to `long unsigned int'
mysqld.cc: In function `void * signal_hand(void *)':
mysqld.cc:346: warning: assignment of negative value `-1' to `long unsigned int'
</PRE>

<P>
Debian GNU/Linux では、<STRONG>MySQL</STRONG> をマシンの起動時に立ちあげるためには、
以下のようにします：

</P>

<PRE>
shell&#62; cp support-files/mysql.server /etc/init.d/mysql.server
shell&#62; /usr/sbin/update-rc.d mysql.server defaults 99
</PRE>

<P>
<CODE>mysql.server</CODE> スクリプトは <STRONG>MySQL</STRONG> をインストールした先の
 <TT>`share/mysql'</TT> directory にあります。
あるいは、 <STRONG>MySQL</STRONG> のソースの中の <TT>`support-files'</TT> ディレクトリにあります。

</P>

<P>
<CODE>mysqld</CODE> がつねにスタート時にコアをはく場合、
古い <TT>`/lib/libc.a'</TT> を使用しているかもしれません。
<TT>`sql/mysqld'</TT> を消去して、新しく <CODE>make install</CODE> してみてください。
これはいくつかの Slackware で報告された現象です。
RedHat 5.0 は <CODE>glibc</CODE> のバージョンによって問題が発生します。
 「<A HREF="manual.ja_Installing.html#Linux-RedHat50">4.11.5.2  RedHat 5.0 notes</A>」節参照.

</P>
<P>
もし <CODE>mysqld</CODE> をリンクする場合に以下のようなエラーが出た場合、
 <TT>`libg++.a'</TT> が正しくインストールされていません：

</P>

<PRE>
/usr/lib/libc.a(putc.o): In function `_IO_putc':
putc.o(.text+0x0): multiple definition of `_IO_putc'
</PRE>

<P>
<TT>`libg++.a'</TT> の使用を避けるには、 <CODE>configure</CODE> を以下のようにします：

</P>

<PRE>
shell&#62; CXX=gcc ./configure
</PRE>



<H4><A NAME="Linux-RedHat50" HREF="manual.ja_toc.html#Linux-RedHat50">4.11.5.2  RedHat 5.0 notes</A></H4>

<P>
もし RedHat で <STRONG>MySQL</STRONG> に問題がある場合、まず <CODE>glibc</CODE> のバージョンを新しいものにあげてください！

</P>
<P>
RedHat のオフィシャルパッチ(including <CODE>glibc-2.0.7-19</CODE> and <CODE>glibc-devel-2.0.7-19</CODE>)
をインストールしているなら、 <STRONG>MySQL</STRONG> は問題なく動くはずです！

</P>
<P>
<CODE>glibc</CODE> 2.0.5 には <CODE>pthread_key_create</CODE> 変数を解放する部分にバグがあり、
アップデートが必要です。<CODE>glibc</CODE> 2.0.5 を使用する場合、
スタティックリンクされて作成された <STRONG>MySQL</STRONG> バイナリ配布物を使用すべきです。
ソースからコンパイルしたい場合、 <a HREF="http://www.mysql.com/Downloads/Linux">http://www.mysql.com/Downloads/Linux</a> にある
LinuxThreads の修正版をインストールするか、
あるいは <CODE>glibc</CODE> をバージョンアップしなくてはなりません。

</P>
<P>
もし <CODE>glibc</CODE> or LinuxThreads のバージョンが問題のあるものだと、
 <CODE>mysqld</CODE> はコネクションの度にクラッシュします。
例えば、<CODE>mysqladmin version</CODE> は <CODE>mysqld</CODE> を完全にクラッシュします！

</P>
<P>
また、問題のあるライブラリーを使用していると、 <CODE>mysqld</CODE> は起動時にクラッシュします。
いくつかの Linux systems では、以下のようにして configure でこれを避けることができます：

</P>

<PRE>
shell&#62; ./configure --with-mysqld-ldflags=-all-static
</PRE>

<P>
RedHat 5.0 では、<CODE>glibc</CODE> 2.0.7-19 RPM を簡単にインストールできますので、
インストール後、<CODE>--with-mysqld-ldflags=-all-static</CODE> なしで <CODE>configure</CODE> できます。

</P>
<P>
<CODE>glibc</CODE> 2.0.7 のソースに対するパッチは

<PRE>
<a HREF="http://www.mysql.com/Download/Linux/glibc-2.0.7-total-patch.tar.gz">http://www.mysql.com/Download/Linux/glibc-2.0.7-total-patch.tar.gz</a>
</PRE>

<P>
 にあります。
このパッチは <STRONG>MySQL</STRONG> がテストされたパッチで、簡単に適用できます。

</P>
<P>
もし <STRONG>MySQL</STRONG> 構築時にクラッシュする場合、新しい <STRONG>MySQL</STRONG> の
バイナリをダウンロードしてみてください。これはスタティックリンクで作成されており、
ライブラリーの衝突を避けることができ、全ての Linux で動くはずです！

</P>
<P>
<STRONG>MySQL</STRONG> はデバッグのためトレースファイルに情報を書き出すことができます。
これは問題を解決するためにヒントになる情報を多く出力します。
 「<A HREF="manual.ja_Porting.html#Debugging_server">G.1  MySQL server のデバッグ</A>」節参照.

</P>


<H4><A NAME="Linux-RedHat51" HREF="manual.ja_toc.html#Linux-RedHat51">4.11.5.3  RedHat 5.1 notes</A></H4>

<P>
RedHat 5.1 の <CODE>glibc</CODE> (<CODE>glibc</CODE> 2.0.7-13) はメモリーリークします。
<CODE>glibc</CODE> を 2.0.7-19 にアップグレードしなくてはなりません。
あるいは、バイナリ配布の <CODE>mysqld</CODE> を使用するかです。
もしこれを行わなかった場合、メモリー関連の問題が発生します(out of memory, etc.,etc.)。
多くの場合以下のように：

</P>

<PRE>
Can't create a new thread (errno 11). If you are not out of available
memory, you can consult the manual for any possible OS dependent bug
</PRE>

<P>
<CODE>glibc</CODE> 2.0.7-19 にアップグレード後は、<STRONG>MySQL</STRONG> を
ダイナミックリンク指定(デフォルト)で configure できます。
が、<CODE>glibc</CODE> 2.0.7-19 をソースからインストールしない限り、
<CODE>--with-mysqld-ldflags=-all-static</CODE> オプションは <CODE>configure</CODE> で<STRONG>使用できません</STRONG>！

</P>
<P>
<CODE>glibc</CODE> のバージョンは <CODE>rpm -q glibc</CODE> で確認できます。

</P>


<H4><A NAME="Linux-SPARC" HREF="manual.ja_toc.html#Linux-SPARC">4.11.5.4  Linux-SPARC notes</A></H4>

<P>
いくつかの埋め込み関数, <CODE>readdir_r()</CODE> が壊れます。
この顕れとして、<CODE>SHOW DATABASES</CODE> が常に空を返します。
これは configure 後、コンパイルする前に、
<TT>`config.h'</TT> から <CODE>HAVE_READDIR_R</CODE> を取り除くことで解決します。

</P>
<P>
その他いくつかの問題は、あなたの Linux にパッチを当てる必要があります。
パッチは <a HREF="http://www.mysql.com/patches/Linux-sparc-2.0.30.diff">http://www.mysql.com/patches/Linux-sparc-2.0.30.diff</a> にあります。
このパッチは、<CODE>vger.rutgers.edu</CODE> にある <TT>`sparclinux-2.0.30.tar.gz'</TT> 用です。
(これは正式の 2.0.30 とは違います。パッチを正式2.0.30に当てないように)
そして LinuxThreads 0.6 かそれ以上にしなくてはなりません。

</P>
<P>
これは <a HREF="mailto:jacques@solucorp.qc.ca">jacques@solucorp.qc.ca</a> から寄せられました。

</P>


<H4><A NAME="Linux-Alpha" HREF="manual.ja_toc.html#Linux-Alpha">4.11.5.5  Linux-Alpha notes</A></H4>

<P>
Linux-Alpha での一番大きな問題は、このプラットフォームの <CODE>glibc</CODE> に
まだいくつか問題があることです。 最新の <CODE>glibc</CODE> を得ることから
はじめてください。

</P>
<P>
スレッドを使用するプログラム( <CODE>mysqld</CODE>, <CODE>thr_alarm</CODE>, <CODE>thr_lock</CODE> など )
を実行する前に、共有メモリの limit 値を上げるべきです(<CODE>ulimit</CODE> を使用して)。
<STRONG>MySQL</STRONG> ベンチマークは、あなたがこれを忘れた場合、失敗することが知られています！

</P>
<P>
<STRONG>MySQL</STRONG> は以下に示すようにコンフィギュアーします：

</P>

<PRE>
shell&#62; CC=gcc CCFLAGS="-Dalpha_linux_port" \
       CXX=gcc CXXFLAGS="-O3 -Dalpha_linux_port -felide-constructors -fno-exceptions -fno-rtti" \
       ./configure --prefix=/usr/local/mysql
</PRE>

<LI>

<CODE>mysys/thr_lock</CODE> と <CODE>mysys/thr_alarm</CODE> をコンパイルします。
これらを使用してテストします。これらのプログラムにに引数はいりません。
もし OK なら、 <CODE>test_succeeded</CODE> メッセージが出るはずです。

<STRONG>MySQL</STRONG> のインストール後、<CODE>safe_mysqld</CODE> 中の <CODE>ulimit</CODE> を
アンコメントし、共有メモリーを増やします。

Linux-Alpha は <STRONG>MySQL</STRONG> にとって独特なプラットフォームです。
 RedHat 5.0 と パッチを当てた LinuxThreads は、これを動かすためにはちょうどよい機会です。

もしシグナルで問題がある場合 (<STRONG>MySQL</STRONG> dies unexpectedly
under high load)、これは OS とスレッドのバグでしょう。
この場合、<STRONG>MySQL</STRONG> をシグナルを使用しないように、configure 時に指定できます：


<PRE>
shell&#62; CFLAGS=-DDONT_USE_THR_ALARM \
       CXXFLAGS=-DDONT_USE_THR_ALARM \
       ./configure ...
</PRE>

これは <STRONG>MySQL</STRONG> のパフォーマンスに影響しませんが、
<CODE>mysqladmin kill</CODE> or <CODE>mysqladmin shutdown</CODE> を使用して、
接続が ``sleeping'' になっているクライアントを kill できません。
次のコマンドを発行したとき、そのクライアントは死にます。



<H4><A NAME="MKLinux" HREF="manual.ja_toc.html#MKLinux">4.11.5.6  MkLinux notes</A></H4>

<P>
<STRONG>MySQL</STRONG> は最新の <CODE>glibc</CODE> を使用した MkLinux で動作します。
(<CODE>glibc</CODE> 2.0.7 でテストしました).

</P>


<H4><A NAME="Qube2" HREF="manual.ja_toc.html#Qube2">4.11.5.7  Qube2 Linux notes</A></H4>

<P>
Qube2 (Linux Mips) 上で <STRONG>MySQL</STRONG> を動作させるには、
最新の <CODE>glibc</CODE> ライブラリでなくてはなりません(<CODE>glibc-2.0.7-29C2</CODE> は動作することが分かっています)。 そして、 <CODE>egcs</CODE> C++ compiler (<CODE>egcs-1.0.2-9</CODE> 以上) を使用しなくてはなりません。

</P>



<H3><A NAME="Alpha-DEC-Unix" HREF="manual.ja_toc.html#Alpha-DEC-Unix">4.11.6  Alpha-DEC-Unix notes</A></H3>

<P>
When compiling threaded programs under Digital UNIX, the documentation
recommends the <CODE>-pthread</CODE> option for <CODE>cc</CODE> and <CODE>cxx</CODE> and the
libraries <CODE>-lmach -lexc</CODE> (in addition to <CODE>-lpthread</CODE>).
You should run <CODE>configure</CODE> something like this:

</P>

<PRE>
shell&#62; CC="cc -pthread" CXX="cxx -pthread -O" \
       ./configure --with-named-thread-libs="-lpthread -lmach -lexc -lc"
</PRE>

<P>
When compiling <CODE>mysqld</CODE>, you may see a couple of warnings like this:

</P>

<PRE>
mysqld.cc: In function void handle_connections()':
mysqld.cc:626: passing long unsigned int *' as argument 3 of
accept(int,sockadddr *, int *)'
</PRE>

<P>
You can safely ignore these warnings. They occur because <CODE>configure</CODE>
can't detect warnings, only errors.

</P>
<P>
If you start the server directly from the command line, you may have problems
with it dying when you log out.  (When you log out, your outstanding processes
receive a <CODE>SIGHUP</CODE> signal.)  If so, try starting the server like this:

</P>

<PRE>
shell&#62; nohup mysqld [options] &#38;
</PRE>

<P>
<CODE>nohup</CODE> causes the command following it to ignore any <CODE>SIGHUP</CODE>
signal sent from the terminal.  Alternatively, start the server by running
<CODE>safe_mysqld</CODE>, which invokes <CODE>mysqld</CODE> using <CODE>nohup</CODE> for you.

</P>


<H3><A NAME="Alpha-DEC-OSF1" HREF="manual.ja_toc.html#Alpha-DEC-OSF1">4.11.7  Alpha-DEC-OSF1 notes</A></H3>

<P>
If you have problems compiling and have DEC <CODE>CC</CODE> and <CODE>gcc</CODE>
installed, try running <CODE>configure</CODE> like this:

</P>

<PRE>
shell&#62; CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 \
       ./configure --prefix=/usr/local/mysql
</PRE>

<P>
If you get problems with the <TT>`c_asm.h'</TT> file, you can create and use
a 'dummy' <TT>`c_asm.h'</TT> file with:

</P>

<PRE>
shell&#62; touch include/c_asm.h
shell&#62; CC=gcc CFLAGS=-I./include \
       CXX=gcc CXXFLAGS=-O3 \
       ./configure --prefix=/usr/local/mysql
</PRE>

<P>
On OSF1 V4.0D and compiler "DEC C V5.6-071 on Digital UNIX V4.0 (Rev. 878)"
the compiler had some strange behavior (undefined <CODE>asm</CODE> symbols).
<CODE>/bin/ld</CODE> also appears to be broken (problems with <CODE>_exit
undefined</CODE> errors occuring while linking <CODE>mysqld</CODE>).  On this system, we
have managed to compile <STRONG>MySQL</STRONG> with the following <CODE>configure</CODE>
line, after replacing <CODE>/bin/ld</CODE> with the version from OSF 4.0C:

</P>

<PRE>
shell&#62; CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
</PRE>

<P>
With the Digital compiler "C++ V6.1-029", the following should work:

</P>

<PRE>
CC=cc -pthread
CFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all -arch host
CXX=cxx -pthread
CXXFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all -arch host
export CC CFLAGS CXX CXXFLAGS
./configure --prefix=/usr/mysql/mysql --with-low-memory --enable-large-files --with-mysqld-ldflags=-all-static --disable-shared --with-named-thread-libs="-lmach -lexc -lc"
</PRE>

<P>
In some versions of OSF1, the <CODE>alloca()</CODE> function is broken. Fix
this by removing the line in <TT>`config.h'</TT> that defines <CODE>'HAVE_ALLOCA'</CODE>.

</P>
<P>
The <CODE>alloca()</CODE> function also may have an incorrect prototype in
<CODE>/usr/include/alloca.h</CODE>.  This warning resulting from this can be ignored.

</P>
<P>
<CODE>configure</CODE> will use the following thread libraries automatically:
<CODE>--with-named-thread-libs="-lpthread -lmach -lexc -lc"</CODE>.

</P>
<P>
When using <CODE>gcc</CODE>, you can also try running <CODE>configure</CODE> like this:

</P>

<PRE>
shell&#62; CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ....
</PRE>

<P>
If you have problems with signals (<STRONG>MySQL</STRONG> dies unexpectedly
under high load) you may have found an OS bug with threads and
signals. In this case you can tell <STRONG>MySQL</STRONG> not to use signals by
configuring with:

</P>

<PRE>
shell&#62; CFLAGS=-DDONT_USE_THR_ALARM \
       CXXFLAGS=-DDONT_USE_THR_ALARM \
       ./configure ...
</PRE>

<P>
This doesn't affect the performance of <STRONG>MySQL</STRONG>, but has the side
effect that you can't kill clients that are ``sleeping'' on a connection with
<CODE>mysqladmin kill</CODE> or <CODE>mysqladmin shutdown</CODE>.  Instead, the client
will die when it issues its next command.

</P>


<H3><A NAME="SGI-Irix" HREF="manual.ja_toc.html#SGI-Irix">4.11.8  SGI-IRIX notes</A></H3>

<P>
You may have to undefine some things in <TT>`config.h'</TT> after running
<CODE>configure</CODE> and before compiling.

</P>
<P>
In some Irix implementations, the <CODE>alloca()</CODE> function is broken. If the
<CODE>mysqld</CODE> server dies on some <CODE>SELECT</CODE> statements, remove the lines
from <TT>`config.h'</TT> that define <CODE>HAVE_ALLOC</CODE> and <CODE>HAVE_ALLOCA_H</CODE>.
If <CODE>mysqladmin create</CODE> doesn't work, remove the line from
<TT>`config.h'</TT> that defines <CODE>HAVE_READDIR_R</CODE>. You may have to remove
the <CODE>HAVE_TERM_H</CODE> line as well.

</P>
<P>
SGI recommends that you install all of the patches on this page as a set:
http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html

</P>
<P>
At the very minimum, you should install the latest kernel rollup, the
latest <CODE>rld</CODE> rollup, and the latest <CODE>libc</CODE> rollup.

</P>
<P>
You definately need all the POSIX patches on this page, for pthreads support:

</P>
<P>
http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html

</P>
<P>
If you get the something like the following error when compiling
<TT>`mysql.cc'</TT>:

</P>

<PRE>
"/usr/include/curses.h", line 82: error(1084): invalid combination of type
</PRE>

<P>
Then type the following in the top-level directory of your <STRONG>MySQL</STRONG>
source tree:

</P>

<PRE>
shell&#62; extra/replace bool curses_bool &#60; /usr/include/curses.h &#62; include/curses.h
shell&#62; make
</PRE>

<P>
There have also been reports of scheduling problems.  If only one thread is
running, things go slow. Avoid this by starting another client. This may lead
to a 2-to-10-fold increase in execution speed thereafter for the other
thread.  This is a poorly-understood problem with Irix threads; you may have
to improvise to find solutions until this can be fixed.

</P>
<P>
If you are compiling with <CODE>gcc</CODE>, you can use the following
<CODE>configure</CODE> command:

</P>

<PRE>
shell&#62; CC=gcc CXX=gcc CXXFLAGS=-O3 \
       ./configure --prefix=/usr/local/mysql --with-thread-safe-client --with-named-thread-libs=-lpthread
</PRE>



<H3><A NAME="FreeBSD" HREF="manual.ja_toc.html#FreeBSD">4.11.9  FreeBSD notes</A></H3>

<P>
FreeBSD 3.x is recommended for running MySQL since it the thread package
is much more integrated.

</P>
<P>
最も簡単にインストールする方法は、<a HREF="http://www.freebsd.org">http://www.freebsd.org</a> の
mysql-server と mysql-client の ports を利用することです。
<a HREF="http://www.freebsd.org">http://www.freebsd.org</a>

</P>
<P>
これは以下のような利点をもたらします：

<UL>
<LI>

オプティマイズされた <STRONG>MySQL</STRONG> が動く
<LI>

自動 configuration と build
<LI>

スタートアップ用のスクリプトが /usr/local/etc/rc.d にインストール
<LI>

Ability to see which files that are installed with pkg_info -L. And to
remove them all with pkg_delete if you no longer want <STRONG>MySQL</STRONG> on that
machine.
</UL>

<P>
FreeBSD 2.x 上では MIT-pthreads を、そして versions 3 以上では、
ネイティブのスレッドを使用してください。
最近のいくつかの 2.2.x ではネイティブのスレッド で動作が可能ですが、
mysqld を 落とすときに問題が起こります。

</P>
<P>
名前解決の設定を確実にしておいてください。 でないと、mysqld に接続する際、
名前解決にとても時間がかかり、接続に失敗するでしょう。

</P>
<P>
確実に <TT>`/etc/hosts'</TT> ファイルに <CODE>localhost</CODE> が登録されているように
してください。 (でないと、データベースへの接続で問題が出ます)。
 <TT>`/etc/hosts'</TT> ファイルは、以下の行から始まるべきです：

</P>

<PRE>
127.0.0.1       localhost localhost.your.domain
</PRE>

<P>
もし <CODE>configure</CODE> が MIT-pthread を使用すると分かった場合、
MIT-pthreads notes を読むべきです。  「<A HREF="manual.ja_Installing.html#MIT-pthreads">4.9  MIT-pthreads に関して</A>」節参照.

</P>
<P>
If you get an error from <CODE>make install</CODE> that it can't find
<TT>`/usr/include/pthreads'</TT>, <CODE>configure</CODE> didn't detect that you need
MIT-pthreads. This is fixed by executing these commands:
 

<PRE>
shell&#62; rm config.cache
shell&#62; ./configure --with-mit-threads
</PRE>

<P>
FreeBSD の <CODE>make</CODE> の振る舞いは  GNU の <CODE>make</CODE> と少し違います。
もし <CODE>make</CODE> にかかわる問題が出たなら、 GNU <CODE>make</CODE> を
インストールすべきです。

</P>
<P>
FreeBSD では、デフォルトのファイルハンドルの上限値がとても少ない
値であることも知られています。 「<A HREF="manual.ja_Problems.html#Not_enough_file_handles">18.10  File not found</A>」節参照.
safe_mysqld 中の ulimit -n のコメントを外すか、/etc/login.conf ファイルで
mysqld ユーザーの制限値を増加させます。
(/etc/login.conf の変更の際は cap_mkdb /etc/login.conf で再構築が必要です)。
もしデフォルトを使用したくなければ、このユーザーに password ファイル中で
適切な Class を与えることでも、変更可能になります。(use: chpass mysqld-user-name)

</P>
<P>
<A NAME="IDX83"></A>
<A NAME="IDX84"></A>
<A NAME="IDX85"></A>
もし <CODE>SELECT NOW()</CODE> の値が あなたのローカル時間ではなく GMT で返ってくるなら、
 <CODE>TZ</CODE> 環境変数を設定しなくてはなりません。 これはサーバー実行時の
環境変数にすべきで、<CODE>safe_mysqld</CODE> や <CODE>mysql.server</CODE> ファイルに
記述しておきます。

</P>
<P>
安全で安定したシステムを入れるなら、 <CODE>-STABLE</CODE> のカーネルだけを
使用してください。

</P>



<H3><A NAME="NetBSD" HREF="manual.ja_toc.html#NetBSD">4.11.10  NetBSD notes</A></H3>

<P>
To compile on NetBSD you need GNU <CODE>make</CODE>. Otherwise the compile will crash
when <CODE>make</CODE> tries to run <CODE>lint</CODE> on C++ files.

</P>


<H3><A NAME="OpenBSD" HREF="manual.ja_toc.html#OpenBSD">4.11.11  OpenBSD 2.5 notes</A></H3>

<P>
On OpenBSD 2.5, you can compile <STRONG>MySQL</STRONG> with native threads with the
following options:

</P>

<PRE>
CFLAGS=-pthread CXXFLAGS=-pthread ./configure --with-mit-threads=no
</PRE>



<H3><A NAME="BSDI" HREF="manual.ja_toc.html#BSDI">4.11.12  BSD/OS notes</A></H3>



<H4><A NAME="BSDI2" HREF="manual.ja_toc.html#BSDI2">4.11.12.1  BSD/OS 2.x notes</A></H4>

<P>
If you get the following error when compiling <STRONG>MySQL</STRONG>, your
<CODE>ulimit</CODE> value for virtual memory is too low:

</P>

<PRE>
item_func.h: In method `Item_func_ge::Item_func_ge(const Item_func_ge &#38;)':
item_func.h:28: virtual memory exhausted
make[2]: *** [item_func.o] Error 1
</PRE>

<P>
Try using <CODE>ulimit -v 80000</CODE> and run <CODE>make</CODE> again.  If this
doesn't work and you are using <CODE>bash</CODE>, try switching to <CODE>csh</CODE>
or <CODE>sh</CODE>; some BSDI users have reported problems with <CODE>bash</CODE>
and <CODE>ulimit</CODE>.

</P>
<P>
If you are using <CODE>gcc</CODE>, you may also use have to use the
<CODE>--with-low-memory</CODE> flag for <CODE>configure</CODE> to be able to compile
<TT>`sql_yacc.cc'</TT>.

</P>
<P>
<A NAME="IDX86"></A>
<A NAME="IDX87"></A>
<A NAME="IDX88"></A>
If you have a problem with <CODE>SELECT NOW()</CODE> returning values in GMT and
not your local time, you have to set the <CODE>TZ</CODE> environment variable to
your current timezone.  This should be done for the environment in which
the server runs, for example in <CODE>safe_mysqld</CODE> or <CODE>mysql.server</CODE>.

</P>


<H4><A NAME="BSDI3" HREF="manual.ja_toc.html#BSDI3">4.11.12.2  BSD/OS 3.x notes</A></H4>

<P>
Upgrade to BSD/OS 3.1. If that is not possible, install BSDIpatch M300-038.

</P>
<P>
Use the following command when configuring <STRONG>MySQL</STRONG>:

</P>

<PRE>
shell&#62; env CXX=shlicc++ CC=shlicc2 \
       ./configure \
           --prefix=/usr/local/mysql \
           --localstatedir=/var/mysql \
           --without-perl \
           --with-unix-socket-path=/var/mysql/mysql.sock
</PRE>

<P>
The following is also known to work:

</P>

<PRE>
shell&#62; env CC=gcc CXX=gcc CXXFLAGS=-O3 \
       ./configure \
           --prefix=/usr/local/mysql \
           --with-unix-socket-path=/var/mysql/mysql.sock
</PRE>

<P>
You can change the directory locations if you wish, or just use the
defaults by not specifying any locations.

</P>
<P>
If you have problems with performance under heavy load, try using the
<CODE>--skip-thread-priority</CODE> option to <CODE>safe_mysqld</CODE>!  This will run
all threads with the same priority; on BSDI 3.1, this gives better
performance (at least until BSDI fixes their thread scheduler).

</P>
<P>
If you get the error <CODE>virtual memory exhausted</CODE> while compiling,
you should try using <CODE>ulimit -v 80000</CODE> and run <CODE>make</CODE> again.
If this doesn't work and you are using <CODE>bash</CODE>, try switching to
<CODE>csh</CODE> or <CODE>sh</CODE>; some BSDI users have reported problems with
<CODE>bash</CODE> and <CODE>ulimit</CODE>.

</P>


<H4><A NAME="BSDI4" HREF="manual.ja_toc.html#BSDI4">4.11.12.3  BSD/OS 4.x notes</A></H4>

<P>
BSDI 4.x has some thread related bugs.  If you want to use <STRONG>MySQL</STRONG>
on this, you should install all thread related patches. At least
M400-023 should be installed.

</P>


<H3><A NAME="SCO" HREF="manual.ja_toc.html#SCO">4.11.13  SCO notes</A></H3>

<P>
The current port is tested only on a ``sco3.2v5.0.4'' and
``sco3.2v5.0.5'' system.  There has also been a lot of progress on a
port to ``sco 3.2v4.2''.

</P>
<P>
For the moment the recommended compiler on OpenServer is gcc 2.95.2. With this
you should be able to compile <CODE>MySQL</CODE> with just:

</P>

<PRE>
CC=gcc CXX=gcc ./configure ... (options)
</PRE>


<OL>
<LI>

For OpenServer 5.0.X you need to use GDS in Skunkware 95 (95q4c).  This
is necessary because GNU <CODE>gcc</CODE> 2.7.2 in Skunkware 97 does not have
GNU <CODE>as</CODE>.  You can also use <CODE>egcs</CODE> 1.1.2 or newer
<a HREF="http://www.egcs.com/">http://www.egcs.com/</a>.  If you are using <CODE>egcs</CODE> 1.1.2 you have
to execute the following command:


<PRE>
shell&#62; cp -p /usr/include/pthread/stdtypes.h /usr/local/lib/gcc-lib/i386-pc-sco3.2v5.0.5/egcs-2.91.66/include/pthread/
</PRE>

<LI>

You need the port of GCC 2.5.? for this product and the Development
system.  They are required on this version of SCO UNIX.  You cannot
just use the GCC Dev system.
<LI>

You should get the FSU Pthreads package and install it first.  This can be
found at
<a HREF="http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz">http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz</a>.
You can also get a precompiled package from
<a HREF="ftp://www.mysql.com/pub/mysql/Downloads/SCO/FSU-threads-3.5c.tar.gz">ftp://www.mysql.com/pub/mysql/Downloads/SCO/FSU-threads-3.5c.tar.gz</a>.
<LI>

FSU Pthreads can be compiled with SCO UNIX 4.2 with tcpip.  Or
OpenServer 3.0 or Open Desktop 3.0 (OS 3.0 ODT 3.0), with the SCO
Development System installed using a good port of GCC 2.5.X ODT or OS
3.0 you will need a good port of GCC 2.5.? There are a lot of problems
without a good port.  The port for this product requires the SCO UNIX
Development system.  Without it, you are missing the libraries and the
linker that is needed.
<LI>

To build FSU Pthreads on your system, do the following:

<OL>
<LI>

Run <CODE>./configure</CODE> in the <TT>`threads/src'</TT> directory and select
the SCO OpenServer option. This command copies <TT>`Makefile.SCO5'</TT> to
<TT>`Makefile'</TT>.
<LI>

Run <CODE>make</CODE>.
<LI>

To install in the default <TT>`/usr/include'</TT> directory, login as root,
then <CODE>cd</CODE> to the <TT>`thread/src'</TT> directory, and run <CODE>make
install</CODE>.
</OL>

<LI>

Remember to use GNU <CODE>make</CODE> when making <STRONG>MySQL</STRONG>.
<LI>

On OSR 5.0.5, you should use the following configure line:

<PRE>
shell&#62; CC="gcc -DSCO" CXX="gcc -DSCO" ./configure
</PRE>

The <CODE>-DSCO</CODE> is needed to help configure detect some thread
functions properly.  If you forget <CODE>-DSCO</CODE>, you will get the following
error message while compiling:

<PRE>
my_pthread.c: In function `my_pthread_mutex_init':
my_pthread.c:374: `pthread_mutexattr_default' undeclared (first use this function)
</PRE>

<LI>

If you don't start <CODE>safe_mysqld</CODE> as root, you probably will get only the
default 110 open files per process.  <CODE>mysqld</CODE> will write a note about this
in the log file.
<LI>

With SCO 3.2V5.0.5, you should use a FSU Pthreads version 3.5c or newer.
The following <CODE>configure</CODE> command should work:

<PRE>
shell&#62; CC="gcc -belf" ./configure --prefix=/usr/local/mysql --disable-shared
</PRE>

<LI>

With SCO 3.2V4.2, you should use a FSU Pthreads version 3.5c or newer.
The following <CODE>configure</CODE> command should work:

<PRE>
shell&#62; CFLAGS="-D_XOPEN_XPG4" CXX=gcc CXXFLAGS="-D_XOPEN_XPG4" \
       ./configure \
           --with-debug --prefix=/usr/local/mysql \
           --with-named-thread-libs="-lgthreads -lsocket -lgen -lgthreads" \
           --with-named-curses-libs="-lcurses"
</PRE>

You may get some problems with some include files. In this case, you can
find new SCO-specific include files at
<a HREF="ftp://www.mysql.com/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz">ftp://www.mysql.com/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz</a>.
You should unpack this file in the <TT>`include'</TT>
directory of your <STRONG>MySQL</STRONG> source tree.
</OL>

<P>
SCO development notes:

</P>

<UL>
<LI>

<STRONG>MySQL</STRONG> should automatically detect FSU Pthreads and link <CODE>mysqld</CODE>
with <CODE>-lgthreads -lsocket -lgthreads</CODE>.
<LI>

The SCO development libraries are reentrant in FSU Pthreads. SCO claims
that its libraries' functions are reentrant, so they must be reentrant with
FSU Pthreads. FSU Pthreads on OpenServer tries to use the SCO scheme to
make reentrant library.
<LI>

FSU Pthreads (at least the version at <CODE>www.mysql.com</CODE>) comes linked with
GNU <CODE>malloc</CODE>.  If you encounter problems with memory usage, make sure that
<TT>`gmalloc.o'</TT>
is included in <TT>`libgthreads.a'</TT> and <TT>`libgthreads.so'</TT>.
<LI>

In FSU Pthreads, the following system calls are pthreads-aware: <CODE>read()</CODE>,
<CODE>write()</CODE>, <CODE>getmsg()</CODE>, <CODE>connect()</CODE>, <CODE>accept()</CODE>,
<CODE>select()</CODE> and <CODE>wait()</CODE>.
</UL>

<P>
If you want to install DBI on SCO, you have to edit the <TT>`Makefiles'</TT> in
DBI-xxx and each subdirectory:

</P>

<PRE>
OLD:                                  NEW:
CC = cc                               CC = gcc -belf
CCCDLFLAGS = -KPIC -W1,-Bexport       CCCDLFLAGS = -fpic
CCDLFLAGS = -wl,-Bexport              CCDLFLAGS =

LD = ld                               LD = gcc -belf -G -fpic
LDDLFLAGS = -G -L/usr/local/lib       LDDLFLAGS = -L/usr/local/lib
LDFLAGS = -belf -L/usr/local/lib      LDFLAGS = -L/usr/local/lib

LD = ld                               LD = gcc -belf -G -fpic
OPTIMISE = -Od         		      OPTIMISE = -O1

OLD:
CCCFLAGS = -belf -dy -w0 -U M_XENIX -DPERL_SCO5 -I/usr/local/include

NEW:
CCFLAGS = -U M_XENIX -DPERL_SCO5 -I/usr/local/include
</PRE>

<P>
This is because the Perl dynaloader will not load the <CODE>DBI</CODE> modules
if they were compiled with <CODE>icc</CODE> or <CODE>cc</CODE>.

</P>
<P>
Perl works best when compiled with <CODE>cc</CODE>.

</P>


<H3><A NAME="SCO_Unixware" HREF="manual.ja_toc.html#SCO_Unixware">4.11.14  SCO Unixware 7.0 notes</A></H3>

<P>
You must use a version of <STRONG>MySQL</STRONG> at least as recent as 3.22.13, since
that version fixes some portability problems under Unixware.

</P>
<P>
We have been able to compile <STRONG>MySQL</STRONG> with the following <CODE>configure</CODE>
command on UnixWare 7.0.1:

</P>

<PRE>
shell&#62; CC=cc CXX=CC ./configure --prefix=/usr/local/mysql
</PRE>



<H3><A NAME="IBM-AIX" HREF="manual.ja_toc.html#IBM-AIX">4.11.15  IBM-AIX notes</A></H3>

<P>
Automatic detection of <CODE>xlC</CODE> is missing from Autoconf, so a
<CODE>configure</CODE> command something like this is needed when using the IBM
compiler:

</P>

<PRE>
shell&#62; CC="xlc_r -ma -O3 -qstrict -DHAVE_INT_8_16_32" \
       CXX="xlC_r -ma -O3 -qstrict -DHAVE_INT_8_16_32" \
       ./configure
</PRE>

<P>
If you are using <CODE>egcs</CODE> to compile <STRONG>MySQL</STRONG>, you
<STRONG>MUST</STRONG> use the <CODE>-fno-exceptions</CODE> flag, as the exception
handling in <CODE>egcs</CODE> is not thread-safe!  (This is tested with
<CODE>egcs</CODE> 1.1.)  We recommend the following <CODE>configure</CODE> line with
<CODE>egcs</CODE> and <CODE>gcc</CODE> on AIX:

</P>

<PRE>
shell&#62; CXX=gcc \
       CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti" \
       ./configure --prefix=/home/monty --with-debug --with-low-memory
</PRE>

<P>
If you have problems with signals (<STRONG>MySQL</STRONG> dies unexpectedly
under high load) you may have found an OS bug with threads and
signals. In this case you can tell <STRONG>MySQL</STRONG> not to use signals by
configuring with:

</P>

<PRE>
shell&#62; CFLAGS=-DDONT_USE_THR_ALARM CXX=gcc \
       CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti -DDONT_USE_THR_ALARM" \
       ./configure --prefix=/home/monty --with-debug --with-low-memory
</PRE>

<P>
This doesn't affect the performance of <STRONG>MySQL</STRONG>, but has the side
effect that you can't kill clients that are ``sleeping'' on a connection with
<CODE>mysqladmin kill</CODE> or <CODE>mysqladmin shutdown</CODE>.  Instead, the client
will die when it issues its next command.

</P>


<H3><A NAME="HP-UX" HREF="manual.ja_toc.html#HP-UX">4.11.16  HP-UX notes</A></H3>

<P>
There are a couple of ``small'' problems when compiling <STRONG>MySQL</STRONG> on
HP-UX.  We recommend that you use <CODE>gcc</CODE> instead of the HP-UX native
compiler, because <CODE>gcc</CODE> produces better code!

</P>
<P>
We recommend one to use gcc 2.95 on HP-UX.  Don't use high optimization
flags (like -O6) as this may not be safe on HP-UX.

</P>
<P>
Note that MIT-pthreads can't be compiled with the HP-UX compiler,
because it can't compile <CODE>.S</CODE> (assembler) files.

</P>
<P>
The following configure line should work:

</P>

<PRE>
CFLAGS="-DHPUX -I/opt/dce/include" CXXFLAGS="-DHPUX -I/opt/dce/include -felide-constructors -fno-exceptions -fno-rtti" CXX=gcc ./configure --with-pthread --with-named-thread-libs='-ldce' --prefix=/usr/local/mysql --disable-shared
</PRE>

<P>
If you are compiling <CODE>gcc</CODE> 2.95 yourself, you should NOT link it with
the DCE libraries (<CODE>libdce.a</CODE> or <CODE>libcma.a</CODE>) if you want to compile
<STRONG>MySQL</STRONG> with MIT-pthreads.  If you mix the DCE and MIT-pthreads
packages you will get a <CODE>mysqld</CODE> to which you cannot connect.  Remove
the DCE libraries while you compile <CODE>gcc</CODE> 2.95!

</P>


<H3><A NAME="MaxOSX" HREF="manual.ja_toc.html#MaxOSX">4.11.17  MacOS X notes</A></H3>

<P>
One can get <STRONG>MySQL</STRONG> to work on MacOS X by following the links to
the MacOS X ports.  「<A HREF="manual.ja_Introduction.html#Useful_Links">1.8  便利な <STRONG>MySQL</STRONG> 関連リンク</A>」節参照.

</P>
<P>
<STRONG>MySQL</STRONG> 3.23.7 should include all patches necessary to configure
it on MacOSX. You must however first install the pthread package from
<a HREF="http://www.prnet.de/RegEx/mysql.html">MySql for MacOSX Server</a> 
before configuring MySQL.

</P>
<P>
You might want to also add an aliases to your shell's resource file to
access <CODE>mysql</CODE> and <CODE>mysqladmin</CODE> from the command line.

</P>

<PRE>
alias mysql '/usr/local/mysql/bin/mysql'
alias mysqladmin '/usr/local/mysql/libexec/mysqladmin'
</PRE>



<H2><A NAME="Win32" HREF="manual.ja_toc.html#Win32">4.12  Win32 notes</A></H2>

<P>
この節では Win32 上での <STRONG>MySQL</STRONG> の使用とインストールについて述べます。
これは <STRONG>MySQL</STRONG> Win32 配布物の <TT>`README'</TT> ファイルにも述べられています。

</P>



<H3><A NAME="Win32_installation" HREF="manual.ja_toc.html#Win32_installation">4.12.1  Win32 への <STRONG>MySQL</STRONG> のインストール</A></H3>

<P>
もし正式版 <STRONG>MySQL</STRONG> を持っていないなら、最初に以下から
シェアウエアバージョンをダウンロードすべきです：

</P>
<P>
<a HREF="http://www.mysql.com/mysql_w32.htmy"><STRONG>MySQL</STRONG> 3.21.29</a>

</P>
<P>
日本語版の評価版、および正式版の取得は以下になります：
<a HREF="http://www.softagency.co.jp/"> <STRONG>MySQL</STRONG> 日本語版</a>

</P>
<P>
もし他のプログラムから <STRONG>MySQL</STRONG> に接続しようと考えているなら、
多分 <STRONG>MyODBC</STRONG> ドライバーも必要でしょう。 これは
<a HREF="http://www.mysql.com/download.htmy"><STRONG>MySQL</STRONG> download page</a>.
にあります。

</P>
<P>
日本語版の <STRONG>MyODBC</STRONG> ドライバー は：
<a HREF="http://www.softagency.co.jp/"><STRONG>MyODBC</STRONG> 日本語版</a>

</P>
<P>
それぞれの配布物のインストールをするには、ダウンロードした物を
どこか からのディレクトリで unzip し、<CODE>Setup.exe</CODE> プログラムを
実行します。

</P>
<P>
標準では、<STRONG>MySQL</STRONG>-Win32 は <TT>`C:\mysql'</TT> にインストールされるように
なっています。 もし違う場所に <STRONG>MySQL</STRONG> をインストールしたいなら、
一度 <TT>`C:\mysql'</TT> にインストールした後に、そのフォルダを移動します。
 <STRONG>MySQL</STRONG> を <TT>`C:\mysql'</TT> から移動したならば、
 <CODE>mysqld</CODE> に対して、移動先を必ず教えねばなりません。
もし <STRONG>MySQL</STRONG> を <TT>`D:\programs\mysql'</TT> に移動したなら,
<CODE>mysqld</CODE> を以下のようにして起動します：
<CODE>D:\programs\mysql\bin\mysqld --basedir D:\programs\mysql</CODE>
なお、 <CODE>C:\mysql\bin\mysqld --help</CODE> とすると、全てのオプションが表示されます！

</P>
<P>
正式版の <STRONG>MySQL</STRONG> では、<TT>`C:\my.cnf'</TT> ファイルを作成し、
そこに <STRONG>MySQL</STRONG> サーバーのオプションを記述することが可能です。
<TT>`\mysql\my-example.cnf'</TT> を <TT>`C:\my.cnf'</TT> にコピーし、
ご自分の環境に合わせて編集して使用してください。
全てのパスには <CODE>\</CODE> ではなくて <CODE>/</CODE> を使用しなくてはなりません。
もし <CODE>\</CODE> を使用する場合には、これを２倍します。 <STRONG>MySQL</STRONG> では
 <CODE>\</CODE> はエスケープ文字だからです。
 「<A HREF="manual.ja_Installing.html#Option_files">4.15.4  オプションファイル ( <CODE>my.cnf</CODE> )</A>」節参照.

</P>



<H3><A NAME="Win95_start" HREF="manual.ja_toc.html#Win95_start">4.12.2  Win95 / Win98 上での <STRONG>MySQL</STRONG> 起動</A></H3>

<P>
<STRONG>MySQL</STRONG> は TCP/IP をクライアントからサーバーへの接続に使用します。
（これは、あなたのネットワーク上のいかなるマシンからも <STRONG>MySQL</STRONG> サーバーに
接続できるでしょう）。 このため、<STRONG>MySQL</STRONG> を起動する前に、
あなたは TCP/IP をインストールしなくてはなりません。
これは Windows CD-ROM にあります。

</P>
<P>
もし古い Win95 (for example OSR2) を使用しているなら、
これは古い Winsock パッケージを使用しているかもしれません！
<STRONG>MySQL</STRONG> は Winsock 2 を要求します！ 最新の Winsock は
<a HREF="http://www.microsoft.com">Microsoft</a> にあります。
 Win98 はデフォルトで新しい Winsock 2 ライブラリですので、
これは Win98 には当てはまりません。

</P>
<P>
2つの違う <STRONG>MySQL</STRONG> サーバーがあります：

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>mysqld</CODE> </TD><TD> フルデバッグを有効にして、自動 memory allocation をチェックするようにコンパイル
</TR NOSAVE>
<TR><TD><CODE>mysqld-opt</CODE> </TD><TD> Pentium プロセッサー用に最適化した物
</TR>
</TABLE>

<P>
両方とも Intel プロセッサー &#62;= i386 で動作します。

</P>
<P>
<CODE>mysqld</CODE> サーバーを起動するには, MS-DOS から以下のようにしなくてはなりません：

</P>

<PRE>
C:\mysql\bin\mysqld
</PRE>

<P>
これは <CODE>mysqld</CODE> をバックグラウンドで動かします。

</P>
<P>
<STRONG>MySQL</STRONG> サーバーの kill には：

</P>

<PRE>
C:\mysql\bin\mysqladmin -u root shutdown
</PRE>

<P>
Note that Win95/Win98 don't support creation of named pipes.  On
Win95/Win98, you can only use named pipes to connect to a remote
<STRONG>MySQL</STRONG> running on an NT server.

</P>


<H3><A NAME="NT_start" HREF="manual.ja_toc.html#NT_start">4.12.3  NT 上での <STRONG>MySQL</STRONG> 起動</A></H3>

<P>
The Win95/Win98 section also applies to <STRONG>MySQL</STRONG> on NT, with the
following differences:

</P>
<P>
TCP/IP で <STRONG>MySQL</STRONG> を動かすには、service pack 3(以上) が必須です！ 

</P>
<P>
NT では, サーバーの名前は <CODE>mysqld-nt</CODE> です.  通常、以下のようにして
 NT のサービスとして <STRONG>MySQL</STRONG> をインストールしなくてはなりません：

</P>

<PRE>
C:\mysql\bin\mysqld-nt --install
</PRE>

<P>
(<CODE>mysqld</CODE> や <CODE>mysqld-opt</CODE> を NT 上で動作させることも出来ます。
しかしこれらは、サービスとしてスタートさせることが出来ず、また、
named pipes の使用も出来ません。)

</P>
<P>
<STRONG>MySQL</STRONG> サービスの起動と停止は：

</P>

<PRE>
NET START mysql
NET STOP mysql
</PRE>

<P>
この場合、<CODE>mysqld-nt</CODE> に、いかなるオプションも使用できないことに注意！

</P>
<P>
もし <CODE>mysqld-nt</CODE> をオプション無しで起動する必要があるならば、
 <CODE>mysqld-nt</CODE> をスタンドアローンのプログラムとして NT 上で走らせることも
出来ます！ もし <CODE>mysqld-nt</CODE> をオプション無しで NT 上で起動すると、
 <CODE>mysqld-nt</CODE> は自分自身をサービスとして立ち上げようとします。
デフォルトのサービスオプションを使用して。
 もし既に <CODE>mysqld-nt</CODE> を止めていたなら、 <CODE>NET START mysql</CODE> で
起動しなくてはなりません。

</P>
<P>
サービスは <CODE>MySql</CODE> という名前で登録されます。 一度インストールしたら、
これは Services Control Manager (SCM) Utility (コントロールパネルにある)
を使用するか、<CODE>NET START MySQL</CODE> コマンドを使用するかして、
起動されなくてはなりません。
もし、オプションがなにも指定されていないなら、<CODE>MySQL</CODE> サービス開始前に、
SCM Utility の "Startup parameters" に記述しなくてはなりません。
一度走れば、 <CODE>mysqld-nt</CODE> は <CODE>mysqladmin</CODE> や SCM utility 、
<CODE>NET STOP MySQL</CODE> コマンドで停止できます。
もし SCM を使用して <CODE>mysqld-nt</CODE> 停止するなら、
 <CODE>mysqld shutdown normally</CODE> についての変なメッセージがでます。
When run as a service, <CODE>mysqld-nt</CODE> has no access to a console and so no
messages can be seen.

</P>
<P>
NT では以下のエラーメッセージが出るかもしれません：

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>Permission Denied </TD><TD> Means that it cannot find <CODE>mysqld-nt.exe</CODE>
</TR NOSAVE>
<TR><TD>Cannot Register </TD><TD> Means that the path is incorrect
</TR>
</TABLE>

<P>
もし <CODE>mysqld-nt</CODE> をサービスとしてインストールする場合に
問題が発生した場合、フルパスで実行してみてください：

</P>

<PRE>
C:\mysql\bin\mysqld --install
</PRE>

<P>
もしこれで動作しないようなら、レジストリ内のパスを修正すれば <CODE>mysqld-nt</CODE> を
起動できるでしょう。

</P>
<P>
サービスとして <CODE>mysqld-nt</CODE> を起動したくないなら以下のようにします：

</P>

<PRE>
C:\mysql\bin\mysqld-nt --standalone
</PRE>

<P>
or

</P>

<PRE>
C:\mysql\bin\mysqld-nt --standalone --debug
</PRE>

<P>
最新のバージョンでは、デバッグのトレースを <TT>`C:\mysqld.trace'</TT> に出します。

</P>


<H3><A NAME="Win32_running" HREF="manual.ja_toc.html#Win32_running">4.12.4  Win32 上で <STRONG>MySQL</STRONG> を実行</A></H3>

<P>
<STRONG>MySQL</STRONG>は全ての Win32 プラットフォーム上で TCP/IP をサポートし、
NT 上で named pipe をサポートします。
デフォルトは、NT 上でローカルに接続するときにネームド・パイプが使用され、
そのほかの全ての場合で TCP/IP が使用されます。
 ホスト名はどのプロトコルを使用するかを決めます：

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<STRONG>Host name</STRONG> </TD><TD> <STRONG>protocol</STRONG>
<TR><TD>NULL (none) </TD><TD> NT では最初にネームド・パイプを試み、動かなければ TCP/IP を使用します。 Win95/Win98 では TCP/IP を使用します。
</TR NOSAVE>
<TR><TD>. </TD><TD> ネームド・パイプ
</TR NOSAVE>
<TR><TD>localhost </TD><TD> TCP/IP to current host
</TR NOSAVE>
<TR><TD>hostname </TD><TD> TCP/IP
</TR>
</TABLE>

<P>
<STRONG>MySQL</STRONG> クライアントに named pipes を強制的に使用させるには、
<CODE>--pipe</CODE> オプションを指定します。 そして、<CODE>--socket</CODE> オプションで
パイプの名前を指定します。

</P>
<P>
<STRONG>MySQL</STRONG> が動いているかどうかは、以下のようにして確認できます：

</P>

<PRE>
C:\mysql\bin\mysqlshow
C:\mysql\bin\mysqlshow -u root mysql
C:\mysql\bin\mysqladmin version status proc
C:\mysql\bin\mysql test
</PRE>

<P>
もし Win95/Win98 上で <CODE>mysqld</CODE> への接続が遅いようなら、DNS の問題かもしれません。
この場合、 <CODE>mysqld</CODE> を <CODE>--skip-name-resolve</CODE> オプションで
起動し、<STRONG>MySQL</STRONG> 許可テーブルには、<CODE>localhost</CODE> と IP アドレスだけ
使用します。
NT上で走る <CODE>mysqld-nt</CODE> <STRONG>MySQL</STRONG> サーバーに対しての接続時に
 DNS を避けるために、 <CODE>--pipe</CODE> 引数を指定してネームド・パイプを
使用できます。 これはほとんどの <STRONG>MySQL</STRONG> クライアントで動きます。

</P>
<P>
2つの <STRONG>MySQL</STRONG> コマンドラインツールがあります：
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>mysql</CODE> </TD><TD> Compiled on native Win32, which offers very limited text
editing capabilities.
</TR NOSAVE>
<TR><TD><CODE>mysqlc</CODE> </TD><TD> Compiled with the Cygnus GNU compiler and libraries, which offers <CODE>readline</CODE> editing.
</TR>
</TABLE>

</P>
<P>
もし <CODE>mysqlc.exe</CODE> を使用したいなら, 
<TT>`C:\mysql\lib\cygwinb19.dll'</TT> を <TT>`\windows\system'</TT> (か、似たパス)
にコピーしなくてはなりません。

</P>
<P>
Win32 の <STRONG>MySQL</STRONG> の初期の権限は、ローカルの全てのユーザーに
対して、全てのデータベースで全ての権限が与えられています。
<STRONG>MySQL</STRONG> を安全にするために、全てのユーザーにパスワードを
設定すべきです。また、<CODE>mysql.user</CODE> テーブルから
<CODE>Host='localhost'</CODE> で <CODE>User=''</CODE> となっているレコードを
削除すべきです。

</P>
<P>
<CODE>root</CODE> ユーザーにもパスワードを設定すべきです：
(The following example starts by removing the anonymous user, that allows
anyone to access the 'test' database)

</P>

<PRE>
C:\mysql\bin\mysql mysql
mysql&#62; DELETE FROM user WHERE Host='localhost' AND User='';
mysql&#62; QUIT
C:\mysql\bin\mysqladmin reload
C:\mysql\bin\mysqladmin -u root password your_password
</PRE>

<P>
パスワードを設定した後、もし <CODE>mysqld</CODE> サーバーを停止させるなら、
以下のようにします：

</P>

<PRE>
mysqladmin --user=root --password=your_password shutdown
</PRE>

<P>
If you are using the shareware version of <STRONG>MySQL</STRONG> under windows,
the above command will fail with an error: <CODE>parse error near 'SET
OPTION password'</CODE>.  This is because the shareware version, which is
based on MySQL 3.21, doesn't have the <CODE>SET PASSWORD</CODE> command.

</P>
<P>
With the shareware version you can set the password for the root user as
follows:

</P>

<PRE>
C:\mysql\bin\mysql mysql
mysql&#62; UPDATE user SET password=PASSWORD('your password') WHERE user='root';
mysql&#62; QUIT
C:\mysql\bin\mysqladmin reload
</PRE>

<P>
With the registered <STRONG>MySQL</STRONG> version you can easily add new users
and change privileges with <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> commands.
 「<A HREF="manual.ja_Reference.html#GRANT">7.26  <CODE>GRANT</CODE> と <CODE>REVOKE</CODE> 構文</A>」節参照.  With the Windows shareware version on has to use
<CODE>INSERT</CODE>, <CODE>UPDATE</CODE> and <CODE>DELETE</CODE> one the tables in the
<CODE>mysql</CODE> database to manage users and their privileges.
 「<A HREF="manual.ja_Privilege_system.html#Access_denied">6.12  何故 <CODE>Access denied</CODE> エラーになるのか</A>」節参照.

</P>



<H3><A NAME="Win32_and_SSH" HREF="manual.ja_toc.html#Win32_and_SSH">4.12.5  SSH を利用してリモートの <STRONG>MySQL</STRONG> に Win32 から接続</A></H3>

<P>
SSH を利用して、Win32 から、どうやってリモートの MySQL に接続するかの説明です。
(by David Carlson).

</P>

<UL>
<LI>

あなたの windows マシンに SSH クライアントをインストールします - 私はフリー版の
SSH クライアントを使用しました。 <a HREF="http://www.doc.ic.ac.uk/~ci2/ssh/">http://www.doc.ic.ac.uk/~ci2/ssh/</a>.
他の有益な情報は：
<a HREF="http://www.npaci.edu/Security/npaci_security_software.html">http://www.npaci.edu/Security/npaci_security_software.html</a> and
<a HREF="http://www.npaci.edu/Security/samples/ssh32_windows/index.html">http://www.npaci.edu/Security/samples/ssh32_windows/index.html</a>.
<LI>

SSH を起動。 Host Name を あなたの MySQL サーバーの名前か IP アドレスにセットします。
userid を、あなたのサーバーへのログイン名にセットします。
<LI>

"local forwards" をクリック。 <CODE>local port: 3306</CODE>,
<CODE>host: localhost</CODE>, <CODE>remote port: 3306</CODE> にそれぞれセット。
<LI>

全て保存(Save)。 保存しても次回やり直しができます。
<LI>

SSH であなたのサーバーにログイン。
<LI>

なにか ODBC アプリケーション(例えば Access) を起動。
<LI>

ODBC ドライバーを利用して MySQL への新しいファイルとリンクを作成。
これは通常の時と作成方法は変わりないですが、サーバーが "localhost" で
あることが違います
</UL>

<P>
That's it. It works very well with a direct Internet connection. I'm
having problems with SSH conflicting with my Win95 network and Wingate -
but that'll be the topic of a posting on another software company's
usegroup!

</P>


<H3><A NAME="Win32_vs._Unix" HREF="manual.ja_toc.html#Win32_vs._Unix">4.12.6  <STRONG>MySQL</STRONG>-Win32 compared to Unix <STRONG>MySQL</STRONG></A></H3>

<P>
<STRONG>MySQL</STRONG>-Win32 バージョンは現在それ自体とても安定した(stableな)状態で供給されています。
MySQL-win32 バージョンは すべての機能がUNIXバージョンのMySQLと対応しています。
ただし、下記のような例外があります。

</P>
<DL COMPACT>

<DT><STRONG>Win95 とスレッド</STRONG>
<DD>
Win95は、各々のスレッドの作成のためにメインメモリのおよそ200バイトをメモリリーク
します。これのために、もしあなたが多くの接続をすれば、<STRONG>MySQL</STRONG> の各々の接続が新しい
スレッドを作成するので、あなたはWin95では長時間、<CODE>mysqld</CODE> を実行させるべきではあり
ません！
WinNT and Win98 don't suffer from this bug.

<DT><STRONG>ブロック読み込み</STRONG>
<DD>
<STRONG>MySQL</STRONG> はそれぞれの接続のためにブロック読み込みを使います。
これは以下の事柄を意味しています：

<UL>

<LI>

接続は、<STRONG>MySQL</STRONG> のUnixバージョンで起こるように、8時間の後に自動的に接続が断
ち切られるわけではありません

<LI>

もし接続が「ハングすれば」、<STRONG>MySQL</STRONG>を終了しないでそれを中断することは、不可能です。

<LI>

<CODE>mysqladmin kill</CODE> は、スリープしている接続上では働かないはずです。

<LI>

スリープしている接続があるかぎり、<CODE>mysqladmin shutdown</CODE> は、中絶することができません。
</UL>

私たちは、近い将来にこれを修正することを計画しています。

<DT><STRONG>UDF 関数</STRONG>
<DD>
差し当り、<STRONG>MySQL</STRONG>-Win32 はユーザの定義できる関数をサポートしません。

<DT><STRONG><CODE>DROP DATABASE</CODE></STRONG>
<DD>
複数のスレッドで使われているデータベースはDROPをすることができません。

<DT><STRONG>タスクマネージャーからの <STRONG>MySQL</STRONG> の終了</STRONG>
<DD>
Windows95では「Windowsの終了」やタスクマネージャから <STRONG>MySQL</STRONG> を終了することはできません。
<CODE>mysqladmin shutdown</CODE> で終了しなければなりません。

<DT><STRONG>大文字小文字を区別しない名前</STRONG>
<DD>
Win32ではファイルネームは大文字小文字が区別されます。そのため、Win32用の <STRONG>MySQL</STRONG> で
はテーブル名は大文字小文字が区別されます。唯一の制限は、名前が所定のステートメン
トの至る所の同じケースで与えられなければならないそのデータベースと表です。
下のようなクエリーは働きません。それが表の <CODE>MY_TABLE</CODE>, <CODE>my_table</CODE> 両方を参照するからで
す。


<PRE>
SELECT * FROM my_table WHERE MY_TABLE.col=1;
</PRE>

<DT><STRONG>The <SAMP>`\'</SAMP> (ディレクトリ名)</STRONG>
<DD>
Win95のパス名コンポーネントは、 <SAMP>`\'</SAMP> によって離されますが、その文字は同じく <STRONG>MySQL</STRONG> のエ
スケープ文字でもあります。もしあなたは <CODE>LOAD DATA INFILE</CODE> または <CODE>SELECT ... INTO OUTFILE</CODE> を使って、UNIXでのファイルネームで <SAMP>`/'</SAMP> を書くようにしたいなら、その代わりに
「\\」と <SAMP>`\'</SAMP> をダブルで使わなくてはなりません。


<PRE>
LOAD DATA INFILE "C:\\tmp\\skr.txt" INTO TABLE skr;
SELECT * FROM skr INTO OUTFILE 'C:/tmp/skr.txt';
</PRE>

<DT><STRONG><CODE>Can't open named pipe</CODE> エラー</STRONG>
<DD>
もしあなたが最新の mysql-clients を持つNTの上で <STRONG>MySQL</STRONG>-Win32 のシェアウェアバージョン
を使えば、あなたは、次のエラーを得ることになるはずです:


<PRE>
error 2017: can't open named pipe to host: . pipe...
</PRE>

<A NAME="IDX89"></A>
これは、 <STRONG>MySQL</STRONG> のリリースバージョンがデフォルトでNTの上にネームドパイプを使ってい
るために起こっています。
あなたは新しい <STRONG>MySQL</STRONG> クライアントにまたは <TT>`C:\my.cnf'</TT> ファイルを作るさい(このファイ
ルは以下の情報を含みます)に <CODE>--host=localhost</CODE> オプションを使うことによってこのエ
ラーを避けられます。


<PRE>
[client]
host = localhost
</PRE>

<DT><STRONG><CODE>Access denied for user</CODE> error</STRONG>
<DD>
もしあなたが同じマシン上の <STRONG>MySQL</STRONG> サーバーにアクセスした時
<CODE>Access denied for user: 'some-user@unknown' to database 'mysql'</CODE>
 エラーを得るなら、これはあなたの <STRONG>MySQL</STRONG> があなた
のマシンのホスト名を正しく解決できてないことを意味します。

これを修正するにはあな
たはファイル <TT>`\windows\hosts'</TT> を作り、以下の情報を書くことによってすべきです。
(注:Windows95,98には\Windowsフォルダ上にサンプルとして「lmhosts.sam」ファイルが
既にあるはずです)


<PRE>
127.0.0.1       localhost
</PRE>

</DL>

<P>
ここにはWin32リリースを助けてくれる誰かのためにいくつかオープンになっている問題
があります:

</P>

<UL>
<LI>

Make a single user <CODE>MYSQL.DLL</CODE> server.  This should include everything in
a standard <STRONG>MySQL</STRONG> server, except thread creation.  This will make
<STRONG>MySQL</STRONG> much easier to use in applications that don't need a true
client/server and don't need to access the server from other hosts.

<LI>

Add some nice ``start'' and ``shutdown'' icons to the <STRONG>MySQL</STRONG> installation.
<TT>`MySQL.DLL'</TT>.

<LI>

Create a tool to manage registry entries for the <STRONG>MySQL</STRONG> startup
options.  The registry entry reading is already coded into <CODE>mysqld.cc</CODE>,
but it should be recoded to be more ``parameter'' oriented.
The tool should also be able to update the <TT>`\my.cnf'</TT> file if the user
would prefer to use this instead of the registry.

<LI>

NT上で <CODE>mysqld</CODE> をサービスとして <CODE>--install</CODE> フラグで登録するとき、もしあなたがコマンドラ
インの上でデフォルトのオプションを同じく加えることができれば、それは、良いだろ
う。この問題は差し当たって、 <TT>`C:\my.cnf'</TT> ファイルを代わりにすることで代用していま
す。

<LI>

あなたがラップトップの走るWin95を中断すると、ラップトップのレジュームされる時、
 <CODE>mysqld</CODE> デーモンは新しい接続を受け入れません。私たちは、これがWin95、TCP/IP、また
は、 <STRONG>MySQL</STRONG> が持つ問題であるかどうかわかりません。

<LI>

また、タスクマネージャから <CODE>mysqld</CODE> を終了させることができればほんとうに親切でしょう。
今のところ、あなたは <CODE>mysqladmin shutdown</CODE> を使わなければなりません。

<LI>

<CODE>mysql</CODE> のコマンドラインツールとして <CODE>readline</CODE> をWin32に移植しませんか？

<LI>

標準の <STRONG>MySQL</STRONG> クライアント(<CODE>mysql</CODE>、<CODE>mysqlshow</CODE>、<CODE>mysqladmin</CODE>、および、<CODE>mysqldump</CODE>)のGUI
バージョンがあればいいでしょうねぇ。

<LI>

もし <TT>`net.c'</TT> のソケットへ「読み込み」と「書き込み」がinterruptibleならば、それはい
いのですが。これができればWin32上で <CODE>mysqladmin kill</CODE> を使用して開かれたスレッドを終
了できるのですが。

<LI>

<STRONG>MySQL</STRONG>-Win32/<STRONG>MyODBC</STRONG> について書かれたWindowsプログラミングのドキュメント…それらが
動いていることを確認済みであること。

<LI>

<CODE>mysqld</CODE> はデフォルトロケールではなく、常に「C」ロケールで起動します。私たちは、
ソート順序のために、 <CODE>mysqld</CODE> に、現在のロケールを使わせたい。

<LI>

MysqlManagerにもっと多くのオプションを。

<LI>

クライアントとサーバーのコミュニケーションプロトコルの変更…socketsとTCP/IPの代
わりにWindows内部のコミュニケーションを使う

<LI>

UDF 関数の <CODE>.DLL</CODE> での実装

<LI>

Add macros to use the faster thread-safe increment/decrement methods
provided by Win32.

</UL>

<P>
他のwin32に限定された症状は <STRONG>MySQL</STRONG>-Win32 ディストリビューションに同梱されている
 <TT>`README'</TT> ファイルで説明されています。

</P>



<H2><A NAME="OS/2" HREF="manual.ja_toc.html#OS/2">4.13  OS/2 notes</A></H2>

<P>
<STRONG>MySQL</STRONG> uses quite a few open files. Because of this, you
should add something like the following to your <TT>`CONFIG.SYS'</TT> file:

</P>

<PRE>
SET EMXOPT=-c -n -h1024
</PRE>

<P>
If you don't do this, you will probably run into the following error:

</P>

<PRE>
File 'xxxx' not found (Errcode: 24)
</PRE>

<P>
When using <STRONG>MySQL</STRONG> with OS/2 Warp 3, FixPack 29 or above is
required.  With OS/2 Warp 4, FixPack 4 or above is required. This is a
requirement of the Pthreads library.  <STRONG>MySQL</STRONG> must be installed
in a partition that supports long file names such as HPFS, FAT32, etc.

</P>
<P>
The <TT>`INSTALL.CMD'</TT> script must be run from OS/2's own <TT>`CMD.EXE'</TT>
and may not work with replacement shells such as <TT>`4OS2.EXE'</TT>.

</P>
<P>
The <TT>`scripts/mysql-install-db'</TT> script has been renamed: it is now called
<TT>`install.cmd'</TT> and is a REXX script which will set up the default
<STRONG>MySQL</STRONG> security settings and create the WorkPlace Shell icons
for <STRONG>MySQL</STRONG>.

</P>
<P>
Dynamic module support is compiled in but not fully tested. Dynamic
modules should be compiled using the Pthreads runtime library.

</P>

<PRE>
gcc -Zdll -Zmt -Zcrtdll=pthrdrtl -I../include -I../regex -I.. \
    -o example udf_example.cc -L../lib -lmysqlclient udf_example.def
mv example.dll example.udf
</PRE>

<P>
<STRONG>Note:</STRONG> Due to limitations in OS/2, UDF module name stems must not
exceed 8 characters. Modules are stored in the <TT>`/mysql2/udf'</TT>
directory; the <CODE>safe-mysqld.cmd</CODE> script will put this directory in
the <CODE>BEGINLIBPATH</CODE> environment variable. When using UDF modules,
specified extensions are ignored -- it is assumed to be <TT>`.udf'</TT>.
For example, in Unix, the shared module might be named <TT>`example.so'</TT>
and you would load a function from it like this:

</P>

<PRE>
CREATE FUNCTION metaphon RETURNS STRING SONAME "example.so";
</PRE>

<P>
Is OS/2, the module would be named <TT>`example.udf'</TT>, but you would not
specify the module extension:

</P>

<PRE>
CREATE FUNCTION metaphon RETURNS STRING SONAME "example";
</PRE>



<H2><A NAME="TcX_binaries" HREF="manual.ja_toc.html#TcX_binaries">4.14  TcX binaries</A></H2>

<P>
サービスとして、TcX は <STRONG>MySQL</STRONG> のバイナリ配布を提供しています。
これらのコンパイルは TcX 内部でおこなったり、我々にマシンの
アクセスを提供してもらっている顧客のマシン上で行っています。

</P>
<P>
これらの配布物は <CODE>scripts/make_binary_distribution</CODE> で作成され、
以下のコンパイルオプションで調整されています。

</P>
<DL COMPACT>

<DT>SunOS 4.1.4 2 sun4c with <CODE>gcc</CODE> 2.7.2.1
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --disable-shared</CODE>

<DT>SunOS 5.5.1 sun4u with <CODE>egcs</CODE> 1.0.3a
<DD>
<CODE>CC=gcc CFLAGS="-O6 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O6 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-low-memory</CODE>

<DT>SunOS 5.6 sun4u with <CODE>egcs</CODE> 2.90.27
<DD>
<CODE>CC=gcc CFLAGS="-O6 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O6 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-low-memory</CODE>

<DT>SunOS 5.6 i86pc with <CODE>gcc</CODE> 2.8.1
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-low-memory</CODE>

<DT>Linux 2.0.33 i386 with <CODE>pgcc</CODE> 2.90.29 (<CODE>egcs</CODE> 1.0.3a)
<DD>
<CODE>CFLAGS="-O6 -mpentium -mstack-align-double -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O6 -mpentium -mstack-align-double -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static</CODE>

<DT>SCO 3.2v5.0.4 i386 with <CODE>gcc</CODE> 2.7-95q4
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</CODE>

<DT>AIX 2 4 with <CODE>gcc</CODE> 2.7.2.2
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</CODE>

<DT>OSF1 V4.0 564 alpha with <CODE>gcc</CODE> 2.8.1
<DD>
<CODE>CC=gcc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-low-memory</CODE>

<DT>Irix 6.3 IP32 with <CODE>gcc</CODE> 2.8.0
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</CODE>

<DT>BSDI BSD/OS 3.1 i386 with <CODE>gcc</CODE> 2.7.2.1
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O ./configure --prefix=/usr/local/mysql</CODE>

<DT>BSDI BSD/OS 2.1 i386 with <CODE>gcc</CODE> 2.7.2
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</CODE>
</DL>

<P>
上で示したオプション以外で最適化を施した方はだれでも、開発者向けの
メーリングリストにポストできます。
<a HREF="mailto:developer@lists.mysql.com">developer@lists.mysql.com</a>.

</P>
<P>
RPM 配布では <STRONG>MySQL</STRONG> 3.22 を user-contributed としています。
3.22 をはじめ、いくつかの RPM パッケージは TcX 製です。

</P>



<H2><A NAME="Post-installation" HREF="manual.ja_toc.html#Post-installation">4.15  インストール後の設定とテスト</A></H2>

<P>
初めて <STRONG>MySQL</STRONG>をインストールしたら(バイナリからでもソースからでもですが)、
サーバーを動作させるために、許可テーブルを初期化しなくてはなりません。
またマシンの起動時、停止時に、サーバーを自動で開始、停止することもできます。

</P>
<P>
通常、許可テーブルのインストールとサーバーの開始は、
ソース配布なら以下のようにします：

</P>

<PRE>
shell&#62; ./scripts/mysql_install_db
shell&#62; cd mysql_installation_directory
shell&#62; ./bin/safe_mysqld &#38;
</PRE>

<P>
For a binary distribution, do this:

</P>

<PRE>
shell&#62; cd mysql_installation_directory
shell&#62; ./bin/mysql_install_db
shell&#62; ./bin/safe_mysqld &#38;
</PRE>

<P>
テストは、<STRONG>MySQL</STRONG> のトップディレクトリーから簡単に実行できます。
バイナリ配布を使用する場合、これ(トップディレクトリ)は
インストール先のディレクトリーになるでしょう(<TT>`/usr/local/mysql'</TT>)。
ソース配布の場合、これは <STRONG>MySQL</STRONG> のソースディレクトリです。

</P>
<P>
コマンドは本節といかに続く節で説明しますが、<CODE>BINDIR</CODE> は
<CODE>mysqladmin</CODE> や <CODE>safe_mysqld</CODE> がインストールされたディレクトリを示します。
バイナリ配布を使用している場合、<CODE>BINDIR</CODE> はバイナリ配布の <TT>`bin'</TT> ディレクトリになります。
ソースからインストールした場合、<CODE>BINDIR</CODE> は、<CODE>configure</CODE> で特別指定しない限り、
<TT>`/usr/local/bin'</TT> です。
<CODE>EXECDIR</CODE> は <CODE>mysqld</CODE> サーバーのインストール先です。
バイナリ配布を使用している場合、これは <CODE>BINDIR</CODE> ディレクトリと同一になります。
ソースからインストールした場合、<TT>`/usr/local/libexec'</TT> です。

</P>
<P>
Testing is described in detail below:

</P>

<OL>
<LI>

必要ならば、<CODE>mysqld</CODE> サーバーを起動し <STRONG>MySQL</STRONG> の許可テーブルを初期化します。
(許可テーブルはユーザーがどのような特権をもってサーバーに接続を許すかを決定するものです。)
これは通常、<CODE>mysql_install_db</CODE> スクリプトで初期化されます。


<PRE>
shell&#62; scripts/mysql_install_db
</PRE>

通常、<CODE>mysql_install_db</CODE> の実行は初めて <STRONG>MySQL</STRONG> をインストール
したあと一度だけ必要です。  すでにインストールされているものを
アップグレードする際にはこの手順は飛ばせます。
（しかし、<CODE>mysql_install_db</CODE> は実に安全で、すでにテーブルが
存在している場合はいかなるテーブルも更新しません。したがって、
実行すべきかどうかわからない場合は、<CODE>mysql_install_db</CODE> を常に
走らせることができます）

<CODE>mysql_install_db</CODE> は 6個のテーブルを作ります (<CODE>user</CODE>, <CODE>db</CODE>,
<CODE>host</CODE>, <CODE>tables_priv</CODE>, <CODE>columns_priv</CODE> and <CODE>func</CODE>)
<CODE>mysql</CODE> データベースに。 初期の特権状態についての説明は
 「<A HREF="manual.ja_Privilege_system.html#Default_privileges">6.9  <STRONG>MySQL</STRONG> 特権許可の初期設定</A>」節.  これらの特権は <STRONG>MySQL</STRONG> <CODE>root</CODE> ユーザーに
なんでもできるように許可し、そして、だれもが
<CODE>'test'</CODE> という名前か <CODE>'test_'</CODE> ではじまる名前をもつ
データベースを作成、使用できるように許可されています。

もし許可テーブルを設定していない場合、サーバーを起動時に以下のエラーが出ます：

<A NAME="IDX90"></A>

<PRE>
mysqld: Can't find file: 'host.frm'
</PRE>

バイナリ配布の <STRONG>MySQL</STRONG> では、もし <STRONG>MySQL</STRONG> を
 <CODE>./bin/safe_mysqld</CODE> を実行しないで起動した場合に、このエラーがおきます。!

<CODE>root</CODE> で <CODE>mysql_install_db</CODE> を実行する必要があるとあなたは思うかもしれません。
しかし、 <STRONG>MySQL</STRONG> は <CODE>root</CODE> 以外のユーザーで起動できます。
データベースディレクトリがサーバーを起動したユーザに対して読み書きが許可されていれば良いのです。
<STRONG>MySQL</STRONG> を一般ユーザーで走らせる方法は  「<A HREF="manual.ja_Problems.html#Changing_MySQL_user">18.7  一般ユーザで <STRONG>MySQL</STRONG> を動かす方法</A>」節.

もし <CODE>mysql_install_db</CODE> で問題が出たら、
 「<A HREF="manual.ja_Installing.html#mysql_install_db">4.15.1  <CODE>mysql_install_db</CODE> 実行時の問題</A>」節. を参照のこと。

<CODE>mysql_install_db</CODE> スクリプトを走らせるにはいくつか選択があります：


<UL>
<LI>

<CODE>mysql_install_db</CODE> を走らせる前に編集して、許可の初期状態を変更してもいいでしょう。
これは多くのマシンに同じ特権設定をして <STRONG>MySQL</STRONG> をインストールする際に
役立ちます。 この場合、いくつかの <CODE>INSERT</CODE> 構文を <CODE>mysql.user</CODE> と
<CODE>mysql.db</CODE> テーブルにたいして追加するようにするだけですみます!

<LI>

もしインストール後に許可を変更したい場合、 <CODE>mysql -u root mysql</CODE> で <STRONG>MySQL</STRONG> <CODE>root</CODE> ユーザーで接続して直接許可テーブルを変更する SQL 文を実行します。

<LI>

すでに許可テーブルが作成された状態で、完全に許可テーブルを作成し直すことができます。
これはすでにインストールされたテーブルがある場合や、<CODE>mysql_install_db</CODE> を編集した後にそう思うかもしれません。
</UL>

これらの選択については  「<A HREF="manual.ja_Privilege_system.html#Default_privileges">6.9  <STRONG>MySQL</STRONG> 特権許可の初期設定</A>」節 からさらに情報が得られます。

<LI>

<STRONG>MySQL</STRONG> サーバーを以下のようにして起動します：

<PRE>
shell&#62; cd mysql_installation_directory
shell&#62; bin/safe_mysqld &#38;
</PRE>

If you have problems starting the server, see  「<A HREF="manual.ja_Installing.html#Starting_server">4.15.2  <STRONG>MySQL</STRONG> サーバー起動時の問題</A>」節.

<LI>

<CODE>mysqladmin</CODE> でサーバーが走っているか確認します。
サーバーが立ち上がり接続を受け付けるか確認する簡単な方法を以下に示します：


<PRE>
shell&#62; BINDIR/mysqladmin version
shell&#62; BINDIR/mysqladmin variables
</PRE>

例えば、<CODE>mysqladmin version</CODE> の出力はあなたのプラットフォームと
 <STRONG>MySQL</STRONG> のバージョンを出力します。
出力は以下の様にでます：


<PRE>
shell&#62; BINDIR/mysqladmin version
mysqladmin  Ver 6.3 Distrib 3.22.9-beta, for pc-linux-gnu on i686
TCX Datakonsult AB, by Monty

Server version          3.22.9-beta
Protocol version        10
Connection              Localhost via UNIX socket
TCP port                3306
UNIX socket             /tmp/mysql.sock
Uptime:                 16 sec

Running threads: 1  Questions: 20  Reloads: 2  Open tables: 3
</PRE>

<CODE>BINDIR/mysqladmin</CODE> の使用方法は、<CODE>--help</CODE> オプションで起動することにより得られます。

<LI>

サーバーをシャットダウンするには：


<PRE>
shell&#62; BINDIR/mysqladmin -u root shutdown
</PRE>

<LI>

サーバーをリスタートするには、<CODE>safe_mysqld</CODE> か <CODE>mysqld</CODE> を直接実行します。
例えば：


<PRE>
shell&#62; BINDIR/safe_mysqld --log &#38;
</PRE>

<CODE>safe_mysqld</CODE> が失敗するなら、 <STRONG>MySQL</STRONG> のインストールディレクトリーから実行してみてください。
もしそれでも起動しないなら、 「<A HREF="manual.ja_Installing.html#Starting_server">4.15.2  <STRONG>MySQL</STRONG> サーバー起動時の問題</A>」節 を参照のこと。

<LI>

いくつかの簡単なテストでサーバーが動いているか確認できます。
以下のようになります：


<PRE>
shell&#62; BINDIR/mysqlshow
+-----------+
| Databases |
+-----------+
| mysql     |
+-----------+

shell&#62; BINDIR/mysqlshow mysql
Database: mysql
+--------------+
|    Tables    |
+--------------+
| columns_priv |
| db           |
| func         |
| host         |
| tables_priv  |
| user         |
+--------------+

shell&#62; BINDIR/mysql -e "select host,db,user from db" mysql
+------+--------+------+
| host | db     | user |
+------+--------+------+
| %    | test   |      |
| %    | test_% |      |
+------+--------+------+
</PRE>

他のプラットフォームで <STRONG>MySQL</STRONG> のパフォーマンスを比較するために
 <TT>`sql-bench'</TT> にベンチマークがあります。
<TT>`sql-bench/Results'</TT> ディレクトリには、他のデータベースやプラットフォームで
ベンチを実行した結果があります。
全てのテストを実行するには、以下のようにします：


<PRE>
shell&#62; cd sql-bench
shell&#62; run-all-tests
</PRE>

RPM バイナリ配布には <TT>`sql-bench'</TT> ディレクトリがありません。
(RPM のソース配布には含まれます)
この場合、ベンチマークをインストールしなくてはなりません。
<STRONG>MySQL</STRONG> 3.22 のバイナリ配布から、
<TT>`mysql-bench-VERSION-i386.rpm'</TT> という名前で RPM パッケージを作っており、
これにはベンチマークのデータとコードが含まれます。

<TT>`tests'</TT> サブディレクトリでテストすることも可能です。
例えば、<TT>`auto_increment.tst'</TT> の実行は以下のようにします：


<PRE>
shell&#62; BINDIR/mysql -vvf test &#60; ./tests/auto_increment.tst
</PRE>

これの結果は <TT>`./tests/auto_increment.res'</TT> ファイルに書き出されます。
</OL>



<H3><A NAME="mysql_install_db" HREF="manual.ja_toc.html#mysql_install_db">4.15.1  <CODE>mysql_install_db</CODE> 実行時の問題</A></H3>

<P>
この節では <CODE>mysql_install_db</CODE> を実行した際にでくわすかもしれない問題について述べます：

</P>
<DL COMPACT>

<DT><STRONG><CODE>mysql_install_db</CODE> doesn't install the privilege tables</STRONG>
<DD>
これは <CODE>mysql_install_db</CODE> が特権テーブルをインストールできなかった事のメッセージですが、
続いて以下のようにメッセージが出た場合：


<PRE>
starting mysqld daemon with databases from XXXXXX
mysql daemon ended
</PRE>

この場合、注意深く log ファイルを調べてください！
エラーメッセージに出ている <TT>`XXXXXX'</TT> ディレクトリにログファイルがあり、
これに <CODE>mysqld</CODE> がなぜスタートしなかったか記されているはずです。
もし何が起こったかわからない場合、このログファイルを含んで <CODE>mysqlbug</CODE> を使用して
バグレポートを投稿してください！
 「<A HREF="manual.ja_Questions.html#Bug_reports">2.3  バグや問題を報告する方法</A>」節参照.

<DT><STRONG>There is already a <CODE>mysqld</CODE> daemon running</STRONG>
<DD>
この場合、 <CODE>mysql_install_db</CODE> を実行する必要はありません。
<CODE>mysql_install_db</CODE> を実行するのは <STRONG>MySQL</STRONG> を初めてインストールした後、
たった一回だけです。

<DT><STRONG>Installing a second <CODE>mysqld</CODE> daemon doesn't work when one daemon is running</STRONG>
<DD>
これはすでに <STRONG>MySQL</STRONG> がインストールされており、
しかし新しいインストールを違うところに行おうとした場合に発生します。
(例えば、一度に二つのインストールを実行した場合など)
一般にこの問題は二つ目のサーバーを動いているサーバーと同じポート、ソケットを使用して起動しようとした場合に発生します。
この場合、<CODE>Can't start server: Bind on TCP/IP port: Address already in use</CODE> エラーメッセージか
<CODE>Can't start server : Bind on unix socket...</CODE> エラーメッセージが出ます。
新しいサーバーは以下のようにして違うポート、ソケットで起動できます：

<A NAME="IDX91"></A>
<A NAME="IDX92"></A>
<A NAME="IDX93"></A>
<A NAME="IDX94"></A>

<PRE>
shell&#62; MYSQL_UNIX_PORT=/tmp/mysqld-new.sock
shell&#62; MYSQL_TCP_PORT=3307
shell&#62; export MYSQL_UNIX_PORT MYSQL_TCP_PORT
shell&#62; scripts/mysql_install_db
shell&#62; bin/safe_mysqld &#38;
</PRE>

この後、二つのデーモンを違うポート、ソケットで実行するように、起動スクリプトを変更します。
例えば、<CODE>safe_mysqld</CODE>  を二つ書きますが、<CODE>--socket</CODE>, <CODE>--port</CODE> と <CODE>--basedir</CODE>
 オプションをそれぞれの <CODE>safe_mysqld</CODE> に指定します。

<DT><STRONG><TT>`/tmp'</TT> に書き込み許可をあなたが持っていないなら</STRONG>
<DD>
もしソケットファイルを標準の場所(<TT>`/tmp'</TT>)に作成するための書き込み許可がないなら、
あるいは、一時ファイルを <TT>`/tmp'</TT> に作成できないなら、
<CODE>mysql_install_db</CODE> の実行時、あるいは <CODE>mysqld</CODE> の起動／使用時に
エラーとなるでしょう。

違うディレクトリーにソケットファイルや一時ファイルを指定するには：

<A NAME="IDX95"></A>
<A NAME="IDX96"></A>
<A NAME="IDX97"></A>
<A NAME="IDX98"></A>

<PRE>
shell&#62; TMPDIR=/some_tmp_dir/
shell&#62; MYSQL_UNIX_PORT=/some_tmp_dir/mysqld.sock
shell&#62; export TMPDIR MYSQL_UNIX_PORT
</PRE>

<TT>`some_tmp_dir'</TT> は書き込みが可能なディレクトリーを指定しなくてはなりません。

この後、<CODE>mysql_install_db</CODE> を走らせ、サーバーを起動する事ができます：


<PRE>
shell&#62; scripts/mysql_install_db
shell&#62; BINDIR/safe_mysqld &#38;
</PRE>

<DT><STRONG><CODE>mysqld</CODE> crashes at once</STRONG>
<DD>
もし RedHat 5.0 上で 2.0.7-5 より古い <CODE>glibc</CODE> を使用している場合、
全ての <CODE>glibc</CODE> パッチを当てなくてはなりません！
これに関しては <STRONG>MySQL</STRONG> メールのアーカイブに情報が多くあります。
メーリングリストのアーカイブのリンクは
<a HREF="http://www.mysql.com/doc.html"> <STRONG>MySQL</STRONG> documentation page</a>.
see  「<A HREF="manual.ja_Installing.html#Linux">4.11.5  Linux notes (all Linux versions)</A>」節.

<CODE>mysqld</CODE> を <CODE>--skip-grant</CODE> 指定で起動することもできます。
そして以下のように <CODE>mysql</CODE> を使用して自分自身の手により許可を加えます：


<PRE>
shell&#62; BINDIR/safe_mysqld --skip-grant &#38;
shell&#62; BINDIR/mysql -u root mysql
</PRE>

<CODE>mysql</CODE> から手動で <CODE>mysql_install_db</CODE> に書かれている SQL コマンドを実行します。
許可テーブルをサーバーに読み込ますためには、 <CODE>mysqladmin reload</CODE> を実行します。
</DL>



<H3><A NAME="Starting_server" HREF="manual.ja_toc.html#Starting_server">4.15.2  <STRONG>MySQL</STRONG> サーバー起動時の問題</A></H3>

<P>
通常 <CODE>mysqld</CODE> サーバーの起動は、以下の三つの方法のうち一つで行います：

</P>

<UL>
<LI>

<CODE>mysql.server</CODE> による起動。このスクリプトはシステムの起動時、停止時に使われます。
詳細は  「<A HREF="manual.ja_Installing.html#Automatic_start">4.15.3  <STRONG>MySQL</STRONG> の自動起動と自動停止</A>」節
<LI>

<CODE>safe_mysqld</CODE> による起動。これは <CODE>mysqld</CODE> への適切なオプションを決定し、
それらのオプションでサーバーの起動を試みます。
<LI>

<CODE>mysqld</CODE> を直接起動。
</UL>

<P>
どの方法でサーバーを起動しても、もし起動に失敗すれば、ログファイルを確認してください。
なぜ失敗したか記録されています。ログファイルはデータベースディレクトリにあります。
(バイナリ配布の場合 <TT>`/usr/local/mysql/data'</TT> 、ソース配布の場合 <TT>`/usr/local/var'</TT> )
データベースディレクトリに <TT>`host_name.log'</TT> というファイル (<CODE>host_name</CODE> はあなたのサーバー名)
を探してください。
以下のようにしてそのファイルの最後の数行を確認します：

</P>

<PRE>
shell&#62; tail host_name.err
shell&#62; tail host_name.log
</PRE>

<P>
<CODE>mysqld</CODE> デーモンの起動時に、デーモンはデータディレクトリにディレクトリを変えます。
ログファイルと pid (process ID) ファイルがこのディレクトリに書ける事、
そしてデータベースがこのディレクトリにある事を、デーモンは要求します。

</P>
<P>
データディレクトリの場所は配布物のコンパイル時に指定されています。
<CODE>mysqld</CODE> があなたのシステム上にデータベースディレクトリを見つけれなかった場合、
サーバーは動きません。
 <CODE>mysqld</CODE> を <CODE>--help</CODE> オプションで起動すれば <CODE>mysqld</CODE> の
デフォルトのパスを知ることができますので、
サーバーが起動しない理由が違うパスを使用しているために起こっているかどうかがわかります。
パスが違う場合、<CODE>mysqld</CODE> のコマンドラインの引数に正しいパスを指定して、デフォルト値を
上書きすることが可能です。(これらオプションは <CODE>safe_mysqld</CODE> にも同様に使用できます)

</P>
<P>
通常、<STRONG>MySQL</STRONG> がインストールされたディレクトリのベースディレクトリだけを
 <CODE>mysqld</CODE> に教えればいいはずです。
これは <CODE>--basedir</CODE> オプションを指定します。
 <CODE>--help</CODE> オプションを使用すればパスの変更が確認できます。
(<CODE>--help</CODE> は<EM>必ず</EM> 最後に指定のこと)
　例えば：

</P>

<PRE>
shell&#62; EXECDIR/mysqld --basedir=/usr/local --help
</PRE>

<P>
パスの設定が思い通りに言ったことを確認したら、 <CODE>--help</CODE> オプションを外してサーバーを起動します。

</P>
<P>
以下のエラーの場合、他のプログラム（か他の <CODE>mysqld</CODE> サーバー）が
<CODE>mysqld</CODE> が使用しようとしている TCP/IP ソケットを使っています：

</P>

<PRE>
Can't start server: Bind on TCP/IP port: Address already in use
  or
Can't start server : Bind on unix socket...
</PRE>

<P>
他の <CODE>mysqld</CODE> サーバーが走っていないかを <CODE>ps</CODE> で確認します。
もし他のサーバーが起動していないなら、 <CODE>telnet your-host-name tcp-ip-port-number</CODE> 
コマンドを実行し、何回か <CODE>RETURN</CODE> キーをたたいてみてください。
もし、 <CODE>telnet: Unable to connect to remote host: Connection refused</CODE> のような
エラーが出た場合、なにかが <CODE>mysqld</CODE> が使用しようとしているポートを既に使っています。
 「<A HREF="manual.ja_Installing.html#mysql_install_db">4.15.1  <CODE>mysql_install_db</CODE> 実行時の問題</A>」節参照, and  「<A HREF="manual.ja_Common_problems.html#Multiple_servers">19.3  同一マシン上に複数の <STRONG>MySQL</STRONG> サーバーを走らせる</A>」節.

</P>
<P>
<CODE>safe_mysqld</CODE> スクリプトは、ソース配布からでもバイナリ配布の <STRONG>MySQL</STRONG> からでも、
たとえ違う場所にインストールされていても、サーバーを起動できるように作られています。
 <CODE>safe_mysqld</CODE> は以下のどれか一つが真であることを期待します：
locations.  <CODE>safe_mysqld</CODE> expects one of these conditions to be true:

</P>

<UL>
<LI>

 <CODE>safe_mysqld</CODE> が起動されたカレントディレクトリからの相対パスに、
サーバーとデータベースがある場合。
 <CODE>safe_mysqld</CODE> は <TT>`./bin'</TT>, <TT>`./data'</TT> ディレクトリ(バイナリ配布物の場合)、
あるいは <TT>`./libexec'</TT>, <TT>`./var'</TT> ディレクトリ(ソース配布物の場合)を探します。
あなたが <STRONG>MySQL</STRONG> をインストールしたディレクトリ(例えば <TT>`/usr/local/mysql'</TT> ディレクトリ)
から <CODE>safe_mysqld</CODE> を実行した場合、この条件に適合します。

<LI>

サーバーとデータベースが相対パス以下にない場合、<CODE>safe_mysqld</CODE> は絶対パスでそれらを探します。
典型的なディレクトリは <TT>`/usr/local/libexec'</TT> と <TT>`/usr/local/var'</TT> です。
実際のディレクトリは <CODE>safe_mysqld</CODE> がある配布物が作成されるときに決められます。
これらは <STRONG>MySQL</STRONG> がインストールされた標準のパスに正しく配置されていなければなりません。
</UL>

<P>
<CODE>safe_mysqld</CODE> はサーバーとデータベースを自分が起動されたディレクトリからの相対パスで探します。
よって、 <CODE>safe_mysqld</CODE> を <STRONG>MySQL</STRONG> のインストールディレクトリから起動する限りは、
 <STRONG>MySQL</STRONG> バイナリ配布物を自分の好きなところにインストールできます。
その場合の起動は：

</P>

<PRE>
shell&#62; cd mysql_installation_directory
shell&#62; bin/safe_mysqld &#38;
</PRE>

<P>
もし <CODE>safe_mysqld</CODE> が <STRONG>MySQL</STRONG> インストールディレクトリから起動しても失敗するなら、
<CODE>safe_mysqld</CODE> をあなたのシステム用に <CODE>mysqld</CODE> のパスやパス名のオプションを
書き換えてもかまいません。
この場合、 <STRONG>MySQL</STRONG> をアップグレードした場合、あなたが変更した
 <CODE>safe_mysqld</CODE> は上書きされるので、変更したものはインストール前にコピーしておき、
再び戻さなくてはなりません。

</P>
<P>
もし <CODE>mysqld</CODE> がすでに走っている場合、以下のコマンドにてパスの設定を知ることができます：

</P>

<PRE>
shell&#62; mysqladmin variables

or

shell&#62; mysqladmin -h 'your-host-name' variables
</PRE>

<P>
もし <CODE>safe_mysqld</CODE> がサーバーを起動しても接続できないようなら、
 <TT>`/etc/hosts'</TT> ファイルに以下のような記述を持たせてください：

</P>

<PRE>
127.0.0.1       localhost
</PRE>

<P>
この問題はスレッドライブラリーがなくて <STRONG>MySQL</STRONG> を MIT-pthreads を
使用するようにして作ったシステムにだけ起こります。

</P>



<H3><A NAME="Automatic_start" HREF="manual.ja_toc.html#Automatic_start">4.15.3  <STRONG>MySQL</STRONG> の自動起動と自動停止</A></H3>

<P>
<CODE>mysql.server</CODE> スクリプトは <CODE>start</CODE>, <CODE>stop</CODE> 引数を指定することにより
サーバーを起動、停止できます：

</P>

<PRE>
shell&#62; mysql.server start
shell&#62; mysql.server stop
</PRE>

<P>
<CODE>mysql.server</CODE> は <STRONG>MySQL</STRONG> インストールディレクトリの <TT>`share/mysql'</TT> ディレクトリ、
または <STRONG>MySQL</STRONG> ソースツリーの <TT>`support-files'</TT> ディレクトリにあります。

</P>
<P>
<CODE>mysql.server</CODE> はサーバーを起動時する前に <STRONG>MySQL</STRONG> がインストールされた
ディレクトリにディレクトリを変え、<CODE>safe_mysqld</CODE> を起動します。
もし標準以外にインストールしているバイナリ配布を使用しているなら、 
<CODE>mysql.server</CODE> を編集する必要があるかもしれません。
<CODE>safe_mysqld</CODE> を起動する前に正しいディレクトリに <CODE>cd</CODE> するように変更します。
<CODE>safe_mysqld</CODE> に他のオプションを与えるように <CODE>mysql.server</CODE> を変えても構いません。
他のユーザーで実行したい場合、<CODE>mysql_daemon_user=root</CODE> を変更しても構いません。
<CODE>safe_mysqld</CODE> に他のオプションを与えるために、
<CODE>mysql.server</CODE> を変更しても構いません。

</P>
<P>
<CODE>mysql.server stop</CODE> はサーバーにシグナルを送ってサーバーを停止します。
<CODE>mysqladmin shutdown</CODE> で手動でサーバーを落とすこともできます。

</P>
<P>
<STRONG>MySQL</STRONG> を使用している製品のために、これらスタート、ストップを
 <TT>`/etc/rc*'</TT> に書きたいと思われるかもしれません。
ここでの注意点は、変更した <CODE>mysql.server</CODE> は、
 <STRONG>MySQL</STRONG> をアップグレードしたときに上書きされるということです。
よって、変更したものはインストール前にコピーを取っておくべきです。

</P>
<P>
もしあなたのシステムが <TT>`/etc/rc.local'</TT> を起動スクリプトとして使用しているなら、
以下のようにその中に記述します：

</P>

<PRE>
/bin/sh -c 'cd /usr/local/mysql ; ./bin/safe_mysqld &#38;'
</PRE>

<P>
グローバル設定ファイルである <TT>`/etc/my.cnf'</TT> に、 <CODE>mysql.server</CODE> の
オプションを記述することも可能です。<TT>`/etc/my.cnf'</TT> ファイルは以下のような
記述になっています：

</P>

<PRE>
[mysqld]
datadir=/usr/local/mysql/var
socket=/tmp/mysqld.sock
port=3306

[mysql.server]
user=mysql
basedir=/usr/local/mysql
</PRE>

<P>
<CODE>mysql.server</CODE> スクリプトは以下の変数を使用します：
<CODE>user</CODE>, <CODE>datadir</CODE>, <CODE>basedir</CODE>, <CODE>bindir</CODE> そして <CODE>pid-file</CODE>.

</P>
<P>
 「<A HREF="manual.ja_Installing.html#Option_files">4.15.4  オプションファイル ( <CODE>my.cnf</CODE> )</A>」節参照.

</P>
<P>
<A NAME="IDX99"></A>
<A NAME="IDX100"></A>


<H3><A NAME="Option_files" HREF="manual.ja_toc.html#Option_files">4.15.4  オプションファイル ( <CODE>my.cnf</CODE> )</A></H3>

<P>
<STRONG>MySQL</STRONG> 3.22 のサーバー、クライアントともに、オプションファイルからデフォルトの起動オプションを読み込むことができます。

</P>
<P>
UNIX では <STRONG>MySQL</STRONG> は以下のファイルからデフォルトオプションを読みます：

</P>
<P>
<A NAME="IDX101"></A>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Filename</STRONG> </TD><TD> <STRONG>Purpose</STRONG>
</TR NOSAVE>
<TR><TD><CODE>/etc/my.cnf</CODE> </TD><TD> Global options
</TR NOSAVE>
<TR><TD><CODE>DATADIR/my.cnf</CODE> </TD><TD> Server-specific options
</TR NOSAVE>
<TR><TD><CODE>~/.my.cnf</CODE> </TD><TD> User-specific options
</TR>
</TABLE>

</P>
<P>
<CODE>DATADIR</CODE> は <STRONG>MySQL</STRONG> データディレクトリです (普通
<TT>`/usr/local/mysql/data'</TT> or <TT>`/usr/local/var'</TT>).
このディレクトリはconfigure時に決定されており、 <CODE>--datadir</CODE> を <CODE>mysqld</CODE> 起動時に指定しても変更されません。
(サーバーはコマンドラインの引数を処理する前にオプションファイルを探します。
よって、<CODE>--datadir</CODE> 引数を指定してもオプションファイルを探す場所を指定することにはなりません。)

</P>
<P>
Win32 では <STRONG>MySQL</STRONG> は以下のファイルからデフォルトオプションを読みます：

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Filename</STRONG> </TD><TD> <STRONG>Purpose</STRONG>
</TR NOSAVE>
<TR><TD><CODE>windows-system-directory\my.ini</CODE>
</TR NOSAVE>
<TR><TD><CODE>C:\my.cnf</CODE> </TD><TD> Global options
</TR NOSAVE>
<TR><TD><CODE>C:\mysql\data\my.cnf</CODE> </TD><TD> Server-specific options
</TR>
</TABLE>

<P>
Note that you on Win32 should specify all paths with <CODE>/</CODE> instead of
<CODE>\</CODE>. If you use <CODE>\</CODE>, you need to specify this twice, as
<CODE>\</CODE> is the escape character in <STRONG>MySQL</STRONG>.

</P>
<P>
<A NAME="IDX102"></A>
<STRONG>MySQL</STRONG> は上記の表にかかれている順にオプションファイルを読みます。
もし複数オプションファイルがあった場合、後から読まれた設定が有効になります。
全てのオプションはコマンドラインの引数に上書きされます。
いくつかのオプションは環境変数に定義できます。
オプションファイルとコマンドラインの引数は環境変数を上書きします。

</P>
<P>
以下のプログラムはオプションファイルをサポートします：<CODE>mysql</CODE>,
<CODE>mysqladmin</CODE>, <CODE>mysqld</CODE>, <CODE>mysqldump</CODE>, <CODE>mysqlimport</CODE>,
<CODE>myisamchk</CODE> and <CODE>myisampack</CODE>.

</P>
<P>
オプションファイルには、プログラムがサポートしているコマンドラインの long オプション(例えば、<CODE>-u</CODE> ではなくて <CODE>--user</CODE> の方)を書くことができます。
プログラムを <CODE>--help</CODE> で起動すれば、設定可能な変数名が得られます。

</P>
<P>
オプションファイルの書式は以下です：

</P>
<DL COMPACT>

<DT><CODE>#comment</CODE>
<DD>
コメントは <SAMP>`#'</SAMP> か <SAMP>`;'</SAMP> 文字で始めます。空の行は無視します。

<DT><CODE>[group]</CODE>
<DD>
グループ宣言。
<CODE>group</CODE> はオプションを定義するプログラムかグループの名前です。
この宣言の後、<CODE>オプション</CODE> か <CODE>set-variable</CODE> 行で、このグループにオプションを与えます。
このセクションの範囲は、他のグループ宣言の行が来るか、ファイルの最後に来るまでです。

<DT><CODE>option</CODE>
<DD>
これはコマンドラインの <CODE>--option</CODE> と等価です。

<DT><CODE>option=value</CODE>
<DD>
これはコマンドラインの <CODE>--option=value</CODE> と等価です。

<DT><CODE>set-variable = variable=value</CODE>
<DD>
これはコマンドラインの <CODE>--set-variable variable=value</CODE> と等価です。
これは <CODE>mysqld</CODE> 変数で使用される形式です。
</DL>

<P>
<CODE>client</CODE> グループは、全ての <STRONG>MySQL</STRONG> クライアント(<CODE>mysqld</CODE>は除)に対してオプションを定義します。
これはサーバーに接続する際に使用するパスワードを指定できるグループです。
(この場合、オプションファイルは自分だけが読み書きできるようにしてください)

</P>
<P>
オプションや値の善後にある全てのブランク文字は自動で取り除かれます。
値として、<SAMP>`\b'</SAMP>,<SAMP>`\t'</SAMP>, <SAMP>`\n'</SAMP>, <SAMP>`\r'</SAMP>, <SAMP>`\\'</SAMP> and <SAMP>`\s'</SAMP>
 のエスケープシーケンスが使用できます。
(<SAMP>`\s'</SAMP> == blank).

</P>
<P>
オプションファイル例：

</P>

<PRE>
[client]
port=3306
socket=/tmp/mysql.sock

[mysqld]
port=3306
socket=/tmp/mysql.sock
set-variable = key_buffer=16M
set-variable = max_allowed_packet=1M

[mysqldump]
quick
</PRE>

<P>
ユーザーオプションファイル例：

</P>

<PRE>
[client]
# The following password will be sent to all standard MySQL clients
password=my_password

[mysql]
no-auto-rehash
</PRE>

<P>
<A NAME="IDX103"></A>
もしソース配布を持っているなら、 <TT>`my-example.cnf'</TT> という名前のサンプルファイルを <TT>`support-files'</TT> ディレクトリに見ることができます。
もしバイナリ配布を使用しているなら、 <TT>`DIR/share/mysql'</TT> ディレクトリを探してください
(ここで <CODE>DIR</CODE> は <STRONG>MySQL</STRONG> がインストールされたディレクトリのパス名で、普通は <TT>`/usr/local/mysql'</TT>)。
この <TT>`my-example.cnf'</TT> ファイルを自分のディレクトリに <TT>`.my.cnf'</TT> という名前でコピーして使用できます。

</P>
<P>
<STRONG>MySQL</STRONG> プログラムにオプションファイルを読ませないようにするには、
コマンドラインの一番最初に <CODE>--no-defaults</CODE> を書きます。
これはオプションの最初でないと有効になりません！
どのオプションが定義されているか確かめるには、<CODE>--print-defaults</CODE> を最初のオプションに指定します。

</P>
<P>
If you want to force the use of a specific config file, you can use the option
<CODE>--defaults-file=full-path-to-default-file</CODE>. If you do this, only the
specified file will be read.

</P>
<P>
開発者向け情報：　オプションファイルの操作は全てのオプションをコマンドラインの引数より先に処理するように簡単に埋め込まれています。
これはオプションを最後に処理するプログラムを複数立ちあげる場合に都合よく動きます。
もしオプションファイルを読み込む機能のない古いプログラムを使用しているなら、
たった二行だけ注意して書けばいいだけです。
この動作については <STRONG>MySQL</STRONG> クライアントプログラムのコードを参考にしてください。

</P>



<H2><A NAME="Upgrade" HREF="manual.ja_toc.html#Upgrade">4.16  <STRONG>MySQL</STRONG> のアップグレード/ダウングレード時に特別に行なうことが何かあるか？</A></H2>

<P>
<STRONG>MySQL</STRONG> 形式とデータファイルは、<STRONG>MySQL</STRONG> が同じベースバージョ
ンである限り、同じアーキテクチャ上の異なるバージョン間でいつでも移動でき
ます。現在のベースバージョンは 3 です。<STRONG>MySQL</STRONG> のリコンパイルによっ
て文字セットが変更された場合(これはソート順も変更します)、全てのテーブル
に <CODE>myisamchk -r -q</CODE> を行なう必要があります。そうしなければ、インデッ
クスが正しい順になりません。

</P>
<P>
もしあなたが神経質だったり新しいバージョンを恐れている場合、いつでもあな
たの古い <CODE>mysqld</CODE> を <CODE>mysqld</CODE>-'old-version-number' のような何
かにリネームできます。もし新しい <CODE>mysqld</CODE> が予期せぬ何かを行った場
合、単純にそれをシャットダウンし、古い <CODE>mysqld</CODE> を再起動することが
できます！

</P>
<P>
アップグレード時には、もちろん、古いデータベースをバックアップもしておく
べきです。時々は少し神経質になるのは良いことです！

</P>
<P>
アップグレード後、再コンパイルされたクライアントプログラムで、
<CODE>Commands out sync</CODE> や予期せぬコアダンプのような問題が起きる場合、
おそらく、プログラムのコンパイル時に古いヘッダやライブラリファイルを使用
したのでしょう。この場合、<TT>`mysql.h'</TT> ファイルと <TT>`libmysql.a'</TT> ラ
イブラリが、新しい <STRONG>MySQL</STRONG> 配布からのものであるかどうかを確かめる
ために、日付をチェックすべきです。もし違っていれば、プログラムを再コンパ
イルしてください！

</P>
<P>
もし新しい <CODE>mysqld</CODE> サーバーが起動できないとか、パスワード無しで
接続できないとか、いくつかの問題が発生した場合、以前のインストールでできた
古い <TT>`my.cnf'</TT> ファイルがあるかどうかを確認してください！
<CODE>program-name --print-defaults</CODE> で確認できます.  もしこの出力が
プログラムの名称以外の物を返した場合、有効になっている <CODE>my.cnf</CODE> ファイルが
あります！

</P>
<P>
新しいリリースの <STRONG>MySQL</STRONG> をインストールした場合に常に
 <CODE>Msql-Mysql-modules</CODE> を再構築、再インストールすることは
いい考えです。すべての <CODE>DBI</CODE> スクリプトが <STRONG>MySQL</STRONG> の
アップグレード後にコアダンプする兆候に気づいた場合は、特に
そうしてください。

</P>

<P>
<A NAME="IDX104"></A>


<H3><A NAME="Upgrading-from-3.22" HREF="manual.ja_toc.html#Upgrading-from-3.22">4.16.1  3.22 から 3.23 バージョンへのアップグレード</A></H3>

<P>
<STRONG>MySQL</STRONG> 3.23 は新しい <CODE>MyISAM</CODE> 型のテーブルと、古い <CODE>ISAM</CODE> 型の
テーブルをサポートします。
3.23 を使用する際、古いテーブル(ISAM) を変換する必要はありません。
デフォルトでは、新しく作られるテーブルが <CODE>MyISAM</CODE> 型になります。
(これは <CODE>mysqld</CODE> を <CODE>--default-table-type=isam</CODE> オプションで
起動することにより、変更できます)。
 <CODE>ISAM</CODE> テーブルを <CODE>MyISAM</CODE> に変更するには、
 <CODE>ALTER TABLE</CODE> を使用するか、<CODE>mysql_convert_table_format</CODE> 
perl スクリプトを使用します。

</P>
<P>
3.22 と 3.21 のクライアントは問題なく 3.23 サーバーで動作します。

</P>
<P>
以下に、3.23 にアップグレードするときに、注目する必要があるものを列挙します：

</P>

<UL>
<LI><CODE>INNER</CODE> と <CODE>DELAYED</CODE> は、予約語になりました。

<LI><CODE>FLOAT(X)</CODE> は本当の floating point 型になりました。

<LI>When declaring <CODE>DECIMAL(length,dec)</CODE> the length argument no

longer includes a place for the sign or the decimal point.
<LI><CODE>TIME</CODE> 文字列は以下のフォーマットのいずれかでなければなりません：

<CODE>[[[DAYS] [H]H:]MM:]SS[.fraction]</CODE> か
<CODE>[[[[[H]H]H]H]MM]SS[.fraction]</CODE>
<LI><CODE>LIKE</CODE> は、同一文字の比較 <CODE>'='</CODE> ルールを使用して、

比較を行うようになりました。
もし古い比較方法にするならば、 <STRONG>MySQL</STRONG> を <CODE>CXXFLAGS=-DLIKE_CMP_TOUPPER</CODE>
 フラグでコンパイルします。
<LI><CODE>REGEXP</CODE> は、通常の文字列(非 binary) では、ケース非依存になりました。

<LI><CODE>MyISAM</CODE> テーブル(<CODE>.MYI</CODE>) の検査・修復には、<CODE>myisamchk</CODE> を使用します。

<CODE>isamchk</CODE> は ISAM(<CODE>.ISM</CODE>) テーブル用に使用します。.
<LI>もし、3.22 と 3.23 の間で互換性を持たせて  <CODE>mysqldump</CODE> を行いたいならば、

 <CODE>--opt</CODE> や <CODE>--full</CODE> オプションを <CODE>mysqldump</CODE> に指定してはいけません。
<LI>全ての <CODE>DATE_FORMAT()</CODE> をチェックしてください。

フォーマット文字列には <SAMP>`%'</SAMP> 文字が必要になりました。
<LI>

<CODE>mysql_fetch_fields_direct</CODE> が関数になり (今まではマクロだったのが)、
<CODE>MYSQL_FIELD</CODE> 型ではなく <CODE>MYSQL_FIELD</CODE> ポインター型を返します。
<LI>

<CODE>mysql_num_fields()</CODE> は、 <CODE>MYSQL*</CODE> object をもはや使うことができません。
(これは今、 <CODE>MYSQL_RES*</CODE> を引数に取る関数になりました)。
代わりに、 <CODE>mysql_field_count()</CODE> を使用すべきです。
<LI>

<CODE>MySQL</CODE> 3.22 では, <CODE>SELECT DISTINCT ...</CODE> の出力は
ほとんどいつもソートされました。 3.23 では, ソートを行った結果を得るには
<CODE>GROUP BY</CODE> か <CODE>ORDER BY</CODE> を使用しなくてはなりません。
<LI>

もし、一致するレコードが無かった場合、<CODE>SUM()</CODE> は 0 の代わりに <CODE>NULL</CODE> を返すようになりました。
これは ANSI SQL 準拠です。
<LI>

New restricted words: <CODE>CASE, THEN, WHEN, ELSE and END</CODE>
</UL>

<P>
<A NAME="IDX105"></A>


<H3><A NAME="Upgrading-from-3.21" HREF="manual.ja_toc.html#Upgrading-from-3.21">4.16.2  3.21 から 3.22 バージョンへのアップグレード</A></H3>

<P>
3.21 と 3.22 の間には互換性に影響する変更はありません。<CODE>DATE</CODE> 型を
伴って生成された新しいテーブルは、日付の格納に新しい方法を使用することだ
けが pitfall です。これらの新しいフィールドに古いバージョンの 
<CODE>mysqld</CODE> からアクセスすることはできません。

</P>
<P>
<CODE>MySQL 3.22</CODE> インストール後、新しいサーバを開始して、
<CODE>mysql_fix_privilege_tables</CODE> スクリプトを実行すべきです。これは
<CODE>GRANT</CODE> コマンドを使用するために必要な特権を追加します。これを忘れ
ると、<CODE>ALTER TABLE</CODE> や <CODE>CREATE/DROP INDEX</CODE> を使用しようとした
時に <CODE>Access denied</CODE> になります。<STRONG>MySQL</STRONG> root ユーザがパスワー
ドを要求する場合、<CODE>mysql_fix_privilege_tables</CODE> への引数としてそれを
与えてください。

</P>
<P>
C API インタフェース <CODE>mysql_real_connect()</CODE> は変更されました。この
関数を呼び出す古いクライアントプログラムを持っている場合は、新しい 
<CODE>db</CODE> 引数に <CODE>0</CODE> を置く(またはより速い接続のために <CODE>db</CODE> 要
素を送るようにクライアントをコーディングしなおす)必要があります。
<CODE>mysql_real_connect()</CODE> を呼び出す前に
<CODE>mysql_init()</CODE> を呼ばなくてはなりません！
この変更は、<CODE>MYSQL</CODE> の構造体にオプションを保存するための
新しい <CODE>mysql_options()</CODE> 関数を有効にします。

</P>



<H3><A NAME="Upgrading-from-3.20" HREF="manual.ja_toc.html#Upgrading-from-3.20">4.16.3  3.20 から 3.21 バージョンへのアップグレード</A></H3>

<P>
既に 3.20.28 より前のバージョンが稼働していて、3.21.x に変更したい場合は、
次を行なう必要があります:

</P>
<P>
<CODE>safe_mysqld --old-protocol</CODE> で <CODE>mysqld</CODE> 3.21 サーバを起動すれ
ば、3.20 配布からのクライアントでそれを使用できます。この場合、新しいク
ライアント関数 <CODE>mysql_errno()</CODE> はサーバのエラーは何も返さず、
<CODE>CR_UNKNOWN_ERROR</CODE> だけを返します (ただしクライアントのエラーについ
ては働きます)。そして サーバは古い password() チェックを新しいものの代わ
りに使用します。

</P>
<P>
<CODE>mysqld</CODE> に <CODE>--old-protocol</CODE> オプションを<EM>使わない</EM>場合、
次の変更をする必要があります:

</P>

<UL>
<LI>

全てのクライアントコードは再コンパイルする必要があります。ODBC を使用し
ている場合は新しい <STRONG>MyODBC</STRONG> 2.x ドライバを入手する必要があります。
<LI>

<CODE>mysql.user</CODE> テーブル内の <CODE>password</CODE> フィールドを 
<CODE>CHAR(16)</CODE> に変換するために、スクリプト 
<CODE>scripts/add_long_password</CODE> を実行する必要があります。
<LI>

全てのパスワードは <CODE>mysql.user</CODE> テーブル内に再配置する必要がありま
す(31ビットパスワードの代わりに、62ビットを得るために)。
<LI>

テーブル形式は変更されていないので、どのテーブルも変換する必要はありませ
ん。
</UL>

<P>
<STRONG>MySQL</STRONG> 3.20.28 とそれ以降は、クライアントに影響を及ぼさずに、新
しい <CODE>user</CODE> テーブル形式を処理することができます。3.20.28 より前の 
<STRONG>MySQL</STRONG> バージョンを持っている場合は、<CODE>user</CODE> テーブルを変換
すると、パスワードはその上ではもう働きません。安全のため、最初に少なくと
も 3.20.28 にアップグレードし、それから 3.21.x にアップグレードすべきで
す。

</P>
<P>
<A NAME="IDX106"></A>
新しいクライアントコードは 3.20.x <CODE>mysqld</CODE> サーバで動作するので、も
し 3.21.x で問題があった場合は、クライアントをもう一度再コンパイルする必
要はなく、古い 3.20.x サーバを使用することができます。

</P>
<P>
<CODE>mysqld</CODE> に <CODE>--old-protocol</CODE> オプションを使用しない場合、古い
クライアントはエラーメッセージを発します:

</P>

<PRE>
ERROR: Protocol mismatch. Server Version = 10 Client Version = 9
</PRE>

<P>
新しい Perl インタフェース <CODE>DBI</CODE>/<CODE>DBD</CODE> は古い <CODE>mysqlperl</CODE> 
インタフェースもサポートします。<CODE>mysqlperl</CODE> を使用する場合に行う必
要のある変更は、<CODE>connect()</CODE> 関数の引数の変更だけです。新しい引数は:
<CODE>host</CODE>, <CODE>database</CODE>, <CODE>user</CODE>, <CODE>password</CODE> (<CODE>user</CODE> 
と <CODE>password</CODE> 引数の順番が変更されました)。
 「<A HREF="manual.ja_Clients.html#Perl_DBI_Class">20.5.1.1  The <CODE>DBI</CODE> interface</A>」節参照.

</P>
<P>
次の変更は古いアプリケーションでのクエリに影響します:

</P>

<UL>
<LI>

<CODE>HAVING</CODE> は現在 <CODE>ORDER BY</CODE> 節より前になければいけません。
<LI>

<CODE>LOCATE()</CODE> へのパラメータは交換されました。
<LI>

新しい予約語がいくつかあります。最も注意すべきは <CODE>DATE</CODE>,
<CODE>TIME</CODE> そして <CODE>TIMESTAMP</CODE> です。
</UL>



<H3><A NAME="Upgrading-to-arch" HREF="manual.ja_toc.html#Upgrading-to-arch">4.16.4  他のアーキテクチャへのアップグレード</A></H3>

<P>
もし、<STRONG>MySQL</STRONG> 3.23 を使用しているならば、
違うアーキテクチャのマシンに、<CODE>.frm</CODE>, <CODE>.MYI</CODE>,<CODE>.MYD</CODE> ファイルを
コピーすることが出来ます。
ただし、両者間で、同じ浮動小数点のフォーマットをサポートしている場合に限ります。
(<STRONG>MySQL</STRONG> takes care of any byte swapping issues).

</P>
<P>
現在 <STRONG>MySQL</STRONG> データとインデックスファイル (<CODE>ISAM</CODE> <TT>`*.ISD'</TT> と 
<TT>`*.ISM'</TT> ファイル) はアーキテクチャ依存で、いくつかのケースでは OS 
依存です。アプリケーションを、現在のマシンとは異なるアーキテクチャ/OS を
持つ他のマシンに移したい場合は、単純にファイルを他のマシンにコピーするこ
とでデータベースを移行しようとすべきではありません。<CODE>mysqldump</CODE> を
使用すべきです。

</P>
<P>
デフォルトでは <CODE>mysqldump</CODE> は、完全な SQL ステートメントファイルを
生成します。それからそのファイルを他のマシンへ転送し、<CODE>mysql</CODE> クラ
イアントへの入力として与えることができます。

</P>
<P>
有効なオプションが何かを見るためには、<CODE>mysqldump --help</CODE> を試してく
ださい。データを <STRONG>MySQL</STRONG> のより新しいバージョンに移す場合、速くコ
ンパクトなダンプを得るために、より新しいバージョンで <CODE>mysqldump --opt</CODE> 
を使用すべきです。

</P>
<P>
２つのマシン間でデータベースを移動する最も簡単な (しかし最も速くはない) 
方法は、データベースが置かれているマシン上で次のコマンドを実行することで
す:

</P>

<PRE>
shell&#62; mysqladmin -h 'other hostname' create db_name
shell&#62; mysqldump --opt db_name \
        | mysql -h 'other hostname' db_name
</PRE>

<P>
遅いネットワーク上でリモートマシンからデータベースをコピーしたい場合は、
次を使用できます:

</P>

<PRE>
shell&#62; mysqladmin create db_name
shell&#62; mysqldump -h 'other hostname' --opt --compress db_name \
        | mysql db_name
</PRE>

<P>
ファイル内の結果を格納することもできます (この例では圧縮されています):

</P>

<PRE>
shell&#62; mysqldump --quick db_name | gzip &#62; db_name.contents.gz
</PRE>

<P>
データベースの中身を含んでいるファイルを、目的のマシンに転送して、次のコ
マンドを実行してください:

</P>

<PRE>
shell&#62; mysqladmin create db_name
shell&#62; gunzip &#60; db_name.contents.gz | mysql db_name
</PRE>

<P>
<A NAME="IDX107"></A>
<A NAME="IDX108"></A>
データベース転送を実行するために、<CODE>mysqldump</CODE> と <CODE>mysqlimport</CODE> 
も使用できます。大きなテーブルでは、これは単純な <CODE>mysqldump</CODE> の使用
よりもとても速いです。次に示すコマンドでは、<CODE>DUMPDIR</CODE> は
<CODE>mysqldump</CODE> からの出力を格納するために使用するディレクトリの完全な
パス名を表わしています。

</P>
<P>
まず、出力ファイルのためのディレクトリを作成して、データベースをダンプし
ます:

</P>

<PRE>
shell&#62; mkdir DUMPDIR
shell&#62; mysqldump --tab=DUMPDIR db_name
</PRE>

<P>
それから、<CODE>DUMPDIR</CODE> ディレクトリ内のファイルを目的のマシン上の対応
するディレクトリに転送し、<STRONG>MySQL</STRONG> にファイルをロードします:

</P>

<PRE>
shell&#62; mysqladmin create db_name           # create database
shell&#62; cat DUMPDIR/*.sql | mysql db_name   # create tables in database
shell&#62; mysqlimport db_name DUMPDIR/*.txt   # load data into tables
</PRE>

<P>
<CODE>mysql</CODE> データベースのコピーも忘れないでください。それは承認テーブ
ル (<CODE>user</CODE>, <CODE>db</CODE>, <CODE>host</CODE>) が格納されるためです。
<CODE>mysql</CODE> データベースをその場所に置くまで、新しいマシン上では 
<STRONG>MySQL</STRONG> <CODE>root</CODE> ユーザとしてコマンドを実行する必要があります。

</P>
<P>
新しいマシン上へ <CODE>mysql</CODE> データベースを導入した後、サーバが承認テー
ブル情報を再ロードするために、<CODE>mysqladmin flush-privileges</CODE> を実行してくださ
い。

</P>
<P>
<A NAME="IDX109"></A>
<P><HR><P>
Go to the <A HREF="manual.ja_Introduction.html">first</A>, <A HREF="manual.ja_Licensing_and_Support.html">previous</A>, <A HREF="manual.ja_Compatibility.html">next</A>, <A HREF="manual.ja_Concept_Index.html">last</A> section, <A HREF="manual.ja_toc.html">table of contents</A>.
 </BODY>
 </HTML>
