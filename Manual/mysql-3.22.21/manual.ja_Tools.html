<html><head>
  <!-- This HTML file has been created by texi2html 1.52 (hacked by david@detron.se)
     from manual.ja.texi on 1 December 1999 -->

  <title>MySQL Reference Manual for version 3.22.21. - 12  MySQL ユーティリティ</title>
  </head>
  <body bgcolor="#FFFFFF" text="#000000" link="#101090" vlink="#7030B0">
Go to the <a href="manual.ja_Introduction.html">first</a>, <a href="manual.ja_MySQL_Benchmarks.html">previous</a>, <a href="manual.ja_Maintenance.html">next</a>, <a href="manual.ja_Concept_Index.html">last</a> section, <a href="manual.ja_toc.html">table of contents</a>.
<p></p><hr><p>


</p><h1><a name="Tools" href="manual.ja_toc.html#Tools">12  <strong>MySQL</strong> ユーティリティ</a></h1>

<p>
<a name="IDX639"></a>


</p><h2><a name="Programs" href="manual.ja_toc.html#Programs">12.1  様々な <strong>MySQL</strong> プログラムの概要</a></h2>

<p>
サーバと通信する <code>mysqlclient</code> ライブラリを使用している全ての 
<strong>MySQL</strong> クライアントは次の環境変数を使用します:

</p>
<p>
<a name="IDX640"></a>
<a name="IDX641"></a>
<a name="IDX642"></a>
<a name="IDX643"></a>
<a name="IDX644"></a>
<a name="IDX645"></a>
<a name="IDX646"></a>
<a name="IDX647"></a>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>Name</strong> </td><td> <strong>Description</strong>
</td></tr>
<tr><td><code>MYSQL_UNIX_PORT</code> </td><td> デフォルトのソケット; <code>localhost</code> への接続に使用される
</td></tr>
<tr><td><code>MYSQL_TCP_PORT</code> </td><td> デフォルトの TCP/IP ポート
</td></tr>
<tr><td><code>MYSQL_PWD</code> </td><td> デフォルトのパスワード
</td></tr>
<tr><td><code>MYSQL_DEBUG</code> </td><td> デバッグオプション
</td></tr>
<tr><td><code>TMPDIR</code> </td><td> 一時 tables/files が作成されるディレクトリ
</td></tr>
</tbody></table>

</p>
<p>
<code>MYSQL_PWD</code> の使用は安全ではありません。
 「<a href="manual.ja_Privilege_system.html#Connecting">6.3  <strong>MySQL</strong> サーバーに接続</a>」節参照.

</p>
<p>
<a name="IDX648"></a>
<a name="IDX649"></a>
<a name="IDX650"></a>
<a name="IDX651"></a>
<a name="IDX652"></a>
<a name="IDX653"></a>
<a name="IDX654"></a>
<tt>`mysql'</tt> クライアントは、<code>MYSQL_HISTFILE</code> 環境変数に
指定されているファイルにコマンドラインの履歴を書き出します。
デフォルトの履歴ファイルは、 <tt>`$HOME/.mysql_history'</tt> で、<code>$HOME</code> は
 <code>HOME</code> 環境変数の値です。

</p>
<p>
全ての <strong>MySQL</strong> プログラムは多くの様々なオプションを持ちます。種々
のオプションの完全な説明を得るにはスイッチ <code>--help</code> を使用してください。例
えば<code>mysql --help</code> を試してください。

</p>
<p>
オプションファイルで、全ての標準クライアントのデフォルトのオプションを
変更することが可能です。
 「<a href="manual.ja_Installing.html#Option_files">4.15.4  オプションファイル ( <code>my.cnf</code> )</a>」節.

</p>
<p>
<strong>MySQL</strong> プログラムを以下に示します:

</p>
<dl compact="">

<dt><code>myisamchk</code>
</dt><dd>
<a name="IDX655"></a>
 
<strong>MySQL</strong> テーブルをチェック, 最適化そして修復します。
<code>myisamchk</code> には多くの機能があるので、一章割り当てて説明しています。
 「<a href="manual.ja_Maintenance.html#Maintenance">13  Maintaining a <strong>MySQL</strong> installation</a>」節参照.

<a name="IDX656"></a>
</dd><dt><code>make_binary_release</code>
</dt><dd>
コンパイルされた <strong>MySQL</strong> のバイナリリリースを作成します。これは他
の MySQL ユーザの利便のために、ftp で <code>ftp.tcx.se</code> の  <tt>`/pub/mysql/Incoming'</tt>
に送ることができます。

<a name="IDX657"></a>
</dd><dt><code>msql2mysql</code>
</dt><dd>
<code>mSQL</code> プログラムを <strong>MySQL</strong> に変換するシェルスクリプト。全て
のケースで処理できるわけではありませんが、変換時に良いスタートを与えます。

<a name="IDX658"></a>
<a name="IDX659"></a>
</dd><dt><code>mysql</code>
</dt><dd>
<code>mysql</code> は簡単な SQL シェル (GNU <code>readline</code> つき) です。これは対話的な使用や
非対話型問い合わせをサポートします。対話的に使用されると、ASCII テーブル
形式で結果が与えられます。フィルタとして使用されると、出力はタブで区切ら
れます（これは起動時のオプションで他のものに変更できます）。
あなたは以下のように簡単にスクリプトを実行できます:


<pre>shell&gt; mysql database &lt; script.sql &gt; output.tab
</pre>

クライアントのメモリが十分でないことによる問題がある場合は、
<code>--quick</code> スイッチを使用してください！ これは結果を取り出すのに 
 <code>mysql_store_result()</code> の代わりに <code>mysql_use_result()</code> を使用
するように <code>mysql</code> に強制させます。

<a name="IDX660"></a>
</dd><dt><code>mysqlaccess</code>
</dt><dd>
ホスト, ユーザそしてデータベースの組合せで特権をチェックするためのスクリ
プト。

<a name="IDX661"></a>
</dd><dt><code>mysqladmin</code>
</dt><dd>
管理ユーティリティ。データベースの作成/破棄。reload (新しいユーザの読み
込み) と refresh (ディスクへのテーブルのフラッシュ, ログファイルの再オー
プン)。サーバのバージョンと処理と状態情報も与えます。
 「<a href="manual.ja_Tools.html#mysqladmin">12.2  <strong>MySQL</strong> サーバーの管理　( <code>mysqladmin</code> )</a>」節参照.

<a name="IDX662"></a>
</dd><dt><code>mysqlbug</code>
</dt><dd>
<strong>MySQL</strong> バグレポートスクリプト。
このスクリプトは <strong>MySQL</strong> メーリングリストにバグレポートを出す際、
常に使用します。

<a name="IDX663"></a>
</dd><dt><code>mysqld</code>
</dt><dd>
SQL デーモン。これは常に実行されてます。

<a name="IDX664"></a>
</dd><dt><code>mysqldump</code>
</dt><dd>
<strong>MySQL</strong> データベースの SQL ステートメントまたはタブで区切られたテ
キストのファイルにダンプします。Igor Romanenko によって独創的にエンハン
スされたフリーウェア。
 「<a href="manual.ja_Tools.html#mysqldump">12.3  <strong>MySQL</strong> データベースとテーブルから、構造とデータをダンプ　( <code>mysqldump</code> )</a>」節参照.

<a name="IDX665"></a>
</dd><dt><code>mysqlimport</code>
</dt><dd>
一つまたは複数のテキストファイルをそれぞれのテーブルに読み込みます。<code>LOAD
DATA INFILE</code> でサポートされる全ての形式を使用できます。  「<a href="manual.ja_Tools.html#mysqlimport">12.4  テキストファイルからデータを取り込む　( <code>mysqlimport</code> )</a>」節参照.

<a name="IDX666"></a>
</dd><dt><code>mysqlshow</code>
</dt><dd>
データベース, テーブル, 項目そしてインデックスについての情報を表示します。

<a name="IDX667"></a>
</dd><dt><code>mysql_install_db</code>
</dt><dd>
<strong>MySQL</strong> 承認テーブルをデフォルト特権で作成します。これは通常、最
初の <strong>MySQL</strong> リリースを新しいシステム上にインストールする時に一回
だけ実行されます。

<a name="IDX668"></a>
</dd><dt><code>replace</code>
</dt><dd>
<code>msql2mysql</code> で使用されるバイナリ。ファイル内または標準入力上の文字列を変
換するユーティリティプログラム。より長い文字列に最初に適合するため有限状
態マシンを使用します。文字列を交換するために使用できます。例えば、
<code>a</code> と <code>b</code> を与えられたファイル内で交換します:


<pre>shell&gt; replace a b b a -- file1 file2 ...
</pre>

<a name="IDX669"></a>

</dd><dt><code>safe_mysqld</code>
</dt><dd>
<code>mysqld</code> デーモンをいくつかの安全な機能で開始します。エラー時には再起動し、
実行時情報をログファイルへ記入します。
</dd></dl>



<h2><a name="mysqladmin" href="manual.ja_toc.html#mysqladmin">12.2  <strong>MySQL</strong> サーバーの管理　( <code>mysqladmin</code> )</a></h2>

<p>
管理オペレーションを実行するためのユーティリティ。シンタックスは: 

</p>

<pre>shell&gt; mysqladmin [OPTIONS] command [command-option] command ...
</pre>

<p>
<code>mysqladmin --help</code> によって、オプションの一覧を手にいれることができます。

</p>
<p>
現在の <code>mysqladmin</code> は以下のコマンドをサポートします：

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td>create databasename </td><td> データベースの作成
</td></tr>
<tr><td>drop databasename </td><td> データベースとテーブルの全削除。
</td></tr>
<tr><td>extended-status </td><td> サーバーから拡張ステータスを取得。
</td></tr>
<tr><td>flush-hosts </td><td> キャッシュされている全ホストをフラッシュ。
</td></tr>
<tr><td>flush-logs </td><td> 全てのログをフラッシュ
</td></tr>
<tr><td>flush-tables </td><td> 全てのテーブルをフラッシュ
</td></tr>
<tr><td>flush-privileges </td><td> 許可テーブルの再読み込み (reload と同じ)
</td></tr>
<tr><td>kill id,id,... </td><td> mysql スレッドの kill.
</td></tr>
<tr><td>password new-password </td><td> 古いパスワードを new-password に変更
</td></tr>
<tr><td>ping </td><td> mysqld が生きているかチェック
</td></tr>
<tr><td>processlist </td><td> 現在活動中の mysql スレッドを表示
</td></tr>
<tr><td>reload </td><td> 許可テーブルの再読み込み
</td></tr>
<tr><td>refresh </td><td> 全テーブルをフラッシュし、ログファイルを一度閉じて開きます。
</td></tr>
<tr><td>shutdown </td><td> サーバーをダウンさせます。
</td></tr>
<tr><td>status </td><td> サーバーから短いステータスを得ます。
</td></tr>
<tr><td>variables </td><td> 変数の表示
</td></tr>
<tr><td>version </td><td> サーバーからバージョンを得ます。
</td></tr>
</tbody></table>

<p>
全てのコマンドは、ユニークなプレフィックスで省略可能です。
例えば：

</p>

<pre>shell&gt; mysqladmin proc stat
+----+-------+-----------+----+-------------+------+-------+------+
| Id | User  | Host      | db | Command     | Time | State | Info |
+----+-------+-----------+----+-------------+------+-------+------+
| 6  | monty | localhost |    | Processlist | 0    |       |      |
+----+-------+-----------+----+-------------+------+-------+------+
Uptime: 10077  Threads: 1  Questions: 9  Slow queries: 0  Opens: 6  Flush tables: 1  Open tables: 2  Memory in use: 1092K  Max memory used: 1116K
</pre>

<p>
<code>mysqladmin status</code> コマンドの結果は、以下の項目を持ちます:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td>Uptime </td><td> <strong>MySQL</strong> サーバーの起動秒数
</td></tr>
<tr><td>Threads </td><td> 稼働中のスレッド数 (clients)
</td></tr>
<tr><td>Questions </td><td> <code>mysqld</code> が開始してからのクライアントからのクエリ数
</td></tr>
<tr><td>Slow queries </td><td> <code>long_query_time</code> 秒より時間のかかったクエリの数
</td></tr>
<tr><td>Opens </td><td> <code>mysqld</code> が開いたテーブル数
</td></tr>
<tr><td>Flush tables </td><td> <code>flush ...</code>, <code>refresh</code> and <code>reload</code> コマンドの実行回数
</td></tr>
<tr><td>Open tables </td><td> 現在開かれているテーブルの数
</td></tr>
<tr><td>Memory in use </td><td> mysqld のコードによって直接割り当てられたメモリ (only available when <strong>MySQL</strong> is compiled with --with-debug)
</td></tr>
<tr><td>Max memory used </td><td> mysqld のコードによって直接割り当てられる最大メモリー量 (only available when <strong>MySQL</strong> is compiled with --with-debug)
</td></tr>
</tbody></table>



<h2><a name="mysqldump" href="manual.ja_toc.html#mysqldump">12.3  <strong>MySQL</strong> データベースとテーブルから、構造とデータをダンプ　( <code>mysqldump</code> )</a></h2>

<p>
データベース、あるいは、
バックアップ、他のSQLサーバーへのデータを移動を目的としたデータのまとまり、
これらをダンプするためのユーティリティ。
ダンプは、テーブルの作成のための SQL 文を含みます。

</p>

<pre>shell&gt; mysqldump [OPTIONS] database [tables]
</pre>

<p>
もしテーブルを与えなければ、データベースの全てのテーブルがダンプされます。

</p>
<p>
<code>mysqldump --help</code> によって、オプションの一覧を手にいれることができます。

</p>
<p>
もし <code>mysqldump</code> を <code>--quick</code> や <code>--opt</code> なしで実行するならば、
<code>mysqldump</code> は結果を表示する前に、結果をメモリに全てロードすることに
注意してください。
これは大きなデータベースをダンプする際に問題になるでしょう。

</p>
<p>
<code>mysqldump</code> は以下のオプションをサポートします：

</p>
<dl compact="">

<dt><code>--add-locks</code>
</dt><dd>
テーブルのダンプの前に <code>LOCK TABLES</code> 文を追加し、
テーブルのダンプ後に <code>UNLOCK TABLE</code> 文を追加します。
( あとで <strong>MySQL</strong> に挿入するときにこれは速くなります ).
</dd><dt><code>--add-drop-table</code>
</dt><dd>
テーブルの create 文の前に、<code>drop table</code> 文を追加します。
</dd><dt><code>--allow-keywords</code>
</dt><dd>
キーワード(予約語) と同じ名前をもつフィールドの作成を許します。
これは、それぞれのフィールドの前に、テーブル名を付け足します。
</dd><dt><code>-c, --complete-insert</code>
</dt><dd>
完全な INSERT 文(フィールド名を書いた文) を使用します。
</dd><dt><code>-C, --compress</code>
</dt><dd>
もしサーバーとクライアントの双方が圧縮をサポートしているならば、
両者の間で行われる通信を全て圧縮します。
</dd><dt><code>--delayed</code>
</dt><dd>
<code>INSERT DELAYED</code> コマンドを使用してレコードを INSERT します。
</dd><dt><code>-e, --extended-insert</code>
</dt><dd>
新しいマルチライン <code>INSERT</code> 構文を使用します。(これはあとで挿入する際、
よりコンパクトかつ速くなります。)
</dd><dt><code>-#, --debug[=option_string]</code>
</dt><dd>
Trace usage of the program (for debugging).
</dd><dt><code>--help</code>
</dt><dd>
Display a help message and exit.
</dd><dt><code>--fields-terminated-by=...</code>
</dt><dd>
</dd><dt><code>--fields-enclosed-by=...</code>
</dt><dd>
</dd><dt><code>--fields-optionally-enclosed-by=...</code>
</dt><dd>
</dd><dt><code>--fields-escaped-by=...</code>
</dt><dd>
</dd><dt><code>--fields-terminated-by=...</code>
</dt><dd>
これらのオプションは <code>-T</code> とともに使用され、
<code>LOAD DATA INFILE</code> と同様の意味をなします。
 「<a href="manual.ja_Reference.html#LOAD_DATA">7.16  <code>LOAD DATA INFILE</code>構文</a>」節参照.
</dd><dt><code>-F, --flush-logs</code>
</dt><dd>
ダンプする前に、 <strong>MySQL</strong> サーバーのログファイルをフラッシュします。
</dd><dt><code>-f, --force,</code>
</dt><dd>
ダンプの途中で SQL エラーが発生しても、ダンプを続けます。
</dd><dt><code>-h, --host=..</code>
</dt><dd>
指定されたホストの <strong>MySQL</strong> サーバーからダンプします。
デフォルトのホストは <code>localhost</code>.
</dd><dt><code>-l, --lock-tables.</code>
</dt><dd>
ダンプを開始するとき全てのテーブルをロックします。
</dd><dt><code>-t, --no-create-info</code>
</dt><dd>
テーブルの作成情報( <code>CREATE TABLE</code> 文) を書き出しません。
</dd><dt><code>-d, --no-data</code>
</dt><dd>
テーブル内のレコードを書き出しません。
これはテーブルの構造だけを取り出したいときにとても便利です！
</dd><dt><code>--opt</code>
</dt><dd>
<code>--quick --add-drop-table --add-locks --extended-insert --lock-tables</code> と同じ.
<strong>MySQL</strong> サーバーから読み出す時間を最短にしてくれます。
</dd><dt><code>-pyour_pass, --password[=your_pass]</code>
</dt><dd>
サーバーに接続する際のパスワードを与えます。
もし <samp>`=your_pass'</samp> 部分を与えなかった場合は、
<code>mysqldump</code> は端末からパスワードを読み取ろうとします。
</dd><dt><code>-P port_num, --port=port_num</code>
</dt><dd>
サーバーに接続する際に使用する TCP/IP ポート番号。
 (This は <code>localhost</code> 以外のホストへの接続に使用されます。
 <code>localhost</code> の場合は、Unix ソケットが使用されます。)
</dd><dt><code>-q, --quick</code>
</dt><dd>
クエリをバッファにため込みません。stdout に直接出します。
<code>mysql_use_result()</code> をこれに使用しています。
</dd><dt><code>-S /path/to/socket, --socket=/path/to/socket</code>
</dt><dd>
<code>localhost</code> に接続する際のソケットファイルの指定 (デフォルトは /tmp/mysql.sock )
</dd><dt><code>-T, --tab=path-to-some-directory</code>
</dt><dd>
与えられたテーブル毎に、
SQL CREATE 文を含む <code>table_name.sql</code> ファイル、
データを含む <code>table_name.txt</code> ファイルを作成します。
<strong>NOTE</strong>: 
これは <code>mysqld</code> デーモンが走っているマシン上で <code>mysqldump</code> を
実行する場合にだけ、動作します。
 <code>.txt</code> ファイルのフォーマットは、
 <code>--fields-xxx</code> と <code>--lines--xxx</code> オプションに従います。
</dd><dt><code>-u user_name, --user=user_name</code>
</dt><dd>
サーバーに接続する際の <strong>MySQL</strong> ユーザー名。
デフォルトでは、Unix のログイン名になります。
</dd><dt><code>-O var=option, --set-variable var=option</code>
</dt><dd>
変数の値をセット。 可能な変数は後で示しします。
</dd><dt><code>-v, --verbose</code>
</dt><dd>
冗長モード。 プログラムが何を行っているかより表示します。
</dd><dt><code>-V, --version</code>
</dt><dd>
バージョンを示して終了。
</dd><dt><code>-w, --where='where-condition'</code>
</dt><dd>
選択されたレコードのみをダンプ： クオートは必須です！


<pre>"--where=user='jimf'" "-wuserid&gt;1" "-wuserid&lt;1"
</pre>

</dd></dl>

<p>
<code>mysqldump</code> の普通の使用はデータベースのバックアップでしょう：

</p>

<pre>mysqldump --opt database &gt; backup-file.sql
</pre>

<p>
他の <strong>MySQL</strong> サーバーへデータベースをコピーする場合にも便利です：

</p>

<pre>mysqldump --opt database | mysql --host=remote-host -C database
</pre>



<h2><a name="mysqlimport" href="manual.ja_toc.html#mysqlimport">12.4  テキストファイルからデータを取り込む　( <code>mysqlimport</code> )</a></h2>

<p>
<code>mysqlimport</code> は、<code>LOAD DATA INFILE</code> SQL 構文を、
コマンドラインインターフェースで提供します。
<code>mysqlimport</code> のオプションのほとんどが、
 <code>LOAD DATA INFILE</code> への同じオプションに対応します。
 「<a href="manual.ja_Reference.html#LOAD_DATA">7.16  <code>LOAD DATA INFILE</code>構文</a>」節参照.

</p>
<p>
<code>mysqlimport</code> の実行は以下のようにします:

</p>

<pre>shell&gt; mysqlimport [options] filename ...
</pre>

<p>
<code>mysqlimport</code> は、コマンドラインの引数に与えられたファイル名の拡張子を取り、
拡張子を取った後の名前を、ファイルの内容を取り込むテーブルの名前とします。
例えば、<tt>`patient.txt'</tt>, <tt>`patient.text'</tt>, <tt>`patient'</tt> という
ファイルは全て、<code>patient</code> とという名前のテーブルに取り込まれます。

</p>
<p>
<code>mysqlimport</code> は以下のオプションをサポートします:

</p>
<dl compact="">

<dt><code>-C, --compress</code>
</dt><dd>
クライアントとサーバーの両方が圧縮をサポートしているなら、
クライアント・サーバー間でやり取りされる全ての情報を圧縮します。

</dd><dt><code>-#, --debug[=option_string]</code>
</dt><dd>
プログラムのトレース(デバッグ)

</dd><dt><code>-d, --delete</code>
</dt><dd>
テキストファイルを取り込む前にテーブルを空にします。

</dd><dt><code>--fields-terminated-by=...</code>
</dt><dd>
</dd><dt><code>--fields-enclosed-by=...</code>
</dt><dd>
</dd><dt><code>--fields-optionally-enclosed-by=...</code>
</dt><dd>
</dd><dt><code>--fields-escaped-by=...</code>
</dt><dd>
</dd><dt><code>--fields-terminated-by=...</code>
</dt><dd>
これらのオプションは、<code>LOAD DATA INFILE</code> の対応する文節と同じ意味になります。
 「<a href="manual.ja_Reference.html#LOAD_DATA">7.16  <code>LOAD DATA INFILE</code>構文</a>」節参照.

</dd><dt><code>-f, --force</code>
</dt><dd>
エラーを無視します。例えば、テキストファイルを取り込むテーブルがない場合、
残りのファイルの処理に移ります。 <code>--force</code> がなければ、
テーブルがなければ <code>mysqlimport</code> は終了します。

</dd><dt><code>--help</code>
</dt><dd>
ヘルプを表示して終了。

</dd><dt><code>-h host_name, --host=host_name</code>
</dt><dd>
名前を指定された <strong>MySQL</strong> サーバーにデータを取り入れます。
デフォルトでは <code>localhost</code>.

</dd><dt><code>-i, --ignore</code>
</dt><dd>
<code>--replace</code> オプションの説明を見てください。

</dd><dt><code>-l, --lock-tables</code>
</dt><dd>
それぞれのテキストファイルを処理する前に、書き込まれる
<strong>全ての</strong>テーブルをロックします。
これは確実に、すべてのテーブルをサーバ上で同期させます。

</dd><dt><code>-L, --local</code>
</dt><dd>
クライアントからの入力ファイルを読みます。
デフォルトでは、<code>localhost</code> に接続した場合、テキストファイルは
サーバー上にあると仮定されます。(<code>localhost</code> はデフォルト値)

</dd><dt><code>-pyour_pass, --password[=your_pass]</code>
</dt><dd>
サーバーに接続するときに使用するパスワード。
もし <samp>`=your_pass'</samp> のところにパスワードを書かなければ、
<code>mysqlimport</code> は端末からのパスワードの入力を要求します。

</dd><dt><code>-P port_num, --port=port_num</code>
</dt><dd>
ホストに接続するための TCP/IP ポート番号。
(これは <code>localhost</code> を除くホストへの接続に使用します。
<code>localhost</code> へは、UNIX ソケットを使用します。)

</dd><dt><code>-r, --replace</code>
</dt><dd>
<code>--replace</code> と <code>--ignore</code> オプションは、
入力されているレコードのユニークキーの値が、
既に存在しているレコードのユニークキーの値と同じ場合、
その入力されているデータの取り扱いを決定します。
もし <code>--replace</code> が指定されているなら、
既にあるレコードは新しく読まれたレコードに置き換えられます。
もし <code>--ignore</code> が指定されているなら、
入力された物は無視されます。
どちらのオプションも指定していない場合、
キーの値が重なっているとエラーを発し、
テキストファイルの残りの部分は無視されます。

</dd><dt><code>-s, --silent</code>
</dt><dd>
静粛モード。エラーだけ出力します。

</dd><dt><code>-S /path/to/socket, --socket=/path/to/socket</code>
</dt><dd>
<code>localhost</code> への接続時に使用するソケットファイルを指定します。

</dd><dt><code>-u user_name, --user=user_name</code>
</dt><dd>
サーバーの接続に使用する <strong>MySQL</strong> ユーザー名の指定。
デフォルトは、Unix のログイン名。

</dd><dt><code>-v, --verbose</code>
</dt><dd>
冗長モード。プログラムがしている事について多く出力します。

</dd><dt><code>-V, --version</code>
</dt><dd>
バージョンを表示して終了。
</dd></dl>

<p>
Here follows a sample run of using <code>mysqlimport</code>:

</p>

<pre>$ mysql --version
mysql  Ver 9.33 Distrib 3.22.25, for pc-linux-gnu (i686)
$ uname -a
Linux xxx.com 2.2.5-15 #1 Mon Apr 19 22:21:09 EDT 1999 i586 unknown
$ mysql -e 'CREATE TABLE imptest(id INT, n VARCHAR(30))' test
$ ed
a
100     Max Sydow
101     Count Dracula
.
w imptest.txt
32
q
$ od -c imptest.txt
0000000   1   0   0  \t   M   a   x       S   y   d   o   w  \n   1   0
0000020   1  \t   C   o   u   n   t       D   r   a   c   u   l   a  \n
0000040
$ mysqlimport --local test imptest.txt
test.imptest: Records: 2  Deleted: 0  Skipped: 0  Warnings: 0
$ mysql -e 'SELECT * FROM imptest' test
+------+---------------+
| id   | n             |
+------+---------------+
|  100 | Max Sydow     |
|  101 | Count Dracula |
+------+---------------+
</pre>

<p>
<a name="IDX670"></a>
<a name="IDX671"></a>


</p><h2><a name="myisampack" href="manual.ja_toc.html#myisampack">12.5  <strong>MySQL</strong> の圧縮された読み込み専用テーブルジェネレータ　( <code>myisampack</code> ・ <code>pack_isam</code> )</a></h2>

<p>
<code>myisampack</code> is used to compress MyISAM tables and <code>pack_isam</code> 
is used to compress ISAM tables. Since ISAM tables are deprecated we
will only discuss <code>myisampack</code> here.

</p>
<p>
<code>myisampack</code> は、
10 ライセンス以上または拡張サポートを注文した時に得
られる特別なユーテリティです。これらはバイナリだけの配布のため、
いくつかのプラットフォーム上でだけに有効です。

</p>
<p>
In the following we only talk about <code>myisampack</code>, but everything
holds also for <code>pack_isam</code>.

</p>
<p>
<code>myisampack</code> はテーブル内の各項目を別々に圧縮するように働きます。展開のため
の情報は、テーブルがオープンされた時にメモリに読まれます。これは、正確に1レコー
ドだけを展開する必要があるような、個々のレコードへのアクセス時にとても良
い性能を与えます。MSDOS 上の Stacker 使用時のように、ディスクブロックは
そんなに大きくありません。
通常、<code>myisampack</code> はデータファイルを 40～70% にパックします。

</p>
<p>
<strong>MySQL</strong> は圧縮されたテーブルでメモリマップ (<code>mmap()</code>) を使用します。
<code>mmap()</code> が働かない場合は、通常のファイルの読み書きを使用します。

</p>
<p>
現在 <code>myisampack</code> には2つの制限があります:

</p><ul>
<li>

パック後、テーブルは読み込み専用になります。
</li><li>

<code>myisampack</code> can also pack <code>BLOB</code> or <code>TEXT</code> columns. The
older <code>pack_isam</code> could not do this.
</li></ul>

<p>
これらの制限の修正は TODO にありますが、優先度は低いです。

</p>
<p>
<code>myisampack</code> は以下のようにして起動します:

</p>

<pre>shell&gt; myisampack [options] filename ...
</pre>

<p>
それぞれのファイル名はインデックスファイル(<tt>`.MYI'</tt>)の名前です。
もしデータディレクトリにカレントディレクトリを移動していないなら、
ファイルのパスを指定しなくてはなりません。<tt>`.MYI'</tt> 拡張子は
省略することが可能です。

</p>
<p>
<code>myisampack</code> は以下のオプションをサポートします:

</p>
<dl compact="">

<dt><code>-b, --backup</code>
</dt><dd>
<code>tbl_name.OLD</code> としてバックアップを作成します.

</dd><dt><code>-#, --debug=debug_options</code>
</dt><dd>
デバック出力。<code>debug_options</code> は <code>'d:t:o,filename'</code>.

</dd><dt><code>-f, --force</code>
</dt><dd>
一時ファイルが存在していようが、サイズが大きくなろうが、強制的にテーブルを
パックします。
<code>myisampack</code> はテーブルを圧縮している間、
一時ファイルを <tt>`tbl_name.TMD'</tt> という名前で作成します。
もし <code>myisampack</code> を途中で kill した場合、 <tt>`.TMD'</tt> ファイルが消されて
いない事があります。通常、<code>myisampack</code> は <tt>`tbl_name.TMD'</tt> ファイルが
既に存在する場合はエラーで終了します。 <code>--force</code> を使用すると、
<code>myisampack</code> はそのような場合でもテーブルをパックします。

</dd><dt><code>-?, --help</code>
</dt><dd>
ヘルプメッセージを出力して終了。

</dd><dt><code>-j big_tbl_name, --join=big_tbl_name</code>
</dt><dd>
全てのテーブルをコマンドラインで指定した <code>big_tbl_name</code> 一つに
まとめます。結合される全てのテーブル定義は同じでなければなりません
(同じ項目名、同じ項目型、同じインデックス、等)

</dd><dt><code>-p #, --packlength=#</code>
</dt><dd>
Specify the record length storage size, in bytes.  The value should be 1, 2
or 3.  (<code>myisampack</code> stores all rows with length pointers of 1, 2 or 3
bytes.  In most normal cases, <code>myisampack</code> can determine the right length
value before it begins packing the file, but it may notice during the packing
process that it could have used a shorter length. In this case,
<code>myisampack</code> will print a note that the next time you pack the same file,
you could use a shorter record length.)

</dd><dt><code>-s, --silent</code>
</dt><dd>
Silent mode.  Write output only when errors occur.

</dd><dt><code>-t, --test</code>
</dt><dd>
Don't pack table, only test packing it.

</dd><dt><code>-T dir_name, --tmp_dir=dir_name</code>
</dt><dd>
Use the named directory as the location in which to write the temporary table.

</dd><dt><code>-v, --verbose</code>
</dt><dd>
Verbose mode.  Write info about progress and packing result.

</dd><dt><code>-V, --version</code>
</dt><dd>
Display version information and exit.

</dd><dt><code>-w, --wait</code>
</dt><dd>
Wait and retry if table is in use.
If the <code>mysqld</code> server was invoked with the <code>--skip-locking</code>
option, it is not a good idea to invoke <code>myisampack</code> if the table might
be updated during the packing process.
</dd></dl>

<p>
The sequence of commands shown below illustrates a typical table compression
session:

</p>

<pre>shell&gt; ls -l station.*
-rw-rw-r--   1 monty    my         994128 Apr 17 19:00 station.ISD
-rw-rw-r--   1 monty    my          53248 Apr 17 19:00 station.ISM
-rw-rw-r--   1 monty    my         994128 Apr 17 19:00 station.MYD
-rw-rw-r--   1 monty    my          53248 Apr 17 19:00 station.MYI
-rw-rw-r--   1 monty    my           5767 Apr 17 19:00 station.frm

shell&gt; myisamchk -dvv station

MyISAM file:     station
Isam-version:  2
Creation time: 1996-03-13 10:08:58
Recover time:  1997-02-02  3:06:43
Data records:              1192  Deleted blocks:              0
Datafile: Parts:           1192  Deleted data:                0
Datafile pointer (bytes):     2  Keyfile pointer (bytes):     2
Max datafile length:   54657023  Max keyfile length:   33554431
Recordlength:               834
Record format: Fixed length

table description:
Key Start Len Index   Type                       Root  Blocksize    Rec/key
1   2     4   unique  unsigned long              1024       1024          1
2   32    30  multip. text                      10240       1024          1

Field Start Length Type
1     1     1
2     2     4
3     6     4
4     10    1
5     11    20
6     31    1
7     32    30
8     62    35
9     97    35
10    132   35
11    167   4
12    171   16
13    187   35
14    222   4
15    226   16
16    242   20
17    262   20
18    282   20
19    302   30
20    332   4
21    336   4
22    340   1
23    341   8
24    349   8
25    357   8
26    365   2
27    367   2
28    369   4
29    373   4
30    377   1
31    378   2
32    380   8
33    388   4
34    392   4
35    396   4
36    400   4
37    404   1
38    405   4
39    409   4
40    413   4
41    417   4
42    421   4
43    425   4
44    429   20
45    449   30
46    479   1
47    480   1
48    481   79
49    560   79
50    639   79
51    718   79
52    797   8
53    805   1
54    806   1
55    807   20
56    827   4
57    831   4

shell&gt; myisampack station.MYI
Compressing station.MYI: (1192 records)
- Calculating statistics

normal:     20  empty-space:      16  empty-zero:        12  empty-fill:  11
pre-space:   0  end-space:        12  table-lookups:      5  zero:         7
Original trees:  57  After join: 17
- Compressing file
87.14%

shell&gt; ls -l station.*
-rw-rw-r--   1 monty    my         127874 Apr 17 19:00 station.ISD
-rw-rw-r--   1 monty    my          55296 Apr 17 19:04 station.ISM
-rw-rw-r--   1 monty    my         127874 Apr 17 19:00 station.MYD
-rw-rw-r--   1 monty    my          55296 Apr 17 19:04 station.MYI
-rw-rw-r--   1 monty    my           5767 Apr 17 19:00 station.frm

shell&gt; myisamchk -dvv station

MyISAM file:     station
Isam-version:  2
Creation time: 1996-03-13 10:08:58
Recover time:  1997-04-17 19:04:26
Data records:              1192  Deleted blocks:              0
Datafile: Parts:           1192  Deleted data:                0
Datafilepointer (bytes):      3  Keyfile pointer (bytes):     1
Max datafile length:   16777215  Max keyfile length:     131071
Recordlength:               834
Record format: Compressed

table description:
Key Start Len Index   Type                       Root  Blocksize    Rec/key
1   2     4   unique  unsigned long             10240       1024          1
2   32    30  multip. text                      54272       1024          1

Field Start Length Type                         Huff tree  Bits
1     1     1      constant                             1     0
2     2     4      zerofill(1)                          2     9
3     6     4      no zeros, zerofill(1)                2     9
4     10    1                                           3     9
5     11    20     table-lookup                         4     0
6     31    1                                           3     9
7     32    30     no endspace, not_always              5     9
8     62    35     no endspace, not_always, no empty    6     9
9     97    35     no empty                             7     9
10    132   35     no endspace, not_always, no empty    6     9
11    167   4      zerofill(1)                          2     9
12    171   16     no endspace, not_always, no empty    5     9
13    187   35     no endspace, not_always, no empty    6     9
14    222   4      zerofill(1)                          2     9
15    226   16     no endspace, not_always, no empty    5     9
16    242   20     no endspace, not_always              8     9
17    262   20     no endspace, no empty                8     9
18    282   20     no endspace, no empty                5     9
19    302   30     no endspace, no empty                6     9
20    332   4      always zero                          2     9
21    336   4      always zero                          2     9
22    340   1                                           3     9
23    341   8      table-lookup                         9     0
24    349   8      table-lookup                        10     0
25    357   8      always zero                          2     9
26    365   2                                           2     9
27    367   2      no zeros, zerofill(1)                2     9
28    369   4      no zeros, zerofill(1)                2     9
29    373   4      table-lookup                        11     0
30    377   1                                           3     9
31    378   2      no zeros, zerofill(1)                2     9
32    380   8      no zeros                             2     9
33    388   4      always zero                          2     9
34    392   4      table-lookup                        12     0
35    396   4      no zeros, zerofill(1)               13     9
36    400   4      no zeros, zerofill(1)                2     9
37    404   1                                           2     9
38    405   4      no zeros                             2     9
39    409   4      always zero                          2     9
40    413   4      no zeros                             2     9
41    417   4      always zero                          2     9
42    421   4      no zeros                             2     9
43    425   4      always zero                          2     9
44    429   20     no empty                             3     9
45    449   30     no empty                             3     9
46    479   1                                          14     4
47    480   1                                          14     4
48    481   79     no endspace, no empty               15     9
49    560   79     no empty                             2     9
50    639   79     no empty                             2     9
51    718   79     no endspace                         16     9
52    797   8      no empty                             2     9
53    805   1                                          17     1
54    806   1                                           3     9
55    807   20     no empty                             3     9
56    827   4      no zeros, zerofill(2)                2     9
57    831   4      no zeros, zerofill(1)                2     9
</pre>

<p>
The information printed by <code>myisampack</code> is described below:

</p>
<dl compact="">

<dt><code>normal</code>
</dt><dd>
The number of columns for which no extra packing is used.

</dd><dt><code>empty-space</code>
</dt><dd>
The number of columns containing
values that are only spaces; these will occupy 1 bit.

</dd><dt><code>empty-zero</code>
</dt><dd>
The number of columns containing
values that are only binary 0's; these will occupy 1 bit.

</dd><dt><code>empty-fill</code>
</dt><dd>
The number of integer columns that don't occupy the full byte range of their
type; these are changed to a smaller type (for example, an <code>INTEGER</code>
column may be changed to <code>MEDIUMINT</code>).

</dd><dt><code>pre-space</code>
</dt><dd>
The number of decimal columns that are stored with leading space. In this
case, each value will contain a count for the number of leading spaces.

</dd><dt><code>end-space</code>
</dt><dd>
The number of columns that have a lot of trailing space.  In this case, each
value will contain a count for the number of trailing spaces.

</dd><dt><code>table-lookup</code>
</dt><dd>
The column had only a small number of different values, and that were
converted to an <code>ENUM</code> before Huffman compression.

</dd><dt><code>zero</code>
</dt><dd>
The number of columns for which all values are zero.

</dd><dt><code>Original trees</code>
</dt><dd>
The initial number of Huffman trees.

</dd><dt><code>After join</code>
</dt><dd>
The number of distinct Huffman trees left after joining
trees to save some header space.
</dd></dl>

<p>
After a table has been compressed, <code>myisamchk -dvv</code> prints additional
information about each field:

</p>
<dl compact="">

<dt><code>Type</code>
</dt><dd>
The field type may contain the following descriptors:

<dl compact="">

<dt><code>constant</code>
</dt><dd>
All rows have the same value.

</dd><dt><code>no endspace</code>
</dt><dd>
Don't store endspace.

</dd><dt><code>no endspace, not_always</code>
</dt><dd>
Don't store endspace and don't do end space compression for all values.

</dd><dt><code>no endspace, no empty</code>
</dt><dd>
Don't store endspace. Don't store empty values.

</dd><dt><code>table-lookup</code>
</dt><dd>
The column was converted to an <code>ENUM</code>.

</dd><dt><code>zerofill(n)</code>
</dt><dd>
The most significant <code>n</code> bytes in the value are always 0 and are not
stored.

</dd><dt><code>no zeros</code>
</dt><dd>
Don't store zeros.

</dd><dt><code>always zero</code>
</dt><dd>
0 values are stored in 1 bit.
</dd></dl>

</dd><dt><code>Huff tree</code>
</dt><dd>
The Huffman tree associated with the field

</dd><dt><code>Bits</code>
</dt><dd>
The number of bits used in the Huffman tree.
</dd></dl>

<p></p><hr><p>
Go to the <a href="manual.ja_Introduction.html">first</a>, <a href="manual.ja_MySQL_Benchmarks.html">previous</a>, <a href="manual.ja_Maintenance.html">next</a>, <a href="manual.ja_Concept_Index.html">last</a> section, <a href="manual.ja_toc.html">table of contents</a>.
 
 
</p></body></html>