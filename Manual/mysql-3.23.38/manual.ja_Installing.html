<html><head>
  <!-- This HTML file has been created by texi2html 1.52 (hacked by david@detron.se)
     from manual.ja.texi on 20 July 2001 -->

  <title>MySQL Reference Manual for version 3.23.38. - 4  MySQL のインストール</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body bgcolor="#FFFFFF" text="#000000" link="#101090" vlink="#7030B0">
Go to the <a href="manual.ja_Introduction.html">first</a>, <a href="manual.ja_Licensing_and_Support.html">previous</a>, <a href="manual.ja_Compatibility.html">next</a>, <a href="manual.ja_Concept_Index.html">last</a> section, <a href="manual.ja_toc.html">table of contents</a>.
<p></p><hr><p>


</p><h1><a name="Installing" href="manual.ja_toc.html#Installing">4  <strong>MySQL</strong> のインストール</a></h1>
<p>
<a name="IDX120"></a>

</p>

<p>
この章では、どのようにして <strong>MySQL</strong> を得、インストールするのかをのべます: 

</p>

<ul>
<li>

<strong>MySQL</strong> を得ることができるサイトのリスト →
 「<a href="manual.ja_Installing.html#Getting_MySQL">4.1  <strong>MySQL</strong> を得る方法</a>」節.

</li><li>

どのプラットフォームをサポートしているかは →  「<a href="manual.ja_Installing.html#Which_OS">4.2  <strong>MySQL</strong> がサポートする OS</a>」節.
Please note that
not all supported system are equally good for running <strong>MySQL</strong> on them.
On some it is much more robust and efficient than others - see   「<a href="manual.ja_Installing.html#Which_OS">4.2  <strong>MySQL</strong> がサポートする OS</a>」節
for details.

</li><li>

<strong>MySQL</strong> のいくつかのバージョンは、バイナリ、ソース両方の配布物があります。
最も新しい開発を見たいという人と、新しいコードをテストして我々を助けたいと
いう人のために、現在のソースツリーへのアクセスも公開します。
どのバージョンを使用するのか、どのタイプを使用するかを決めるためには
 →  「<a href="manual.ja_Installing.html#Which_version">4.3  使用する <strong>MySQL</strong> バージョン</a>」節. When in doubt,
use the binary distribution.

</li><li>

バイナリとソースのインストールについては →
  「<a href="manual.ja_Installing.html#Installing_binary">4.6  <strong>MySQL</strong> バイナリディストリビューションのインストール</a>」節, と  「<a href="manual.ja_Installing.html#Installing_source">4.7  <strong>MySQL</strong> ソースディストリビューションのインストール</a>」節.
それぞれのセットには、あなたが出くわすかもしれない
システムに特有の問題のセクションが含まれます。

</li><li>

インストール後に行うことの説明は →  「<a href="manual.ja_Installing.html#Post-installation">4.16  インストール後の設定とテスト</a>」節. 
<strong>MySQL</strong> のインストールにおいて、バイナリまたはソース配布にかかわらず、
これらのプロシージャは適用します。
</li></ul>

<p>
<a name="IDX121"></a>
<a name="IDX122"></a>
<a name="IDX123"></a>
<a name="IDX124"></a>
<a name="IDX125"></a>
<a name="IDX126"></a>


</p><h2><a name="Getting_MySQL" href="manual.ja_toc.html#Getting_MySQL">4.1  <strong>MySQL</strong> を得る方法</a></h2>

<p>
現在のバージョンとダウンロードの指示についての情報は
<a href="http://www.mysql.com/"> <strong>MySQL</strong> ホームページ</a> をチェックしてく
ださい。

</p>
<p>
主なダウンロードミラーはここにあります:

</p>
<p>
<a href="http://download.sourceforge.net/mirrors/mysql/">http://download.sourceforge.net/mirrors/mysql/</a>

</p>
<p>
<strong>MySQL</strong> ミラーサイトになることに興味があれば、匿名 rsync ができます
: <code>rsync://download.sourceforge.net/mysql/</code>。下記リストにあなたのミラー
を追加するため、<a href="mailto:webmaster@mysql.com">webmaster@mysql.com</a> に電子メールを送って、我々に
知らせてください。

</p>
<p>
我々のメインサイトからのダウンロードに問題があれば、下記に一覧されたミラー
の一つを使用してみてください。

</p>
<p>
悪いまたは遅れているミラーは <a href="mailto:webmaster@mysql.com">webmaster@mysql.com</a> に報告してくださ
い。

</p>

<p>
<strong>ヨーロッパ:</strong>

</p>

<ul>

<li>

<img src="Flags/austria.png"> Austria [Univ. of Technology/Vienna] 
<a href="http://gd.tuwien.ac.at/db/mysql/"> WWW</a>
<a href="ftp://gd.tuwien.ac.at/db/mysql/"> FTP</a>

</li><li>

<img src="Flags/bulgaria.png"> Bulgaria [online.bg/Sofia] 
<a href="http://mysql.online.bg/"> WWW</a>
<a href="ftp://mysql.online.bg/"> FTP</a>

</li><li>

<img src="Flags/czech-republic.png"> Czech Republic [Masaryk University in Brno] 
<a href="http://mysql.linux.cz/index.html"> WWW</a>
<a href="ftp://ftp.fi.muni.cz/pub/mysql/"> FTP</a>

</li><li>

<img src="Flags/czech-republic.png"> Czech Republic [www.sopik.cz] 
<a href="http://www.mysql.cz/"> WWW</a>

</li><li>

<img src="Flags/czech-republic.png"> Czech Republic [www.gin.cz] 
<a href="http://mysql.gin.cz/"> WWW</a>
<a href="ftp://ftp.gin.cz/pub/MIRRORS/www.mysql.com/"> FTP</a>

</li><li>

<img src="Flags/denmark.png"> Denmark [Borsen] 
<a href=" http://mysql.borsen.dk/"> WWW</a>

</li><li>

<img src="Flags/denmark.png"> Denmark [SunSITE] 
<a href="http://SunSITE.auc.dk/mysql/"> WWW</a>
<a href="ftp://SunSITE.auc.dk/pub/databases/mysql/"> FTP</a>

</li><li>

<img src="Flags/estonia.png"> Estonia [OKinteractive] 
<a href="http://mysql.mirror.ok.ee"> WWW</a>

</li><li>

<img src="Flags/france.png"> France [mtesa.net] 
<a href="http://mysql.mtesa.net/"> WWW</a>

</li><li>

<img src="Flags/finland.png"> Finland [tonnikala.net] 
<a href="http://mysql.tonnikala.org/"> WWW</a>

</li><li>

<img src="Flags/germany.png"> Germany [Kernelnotes.de, Bonn] 
<a href="http://www.kernelnotes.de/mysql/"> WWW</a>
<a href="ftp://ftp.kernelnotes.de/pub/mirror/mysql.org/"> FTP</a>

</li><li>

<img src="Flags/germany.png"> Germany [Wolfenbuettel] 
<a href="http://www.fh-wolfenbuettel.de/ftp/pub/database/mysql/"> WWW</a>
<a href="ftp://ftp.fh-wolfenbuettel.de/pub/database/mysql/"> FTP</a>

</li><li>

<img src="Flags/greece.png"> Greece [NTUA, Athens] 
<a href="http://www.ntua.gr/mysql/"> WWW</a>
<a href="ftp://ftp.ntua.gr/pub/databases/mysql/"> FTP</a>

</li><li>

<img src="Flags/hungary.png"> Hungary [Xenia] 
<a href="http://mysql.sote.hu/"> WWW</a>
<a href="ftp://xenia.sote.hu/pub/mirrors/www.mysql.com/"> FTP</a>

</li><li>

<img src="Flags/iceland.png"> Iceland [GM] 
<a href="http://mysql.gm.is/"> WWW</a>
<a href="ftp://ftp.gm.is/pub/mysql/"> FTP</a>

</li><li>

<img src="Flags/italy.png"> Italy [feelinglinux.com] 
<a href="http://mysql.feelinglinux.com/"> WWW</a>

</li><li>

<img src="Flags/italy.png"> Italy [Teta Srl] 
<a href="http://www.teta.it/mysql/"> WWW</a>

</li><li>

<img src="Flags/italy.png"> Italy [tzone.it] 
<a href="http://mysql.tzone.it/"> WWW</a>

</li><li>

<img src="Flags/ireland.png"> Ireland [Esat Net] 
<a href="http://ftp.esat.net/mirrors/download.sourceforge.net/pub/mirrors/mysql/"> WWW</a>
<a href="ftp://ftp.esat.net/mirrors/download.sourceforge.net/pub/mirrors/mysql/"> FTP</a>

</li><li>

<img src="Flags/netherlands.png"> Netherlands [Silverpoint] 
<a href="http://mysql.silverpoint.nl/"> WWW</a>

</li><li>

<img src="Flags/netherlands.png"> Netherlands [Widexs BV] 
<a href="http://mysql.widexs.nl/"> WWW</a>
<a href="ftp://mysql.widexs.nl/pub/mysql/"> FTP</a>

</li><li>

<img src="Flags/netherlands.png"> Netherlands [ProServe] 
<a href="http://mysql.proserve.nl/"> WWW</a>

</li><li>

<img src="Flags/poland.png"> Poland [Sunsite] 
<a href="http://sunsite.icm.edu.pl/mysql/"> WWW</a>
<a href="ftp://sunsite.icm.edu.pl/pub/unix/mysql/"> FTP</a>

</li><li>

<img src="Flags/poland.png"> Poland [ncservice.com/Gdansk] 
<a href="http://mysql.service.net.pl/"> WWW</a>

</li><li>

<img src="Flags/portugal.png"> Portugal [Netc] 
<a href="http://ftp.netc.pt/pub/mysql/"> WWW</a>
<a href="ftp://ftp.netc.pt/pub/mysql/"> FTP</a>

</li><li>

<img src="Flags/romania.png"> Romania [roedu.net/Bucharest] 
<a href="ftp://ftp.roedu.net/pub/mirrors/ftp.mysql.com/"> FTP</a>

</li><li>

<img src="Flags/russia.png"> Russia [DirectNet] 
<a href="http://mysql.directnet.ru/"> WWW</a>
<a href="ftp://ftp.dn.ru/pub/MySQL/"> FTP</a>

</li><li>

<img src="Flags/russia.png"> Russia [Scientific Center/Chernogolovka] 
<a href="ftp://ftp.chg.ru/pub/databases/mysql/"> FTP</a>

</li><li>

<img src="Flags/switzerland.png"> Switzerland [Sunsite] 
<a href="http://sunsite.cnlab-switch.ch/ftp/mirror/mysql/"> WWW</a>
<a href="ftp://sunsite.cnlab-switch.ch/mirror/mysql/"> FTP</a>

</li><li>

<img src="Flags/great-britain.png"> UK [Omnipotent/UK] 
<a href="http://mysql.omnipotent.net/"> WWW</a>
<a href="ftp://mysql.omnipotent.net/"> FTP</a>

</li><li>

<img src="Flags/great-britain.png"> UK [PLiG/UK] 
<a href="http://ftp.plig.org/pub/mysql/"> WWW</a>
<a href="ftp://ftp.plig.org/pub/mysql/"> FTP</a>

</li><li>

<img src="Flags/great-britain.png"> UK [Telekon Internet/UK] 
<a href="ftp://ftp.telekon.co.uk/pub/mysql/"> FTP</a>

</li><li>

<img src="Flags/ukraine.png"> Ukraine [PACO] 
<a href="http://mysql.paco.net.ua"> WWW</a>
<a href="ftp://mysql.paco.net.ua/"> FTP</a>

</li><li>

<img src="Flags/ukraine.png"> Ukraine [ISP Alkar Teleport/Dnepropetrovsk] 
<a href="http://mysql.dp.ua/"> WWW</a>

</li></ul>

<p>
<strong>北アメリカ:</strong>

</p>

<ul>

<li>

<img src="Flags/canada.png"> Canada [Tryc] 
<a href="http://web.tryc.on.ca/mysql/"> WWW</a>

</li><li>

<img src="Flags/usa.png"> USA [Hurricane Electric/San Jose] 
<a href="http://mysql.he.net/"> WWW</a>

</li><li>

<img src="Flags/usa.png"> USA [ValueClick, Los Angeles CA] 
<a href="http://mysql.valueclick.com/"> WWW</a>
<a href="ftp://mysql.valueclick.com/mysql/"> FTP</a>

</li><li>

<img src="Flags/usa.png"> USA [Wisconsin University/Wisconsin] 
<a href="http://mirror.sit.wisc.edu/mysql/"> WWW</a>
<a href="ftp://mirror.sit.wisc.edu/mirrors/mysql/"> FTP</a>

</li><li>

<img src="Flags/usa.png"> USA [LinuxWired/Scottsdale, AZ] 
<a href="http://mysql.linuxwired.net/"> WWW</a>
<a href="ftp://ftp.linuxwired.net/pub/mirrors/mysql/"> FTP</a>

</li><li>

<img src="Flags/usa.png"> USA [Venoma.Org/Valdosta, GA] 
<a href="http://mysql.venoma.org/"> WWW</a>

</li><li>

<img src="Flags/usa.png"> USA [adgrafix.com/Boston, MA] 
<a href="http://mysql.adgrafix.com/"> WWW</a>

</li></ul>

<p>
<strong>南アメリカ:</strong>

</p>

<ul>

<li>

<img src="Flags/argentina.png"> Argentina [bannerlandia.com] 
<a href="http://mysql.bannerlandia.com.ar/"> WWW</a>
<a href="ftp://mysql.bannerlandia.com.ar/mirrors/mysql/"> FTP</a>

</li><li>

<img src="Flags/chile.png"> Chile [Vision] 
<a href="http://mysql.vision.cl/"> WWW</a>

</li><li>

<img src="Flags/chile.png"> Chile [PSINet] 
<a href="http://mysql.psinet.cl/"> WWW</a>
<a href="ftp://ftp.psinet.cl/pub/database/mysql/"> FTP</a>

</li><li>

<img src="Flags/chile.png"> Chile [Tecnoera] 
<a href="http://mysql.tecnoera.com/"> WWW</a>

</li></ul>

<p>
<strong>アジア:</strong>

</p>

<ul>
<li>

<img src="Flags/china.png"> China [Freecode] 
<a href="http://www.freecode.net.cn/mirror/mysql/"> WWW</a>

</li><li>

<img src="Flags/china.png"> China [linuxforum.net] 
<a href="http://www2.linuxforum.net/mirror/mysql/"> WWW</a>

</li><li>

<img src="Flags/china.png"> China [ISL/Hong Kong] 
<a href="http://mysql.islnet.net"> WWW</a>

</li><li>

<img src="Flags/china.png"> China [xcyber.org/Hong Kong] 
<a href="http://mysql.xcyber.org/"> WWW</a>

</li><li>

<img src="Flags/south-korea.png"> South Korea [Webiiz] 
<a href="http://mysql.webiiz.com/"> WWW</a>

</li><li>

<img src="Flags/south-korea.png"> South Korea [PanworldNet] 
<a href="http://mysql.holywar.net/"> WWW</a>

</li><li>

<img src="Flags/japan.png"> Japan [SoftAgency] 
<a href="http://www.softagency.co.jp/MySQL"> WWW</a>　　
<a href="http://www.softagency.co.jp/"> 日本語版MySQLのダウンロード(WWW) </a>

</li><li>

<img src="Flags/japan.png"> Japan [u-aizu.ac.jp/Aizu] 
<a href="ftp://ftp.u-aizu.ac.jp/ftp/pub/dbms/mysql/mysql.com"> FTP</a>

</li><li>

<img src="Flags/singapore.png"> Singapore [HJC] 
<a href="http://mysql.hjc.edu.sg"> WWW</a>
<a href="ftp://ftp.hjc.edu.sg/mysql"> FTP</a>

</li><li>

<img src="Flags/taiwan.png"> Taiwan [TTN] 
<a href="http://mysql.ttn.net"> WWW</a>

</li><li>

<img src="Flags/taiwan.png"> Taiwan [nctu.edu/HsinChu] 
<a href="http://mysql.nctu.edu.tw/"> WWW</a>

</li></ul>

<p>
<strong>オーストラリア:</strong>

</p>

<ul>
<li>

<img src="Flags/australia.png"> Australia [AARNet/Queensland] 
<a href="http://mirror.aarnet.edu.au/mysql"> WWW</a>
<a href="ftp://mirror.aarnet.edu.au/pub/mysql"> FTP</a>

</li></ul>

<p>
<strong>アフリカ:</strong>

</p>

<ul>

<li>

<img src="Flags/south-africa1.png"> South-Africa [Mweb] 
<a href="http://www.mysql.mweb.co.za/"> WWW</a>

</li><li>

<img src="Flags/south-africa1.png"> South Africa [The Internet Solution/Johannesburg] 
<a href="ftp://ftp.is.co.za/linux/mysql/"> FTP</a>

</li></ul>

<p>
<a name="IDX127"></a>
<a name="IDX128"></a>
<a name="IDX129"></a>
<a name="IDX130"></a>
<a name="IDX131"></a>


</p><h2><a name="Which_OS" href="manual.ja_toc.html#Which_OS">4.2  <strong>MySQL</strong> がサポートする OS</a></h2>

<p>
我々は GNU Autoconf を使用していますので、<strong>MySQL</strong> は POSIX スレッ
ドと C++ コンパイラが動作する全ての新しいシステムに移植可能です。(クライ
アントコードのコンパイルだけは C++ を必要としますが、スレッドは必要ではありません。)
我々は自身のソフトウェアを、最初に Sun Solaris (現在は 2.5 ～ 2.7) 上と
SuSE Linux Version 7.x で使用し開発します。

</p>
<p>
多くの OS では、ネイティブスレッドは最新バージョ
ンだけで動作することに注意してください。
<strong>MySQL</strong> は次の OS/スレッドパッケージの組み合わせで、コンパイルの
成功が報告されています。

</p>

<ul>
<li>

AIX 4.x with native threads.   「<a href="manual.ja_Installing.html#IBM-AIX">4.12.15  IBM-AIX notes</a>」節参照.
</li><li>

Amiga.
</li><li>

BSDI 2.x with the included MIT-pthreads package.   「<a href="manual.ja_Installing.html#BSDI">4.12.12  BSD/OS Notes</a>」節参照.
</li><li>

BSDI 3.0, 3.1 and 4.x with native threads.   「<a href="manual.ja_Installing.html#BSDI">4.12.12  BSD/OS Notes</a>」節参照.
</li><li>

DEC Unix 4.x with native threads.   「<a href="manual.ja_Installing.html#Alpha-DEC-UNIX">4.12.6  Alpha-DEC-UNIX Notes (Tru64)</a>」節参照.
</li><li>

FreeBSD 2.x with the included MIT-pthreads package.   「<a href="manual.ja_Installing.html#FreeBSD">4.12.9  FreeBSD Notes</a>」節参照.
</li><li>

FreeBSD 3.x and 4.x with native threads.   「<a href="manual.ja_Installing.html#FreeBSD">4.12.9  FreeBSD Notes</a>」節参照.
</li><li>

HP-UX 10.20 with the included MIT-pthreads package.   「<a href="manual.ja_Installing.html#HP-UX_10.20">4.12.16  HP-UX Version 10.20 Notes</a>」節参照.
</li><li>

HP-UX 11.x with the native threads.   「<a href="manual.ja_Installing.html#HP-UX_11.x">4.12.17  HP-UX Version 11.x Notes</a>」節参照.
</li><li>

Linux 2.0+ with LinuxThreads 0.7.1+ or <code>glibc</code> 2.0.7+.   「<a href="manual.ja_Installing.html#Linux">4.12.5  Linux Notes (All Linux Versions)</a>」節参照.
</li><li>

Mac OS X Server.   「<a href="manual.ja_Installing.html#Mac_OS_X">4.12.18  Mac OS X Notes</a>」節参照.
</li><li>

NetBSD 1.3/1.4 Intel and NetBSD 1.3 Alpha (Requires GNU make).   「<a href="manual.ja_Installing.html#NetBSD">4.12.10  NetBSD notes</a>」節参照.
</li><li>

OpenBSD &gt; 2.5 with native therads. OpenBSD &lt; 2.5 with the included
MIT-pthreads package.   「<a href="manual.ja_Installing.html#OpenBSD">4.12.11  OpenBSD Notes</a>」節参照.
</li><li>

OS/2 Warp 3, FixPack 29 and OS/2 Warp 4, FixPack 4.   「<a href="manual.ja_Installing.html#OS/2">4.14  OS/2 Notes</a>」節参照.
</li><li>

SGI Irix 6.x with native threads.   「<a href="manual.ja_Installing.html#SGI-Irix">4.12.8  SGI-IRIX notes</a>」節参照.
</li><li>

Solaris 2.5 and above with native threads on SPARC and x86.   「<a href="manual.ja_Installing.html#Solaris">4.12.1  Solaris Notes</a>」節参照.
</li><li>

SunOS 4.x with the included MIT-pthreads package.   「<a href="manual.ja_Installing.html#Solaris">4.12.1  Solaris Notes</a>」節参照.
</li><li>

SCO OpenServer with a recent port of the FSU Pthreads package.   「<a href="manual.ja_Installing.html#SCO">4.12.13  SCO Notes</a>」節参照.
</li><li>

SCO UnixWare 7.0.1.   「<a href="manual.ja_Installing.html#SCO_Unixware">4.12.14  SCO Unixware Version 7.0 Notes</a>」節参照.
</li><li>

Tru64 Unix
</li><li>

Win95, Win98, NT, and Win2000.   「<a href="manual.ja_Installing.html#Windows">4.13  Windows Notes</a>」節参照.
</li></ul>

<p>
Note that not all platforms are suited equally well for running
<strong>MySQL</strong>. How well a certain platform is suited for a high-load
mission critical <strong>MySQL</strong> server is determined by the following
factors:

</p>

<ul>
<li>

General stability of the thread library. A platform may have excellent
reputation otherwise, but if the thread library is unstable in the code
that is called by <strong>MySQL</strong>, even if
everything else is perfect, <strong>MySQL</strong> will be only as stable as the
thread library.
</li><li>

The ability of the kernel and/or thread library to take advantage of
<strong>SMP</strong> on
multi-processor systems. In other words, when a process creates a thread, it
should be possible for that thread to run on a different CPU than the original
process.
</li><li>

The ability of the kernel and/or the thread library to run many threads which
acquire/release a mutex over a short critical region frequently without
excessive context switches. In other words, if the implementation of
<code>pthread_mutex_lock()</code> is too anxious to yield CPU, this will hurt
<strong>MySQL</strong> tremendously. If this issue
is not taken care of, adding extra CPUs will actually make <strong>MySQL</strong>
slower.
</li><li>

General file system stability/performance.
</li><li>

Ability of the file system to deal with large files at all and deal with them
efficiently, if your tables are big.
</li><li>

Our level of expertise here at <strong>MySQL AB</strong> with the platform. If we know
a platform well, we introduce platform-specific optimizations/fixes enabled at
compile time. We can also provide advice on configuring your system optimally
for <strong>MySQL</strong>.
</li><li>

The amount of testing of similar configurations we have done internally.
</li><li>

The number of users that have successfully run <strong>MySQL</strong> on that
platform in similar configurations. If this number is high, the chances of
hitting some platform-specific surprise are much smaller.
</li></ul>

<p>
Based on the above criterea, the best platforms for running
<strong>MySQL</strong> at this point are x86 with SuSE Linux 7.1, 2.4 kernel and
ReiserFS (or any similar Linux distribution) and Sparc with Solaris 2.7
or 2.8. FreeBSD comes third, but we really hope it will join the top
club once the thread library is improved. We also hope that at some
point we will be able to include all other platforms on which
<strong>MySQL</strong> compiles, runs ok, but not quite with the same level of
stability and performance, into the top category. This will require some
effort on our part in cooperation with the developers of the OS/library
components <strong>MySQL</strong> depends upon. If you are interested in making
one of those components better, are in a position to influence their
development, and need more detailed instructions on what <strong>MySQL</strong>
needs to run better, send an e-mail to
<a href="mailto:internals@lists.mysql.com">internals@lists.mysql.com</a>.

</p>
<p>
Please note that the comparison above is not to say that one OS is better or
worse than the other in general. We are talking about choosing a particular OS
for a dedicated purpose - running <strong>MySQL</strong>, and compare platforms in that
regard only. With this in mind, the result of this comparison
would be different if we included more issues into it. And in some cases,
the reason one OS is better than the other could simply be that we have put
forth more effort into testing on and optimizing for that particular platform.
We are just stating our observations to help you make a
decision on which platform to use <strong>MySQL</strong> on in your setup.

</p>
<p>
<a name="IDX132"></a>
<a name="IDX133"></a>
<a name="IDX134"></a>
<a name="IDX135"></a>
<a name="IDX136"></a>


</p><h2><a name="Which_version" href="manual.ja_toc.html#Which_version">4.3  使用する <strong>MySQL</strong> バージョン</a></h2>

<p>
make を行う前に決める事は、あなたが最新の開発リリースを使用するのか、
または最新の安定リリースを使用するのかです。

</p>

<ul>
<li>

通常、あなたが最初に <strong>MySQL</strong> を使い始める場合、またはバイナリ配布
がない他のシステムに <strong>MySQL</strong> を移植しようとする場合、
我々は開発リリース (現在は バージョン 3.23.38) の選択を
勧めます。開発リリースには普通は本当に悪いバグはありません。それは、あなたのマシン上で、
<code>crash-me</code> とベンチマークテストで簡単にテストできます。
 「<a href="manual.ja_Performance.html#Benchmarks">13.7  Using Your Own Benchmarks</a>」節参照。注意: すべての <strong>MySQL</strong> リリースはそれぞれのリリー
スの前に <strong>MySQL</strong> ベンチマークと広範囲なテストスイートでチェックされ
ます。

</li><li>

そうでなくて、古いシステムで実行していてアップグレードしたいけれども、
開発版は試したくない場合は、あなたが使用している物と同じブランチ中の
最新のもの(あなたが使用している物より新しいバージョンの物)に
アップグレードすべきです。 このバージョンでは、致命的なバグだけを修正し、
比較的安全で小さな変更を行っています。
</li></ul>

<p>
make 前の２番目の決定事項は、ソースディストリビューションとバイナリディ
ストリビューションのどちらを使用するかです。多くの場合、バイナリがプラッ
トフォーム用に存在していれば、おそらくバイナリディストリビューションを使
用すべきです。通常、それはソースディストリビューションよりも簡単にインス
トールできます。

</p>
<p>
次のケースでは、おそらくソースインストールの方が良いでしょう:

</p>

<ul>
<li>

<strong>MySQL</strong> をどこか明示的な場所にインストールしたい場合(標準バイナリ
ディストリビューションは、どこの場所でも '実行準備' ができていますが、もっ
と柔軟にすることもできます)。

</li><li>

異なるユーザの要求を満たすため、我々は２つのバイナリバージョンを提供してい
ます; ひとつは、トランザクションテーブル処理なしでコンパイルされたもので、
もう一つは、トランザクション安全なテーブルのような、もっとも重要な拡張され
たオプションで configure されたものです。両方のバージョンとも、同じソース
ディストリビューションからコンパイルされます。すべてのネイティブ 
<code>MySQL</code> クライアントは両方の <strong>MySQL</strong> バージョンに接続できます。

拡張 <strong>MySQL</strong> バイナリディストリビューションは <code>-max</code> 接尾語が
つけられていて、<code>mysqld-max</code> と同じオプションで configure されていま
す。 「<a href="manual.ja_Tools.html#mysqld-max">15.2  mysqld-max, An extended mysqld server</a>」節参照。

<code>MySQL-Max</code> RPM を使用したい場合は、最初に標準 <code>MySQL</code> RPM をイ
ンストールすべきです。

</li><li>

<code>mysqld</code> を、標準バイナリディストリビューションには無いいくつかの拡
張機能付きで configure したい場合。使用できる代表的な拡張オプションは次
の通りです:


<ul>
<li>--with-berkeley-db

</li><li>--with-innodb

</li><li>--with-raid

</li><li>--with-libwrap

</li><li>--with-named-z-lib  (これはいくつかのバイナリでは実施済みです)

</li><li>--with-debug[=full]

</li></ul>

</li><li>

デフォルトのバイナリディストリビューションは通常すべての文字セットをサポー
トするようにコンパイルされていて、同じプロセッサファミリの多種のプロセッ
サ上で動作します。

より速い <strong>MySQL</strong> サーバを得たい場合、必要な文字セットだけをサポー
トするように再コンパイルでき、より良いコンパイラ(pgccのような)や、あなた
のプロセッサ用により最適化されたコンパイラオプションを使用できます。

</li><li>

バグを発見して <strong>MySQL</strong> 開発チームにそれを報告する場合、バグを修正
するためにソースディストリビューションに適用する必要のあるパッチが、おそ
らく得られるでしょう。

</li><li>

<strong>MySQL</strong> を作る C と C++ コードを読みたい(そして/または変更したい)
場合はソース配布を入手するべきです。ソースコードはいつでも究極のマニュア
ルです。ソース配布はバイナリ配布よりも多くのテストと例も含んでいます。
</li></ul>

<p>
<a name="IDX137"></a>
<a name="IDX138"></a>

</p>
<p>
<strong>MySQL</strong> の命名法では、リリース番号は3つの数値とサフィックスからな
ります。例えば、<code>mysql-3.21.17-beta</code> のようなリリース名は次のように
解釈されます:

</p>

<ul>
<li>

最初の数値(<code>3</code>)はファイル形式を表します。全てのバージョン 3 リリー
スは同じファイルフォーマットを持ちます。バージョン 4 が現れた時、全ての
テーブルは新しい形式に変換する必要があります (このための良いツールはもち
ろん含まれます)。

</li><li>

2番目の数値(<code>21</code>)はリリースレベルです。通常は二つから選択します。一
つはリリース/安定ブランチで(現在は <code>23</code>)、もう一つは開発ブランチです(現在は <code>4.0</code>)。
通常は両方とも安定ですが、開発バージョンはきまぐれで、ドキュメントがなく、いくつかのシ
ステムではコンパイルに失敗します。

</li><li>

3番目の数値(<code>17</code>)はリリースレベル内のバージョン番号です。これは新し
い配布の度に増加します。普通はあなたの選択したリリースレベルの最新バージョ
ンを求めます。

</li><li>

サフィックス(<code>beta</code>)はリリースの安定レベルを表します:


<ul>
<li>

<code>alpha</code> は、100% テストされていないいくつかの新しい大きなコードセク
ションが存在することを示し、知られているバグは News 節に記述されています
(通常はありません)。 「<a href="manual.ja_News.html#News">F  <strong>MySQL</strong> change history</a>」節参照。多くの alpha リリースには新しいコマ
ンドと拡張もあります。
大きなコード変更を含む開発中のものは、alpha リリース上に現れます。しかし
全てリリース前にテストされます。それぞれの <strong>MySQL</strong> リリースには既知
のバグはありません。

</li><li>

<code>beta</code> は全ての新しいコードがテストされたことを意味します。大きな新
しいものは追加されません。知られているバグはありません。
alpha バージョンで、少なくとも一カ月間、致命的なバグが報告されなくて、古
いコマンドをより信頼できなくするような新しい機能を追加する計画がない時に、
alpha から beta にバージョンが変更されます。

</li><li>

<code>gamma</code> は beta がしばらくして、正しく動くように見えるものです。
小さな修正だけが追加されます。
これは多くの他の会社がリリースと呼ぶものです。

</li><li>

サフィックスがない場合は、多くの異なる場所で、プラットフォーム固有のバグ
を除いてバグレポートなしでそのバージョンがしばらくの間動作していたことを
意味します。 致命的なバグ修正だけがリリースに適用されます。
これは我々が stable リリースと呼ぶものです。
</li></ul>

</li></ul>

<p>
<strong>MySQL</strong> の全てのバージョンは、比較的安全に使用できることを確かめ
るため、我々は標準テストとベンチマークを通して確認しています。標準テス
トは以前に見つかった全てのバグをチェックするように拡張されるため、テスト
スイートはより良く保持されます。
<a name="IDX139"></a>
<a name="IDX140"></a>

</p>
<p>
全てのリリースは少なくても次のテストがされていることに注意してください:

</p>
<dl compact="">

<dt>内部テストスイート
</dt><dd>
これは顧客のための製品システムの一部です。多くのテーブルと何百というメガ
バイトのデータを持っています。

</dd><dt><strong>MySQL</strong> ベンチマークスイート
</dt><dd>
これは一般的な範囲のクエリを実行します。これは、最適化の最新バッチが実際
にコードをより速く作れるかどうかを確認するテストでもあります。
 「<a href="manual.ja_Performance.html#Benchmarks">13.7  Using Your Own Benchmarks</a>」節参照。

</dd><dt><code>crash-me</code> テスト
</dt><dd>
これは、データベースがサポートしている機能と、その許容量と制限を決定しよ
うとします。 「<a href="manual.ja_Performance.html#Benchmarks">13.7  Using Your Own Benchmarks</a>」節参照.
</dd></dl>

<p>
他のテストは我々の内部製品環境で最新の <strong>MySQL</strong> バージョンを我々が
少なくとも1つのマシンで使用することです。我々は動作のため 100ギガバイト
以上のデータを持ちます。

</p>
<p>
<a name="IDX141"></a>
<a name="IDX142"></a>


</p><h2><a name="Many_versions" href="manual.ja_toc.html#Many_versions">4.4  アップデートがリリースされる方法と時</a></h2>

<p>
<strong>MySQL</strong> は MySQL AB でかなり速く進化していて、我々はこれを他の 
<strong>MySQL</strong> ユーザに共有してもらいたいです。我々は、他の人が必要とし
ていると思われるとても便利な機能を持った時に、リリースの作成を試みます。

</p>
<p>
我々は、実装が簡単な機能を要求するユーザの手助けも試みます。我々は、我々
のライセンスユーザが求めるものにも注目し、特に我々の拡張 email サポート
顧客が求めるものに注目して、彼らの手助けを試みます。

</p>
<p>
新しいリリースをダウンロードする必要はありません。News 節は、新しいリリー
スが、あなたが本当に求める何かを持っているかどうかをあなたに教えます。
 「<a href="manual.ja_News.html#News">F  <strong>MySQL</strong> change history</a>」節参照.

</p>
<p>
我々は <strong>MySQL</strong> の更新時は次のポリシーにしたがって行います：

</p>

<ul>
<li>

それぞれのマイナーアップデートで、バージョン文字列中の最後の数値が増加し
ます。主要な新機能や前のバージョンとのマイナーな非互換があった時には、バー
ジョン文字列中の2番目の数値が増加します。ファイル形式が変更した時、最初
の数値が増加します。

</li><li>

安定にテストされたリリースは年に約 1-2 回現れます。しかし小さなバグが見
つかった場合は、バグフィックスだけのリリースがリリースされます。

</li><li>

作業中のリリースは約 1-8 週間毎に現れます。

</li><li>

いくつかのプラットフォームのためのバイナリ配布は我々によってメジャーリリー
スから作られます。他の人が他のシステムのためにバイナリ配布を作りますが、
おそらく頻繁ではありません。

</li><li>

通常、小さなバグを見つけて修正するとすぐに、有効なパッチを作ります。

</li><li>

危険ではないけれども困らされるバグには、我々に知らせて頂ければ有効なパッ
チを作成します。その他の場合、大きなパッチの中にそれらの多くを結合します。

</li><li>

偶然、致命的なバグがリリース中にある場合、我々は新しいリリースを可能な限
りすぐに作ります。他の会社もそうしてもらいたいです。:)
</li></ul>

<p>
現在の安定リリースはバージョン 3.23 です;
我々はすでにバージョン 4.0 の開発に移行しています。
しかし、安定バージョンでもバグはまだ修正されます。
我々は、バグ修正と``行なわなければいけない''ことを無視するような、完全な
凍結を考えていません。``幾分かの凍結''とは、``ほとんど確実に既に動作して
いるものに影響を与えない''小さなことを追加するかもしれないということを意
味します。

</p>


<h2><a name="Installation_layouts" href="manual.ja_toc.html#Installation_layouts">4.5  インストールレイアウト</a></h2>

<p>
<a name="IDX143"></a>
<a name="IDX144"></a>
<a name="IDX145"></a>
<a name="IDX146"></a>

</p>
<p>
この節では、バイナリとソース配布のインストールで生成されるディレクトリの
デフォルトのレイアウトを説明します。

</p>
<p>
バイナリ配布はアンパックすることによりインストールされ、インストール場所
はあなたが選択した場所(通常 <tt>`/usr/local/mysql'</tt>)の中の次のディレクト
リを選択し生成します:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>ディレクトリ</strong> </td><td> <strong>ディレクトリの内容</strong>
</td></tr>
<tr><td><tt>`bin'</tt> </td><td> クライアントプログラム, <code>mysqld</code> サーバ
</td></tr>
<tr><td><tt>`data'</tt> </td><td> ログファイル, データベース
</td></tr>
<tr><td><tt>`include'</tt> </td><td> インクルード(ヘッダ)ファイル
</td></tr>
<tr><td><tt>`lib'</tt> </td><td> ライブラリ
</td></tr>
<tr><td><tt>`scripts'</tt> </td><td> <code>mysql_install_db</code>
</td></tr>
<tr><td><tt>`share/mysql'</tt> </td><td> エラーメッセージファイル
</td></tr>
<tr><td><tt>`sql-bench'</tt> </td><td> ベンチマーク
</td></tr>
</tbody></table>

<p>
ソース配布は configure しコンパイルした後にインストールされます。デフォ
ルトではインストールステップは <tt>`/usr/local'</tt> 配下のファイルを次のサ
ブディレクトリにインストールします:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>ディレクトリ</strong> </td><td> <strong>ディレクトリの内容</strong>
</td></tr>
<tr><td><tt>`bin'</tt> </td><td> クライアントプログラムとスクリプト
</td></tr>
<tr><td><tt>`include/mysql'</tt> </td><td> インクルードファイル
</td></tr>
<tr><td><tt>`info'</tt> </td><td> Info 形式のドキュメント
</td></tr>
<tr><td><tt>`lib/mysql'</tt> </td><td> ライブラリ
</td></tr>
<tr><td><tt>`libexec'</tt> </td><td> <code>mysqld</code> サーバ
</td></tr>
<tr><td><tt>`share/mysql'</tt> </td><td> エラーメッセージファイル
</td></tr>
<tr><td><tt>`sql-bench'</tt> </td><td> ベンチマークと <code>crash-me</code> テスト
</td></tr>
<tr><td><tt>`var'</tt> </td><td> データベースとログファイル
</td></tr>
</tbody></table>

<p>
ソースインストールのレイアウトはバイナリインストールと次の点が異なります:

</p>

<ul>
<li>

<code>mysqld</code> サーバは <tt>`/bin'</tt> ではなく 
<tt>`libexec'</tt> ディレクトリにインストールされます。
</li><li>

データディレクトリは <tt>`data'</tt> ではなく 
<tt>`var'</tt> です。
</li><li>

<code>mysql_install_db</code> は <tt>`/usr/local/mysql/scripts'</tt> ではなく
<tt>`/usr/local/bin'</tt> ディレクトリにインストールされます。

</li><li>

ヘッダーファイルのディレクトリは <tt>`include/mysql'</tt> で、
ライブラリのディレクトリは <tt>`lib/mysql'</tt> です。
<tt>`include'</tt> や <tt>`lib'</tt> ではありません。
</li></ul>

<p>
スクリプト <tt>`scripts/make_binary_distribution'</tt> を実行することにより、
コンパイルされたソースディストリビューションから、あなた自身のバイナリイン
ストレーションを生成できます。

</p>
<p>
<a name="IDX147"></a>
<a name="IDX148"></a>


</p><h2><a name="Installing_binary" href="manual.ja_toc.html#Installing_binary">4.6  <strong>MySQL</strong> バイナリディストリビューションのインストール</a></h2>

<p>
次にさらに詳細な説明を行ないます:

</p>
<p>
<strong>MySQL</strong> バイナリ配布をインストールするには、次のツールが必要です:

</p>

<ul>
<li>

GNU <code>gunzip</code>。配布の伸長のため。

</li><li>

適正な <code>tar</code>。配布の展開のため。GNU <code>tar</code> は動くことが知られて
います。Sun の <code>tar</code> は問題があることが知られています。
</li></ul>

<p>
<a name="IDX149"></a>
<a name="IDX150"></a>
Linux では、代わりのインストール方法として RPM (RedHat Package
Manager) を使用することができます。  「<a href="manual.ja_Installing.html#Linux-RPM">4.6.1  Linux RPM notes</a>」節参照.

</p>
<p>
問題が起きたときは、<a href="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> に質問を投稿する時に 
<code>mysqlbug</code> を<strong>常に使用してください</strong>。問題がバグでないとして
も、<code>mysqlbug</code> はあなたの問題を解決する助けになるであろうシステム情
報を収集します。<code>mysqlbug</code> を使用しないと、あなたの問題の解決を得る
可能性が小さくなります！ <code>mysqlbug</code> は、配布のアンパック後に 
<tt>`bin'</tt> ディレクトリ内に見つけられます。 「<a href="manual.ja_Questions.html#Bug_reports">2.3  バグや問題を報告する方法</a>」節参照.

</p>
<p>
<a name="IDX151"></a>
<strong>MySQL</strong> バイナリ配布をインストールし、使用するために行なわなければならない
基本的なコマンド:

</p>

<pre>shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
shell&gt; cd /usr/local
shell&gt; gunzip &lt; /path/to/mysql-VERSION-OS.tar.gz | tar xvf -
shell&gt; ln -s mysql-VERSION-OS mysql
shell&gt; cd mysql
shell&gt; scripts/mysql_install_db
shell&gt; chown -R root  /usr/local/mysql
shell&gt; chown -R mysql /usr/local/mysql/data
shell&gt; chgrp -R mysql /usr/local/mysql
shell&gt; chown -R root /usr/local/mysql/bin/
shell&gt; bin/safe_mysqld --user=mysql &amp;
</pre>

<p>
<a name="IDX152"></a>
<a name="IDX153"></a>
<a name="IDX154"></a>

</p>
<p>
<code>DBI</code> と <code>Msql-Mysql-modules</code> Perl モジュールをインストールする
場合、<code>bin/mysql_setpermission</code> スクリプトを使用して、新しいユーザを
追加することができます。

</p>
<p>
ここでさらに詳細な説明を続けます:

</p>
<p>
バイナリ配布のインストールには、次のステップに従い、それから インストー
ル後のセットアップとテストのために  「<a href="manual.ja_Installing.html#Post-installation">4.16  インストール後の設定とテスト</a>」節 に進んでくだ
さい。

</p>

<ol>
<li>

配下に配布をアンパックしたいディレクトリを選んで、そこに移ってください。
以下の例では、<tt>`/usr/local'</tt> 配下に配布をアンパックし、<strong>MySQL</strong> 
をインストールするディレクトリ <tt>`/usr/local/mysql'</tt> を生成します。(し
たがって、以下の指示は <tt>`/usr/local'</tt> にファイルを生成するパーミッショ
ンを持っているとみなします。ディレクトリがプロテクトされている場合は、
<code>root</code> でインストールを行なう必要があります。)

</li><li>

配布ファイル  「<a href="manual.ja_Installing.html#Getting_MySQL">4.1  <strong>MySQL</strong> を得る方法</a>」節. にリストされたサイトの一つから得てください。

<strong>MySQL</strong> バイナリ配布は圧縮された <code>tar.gz</code> アーカイブとして提供
され、<tt>`mysql-VERSION-OS.tar.gz'</tt> のような名前を持ちます。ここで 
<code>VERSION</code> は数値(例えば、<code>3.21.15</code>)で、<code>OS</code> は配布が意図
しているオペレーティングシステムの種類を表します(例えば 
<code>pc-linux-gnu-i586</code>)。

</li><li>

<code>-max</code> がついたバイナリディストリビューションは、バイナリがトランザク
ション安全なテーブルとその他の機能をサポートしていることを意味します。
 「<a href="manual.ja_Tools.html#mysqld-max">15.2  mysqld-max, An extended mysqld server</a>」節参照. 全てのバイナリは同じ <strong>MySQL</strong> ソースディストリビュー
ションから構築されていることに注意してください。

</li><li>

<code>mysqld</code> を実行するユーザーとグループを追加します:


<pre>shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
</pre>

これらのコマンドは <code>mysql</code> グループと <code>mysql</code> ユーザを追加します。
<code>useradd</code> と <code>groupadd</code> 構文は、別の UNIX 上では少し異なるでしょ
う。<code>adduser</code> と <code>addgroup</code> と呼ばれることもあります。ユーザとグ
ループは <code>mysql</code> の代わりに他の何かにすることもできます。

</li><li>

インストールディレクトリに移動します：


<pre>shell&gt; cd /usr/local
</pre>

</li><li>

配布をアンパックし、インストールディレクトリを生成してください:


<pre>shell&gt; gunzip &lt; /path/to/mysql-VERSION-OS.tar.gz | tar xvf -
shell&gt; ln -s mysql-VERSION-OS mysql
</pre>

最初のコマンドは <tt>`mysql-VERSION-OS'</tt> という名前のディレクトリを生成
します。二番目のコマンドはそのディレクトリにシンボリックリンクを作成しま
す。これはインストールディレクトリを <tt>`/usr/local/mysql'</tt> として、よ
り簡単に参照させるためです。

</li><li>

インストールディレクトリに移ってください:


<pre>shell&gt; cd mysql
</pre>

いくつかのファイルとサブディレクトリが <code>mysql</code> ディレクトリ中に見つ
けられます。インストール目的の最も重要なものは <tt>`bin'</tt> と 
<tt>`scripts'</tt> サブディレクトリです。

<dl compact="">

<dt><tt>`bin'</tt>
</dt><dd>
<a name="IDX155"></a>
<a name="IDX156"></a>
このディレクトリはクライアントプログラムとサーバを含んでいます。シェルが 
<strong>MySQL</strong> プログラムを正しく見つけられるように、このディレクトリの
フルパス名をあなたの <code>PATH</code> 環境変数に追加すべきです。 「<a href="manual.ja_Environment_variables.html#Environment_variables">A  Environment Variables</a>」節参照.

</dd><dt><tt>`scripts'</tt>
</dt><dd>
このディレクトリは <code>mysql_install_db</code> スクリプトを含んでいます。こ
れはサーバアクセスパーミッションを初期化するために使用されます。
</dd></dl>

</li><li>

<code>mysqlaccess</code> を使用し、かつ <strong>MySQL</strong> 配布を非標準の場所に持
ちたい場合は、<code>mysqlaccess</code> が <code>mysql</code> クライアントを見つけよ
うとする場所を変更する必要があります。<tt>`bin/mysqlaccess'</tt> スクリプト
の 18 行目付近を編集してください。次のような行を探してください:


<pre>$MYSQL     = '/usr/local/bin/mysql';    # path to mysql executable
</pre>

パスを <code>mysql</code> が実際にシステム上におかれている場所を示すように変更
してください。これを行なわないと、<code>mysqlaccess</code> 実行時に 
<code>Broken pipe</code> エラーになるでしょう。

</li><li>

<strong>MySQL</strong> 許可テーブルを作成します
 (これは初めて <strong>MySQL</strong> をインストールするときだけ行います):

<pre>shell&gt; scripts/mysql_install_db
</pre>

3.22.10以前のバージョンの <strong>MySQL</strong> は、<code>mysql_install_db</code>. 実行時に
<strong>MySQL</strong> を起動していましたが、もはやこれは起動しなくなりました

</li><li>

バイナリのオーナーを <code>root</code> に、
データディレクトリの所有権を <code>mysqld</code> を実行するユーザに変更し
てください:


<pre>shell&gt; chown -R root /usr/local/mysql
shell&gt; chown -R mysql /usr/local/mysql/var
shell&gt; chgrp -R mysql /usr/local/mysql
</pre>

最初のコマンドはファイルの <code>owner</code> 属性を <code>root</code> ユーザーに変更し、
2番目のコマンドは <code>owner</code> を <code>mysql</code> ユーザに変更し、
3番目のコマンドは <code>group</code> 属性を <code>mysql</code> グループに変更します。

</li><li>

Perl <code>DBI</code>/<code>DBD</code> インタフェースのサポートをインストールしたい
場合、 「<a href="manual.ja_Installing.html#Perl_support">4.11  Perl のインストールについて</a>」節 を見てください。

</li><li>

<strong>MySQL</strong> をマシン起動時に自動的に開始したい場合、
<code>support-files/mysql.server</code> をシステムのスタートアップファイルがある場所にコ
ピーしてください。さらなる情報は <code>support-files/mysql.server</code> スクリプト自身
の中と、 「<a href="manual.ja_Installing.html#Automatic_start">4.16.3  <strong>MySQL</strong> の自動起動と自動停止</a>」節 に見つけられます。
</li></ol>

<p>
全てがアンパックされてインストールされた後、配布の初期化とテストを行なう
べきです。

</p>
<p>
<strong>MySQL</strong> サーバーは以下のコマンドで開始できます：

</p>

<pre>shell&gt; bin/safe_mysqld --user=mysql &amp;
</pre>

<p>
 「<a href="manual.ja_Tools.html#safe_mysqld">15.3  safe_mysqld, the wrapper around mysqld</a>」節参照.

</p>
<p>
 「<a href="manual.ja_Installing.html#Post-installation">4.16  インストール後の設定とテスト</a>」節参照.

</p>
<p>
<a name="IDX157"></a>
<a name="IDX158"></a>


</p><h3><a name="Linux-RPM" href="manual.ja_toc.html#Linux-RPM">4.6.1  Linux RPM notes</a></h3>

<p>
（訳注：もし RedHat 以外の Linux を使用しており、.rpm を、自分が使用している
パッケージ管理システムの管理下におきたい場合、<strong>alien : http://kitenet.net/programs/alien/</strong> というツールを
使用します。これは RPM(Debian, Slackware) を自分が使用しているパッケージの形式に変換してくれます。
）

</p>
<p>
RPM を使用して <strong>MySQL</strong> をインストールすることを推奨します。
<strong>MySQL</strong> RPMS は RedHat 6.2 で作成していますが、
他の <code>rpm</code> と <code>glibc</code> をサポートしている Linux でも動作するでしょう。

</p>
<p>
RPM file での問題, 例えば, ``<code>Sorry, the host 'xxxx' could not be looked up</code>''
に遭遇した場合には →  「<a href="manual.ja_Installing.html#Binary_notes-Linux">4.6.3.1  Linux Notes for Binary Distributions</a>」節.

</p>
<p>
以下が使用するであろう RPM files です:

</p>

<ul>
<li><code>MySQL-VERSION.i386.rpm</code>

<strong>MySQL</strong> サーバー。
ただ単に他のマシン上で走っている <strong>MySQL</strong> サーバーに接続するだけなら、
これは不要でしょう。

</li><li><code>MySQL-client-VERSION.i386.rpm</code>

<strong>MySQL</strong> クライアント標準プログラム。
このパッケージはほとんどの場合インストールすることになるでしょう。

</li><li><code>MySQL-bench-VERSION.i386.rpm</code>

ベンチマーク。perl msql-mysql-modules RPM が必要。

</li><li><code>MySQL-devel-VERSION.i386.rpm</code>

他の <strong>MySQL</strong> クライアント(perlモジュールのような)をコンパイルするのに必要な
ライブラリーとインクルードファイルを含みます。

</li><li><code>MySQL-VERSION.src.rpm</code>

上記全てのソース。これは他のアーキテクチャ用に RPM を作成する場合にのみ必要でしょう。
(例えば Alpha or SPARC).
</li></ul>

<p>
RPM パッケージに含まれるファイルをみるには、以下を実行:

</p><pre>shell&gt; rpm -qpl MySQL-VERSION.i386.rpm
</pre>

<p>
インストールの最小の方法：

</p>

<pre>shell&gt; rpm -i MySQL-VERSION.i386.rpm MySQL-client-VERSION.i386.rpm
</pre>

<p>
クライアントパッケージだけをインストール：

</p>

<pre>shell&gt; rpm -i MySQL-client-VERSION.i386.rpm
</pre>

<p>
RPM はデータを <tt>`/var/lib/mysql'</tt> に保存します。
RPM は起動時にサーバーを立ちあげるように、<tt>`/etc/rc.d/'</tt> に登録します。
(以前にインストールがされていて、前にインストールされた <strong>MySQL</strong> 起
動ファイルを何か変更している場合、それをコピーしておいた方がいいでしょう。
そうすればその変更を失うことはありません。)

</p>
<p>
RPM ファイルのインストール後は、<tt>`mysqld'</tt> デーモンが実行されていて、
<strong>MySQL</strong> の使用を開始することができます。 「<a href="manual.ja_Installing.html#Post-installation">4.16  インストール後の設定とテスト</a>」節参照。

</p>
<p>
うまくいかない場合、バイナリインストールの章でさらに情報を探すことができま
す。 「<a href="manual.ja_Installing.html#Installing_binary">4.6  <strong>MySQL</strong> バイナリディストリビューションのインストール</a>」節参照。

</p>
<p>
<a name="IDX159"></a>
<a name="IDX160"></a>
<a name="IDX161"></a>
<a name="IDX162"></a>


</p><h3><a name="Building_clients" href="manual.ja_toc.html#Building_clients">4.6.2  クライアントプログラムのビルド</a></h3>

<p>
自分で書いたか、第三者が作成した <strong>MySQL</strong> クライアントプログラムをコンパイルする場合、
<code>-lmysqlclient -lz</code> オプションを使用してリンクされなければなりません。
また <code>-L</code> オプションを指定して、ライブラリがどこにあるか指定する必要がある場合もあります。
例えばライブラリが <tt>`/usr/local/mysql/lib'</tt> にインストールされるならば、
リンクの時に <code>-L/usr/local/mysql/lib -lmysqlclient -lz</code> と指定します。

</p>
<p>
<strong>MySQL</strong> ヘッダーファイルを使用するクライアントのために、
あなたがそれらをコンパイルする時には、<code>-I</code> オプションを指定しなければならない事もあります。
(例えば, <code>-I/usr/local/mysql/include</code>)

</p>



<h3><a name="Binary_install_system_issues" href="manual.ja_toc.html#Binary_install_system_issues">4.6.3  System 特有の問題</a></h3>

<p>
以下のセクションでは特定のシステム上に起こると認められたいくつかの問題のを示します。

</p>
<p>
<a name="IDX163"></a>
<a name="IDX164"></a>


</p><h4><a name="Binary_notes-Linux" href="manual.ja_toc.html#Binary_notes-Linux">4.6.3.1  Linux Notes for Binary Distributions</a></h4>

<p>
<strong>MySQL</strong> は少なくとも Linux バージョン 2.0 を必要とします。

</p>
<p>
TcX のバイナリリリースは <code>-static</code> でリンクされており、これはあなたのシステムが
どのバージョンのライブラリーを使用しているか気にする必要がありません。
よって、LinuxThreads もこの場合必要ありません。
<code>-static</code> でリンクされたプログラムのサイズは
ダイナミックリンクされたプログラムより大きくなりますが、少し(3-5%)速くなります。
しかし一つの問題として、このスタティックリンクされたプログラムでは、
ユーザー定義関数(UDF)が使用できないことです。
もし UDF を使用する(書く)場合(C, C++とかで)、自分自身で <strong>MySQL</strong> を
ダイナミックリンクを使用してコンパイルしなくてはなりません。

</p>
<p>
もし <code>glibc2</code> ではなく libc ベースのシステムを使用しているなら、
このバイナリリリースではホスト名解決と <code>getpwnam()</code> にいくつか問題が出ます。
(これは <code>glibc</code> がホスト名解決と <code>getpwent()</code> にいくつかの外部ライブラリに
依存しているためで、たとえ <code>-static</code> リンクしても解決しません).
この場合、<code>mysql_install_db</code> 実行時に以下のエラーが出るでしょう：

</p>

<pre>Sorry, the host 'xxxx' could not be looked up
</pre>

<p>
あるいは、<code>--user</code> オプションで mysqld を起動しようとしたとき、
以下のエラーが出る場合：

</p>

<pre>getpwnam: No such file or directory
</pre>

<p>
この問題は、以下のうちのどれかの方法で解決できます：

</p>

<ul>
<li>

<strong>MySQL</strong> ソース配布を入手し( RPM か <code>tar.gz</code> )、代わりに
インストールします。

</li><li>

<code>mysql_install_db --force</code> を実行します; これは <code>mysql_install_db</code> に
かかれている <code>resolveip</code> テストを実行しません。
また許可テーブル内でホスト名が使えなくなっています； 
ホスト名でなく IP アドレスで登録します (<code>localhost</code> は除).
もし <code>--force</code> を持っていないような古い <strong>MySQL</strong> を使用しているなら、
エディターで、<code>resolveip</code> テストを <code>mysql_install</code> から削除します。
</li><li>

mysqld を <code>--user</code> の代わりに <code>su</code> で起動。
</li></ul>

<p>
Linux-Intel binary と <strong>MySQL</strong> RPM リリースは、もっとも速くなるように
調整されています。我々はもっとも早く安定したコンパイラーを常に使用しています。

</p>
<p>
<strong>MySQL</strong> Perl サポートは Perl 5.004_03 以上のバージョンを必要としま
す。

</p>
<p>
Linux 2.2 バージョンのいくつかでは、TCP/IP 上で <code>mysqld</code> サーバに多く
の新しい接続を行なう時に、エラー <code>Resource temporarily unavailable</code> 
を得ることがあります。

</p>
<p>
この問題は、Linux では TCP/IP ソケットをクローズする時と、それがシステムに
よって実際に解放される間に遅延があるためです。TCP/IP スロットの数は有限な
ので、TCP/IP 上で <strong>MySQL</strong> <tt>`test-connect'</tt> ベンチマークを実行し
た時のように、短い時間にとても多くの新しい TCP/IP 接続が行なわれた場合に上
記エラーが得られます。

</p>
<p>
我々はこの問題について、異なる Linux メーリングリストで何回かメールを受け
ました。しかし、当然、我々はこれを解決することはできません。

</p>
<p>
この問題の知られている'解決策'は、あなたのクライアント内で永続的な接続を使
用するか、データベースサーバとクライアントが同じマシン上で実行されている場
合にソケットを使用することだけです。我々は、将来、<code>Linux 2.4</code> カーネ
ルでこの問題が解決されることを希望します。

</p>
<p>
<a name="IDX165"></a>
<a name="IDX166"></a>


</p><h4><a name="Binary_notes-HP-UX" href="manual.ja_toc.html#Binary_notes-HP-UX">4.6.3.2  HP-UX Notes for Binary Distributions</a></h4>

<p>
Some of the binary distributions of <strong>MySQL</strong> for HP-UX is
distributed as an HP depot file and as a tar file.  To use the depot
file you must be running at least HP-UX 10.x to have access to HP's
software depot tools.

</p>
<p>
The HP version of <strong>MySQL</strong> was compiled on an HP 9000/8xx server
under HP-UX 10.20, and uses MIT-pthreads.  It is known to work well under 
this configuration.  <strong>MySQL</strong> Version 3.22.26 and newer can also be 
built with HP's native thread package.

</p>
<p>
Other configurations that may work:

</p>

<ul>
<li>

HP 9000/7xx running HP-UX 10.20+
</li><li>

HP 9000/8xx running HP-UX 10.30
</li></ul>

<p>
The following configurations almost definitely won't work:

</p>

<ul>
<li>

HP 9000/7xx or 8xx running HP-UX 10.x where x &lt; 2
</li><li>

HP 9000/7xx or 8xx running HP-UX 9.x
</li></ul>

<p>
To install the distribution, use one of the
commands below, where <code>/path/to/depot</code> is the full path to the depot file:

</p>

<ul>
<li>

To install everything, including the server, client and development tools:


<pre>shell&gt; /usr/sbin/swinstall -s /path/to/depot mysql.full
</pre>

</li><li>

To install only the server:


<pre>shell&gt; /usr/sbin/swinstall -s /path/to/depot mysql.server
</pre>

</li><li>

To install only the client package:


<pre>shell&gt; /usr/sbin/swinstall -s /path/to/depot mysql.client
</pre>

</li><li>

To install only the development tools:


<pre>shell&gt; /usr/sbin/swinstall -s /path/to/depot mysql.developer
</pre>

</li></ul>

<p>
The depot places binaries and libraries in <tt>`/opt/mysql'</tt> and data in
<tt>`/var/opt/mysql'</tt>. The depot also creates the appropriate entries in
<tt>`/etc/init.d'</tt> and <tt>`/etc/rc2.d'</tt> to start the server automatically
at boot time.  Obviously, this entails being <code>root</code> to install.

</p>
<p>
To install the HP-UX tar.gz distribution, you must have a copy of GNU
<code>tar</code>.

</p>

<p>
<a name="IDX167"></a>
<a name="IDX168"></a>
<a name="IDX169"></a>


</p><h2><a name="Installing_source" href="manual.ja_toc.html#Installing_source">4.7  <strong>MySQL</strong> ソースディストリビューションのインストール</a></h2>

<p>
ソースインストールに取り掛かる前に、最初に我々のバイナリがあなたのプラット
フォームに有効で、動作するかどうかをチェックしてください。我々は、我々のバ
イナリが可能な限りのオプションで構築されていることを確認するために多くの努
力をしています。

</p>
<p>
ソースから <strong>MySQL</strong> を作成しインストールするためには次のツールが必
要です:

</p>

<ul>
<li>

GNU <code>gunzip</code>。配布の伸張のため。

</li><li>

適正な <code>tar</code>。配布の展開のため。GNU <code>tar</code> は動くことが知られて
います。Sun の <code>tar</code> は問題があることが知られています。

</li><li>

ANSI C++ コンパイラ。<code>gcc</code> &gt;= 2.95.2, <code>egcs</code> &gt;= 1.0.2, <code>egcs 2.91.66</code>,
SGI C++, SunPro C++ は働くことが知られているコンパイラのいくつかです。
<code>libg++</code> は <code>gcc</code> 使用時には必要ではありません。<code>gcc</code>
2.7.x は、<tt>`sql/sql_base.cc'</tt> のような、完全に正当な C++ ファイルのい
くつかをコンパイルできないというバグがあります。<code>gcc</code> 2.7.x だけし
かなければ、<strong>MySQL</strong> をコンパイルできるように <code>gcc</code> をアップ
グレードする必要があります。

<strong>MySQL</strong> 3.23.x のコンパイル時は、<code>gcc</code> &gt;= 2.95.2 を推奨します。

</li><li>

良い <code>make</code> プログラム。GNU <code>make</code> は常に推奨され、時々は必要
とされます。問題があれば GNU <code>make</code> 3.75 以上を試すことをお勧めしま
す。
</li></ul>

<p>
<code>-fno-exceptions</code> オプションを解釈する <strong>gcc</strong> の最近のバージョ
ンを使用している場合は、それを使用することが<strong>とても重要</strong>です。そう
でなければ、ランダムにクラッシュするバイナリができあがるでしょう。また、
<code>-fno-exceptions</code> に加え、<code>-felide-contructors</code> と 
<code>-fno-rtti</code> を使用することをお奨めします。
疑いがある時は、次を行なってください:

</p>

<pre>
CFLAGS="-O3" CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static

</pre>

<p>
多くのシステムで、これは速くて安定したバイナリを与えます。

</p>
<p>
問題が起きたときは、<a href="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> に質問を投稿する時に 
<strong><code>mysqlbug</code> を常に使用してください</strong>。問題がバグでないとして
も、<code>mysqlbug</code> はあなたの問題を解決する助けになるであろうシステム情
報を収集します。<code>mysqlbug</code> を使用しないと、あなたの問題の解決を得る
可能性が小さくなります！ <code>mysqlbug</code> は、配布のアンパック後に 
<tt>`scripts'</tt> ディレクトリ内に見つけられます。 「<a href="manual.ja_Questions.html#Bug_reports">2.3  バグや問題を報告する方法</a>」節参照.

</p>



<h3><a name="Quick_install" href="manual.ja_toc.html#Quick_install">4.7.1  素早いインストールの概要</a></h3>

<p>
<strong>MySQL</strong> をソースからインストールするために行なわなければならない
基本的なコマンド:

</p>

<pre>shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
shell&gt; gunzip &lt; mysql-VERSION.tar.gz | tar -xvf -
shell&gt; cd mysql-VERSION
shell&gt; ./configure --prefix=/usr/local/mysql
shell&gt; make
shell&gt; make install
shell&gt; scripts/mysql_install_db
shell&gt; chown -R root  /usr/local/mysql
shell&gt; chown -R mysql /usr/local/mysql/var
shell&gt; chgrp -R mysql /usr/local/mysql
shell&gt; /usr/local/mysql/bin/safe_mysqld --user=mysql &amp;
</pre>

<p>
RPM ソースから開始する場合は：

</p>

<pre>shell&gt; rpm --rebuild MySQL-VERSION.src.rpm
</pre>

<p>
これはインストールできるRPMバイナリを作成します

</p>
<p>
もし <code>DBI</code> と <code>Msql-Mysql-modules</code> Perl モジュールをインストールするなら、
<code>bin/mysql_setpermission</code> スクリプトが使用する新しいユーザーを
追加することができます。

</p>
<p>
次にさらに詳細な説明を行ないます:

</p>
<p>
ソース配布のインストールには、次のステップに従い、それから インストール
後の初期化とテストのために  「<a href="manual.ja_Installing.html#Post-installation">4.16  インストール後の設定とテスト</a>」節参照 に進んでください。

</p>

<ol>
<li>

配布をアンパックしたいディレクトリを選んで、そこに移ってください。

</li><li>

配布ファイルを  「<a href="manual.ja_Installing.html#Getting_MySQL">4.1  <strong>MySQL</strong> を得る方法</a>」節. にリストされたサイトの一つから得てください。

</li><li>

MySQL で Berkeley DB テーブルの使用に興味がある場合、Berkeley DB ソースコー
ドのパッチバージョンを入手する必要があります。処理の前に Berkeley DB テー
ブルの章を読んでください。 「<a href="manual.ja_Table_types.html#BDB">8.5  BDB or Berkeley_DB Tables</a>」節参照.

<strong>MySQL</strong> ソース配布は圧縮された <code>tar</code> アーカイブとして提供さ
れ、<tt>`mysql-VERSION.tar.gz'</tt> のような名前を持ちます。ここで 
<code>VERSION</code> は 3.23.38 のような番号です。

</li><li>

<code>mysqld</code> を実行するユーザーとグループを追加します:


<pre>shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
</pre>

これらのコマンドは <code>mysql</code> グループと <code>mysql</code> ユーザを追加します。
<code>useradd</code> と <code>groupadd</code> 構文は、別の UNIX 上では少し異なるでしょ
う。<code>adduser</code> と <code>addgroup</code> と呼ばれることもあります。ユーザとグ
ループは <code>mysql</code> の代わりに他の何かにすることもできます。

</li><li>

カレントディレクトリに配布をアンパックしてください:

<pre>shell&gt; gunzip &lt; /path/to/mysql-VERSION.tar.gz | tar xvf -
</pre>

このコマンドは <tt>`mysql-VERSION'</tt> という名前のディレクトリを作成します。

</li><li>

アンパックされた配布のトップレベルディレクトリに移ってください:


<pre>shell&gt; cd mysql-VERSION
</pre>

注意: 現在のこのトップレベルディレクトリで <strong>MySQL</strong> の configure と
build を行なう必要があります。別のディレクトリでは build できません。

</li><li>

リリースを configure し、全てをコンパイルしてください:


<pre>shell&gt; ./configure --prefix=/usr/local/mysql
shell&gt; make
</pre>

<code>configure</code> の実行時、いくつかのオプションを指定できます。オプショ
ンの一覧は <code>./configure --help</code> を実行してください。 「<a href="manual.ja_Installing.html#configure_options">4.7.3  典型的な configure オプション</a>」節, さらに有用なオプションのいくつかに
ついて議論しています。

<code>configure</code> が失敗して、援助を得るために <a href="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> にメー
ルを送ろうとする場合、<tt>`config.log'</tt> から問題の解決の手助けにできると
考えられる行を含めてください。<code>configure</code> が異常終了する場合、
<code>configure</code> からの出力の最後の数行も含めてください。バグレポートは 
<code>mysqlbug</code> スクリプトを使用して投稿してください。 「<a href="manual.ja_Questions.html#Bug_reports">2.3  バグや問題を報告する方法</a>」節参照。

コンパイルが失敗する場合、いくらかのよくある問題での手助けのため、
 「<a href="manual.ja_Installing.html#Compilation_problems">4.9  コンパイルの問題か？</a>」節 を参照してください。

</li><li>

全てをインストールしてください:


<pre>shell&gt; make install
</pre>

このコマンドは <code>root</code> として実行する必要があります。

</li><li>

<strong>MySQL</strong> 権限テーブルを生成してください(以前に <strong>MySQL</strong> をイ
ンストールしていない時にだけ必要です):


<pre>shell&gt; scripts/mysql_install_db
</pre>

注意: 3.22.10 より古い <strong>MySQL</strong> バージョンでは、
<code>mysql_install_db</code> 実行時に <strong>MySQL</strong> サーバが開始されましたが、
これはもはや真ではありません！

</li><li>

バイナリのオーナーを <code>root</code> に、
データディレクトリの所有権を <code>mysqld</code> を実行するユーザに変更し
てください:


<pre>shell&gt; chown -R root  /usr/local/mysql
shell&gt; chown -R mysql /usr/local/mysql/var
shell&gt; chgrp -R mysql /usr/local/mysql
</pre>

最初のコマンドはファイルの <code>owner</code> 属性を <code>root</code> ユーザーに変更し、
2番目のコマンドは <code>owner</code> を <code>mysql</code> ユーザに変更し、
3番目のコマンドは <code>group</code> 属性を <code>mysql</code> グループに変更します。

</li><li>

Perl <code>DBI</code>/<code>DBD</code> インタフェースのサポートをインストールしたい
場合、 「<a href="manual.ja_Installing.html#Perl_support">4.11  Perl のインストールについて</a>」節 を見てください。

</li><li>

<strong>MySQL</strong> をマシン起動時に自動的に開始したい場合、
<code>support-files/mysql.server</code> をシステムのスタートアップファイルがあ
る場所にコピーしてください。さらなる情報は 
<code>support-files/mysql.server</code> スクリプト自身の中と、
 「<a href="manual.ja_Installing.html#Automatic_start">4.16.3  <strong>MySQL</strong> の自動起動と自動停止</a>」節 に見つけられます。
</li></ol>

<p>
全てがインストールされた後、配布の初期化とテストを行なうべきです。

</p>

<pre>shell&gt; /usr/local/mysql/bin/safe_mysqld --user=mysql &amp;
</pre>

<p>
コマンドがすぐに <code>mysqld daemon ended</code> エラーで失敗する場合、
<tt>`mysql-data-directory/'hostname'.err'</tt> ファイルになんらかの情報を
見つけることができます。 よくあることとして、すでに他の <code>mysqld</code> が
走っている場合などがあります。  「<a href="manual.ja_Common_problems.html#Multiple_servers">22.3  同一マシン上に複数の <strong>MySQL</strong> サーバーを走らせる</a>」節参照.

</p>
<p>
 「<a href="manual.ja_Installing.html#Post-installation">4.16  インストール後の設定とテスト</a>」節参照。

</p>
<p>
<a name="IDX170"></a>
<a name="IDX171"></a>


</p><h3><a name="Applying_patches" href="manual.ja_toc.html#Applying_patches">4.7.2  パッチの適用</a></h3>

<p>
時々、パッチは、メーリング・リストに流されたり、または
<strong>MySQL</strong> FTPサイトの <a href="http://www.mysql.com/Downloads/Patches"> パッチエリア</a> に置かれます。

</p>
<p>
メーリング・リストからのパッチを適用するには、パッチが載っているメッセージを
ファイルに保存して、あなたの <strong>MySQL</strong> ソース・ツリーの
一番上のディレクトリーに移動し、以下のようにコマンドを実行します：

</p>

<pre>shell&gt; patch -p1 &lt; patch-file-name
shell&gt; rm config.cache
shell&gt; make clean
</pre>

<p>
FTPサイトに置かれるパッチは、プレーンテキストファイルとして、
あるいは <code>gzip</code> で圧縮されたファイルとして頒布されます。
プレーンテキストのパッチの場合は、上に示したメーリングリストの
パッチと同様に適用します。 圧縮されたパッチを適用するには、
 <strong>MySQL</strong> ソース・ツリーの
一番上のディレクトリーに移動し、以下のようにコマンドを実行します：

</p>

<pre>shell&gt; gunzip  &lt; patch-file-name.gz | patch -p1
shell&gt; rm config.cache
shell&gt; make clean
</pre>

<p>
それから通常のソースインストールの指示を <code>./configure</code> ステップから
始めます。<code>make install</code> ステップ実行後、あなたの <strong>MySQL</strong> サー
バを再起動します。

</p>
<p>
<code>make install</code> を実行する前に、現在走っているサーバーを止める必要があるかもしれません。
( <code>mysqladmin shutdown</code> で止めます ) 
いくつかのシステムでは、現在実行しているものを止めない限り、
新しいバージョンをインストールできないようになっています。

</p>

<p>
<a name="IDX172"></a>
<a name="IDX173"></a>
<a name="IDX174"></a>
<a name="IDX175"></a>
<a name="IDX176"></a>
<a name="IDX177"></a>


</p><h3><a name="configure_options" href="manual.ja_toc.html#configure_options">4.7.3  典型的な configure オプション</a></h3>

<p>
<code>configure</code> スクリプトは <strong>MySQL</strong> 配布をどのようにコンフィグ
するかを制御するための多くの処理を提供します。典型的には、
<code>configure</code> コマンドラインにオプションを使用してこれを行ないます。
いくつかの環境変数を使用しても <code>configure</code> に影響を与えることができ
ます。  「<a href="manual.ja_Environment_variables.html#Environment_variables">A  Environment Variables</a>」節参照.
 <code>configure</code> がサポートするオプションの一覧は、次のコマンドを
実行してください:

</p>

<pre>shell&gt; ./configure --help
</pre>

<p>
良く使われる <code>configure</code> オプションのいくつか以下に説明します:

</p>

<ul>
<li>

<strong>MySQL</strong> クライアントライブラリとクライアントプログラムだけをコン
パイルするには、<code>--without-server</code> オプションを使用してください:


<pre>shell&gt; ./configure --without-server
</pre>

C++ コンパイラがなければ、<code>mysql</code> はコンパイルできません(これは C++ 
を要求するクライアントプログラムの一つです)。この場合、<code>configure</code> 
から C++ コンパイラをテストするコードを削除でます。それから 
<code>./configure</code> を <code>--without-server</code> オプションつきで実行してく
ださい。コンパイルステップは <code>mysql</code> の作成を試みますが、
<tt>`mysql.cc'</tt> についての警告は無視できます。(<code>make</code> が止まる場合、
エラーが発生しても残りの作成を継続するように <code>make -k</code> を試してくだ
さい。)

</li><li>

ログファイルとデータベースディレクトリを <tt>`/usr/local/var'</tt> 配下にお
きたくない場合は、次の <code>configure</code> コマンドのうちのどれかを使用してく
ださい:

<pre>shell&gt; ./configure --prefix=/usr/local/mysql
shell&gt; ./configure --prefix=/usr/local \
           --localstatedir=/usr/local/mysql/data
</pre>

最初のコマンドはインストールプレフィックスを変更し、デフォルトの 
<tt>`/usr/local'</tt> ではなく <tt>`/usr/local/mysql'</tt> 配下にインストールし
ます。次のコマンドはデフォルトのインストールプレフィックスを保存しますが、
データベースディレクトリのデフォルト位置(通常は <tt>`/usr/local/var'</tt>)を
上書きし、<code>/usr/local/mysql/data</code> に変更します。

<a name="IDX178"></a>
<a name="IDX179"></a>
<a name="IDX180"></a>
</li><li>

UNIX を使用していて、ソケットの位置をデフォルト位置(通常は <tt>`/tmp'</tt> または 
<tt>`/var/run'</tt>)でなく他のどこかにしたい場合は、<code>configure</code> コマン
ドを次のように使用します:


<pre>shell&gt; ./configure --with-unix-socket-path=/usr/local/mysql/tmp/mysql.sock
</pre>

ファイル名は絶対パスでなければなりません！
<a name="IDX181"></a>

<a name="IDX182"></a>
<a name="IDX183"></a>
</li><li>

静的リンクされたプログラムをコンパイルしたい場合(例えば、バイナリ配布を
作成するため、もっと速くするため、いくつかの RedHat 配布での問題を回避す
るため)は、次のように <code>configure</code> を実行します:


<pre>shell&gt; ./configure --with-client-ldflags=-all-static \
           --with-mysqld-ldflags=-all-static
</pre>

<a name="IDX184"></a>

<a name="IDX185"></a>
<a name="IDX186"></a>
<a name="IDX187"></a>
<a name="IDX188"></a>
<a name="IDX189"></a>
<a name="IDX190"></a>
<a name="IDX191"></a>
</li><li>

<code>gcc</code> を使用していて、<code>libg++</code> や <code>libstdc++</code> がインストー
ルされていない場合、<code>configure</code> に <code>gcc</code> を C++ コンパイラとし
て使用することを伝えてください:

<a name="IDX192"></a>
<a name="IDX193"></a>
<a name="IDX194"></a>
<a name="IDX195"></a>

<pre>shell&gt; CC=gcc CXX=gcc ./configure
</pre>

<a name="IDX196"></a>
<a name="IDX197"></a>
<a name="IDX198"></a>

<code>gcc</code> を C++ コンパイラとして使用する時、<code>libg++</code> または 
<code>libstdc++</code> のリンクは試みません。

あなたが使用しているコンパイラによって、設定するいくつかの標準的な環境変数
があります:

<a name="IDX199"></a>
<a name="IDX200"></a>
<table border="" width="100%" nosave="">
<tbody><tr><td>gcc 2.7.2.1 </td><td>
CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors"
</td></tr>
<tr><td>egcs 1.0.3a </td><td>
CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti"
</td></tr>
<tr><td>gcc 2.95.2 </td><td>
CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro -felide-constructors -fno-exceptions -fno-rtti"
</td></tr>
<tr><td>pgcc 2.90.29 or newer </td><td>
CFLAGS="-O3 -mpentiumpro -mstack-align-double" CXX=gcc CXXFLAGS="-O3 -mpentiumpro -mstack-align-double -felide-constructors -fno-exceptions -fno-rtti"
</td></tr>
</tbody></table>

多くの場合、上述のオプションと次の configure 行オプションの使用によって、
最適な <strong>MySQL</strong> バイナリを得ることができます:


<pre>--prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static
</pre>

言い換えれば、すべての最近の gcc バージョン用には、完全な configure 行は次
のようなものになります:


<pre>CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static
</pre>

我々が <strong>MySQL</strong> Web サイト <a href="http://www.mysql.com">http://www.mysql.com</a> 上で提供して
いるバイナリは、完全に最適化されてコンパイルされ、多くのユーザに完全です。
 「<a href="manual.ja_Installing.html#MySQL_binaries">4.15  MySQL Binaries</a>」節参照。さらに速いバイナリを作成するために調整できることが
いくつかありますが、これは上級ユーザ向けです。 「<a href="manual.ja_Performance.html#Compile_and_link_options">13.2.1  MySQL の速度に影響するコンパイルとリンク方法</a>」節参照。

コンパイラやリンカが共有ライブラリ <tt>`libmysqlclient.so.#'</tt> を生成でき
ないというエラーになる場合、<code>--disable-shared</code> オプションを 
<code>configure</code> に与えることで、この問題を回避できます。この場合、
<code>configure</code> は共有ライブラリ <code>libmysqlclient.so.#</code> を作成しま
せん。

<a name="IDX201"></a>
<a name="IDX202"></a>
</li><li>

非 <code>NULL</code> 項目(すなわち、<code>NULL</code> が許されていない項目)に 
<code>DEFAULT</code> 項目値を使用しないように <strong>MySQL</strong> をコンフィグでき
ます。これは、非 <code>NULL</code> 値を要求する全ての項目に値を明示的に指定し
なければ、<code>INSERT</code> ステートメントはエラーを生成します。デフォルト値
の使用を抑えるには、次のように <code>configure</code> を実行します:

<a name="IDX203"></a>
<a name="IDX204"></a>

<pre>shell&gt; CXXFLAGS=-DDONT_USE_DEFAULT_FIELDS ./configure
</pre>

<a name="IDX205"></a>
<a name="IDX206"></a>
</li><li>

デフォルトでは、<strong>MySQL</strong> は ISO-8859-1 (Latin1) 文字セットを使用し
ます。デフォルトセットを変更するには、<code>--with-charset</code> オプションを
使用します:

<pre>shell&gt; ./configure --with-charset=CHARSET
</pre>

<code>CHARSET</code> は次の一つです: <code>big5</code>, <code>cp1251</code>, <code>cp1257</code>,
<code>czech</code>, <code>danish</code>, <code>dec8</code>, <code>dos</code>, <code>euc_kr</code>,
<code>gb2312</code>, <code>gbk</code>, <code>german1</code>, <code>hebrew</code>, <code>hp8</code>,
<code>hungarian</code>, <code>koi8_ru</code>, <code>koi8_ukr</code>, <code>latin1</code>,
<code>latin2</code>, <code>sjis</code>, <code>swe7</code>, <code>tis620</code>, <code>ujis</code>,
<code>usa7</code>, or <code>win1251ukr</code>.
 「<a href="manual.ja_Server.html#Character_sets">10.1.1  データとソートに使用されるキャラクターセット</a>」節参照.

注意: 文字セットを変更したい場合は、コンフィグレーション間で <code>make
distclean</code> を行なう必要があります！ (3.23.14 以前の場合)

サーバとクライアント間で文字を変換したい場合は、
<code>SET OPTION CHARACTER SET</code> コマンドを調べるべきです。
 「<a href="manual.ja_Reference.html#SET_OPTION">7.33  <code>SET</code> 構文</a>」節参照.

<a name="IDX207"></a>
<strong>警告:</strong> テーブルを生成した後に文字セットを変更する場合、
<code>myisamchk -r -q</code> を全てのテーブルに実行する必要があります。そうでな
いと、インデックスは正しくソートされません。(これは、<strong>MySQL</strong> のイ
ンストール時、いくつかのテーブルの生成時、異なる文字セットを使用して 
<strong>MySQL</strong> の再コンフィグ時、そして再インストール時に発生します。)

</li><li>

デバッグコードつきで <strong>MySQL</strong> をコンフィグするには、
<code>--with-debug</code> オプションを使用します:

<pre>shell&gt; ./configure --with-debug
</pre>

これにより、いくつかのエラーを見つけられる安全なメモリ割り当てが含まれ、
何が発生しているかについての出力を提供します。
 「<a href="manual.ja_Porting.html#Debugging_server">I.1  MySQL server のデバッグ</a>」節参照.

</li><li>

あなたのクライアントプログラムがスレッドを使用している場合、
<strong>MySQL</strong> クライアントライブラリを 
<code>--with-thread-safe-client</code> configure オプションでスレッド安全用に
コンパイルする必要があります。これは、スレッドアプリケーションがリンクす
べき <code>libmysqlclient_r</code> ライブラリを生成します。
 「<a href="manual.ja_Clients.html#Thread-safe_clients">24.1.5  スレッド安全クライアントを作る方法</a>」節参照。

</li><li>

固有のシステムに関係するオプションについては、この章より後のシステム固有
の節で見つけることができます。 「<a href="manual.ja_Installing.html#Source_install_system_issues">4.12  System-specific Issues</a>」節参照。
</li></ul>



<h2><a name="Installing_source_tree" href="manual.ja_toc.html#Installing_source_tree">4.8  開発ソースツリーからのインストール</a></h2>
<p>
 
<a name="IDX208"></a>
<a name="IDX209"></a>
<a name="IDX210"></a>

</p>
<p>
<strong>警告:</strong> 我々の新しいテストコードについて我々を手助けすることに興味
がある場合にだけ、この節を読むべきです。<strong>MySQL</strong> を得て、あなたのシ
ステム上で実行したいだけの場合は、ソースディストリビューションかバイナリディ
ストリビューションのどちらかを使用すべきです。

</p>
<p>
以下は、我々のもっとも新しい開発ソースツリーを得る手順です:

</p>

<ol>
<li>

Download <strong>BitKeeper</strong> from
<a href="http://www.bitmover.com/cgi-bin/download.cgi">http://www.bitmover.com/cgi-bin/download.cgi</a>.  You will need
<strong>Bitkeeper</strong> 2.0 or newer to access our repository.

</li><li>

Follow the instructions to install it.

</li><li>

Once <strong>BitKeeper</strong> is installed, if you want to clone 3.23 branch,
<code>bk clone bk://work.mysql.com:7000 mysql</code>, and
<code>bk clone bk://work.mysql.com:7001 mysql-4.0</code> for 4.0 branch.

The initial download may take a while, depending on the speed of your
connection.

</li><li>

You will need GNU autoconf, automake, libtool, and m4 to do the next stage.
If you get some strange error during the first stage, check that you really
have libtool installed!


<pre>cd mysql
bk -r edit
aclocal; autoheader; autoconf;  automake;
./configure  # Add your favorite options here
make
</pre>

We have a collection of our standard configure scripts in the <tt>`BUILD/'</tt> 
subdirectory.  If you are lazy, you can use
<tt>`BUILD/compile-pentium-debug'</tt>.  It will actually work on a lot of
non-x86 machines despite its name.

</li><li>

Once the build is done, <code>make install</code>.  Be careful with this on
a production machine - this may overwrite your live release binary.  We
recommend that if you have another installation of <strong>MySQL</strong> that
you <code>./configure</code> with different values for <code>prefix</code>,
<code>tcp-port</code>, and <code>unix-socket-path</code>.

</li><li>

Play hard with your new installation and try to make the new features
crash.  Start by running <code>make test</code>.   「<a href="manual.ja_MySQL_internals.html#MySQL_test_suite">26.2  MySQL Test Suite</a>」節参照.

</li><li>

If you have gotten to the <code>make</code> stage and it does not compile,
please report it to <a href="mailto:bugs@lists.mysql.com">bugs@lists.mysql.com</a>.  If you have
installed the latest version of the required GNU tools, and they crash
trying to process our configuration files, please report it also.  However,
if you execute <code>aclocal</code> and get <code>command not found</code>, or a
similar problem, do not report it, make sure all the needed tools are
installed and your <code>PATH</code> variable is set correctly.

</li><li>

After the initial <code>bk clone</code>, do <code>bk pull</code> to get the updates.

</li><li>

You can examine change history of the tree with all the diffs with
<code>bk sccstool</code>.  If you see some funny diffs or code that you have a
question about, do not hesitate and e-mail <a href="mailto:internals@lists.mysql.com">internals@lists.mysql.com</a>.
Also if you think you have a better idea on how to do something, send an email
to the same place with a patch. <code>bk diffs</code> will produce a patch for you
after you have made changes to the source. If you do not have the time to code
your idea, just send a description.

</li><li>

<strong>BitKeeper</strong> has a nice help utility that you can access via
<code>bk helptool</code>.

</li></ol>

<p>
<a name="IDX211"></a>
<a name="IDX212"></a>
<a name="IDX213"></a>
<a name="IDX214"></a>
<a name="IDX215"></a>


</p><h2><a name="Compilation_problems" href="manual.ja_toc.html#Compilation_problems">4.9  コンパイルの問題か？</a></h2>

<p>
Solaris 上で <code>gcc</code> を使用した場合、一切警告無く全ての <strong>MySQL</strong> プログラムがきれいに作れます。
他のシステムではインクルードファイルの違いから警告が出るかもしれません。
 MIT-pthreads を使用した際の警告は  「<a href="manual.ja_Installing.html#MIT-pthreads">4.10  MIT-pthreads に関して</a>」節 を参照してください。
他の問題は、以下をチェックしてください。

</p>
<p>
多くの問題の解決のために、再 configure が必要です。
あなたが再構成する必要があるならば、以下に気をつけてください：

</p>
<p>
<a name="IDX216"></a>
<a name="IDX217"></a>
<a name="IDX218"></a>
<a name="IDX219"></a>

</p><ul>
<li>

もし <code>configure</code> を一度実行した後に実行するならば、 <code>configure</code> は
前に作った情報を利用します。この情報は <tt>`config.cache'</tt> に保存されます。
 <code>configure</code> は起動時にこのファイルを探し、もし存在するならば、
その中の情報が正しい物として読み込みます。
これはあなたが再コンフィグするならば無効になります。

</li><li>

<code>configure</code> を実行するごとに、 <code>make</code> を実行してコンパイルしなければなりません。
しかし、最初に、前のビルドでできたオブジェクトを、消しておいてください。
なぜなら、違うコンフィグオプションにより生成されたからです。
</li></ul>

<p>
古いコンフィグやオブジェクトファイルの使用を防ぐため、
 <code>configure</code> 前に以下のコマンドを実行してください：

</p>

<pre>shell&gt; rm config.cache
shell&gt; make clean
</pre>

<p>
こうするかわりに、<code>make distclean</code> としても構いません。

</p>
<p>
以下に、 <strong>MySQL</strong> をコンパイルする際に起こりやすい問題をあげておきます：

</p>

<ul>
<li>

<a name="IDX220"></a>
<a name="IDX221"></a>
<a name="IDX222"></a>
<a name="IDX223"></a>
<a name="IDX224"></a>
<a name="IDX225"></a>
<tt>`sql_yacc.cc'</tt> コンパイル時に、以下のようなエラーが出た場合、
メモリー、スワップが足りません：


<pre>Internal compiler error: program cc1plus got fatal signal 11
  か
Out of virtual memory
  か
Virtual memory exhausted
</pre>

この問題は、<code>gcc</code> がインライン展開で <tt>`sql_yacc.cc'</tt> をコンパイルするのに、
とても多くのメモリーを必要とするからです。
この場合、 <code>configure</code> を <code>--with-low-memory</code> オプション指定で実行します：


<pre>shell&gt; ./configure --with-low-memory
</pre>

このオプションは、 <code>gcc</code> を使用しているなら <code>-fno-inline</code> オプションを
コマンドラインに加え、<code>gcc</code> 以外ならば <code>-O0</code> を加えます。
多くのメモリーとスワップを持っていない限りは、<code>--with-low-memory</code>
オプションを使用すべきです。
この問題はけっこうなハードウェア構成でも起こることが知られています。
通常、 <code>--with-low-memory</code> オプションでこの問題は解決できます。

</li><li>

標準では、<code>configure</code> は <code>c++</code> という名前でコンパイラーを使用し、
GNU <code>c++</code> は <code>-lg++</code> を使ってリンクします。
もし <code>gcc</code> を使用しているならば、コンフィグ時に以下のような問題が出るかもしれません：

<a name="IDX226"></a>

<pre>configure: error: installation or configuration problem:
C++ compiler cannot create executables.
</pre>

<a name="IDX227"></a>
<a name="IDX228"></a>
この問題は、<code>g++</code>, <code>libg++</code> あるいは <code>libstdc++</code> に関連したものです。

原因の一つとして考えられることは、 <code>g++</code> を持っていないか、あるいは、
<code>g++</code> はあっても <code>libg++</code> か <code>libstdc++</code> がないという事です。
<tt>`config.log'</tt> ファイルは c++ コンパイラが動作しなかった理由を記録しています！
この問題を解決するに当たり、あなたが持っている C++ コンパイラーの代わりに
 <code>gcc</code> を使用しても構いません。<code>CXX</code> 環境変数に <code>"gcc -O3"</code> としてみてください。
例えば：

<a name="IDX229"></a>
<a name="IDX230"></a>

<pre>shell&gt; CXX="gcc -O3" ./configure
</pre>

これは <code>gcc</code> が <code>g++</code> と同様に C++ ソースをコンパイルするので動きますが、
<code>libg++</code> か <code>libstdc++</code> が標準ではリンクされません。

他の解決方法は、もちろん、<code>g++</code>, <code>libg++</code>, <code>libstdc++</code> をインストールすることです。

</li><li>

もし以下のエラーのどれかが起きた場合、 GNU <code>make</code> のバージョンを上げてください：


<pre>making all in mit-pthreads
make: Fatal error in reader: Makefile, line 18:
Badly formed macro assignment
  or
make: file `Makefile' line 18: Must be a separator (:
  or
pthread.h: No such file or directory
</pre>

<a name="IDX231"></a>
<a name="IDX232"></a>
<a name="IDX233"></a>
<a name="IDX234"></a>
Solaris と FreeBSD の <code>make</code> プログラムには問題があることが知られています。

GNU <code>make</code> Version 3.75 は動作確認されています。

<a name="IDX235"></a>
<a name="IDX236"></a>
<a name="IDX237"></a>
<a name="IDX238"></a>
<a name="IDX239"></a>
<a name="IDX240"></a>
<a name="IDX241"></a>
<a name="IDX242"></a>
</li><li>

もし C,C++ のためにフラグを与えたい場合、<code>CFLAGS</code> と <code>CXXFLAGS</code> 環境変数に
フラグを追加してください。同様に、 <code>CC</code> と <code>CXX</code> にコンパイラー名を
与えることもできます。
例えば：


<pre>shell&gt; CC=gcc
shell&gt; CFLAGS=-O3
shell&gt; CXX=gcc
shell&gt; CXXFLAGS=-O3
shell&gt; export CC CFLAGS CXX CXXFLAGS
</pre>

 「<a href="manual.ja_Installing.html#MySQL_binaries">4.15  MySQL Binaries</a>」節 にはフラグの定義がリストされています。
色々なシステム上で役に立つと思います。

</li><li>

以下のようなエラーの場合、<code>gcc</code> コンパイラーをアップグレードしてください：


<pre>client/libmysql.c:273: parse error before `__attribute__'
</pre>

<code>gcc</code> 2.8.1 は動作することが確認されていますが、
<code>gcc</code> 2.95.2 以上をお勧めします。

</li><li>

<code>mysqld</code> コンパイル時に以下のようなエラーが出た場合、
<code>configure</code> が <code>accept()</code>, <code>getsockname()</code>, <code>getpeername()</code>
の最後の引数を正しく検出していません：


<pre>cxx: Error: mysqld.cc, line 645: In this statement, the referenced
     type of the pointer value "&amp;length" is "unsigned long", which
     is not compatible with "int".
new_sock = accept(sock, (struct sockaddr *)&amp;cAddr, &amp;length);
</pre>

これを修正するには、<tt>`config.h'</tt> ファイル(<code>configure</code> により作られる) を修正します。
いかのように：


<pre>/* Define as the base type of the last arg to accept */
#define SOCKET_SIZE_TYPE XXX
</pre>

<code>XXX</code> を <code>size_t</code> か <code>int</code> (あなたのオペレーティングシステムが依存している型)に変えます。
(<code>configure</code> すると毎回 <tt>`config.h'</tt> は作り直されるので、
この修正は <code>configure</code> する度に行わなければならないことに注意)

</li><li>

<tt>`sql_yacc.cc'</tt> ファイルは <tt>`sql_yacc.yy'</tt> から生成されます。
通常、
<strong>MySQL</strong> が既に生成されたコピーとともにあるので、
<tt>`sql_yacc.cc'</tt> ファイルを自分自身で作成することはありません。
しかし、以下のエラーの場合、再作成する必要があります：


<pre>"sql_yacc.yy", line xxx fatal: default action causes potential...
</pre>

これはあなたの <code>yacc</code> のバージョンが不十分であることを示しています。
<code>bison</code> (GNU 版 <code>yacc</code>) を代わりにインストールして使用する必要があります。

</li><li>

もし <code>mysqld</code> か <strong>MySQL</strong> クライアントをデバッグしたいなら、
<code>configure</code> を <code>--with-debug</code> オプション付きで実行します。
そしてコンパイルし、新しいクライアントライブラリーでクライアントをリンクします。
 「<a href="manual.ja_Porting.html#Debugging_client">I.2  Debugging a MySQL client</a>」節参照.
</li></ul>

<p>
<a name="IDX243"></a>
<a name="IDX244"></a>


</p><h2><a name="MIT-pthreads" href="manual.ja_toc.html#MIT-pthreads">4.10  MIT-pthreads に関して</a></h2>

<p>
このセクションではMIT-pthreadsを使っているさいに起こる問題についていくつか述べて
います。

</p>
<p>
Linux では、MIT-pthreads を使用してはならず、
LinuxThreads をインストールするべきです！
 「<a href="manual.ja_Installing.html#Linux">4.12.5  Linux Notes (All Linux Versions)</a>」節参照.

</p>
<p>
もしあなたのシステムが本来のスレッドのサポートを提供しなければ、あなたは、
MIT-pthreadsパッケージを使って、<strong>MySQL</strong> を構築する必要があります。
これにはほとんどのFreeBSDシステム、SunOS4.x,Solaris 2.4とそれ以前、ほかいくつか
が含まれます。
 「<a href="manual.ja_Installing.html#Which_OS">4.2  <strong>MySQL</strong> がサポートする OS</a>」節参照.

</p>

<ul>
<li>

ほとんどのシステム上では <code>--with-mit-threads</code> オプションで
<code>configure</code> 実行することによって、
MIT-pthreadsが使われることを強制することができます。


<pre>shell&gt; ./configure --with-mit-threads
</pre>

MIT-pthreadsを使う時、非ソースディレクトリで構築することはサポートされていませ
ん。なぜなら、私たちはこのコードへ私たちの変更を最小にしたいからです。

</li><li>

MIT-pthreads が使われているかどうかチェックはサーバコードを configure するときに
だけ行われます。もし、あなたが <code>--without-server</code> を使ってクライアントコードのみを
ビルドすることを設定したならば、クライアントは MIT-othreads が使われているかいないか、
UNIXソケット接続がデフォルトで使われているのかわかりません。なぜなら UNIX ソケットは
MIT-pthreads 下では動作しないからです。また、あなたはそのようなインスタンスでは
 <code>-h</code> または  <code>--host</code> を使う必要があります。

</li><li>

 <strong>MySQL</strong> が MIT-pthreads を使ってコンパイルされると、パフォーマンス上の問題のた
めシステムロックはデフォルトでディスエーブルとされます。  <code>--use-locking</code> オプション
を指定してサーバーに伝えることで、システムロックは使えるようになります。

</li><li>

ときどき(少なくともSolarisでは) pthread の <code>bind()</code> コマンドは何のエラーメッセージ
なしにソケットへの bind に失敗することがあります。これは結果としてサーバーへの接続
失敗となります。たとえば、


<pre>shell&gt; mysqladmin version
mysqladmin: connect to server at '' failed;
error: 'Can't connect to mysql server on localhost (146)'
</pre>

これを解決するために <code>mysqld</code> サーバーを終了して、再起動してください。こ
れは私たちがサーバーダウンを強制して、すぐにリスタートさせようとしたときだけ起こ
りました。

</li><li>

MIT-pthreads を使っていると、<code>sleep()</code> システムコールは <code>SIGINT</code> (break) 
では割り込みできません。 これは　<code>mysqladmin --sleep</code> を走らせているときにだけ
起こることがわかっています。
割り込みが発生してプロセスが停止する前に、あなたは終了させるための <code>sleep()</code> コールを待たなく
てはなりません。

</li><li>

リンクしているとき(少なくともSolarisでは)、あなたはこのような warning メッセージ
を受け取るでしょう。これらは無視してかまいません。


<pre>ld: warning: symbol `_iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
ld: warning: symbol `__iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
</pre>

</li><li>

他のいくつかの warnings もまた無視してかまいません。


<pre>implicit declaration of function `int strtoll(...)'
implicit declaration of function `int strtoul(...)'
</pre>

</li><li>

私たちはまだ MIT-pthread とともに動く <code>readline</code> を手に入れていません(これは必要では
ないのですが、おそらく誰かには興味があるでしょう)。
</li></ul>

<p>
<a name="IDX245"></a>
<a name="IDX246"></a>


</p><h2><a name="Perl_support" href="manual.ja_toc.html#Perl_support">4.11  Perl のインストールについて</a></h2>



<h3><a name="Perl_installation" href="manual.ja_toc.html#Perl_installation">4.11.1  UNIX への Perl のインストール</a></h3>

<p>
<strong>MySQL</strong> は Perl <code>DBI</code>/<code>DBD</code> インターフェースをサポートします。 「<a href="manual.ja_Clients.html#Perl">24.2  <strong>MySQL</strong> Perl API</a>」節参照. 
<code>DBI</code>/<code>DBD</code> インターフェースの Perl のクライアントは、Perl バージョン 5.004 以上が必要です。
これより古いバージョンの Perl ですと<strong>動きません</strong>。

</p>
<p>
<strong>MySQL</strong> Perl は、 <strong>MySQL</strong> クライアント・プログラミング・サポートが
既にインストールされていることが条件です。 
もしあなたが RPM ファイルから <strong>MySQL</strong> をインストールしたのなら、
クライアント・プログラムは、クライアント RPM にあります。 が、
クライアント・プログラミング・サポートは、開発者向け RPM にあります。 
開発者向け RPM をインストールしたことを確かめて下さい。 

</p>
<p>
これらは バージョン 3.22.8 から <strong>MySQL</strong> 配布とは分けられて配布されています。
もし Perl モジュールをインストールしたいなら、
<a href="http://www.mysql.com/Downloads/Contrib">http://www.mysql.com/Downloads/Contrib</a> を確認してください。ここにおかれています。

</p>
<p>
Perl の配布物は <code>tar</code> でアーカイブされ、圧縮されています。
<tt>`MODULE-VERSION.tar.gz'</tt> という命名規則で配布されています。
(<code>MODULE</code> はモジュール名、<code>VERSION</code> はバージョン番号)

</p>
<p>
<code>Data-Dumper</code>, <code>DBI</code>, <code>Msql-Mysql-modules</code> が必要です。
これを取ってきたら、以下のようにしてインストールします。
<code>Data-Dumper</code> モジュールを例にしますが、他も同様にできます。

</p>

<ol>
<li>

配布物をカレントディレクトリに展開：

<pre>shell&gt; gunzip &lt; Data-Dumper-VERSION.tar.gz | tar xvf -
</pre>

これは <tt>`Data-Dumper-VERSION'</tt> というディレクトリを作ります。

</li><li>

展開したディレクトリに入ります：

<pre>shell&gt; cd Data-Dumper-VERSION
</pre>

</li><li>

コンパイル、インストール：

<pre>shell&gt; perl Makefile.PL
shell&gt; make
shell&gt; make test
shell&gt; make install
</pre>

</li></ol>

<p>
モジュールが動作するかを確かめるので <code>make test</code> コマンドは重要です。
インターフェースコードのテストのために <code>Msql-Mysql-modules</code> の
インストール中にこれらのコマンドを実行する際には、
<strong>MySQL</strong> サーバーが稼働していなければなりません。
でなければ、テストは失敗します。

</p>
<p>
新しいリリースの <strong>MySQL</strong> をインストールした場合に常に
 <code>Msql-Mysql-modules</code> を再構築、再インストールすることは
いい考えです。すべての <code>DBI</code> スクリプトが <strong>MySQL</strong> の
アップグレード後にコアダンプする兆候に気づいた場合は、特に
そうしてください。

</p>
<p>
もし Perl module を正しくシステムディレクトリーやローカルのPerlディレクトリ
にインストールできない場合、以下の文献が役立ちます：

</p>

<pre><a href="http://www.iserver.com/support/contrib/perl5/modules.html">http://www.iserver.com/support/contrib/perl5/modules.html</a>
</pre>

<p>
このページの以下を参照してください：
<code>Installing New Modules that Require Locally Installed Modules</code>.

</p>



<h3><a name="ActiveState_Perl" href="manual.ja_toc.html#ActiveState_Perl">4.11.2  Windows への ActiveState Perl のインストール</a></h3>
<p>
<a name="IDX247"></a>
<a name="IDX248"></a>
<a name="IDX249"></a>

</p>
<p>
Windows 上に、 ActiveState Perl に <strong>MySQL</strong> <code>DBD</code> モジュールを
インストールするには、以下のようにしなくてはなりません：

</p>

<ul>
<li>

Get ActiveState Perl from 
<a href="http://www.activestate.com/Products/ActivePerl/index.html">http://www.activestate.com/Products/ActivePerl/index.html</a>
and install it.

</li><li>

Open a DOS shell.

</li><li>

</li><li>もし必要なら、HTTP_proxy 変数をセット。 例えば


<pre>set HTTP_proxy=my.proxy.com:3128
</pre>

</li><li>

PPM プログラムの起動：


<pre>C:\&gt; c:\perl\bin\ppm.pl
</pre>

</li><li>

<code>DBI</code> のインストール(もし入っていなければ)：


<pre>ppm&gt; install DBI
</pre>

</li><li>

この成功後に、以下のコマンドを実行：


<pre>install ftp://ftp.de.uu.net/pub/CPAN/authors/id/JWIED/DBD-mysql-1.2212.x86.ppd
</pre>

</li></ul>

<p>
上記は少なくとも ActiveState Perl Version 5.6 で動作します。

</p>
<p>
もし上記のように出来なければ、代わりに <strong>MyODBC</strong> ドライバーを入れ、
 <strong>MySQL</strong> サーバーに ODBC 経由で接続しなくてはなりません。

</p>

<pre>use DBI;
$dbh= DBI-&gt;connect("DBI:ODBC:$dsn","$user","$password") || 
  die "Got error $DBI::errstr when connecting to $dsn\n";
</pre>



<h3><a name="Windows_Perl" href="manual.ja_toc.html#Windows_Perl">4.11.3  Windows への <strong>MySQL</strong> Perl 配布物のインストール</a></h3>

<p>
<strong>MySQL</strong> Perl 配布は <code>DBI</code>,
<code>DBD:MySQL</code> , <code>DBD:ODBC</code> を含みます。

</p>

<ul>
<li>

<a href="http://www.mysql.com/download.html">http://www.mysql.com/download.html</a> から  Perl distribution for Windows を取得。

</li><li>

<code>C:</code> で unzip します。 <tt>`C:\PERL'</tt> ができます。

</li><li>

あなたのパスに <tt>`C:\PERL\BIN'</tt> を加えます。

</li><li>

 あなたのパスに <tt>`C:\PERL\BIN\MSWin32-x86-thread'</tt> か
<tt>`C:\PERL\BIN\MSWIN32-x86'</tt> を加えます。

</li><li>

DOS shell で、 <code>perl -v</code> を実行して <code>perl</code> をテストします。
</li></ul>

<p>
<a name="IDX250"></a>
<a name="IDX251"></a>


</p><h3><a name="Perl_support_problems" href="manual.ja_toc.html#Perl_support_problems">4.11.4  Perl <code>DBI</code>/<code>DBD</code> 使用時の問題</a></h3>

<p>
もし Perl が <code>../mysql/mysql.so</code> モジュールが見つからないとメッセージを出した場合、
シェアードライブラリ <tt>`libmysqlclient.so'</tt> を取りこめなかったと考えられます。

</p>
<p>
以下のような方法で解決方法があります：

</p>

<ul>
<li>

<code>Msql-Mysql-modules</code> のコンパイルでは、
<code>perl Makefile.PL</code> のかわりに
<code>perl Makefile.PL -static -config</code> とします。

</li><li>

<code>libmysqlclient.so</code> を他のシェアードライブラリがあるところ(<tt>`/usr/lib'</tt> とか <tt>`/lib'</tt>)にコピーします。

</li><li>

<code>Linux</code> の場合、<tt>`/etc/ld.so.conf'</tt> ファイルに、<code>libmysqlclient.so</code>
 があるディレクトリを書き加え、<code>ldconfig -v</code> を実行します。

</li><li>

<a name="IDX252"></a>
<a name="IDX253"></a>
<code>LD_RUN_PATH</code> (<code>LD_LIBRARY_PATH</code>) 環境変数に <code>libmysqlclient.so</code>
 があるディレクトリを書き加えます。
</li></ul>

<p>
もし <code>DBD-mysql</code> で以下のエラーが出た場合、
<code>gcc</code> (あるいは、<code>gcc</code> でコンパイルされた古いバイナリ) を使用していると
思われます：

</p>

<pre>/usr/bin/perl: can't resolve symbol '__moddi3'
/usr/bin/perl: can't resolve symbol '__divdi3'
</pre>

<p>
<tt>`mysql.so'</tt> を作成する時のリンクコマンドに
 <code>-L/usr/lib/gcc-lib/... -lgcc</code> を追加してください。
(Perlクライアントを作る際の <code>make</code> の出力をチェックしてください)
<code>-L</code> オプションに指定するのは、あなたのシステム内の <tt>`libgcc.a'</tt> があるディレクトリです。

</p>
<p>
Perl と <strong>MySQL</strong> が <code>gcc</code> を使用して作られていない場合も原因としてあります。
この場合、両方を <code>gcc</code> でコンパイルすることにより、ミスマッチを避けることができます。

</p>
<p>
テスト実行時に、<code>Msql-Mysql-modules</code> から次のようなエラーが出る場合:

</p>

<pre>t/00base............install_driver(mysql) failed: Can't load '../blib/arch/auto/DBD/mysql/mysql.so' for module DBD::mysql: ../blib/arch/auto/DBD/mysql/mysql.so: undefined symbol: uncompress at /usr/lib/perl5/5.00503/i586-linux/DynaLoader.pm line 169.
</pre>

<p>
圧縮ライブラリ -lz をリンク行に含める必要があることを意味します。これは
Msql-Mysql-modules ディレクトリ内の <tt>`lib/DBD/mysql/Install.pm'</tt> ファイルの
行を変更することで可能です:

</p>

<pre>$sysliblist .= " -lm";
  ↓
$sysliblist .= " -lm -lz";
</pre>

<p>
この後、'make realclean' を実行して、最初からインストールを続ける必要が
あります。

</p>
<p>
ダイナミックリンクをサポートしていないシステム(like SCO)でPerlモジュールを使用したい場合、
<code>DBI</code> と <code>DBD-mysql</code> を含むスタティックのPerlを作る事もできます。
これは、まず、 <code>DBI</code> コードがリンクされているPerlを作って現在のPerlの上にインストールします。
そして、 <code>DBD</code> コードをさらにリンクさせるPerlを作り、それをインストールします。

</p>
<p>
SCOでは、環境変数を以下のようにしなくてはなりません：

</p>

<pre>shell&gt; LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib:/usr/progressive/lib
or
shell&gt; LD_LIBRARY_PATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:/usr/progressive/lib:/usr/skunk/lib
shell&gt; LIBPATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:/usr/progressive/lib:/usr/skunk/lib
shell&gt; MANPATH=scohelp:/usr/man:/usr/local1/man:/usr/local/man:/usr/skunk/man:
</pre>

<p>
最初、<code>DBI</code> をスタティックリンクしたPerlを作るために、
 <tt>`perl/DBI'</tt> ディレクトリで以下のように実行します：

</p>

<pre>shell&gt; perl Makefile.PL -static -config
shell&gt; make
shell&gt; make install
shell&gt; make perl
</pre>

<p>
この後、あなたは新しいPerlをインストールしなければなりません。
<code>make perl</code> をすると、インストール操作に実行するに必要な <code>make</code> コマンドを
表示します。
SCOでは、<code>make -f Makefile.aperl inst_perl MAP_TARGET=perl</code> とします。

</p>
<p>
次に、<code>DBD::mysql</code> をスタティックリンクしたPerlを作るために、
 <tt>`perl/Mysql-modules'</tt> ディレクトリで以下のように実行します：

</p>

<pre>shell&gt; perl Makefile.PL -static -config
shell&gt; make
shell&gt; make install
shell&gt; make perl
</pre>

<p>
これも新しいPerlをインストールしなくてはなりません。
<code>make perl</code> の出力は使用するコマンドを示します。

</p>


<h2><a name="Source_install_system_issues" href="manual.ja_toc.html#Source_install_system_issues">4.12  System-specific Issues</a></h2>

<p>
以下のセクションは、ソース配布から <strong>MySQL</strong> をインストールする際に
特定のシステム上に起こると認められた問題のいくつかを示します.

</p>

<p>
<a name="IDX254"></a>
<a name="IDX255"></a>
<a name="IDX256"></a>
<a name="IDX257"></a>
<a name="IDX258"></a>


</p><h3><a name="Solaris" href="manual.ja_toc.html#Solaris">4.12.1  Solaris Notes</a></h3>

<p>
Solaris では <strong>MySQL</strong> ソースを展開するときトラブルが出るでしょう！
Solaris の <code>tar</code> は長い名前を扱えず、 <strong>MySQL</strong> を展開する場合、
以下のようなエラーになります：

</p>

<pre>x mysql-3.22.12-beta/bench/Results/ATIS-mysql_odbc-NT_4.0-cmp-db2,informix,ms-sql,mysql,oracle,solid,sybase, 0 bytes, 0 tape blocks
tar: directory checksum error
</pre>

<p>
この場合、GNU <code>tar</code> (<code>gtar</code>) を展開に使用してください。
コンパイルずみのものが以下にあります：
<a href="http://www.mysql.com/Downloads/">http://www.mysql.com/Downloads/</a>.

</p>
<p>
Sun ネイティブスレッドは Solaris 2.5 以上で動きます。
バージョン 2.4 以下の場合、<strong>MySQL</strong> は時動的に MIT-pthreads を使用します  「<a href="manual.ja_Installing.html#MIT-pthreads">4.10  MIT-pthreads に関して</a>」節参照.

</p>
<p>
もし、configure 時に、以下のエラーが出たなら：

</p>

<pre>checking for restartable system calls... configure: error can not run test
programs while cross compiling
</pre>

<p>
これはコンパイラーのインストールでなにかを間違っています!
この場合、あなたは、より新しいバージョンへコンパイラーをアップグレードすべきです。
以下の行を <code>config.cache</code> ファイルに追加することによって、
この問題を解決してもかまいません：

</p>

<pre>ac_cv_sys_restartable_syscalls=${ac_cv_sys_restartable_syscalls='no'}
</pre>

<p>
もしあなたが SPARC の Solaris を使用しているなら、
<code>gcc</code> 2.95.2 を推奨します。
これは <a href="ttp://gcc.gnu.org/">ttp://gcc.gnu.org/</a>. で見つけれます。
<code>egs</code> 1.1.1 と <code>gcc</code> 2.8.1 は SPARC 上では完全に動作しないことに注意！

</p>
<p>
<code>gcc</code> 2.95.2 を使用した、推奨する <code>configure</code> は:

</p>

<pre>CC=gcc CFLAGS="-O3" \
CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti" \
./configure --prefix=/usr/local/mysql --with-low-memory --enable-assembler
</pre>

<p>
Ultra SPARC を使用する場合、"-mcpu=v8 -Wa,-xarch=v8plusa" を CFLAGS と 
CXXFLAGS に追加することで、さらに 4% の性能を得られます。

</p>
<p>
もし Sun Workshop (SunPro) 4.2 (以上)のコンパイラを使用するなら、
<code>configure</code> を以下のようにします：

</p>

<pre>CC=cc CFLAGS="-Xa -fast -xO4 -native -xstrconst -mt" \
CXX=CC CXXFLAGS="-noex -xO4 -mt" \
./configure --prefix=/usr/local/mysql --enable-assembler
</pre>

<p>
<code>configure</code> スクリプトの次の行を：

</p>

<pre>#if !defined(__STDC__) || __STDC__ != 1
</pre>

<p>
以下に変えます:

</p>

<pre>#if !defined(__STDC__)
</pre>

<p>
もし <code>-Xc</code> オプションで <code>__STDC__</code> を有効にした場合、
Sun compiler は Solaris の  <tt>`pthread.h'</tt> ヘッダーファイルを使用して
コンパイルすることができません。
これはサンのバグです(インクルードファイルかコンパイラーのバグ)

</p>
<p>
もし <code>mysqld</code> を起動時に以下のエラーが出た場合、
マルチスレッドを外して(オプション <code>-mt</code> を指定) Sun compiler を使って
 <strong>MySQL</strong> をコンパイルし直してください：

</p>

<pre>libc internal error: _rmutex_unlock: rmutex not held
</pre>

<p>
<code>-mt</code> を <code>CFLAGS</code> と <code>CXXFLAGS</code> に加えます。

</p>
<p>
<code>gcc</code> で <strong>MySQL</strong> をコンパイルするときに以下のエラーが出た場合、
これは <code>gcc</code> があなたの Solaris のバージョン用に調整されていません！

</p>

<pre>shell&gt; gcc -O3 -g -O2 -DDBUG_OFF  -o thr_alarm ...
./thr_alarm.c: In function `signal_hand':
./thr_alarm.c:556: too many arguments to function `sigwait'
</pre>

<p>
この場合、新しい <code>gcc</code> でコンパイルします！
少なくとも Solaris 2.5 では、ほとんどの <code>gcc</code> のバイナリのバージョンが古く、
スレッドを使用するプログラムにはこのインクルードファイルは使えません！

</p>
<p>
Solaris は スタテックリンクのシステムライブラリーを用意していません
(<code>libpthreads</code> and <code>libdl</code>)。
そのため、<code>--static</code> オプションで <strong>MySQL</strong> をコンパイルできません。
もしこれを試みた場合、以下のエラーになります：

</p>

<pre>ld: fatal: library -ldl: not found
</pre>

<p>
もし多くのプロセスが速く <code>mysqld</code> に接続を試みた場合、
 <strong>MySQL</strong> ログに以下のようにエラーが出ます:

</p>

<pre>Error in accept: Protocol error
</pre>

<p>
サーバーを <code>--set-variable back_log=50</code> オプションで起動すれば、この問題に対処できるでしょう。
 「<a href="manual.ja_Installing.html#Command-line_options">4.16.4  mysqld コマンド行オプション</a>」節参照.

</p>
<p>
もし自分の <strong>MySQL</strong> クライアントプログラムをリンクして
実行時に以下のようにエラーが出た場合：

</p>

<pre>ld.so.1: ./my: fatal: libmysqlclient.so.#: open failed: No such file or directory
</pre>

<p>
これは以下のどれかで回避できます：

</p>
<dl compact="">

<dt>*
</dt><dd>
以下のフラグでクライアントをリンクします(<code>-Lpath</code> の代わりに):
<code>-Wl,r/full-path-to-libmysqlclient.so</code>

</dd><dt>*
</dt><dd>
<code>libmysqclient.so</code> を <tt>`/usr/lib'</tt> にコピーします

</dd><dt>*
</dt><dd>
<a name="IDX259"></a>
<a name="IDX260"></a>
<code>LD_RUN_PATH</code> 環境変数を <tt>`libmysqlclient.so'</tt> が存在するところに
セットした後、クライアントを実行します。
</dd></dl>

<p>
<code>--with-libwrap</code> configure オプション使用時、<code>libwrap.a</code> が必
要とするライブラリも含める必要があります:

</p>

<pre>--with-libwrap="/opt/NUtcpwrapper-7.6/lib/libwrap.a -lnsl -lsocket
</pre>

<p>
configure や <strong>MySQL</strong> が <code>-lz</code> のリンクを試み、あなたがそれを
インストールしていないという問題がある場合は、２つの選択肢があります:

</p>

<ul>
<li>

圧縮通信プロトコルを使用できるようにしたい場合、ftp.gnu.org から zlib を
入手してインストールする必要があります。

</li><li>

<code>--with-named-z-libs=no</code> をつけて configure を行ないます。
</li></ul>

<p>
gcc を使用していて、<code>UDF</code> 関数を <code>MySQL</code> にロードする際に問題
がある場合、<code>-lgcc</code> を <code>UDF</code> 関数のリンク行に追加してみてくだ
さい。

</p>
<p>
<strong>MySQL</strong> を自動的に開始させたい場合、
<tt>`support-files/mysql.server'</tt> を <tt>`/etc/init.d'</tt> にコピーし、
<code>/etc/rc3.d/S99mysql.server</code> という名前でシンボリックリンクを生成し
てください。

</p>


<h3><a name="Solaris_2.7" href="manual.ja_toc.html#Solaris_2.7">4.12.2  Solaris 2.7/2.8 Notes</a></h3>

<p>
通常、Solaris 2.6 のバイナリは Solaris 7 , 8 で使用できます。
ほとんどの Solaris 2.6 の問題も Solaris 7 , 8 に適用できます。

</p>
<p>
注意: <strong>MySQL</strong> Version 3.23.4 以上では、新しいバージョンの Solaris を自動
検出し、以下の問題についての回避策を有効にします！

</p>
<p>
Solaris 7 , 8 は、インクルードファイルにいくつかバグがあります。
<code>gcc</code> で以下のようなエラーが出た場合：

</p>

<pre>/usr/include/widec.h:42: warning: `getwc' redefined
/usr/include/wchar.h:326: warning: this is the location of the previous
definition
</pre>

<p>
以下のようにして回避します：

</p>
<p>
<code>/usr/include/widec.h</code> を <code>.../lib/gcc-lib/os/gcc-version/include</code> にコピー
41 行目を変更:

</p>

<pre>変更前：

#if     !defined(lint) &amp;&amp; !defined(__lint)

変更後：

#if     !defined(lint) &amp;&amp; !defined(__lint) &amp;&amp; !defined(getwc)
</pre>

<p>
代わりに、<tt>`/usr/include/widec.h'</tt> を直接変更してもかまいません。
どちらの方法にしても、ファイルを修正後は、<tt>`config.cache'</tt> を
消して <code>configure</code> を再実行しなくてはなりません！

</p>
<p>
<code>make</code> 実行時に以下のようなエラーになった場合、<code>configure</code> が
 <tt>`curses.h'</tt> ファイルを検出できていません (これは <code>/usr/include/widec.h</code> の
エラーのためにおきます):

</p>

<pre>In file included from mysql.cc:50:
/usr/include/term.h:1060: syntax error before `,'
/usr/include/term.h:1081: syntax error before `;'
</pre>

<p>
これを解決するには、以下のうち一つを行います：

</p>

<ul>
<li>

Configure with <code>CFLAGS=-DHAVE_CURSES_H CXXFLAGS=-DHAVE_CURSES_H ./configure</code>.

</li><li>

前述したとおり、<tt>`/usr/include/widec.h'</tt> を修正し、configure を再実行します。

</li><li>

<code>#define HAVE_TERM</code> 行を <tt>`config.h'</tt> ファイルから消し、
<code>make</code> を再実行します。
</li></ul>

<p>
クライアントプログラムのリンク時に、リンカが <code>-lz</code> を見つけられない
という問題が発生した場合、問題はおそらく <tt>`libz.so'</tt> ファイルが 
<tt>`/usr/local/lib'</tt> にインストールされたことです。次の方法の一つでこれ
を修正できます:

</p>

<ul>
<li>

<code>LD_LIBRARY_PATH</code> に <tt>`/usr/local/lib'</tt> を追加

</li><li>

<code>/lib</code> から <code>libz.so</code> へのリンクを追加

</li><li>

Solaris 8 を使用している場合、Solaris 8 CD ディストリビューションからオ
プションの zlib をインストール可能。

</li><li>

<code>--with-named-z-libs=no</code> オプション付きで <strong>MySQL</strong> を 
configure する。
</li></ul>



<h3><a name="Solaris_x86" href="manual.ja_toc.html#Solaris_x86">4.12.3  Solaris x86 Notes</a></h3>

<p>
<code>gcc</code> か <code>egcs</code> を Solaris x86 で使用した場合、load 時にコアダンプする場合、
以下のように <code>configure</code> します:

</p>

<pre>CC=gcc CFLAGS="-O3 -fomit-frame-pointer -DHAVE_CURSES_H" \
CXX=gcc \
CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti -DHAVE_CURSES_H" \
./configure --prefix=/usr/local/mysql
</pre>

<p>
これは <code>libstdc++</code> ライブラリーと C++ の問題を回避します。

</p>
<p>
もしこれが該当しない場合、デバッグモードでコンパイルして
デバッグのトレースファイルを書き出すようにして起動するか、
<code>gdb</code> を使用して起動してください。
 「<a href="manual.ja_Porting.html#Debugging_server">I.1  MySQL server のデバッグ</a>」節参照.

</p>


<h3><a name="SunOS" href="manual.ja_toc.html#SunOS">4.12.4  SunOS 4 Notes</a></h3>

<p>
SunOS 4 では MIT-pthreads が必要です。
このために、 GNU <code>make</code> が <strong>MySQL</strong> のコンパイルに必要になります。

</p>
<p>
いくつかの SunOS 4 では dynamic libraries と <code>libtool</code> に問題があります。
これを避けるために、以下のようにして <code>configure</code> します：

</p>

<pre>shell&gt; ./configure --disable-shared --with-mysqld-ldflags=-all-static
</pre>

<p>
<code>readline</code> のコンパイル時、二重定義のワーニングが出ますが、
これは無視して構いません。

</p>
<p>
<code>mysqld</code> をコンパイルする時、
いくつか <code>implicit declaration of function</code> ワーニングがでますが、
無視して構いません。

</p>


<h3><a name="Linux" href="manual.ja_toc.html#Linux">4.12.5  Linux Notes (All Linux Versions)</a></h3>

<p>
以下の注意は、<strong>glibc</strong> に関して、<strong>MySQL</strong> をあなた自身で作成す
るシチュエーションだけに適用されます。Linux を x86 マシンで実行する場合、
多くの場合は我々のバイナリを使用した方が良いです。我々は <strong>glibc</strong> の
最良パッチバージョンと我々のバイナリをリンクします。我々は最良のコンパイラ
オプションでそれを作成し、高負荷サーバについて適切になるように試みています。
以下のテキストを読んで、何をあなたがやるべきかについて迷った時は、あなたの
必要にかなうかどうかをみるために、我々のバイナリをまず試してください。そし
て、我々のバイナリが十分でないとわかった後にだけ、あなた自身の作成について
考えてください。この場合、それについての評価します。そのため、次回にはより
良いバイナリを作成できます。典型的なユーザについて、そして、多くの同時接続
と 2GB 制限を超えるテーブルを設定する場合でも、多くの場合、我々のバイナリ
は最良の選択です。

</p>
<p>
Linux では <strong>MySQL</strong> は LinuxThreads を使用します。
もし <code>glibc2</code> を持たない古い Linux を使用している場合、
<strong>MySQL</strong> のコンパイルの前に、
LinuxThreads をインストールしなければなりません。
LinuxThreads は <a href="http://www.mysql.com/Downloads/Linux">http://www.mysql.com/Downloads/Linux</a> から得ることが
できます。

</p>
<p>
注意: 2.1.1 以前の <code>glibc</code> バージョンは
<code>pthread_mutex_timedwait</code> 処理中に致命的なバグがあります。これは
<code>INSERT DELAYED</code> を行なう時に使用されます。glibc をアップグレードする
前に <code>INSERT DELAYED</code> は使用しないようにお奨めします。<code>INSERT
DELAYED</code> を使用する場合、次のパッチを glibc ライブラリに追加<strong>しなけ
ればなりません</strong>:
<a href="http://www.mysql.com/Downloads/Patches/glibc-pthread_cond_timedwait.patch">http://www.mysql.com/Downloads/Patches/glibc-pthread_cond_timedwait.patch</a>.
<strong>MySQL</strong> 3.23.7 と <strong>MySQL</strong> 3.22.32 はこのバグの一時的な回避
を含んでいます。

</p>
<p>
1000以上の同時接続を使用する予定であれば、LinuxThreads にいくつかの変更
をして、再コンパイルし、MySQL を新しい <tt>`libpthread.a'</tt> を使用するように再リ
ンクする必要があります。<tt>`sysdeps/unix/sysv/linux/bits/local_lim.h'</tt> 内の 
<code>PTHREAD_THREADS_MAX</code> を 4096 に増加し、
<tt>`linuxthreads/internals.h'</tt> 中の <code>STACK_SIZE</code> を 
256 KB に減少させてください。注意: <code>STACK_SIZE</code> がデフォルトの 2MB である
場合、MySQL は 600-1000 程度の接続で安定でなくなります。

</p>
<p>
The <code>STACK_SIZE</code> constant in LinuxThreads controls the spacing of thread
stacks in the address space.  It needs to be large enough so that there will
be plenty of room for the stack of each individual thread, but small enough
to keep the stack of some thread from running into the global <code>mysqld</code>
data.  Unfortunately, the Linux implementation of <code>mmap()</code>, as we have
experimentally discovered, will successfully unmap an already mapped region
if you ask it to map out an address already in use, zeroing out the data
on the entire page, instead of returning an error.  So, the safety of
<code>mysqld</code> or any other threaded application depends on the "gentleman" 
behaviour of the code that creates threads.  The user must take measures to 
make sure the number of running threads at any time is sufficiently low for 
thread stacks to stay away from the global heap.  With <code>mysqld</code>, you 
should enforce this "gentleman" behaviour by setting a reasonable value for 
the <code>max_connections</code> variable.

</p>
<p>
If you build <strong>MySQL</strong> yourself and do not what to mess with patching
LinuxThreads, you should set <code>max_connections</code> to a value no higher 
than 500.  It should be even less if you have a large key buffer,  large 
heap tables, or some other things that make <strong>mysqld</strong> allocate a lot 
of memory or if you are running a 2.2 kernel with a 2GB patch. If you are 
using our binary or RPM version 3.23.25 or later, you can safely set
<code>max_connections</code> at 1500, assuming no large key buffer or heap tables 
with lots of data.  The more you reduce <code>STACK_SIZE</code> in LinuxThreads 
the more threads you can safely create.  We recommend the values between 
128K and 256K.

</p>
<p>
多くの同時接続を使用したい場合は、fork 爆弾攻撃を避けようとして、子供の 
fork や複製について、プロセスにペナルティを課すという、バージョン 2.2 カー
ネルの "機能" に悩まされるでしょう。これにより、あなたが並行クライアントの
数を増加するようには、MySQL がスケールしません。シングル CPU システムでは、
とても遅いスレッド生成で明らかにこれが見られます。これは、MySQL への接続に
長い時間(1分程度)が掛かり、それを切断するのにも長い時間掛かるということを
意味します。複数 CPU システムでは、クライアント数の増加に従って、クエリ速
度が徐々に落ちていくのが観測されました。問題の解決を見つけようとする処理の
中で、我々のユーザからカーネルパッチを受け取りました。我々はいくつかの限定
されたテストで、このパッチが MySQL のスケーラビリティを非常に改善した結果
を得ました。このパッチはここにあります
(<a href="http://www.mysql.com/Downloads/Patches/linux-fork.patch">http://www.mysql.com/Downloads/Patches/linux-fork.patch</a>). We have
now done rather extensive testing of this patch on both development and
production systems.  It has significantly
improved <code>MySQL</code> performance without causing any problems and we now
recommend it to our users who are still running high-load servers on
2.2 kernels.  This issue has been fixed in the 2.4 kernel, so if you are not
satisfied with
the current performance of your system, rather than patching your 2.2 kernel,
it might be easier to just upgrade to 2.4, which will also give you a nice
SMP boost in addition to fixing this fairness bug.

</p>
<p>
我々は 2 CPU マシン上の Linux カーネルバージョン 2.4 で <strong>MySQL</strong> をテストし
ました。そしてこの上では <strong>MySQL</strong> はとても良くスケールします！  - there was virtually no slowdown
on query throughput all the way up
to 1000 clients, and <strong>MySQL</strong> scaling factor ( computed as the ratio of
maximum throughput to the throughput with one client) was 180%.
We have observed similar results on a 4-CPU system - virtually no
slowdown as the number of
clients was increased up to 1000, and 300% scaling factor. So for a high-load
SMP server we would definitely recommend the 2.4 kernel at this point. We
have discovered that it is essential to run <code>mysqld</code> process with the
highest possible priority on the 2.4 kernel to achieve maximum performance.
This can be done by adding
<code>renice -20 $$</code> command to <code>safe_mysqld</code>. In our testing on a
4-CPU machine, increasing the priority gave 60% increase in throughput with
400 clients.

</p>
<p>
We are currently also trying to collect
more info on how well <code>MySQL</code> performs on 2.4 kernel on 4-way and 8-way
systems. If you have access such a system and have done some benchmarks,
please send a mail to <a href="mailto:docs@mysql.com">docs@mysql.com</a> with the results - we will
include them in the manual.

</p>
<p>
There is another issue that greatly hurts <strong>MySQL</strong> performance,
especially on SMP systems.  The implementation of mutex in
LinuxThreads in <strong>glibc-2.1</strong> is very bad for programs with many
threads that only
hold the mutex for a short time. On an SMP system, ironic as it is, if
you link <strong>MySQL</strong> against unmodified <strong>LinuxThreads</strong>,
removing processors from the machine improves <strong>MySQL</strong> performance
in many cases.  We have made a patch available for <strong>glibc 2.1.3</strong>,
<a href="http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch">linuxthreads-2.1-patch</a>
to correct this behaviour.

</p>
<p>
With <strong>glibc-2.2.2</strong>
<strong>MySQL</strong> version 3.23.36 will use the adaptive mutex, which is much
better than even the patched one in <strong>glibc-2.1.3</strong>. Be warned, however,
that under some conditions, the current mutex code in <strong>glibc-2.2.2</strong>
overspins, which hurts <strong>MySQL</strong> performance. The chance of this
condition can be reduced by renicing <code>mysqld</code> process to the highest
priority. We have also been able to correct the overspin behaviour with
a patch, available <a href="http://www.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch">here</a>.
It combines the correction of overspin, maximum number of
threads, and stack spacing all in one. You will need to apply it in the
<code>linuxthreads</code> directory with
<code>patch -p0 &lt;/tmp/linuxthreads-2.2.2.patch</code>.
We hope it will be included in
some form in to the future releases of <code>glibc-2.2</code>. In any case, if
you link against <code>glibc-2.2.2</code> you still need to correct
<code>STACK_SIZE</code> and <code>PTHREAD_THREADS_MAX</code>. We hope that the defaults
will be corrected to some more acceptable values for high-load
<strong>MySQL</strong> setup in the future, so that your own build can be reduced
to <code>./configure; make; make install</code>.

</p>
<p>
We recommend that you use the above patches to build a special static
version of <code>libpthread.a</code> and use it only for statically linking
against <code>MySQL</code>. We know that the patches are safe for <code>MySQL</code>
and significantly improve its performance, but we cannot say anything
about other applications. If you link other applications against the
patched version of the library, or build a patched shared version and
install it on your system, you are doing it at your own risk with regard
to other applications that depend on <code>LinuxThreads</code>.

</p>
<p>
If you experience any strange problems during the installation of
<strong>MySQL</strong>, or with some common utilties hanging, it is very likely that
they are either library or compiler related. If this is the case, using our
binary will resolve them.
  
一つ知られている問題として、バイナリ配布を <code>libc5</code> の古い Linux システム
(RedHat 4.x , Slackware 3.6 以下, Debian 1.3 bo 以下など)
で使用すると、ホスト名解決の致命的なエラーが出ます.
 「<a href="manual.ja_Installing.html#Binary_notes-Linux">4.6.3.1  Linux Notes for Binary Distributions</a>」節参照.

</p>
<p>
<code>myisamchk</code> は <code>libc.so.5.3.12</code> で使用するとハングります.
最新の <code>libc</code> にアップグレードしてください。

</p>
<p>
LinuxThreads を使用している場合、最低３つのプロセスが走ります。
これらは実スレッドで、一つは LinuxThreads マネージャーのために、
一つは接続のハンドルに、もうひとつはアラームとシグナルのハンドルです。

</p>
<p>
注意: linux カーネルと linuxthread ライブラリはデフォルトでは 1024 スレッ
ドだけ持つことができます。これはパッチを適用していないシステム上では 
MySQL への接続は最大 1021 だけであるということを意味します。ページ 
<a href="http://www.volano.com/linuxnotes.html">http://www.volano.com/linuxnotes.html</a> はこの制限をどのように回避
するかの情報が含まれています。

</p>
<p>
もし <code>mysqld</code> デーモンプロセスが <code>ps</code> などでみると死んでいるようであれば, 
通常これは <strong>MySQL</strong> バグか、壊れたテーブルを持っています。
 「<a href="manual.ja_Problems.html#Crashing">21.1.1  <strong>MySQL</strong> がクラッシュする場合に行うこと</a>」節参照.

</p>
<p>
Linux 上で、mysqld が SIGSEGV シグナルで死んだ時にコアダンプを得たい場合、
<code>--core-file</code> オプションを付けて mysqld を起動できます。注意:
<code>ulimit -c 1000000</code> を <code>safe_mysqld</code> に追加するか
<code>--core-file-sizes=1000000</code> をつけて <code>safe_mysqld</code> を起動して、
<code>core file size</code> を増加する必要があります。 「<a href="manual.ja_Tools.html#safe_mysqld">15.3  safe_mysqld, the wrapper around mysqld</a>」節参照。

</p>
<p>
もし <strong>MySQL</strong> クライアントをリンクしようとして以下のエラーになった場合：

</p>

<pre>ld.so.1: ./my: fatal: libmysqlclient.so.4: open failed: No such file or directory
</pre>

<p>
以下の方法で解決できます：

</p>

<ul>
<li>

クライアントを以下のフラグで(<code>-Lpath</code>のかわりに)リンクします：
<code>-Wl,r/path-libmysqlclient.so</code>

</li><li>

<code>libmysqclient.so</code> を <tt>`/usr/lib'</tt> にコピーします

<a name="IDX261"></a>
<a name="IDX262"></a>
</li><li>

<code>LD_RUN_PATH</code> 環境変数を <tt>`libmysqlclient.so'</tt> が存在する場所に設定します。
(クライアントを実行する前に設定します)
</li></ul>

<p>
富士通コンパイラ <code>(fcc / FCC)</code> を使用している場合、<strong>MySQL</strong> 
のコンパイルにいくつかの問題があります。Linux ヘッダファイルはとても 
<code>gcc</code> 指向であるためです。

</p>
<p>
次の <code>configure</code> 行は <code>fcc/FCC</code> で動作します:

</p>

<pre>CC=fcc CFLAGS="-O -K fast -K lib -K omitfp -Kpreex -D_GNU_SOURCE -DCONST=const -DNO_STRTOLL_PROTO" CXX=FCC CXXFLAGS="-O -K fast -K lib  -K omitfp -K preex --no_exceptions --no_rtti -D_GNU_SOURCE -DCONST=const -Dalloca=__builtin_alloca -DNO_STRTOLL_PROTO '-D_EXTERN_INLINE=static __inline'" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static --disable-shared --with-low-memory
</pre>



<h4><a name="Linux-x86" href="manual.ja_toc.html#Linux-x86">4.12.5.1  Linux-x86 Notes</a></h4>

<p>
<strong>MySQL</strong> は <code>libc</code> 5.4.12 以上が必要です。<code>libc</code> 5.4.46 で動作します。
<code>glibc</code> 2.0.6 以上でも動作します。
<code>glibc</code> の RPM にはいくつか問題があり、アップデートをチェックしてください。
<code>glibc</code> 2.0.7-19 と 2.0.7-29 RPM で動作します。

</p>
<p>
古い Linux 配布物では、<code>configure</code> 時に以下のようなエラーが出るかもしれません：

</p>

<pre>Syntax error in sched.h. Change _P to __P in the /usr/include/sched.h file.
See the Installation chapter in the Reference Manual.
</pre>

<p>
これは <code>_P</code> マクロが一つのアンダースコアしか持っていないためで、
このエラーメッセージに示されたように対処してください。

</p>
<p>
以下のようなワーニングは無視して構いません：

</p>

<pre>mysqld.cc -o objs-thread/mysqld.o
mysqld.cc: In function `void init_signals()':
mysqld.cc:315: warning: assignment of negative value `-1' to `long unsigned int'
mysqld.cc: In function `void * signal_hand(void *)':
mysqld.cc:346: warning: assignment of negative value `-1' to `long unsigned int'
</pre>

<p>
Debian GNU/Linux では、<strong>MySQL</strong> をマシンの起動時に立ちあげるためには、
以下のようにします：

</p>

<pre>shell&gt; cp support-files/mysql.server /etc/init.d/mysql
shell&gt; /usr/sbin/update-rc.d mysql defaults 99
</pre>

<p>
<code>mysql.server</code> スクリプトは <strong>MySQL</strong> をインストールした先の
 <tt>`share/mysql'</tt> directory にあります。
あるいは、 <strong>MySQL</strong> のソースの中の <tt>`support-files'</tt> ディレクトリにあります。

</p>

<p>
<code>mysqld</code> がつねにスタート時にコアをはく場合、
古い <tt>`/lib/libc.a'</tt> を使用しているかもしれません。
<tt>`sql/mysqld'</tt> を消去して、新しく <code>make install</code> してみてください。
これはいくつかの Slackware で報告された現象です。
RedHat 5.0 は <code>glibc</code> のバージョンによって問題が発生します。
 「<a href="manual.ja_Installing.html#Linux-RedHat50">4.12.5.2  RedHat Version 5.0 Notes</a>」節参照.

</p>
<p>
もし <code>mysqld</code> をリンクする場合に以下のようなエラーが出た場合、
 <tt>`libg++.a'</tt> が正しくインストールされていません：

</p>

<pre>/usr/lib/libc.a(putc.o): In function `_IO_putc':
putc.o(.text+0x0): multiple definition of `_IO_putc'
</pre>

<p>
<tt>`libg++.a'</tt> の使用を避けるには、 <code>configure</code> を以下のようにします：

</p>

<pre>shell&gt; CXX=gcc ./configure
</pre>



<h4><a name="Linux-RedHat50" href="manual.ja_toc.html#Linux-RedHat50">4.12.5.2  RedHat Version 5.0 Notes</a></h4>

<p>
もし RedHat で <strong>MySQL</strong> に問題がある場合、まず <code>glibc</code> のバージョンを新しいものにあげてください！

</p>
<p>
RedHat のオフィシャルパッチ(including <code>glibc-2.0.7-19</code> and <code>glibc-devel-2.0.7-19</code>)
をインストールしているなら、 <strong>MySQL</strong> は問題なく動くはずです！

</p>
<p>
<code>glibc</code> 2.0.5 には <code>pthread_key_create</code> 変数を解放する部分にバグがあり、
アップデートが必要です。<code>glibc</code> 2.0.5 を使用する場合、
スタティックリンクされて作成された <strong>MySQL</strong> バイナリ配布物を使用すべきです。
ソースからコンパイルしたい場合、 <a href="http://www.mysql.com/Downloads/Linux">http://www.mysql.com/Downloads/Linux</a> にある
LinuxThreads の修正版をインストールするか、
あるいは <code>glibc</code> をバージョンアップしなくてはなりません。

</p>
<p>
もし <code>glibc</code> または LinuxThreads のバージョンが問題のあるものだと、
 <code>mysqld</code> はコネクションの度にクラッシュします。
例えば、<code>mysqladmin version</code> は <code>mysqld</code> を完全にクラッシュします！

</p>
<p>
また、問題のあるライブラリーを使用していると、 <code>mysqld</code> は起動時にクラッシュします。
いくつかの Linux systems では、以下のようにして configure でこれを避けることができます：

</p>

<pre>shell&gt; ./configure --with-mysqld-ldflags=-all-static
</pre>

<p>
RedHat Version 5.0 では、<code>glibc</code> 2.0.7-19 RPM を簡単にインストールできますので、
インストール後、<code>--with-mysqld-ldflags=-all-static</code> なしで <code>configure</code> できます。

</p>
<p>
<code>glibc</code> 2.0.7 のソースに対するパッチは

</p><pre><a href="http://www.mysql.com/Downloads/Linux/glibc-2.0.7-total-patch.tar.gz">http://www.mysql.com/Downloads/Linux/glibc-2.0.7-total-patch.tar.gz</a>
</pre>

<p>
 にあります。
このパッチは <strong>MySQL</strong> がテストされたパッチで、簡単に適用できます。

</p>
<p>
もし <strong>MySQL</strong> 構築時にクラッシュする場合、新しい <strong>MySQL</strong> の
バイナリをダウンロードしてみてください。これはスタティックリンクで作成されており、
ライブラリーの衝突を避けることができ、全ての Linux で動くはずです！

</p>
<p>
<strong>MySQL</strong> はデバッグのためトレースファイルに情報を書き出すことができます。
これは問題を解決するためにヒントになる情報を多く出力します。
 「<a href="manual.ja_Porting.html#Debugging_server">I.1  MySQL server のデバッグ</a>」節参照.

</p>


<h4><a name="Linux-RedHat51" href="manual.ja_toc.html#Linux-RedHat51">4.12.5.3  RedHat Version 5.1 notes</a></h4>

<p>
RedHat 5.1 の <code>glibc</code> (<code>glibc</code> 2.0.7-13) はメモリーリークします。
<code>glibc</code> を 2.0.7-19 にアップグレードしなくてはなりません。
あるいは、バイナリ配布の <code>mysqld</code> を使用するかです。
もしこれを行わなかった場合、メモリー関連の問題が発生します(out of memory, etc.,etc.)。
多くの場合以下のように：

</p>

<pre>Can't create a new thread (errno 11). If you are not out of available
memory, you can consult the manual for any possible OS dependent bug
</pre>

<p>
<code>glibc</code> 2.0.7-19 にアップグレード後は、<strong>MySQL</strong> を
ダイナミックリンク指定(デフォルト)で configure できます。
が、<code>glibc</code> 2.0.7-19 をソースからインストールしない限り、
<code>--with-mysqld-ldflags=-all-static</code> オプションは <code>configure</code> で<strong>使用できません</strong>！

</p>
<p>
<code>glibc</code> のバージョンは <code>rpm -q glibc</code> で確認できます。

</p>
<p>
上記エラーの他の原因は、Linux カーネルをコンフィグしたのよりも多くのスレッ
ドを使用しようとした場合です。この場合、<tt>`include/linux/tasks.h'</tt> 内
の制限を上げて、カーネルを再コンパイルすべきです！

</p>


<h4><a name="Linux-SPARC" href="manual.ja_toc.html#Linux-SPARC">4.12.5.4  Linux-SPARC Notes</a></h4>

<p>
いくつかの埋め込み関数, <code>readdir_r()</code> が壊れます。
この顕れとして、<code>SHOW DATABASES</code> が常に空を返します。
これは configure 後、コンパイルする前に、
<tt>`config.h'</tt> から <code>HAVE_READDIR_R</code> を取り除くことで解決します。

</p>
<p>
その他いくつかの問題は、あなたの Linux にパッチを当てる必要があります。
パッチは <a href="http://www.mysql.com/Downloads/patches/Linux-sparc-2.0.30.diff">http://www.mysql.com/Downloads/patches/Linux-sparc-2.0.30.diff</a>. にあります。
このパッチは、<code>vger.rutgers.edu</code> にある <tt>`sparclinux-2.0.30.tar.gz'</tt> 用です。
(これは正式の 2.0.30 とは違います。パッチを正式2.0.30に当てないように)
そして LinuxThreads Version 0.6 かそれ以上にしなくてはなりません。

</p>
<p>
これは <a href="mailto:jacques@solucorp.qc.ca">jacques@solucorp.qc.ca</a> から寄せられました。

</p>


<h4><a name="Linux-Alpha" href="manual.ja_toc.html#Linux-Alpha">4.12.5.5  Linux-Alpha notes</a></h4>

<p>
<strong>MySQL</strong> Version 3.23.12 が、Linux-Alpha 上で最初にテストされたバージョンです。
もし <strong>MySQL</strong> を Linux-Alpha 上で使用したいと考えたなら、
このバージョンより新しいものを使用します。

</p>
<p>
Linux-Alpha での一番大きな問題は、このプラットフォームの <code>glibc</code> に
まだいくつか問題があることです。 最新の <code>glibc</code> を得ることから
はじめてください。

</p>
<p>
We have tested <strong>MySQL</strong> on Alpha with our benchmarks and test suite,
and it appears to work nicely.  The main thing we haven't yet had time to
test is how things works with many concurrent users.

</p>
<p>
When we compiled the standard <strong>MySQL</strong> binary we are using SuSE 6.4,
kernel 2.2.13-SMP, Compaq C compiler (V6.2-504) and Compaq C++ compiler
(V6.3-005) on a Comaq DS20 machine with an Alpha EV6 processor.

</p>
<p>
You can find the above compilers at 
<a href="http://www.support.compaq.com/alpha-tools">http://www.support.compaq.com/alpha-tools</a>).  By using these compilers,
instead of gcc, we get about 9-14 % better performance with <strong>MySQL</strong>.

</p>
<p>
Note that the configure line optimized the binary for the current CPU; This
means you can only use our binary if you have an Alpha EV6 processor. We also
compile statically to avoid library problems.

</p>

<pre>CC=ccc CFLAGS="-fast" CXX=cxx CXXFLAGS="-fast -noexceptions -nortti" ./configure --prefix=/usr/local/mysql --disable-shared --with-extra-charsets=complex --enable-thread-safe-client --with-mysqld-ldflags=-non_shared --with-client-ldflags=-non_shared
</pre>

<p>
If you want to use egcs the following configure line worked for us:

</p>

<pre>CFLAGS="-O3 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --disable-shared
</pre>

<p>
Some known problems when running <strong>MySQL</strong> on Linux-Alpha:

</p>

<ul>
<li>

Debugging threaded applications like <strong>MySQL</strong> will not work with
<code>gdb 4.18</code>.  You should download and use gdb 5.0 instead!

</li><li>

If you try linking mysqld statically when using gcc, the resulting image
will core dump at start.  In other words, <strong>DON'T</strong> use
<code>--with-mysqld-ldflags=-all-static</code> with gcc.
</li></ul>



<h4><a name="MKLinux" href="manual.ja_toc.html#MKLinux">4.12.5.6  MkLinux Notes</a></h4>

<p>
<strong>MySQL</strong> は最新の <code>glibc</code> を使用した MkLinux で動作します。
(<code>glibc</code> 2.0.7 でテストしました).

</p>


<h4><a name="Qube2" href="manual.ja_toc.html#Qube2">4.12.5.7  Qube2 Linux Notes</a></h4>

<p>
Qube2 (Linux Mips) 上で <strong>MySQL</strong> を動作させるには、
最新の <code>glibc</code> ライブラリでなくてはなりません
(<code>glibc-2.0.7-29C2</code> は動作することが分かっています)。 
そして、 <code>egcs</code> C++ compiler (<code>egcs-1.0.2-9</code>, <code>gcc 2.95.2</code> 以上) を
使用しなくてはなりません。

</p>



<h4><a name="Linux-Ia64" href="manual.ja_toc.html#Linux-Ia64">4.12.5.8  Linux IA64 Notes</a></h4>

<p>
To get <strong>MySQL</strong> to compile on Linux Ia64, we had to do the following
(we assume that this will be easier when next gcc version for ia64 is
released).

</p>
<p>
Using <code>gcc-2.9-final</code>:

</p>

<pre>CFLAGS="-O2" CXX=gcc CXXFLAGS="-O2 -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static --disable-shared --with-extra-charsets=complex
</pre>

<p>
After <code>make</code> you will get an error that <code>sql/opt_range.cc</code>
will not compile (internal compiler error).  To fix this, go to the sql
directory and type <code>make</code> again.  Copy the compile line, but change
-O2 to -O0.  The file should now compile.

</p>
<p>
Now you can do:

</p>

<pre>cd ..
make
make_install
</pre>

<p>
and <strong>mysqld</strong> should be ready to run.

</p>


<h3><a name="Alpha-DEC-UNIX" href="manual.ja_toc.html#Alpha-DEC-UNIX">4.12.6  Alpha-DEC-UNIX Notes (Tru64)</a></h3>

<p>
If you are using egcs 1.1.2 on Digital UNIX, you should upgrade to gcc
2.95.2, as egcs on DEC has some serious bugs!

</p>
<p>
When compiling threaded programs under Digital UNIX, the documentation
recommends the <code>-pthread</code> option for <code>cc</code> and <code>cxx</code> and the
libraries <code>-lmach -lexc</code> (in addition to <code>-lpthread</code>).
You should run <code>configure</code> something like this:

</p>

<pre>CC="cc -pthread" CXX="cxx -pthread -O" \
./configure --with-named-thread-libs="-lpthread -lmach -lexc -lc"
</pre>

<p>
When compiling <code>mysqld</code>, you may see a couple of warnings like this:

</p>

<pre>mysqld.cc: In function void handle_connections()':
mysqld.cc:626: passing long unsigned int *' as argument 3 of
accept(int,sockadddr *, int *)'
</pre>

<p>
You can safely ignore these warnings. They occur because <code>configure</code>
can't detect warnings, only errors.

</p>
<p>
If you start the server directly from the command line, you may have problems
with it dying when you log out.  (When you log out, your outstanding processes
receive a <code>SIGHUP</code> signal.)  If so, try starting the server like this:

</p>

<pre>shell&gt; nohup mysqld [options] &amp;
</pre>

<p>
<code>nohup</code> causes the command following it to ignore any <code>SIGHUP</code>
signal sent from the terminal.  Alternatively, start the server by running
<code>safe_mysqld</code>, which invokes <code>mysqld</code> using <code>nohup</code> for you.
 「<a href="manual.ja_Tools.html#safe_mysqld">15.3  safe_mysqld, the wrapper around mysqld</a>」節参照.

</p>
<p>
If you get a problem when compiling mysys/get_opt.c, just remove the
line #define _NO_PROTO from the start of that file!

</p>
<p>
If you are using Compac's CC compiler, the following configure line should
work:

</p>

<pre>CC="cc -pthread"
CFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all -arch host"
CXX="cxx -pthread"
CXXFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all -arch host"
export CC CFLAGS CXX CXXFLAGS
./configure \
--prefix=/usr/local/mysql \
--with-low-memory \
--enable-large-files \
--enable-shared=yes \
--with-named-thread-libs="-lpthread -lmach -lexc -lc"
gnumake
</pre>

<p>
If you get a problem with libtool, when compiling with shared libraries
as above, when linking <code>mysql</code>, you should be able to get around
this by issuing:

</p>

<pre>cd mysql
/bin/sh ../libtool --mode=link cxx -pthread  -O3 -DDBUG_OFF \
-O4 -ansi_alias -ansi_args -fast -inline speed \
-speculate all \ -arch host  -DUNDEF_HAVE_GETHOSTBYNAME_R \
-o mysql  mysql.o readline.o sql_string.o completion_hash.o \
../readline/libreadline.a -lcurses \
../libmysql/.libs/libmysqlclient.so  -lm
cd ..
gnumake
gnumake install
scripts/mysql_install_db
</pre>



<h3><a name="Alpha-DEC-OSF1" href="manual.ja_toc.html#Alpha-DEC-OSF1">4.12.7  Alpha-DEC-OSF1 Notes</a></h3>

<p>
If you have problems compiling and have DEC <code>CC</code> and <code>gcc</code>
installed, try running <code>configure</code> like this:

</p>

<pre>CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql
</pre>

<p>
If you get problems with the <tt>`c_asm.h'</tt> file, you can create and use
a 'dummy' <tt>`c_asm.h'</tt> file with:

</p>

<pre>touch include/c_asm.h
CC=gcc CFLAGS=-I./include \
CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql
</pre>

<p>
Note that the following problems with the <code>ld</code> program can be fixed
by downloading the latest DEC (Compaq) patch kit from:
<a href="http://ftp.support.compaq.com/public/unix/">http://ftp.support.compaq.com/public/unix/</a>.

</p>
<p>
On OSF1 V4.0D and compiler "DEC C V5.6-071 on Digital Unix V4.0 (Rev. 878)"
the compiler had some strange behavior (undefined <code>asm</code> symbols).
<code>/bin/ld</code> also appears to be broken (problems with <code>_exit
undefined</code> errors occuring while linking <code>mysqld</code>).  On this system, we
have managed to compile <strong>MySQL</strong> with the following <code>configure</code>
line, after replacing <code>/bin/ld</code> with the version from OSF 4.0C:

</p>

<pre>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
</pre>

<p>
With the Digital compiler "C++ V6.1-029", the following should work:

</p>

<pre>CC=cc -pthread
CFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all -arch host
CXX=cxx -pthread
CXXFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all -arch host -noexceptions -nortti
export CC CFLAGS CXX CXXFLAGS
./configure --prefix=/usr/mysql/mysql --with-mysqld-ldflags=-all-static --disable-shared --with-named-thread-libs="-lmach -lexc -lc"
</pre>

<p>
In some versions of OSF1, the <code>alloca()</code> function is broken. Fix
this by removing the line in <tt>`config.h'</tt> that defines <code>'HAVE_ALLOCA'</code>.

</p>
<p>
The <code>alloca()</code> function also may have an incorrect prototype in
<code>/usr/include/alloca.h</code>.  This warning resulting from this can be ignored.

</p>
<p>
<code>configure</code> will use the following thread libraries automatically:
<code>--with-named-thread-libs="-lpthread -lmach -lexc -lc"</code>.

</p>
<p>
When using <code>gcc</code>, you can also try running <code>configure</code> like this:

</p>

<pre>shell&gt; CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ....
</pre>

<p>
If you have problems with signals (<strong>MySQL</strong> dies unexpectedly
under high load), you may have found an OS bug with threads and
signals. In this case you can tell <strong>MySQL</strong> not to use signals by
configuring with:

</p>

<pre>shell&gt; CFLAGS=-DDONT_USE_THR_ALARM \
       CXXFLAGS=-DDONT_USE_THR_ALARM \
       ./configure ...
</pre>

<p>
This doesn't affect the performance of <strong>MySQL</strong>, but has the side
effect that you can't kill clients that are ``sleeping'' on a connection with
<code>mysqladmin kill</code> or <code>mysqladmin shutdown</code>.  Instead, the client
will die when it issues its next command.

</p>
<p>
With <code>gcc</code> 2.95.2, you will probably run into the following compile error:

</p>

<pre>sql_acl.cc:1456: Internal compiler error in `scan_region', at except.c:2566
Please submit a full bug report.
</pre>

<p>
To fix this you should change to the <code>sql</code> directory and do a ``cut
and paste'' of the last <code>gcc</code> line, but change <code>-O3</code> to
<code>-O0</code> (or add <code>-O0</code> immediately after <code>gcc</code> if you don't
have any <code>-O</code> option on your compile line.)  After this is done you
can just change back to the top-level directly and run <code>make</code>
again.

</p>


<h3><a name="SGI-Irix" href="manual.ja_toc.html#SGI-Irix">4.12.8  SGI-IRIX notes</a></h3>

<p>
If you are using Irix Version 6.5.3 or newer <code>mysqld</code> will only be able to
create threads if you run it as a user with <code>CAP_SCHED_MGT</code>
privileges (like <code>root</code>) or give the <code>mysqld</code> server this privilege
with the following shell command:

</p>

<pre>shell&gt; chcap "CAP_SCHED_MGT+epi" /opt/mysql/libexec/mysqld
</pre>

<p>
You may have to undefine some things in <tt>`config.h'</tt> after running
<code>configure</code> and before compiling.

</p>
<p>
In some Irix implementations, the <code>alloca()</code> function is broken.  If the
<code>mysqld</code> server dies on some <code>SELECT</code> statements, remove the lines
from <tt>`config.h'</tt> that define <code>HAVE_ALLOC</code> and <code>HAVE_ALLOCA_H</code>.
If <code>mysqladmin create</code> doesn't work, remove the line from <tt>`config.h'</tt>
that defines <code>HAVE_READDIR_R</code>.  You may have to remove the 
<code>HAVE_TERM_H</code> line as well.

</p>
<p>
SGI recommends that you install all of the patches on this page as a set:
http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html

</p>
<p>
At the very minimum, you should install the latest kernel rollup, the
latest <code>rld</code> rollup, and the latest <code>libc</code> rollup.

</p>
<p>
You definitely need all the POSIX patches on this page, for pthreads support:

</p>
<p>
<a href="http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html">http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html</a>

</p>
<p>
If you get the something like the following error when compiling
<tt>`mysql.cc'</tt>:

</p>

<pre>"/usr/include/curses.h", line 82: error(1084): invalid combination of type
</pre>

<p>
Type the following in the top-level directory of your <strong>MySQL</strong> source
tree:

</p>

<pre>shell&gt; extra/replace bool curses_bool &lt; /usr/include/curses.h &gt; include/curses.h
shell&gt; make
</pre>

<p>
There have also been reports of scheduling problems.  If only one thread is
running, things go slow.  Avoid this by starting another client.  This may 
lead to a 2-to-10-fold increase in execution speed thereafter for the other
thread.  This is a poorly understood problem with Irix threads; you may have
to improvise to find solutions until this can be fixed.

</p>
<p>
If you are compiling with <code>gcc</code>, you can use the following
<code>configure</code> command:

</p>

<pre>CC=gcc CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql --with-thread-safe-client --with-named-thread-libs=-lpthread
</pre>



<h3><a name="FreeBSD" href="manual.ja_toc.html#FreeBSD">4.12.9  FreeBSD Notes</a></h3>

<p>
FreeBSD 3.x is recommended for running <strong>MySQL</strong> since the thread package
is much more integrated.

</p>
<p>
最も簡単にインストールする方法は、<a href="http://www.freebsd.org">http://www.freebsd.org</a> の
mysql-server と mysql-client の ports を利用することです。
<a href="http://www.freebsd.org">http://www.freebsd.org</a>.

</p>
<p>
これは以下のような利点をもたらします：

</p><ul>
<li>

オプティマイズされた <strong>MySQL</strong> が動く

</li><li>

自動 configuration と build

</li><li>

スタートアップ用のスクリプトが /usr/local/etc/rc.d にインストール

</li><li>

Ability to see which files that are installed with pkg_info -L. And to
remove them all with pkg_delete if you no longer want <strong>MySQL</strong> on that
machine.
</li></ul>

<p>
FreeBSD 2.x 上では MIT-pthreads を、そして Versions 3 以上では、
ネイティブのスレッドを使用してください。
最近のいくつかの 2.2.x ではネイティブのスレッド で動作が可能ですが、
mysqld を 落とすときに問題が起こります。

</p>
<p>
The <strong>MYSQL</strong> Makefiles require GNU make (<code>gmake</code>) to work.
If you want to compile <strong>MYSQL</strong> you need to install GNU make
first.

</p>
<p>
名前解決の設定を確実にしておいてください。 でないと、mysqld に接続する際、
名前解決にとても時間がかかり、接続に失敗するでしょう。

</p>
<p>
確実に <tt>`/etc/hosts'</tt> ファイルに <code>localhost</code> が登録されているように
してください。 (でないと、データベースへの接続で問題が出ます)。
 <tt>`/etc/hosts'</tt> ファイルは、以下の行から始まるべきです：

</p>

<pre>127.0.0.1       localhost localhost.your.domain
</pre>

<p>
もし <code>configure</code> が MIT-pthread を使用すると分かった場合、
MIT-pthreads notes を読むべきです。  「<a href="manual.ja_Installing.html#MIT-pthreads">4.10  MIT-pthreads に関して</a>」節参照.

</p>
<p>
If you get an error from <code>make install</code> that it can't find
<tt>`/usr/include/pthreads'</tt>, <code>configure</code> didn't detect that you need
MIT-pthreads. This is fixed by executing these commands:
 

</p><pre>shell&gt; rm config.cache
shell&gt; ./configure --with-mit-threads
</pre>

<p>
FreeBSD の <code>make</code> の振る舞いは  GNU の <code>make</code> と少し違います。
もし <code>make</code> にかかわる問題が出たなら、 GNU <code>make</code> を
インストールすべきです。

</p>
<p>
FreeBSD では、デフォルトのファイルハンドルの上限値がとても少ない
値であることも知られています。 「<a href="manual.ja_Problems.html#Not_enough_file_handles">21.11  File not found</a>」節参照.
safe_mysqld 中の ulimit -n のコメントを外すか、/etc/login.conf ファイルで
mysqld ユーザーの制限値を増加させます。
(/etc/login.conf の変更の際は cap_mkdb /etc/login.conf で再構築が必要です)。
もしデフォルトを使用したくなければ、このユーザーに password ファイル中で
適切な Class を与えることでも、変更可能になります。(use: chpass mysqld-user-name).  「<a href="manual.ja_Tools.html#safe_mysqld">15.3  safe_mysqld, the wrapper around mysqld</a>」節参照.

</p>
<p>
もし <strong>MySQL</strong> が現在時で問題があるなら、
 <code>TZ</code> 環境変数を設定しなくてはなりません。  「<a href="manual.ja_Environment_variables.html#Environment_variables">A  Environment Variables</a>」節参照.

</p>

<p>
安全で安定したシステムを入れるなら、 <code>-STABLE</code> のカーネルだけを
使用してください。

</p>



<h3><a name="NetBSD" href="manual.ja_toc.html#NetBSD">4.12.10  NetBSD notes</a></h3>

<p>
To compile on NetBSD you need GNU <code>make</code>.  Otherwise the compile will 
crash when <code>make</code> tries to run <code>lint</code> on C++ files.

</p>


<h3><a name="OpenBSD" href="manual.ja_toc.html#OpenBSD">4.12.11  OpenBSD Notes</a></h3>



<h4><a name="OpenBSD_2.5" href="manual.ja_toc.html#OpenBSD_2.5">4.12.11.1  OpenBSD 2.5 Notes</a></h4>

<p>
On OpenBSD Version 2.5, you can compile <strong>MySQL</strong> with native threads
with the following options:

</p>

<pre>CFLAGS=-pthread CXXFLAGS=-pthread ./configure --with-mit-threads=no
</pre>



<h4><a name="OpenBSD_2.8" href="manual.ja_toc.html#OpenBSD_2.8">4.12.11.2  OpenBSD 2.8 Notes</a></h4>

<p>
Our users have reported that OpenBSD 2.8 has a threading bug which causes
problems with <strong>MySQL</strong>.  The OpenBSD Developers have fixed the problem,
but as of January 25th, 2001, it's only available in the ``-current'' branch.
The symptoms of this threading bug are: slow response, high load, high CPU
usage, and crashes.

</p>


<h3><a name="BSDI" href="manual.ja_toc.html#BSDI">4.12.12  BSD/OS Notes</a></h3>



<h4><a name="BSDI2" href="manual.ja_toc.html#BSDI2">4.12.12.1  BSD/OS Version 2.x Notes</a></h4>

<p>
If you get the following error when compiling <strong>MySQL</strong>, your
<code>ulimit</code> value for virtual memory is too low:

</p>

<pre>item_func.h: In method `Item_func_ge::Item_func_ge(const Item_func_ge &amp;)':
item_func.h:28: virtual memory exhausted
make[2]: *** [item_func.o] Error 1
</pre>

<p>
Try using <code>ulimit -v 80000</code> and run <code>make</code> again.  If this
doesn't work and you are using <code>bash</code>, try switching to <code>csh</code>
or <code>sh</code>; some BSDI users have reported problems with <code>bash</code>
and <code>ulimit</code>.

</p>
<p>
If you are using <code>gcc</code>, you may also use have to use the
<code>--with-low-memory</code> flag for <code>configure</code> to be able to compile
<tt>`sql_yacc.cc'</tt>.

</p>
<p>
もし <strong>MySQL</strong> が現在時で問題があるなら、
 <code>TZ</code> 環境変数を設定しなくてはなりません。  「<a href="manual.ja_Environment_variables.html#Environment_variables">A  Environment Variables</a>」節参照.

</p>


<h4><a name="BSDI3" href="manual.ja_toc.html#BSDI3">4.12.12.2  BSD/OS Version 3.x Notes</a></h4>

<p>
Upgrade to BSD/OS Version 3.1.  If that is not possible, install
BSDIpatch M300-038.

</p>
<p>
Use the following command when configuring <strong>MySQL</strong>:

</p>

<pre>shell&gt; env CXX=shlicc++ CC=shlicc2 \
       ./configure \
           --prefix=/usr/local/mysql \
           --localstatedir=/var/mysql \
           --without-perl \
           --with-unix-socket-path=/var/mysql/mysql.sock
</pre>

<p>
The following is also known to work:

</p>

<pre>shell&gt; env CC=gcc CXX=gcc CXXFLAGS=-O3 \
       ./configure \
           --prefix=/usr/local/mysql \
           --with-unix-socket-path=/var/mysql/mysql.sock
</pre>

<p>
You can change the directory locations if you wish, or just use the
defaults by not specifying any locations.

</p>
<p>
If you have problems with performance under heavy load, try using the
<code>--skip-thread-priority</code> option to <code>mysqld</code>!  This will run
all threads with the same priority; on BSDI Version 3.1, this gives better
performance (at least until BSDI fixes their thread scheduler).

</p>
<p>
If you get the error <code>virtual memory exhausted</code> while compiling,
you should try using <code>ulimit -v 80000</code> and run <code>make</code> again.
If this doesn't work and you are using <code>bash</code>, try switching to
<code>csh</code> or <code>sh</code>; some BSDI users have reported problems with
<code>bash</code> and <code>ulimit</code>.

</p>


<h4><a name="BSDI4" href="manual.ja_toc.html#BSDI4">4.12.12.3  BSD/OS Version 4.x Notes</a></h4>

<p>
BSDI Version 4.x has some thread-related bugs.  If you want to use
<strong>MySQL</strong> on this, you should install all thread-related patches.  At
least M400-023 should be installed.

</p>
<p>
On some BSDI Version 4.x systems, you may get problems with shared libraries.
The symptom is that you can't execute any client programs, for example,
<code>mysqladmin</code>.  In this case you need to reconfigure not to use
shared libraries with the <code>--disable-shared</code> option to configure.

</p>
<p>
Some customers have had problems on BSDI 4.0.1 that the <code>mysqld</code>
binary after a while can't open tables.  This is because some
library/system related bug causes <code>mysqld</code> to change current
directory without asking for this!

</p>
<p>
The fix is to either upgrade to 3.23.34 or after running <code>configure</code>
remove the line <code>#define HAVE_REALPATH</code> from <code>config.h</code>
before running make.

</p>
<p>
Note that the above means that you can't symbolic link a database directories
to another database directory or symbolic link a table to another database
on BSDI!  (Making a symbolic link to another disk is ok).

</p>


<h3><a name="SCO" href="manual.ja_toc.html#SCO">4.12.13  SCO Notes</a></h3>

<p>
The current port is tested only on a ``sco3.2v5.0.4'' and
``sco3.2v5.0.5'' system.  There has also been a lot of progress on a
port to ``sco 3.2v4.2''.

</p>
<p>
For the moment the recommended compiler on OpenServer is gcc 2.95.2.  With this
you should be able to compile <strong>MySQL</strong> with just:

</p>

<pre>CC=gcc CXX=gcc ./configure ... (options)
</pre>


<ol>
<li>

For OpenServer 5.0.X you need to use GDS in Skunkware 95 (95q4c).  This
is necessary because GNU <code>gcc</code> 2.7.2 in Skunkware 97 does not have
GNU <code>as</code>.  You can also use <code>egcs</code> 1.1.2 or newer
<a href="http://www.egcs.com/">http://www.egcs.com/</a>.  If you are using <code>egcs</code> 1.1.2 you have
to execute the following command:


<pre>shell&gt; cp -p /usr/include/pthread/stdtypes.h /usr/local/lib/gcc-lib/i386-pc-sco3.2v5.0.5/egcs-2.91.66/include/pthread/
</pre>

</li><li>

You need the port of GCC 2.5.x for this product and the Development
system.  They are required on this version of SCO Unix.  You cannot
just use the GCC Dev system.

</li><li>

You should get the FSU Pthreads package and install it first.  This can be
found at
<a href="http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz">http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz</a>.
You can also get a precompiled package from
<a href="http://www.mysql.com/Downloads/SCO/FSU-threads-3.5c.tar.gz">http://www.mysql.com/Downloads/SCO/FSU-threads-3.5c.tar.gz</a>.

</li><li>

FSU Pthreads can be compiled with SCO Unix 4.2 with tcpip.  Or
OpenServer 3.0 or Open Desktop 3.0 (OS 3.0 ODT 3.0), with the SCO
Development System installed using a good port of GCC 2.5.x ODT or OS
3.0 you will need a good port of GCC 2.5.x There are a lot of problems
without a good port.  The port for this product requires the SCO Unix
Development system.  Without it, you are missing the libraries and the
linker that is needed.

</li><li>

To build FSU Pthreads on your system, do the following:


<ol>
<li>

Run <code>./configure</code> in the <tt>`threads/src'</tt> directory and select
the SCO OpenServer option. This command copies <tt>`Makefile.SCO5'</tt> to
<tt>`Makefile'</tt>.

</li><li>

Run <code>make</code>.

</li><li>

To install in the default <tt>`/usr/include'</tt> directory, login as root,
then <code>cd</code> to the <tt>`thread/src'</tt> directory, and run <code>make
install</code>.
</li></ol>

</li><li>

Remember to use GNU <code>make</code> when making <strong>MySQL</strong>.

</li><li>

If you don't start <code>safe_mysqld</code> as root, you probably will get only the
default 110 open files per process.  <code>mysqld</code> will write a note about this
in the log file.

</li><li>

With SCO 3.2V5.0.5, you should use FSU Pthreads version 3.5c or newer.
You should also use gcc 2.95.2 or newer!

The following <code>configure</code> command should work:


<pre>shell&gt; ./configure --prefix=/usr/local/mysql --disable-shared
</pre>

</li><li>

With SCO 3.2V4.2, you should use FSU Pthreads version 3.5c or newer.
The following <code>configure</code> command should work:


<pre>shell&gt; CFLAGS="-D_XOPEN_XPG4" CXX=gcc CXXFLAGS="-D_XOPEN_XPG4" \
       ./configure \
           --with-debug --prefix=/usr/local/mysql \
           --with-named-thread-libs="-lgthreads -lsocket -lgen -lgthreads" \
           --with-named-curses-libs="-lcurses"
</pre>

You may get some problems with some include files. In this case, you can
find new SCO-specific include files at
<a href="http://www.mysql.com/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz">http://www.mysql.com/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz</a>.
You should unpack this file in the <tt>`include'</tt> directory of your 
<strong>MySQL</strong> source tree.
</li></ol>

<p>
SCO development notes:

</p>

<ul>
<li>

<strong>MySQL</strong> should automatically detect FSU Pthreads and link <code>mysqld</code>
with <code>-lgthreads -lsocket -lgthreads</code>.

</li><li>

The SCO development libraries are re-entrant in FSU Pthreads.  SCO claims
that its libraries' functions are re-entrant, so they must be reentrant with
FSU Pthreads.  FSU Pthreads on OpenServer tries to use the SCO scheme to
make re-entrant libraries.

</li><li>

FSU Pthreads (at least the version at <a href="http://www.mysql.com/">http://www.mysql.com/</a>) comes 
linked with GNU <code>malloc</code>.  If you encounter problems with memory usage, 
make sure that <tt>`gmalloc.o'</tt> is included in <tt>`libgthreads.a'</tt> and 
<tt>`libgthreads.so'</tt>.

</li><li>

In FSU Pthreads, the following system calls are pthreads-aware: <code>read()</code>,
<code>write()</code>, <code>getmsg()</code>, <code>connect()</code>, <code>accept()</code>,
<code>select()</code>, and <code>wait()</code>.
</li></ul>

<p>
If you want to install DBI on SCO, you have to edit the <tt>`Makefile'</tt> in
DBI-xxx and each subdirectory.

</p>
<p>
Note that the following assumes gcc 2.95.2 or newer:

</p>

<pre>OLD:                                  NEW:
CC = cc                               CC = gcc
CCCDLFLAGS = -KPIC -W1,-Bexport       CCCDLFLAGS = -fpic
CCDLFLAGS = -wl,-Bexport              CCDLFLAGS =

LD = ld                               LD = gcc -G -fpic
LDDLFLAGS = -G -L/usr/local/lib       LDDLFLAGS = -L/usr/local/lib
LDFLAGS = -belf -L/usr/local/lib      LDFLAGS = -L/usr/local/lib

LD = ld                               LD = gcc -G -fpic
OPTIMISE = -Od         		      OPTIMISE = -O1

OLD:
CCCFLAGS = -belf -dy -w0 -U M_XENIX -DPERL_SCO5 -I/usr/local/include

NEW:
CCFLAGS = -U M_XENIX -DPERL_SCO5 -I/usr/local/include
</pre>

<p>
This is because the Perl dynaloader will not load the <code>DBI</code> modules
if they were compiled with <code>icc</code> or <code>cc</code>.

</p>
<p>
Perl works best when compiled with <code>cc</code>.

</p>


<h3><a name="SCO_Unixware" href="manual.ja_toc.html#SCO_Unixware">4.12.14  SCO Unixware Version 7.0 Notes</a></h3>

<p>
You must use a version of <strong>MySQL</strong> at least as recent as Version 3.22.13
because that version fixes some portability problems under Unixware.

</p>
<p>
We have been able to compile <strong>MySQL</strong> with the following <code>configure</code>
command on Unixware Version 7.0.1:

</p>

<pre>CC=cc CXX=CC ./configure --prefix=/usr/local/mysql
</pre>

<p>
If you want to use <code>gcc</code>, you must use <code>gcc</code> 2.95.2 or newer.

</p>


<h3><a name="IBM-AIX" href="manual.ja_toc.html#IBM-AIX">4.12.15  IBM-AIX notes</a></h3>
<p>
<a name="IDX263"></a>

</p>
<p>
Automatic detection of <code>xlC</code> is missing from Autoconf, so a
<code>configure</code> command something like this is needed when compiling
<strong>MySQL</strong> (This example uses the IBM compiler):

</p>

<pre>export CC="xlc_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192 "
export CXX="xlC_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192"
export CFLAGS="-I /usr/local/include"
export LDLFAGS="-L /usr/local/lib"
export CPPFLAGS=$CFLAGS
export CXXFLAGS=$CFLAGS

./configure --prefix=/usr/local \
		--localstatedir=/var/mysql \
		--sysconfdir=/etc/mysql \
		--sbindir='/usr/local/bin' \
		--libexecdir='/usr/local/bin' \
		--enable-thread-safe-client \
		--enable-large-files
</pre>

<p>
Above are the options used to compile the <strong>MySQL</strong> distribution that
can be found at <a href="http://www-frec.bull.com/">http://www-frec.bull.com/</a>.

</p>
<p>
If you change the <code>-O3</code> to <code>-O2</code> in the above configure line,
you must also remove the <code>-qstrict</code> option (this is a limitation in
the IBM C compiler).

</p>
<p>
If you are using <code>gcc</code> or <code>egcs</code> to compile <strong>MySQL</strong>, you
<strong>MUST</strong> use the <code>-fno-exceptions</code> flag, as the exception
handling in <code>gcc</code>/<code>egcs</code> is not thread safe!  (This is tested with
<code>egcs</code> 1.1.).  There are also some known problems with IBM's assembler,
which may cause it to generate bad code when used with gcc.

</p>
<p>
We recommend the following <code>configure</code> line with <code>egcs</code> and
<code>gcc 2.95</code> on AIX:

</p>

<pre>CC="gcc -pipe -mcpu=power -Wa,-many" \
CXX="gcc -pipe -mcpu=power -Wa,-many" \
CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti" \
./configure --prefix=/usr/local/mysql --with-low-memory
</pre>

<p>
The <code>-Wa,-many</code> is necessary for the compile to be successful.  IBM is
aware of this problem but is in to hurry to fix it because of the workaround
available.  We don't know if the <code>-fno-exceptions</code> is required with 
<code>gcc 2.95</code>, but as <strong>MySQL</strong> doesn't use exceptions and the above 
option generates faster code, we recommend that you should always use this 
option with <code>egcs / gcc</code>.

</p>
<p>
If you get a problem with assembler code try changing the -mcpu=xxx to
match your cpu. Typically power2, power, or powerpc may need to be used,
alternatively you might need to use 604 or 604e. I'm not positive but I
would think using "power" would likely be safe most of the time, even on
a power2 machine.

</p>
<p>
If you don't know what your cpu is then do a "uname -m", this will give
you back a string that looks like "000514676700", with a format of
xxyyyyyymmss where xx and ss are always 0's, yyyyyy is a unique system
id and mm is the id of the CPU Planar. A chart of these values can be
found at
<a href="http://www.rs6000.ibm.com/doc_link/en_US/a_doc_lib/cmds/aixcmds5/uname.htm">http://www.rs6000.ibm.com/doc_link/en_US/a_doc_lib/cmds/aixcmds5/uname.htm</a>.
This will give you a machine type and a machine model you can use to
determine what type of cpu you have.

</p>
<p>
If you have problems with signals (<strong>MySQL</strong> dies unexpectedly
under high load) you may have found an OS bug with threads and
signals.  In this case you can tell <strong>MySQL</strong> not to use signals by
configuring with:

</p>

<pre>shell&gt; CFLAGS=-DDONT_USE_THR_ALARM CXX=gcc \
       CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti -DDONT_USE_THR_ALARM" \
       ./configure --prefix=/home/monty --with-debug --with-low-memory
</pre>

<p>
This doesn't affect the performance of <strong>MySQL</strong>, but has the side
effect that you can't kill clients that are ``sleeping'' on a connection with
<code>mysqladmin kill</code> or <code>mysqladmin shutdown</code>.  Instead, the client
will die when it issues its next command.

</p>
<p>
On some versions of AIX, linking with <code>libbind.a</code> makes
<code>getservbyname</code> core dump.  This is an AIX bug and should be reported
to IBM.

</p>

<p>
For AIX 4.2.1 and gcc you have to do the following changes.

</p>
<p>
After configuring, edit <tt>`config.h'</tt> and <tt>`include/my_config.h'</tt>
and change the line that says

</p>

<pre>#define HAVE_SNPRINTF 1
</pre>

<p>
to

</p>

<pre>#undef HAVE_SNPRINTF
</pre>

<p>
And finally, in <tt>`mysqld.cc'</tt> you need to add a prototype for initgoups.

</p>

<pre>#ifdef _AIX41
extern "C" int initgroups(const char *,int);
#endif
</pre>



<h3><a name="HP-UX_10.20" href="manual.ja_toc.html#HP-UX_10.20">4.12.16  HP-UX Version 10.20 Notes</a></h3>

<p>
There are a couple of small problems when compiling <strong>MySQL</strong> on
HP-UX.  We recommend that you use <code>gcc</code> instead of the HP-UX native
compiler, because <code>gcc</code> produces better code!

</p>
<p>
We recommend using gcc 2.95 on HP-UX.  Don't use high optimization
flags (like -O6) as this may not be safe on HP-UX.

</p>
<p>
Note that MIT-pthreads can't be compiled with the HP-UX compiler
because it can't compile <code>.S</code> (assembler) files.

</p>
<p>
The following configure line should work:

</p>

<pre>CFLAGS="-DHPUX -I/opt/dce/include" CXXFLAGS="-DHPUX -I/opt/dce/include -felide-constructors -fno-exceptions -fno-rtti" CXX=gcc ./configure --with-pthread --with-named-thread-libs='-ldce' --prefix=/usr/local/mysql --disable-shared
</pre>

<p>
If you are compiling <code>gcc</code> 2.95 yourself, you should NOT link it with
the DCE libraries (<code>libdce.a</code> or <code>libcma.a</code>) if you want to compile
<strong>MySQL</strong> with MIT-pthreads.  If you mix the DCE and MIT-pthreads
packages you will get a <code>mysqld</code> to which you cannot connect.  Remove
the DCE libraries while you compile <code>gcc</code> 2.95!

</p>


<h3><a name="HP-UX_11.x" href="manual.ja_toc.html#HP-UX_11.x">4.12.17  HP-UX Version 11.x Notes</a></h3>

<p>
For HPUX Version 11.x we recommend <strong>MySQL</strong> Version 3.23.15 or later.

</p>
<p>
Because of some critical bugs in the standard HPUX libraries, one should
install the following patches before trying to run <strong>MySQL</strong> on HPUX 11.0:

</p>

<pre>PHKL_22840 Streams cumulative
PHNE_22397 ARPA cumulative
</pre>

<p>
This will solve a problem that one gets <code>EWOULDBLOCK</code> from <code>recv()</code> 
and <code>EBADF</code> from <code>accept()</code> in threaded applications.

</p>
<p>
If you are using <code>gcc</code> 2.95.1 on an unpatched HPUX 11.x system,
you will get the error:

</p>

<pre>In file included from /usr/include/unistd.h:11,
                 from ../include/global.h:125,
                 from mysql_priv.h:15,
                 from item.cc:19:
/usr/include/sys/unistd.h:184: declaration of C function ...
/usr/include/sys/pthread.h:440: previous declaration ...
In file included from item.h:306,
                 from mysql_priv.h:158,
                 from item.cc:19:
</pre>

<p>
The problem is that HP-UX doesn't define <code>pthreads_atfork()</code> consistently.
It has conflicting prototypes in
<tt>`/usr/include/sys/unistd.h'</tt>:184 and
<tt>`/usr/include/sys/pthread.h'</tt>:440 (details below).

</p>
<p>
One solution is to copy <tt>`/usr/include/sys/unistd.h'</tt> into
<tt>`mysql/include'</tt> and edit <tt>`unistd.h'</tt> and change it to match
the definition in <tt>`pthread.h'</tt>.  Here's the diff:

</p>

<pre>183,184c183,184
&lt;      extern int pthread_atfork(void (*prepare)(), void (*parent)(),
&lt;                                                                  void (*child)());
---
&gt;      extern int pthread_atfork(void (*prepare)(void), void (*parent)(void),
&gt;                                                                  void (*child)(void));
</pre>

<p>
After this, the following configure line should work:

</p>

<pre>CFLAGS="-fomit-frame-pointer -O3 -fpic" CXX=gcc CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti -O3" ./configure --prefix=/usr/local/mysql --disable-shared
</pre>

<p>
Here is some information that a HPUX Version 11.x user sent us about compiling
<strong>MySQL</strong> with HPUX:x compiler:

</p>

<pre> Environment:
      proper compilers.
         setenv CC cc
         setenv CXX aCC
      flags
         setenv CFLAGS -D_REENTRANT
         setenv CXXFLAGS -D_REENTRANT
         setenv CPPFLAGS -D_REENTRANT
     % aCC -V
     aCC: HP ANSI C++ B3910B X.03.14.06
     % cc -V /tmp/empty.c
     cpp.ansi: HP92453-01 A.11.02.00 HP C Preprocessor (ANSI)
     ccom: HP92453-01 A.11.01.00 HP C Compiler
     cc: "/tmp/empty.c", line 1: warning 501: Empty source file.
</pre>


<pre>  configuration:
     ./configure  --with-pthread        \
     --prefix=/source-control/mysql     \
     --with-named-thread-libs=-lpthread \
     --with-low-memory

    added '#define _CTYPE_INCLUDED' to include/m_ctype.h. This
    symbol is the one defined in HP's /usr/include/ctype.h:

     /* Don't include std ctype.h when this is included */
     #define _CTYPE_H
     #define __CTYPE_INCLUDED
     #define _CTYPE_INCLUDED
     #define _CTYPE_USING   /* Don't put names in global namespace. */
</pre>


<ul>
<li>

I had to use the compile-time flag <code>-D_REENTRANT</code> to get the compiler 
to recognize the prototype for <code>localtime_r</code>. Alternatively I could have
supplied the prototype for <code>localtime_r</code>. But I wanted to catch other 
bugs without needing to run into them.  I wasn't sure where I needed it, so I
added it to all flags.
</li><li>

The optimization flags used by <strong>MySQL</strong> (-O3) are not recognized by HP's
compilers.  I did not change the flags.
</li></ul>

<p>
If you get the following error from <code>configure</code>

</p>

<pre>checking for cc option to accept ANSI C... no
configure: error: MySQL requires a ANSI C compiler (and a C++ compiler). Try gcc. See the Installation chapter in the Reference Manual.
</pre>

<p>
Check that you don't have the path to the K&amp;R compiler before the path
to the HP-UX C and C++ compiler.

</p>


<h3><a name="Mac_OS_X" href="manual.ja_toc.html#Mac_OS_X">4.12.18  Mac OS X Notes</a></h3>



<h4><a name="Mac_OS_X_Public_Data" href="manual.ja_toc.html#Mac_OS_X_Public_Data">4.12.18.1  Mac OS X Public beta</a></h4>

<p>
<strong>MySQL</strong> should work without any problems on Mac OS X Public Beta
(Darwin).  You don't need the pthread patches for this OS!

</p>


<h4><a name="Mac_OS_X_Server" href="manual.ja_toc.html#Mac_OS_X_Server">4.12.18.2  Mac OS X Server</a></h4>

<p>
Before trying to configure <strong>MySQL</strong> on Mac OS X server you must
first install the pthread package from
<a href="http://www.prnet.de/RegEx/mysql.html">http://www.prnet.de/RegEx/mysql.html</a>.

</p>
<p>
Our binary for Mac OS X is compiled on Rhapsody 5.5 with the following
configure line:

</p>

<pre>CC=gcc CFLAGS="-O2 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O2 -fomit-frame-pointer" ./configure --prefix=/usr/local/mysql "--with-comment=Official MySQL binary" --with-extra-charsets=complex  --disable-shared
</pre>


<pre>alias mysql '/usr/local/mysql/bin/mysql'
alias mysqladmin '/usr/local/mysql/bin/mysqladmin'
</pre>



<h3><a name="BEOS" href="manual.ja_toc.html#BEOS">4.12.19  BeOS Notes</a></h3>

<p>
We are really interested in getting <strong>MySQL</strong> to work on BeOS, but
unfortunately we don't have any person who knows BeOS or has time to do 
a port.

</p>
<p>
We are interested in finding someone to do a port, and we will help them
with any technical questions they may have while doing the port.

</p>
<p>
We have previously talked with some BeOS developers that have said that
<strong>MySQL</strong> is 80% ported to BeOS, but we haven't heard from these
in a while.

</p>


<h2><a name="Windows" href="manual.ja_toc.html#Windows">4.13  Windows Notes</a></h2>

<p>
この節では Windows 上での <strong>MySQL</strong> の使用とインストールについて述べます。
これは <strong>MySQL</strong> Windows 配布物の <tt>`README'</tt> ファイルにも述べられています。

</p>



<h3><a name="Windows_installation" href="manual.ja_toc.html#Windows_installation">4.13.1  Windows への <strong>MySQL</strong> のインストール</a></h3>

<p>
もし <strong>MySQL</strong> の配布物を持っていないなら、最初に以下からダウンロードすべきです：
<a href="http://www.mysql.com/">http://www.mysql.com/</a>

</p>
<p>
もし他のプログラムから <strong>MySQL</strong> に接続しようと考えているなら、
多分 <strong>MyODBC</strong> ドライバーも必要でしょう。 これは <strong>MyODBC</strong> download page
にあります。(<a href="http://www.mysql.com/downloads/api-myodbc.html">http://www.mysql.com/downloads/api-myodbc.html</a>)

</p>
<p>
日本語版の <strong>MyODBC</strong> ドライバー は：
<a href="http://www.softagency.co.jp/"><strong>MyODBC</strong> 日本語版</a>

</p>
<p>
それぞれの配布物のインストールをするには、ダウンロードした物を
どこか からのディレクトリで unzip し、<code>Setup.exe</code> プログラムを
実行します。

</p>
<p>
標準では、<strong>MySQL</strong>-Windows は <tt>`C:\mysql'</tt> にインストールされるように
なっています。 もし違う場所に <strong>MySQL</strong> をインストールしたいなら、
一度 <tt>`C:\mysql'</tt> にインストールした後に、そのフォルダを移動します。
 <strong>MySQL</strong> を <tt>`C:\mysql'</tt> から移動したならば、
 <code>mysqld</code> に対して、移動先を必ず教えねばなりません。
もし <strong>MySQL</strong> を <tt>`D:\programs\mysql'</tt> に移動したなら,
<code>mysqld</code> を以下のようにして起動します：
<code>D:\programs\mysql\bin\mysqld --basedir D:\programs\mysql</code>
なお、 <code>C:\mysql\bin\mysqld --help</code> とすると、全てのオプションが表示されます！

</p>
<p>
正式版の <strong>MySQL</strong> では、<tt>`C:\my.cnf'</tt> ファイルを作成し、
そこに <strong>MySQL</strong> サーバーのオプションを記述することが可能です。
<tt>`\mysql\my-xxxxx.cnf'</tt> を <tt>`C:\my.cnf'</tt> にコピーし、
ご自分の環境に合わせて編集して使用してください。
全てのパスには <code>\</code> ではなくて <code>/</code> を使用しなくてはなりません。
もし <code>\</code> を使用する場合には、これを２倍します。 <strong>MySQL</strong> では
 <code>\</code> はエスケープ文字だからです。
 「<a href="manual.ja_Installing.html#Option_files">4.16.5  オプションファイル ( <code>my.cnf</code> )</a>」節参照.

</p>



<h3><a name="Win95_start" href="manual.ja_toc.html#Win95_start">4.13.2  Starting MySQL on Windows 95 or Windows 98</a></h3>

<p>
<strong>MySQL</strong> は TCP/IP をクライアントからサーバーへの接続に使用します。
こうすればネットワーク上のどのマシンからでも <strong>MySQL</strong> サーバーに
接続できるようになります。 このため、<strong>MySQL</strong> を起動する前に、
あなたは TCP/IP をインストールしなくてはなりません。
これは Windows CD-ROM にあります。

</p>
<p>
もし古い Win95 (for example OSR2) を使用しているなら、
これは古い Winsock パッケージを使用しているかもしれません！
<strong>MySQL</strong> は Winsock 2 を要求します！ 最新の Winsock は
<a href="http://www.microsoft.com/">http://www.microsoft.com/</a> にあります。
 Win98 はデフォルトで新しい Winsock 2 ライブラリですので、
これは Win98 には当てはまりません。

</p>
<p>
2つの違う <strong>MySQL</strong> サーバーがあります：

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><code>mysqld</code> </td><td> フルデバッグを有効にして、自動 memory allocation をチェックするようにコンパイル
</td></tr>
<tr><td><code>mysqld-opt</code> </td><td> Pentium プロセッサー用に最適化した物
</td></tr>
</tbody></table>

<p>
上に示されている両方とも i386 以上の Intel プロセッサ上で動作します。

</p>
<p>
<code>mysqld</code> サーバーを起動するには, MS-DOS を起動し、以下のように入力します：

</p>

<pre>C:\mysql\bin\mysqld
</pre>

<p>
これは <code>mysqld</code> をバックグラウンドで動かします。

</p>
<p>
<strong>MySQL</strong> サーバーの kill には：

</p>

<pre>C:\mysql\bin\mysqladmin -u root shutdown
</pre>

<p>
注意: Win95/Win98 は名前付パイプをサポートしていません。Win95/Win98 では、
NT サーバ上で動いているリモートの <strong>MySQL</strong> への接続だけに、名前付
パイプを使用できます。

</p>
<p>
<code>mysqld</code> が起動しない場合、<tt>`\mysql\mysql.err'</tt> ファイルがその理
由を何か含んでいないかどうかチェックしてください。<code>mysqld
--standalone</code> で起動を試みることもできます; この場合、これの解決の助けに
なるであろう、いくつかの有用な情報が画面上で得られます。

</p>
<p>
最後の選択肢は <code>mysqld</code> を <code>--debug</code> 付きで起動することです。
この場合、<code>mysqld</code> はログをファイル <tt>`\mysqld.trace'</tt> に書き出し
ます。これには、<code>mysqld</code> が何故起動しないかの理由が含まれます。
これについてのバグレポートを作る場合は、間違っていると思われる部分の行だけ
をメーリングリストに送ってください。

</p>


<h3><a name="NT_start" href="manual.ja_toc.html#NT_start">4.13.3  Starting MySQL on NT or Windows 2000</a></h3>

<p>
Win95/Win98 セクションは NT/Win2000 上の <strong>MySQL</strong> にもあてはまり
ますが、次の違いがあります:

</p>
<p>
NT 上で TCP/IP を用いて <strong>MySQL</strong> を動作させるには、service pack 3(以上) が必須です！ 

</p>
<p>
注意: 次の NT にあてはまる全ては、Win2000 にもあてはまります！

</p>
<p>
NT/Win2000 では、サーバ名は <code>mysqld-nt</code> です。通常
<strong>MySQL</strong> は NT/Win2000 のサービスとしてインストールすべきです:

</p>

<pre>C:\mysql\bin\mysqld-nt --install
</pre>

<p>
(<code>mysqld</code> や <code>mysqld-opt</code> を NT 上で動作させることも出来ます。
しかしこれらは、サービスとしてスタートさせることが出来ず、また、
名前付パイプ の使用も出来ません。)

</p>
<p>
<strong>MySQL</strong> サービスの起動と停止は：

</p>

<pre>NET START mysql
NET STOP mysql
</pre>

<p>
この場合、<code>mysqld</code> に、いかなるオプションも使用できないことに注意！

</p>
<p>
もし <code>mysqld-nt</code> をオプション無しで起動する必要があるならば、
 <code>mysqld-nt</code> をスタンドアローンのプログラムとして NT 上で走らせることも
出来ます！ もし <code>mysqld-nt</code> をオプション無しで NT 上で起動すると、
 <code>mysqld-nt</code> は自分自身をサービスとして立ち上げようとします。
デフォルトのサービスオプションを使用して。
 もし既に <code>mysqld-nt</code> を止めていたなら、 <code>NET START mysql</code> で
起動しなくてはなりません。

</p>
<p>
サービスは <code>MySQL</code> という名前で登録されます。 一度インストールしたら、
これは Services Control Manager (SCM) Utility (コントロールパネルにある)
を使用するか、<code>NET START MySQL</code> コマンドを使用するかして、
起動されなくてはなりません。
もし、オプションがなにも指定されていないなら、<code>MySQL</code> サービス開始前に、
SCM Utility の "Startup parameters" に記述しなくてはなりません。
一度走れば、 <code>mysqld-nt</code> は <code>mysqladmin</code> や SCM utility 、
<code>NET STOP MySQL</code> コマンドで停止できます。
もし SCM を使用して <code>mysqld-nt</code> 停止するなら、
 <code>mysqld shutdown normally</code> についての変なメッセージがでます。
サービスとして実行すると、<code>mysql-nt</code> はコンソールへのアクセスを持た
ないので、メッセージは何も見られません。

</p>
<p>
NT では以下のエラーメッセージが出るかもしれません：

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td>Permission Denied </td><td> <code>mysqld-nt.exe</code> が見つからないことを意味します。
</td></tr>
<tr><td>Cannot Register </td><td> path が正しくないことを意味します。
</td></tr>
<tr><td>Failed to install service. </td><td> サービスがすでにインストールされているか、Service Control Manager が間違った状態にあります。
</td></tr>
</tbody></table>

<p>
もし <code>mysqld-nt</code> をサービスとしてインストールする場合に
問題が発生した場合、フルパスで実行してみてください：

</p>

<pre>C:\mysql\bin\mysqld-nt --install
</pre>

<p>
もしこれで動作しないようなら、レジストリ内のパスを修正すれば <code>mysqld-nt</code> を
起動できるでしょう。

</p>
<p>
サービスとして <code>mysqld-nt</code> を起動したくないなら以下のようにします：

</p>

<pre>C:\mysql\bin\mysqld-nt --standalone
</pre>

<p>
or

</p>

<pre>C:\mysql\bin\mysqld --standalone --debug
</pre>

<p>
最新のバージョンでは、デバッグのトレースを <tt>`C:\mysqld.trace'</tt> に出します。

</p>


<h3><a name="Windows_running" href="manual.ja_toc.html#Windows_running">4.13.4  Windows 上で <strong>MySQL</strong> を実行</a></h3>

<p>
<a name="IDX264"></a>
<a name="IDX265"></a>

</p>
<p>
<strong>MySQL</strong>は全ての Windows プラットフォーム上で TCP/IP をサポートし、
NT 上で 名前つきパイプ(named pipe) をサポートします。
デフォルトは、NT 上でローカルに接続するときに名前つきパイプが使用され、
そのほかの全ての場合で TCP/IP が使用されます。
 ホスト名はどのプロトコルを使用するかを決めます：

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>Host name</strong> </td><td> <strong>Protocol</strong>
</td></tr>
<tr><td>NULL (none) </td><td> NT では最初に名前つきパイプ(named pipe)を試み、動かなければ TCP/IP を使用します。 Win95/Win98 では TCP/IP を使用します。
</td></tr>
<tr><td>. </td><td> 名前つきパイプ(named pipe)
</td></tr>
<tr><td>localhost </td><td> 現在のホストへ TCP/IP で接続
</td></tr>
<tr><td>hostname </td><td> TCP/IP
</td></tr>
</tbody></table>

<p>
<strong>MySQL</strong> クライアントに named pipes を強制的に使用させるには、
<code>--pipe</code> オプションか、ホストに <code>.</code> を指定します。
そして、<code>--socket</code> オプションでパイプの名前を指定します。

</p>
<p>
<strong>MySQL</strong> が動いているかどうかは、以下のようにして確認できます：

</p>

<pre>C:\mysql\bin\mysqlshow
C:\mysql\bin\mysqlshow -u root mysql
C:\mysql\bin\mysqladmin version status proc
C:\mysql\bin\mysql test
</pre>

<p>
もし Win95/Win98 上で <code>mysqld</code> への接続が遅いようなら、DNS の問題かもしれません。
この場合、 <code>mysqld</code> を <code>--skip-name-resolve</code> オプションで
起動し、<strong>MySQL</strong> 許可テーブルには、<code>localhost</code> と IP アドレスだけ
使用します。
NT上で走る <code>mysqld-nt</code> <strong>MySQL</strong> サーバーに対しての接続時に
 DNS を避けるために、 <code>--pipe</code> 引数を指定して名前つきパイプ(named pipe)を
使用できます。 これはほとんどの <strong>MySQL</strong> クライアントで動きます。

</p>
<p>
2つの <strong>MySQL</strong> コマンドラインツールがあります：
<table border="" width="100%" nosave="">
<tbody><tr><td><code>mysql</code> </td><td> ネイティブな Windows 用にコンパイルされている。非常に限られたコマンドライン編集機能しか持たない
</td></tr>
<tr><td><code>mysqlc</code> </td><td> Cygnus GNU コンパイラとライブラリを用いてコンパイルされている。GNU readline によるコマンドライン編集機能を持つ。
</td></tr>
</tbody></table>

</p>
<p>
もし <code>mysqlc.exe</code> を使用したいなら, 
<tt>`C:\mysql\lib\cygwinb19.dll'</tt> を <tt>`\windows\system'</tt> (もしくは同様のパス)
にコピーしなくてはなりません。

</p>
<p>
Windows の <strong>MySQL</strong> の初期の権限は、ローカルの全てのユーザーに
対して、全てのデータベースで全ての権限が与えられています。
<strong>MySQL</strong> を安全にするために、全てのユーザーにパスワードを
設定すべきです。また、<code>mysql.user</code> テーブルから
<code>Host='localhost'</code> で <code>User=''</code> となっているレコードを
削除すべきです。

</p>
<p>
<code>root</code> ユーザーにもパスワードを設定すべきです：
(次の例は、匿名ユーザを削除してから開始します。'test' データベースへのアク
セスは全員に許可されます)

</p>

<pre>C:\mysql\bin\mysql mysql
mysql&gt; DELETE FROM user WHERE Host='localhost' AND User='';
mysql&gt; QUIT
C:\mysql\bin\mysqladmin reload
C:\mysql\bin\mysqladmin -u root password your_password
</pre>

<p>
パスワードを設定した後、もし <code>mysqld</code> サーバーを停止させるなら、
以下のようにします：

</p>

<pre>mysqladmin --user=root --password=your_password shutdown
</pre>

<p>
もしあなたが Windows 下で、古い <strong>MySQL</strong> バージョン 3.21 のシェアウェ
アバージョンを使用しているなら、上記のコマンドは次のエラーで失敗します:
<code>parse error near 'SET OPTION password'</code>。これは、<strong>MySQL</strong> バー
ジョン 3.21 に基づく古いシェアウェアバージョンは、<code>SET PASSWORD</code> コマ
ンドを持っていないためです。この場合の回避策は、バージョン 3.22 シェアウェ
アにアップグレードすることです。

</p>
<p>
より新しい <strong>MySQL</strong> バージョンでは、<code>GRANT</code> と <code>REVOKE</code> コ
マンドで、簡単に新しいユーザを追加でき、権限を変更することができます。
 「<a href="manual.ja_Reference.html#GRANT">7.35  <code>GRANT</code> と <code>REVOKE</code> 構文</a>」節参照。

</p>

<p>
<a name="IDX266"></a>
<a name="IDX267"></a>


</p><h3><a name="Windows_and_SSH" href="manual.ja_toc.html#Windows_and_SSH">4.13.5  SSH を利用してリモートの <strong>MySQL</strong> に Windows から接続</a></h3>

<p>
以下は SSH を用いてリモートの MySQL サーバに安全に接続するための
方法について述べたものです。
(by David Carlson <a href="mailto:dcarlson@mplcomm.com">dcarlson@mplcomm.com</a>).

</p>

<ul>
<li>

Install an SSH client on your windows machine - As a user, the best non-free
one I've found is from <code>SecureCRT</code> from <a href="http://www.vandyke.com/">http://www.vandyke.com/</a>.
Another option is <code>f-secure</code> from <a href="http://www.f-secure.com/">http://www.f-secure.com/</a>. You
can also find some free ones on <strong>Google</strong> at
<a href="http://directory.google.com/Top/Computers/Security/Products_and_Tools/Cryptography/SSH/Clients/Windows/">http://directory.google.com/Top/Computers/Security/Products_and_Tools/Cryptography/SSH/Clients/Windows/</a>.

</li><li>

SSH クライアントを起動。
Set <code>Host_Name = yourmysqlserver_URL_or_IP</code>. 
Set <code>userid=your_userid</code> to log in to your server (probably not the same
as your <strong>MySQL</strong> login/password.

</li><li>

Set up port forwarding. Either do a remote forward (Set <code>local_port: 3306</code>, <code>remote_host: yourmysqlservername_or_ip</code>, <code>remote_port: 3306</code> )
or a local forward (Set <code>port: 3306</code>,  <code>host: localhost</code>, <code>remote port: 3306</code>).

</li><li>

Save everything, otherwise you'll have to redo it the next time.

</li><li>

Log in to your server with SSH session you just created.

</li><li>

Start some ODBC application on your windows machine (for example Access).

</li><li>

Create a new file in windows and link to <strong>MySQL</strong> using the ODBC driver the same way
you normally do, EXCEPT type in <code>localhost</code> for the <strong>MySQL</strong> host server - not <code>yourmysqlservername</code>.
</li></ul>

<p>
You should now have your ODBC connection to <strong>MySQL</strong> encrypted using SSH.

</p>
<p>
<a name="IDX268"></a>
<a name="IDX269"></a>
<a name="IDX270"></a>


</p><h3><a name="Windows_symbolic_links" href="manual.ja_toc.html#Windows_symbolic_links">4.13.6  Windows において、異なるディスクをまたがるようにデータを分割する</a></h3>

<p>
Windows 上では、3.23.16 以上のバージョンの <strong>MySQL</strong> では <code>-DUSE_SYMDIR</code>
オプションを有効にしてコンパイルされています。これはデータベースに
対するシンボリックリンクを追加することで異なるディスクにデータベースを
置くことを可能にします（Unix におけるシンボリック・リンクと同様の
方法で）。

</p>
<p>
Windows 上では、宛先ディレクトリへのパスを持つファイルを作成し、
そのファイルを <code>database.sym</code> というファイル名で <code>mysql_data</code> ディレクトリ
の中に保存することで、データベースへのシンボリックリンクを作成します。
Note that the symbolic link will only be used if the directory
<code>mysql_data_dir\database</code> doesn't exist.

</p>
<p>
例えば、もしデータベース <code>foo</code> を <tt>`D:\data\foo'</tt> に置きたいなら、
<code>D:\data\foo</code> という文字列を含む <tt>`C:\mysql\data\foo.sym'</tt> という
ファイルを作成するべきです。その後、データベース <code>foo</code> に作成される
すべてのテーブルは <tt>`D:\data\foo'</tt> に作成されるでしょう。

</p>

<p>
<a name="IDX271"></a>
<a name="IDX272"></a>


</p><h3><a name="Windows_compiling" href="manual.ja_toc.html#Windows_compiling">4.13.7  Windows 上で MySQL クライアントをコンパイルする</a></h3>

<p>
ソースファイル中で <code>mysql.h</code> をインクルードする前に <tt>`windows.h'</tt> を
インクルードするべきです：

</p>

<pre>#if defined(_WIN32) || defined(_WIN64)
#include &lt;windows.h&gt;
#endif
#include &lt;mysql.h&gt;
</pre>

<p>
あなたのコードを、必要に応じて <tt>`libmysql.dll'</tt> 中でロードするための
ラッパーである <tt>`libmysql.lib'</tt> ライブラリに動的にリンクすることも
できますし、また <tt>`mysqlclient.lib'</tt> ライブラリを静的にリンクすることも
できます。

</p>
<p>
mysqlclient ライブラリはスレッド対応ライブラリとしてコンパイル
されていますので、あなたのコードもマルチスレッド対応になるように
コンパイルするべきことに注意してください。

</p>
<p>
<a name="IDX273"></a>
<a name="IDX274"></a>


</p><h3><a name="Windows_and_BDB_tables." href="manual.ja_toc.html#Windows_and_BDB_tables.">4.13.8  Windows と BDB テーブル</a></h3>

<p>
Windows 上の新しい BDB インターフェースの完全なテストを
手短に済ませるつもりです。これが済んだら、BDB テーブルのサポートを
含んだ <strong>MySQL</strong> のバイナリ配布 (Windows と Unix 用) のリリースを
開始するつもりです。

</p>

<p>
<a name="IDX275"></a>
<a name="IDX276"></a>


</p><h3><a name="Windows_vs_UNIX" href="manual.ja_toc.html#Windows_vs_UNIX">4.13.9  Windows 用 MySQL と UNIX 用 MySQL の比較</a></h3>

<p>
<strong>MySQL</strong>-Windows バージョンは現在それ自体とても安定した(stableな)状態で供給されています。
MySQL-win32 バージョンは すべての機能が UNIX バージョンの MySQL と対応しています。
ただし、下記のような例外があります。

</p>
<dl compact="">

<dt><strong>Win95 とスレッド</strong>
</dt><dd>
Win95は、各々のスレッドの作成のためにメインメモリのおよそ200バイトをメモリリーク
します。これのために、もしあなたが多くの接続をすれば、<strong>MySQL</strong> の各々の接続が新しい
スレッドを作成するので、あなたはWin95では長時間、<code>mysqld</code> を実行させるべきではあり
ません！
WindowsNT と Windows98 はこのバグを持ちません。

</dd><dt><strong>並行読み出し</strong>
</dt><dd>
<strong>MySQL</strong> は <code>INSERT</code> と <code>SELECT</code> を混ぜることを可能にするために <code>pread()</code>
及び <code>pwrite()</code> 関数コールに依存します。現時点では <code>pread()</code>/<code>pwrite()</code>
をエミュレートするために Mutex を用いています。長期的な計画では、
ファイルレベルのインターフェースを仮想インターフェースで置き換えて
いくつもりなので、さらに速度を上げるために WindowsNT 上で
<code>readfile()</code>/<code>writefile()</code> インターフェースを使うことができます。
現在の実装は、しかし <strong>MySQL</strong> が利用可能なファイル数の上限が 1024 に
なっています。これは Unix では可能な数の並行スレッドを NT 上では
動作させることができないことを意味しています。

</dd><dt><strong>ブロック読み込み</strong>
</dt><dd>
<strong>MySQL</strong> はそれぞれの接続のためにブロック読み込みを使います。
これは以下の事柄を意味しています：

<ul>

<li>

接続は、UNIX の <strong>MySQL</strong> で起こるように、8時間の後に自動的に接続が断
ち切られるわけではありません

</li><li>

もし接続が「ハングすれば」、<strong>MySQL</strong>を終了しないでそれを中断することは、不可能です。

</li><li>

<code>mysqladmin kill</code> は、スリープしている接続上では働かないはずです。

</li><li>

スリープ中の接続があるかぎり、<code>mysqladmin shutdown</code> は中断することができません。
</li></ul>

私たちは、近い将来にこれを修正することを計画しています。

</dd><dt><strong>UDF 関数</strong>
</dt><dd>
現時点では、<strong>MySQL</strong>-Windows はユーザの定義関数をサポートしません。

</dd><dt><strong><code>DROP DATABASE</code></strong>
</dt><dd>
複数のスレッドで使われているデータベースはDROPをすることができません。

</dd><dt><strong>タスクマネージャーからの <strong>MySQL</strong> の終了</strong>
</dt><dd>
Windows95では「Windowsの終了」やタスクマネージャから <strong>MySQL</strong> を終了することはできません。
<code>mysqladmin shutdown</code> で終了しなければなりません。

</dd><dt><strong>大文字小文字を区別しない名前</strong>
</dt><dd>
Windowsではファイルネームは大文字小文字が区別されません。
そのため、Windows用の <strong>MySQL</strong> では、テーブル名は大文字小文字が区別されません。
唯一の制限は、ステートメント(SQL文)中においては、データベースとテーブルの名前は
同じケース(大文字小文字)で与えなければならないという点です。
 「<a href="manual.ja_Reference.html#Name_case_sensitivity">7.1.5.1  名前のケース依存性</a>」節参照.

</dd><dt><strong>The <samp>`\'</samp> (ディレクトリ名)</strong>
</dt><dd>
Win95のパス名コンポーネントは、 <samp>`\'</samp> によって離されますが、その文字は同じく <strong>MySQL</strong> のエ
スケープ文字でもあります。もしあなたは <code>LOAD DATA INFILE</code> または <code>SELECT ... INTO OUTFILE</code> を使う場合には、UNIX でのファイルネーム形式 <samp>`/'</samp> で書くか、あるいは、
「\\」と <samp>`\'</samp> をダブルで使わなくてはなりません。


<pre>LOAD DATA INFILE "C:\\tmp\\skr.txt" INTO TABLE skr;
SELECT * INTO OUTFILE 'C:/tmp/skr.txt' FROM skr;
</pre>

</dd><dt><strong><code>Can't open named pipe</code> エラー</strong>
</dt><dd>
もしあなたが NT 上で最新の mysql-clients と <strong>MySQL</strong> 3.22 バージョン
を使えば、あなたは、次のエラーを得ることになるはずです:


<pre>error 2017: can't open named pipe to host: . pipe...
</pre>

<a name="IDX277"></a>
これは、 <strong>MySQL</strong> のリリースバージョンがデフォルトで NT の 名前つきパイプを
使っているために起こっています。
新しい <strong>MySQL</strong> クライアントで <code>--host=localhost</code> オプションを用いるか、
以下の情報を含む <tt>`C:\my.cnf'</tt> ファイルを作成することで、このエラーを
回避することができます。


<pre>[client]
host = localhost
</pre>

</dd><dt><strong><code>Access denied for user</code> error</strong>
</dt><dd>
もしあなたが同じマシン上の <strong>MySQL</strong> サーバーにアクセスした時
<code>Access denied for user: 'some-user@unknown' to database 'mysql'</code>
 エラーを得るなら、これはあなたの <strong>MySQL</strong> があなた
のマシンのホスト名を正しく解決できてないことを意味します。

これを修正するには、
以下の情報を持つファイル <tt>`\windows\hosts'</tt> を作成するべきです。
(注:Windows95,98には\Windowsフォルダ上にサンプルとして「lmhosts.sam」ファイルが
既にあるはずです)


<pre>127.0.0.1       localhost
</pre>

</dd><dt><strong><code>ALTER TABLE</code></strong>
</dt><dd>
<code>ALTER TABLE</code> を行う間、テーブルは他のスレッドが使用できないようロック
されます。これは Windows が他のスレッドによって使用中のファイルを削除
できないという事実のためにしなければならないことです（私たちはこの
問題を回避するための方法を将来見出すかもしれません）。

</dd><dt><strong><code>MERGE</code> テーブルで使用中のテーブルに対する <code>DROP TABLE</code> は機能しません。</strong>
</dt><dd>
<code>MERGE</code> ハンドラは <strong>MySQL</strong> からテーブルの対応関係を隠すことを行います。
Windows ではオープン中のファイルを削除することを許さないために、
すべての <code>MERGE</code> テーブルを (<code>FLUSH TABLES</code> を用いて) 最初にフラッシュ
するか、テーブルをドロップする前に <code>MERGE</code> テーブルをドロップする
必要があります。この問題は <code>VIEW</code> を導入するのと同時に解消するつもりです。

Windowsリリースを手伝いたいと思っている人のために、いくつかオープンになっている
未解決の問題を以下に示します:

<a name="IDX278"></a>


<ul>
<li>

除いて標準 <strong>MySQL</strong> サーバの全機能を持つものです。これは、本当のクライアント・
サーバー機能を必要としないとか、他のホストからサーバーへのアクセスを
必要としないアプリケーションにおける <strong>MySQL</strong> の利用をより容易にする
ことでしょう。

</li><li>

<strong>MySQL</strong> のインストールされたもののための、素敵な開始・シャットダウン
アイコンの追加。

</li><li>

<strong>MySQL</strong> の起動時オプション用のレジストリ・エントリを管理するための
ツールの作成。読み出されるレジストリ・エントリは、既に <code>mysqld.cc</code> の
中にコード化されていますが、よりパラメータ指向で記録するべきです。
このツールは、ユーザーがレジストリより <tt>`\my.cnf'</tt> を用いることを
好んだ場合に、<tt>`\my.cnf'</tt> を更新することも可能であるべきです。

</li><li>

NT上で <code>mysqld</code> をサービスとして <code>--install</code> フラグで登録するとき、
コマンドラインにデフォルトオプションも一緒に追加できると素敵です。
この問題は差し当たって、 <tt>`C:\my.cnf'</tt> ファイルを代わりにすることで代用しています。

</li><li>

Windows95 の動作するノート PC をサスペンドした場合、
 <code>mysqld</code> デーモンはノート PC がリジュームしたときに新しい接続を受け入れません。
私たちは、これがWin95、TCP/IP、または、<strong>MySQL</strong> が持つ問題であるかどうかわかりません。

</li><li>

また、タスクマネージャから <code>mysqld</code> を終了させることができればほんとうに親切でしょう。
今のところ、あなたは <code>mysqladmin shutdown</code> を使わなければなりません。

</li><li>

<code>mysql</code> のコマンドライン・ツールで使うために <code>readline</code> をWindowsに移植しませんか？

</li><li>

標準の <strong>MySQL</strong> クライアント(<code>mysql</code>、<code>mysqlshow</code>、<code>mysqladmin</code>、および、<code>mysqldump</code>)のGUI
バージョンがあればいいでしょうねぇ。

</li><li>

<tt>`net.c'</tt> 中のソケット読み出し・書き込み関数が割り込み不可だったら素敵
でした。これは Windows 上で <code>mysqladmin kill</code> を用いて、オープンなスレッドを
kill することができるでしょう。

</li><li>

どの Windows プログラムが <strong>MySQL</strong>-Windows/<strong>MyODBC</strong> とともに
動作するか、また動作させるためにしなければならないことに関する文書。
…それらが動いていることを確認済みであること。

</li><li>

<code>mysqld</code> はデフォルトロケールではなく、常に「C」ロケールで起動します。私たちは、
ソート順に関して <code>mysqld</code> が現在のロケールを使用するようにしたいです。

</li><li>

UDF 関数の <code>.DLL</code> での実装

</li><li>

Windows によって提供されている、より高速でスレッドセーフなインクリメント・
デクリメントメソッドを使うためのマクロの追加

</li></ul>

</dd></dl>

<p>
他の Windows 特有の事柄は <strong>MySQL</strong>-Windows ディストリビューションに同梱されている
 <tt>`README'</tt> ファイルで説明されています。

</p>



<h2><a name="OS/2" href="manual.ja_toc.html#OS/2">4.14  OS/2 Notes</a></h2>

<p>
<strong>MySQL</strong> uses quite a few open files. Because of this, you should add
something like the following to your <tt>`CONFIG.SYS'</tt> file:

</p>

<pre>SET EMXOPT=-c -n -h1024
</pre>

<p>
If you don't do this, you will probably run into the following error:

</p>

<pre>File 'xxxx' not found (Errcode: 24)
</pre>

<p>
When using <strong>MySQL</strong> with OS/2 Warp 3, FixPack 29 or above is
required.  With OS/2 Warp 4, FixPack 4 or above is required. This is a
requirement of the Pthreads library.  <strong>MySQL</strong> must be installed
in a partition that supports long filenames such as HPFS, FAT32, etc.

</p>
<p>
The <tt>`INSTALL.CMD'</tt> script must be run from OS/2's own <tt>`CMD.EXE'</tt>
and may not work with replacement shells such as <tt>`4OS2.EXE'</tt>.

</p>
<p>
The <tt>`scripts/mysql-install-db'</tt> script has been renamed.  It is now called
<tt>`install.cmd'</tt> and is a REXX script, which will set up the default
<strong>MySQL</strong> security settings and create the WorkPlace Shell icons
for <strong>MySQL</strong>.

</p>
<p>
Dynamic module support is compiled in but not fully tested. Dynamic
modules should be compiled using the Pthreads run-time library.

</p>

<pre>gcc -Zdll -Zmt -Zcrtdll=pthrdrtl -I../include -I../regex -I.. \
    -o example udf_example.cc -L../lib -lmysqlclient udf_example.def
mv example.dll example.udf
</pre>

<p>
<strong>Note:</strong> Due to limitations in OS/2, UDF module name stems must not
exceed 8 characters. Modules are stored in the <tt>`/mysql2/udf'</tt>
directory; the <code>safe-mysqld.cmd</code> script will put this directory in
the <code>BEGINLIBPATH</code> environment variable. When using UDF modules,
specified extensions are ignored -- it is assumed to be <tt>`.udf'</tt>.
For example, in Unix, the shared module might be named <tt>`example.so'</tt>
and you would load a function from it like this:

</p>

<pre>CREATE FUNCTION metaphon RETURNS STRING SONAME "example.so";
</pre>

<p>
Is OS/2, the module would be named <tt>`example.udf'</tt>, but you would not
specify the module extension:

</p>

<pre>CREATE FUNCTION metaphon RETURNS STRING SONAME "example";
</pre>

<p>
<a name="IDX279"></a>


</p><h2><a name="MySQL_binaries" href="manual.ja_toc.html#MySQL_binaries">4.15  MySQL Binaries</a></h2>

<p>
サービスとして、MySQL AB は <strong>MySQL</strong> のバイナリ配布を提供しています。
これらのコンパイルは TcX 内部でおこなったり、我々にマシンの
アクセスを提供してもらっている顧客のマシン上で行っています。

</p>
<p>
これらの配布物は <code>scripts/make_binary_distribution</code> で作成され、
以下のコンパイルオプションで調整されています。

</p>
<dl compact="">

<dt>SunOS 4.1.4 2 sun4c with <code>gcc</code> 2.7.2.1
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors" ./configure --prefix=/usr/local/mysql --disable-shared --with-extra-charsets=complex --enable-assembler</code>

</dd><dt>SunOS 5.5.1 sun4u with <code>egcs</code> 1.0.3a
</dt><dd>
<code>CC=gcc CFLAGS="-O3 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-low-memory --with-extra-charsets=complex</code>

</dd><dt>SunOS 5.6 sun4u with <code>egcs</code> 2.90.27
</dt><dd>
<code>CC=gcc CFLAGS="-O3 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-low-memory --with-extra-charsets=complex</code>

</dd><dt>SunOS 5.6 i86pc with <code>gcc</code> 2.8.1
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-low-memory --with-extra-charsets=complex</code>

</dd><dt>Linux 2.0.33 i386 with <code>pgcc</code> 2.90.29 (<code>egcs</code> 1.0.3a)
</dt><dd>
<code>CFLAGS="-O3 -mpentium -mstack-align-double -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -mpentium -mstack-align-double -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static --with-extra-charsets=complex</code>

</dd><dt>Linux 2.2.x with x686 with <code>gcc</code> 2.95.2
</dt><dd>
<code>CFLAGS="-O3 -mpentiumpro -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -mpentiumpro -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static --disable-shared --with-extra-charset=complex</code>

</dd><dt>SCO 3.2v5.0.4 i386 with <code>gcc</code> 2.7-95q4
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>

</dd><dt>AIX 2 4 with <code>gcc</code> 2.7.2.2
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>

</dd><dt>OSF1 V4.0 564 alpha with <code>gcc</code> 2.8.1
</dt><dd>
<code>CC=gcc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-low-memory --with-extra-charsets=complex</code>

</dd><dt>Irix 6.3 IP32 with <code>gcc</code> 2.8.0
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>

</dd><dt>BSDI BSD/OS 3.1 i386 with <code>gcc</code> 2.7.2.1
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>

</dd><dt>BSDI BSD/OS 2.1 i386 with <code>gcc</code> 2.7.2
</dt><dd>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>
</dd></dl>

<p>
上で示したオプション以外で最適化を施した方はだれでも、開発者向けの
メーリングリストにポストできます。
<a href="mailto:internals@lists.mysql.com">internals@lists.mysql.com</a>.

</p>
<p>
RPM 配布では <strong>MySQL</strong> 3.22 を user-contributed としています。
3.22 をはじめ、いくつかの RPM パッケージは <strong>MySQL AB</strong> 製です。

</p>

<p>
<strong>MySQL</strong> のデバッグバージョンをコンパイルしたい場合は、
<code>--with-debug</code> または <code>--with-debug=full</code> を上記の configure 行
に追加して、すべての <code>-fomit-frame-pointer</code> オプションを取り除いてく
ださい。

</p>
<p>
<a name="IDX280"></a>
<a name="IDX281"></a>
<a name="IDX282"></a>


</p><h2><a name="Post-installation" href="manual.ja_toc.html#Post-installation">4.16  インストール後の設定とテスト</a></h2>

<p>
初めて <strong>MySQL</strong>をインストールしたら(バイナリからでもソースからでもですが)、
サーバーを動作させるために、許可テーブルを初期化しなくてはなりません。
またマシンの起動時、停止時に、サーバーを自動で開始、停止することもできます。

</p>
<p>
通常、許可テーブルのインストールとサーバーの開始は、
ソースディストリビューションなら以下のようにします：
<a name="IDX283"></a>
<a name="IDX284"></a>

</p>

<pre>shell&gt; ./scripts/mysql_install_db
shell&gt; cd mysql_installation_directory
shell&gt; ./bin/safe_mysqld --user=mysql &amp;
</pre>

<p>
バイナリディストリビューションでは次を行ないます:

</p>

<pre>shell&gt; cd mysql_installation_directory
shell&gt; ./bin/mysql_install_db
shell&gt; ./bin/safe_mysqld --user=mysql &amp;
</pre>

<p>
これは、いくつかのデータベースを生成します。<code>mysql</code> データベースは全
てのデータベース権限を保持します。<code>test</code> データベースは 
<strong>MySQL</strong> をテストするために使用できます。そして、
<code>mysql_install_db</code> を実行したユーザの権限エントリと <code>root</code> ユー
ザも生成します(パスワードはありません)。これは <code>mysqld</code> サーバの起動
も行ないます。

</p>
<p>
<code>mysql_install_db</code> は古い権限テーブルを上書きしません。そのため、どの
ような環境でも安全に実行できます。<code>test</code> データベースを持ちたくないな
ら、<code>mysqladmin -u root drop test</code> で削除できます。

</p>
<p>
テストは、<strong>MySQL</strong> のトップディレクトリーから簡単に実行できます。
バイナリ配布を使用する場合、これ(トップディレクトリ)は
インストール先のディレクトリーになるでしょう(<tt>`/usr/local/mysql'</tt>)。
ソース配布の場合、これは <strong>MySQL</strong> のソースディレクトリです。
<a name="IDX285"></a>

</p>
<p>
コマンドは本節といかに続く節で説明しますが、<code>BINDIR</code> は
<code>mysqladmin</code> や <code>safe_mysqld</code> がインストールされたディレクトリを示します。
バイナリ配布を使用している場合、<code>BINDIR</code> はバイナリ配布の <tt>`bin'</tt> ディレクトリになります。
ソースからインストールした場合、<code>BINDIR</code> は、<code>configure</code> で特別指定しない限り、
<tt>`/usr/local/bin'</tt> です。
<code>EXECDIR</code> は <code>mysqld</code> サーバーのインストール先です。
バイナリ配布を使用している場合、これは <code>BINDIR</code> ディレクトリと同一になります。
ソースからインストールした場合、<tt>`/usr/local/libexec'</tt> です。

</p>
<p>
テストについて以下に詳細に説明します:
<a name="IDX286"></a>

</p>

<ol>
<li>

必要ならば、<code>mysqld</code> サーバーを起動し <strong>MySQL</strong> の許可テーブルを初期化します。
(許可テーブルはユーザーがどのような権限をもってサーバーに接続を許すかを決定するものです。)
これは通常、<code>mysql_install_db</code> スクリプトで初期化されます。


<pre>shell&gt; scripts/mysql_install_db
</pre>

通常、<code>mysql_install_db</code> の実行は初めて <strong>MySQL</strong> をインストール
したあと一度だけ必要です。  すでにインストールされているものを
アップグレードする際にはこの手順は飛ばせます。
（しかし、<code>mysql_install_db</code> は実に安全で、すでにテーブルが
存在している場合はいかなるテーブルも更新しません。したがって、
実行すべきかどうかわからない場合は、<code>mysql_install_db</code> を常に
走らせることができます）

<code>mysql_install_db</code> は 6個のテーブルを作ります (<code>user</code>, <code>db</code>,
<code>host</code>, <code>tables_priv</code>, <code>columns_priv</code>, <code>func</code>)
<code>mysql</code> データベースに。 初期の権限状態についての説明は
 「<a href="manual.ja_Privilege_system.html#Default_privileges">6.12  MySQL 権限許可の初期設定</a>」節.  これらの権限は <strong>MySQL</strong> <code>root</code> ユーザーに
なんでもできるように許可し、そして、だれもが
<code>'test'</code> という名前か <code>'test_'</code> ではじまる名前をもつ
データベースを作成、使用できるように許可されています。

もし許可テーブルを設定していない場合、サーバーを起動時に以下のエラーが出ます：

<a name="IDX287"></a>

<pre>mysqld: Can't find file: 'host.frm'
</pre>

バイナリ配布の <strong>MySQL</strong> では、もし <strong>MySQL</strong> を
 <code>./bin/safe_mysqld</code> を実行しないで起動した場合に、このエラーがおきます。!
 「<a href="manual.ja_Tools.html#safe_mysqld">15.3  safe_mysqld, the wrapper around mysqld</a>」節参照.

<code>root</code> で <code>mysql_install_db</code> を実行する必要があるとあなたは思うかもしれません。
しかし、 <strong>MySQL</strong> は <code>root</code> 以外のユーザーで起動できます。
データベースディレクトリがサーバーを起動したユーザに対して読み書きが許可されていれば良いのです。
<strong>MySQL</strong> を一般ユーザーで走らせる方法は  「<a href="manual.ja_Problems.html#Changing_MySQL_user">21.8  一般ユーザで <strong>MySQL</strong> を動かす方法</a>」節.

もし <code>mysql_install_db</code> で問題が出たら、
 「<a href="manual.ja_Installing.html#mysql_install_db">4.16.1  <code>mysql_install_db</code> 実行時の問題</a>」節参照. を参照のこと。

<code>mysql_install_db</code> スクリプトを走らせるにはいくつか選択があります：


<ul>
<li>

<code>mysql_install_db</code> を走らせる前に編集して、許可の初期状態を変更してもいいでしょう。
これは多くのマシンに同じ権限設定をして <strong>MySQL</strong> をインストールする際に
役立ちます。 この場合、いくつかの <code>INSERT</code> 構文を <code>mysql.user</code> と
<code>mysql.db</code> テーブルにたいして追加するようにするだけですみます!

</li><li>

もしインストール後に許可を変更したい場合、 <code>mysql -u root mysql</code> で <strong>MySQL</strong> <code>root</code> ユーザーで接続して直接許可テーブルを変更する SQL 文を実行します。

</li><li>

すでに許可テーブルが作成された状態で、完全に許可テーブルを作成し直すことができます。
これはすでにインストールされたテーブルがある場合や、
<code>mysql_install_db</code> を編集した後にそう思うかもしれません。<code>mysql_install_db</code>.
</li></ul>

これらの選択については  「<a href="manual.ja_Privilege_system.html#Default_privileges">6.12  MySQL 権限許可の初期設定</a>」節 からさらに情報が得られます。

</li><li>

<strong>MySQL</strong> サーバーを以下のようにして起動します：


<pre>shell&gt; cd mysql_installation_directory
shell&gt; bin/safe_mysqld &amp;
</pre>

サーバの起動に問題があれば、 「<a href="manual.ja_Installing.html#Starting_server">4.16.2  <strong>MySQL</strong> サーバー起動時の問題</a>」節 を見てください。

</li><li>

<code>mysqladmin</code> でサーバーが走っているか確認します。
サーバーが立ち上がり接続を受け付けるか確認する簡単な方法を以下に示します：


<pre>shell&gt; BINDIR/mysqladmin version
shell&gt; BINDIR/mysqladmin variables
</pre>

例えば、<code>mysqladmin version</code> の出力はあなたのプラットフォームと
 <strong>MySQL</strong> のバージョンを出力します。
出力は以下の様にでます：


<pre>shell&gt; BINDIR/mysqladmin version
mysqladmin  Ver 8.14 Distrib 3.23.32, for linux on i586
Copyright (C) 2000 MySQL AB &amp; MySQL Finland AB &amp; TCX DataKonsult AB
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL license

Server version          3.23.32-debug
Protocol version        10
Connection              Localhost via Unix socket
TCP port                3306
UNIX socket             /tmp/mysql.sock
Uptime:                 16 sec

Threads: 1  Questions: 9  Slow queries: 0  Opens: 7  Flush tables: 2  Open tables: 0 Queries per second avg: 0.000  Memory in use: 132K  Max memory used: 16773K
</pre>

<code>BINDIR/mysqladmin</code> の使用方法は、<code>--help</code> オプションで起動することにより得られます。

</li><li>

サーバーをシャットダウンするには：
<a name="IDX288"></a>
<a name="IDX289"></a>


<pre>shell&gt; BINDIR/mysqladmin -u root shutdown
</pre>

</li><li>

サーバーをリスタートするには、<code>safe_mysqld</code> か <code>mysqld</code> を直接実行します。
例えば：


<pre>shell&gt; BINDIR/safe_mysqld --log &amp;
</pre>

<code>safe_mysqld</code> が失敗するなら、 <strong>MySQL</strong> のインストールディレクトリーから実行してみてください。
もしそれでも起動しないなら、 「<a href="manual.ja_Installing.html#Starting_server">4.16.2  <strong>MySQL</strong> サーバー起動時の問題</a>」節 を参照のこと。

</li><li>

いくつかの簡単なテストでサーバーが動いているか確認できます。
以下のようになります：

<a name="IDX290"></a>
<a name="IDX291"></a>


<pre>shell&gt; BINDIR/mysqlshow
+-----------+
| Databases |
+-----------+
| mysql     |
+-----------+

shell&gt; BINDIR/mysqlshow mysql
Database: mysql
+--------------+
|    Tables    |
+--------------+
| columns_priv |
| db           |
| func         |
| host         |
| tables_priv  |
| user         |
+--------------+

shell&gt; BINDIR/mysql -e "select host,db,user from db" mysql
+------+--------+------+
| host | db     | user |
+------+--------+------+
| %    | test   |      |
| %    | test_% |      |
+------+--------+------+
</pre>

他のプラットフォームで <strong>MySQL</strong> のパフォーマンスを比較するために
 <tt>`sql-bench'</tt> にベンチマークがあります。
<tt>`sql-bench/Results'</tt> ディレクトリには、他のデータベースやプラットフォームで
ベンチを実行した結果があります。
全てのテストを実行するには、以下のようにします：


<pre>shell&gt; cd sql-bench
shell&gt; run-all-tests
</pre>

RPM バイナリ配布には <tt>`sql-bench'</tt> ディレクトリがありません。
(RPM のソース配布には含まれます)
この場合、ベンチマークをインストールしなくてはなりません。
<strong>MySQL</strong> バージョン 3.22 のバイナリ配布から、
<tt>`mysql-bench-VERSION-i386.rpm'</tt> という名前で RPM パッケージを作っており、
これにはベンチマークのデータとコードが含まれます。

<tt>`tests'</tt> サブディレクトリでテストすることも可能です。
例えば、<tt>`auto_increment.tst'</tt> の実行は以下のようにします：


<pre>shell&gt; BINDIR/mysql -vvf test &lt; ./tests/auto_increment.tst
</pre>

これの結果は <tt>`./tests/auto_increment.res'</tt> ファイルに書き出されます。
</li></ol>



<h3><a name="mysql_install_db" href="manual.ja_toc.html#mysql_install_db">4.16.1  <code>mysql_install_db</code> 実行時の問題</a></h3>
<p>
<a name="IDX292"></a>
<a name="IDX293"></a>

</p>
<p>
<code>mysql_install_db</code> スクリプトの目的は、新しい <strong>MySQL</strong> 権限テー
ブルを生成することです。他のデータには何も影響しません！ 既に <strong>MySQL</strong> 権限テー
ブルをインストールしている場合は、何も行ないません！

</p>
<p>
権限テーブルを再生成したい場合は、mysqld サーバが動作していれば、それを落
としてから、次のように行なってください:

</p>

<pre>mv mysql-data-directory/mysql mysql-data-directory/mysql-old
mysql_install_db
</pre>

<p>
この節では <code>mysql_install_db</code> を実行した際にでくわすかもしれない問題について述べます：

</p>
<dl compact="">

<dt><strong><code>mysql_install_db</code> doesn't install the privilege tables</strong>
</dt><dd>
これは <code>mysql_install_db</code> が権限テーブルをインストールできなかった事のメッセージですが、
続いて以下のようにメッセージが出た場合：


<pre>starting mysqld daemon with databases from XXXXXX
mysql daemon ended
</pre>

この場合、注意深く log ファイルを調べてください！
エラーメッセージに出ている <tt>`XXXXXX'</tt> ディレクトリにログファイルがあり、
これに <code>mysqld</code> がなぜスタートしなかったか記されているはずです。
もし何が起こったかわからない場合、このログファイルを含んで <code>mysqlbug</code> を使用して
バグレポートを投稿してください！
 「<a href="manual.ja_Questions.html#Bug_reports">2.3  バグや問題を報告する方法</a>」節参照.

</dd><dt><strong>There is already a <code>mysqld</code> daemon running</strong>
</dt><dd>
この場合、 <code>mysql_install_db</code> を実行する必要はありません。
<code>mysql_install_db</code> を実行するのは <strong>MySQL</strong> を初めてインストールした後、
たった一回だけです。

</dd><dt><strong>Installing a second <code>mysqld</code> daemon doesn't work when one daemon is running</strong>
</dt><dd>
これはすでに <strong>MySQL</strong> がインストールされており、
しかし新しいインストールを違うところに行おうとした場合に発生します。
(例えば、一度に二つのインストールを実行した場合など)
一般にこの問題は二つ目のサーバーを動いているサーバーと同じポート、ソケットを使用して起動しようとした場合に発生します。
この場合、<code>Can't start server: Bind on TCP/IP port: Address already in use</code> エラーメッセージか
<code>Can't start server : Bind on unix socket...</code> エラーメッセージが出ます。
 「<a href="manual.ja_Installing.html#Installing_many_servers">4.17  同じマシンに多くのサーバをインストールする</a>」節参照.

</dd><dt><strong><tt>`/tmp'</tt> に書き込み許可をあなたが持っていないなら</strong>
</dt><dd>
<a name="IDX294"></a>
<a name="IDX295"></a>
<a name="IDX296"></a>

もしソケットファイルを標準の場所(<tt>`/tmp'</tt>)に作成するための書き込み許可がないなら、
あるいは、一時ファイルを <tt>`/tmp'</tt> に作成できないなら、
<code>mysql_install_db</code> の実行時、あるいは <code>mysqld</code> の起動／使用時に
エラーとなるでしょう。

違うディレクトリーにソケットファイルや一時ファイルを指定するには：

<a name="IDX297"></a>
<a name="IDX298"></a>
<a name="IDX299"></a>
<a name="IDX300"></a>

<pre>shell&gt; TMPDIR=/some_tmp_dir/
shell&gt; MYSQL_UNIX_PORT=/some_tmp_dir/mysqld.sock
shell&gt; export TMPDIR MYSQL_UNIX_PORT
</pre>

<tt>`some_tmp_dir'</tt> は書き込みが可能なディレクトリーを指定しなくてはなりません。
 「<a href="manual.ja_Environment_variables.html#Environment_variables">A  Environment Variables</a>」節参照.

この後、<code>mysql_install_db</code> を走らせ、サーバーを起動する事ができます：


<pre>shell&gt; scripts/mysql_install_db
shell&gt; BINDIR/safe_mysqld &amp;
</pre>

</dd><dt><strong><code>mysqld</code> crashes at once</strong>
</dt><dd>
もし RedHat バージョン 5.0 上で 2.0.7-5 より古い <code>glibc</code> を使用している場合、
全ての <code>glibc</code> パッチを当てなくてはなりません！
これに関しては <strong>MySQL</strong> メールのアーカイブに情報が多くあります。
メーリングリストのアーカイブのリンクは
<a href="http://www.mysql.com/documentation/">http://www.mysql.com/documentation/</a>.
see  「<a href="manual.ja_Installing.html#Linux">4.12.5  Linux Notes (All Linux Versions)</a>」節.

<code>mysqld</code> を <code>--skip-grant-tables</code> 指定で起動することもできます。
そして以下のように <code>mysql</code> を使用して自分自身の手により許可を加えます：


<pre>shell&gt; BINDIR/safe_mysqld --skip-grant-tables &amp;
shell&gt; BINDIR/mysql -u root mysql
</pre>

<code>mysql</code> から手動で <code>mysql_install_db</code> に書かれている SQL コマンドを実行します。
許可テーブルをサーバーに読み込ますためには、
 <code>mysqladmin flush-privileges</code> か <code>mysqladmin reload</code> を実行します。
</dd></dl>



<h3><a name="Starting_server" href="manual.ja_toc.html#Starting_server">4.16.2  <strong>MySQL</strong> サーバー起動時の問題</a></h3>
<p>
<a name="IDX301"></a>
<a name="IDX302"></a>

</p>
<p>
通常 <code>mysqld</code> サーバーの起動は、以下の三つの方法のうち一つで行います：

</p>

<ul>
<li>

<code>mysql.server</code> による起動。このスクリプトはシステムの起動時、停止時に使われます。
詳細は  「<a href="manual.ja_Installing.html#Automatic_start">4.16.3  <strong>MySQL</strong> の自動起動と自動停止</a>」節

</li><li>

<code>safe_mysqld</code> による起動。これは <code>mysqld</code> への適切なオプションを決定し、
それらのオプションでサーバーの起動を試みます。 「<a href="manual.ja_Tools.html#safe_mysqld">15.3  safe_mysqld, the wrapper around mysqld</a>」節参照.

</li><li>

NT 上では <code>mysqld</code> を次のようにサービスとしてインストールすべきです:


<pre>bin\mysqld-nt --install               # Install MySQL as a service
</pre>

すると、次のように <code>mysqld</code> を起動/停止できます:


<pre>NET START mysql
NET STOP mysql
</pre>

注意: この場合 mysqld に対して他のオプションは使用できません！
 
次のようにしてサービスを削除できます:


<pre>bin\mysqld-nt --remove                # remove MySQL as a service
</pre>

</li><li>

<code>mysqld</code> を直接起動。
</li></ul>

<p>
<code>mysqld</code> デーモンの起動時に、デーモンはデータディレクトリにディレクトリを変えます。
ログファイルと pid (process ID) ファイルがこのディレクトリに書ける事、
そしてデータベースがこのディレクトリにある事を、デーモンは要求します。

</p>
<p>
データディレクトリの場所は配布物のコンパイル時に指定されています。
<code>mysqld</code> があなたのシステム上にデータベースディレクトリを見つけれなかった場合、
サーバーは動きません。
 <code>mysqld</code> を <code>--help</code> オプションで起動すれば <code>mysqld</code> の
デフォルトのパスを知ることができますので、
サーバーが起動しない理由が違うパスを使用しているために起こっているかどうかがわかります。
パスが違う場合、<code>mysqld</code> のコマンドラインの引数に正しいパスを指定して、デフォルト値を
上書きすることが可能です。(これらオプションは <code>safe_mysqld</code> にも同様に使用できます)

</p>
<p>
通常、<strong>MySQL</strong> がインストールされたディレクトリのベースディレクトリだけを
 <code>mysqld</code> に教えればいいはずです。
これは <code>--basedir</code> オプションを指定します。
 <code>--help</code> オプションを使用すればパスの変更が確認できます。
(<code>--help</code> は<em>必ず</em> 最後に指定のこと)
　例えば：

</p>

<pre>shell&gt; EXECDIR/mysqld --basedir=/usr/local --help
</pre>

<p>
パスの設定が思い通りに言ったことを確認したら、 <code>--help</code> オプションを外してサーバーを起動します。

</p>
<p>
どの方法でサーバーを起動しても、もし起動に失敗すれば、ログファイルを確認してください。
なぜ失敗したか記録されています。ログファイルはデータベースディレクトリにあります。
(バイナリ配布の場合 <tt>`/usr/local/mysql/data'</tt> 、ソース配布の場合 <tt>`/usr/local/var'</tt>、
 Windows では <tt>`\mysql\mysql.err'</tt> )
データベースディレクトリに <tt>`host_name.err'</tt> と <tt>`host_name.log'</tt> という
ファイル (<code>host_name</code> はあなたのサーバー名) を探してください。
以下のようにしてそのファイルの最後の数行を確認します：

</p>

<pre>shell&gt; tail host_name.err
shell&gt; tail host_name.log
</pre>

<p>
ログファイル中に次のような何かを見つけた場合:

</p><pre>000729 14:50:10  bdb:  Recovery function for LSN 1 27595 failed
000729 14:50:10  bdb:  warning: ./test/t1.db: No such file or directory
000729 14:50:10  Can't init databases
</pre>

<p>
これは <code>--bdb-recover</code> 付きで mysqld が起動され、Berkeley DB がデータ
ベースを復元しようとした時にログファイルに悪い何かを見つけたということを意
味します。継続を可能にするためには、古い Berkeley DB ログファイルをデータ
ベースディレクトリから、あとで検査できる他の場所に移すべきです。ログファイ
ルは <tt>`log.0000000001'</tt> (番号は時間の経つと増加します)と名付けられてい
ます。

</p>
<p>
BDB テーブルサポートで <code>mysqld</code> を実行していて、mysqld が起動時にコア
ダンプする場合、BDB recover log にいくつかの問題の原因があり得ます。この場
合、<code>mysqld</code> を <code>--bdb-no-recover</code> で起動を試みることができます。
これで救える場合は、データディレクトリから全ての <tt>`log.*'</tt> ファイルを削
除し、そして <code>mysqld</code> を再び起動してみてください。

</p>
<p>
以下のエラーの場合、他のプログラム（か他の <code>mysqld</code> サーバー）が
<code>mysqld</code> が使用しようとしている TCP/IP ソケットを使っています：

</p>

<pre>Can't start server: Bind on TCP/IP port: Address already in use
  or
Can't start server : Bind on unix socket...
</pre>

<p>
他の <code>mysqld</code> サーバーが走っていないかを <code>ps</code> で確認します。
もし他のサーバーが起動していないなら、 <code>telnet your-host-name tcp-ip-port-number</code> 
コマンドを実行し、何回か <code>RETURN</code> キーをたたいてみてください。
もし、 <code>telnet: Unable to connect to remote host: Connection refused</code> のような
エラーが出た場合、なにかが <code>mysqld</code> が使用しようとしているポートを既に使っています。
See  「<a href="manual.ja_Installing.html#mysql_install_db">4.16.1  <code>mysql_install_db</code> 実行時の問題</a>」節 and  「<a href="manual.ja_Common_problems.html#Multiple_servers">22.3  同一マシン上に複数の <strong>MySQL</strong> サーバーを走らせる</a>」節.

</p>
<p>
もし <code>safe_mysqld</code> が <strong>MySQL</strong> インストールディレクトリから起動しても失敗するなら、
<code>safe_mysqld</code> をあなたのシステム用に <code>mysqld</code> のパスやパス名のオプションを
書き換えてもかまいません。
この場合、 <strong>MySQL</strong> をアップグレードした場合、あなたが変更した
 <code>safe_mysqld</code> は上書きされるので、変更したものはインストール前にコピーしておき、
再び戻さなくてはなりません。

</p>
<p>
もし <code>mysqld</code> がすでに走っている場合、以下のコマンドにてパスの設定を知ることができます：

</p>

<pre>shell&gt; mysqladmin variables

or

shell&gt; mysqladmin -h 'your-host-name' variables
</pre>

<p>
もし <code>safe_mysqld</code> がサーバーを起動しても接続できないようなら、
 <tt>`/etc/hosts'</tt> ファイルに以下のような記述を持たせてください：

</p>

<pre>127.0.0.1       localhost
</pre>

<p>
この問題はスレッドライブラリーがなくて <strong>MySQL</strong> を MIT-pthreads を
使用するようにして作ったシステムにだけ起こります。

</p>
<p>
Windows では、次のようにして <code>mysqld</code> の起動を試みることができます:

</p>

<pre>C:\mysql\bin\mysqld --standalone --debug
</pre>

<p>
これは、バックグランドで動作せず、<tt>`\mysqld.traec'</tt> にトレースを書き
出します。これは問題の原因を解決する手助けになります。 「<a href="manual.ja_Installing.html#Windows">4.13  Windows Notes</a>」節参照。

</p>
<p>
BDB (Berkeley DB) テーブルを使用する場合は、BDB 固有の起動オプションに精通
すべきです。 「<a href="manual.ja_Table_types.html#BDB_start">8.5.3  BDB startup options</a>」節参照.

</p>
<p>
If you are using Gemini tables, refer to the Gemini-specific startup options.
 「<a href="manual.ja_Table_types.html#GEMINI_start">8.6.2  GEMINI startup options</a>」節参照.

</p>
<p>
If you are using InnoDB tables, refer to the InnoDB-specific startup
options.   「<a href="manual.ja_Table_types.html#InnoDB_start">8.7.2  InnoDB startup options</a>」節参照.

</p>


<h3><a name="Automatic_start" href="manual.ja_toc.html#Automatic_start">4.16.3  <strong>MySQL</strong> の自動起動と自動停止</a></h3>
<p>
<a name="IDX303"></a>
<a name="IDX304"></a>
<a name="IDX305"></a>

</p>
<p>
<code>mysql.server</code> スクリプトは <code>start</code>, <code>stop</code> 引数を指定することにより
サーバーを起動、停止できます：

</p>

<pre>shell&gt; mysql.server start
shell&gt; mysql.server stop
</pre>

<p>
<code>mysql.server</code> は <strong>MySQL</strong> インストールディレクトリの <tt>`share/mysql'</tt> ディレクトリ、
または <strong>MySQL</strong> ソースツリーの <tt>`support-files'</tt> ディレクトリにあります。

</p>
<p>
<code>mysql.server</code> はサーバーを起動時する前に <strong>MySQL</strong> がインストールされた
ディレクトリにディレクトリを変え、<code>safe_mysqld</code> を起動します。
もし標準以外にインストールしているバイナリ配布を使用しているなら、 
<code>mysql.server</code> を編集する必要があるかもしれません。
<code>safe_mysqld</code> を起動する前に正しいディレクトリに <code>cd</code> するように変更します。
<code>safe_mysqld</code> に他のオプションを与えるように <code>mysql.server</code> を変えても構いません。
他のユーザーで実行したい場合、<code>mysql_daemon_user=root</code> を変更しても構いません。
<code>safe_mysqld</code> に他のオプションを与えるために、
<code>mysql.server</code> を変更しても構いません。

</p>
<p>
<code>mysql.server stop</code> はサーバーにシグナルを送ってサーバーを停止します。
<code>mysqladmin shutdown</code> で手動でサーバーを落とすこともできます。

</p>
<p>
<strong>MySQL</strong> を使用している製品のために、これらスタート、ストップを
 <tt>`/etc/rc*'</tt> に書きたいと思われるかもしれません。
ここでの注意点は、変更した <code>mysql.server</code> は、
 <strong>MySQL</strong> をアップグレードしたときに上書きされるということです。
よって、変更したものはインストール前にコピーを取っておくべきです。

</p>
<p>
もしあなたのシステムが <tt>`/etc/rc.local'</tt> を起動スクリプトとして使用しているなら、
以下のようにその中に記述します：

</p>

<pre>/bin/sh -c 'cd /usr/local/mysql ; ./bin/safe_mysqld --user=mysql &amp;'
</pre>

<p>
グローバル設定ファイルである <tt>`/etc/my.cnf'</tt> に、 <code>mysql.server</code> の
オプションを記述することも可能です。<tt>`/etc/my.cnf'</tt> ファイルは以下のような
記述になっています：

</p>

<pre>[mysqld]
datadir=/usr/local/mysql/var
socket=/tmp/mysqld.sock
port=3306

[mysql.server]
user=mysql
basedir=/usr/local/mysql
</pre>

<p>
<code>mysql.server</code> スクリプトは以下の変数を使用します：
<code>user</code>, <code>datadir</code>, <code>basedir</code>, <code>bindir</code> そして <code>pid-file</code>.

</p>
<p>
次の表は、各起動スクリプトが使用するオプションセクションを示しています:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><code>mysqld</code> </td><td> <code>mysqld</code> と <code>server</code>
</td></tr>
<tr><td><code>mysql.server</code> </td><td> <code>mysql.server</code>, <code>mysqld</code>, <code>server</code>
</td></tr>
<tr><td><code>safe_mysqld</code> </td><td> <code>mysql.server</code>, <code>mysqld</code>, <code>server</code>
</td></tr>
</tbody></table>

<p>
 「<a href="manual.ja_Installing.html#Option_files">4.16.5  オプションファイル ( <code>my.cnf</code> )</a>」節参照.

</p>
<p>
<a name="IDX306"></a>
<a name="IDX307"></a>
<a name="IDX308"></a>


</p><h3><a name="Command-line_options" href="manual.ja_toc.html#Command-line_options">4.16.4  mysqld コマンド行オプション</a></h3>

<p>
<code>mysqld</code> は次のコマンド行オプションを受け付けます:

</p>
<dl compact="">

<dt><code>--ansi</code>
</dt><dd>
MySQL 構文の代わりに ANSI SQL 構文を使用します。 「<a href="manual.ja_Compatibility.html#ANSI_mode">5.2  ANSI モードでの MySQL の実行</a>」節参照。

</dd><dt><code>-b, --basedir=path</code>
</dt><dd>
インストール先ディレクトリのパス。すべてのパスは通常ここからの相対パスで決
定されます。

</dd><dt><code>--big-tables</code>
</dt><dd>
ファイルにすべての一時セットを保存することにより、大きな結果セットを許しま
す。これは、多くの 'table full' エラーを解決します。しかし、メモリ内テーブ
ルでも十分なクエリは遅くなります。バージョン 3.23.2 からは、
<strong>MySQL</strong> は自動的にメモリを使用し、必要なときにディスクテーブルにス
イッチすることによって、これを解決します。

</dd><dt><code>--bind-address=IP</code>
</dt><dd>
bind する IP アドレス。

</dd><dt><code>--character-sets-dir=path</code>
</dt><dd>
文字セットがあるディレクトリ。 「<a href="manual.ja_Server.html#Character_sets">10.1.1  データとソートに使用されるキャラクターセット</a>」節参照。

</dd><dt><code>--chroot=path</code>
</dt><dd>
起動中に mysqld デーモンを chroot します。推奨されるセキュリティ手法です。
これは <code>LOAD DATA INFILE</code> と <code>SELECT ... INTO OUTFILE</code> を制限し
ます。

</dd><dt><code>--core-file</code>
</dt><dd>
<code>mysqld</code> が死んだ場合 core ファイルを書き出します。いくつかのシステム
では、<code>--core-file-size</code> も <code>safe_mysqld</code> に記述する必要がありま
す。 「<a href="manual.ja_Tools.html#safe_mysqld">15.3  safe_mysqld, the wrapper around mysqld</a>」節参照。

</dd><dt><code>-h, --datadir=path</code>
</dt><dd>
データベースルートのパス。

</dd><dt><code>--default-character-set=charset</code>
</dt><dd>
デフォルト文字セットの設定。 「<a href="manual.ja_Server.html#Character_sets">10.1.1  データとソートに使用されるキャラクターセット</a>」節参照。

</dd><dt><code>--default-table-type=type</code>
</dt><dd>
テーブルのデフォルトテーブル型を設定する。 「<a href="manual.ja_Table_types.html#Table_types">8  MySQL Table types</a>」節参照。

</dd><dt><code>--debug[...]=</code>
</dt><dd>
<strong>MySQL</strong> が <code>--with-debug</code> つきで configure された場合、このオ
プション使用して、<code>mysqld</code> が何を行なっているかのトレースファイルを得
ることができます。 「<a href="manual.ja_Porting.html#The_DBUG_package">I.3  The DBUG package.</a>」節参照。

</dd><dt><code>--delay-key-write-for-all-tables</code>
</dt><dd>
任意の <code>MyISAM</code> テーブルについて書き込み間でキーバッファをフラッシュ
しません。 「<a href="manual.ja_Performance.html#Server_parameters">13.2.3  サーバーパラメーターのチューニング</a>」節参照。

</dd><dt><code>--enable-locking</code>
</dt><dd>
システムロックを有効にします。注意: lockd() が完全に働かない(Linux のよう
な)システムでこのオプションを使用した場合、mysqld が簡単にデッドロックしま
す。

</dd><dt><code>-T, --exit-info</code>
</dt><dd>
mysqld サーバをデバッグするために使用できる、様々なフラグのビットマスクで
す; 何が行なわれるのか正確に知らない場合は、このオプションを使用すべきでは
ありません！

</dd><dt><code>--flush</code>
</dt><dd>
各 SQL コマンド後にすべての変更をディスクにフラッシュします。通常 
<strong>MySQL</strong> は各 SQL コマンドにすべての変更をディスクに書き出すだけで、
OS がディスクへの sync を処理します。
 「<a href="manual.ja_Problems.html#Crashing">21.1.1  <strong>MySQL</strong> がクラッシュする場合に行うこと</a>」節参照。

</dd><dt><code>-?, --help</code>
</dt><dd>
短いへルプを表示して終了します。

</dd><dt><code>--init-file=file</code>
</dt><dd>
起動時にファイルから SQL コマンドを読み込みます。

</dd><dt><code>-L, --language=...</code>
</dt><dd>
与えられた言語のクライアントエラーメッセージ。フルパスで与えることもできます。
 「<a href="manual.ja_Server.html#Languages">10.1  <strong>MySQL</strong> がサポートしている言語は？</a>」節参照。

</dd><dt><code>-l, --log[=file]</code>
</dt><dd>
接続とクエリをファイルに記録します。 「<a href="manual.ja_Log_files.html#Query_log">23.2  The Query Log</a>」節参照。

</dd><dt><code>--log-isam[=file]</code>
</dt><dd>
すべての ISAM/MyISAM 変更をファイルに記録します(ISAM/MyISAM のデバッグ時に
のみ使用できます)。

</dd><dt><code>--log-slow-queries[=file]</code>
</dt><dd>
実行に <code>long_query_time</code> 秒以上掛かるすべてのクエリをファイルに記録し
ます。 「<a href="manual.ja_Log_files.html#Slow_query_log">23.5  The Slow Query Log</a>」節参照。

</dd><dt><code>--log-update[=file]</code>
</dt><dd>
更新を <code>file.#</code> に記録します。<code>#</code> は与えられなければ一意な番号で
す。 「<a href="manual.ja_Log_files.html#Update_log">23.3  更新ログ</a>」節参照。

</dd><dt><code>--log-long-format</code>
</dt><dd>
更新ログに拡張情報を記録します。<code>--log-slow-queries</code> を使用すると、イ
ンデックスを使用しないクエリが slow query ログに記録されます。

</dd><dt><code>--low-priority-updates</code>
</dt><dd>
テーブル変更操作 (<code>INSERT</code>/<code>DELETE</code>/<code>UPDATE</code>) は SELECT よ
りも低い優先度になります。あるクエリだけ優先度を低くするには、
<code>{INSERT | REPLACE | UPDATE | DELETE} LOW_PRIORITY ...</code> によって行
なわれます。また、ひとつのスレッドの優先度を変更するには、<code>SET
OPTION SQL_LOW_PRIORITY_UPDATES=1</code> で行なわれます。 「<a href="manual.ja_Performance.html#Table_locking">13.2.9  テーブル・ロッキングの問題</a>」節参照。

</dd><dt><code>--memlock</code>
</dt><dd>
メモリに <code>mysqld</code> プロセスをロックします。これはシステムが 
<code>mlockall()</code> システムコールをサポートしている時にだけ動作します。これ
は、OS が <code>mysqld</code> をディスク上にスワップさせる問題がある場合の助けに
なります。

</dd><dt><code>--myisam-recover [=option[,option...]]] where option is one of DEFAULT, BACKUP, FORCE or QUICK.</code>
</dt><dd>
このオプションを使用すると、<code>mysqld</code> はオープン時にテーブルがクラッシュ
したとマークされているかどうか、テーブルが適切にクローズされていないかどう
かチェックします。(最後のオプションは <code>--skip-locking</code> で起動している
場合にだけ働きます)。If this is the case mysqld will run check on the
table. テーブルが壊れている場合、<code>mysqld</code> はその修復を試みます。

次のオプションは修復の動作に影響します。

<table border="" width="100%" nosave="">
<tbody><tr><td>DEFAULT </td><td> <code>--myisam-recover</code> にオプションを与えないのと同じです。
</td></tr>
<tr><td>BACKUP </td><td> データテーブルが修復中に変更された場合、
                    <tt>`table_name.MYD'</tt> データファイルのバックアップを 
                    <tt>`table_name-datetime.BAK'</tt> に保存します。
</td></tr>
<tr><td>FORCE </td><td> .MYD ファイルからひとつより多くのレコードが失われている
                    場合でも修復を実行します。
</td></tr>
<tr><td>QUICK </td><td> 削除ブロックがない場合にテーブル内のレコードをチェック
                    しません。
</td></tr>
</tbody></table>

テーブルが自動的に修復される前に、<strong>MySQL</strong> はエラーログにこれについ
てのメモを追加します。ユーザの介入なしで多くのことを修復したい場合は、オプ
ション <code>BACKUP,FORCE</code> を使用すべきです。いくつかのレコードが削除され
る場合でも、テーブルを強制的に修復しますが、古いデータファイルをバックアッ
プとして保存するため、あとで何が起こったか検証できます。

</dd><dt><code>--pid-file=path</code>
</dt><dd>
<code>safe_mysqld</code> によって使用される pid ファイルのパス。

</dd><dt><code>-P, --port=...</code>
</dt><dd>
TCP/IP 接続で listen するポート番号。

</dd><dt><code>-o, --old-protocol</code>
</dt><dd>
とても古いクライアントとの互換のために、3.20 プロトコルを使用します。
 「<a href="manual.ja_Installing.html#Upgrading-from-3.20">4.18.3  バージョン 3.20 から バージョン 3.21 へのアップグレード</a>」節参照。

</dd><dt><code>--one-thread</code>
</dt><dd>
一つのスレッドだけを使用します(Linux 下でデバックするため)。
 「<a href="manual.ja_Porting.html#Debugging_server">I.1  MySQL server のデバッグ</a>」節参照。

</dd><dt><code>-O, --set-variable var=option</code>
</dt><dd>
変数に値を与えます。<code>--help</code> は変数をリストします。すべての変数の完全
な詳細はこのマニュアルの <code>SHOW VARIABLES</code> 節で見られます。
 「<a href="manual.ja_Reference.html#SHOW_VARIABLES">7.28.4  <code>SHOW VARIABLES</code></a>」節参照。サーバパラメータの調整についての節はこれらの最適化
方法の情報を含んでいます。 「<a href="manual.ja_Performance.html#Server_parameters">13.2.3  サーバーパラメーターのチューニング</a>」節参照。

</dd><dt><code>--safe-mode</code>
</dt><dd>
いくつかの最適化ステージをスキップします。<code>--skip-delay-key-write</code> を
含みます。

</dd><dt><code>--safe-show-database</code>
</dt><dd>
ユーザが権限を何も持っていないデータベースを表示しません。

</dd><dt><code>--secure</code>
</dt><dd>
<code>gethostbyname()</code> システムコールによって返される IP 番号が、オリジナ
ルのホスト名に逆引き解決できるかどうかをチェックします。これは、外部の誰か
が他のホストに成りすますことにより、アクセスを得ようとすることを難しくしま
す。このオプションはいくつかのホスト名正当性チェックも追加します。このオプ
ションは <strong>MySQL</strong> バージョン 3.21 ではデフォルトでオフになっています。
逆引き解決の実行に時々長い掛かることがあるためです。<strong>MySQL</strong> バージョ
ン 3.22 はホスト名をキャッシュし(<code>--skip-host-cache</code> が使用されない場
合)、そしてこのオプションはデフォルトで有効になっています。

</dd><dt><code>--skip-concurrent-insert</code>
</dt><dd>
同時に <code>MyISAM</code> テーブルに select と insert を行なう機能をオフにしま
す。(この機能にバグを見つけたと考える場合にだけ使用します)。

</dd><dt><code>--skip-delay-key-write</code>
</dt><dd>
すべてのテーブルに対し <code>delay_key_write</code> オプションを無視します。
 「<a href="manual.ja_Performance.html#Server_parameters">13.2.3  サーバーパラメーターのチューニング</a>」節参照。

</dd><dt><code>-Sg, --skip-grant-tables</code>
</dt><dd>
このオプションは、サーバをすべての権限システム使用しないようにします。これ
は全員にすべてのデータベースへの<em>完全アクセス</em>を与えます！
(<code>mysqladmin flush-privileges</code> や <code>mysqladmin reload</code> を実行する
ことで、権限テーブルを使用して起動するように実行中のサーバに伝えることがで
きます。)

</dd><dt><code>--skip-host-cache</code>
</dt><dd>
より速いホスト名-IP解決のためのホスト名キャッシュを使用しません。代わりに
すべての接続で DNS サーバへクエリします。 「<a href="manual.ja_Performance.html#DNS">13.2.10  How MySQL uses DNS</a>」節参照。

</dd><dt><code>--skip-locking</code>
</dt><dd>
システムロックを使用しません。<code>isamchk</code> または <code>myisamchk</code> を使
用するためには、サーバをシャットダウンする必要があります。
 「<a href="manual.ja_Introduction.html#Stability">1.7  <strong>MySQL</strong> はどれくらい安定か？</a>」節参照。注意: <strong>MySQL</strong> バージョン 3.23 では、
<code>REPAIR</code> と <code>CHECK</code> を <code>MyISAM</code> テーブルの修復／チェックに
使用できます。

</dd><dt><code>--skip-name-resolve</code>
</dt><dd>
ホスト名を解決しません。権限テーブルのすべての <code>Host</code> フィールド値は 
IP 番号か <code>localhost</code> でなければなりません。 「<a href="manual.ja_Performance.html#DNS">13.2.10  How MySQL uses DNS</a>」節参照。

</dd><dt><code>--skip-networking</code>
</dt><dd>
TCP/IP 接続の listen をまったく行ないません。<code>mysqld</code> との接続には 
UNIX ソケット経由で行なう必要があります。このオプションはローカル要求だけ
を許可するシステムでは、高く推奨されます。 「<a href="manual.ja_Performance.html#DNS">13.2.10  How MySQL uses DNS</a>」節参照。

</dd><dt><code>--skip-new</code>
</dt><dd>
Don't use new, possible wrong routines.  Implies <code>--skip-delay-key-write</code>.
This will also set default table type to <code>ISAM</code>.   「<a href="manual.ja_Table_types.html#ISAM">8.3  ISAM Tables</a>」節参照.

</dd><dt><code>--skip-stack-trace</code>
</dt><dd>
スタックトレースを書き出しません。このオプションは、<code>mysqld</code> をデバッ
ガ下で実行している時に有用です。 「<a href="manual.ja_Porting.html#Debugging_server">I.1  MySQL server のデバッグ</a>」節参照。

</dd><dt><code>--skip-safemalloc</code>
</dt><dd>
<strong>MySQL</strong> が <code>--with-debug=full</code> で configure されている場合、す
べてのプログラムがすべてのメモリ割り当てとメモリ解放をオーバーラン用にチェッ
クします。このチェックはとても遅いので、メモリチェックが不要な場合、このオ
プションを使用することでこれを無効にできます。

</dd><dt><code>--skip-show-database</code>
</dt><dd>
<strong>process</strong> 権限を持っていないユーザに 'SHOW DATABASE' コマンドを許し
ません。

</dd><dt><code>--skip-thread-priority</code>
</dt><dd>
より速いレスポンスタイム用のスレッド優先度の使用を無効にします。

</dd><dt><code>--socket=path</code>
</dt><dd>
デフォルト <code>/tmp/mysql.sock</code> の代わりに、ローカル接続用に使用されるソ
ケットファイル。

</dd><dt><code>transaction-isolation= { READ-UNCOMMITTED | READ-COMMITTED | REPEATABLE-READ | SERIALIZABLE }</code>
</dt><dd>
デフォルトのトランザクション isolation レベルを設定します。 「<a href="manual.ja_Reference.html#SET_TRANSACTION">7.34  <code>SET TRANSACTION</code> Syntax</a>」節参照。

</dd><dt><code>-t, --tmpdir=path</code>
</dt><dd>
一時ファイル用のパス。デフォルトの <code>/tmp</code> ディレクトリが一時テーブル
を保持するのに小さすぎるパーティション上にある場合に有用です。

</dd><dt><code>-u, --user=user_name</code>
</dt><dd>
ユーザ <code>user_name</code> で <code>mysqld</code> デーモンを実行します。このオプショ
ンは、<code>mysqld</code> を root で起動した時に <em>強制</em>されます。

</dd><dt><code>-V, --version</code>
</dt><dd>
バージョン情報を出力して終了します。

</dd></dl>

<p>
<a name="IDX309"></a>
<a name="IDX310"></a>
<a name="IDX311"></a>
<a name="IDX312"></a>


</p><h3><a name="Option_files" href="manual.ja_toc.html#Option_files">4.16.5  オプションファイル ( <code>my.cnf</code> )</a></h3>

<p>
<strong>MySQL</strong> バージョン 3.22 のサーバー、クライアントともに、
オプションファイルからデフォルトの起動オプションを読み込むことができます。

</p>
<p>
UNIX では <strong>MySQL</strong> は以下のファイルからデフォルトオプションを読みます：

</p>
<p>
<a name="IDX313"></a>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>ファイル名</strong> </td><td> <strong>意味</strong>
</td></tr>
<tr><td><code>/etc/my.cnf</code> </td><td> 全体のオプション
</td></tr>
<tr><td><code>DATADIR/my.cnf</code> </td><td> サーバ固有オプション
</td></tr>
<tr><td><code>defaults-extra-file</code> </td><td> --defaults-extra-file=# で指定されたファイル
</td></tr>
<tr><td><code>~/.my.cnf</code> </td><td> ユーザ固有オプション
</td></tr>
</tbody></table>

</p>
<p>
<code>DATADIR</code> は <strong>MySQL</strong> データディレクトリです (普通
バイナリ配布では <tt>`/usr/local/mysql/data'</tt> 、ソース配布では <tt>`/usr/local/var'</tt>).
このディレクトリはconfigure時に決定されており、 <code>--datadir</code> を <code>mysqld</code> 起動時に指定しても変更されません。
(サーバーはコマンドラインの引数を処理する前にオプションファイルを探します。
よって、<code>--datadir</code> 引数を指定してもオプションファイルを探す場所を指定することにはなりません。)

</p>
<p>
Windows では <strong>MySQL</strong> は以下のファイルからデフォルトオプションを読みます：

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td><strong>ファイル名</strong> </td><td> <strong>意味</strong>
</td></tr>
<tr><td><code>windows-system-directory\my.ini</code> </td><td> Global options
</td></tr>
<tr><td><code>C:\my.cnf</code> </td><td> 全体のオプション
</td></tr>
<tr><td><code>C:\mysql\data\my.cnf</code> </td><td> サーバ固有オプション
</td></tr>
</tbody></table>

<p>
注意: Windows では <code>\</code> の代わりに <code>/</code> で全てのパスを記述すべきで
す。<code>\</code> を使用する場合、<code>\</code> は <strong>MySQL</strong> のエスケープ文字
なので、これを二重に記述する必要があります。

</p>
<p>
<a name="IDX314"></a>
<strong>MySQL</strong> は上記の表にかかれている順にオプションファイルを読みます。
もし複数オプションファイルがあった場合、後から読まれた設定が有効になります。
全てのオプションはコマンドラインの引数に上書きされます。
いくつかのオプションは環境変数に定義できます。
オプションファイルとコマンドラインの引数は環境変数を上書きします。

</p>
<p>
以下のプログラムはオプションファイルをサポートします：<code>mysql</code>,
<code>mysqladmin</code>, <code>mysqld</code>, <code>mysqldump</code>, <code>mysqlimport</code>,
<code>myisamchk</code> and <code>myisampack</code>.

</p>
<p>
オプションファイルには、プログラムがサポートしているコマンドラインの long オプション(例えば、<code>-u</code> ではなくて <code>--user</code> の方)を書くことができます。
プログラムを <code>--help</code> で起動すれば、設定可能な変数名が得られます。

</p>
<p>
オプションファイルの書式は以下です：

</p>
<dl compact="">

<dt><code>#comment</code>
</dt><dd>
コメントは <samp>`#'</samp> か <samp>`;'</samp> 文字で始めます。空の行は無視します。

</dd><dt><code>[group]</code>
</dt><dd>
グループ宣言。
<code>group</code> はオプションを定義するプログラムかグループの名前です。
この宣言の後、<code>オプション</code> か <code>set-variable</code> 行で、このグループにオプションを与えます。
このセクションの範囲は、他のグループ宣言の行が来るか、ファイルの最後に来るまでです。

</dd><dt><code>option</code>
</dt><dd>
これはコマンドラインの <code>--option</code> と等価です。

</dd><dt><code>option=value</code>
</dt><dd>
これはコマンドラインの <code>--option=value</code> と等価です。

</dd><dt><code>set-variable = variable=value</code>
</dt><dd>
これはコマンドラインの <code>--set-variable variable=value</code> と等価です。
これは <code>mysqld</code> 変数で使用される形式です。
</dd></dl>

<p>
<code>client</code> グループは、全ての <strong>MySQL</strong> クライアント(<code>mysqld</code>は除)に対してオプションを定義します。
これはサーバーに接続する際に使用するパスワードを指定できるグループです。
(この場合、オプションファイルは自分だけが読み書きできるようにしてください)

</p>
<p>
オプションや値の善後にある全てのブランク文字は自動で取り除かれます。
値として、<samp>`\b'</samp>,<samp>`\t'</samp>, <samp>`\n'</samp>, <samp>`\r'</samp>, <samp>`\\'</samp>, <samp>`\s'</samp>
 のエスケープシーケンスが使用できます。
(<samp>`\s'</samp> == blank).

</p>
<p>
オプションファイル例：

</p>

<pre>[client]
port=3306
socket=/tmp/mysql.sock

[mysqld]
port=3306
socket=/tmp/mysql.sock
set-variable = key_buffer_size=16M
set-variable = max_allowed_packet=1M

[mysqldump]
quick
</pre>

<p>
ユーザーオプションファイル例：

</p>

<pre>[client]
# The following password will be sent to all standard MySQL clients
password=my_password

[mysql]
no-auto-rehash
set-variable = connect_timeout=2

[mysql-hot-copy]
interactive-timeout

</pre>

<p>
<a name="IDX315"></a>
もしソース配布を持っているなら、 <tt>`my-xxxx.cnf'</tt> という名前のサンプルファイルを <tt>`support-files'</tt> ディレクトリに見ることができます。
もしバイナリ配布を使用しているなら、 <tt>`DIR/share/mysql'</tt> ディレクトリを探してください
(ここで <code>DIR</code> は <strong>MySQL</strong> がインストールされたディレクトリのパス名で、普通は <tt>`/usr/local/mysql'</tt>)。
この <tt>`my-xxxx.cnf'</tt> ファイルを自分のディレクトリに <tt>`.my.cnf'</tt> という名前でコピーして使用できます。

</p>
<p>
オプションファイルをサポートするすべての <strong>MySQL</strong> クライアントは次
のオプションをサポートします:

</p>
<table border="" width="100%" nosave="">
<tbody><tr><td>--no-defaults </td><td> オプションファイルを読み込まない。
</td></tr>
<tr><td>--print-defaults </td><td> プログラム名と得られる全てのオプションを出力する。
</td></tr>
<tr><td>--defaults-file=full-path-to-default-file </td><td> 与えられたコンフィグレーションファイルだけを使用する。
</td></tr>
<tr><td>--defaults-extra-file=full-path-to-default-file </td><td> グローバルコンフィグレーションファイルの後、ユーザコンフィグレーションファイルの前にこのコンフィグレーションファイルを読み込む。
</td></tr>
</tbody></table>

<p>
注意: 上記のオプションはコマンドラインの先頭になければ働きません！ ただ
し、<code>--print-defualts</code>は <code>--defaults-xxx-file</code> コマンドの直後
にも置けます。

</p>
<p>
開発者向け情報：　オプションファイルの操作は全てのオプションをコマンドラインの引数より先に処理するように簡単に埋め込まれています。
これはオプションを最後に処理するプログラムを複数立ちあげる場合に都合よく動きます。
もしオプションファイルを読み込む機能のない古いプログラムを使用しているなら、
たった二行だけ注意して書けばいいだけです。
この動作については <strong>MySQL</strong> クライアントプログラムのコードを参考にしてください。

</p>
<p>
シェルスクリプト内では、<tt>`my_print_defaults'</tt> コマンドを使用して、コ
ンフィグファイルを解析することができます:

</p>

<pre>
shell&gt; my_print_defaults client mysql
--port=3306
--socket=/tmp/mysql.sock
--no-auto-rehash
</pre>

<p>
上記は、'client' と 'mysql' グループ用の全オプションを出力します。

</p>


<h2><a name="Installing_many_servers" href="manual.ja_toc.html#Installing_many_servers">4.17  同じマシンに多くのサーバをインストールする</a></h2>
<p>
<a name="IDX316"></a>
<a name="IDX317"></a>
<a name="IDX318"></a>

</p>
<p>
同じマシン上で多くの異なる <code>mysqld</code> デーモン(サーバ)を動作させたい場
合があります。例えば、テスト用に <code>MySQL</code> の新しいバージョンを使用中の
古いバージョンと共に実行したい場合や、異なる mysqld サーバにそれを管理する
異なるユーザアクセスを与えたい場合などです。

</p>
<p>
一つの方法は、新しいサーバを次のように異なるソケットとポートで起動すること
です:

</p>
<p>
<a name="IDX319"></a>
<a name="IDX320"></a>
<a name="IDX321"></a>
<a name="IDX322"></a>

</p><pre>shell&gt; MYSQL_UNIX_PORT=/tmp/mysqld-new.sock
shell&gt; MYSQL_TCP_PORT=3307
shell&gt; export MYSQL_UNIX_PORT MYSQL_TCP_PORT
shell&gt; scripts/mysql_install_db
shell&gt; bin/safe_mysqld &amp;
</pre>

<p>
The environment variables 付録は <code>mysqld</code> に影響する他の環境変数の
一覧を含んでいます。 「<a href="manual.ja_Environment_variables.html#Environment_variables">A  Environment Variables</a>」節参照。

</p>
<p>
この後、二つのデーモンを違うポート、ソケットで実行するように、起動スクリプトを変更します。
例えば、<code>safe_mysqld</code>  を二つ書きますが、<code>--socket</code>, <code>--port</code> と <code>--basedir</code>
 オプションをそれぞれの <code>safe_mysqld</code> に指定します。

</p>
<p>
<code>safe_mysqld --default-file=path-to-option-file</code>

</p>
<p>
少なくとも、次のオプションはサーバごとに異なるようにすべきです:

</p>
<dl compact="">

<dt><code>port=#</code>
</dt><dd>
</dd><dt><code>socket=path</code>
</dt><dd>
</dd><dt><code>pid-file=path</code>
</dt><dd>
</dd></dl>

<p>
次のオプションが使用される場合、異なるようにすべきです:

</p>
<dl compact="">

<dt><code>log=path</code>
</dt><dd>
</dd><dt><code>log-bin=path</code>
</dt><dd>
</dd><dt><code>log-update=path</code>
</dt><dd>
</dd><dt><code>log-isam=path</code>
</dt><dd>
</dd><dt><code>bdb-logdir=path</code>
</dt><dd>
</dd></dl>

<p>
さらに性能を求める場合、次も異なるように記述できます:

</p>
<dl compact="">

<dt><code>tmpdir=path</code>
</dt><dd>
</dd><dt><code>bdb-tmpdir=path</code>
</dt><dd>
</dd></dl>

<p>
 「<a href="manual.ja_Installing.html#Command-line_options">4.16.4  mysqld コマンド行オプション</a>」節参照.

</p>
<p>
バイナリの <strong>MySQL</strong> バージョン (.tar ファイル) をインストールして、
<code>./bin/safe_mysqld</code> で起動する場合、多くの場合では、追加/変更する必要
のあるオプションは <code>safe_mysqld</code> への <code>socket</code> と <code>port</code> 引
数だけです。

</p>


<h2><a name="Upgrade" href="manual.ja_toc.html#Upgrade">4.18  MySQL のアップグレード/ダウングレード</a></h2>
<p>
<a name="IDX323"></a>
<a name="IDX324"></a>

</p>
<p>
<strong>MySQL</strong> 形式とデータファイルは、<strong>MySQL</strong> が同じベースバージョ
ンである限り、同じアーキテクチャ上の異なるバージョン間でいつでも移動でき
ます。現在のベースバージョンは 3 です。<strong>MySQL</strong> の実行時に
文字セットが変更された場合(これはソート順も変更します)、全てのテーブル
に <code>myisamchk -r -q</code> を行なう必要があります。そうしなければ、インデッ
クスが正しい順になりません。

</p>
<p>
もしあなたが神経質だったり新しいバージョンを恐れている場合、いつでもあな
たの古い <code>mysqld</code> を <code>mysqld</code>-'old-version-number' のような何
かにリネームできます。もし新しい <code>mysqld</code> が予期せぬ何かを行った場
合、単純にそれをシャットダウンし、古い <code>mysqld</code> を再起動することが
できます！

</p>
<p>
アップグレード時には、もちろん、古いデータベースをバックアップもしておく
べきです。

</p>
<p>
アップグレード後、再コンパイルされたクライアントプログラムで、
<code>Commands out sync</code> や予期せぬコアダンプのような問題が起きる場合、
おそらく、プログラムのコンパイル時に古いヘッダやライブラリファイルを使用
したのでしょう。この場合、<tt>`mysql.h'</tt> ファイルと <tt>`libmysql.a'</tt> ラ
イブラリが、新しい <strong>MySQL</strong> 配布からのものであるかどうかを確かめる
ために、日付をチェックすべきです。もし違っていれば、プログラムを再コンパ
イルしてください！

</p>
<p>
もし新しい <code>mysqld</code> サーバーが起動できないとか、パスワード無しで
接続できないとか、いくつかの問題が発生した場合、以前のインストールでできた
古い <tt>`my.cnf'</tt> ファイルがあるかどうかを確認してください！
<code>program-name --print-defaults</code> で確認できます.  もしこの出力が
プログラムの名称以外の物を返した場合、有効になっている <code>my.cnf</code> ファイルが
あります！

</p>
<p>
新しいリリースの <strong>MySQL</strong> をインストールした場合に常に
 <code>Msql-Mysql-modules</code> を再構築、再インストールすることは
いい考えです。すべての <code>DBI</code> スクリプトが <strong>MySQL</strong> の
アップグレード後にコアダンプする兆候に気づいた場合は、特に
そうしてください。

</p>

<p>
<a name="IDX325"></a>
<a name="IDX326"></a>


</p><h3><a name="Upgrading-from-3.22" href="manual.ja_toc.html#Upgrading-from-3.22">4.18.1  バージョン 3.22 から バージョン 3.23 へのアップグレード</a></h3>

<p>
<strong>MySQL</strong> バージョン 3.23 は新しい <code>MyISAM</code> 型のテーブルと、
古い <code>ISAM</code> 型のテーブルをサポートします。
バージョン 3.23 を使用する際、古いテーブル(ISAM) を変換する必要はありません。
デフォルトでは、新しく作られるテーブルが <code>MyISAM</code> 型になります。
(これは <code>mysqld</code> を <code>--default-table-type=isam</code> オプションで
起動することにより、変更できます)。
 <code>ISAM</code> テーブルを <code>MyISAM</code> に変更するには、
 <code>ALTER TABLE</code> を使用するか、<code>mysql_convert_table_format</code> 
perl スクリプトを使用します。

</p>
<p>
バージョン 3.22 と バージョン 3.21 のクライアントは問題なく
バージョン 3.23 サーバーで動作します。

</p>
<p>
以下に、バージョン 3.23 にアップグレードするときに、注目する必要があるものを列挙します：

</p>

<ul>
<li>

<code>tis620</code> 文字セットを使用しているすべてのテーブルを <code>myisamchk
-r</code> または <code>REPAIR TABLE</code> で fix する必要があります。
</li><li>

シンボリックリンクされたデータベースに対し <code>DROP DATABASE</code> を行なう場
合は、リンクとオリジナルデータベースが削除されます。(3.22 では configure 
が <code>readlink</code> システムコールを検出しないため、これは起りません。)
</li><li>

<code>OPTIMIZE TABLE</code> は現在、<strong>MyISAM</strong> テーブルだけに動作します。他
のテーブル型については、<code>ALTER TABLE</code> を使用して、テーブルを最適化で
きます。<code>OPTIMIZE TABLE</code> の間は、テーブルは他のスレッドからロックされ
ます。
</li><li>

<strong>MySQL</strong> クライアント <code>mysql</code> は現在、デフォルトで
<code>--no-named-commands (-g)</code> オプションで起動されます。このオプションは
<code>--enable-named-commands (-G)</code> で無効にできます。これは、非互換問題を
引き起こす場合があります。たとえば、セミコロン無しの named command を使用
する SQL スクリプトです！ 長い形式のコマンドは行頭でまだ動作します。
</li><li>

<code>german</code> 文字ソート順を使用する場合、ソート順についていくつか変更され
ているので、<code>isamchk -r</code> ですべてのテーブルを修復する必要があります！
</li><li><code>IF</code> のデフォルトの戻り値型は現在両方の引数に依存します。最初の引数だけではありません。

</li><li><code>AUTO_INCREMENT</code> は負数では働きません。

この理由は、負数は -1 から 0 へのラッピング時に問題を引き起こすためです。
<code>AUTO_INCREMENT</code> は現在 MyISAM テーブルでは低いテーブルで処理され、以
前よりとても速いです。MyISAM テーブルでは、テーブルからいくつかのレコード
を削除したとしても、古い数値は再利用されません。
</li><li><code>CASE</code>, <code>DELAYED</code>, <code>ELSE</code>, <code>END</code>,

 <code>FULLTEXT</code>, <code>INNER</code>, <code>DELAYED</code>,<code>RIGHT</code>, <code>WHEN</code> は
予約語になりました。
</li><li><code>FLOAT(X)</code> は本当の浮動小数点型になりました。桁数固定の値ではありません。

</li><li><code>DECIMAL(length,dec)</code> 宣言時、length 引数はもはや符号や小数点の場所を含みません。

</li><li><code>TIME</code> 文字列は以下のフォーマットのいずれかでなければなりません：

<code>[[[DAYS] [H]H:]MM:]SS[.fraction]</code> か
<code>[[[[[H]H]H]H]MM]SS[.fraction]</code>
</li><li><code>LIKE</code> は、同一文字の比較 <code>'='</code> ルールを使用して、

比較を行うようになりました。
もし古い比較方法にするならば、 <strong>MySQL</strong> を <code>CXXFLAGS=-DLIKE_CMP_TOUPPER</code>
 フラグでコンパイルします。
</li><li><code>REGEXP</code> は、通常の文字列(非 binary) では、ケース非依存になりました。

</li><li><code>MyISAM</code> テーブル(<code>.MYI</code>) の検査・修復には、<code>CHECK TABLE</code>

を使用するか、<code>myisamchk</code> を使用します。
<code>isamchk</code> は ISAM(<code>.ISM</code>) テーブル用に使用します。.
</li><li>もし、バージョン 3.22 と バージョン 3.23 の間で互換性を持たせて <code>mysqldump</code> を行いたいならば、

 <code>--opt</code> や <code>--full</code> オプションを <code>mysqldump</code> に指定してはいけません。
</li><li>全ての <code>DATE_FORMAT()</code> をチェックしてください。

各フォーマット文字の前には <samp>`%'</samp> 文字が必要になりました。
(<strong>MySQL</strong> 3.22 バージョン以降ではこの文法が許されます。)
</li><li>

<code>mysql_fetch_fields_direct</code> が関数になり (今まではマクロだったのが)、
<code>MYSQL_FIELD</code> 型ではなく <code>MYSQL_FIELD</code> ポインター型を返します。
</li><li>

<code>mysql_num_fields()</code> は、 <code>MYSQL*</code> object をもはや使うことができません。
(これは今、 <code>MYSQL_RES*</code> を引数に取る関数になりました)。
代わりに、 <code>mysql_field_count()</code> を使用すべきです。
</li><li>

<code>MySQL</code> バージョン 3.22 では, <code>SELECT DISTINCT ...</code> の出力は
ほとんどいつもソートされました。 3.23 では, ソートを行った結果を得るには
<code>GROUP BY</code> か <code>ORDER BY</code> を使用しなくてはなりません。
</li><li>

もし、一致するレコードが無かった場合、<code>SUM()</code> は 0 の代わりに <code>NULL</code> を返すようになりました。
これは ANSI SQL 準拠です。
</li><li><code>NULL</code> 値での <code>AND</code> や <code>OR</code> は現在 0 ではなく

<code>NULL</code> を返します。
これは主に、<code>NOT NULL</code> = <code>NULL</code> として、<code>AND/OR</code> 式上で 
<code>NOT</code> を使用するクエリに影響します。<code>LPAD()</code> と <code>RPAD()</code> は
長さ引数よりも長い場合、結果文字列は短くなります。
</li></ul>

<p>
<a name="IDX327"></a>


</p><h3><a name="Upgrading-from-3.21" href="manual.ja_toc.html#Upgrading-from-3.21">4.18.2  バージョン 3.21 から バージョン 3.22 へのアップグレード</a></h3>
<p>
<a name="IDX328"></a>

</p>
<p>
バージョン 3.21 と バージョン 3.22 の間には互換性に影響する変更はありません。<code>DATE</code> 型を
伴って生成された新しいテーブルは、日付の格納に新しい方法を使用することだ
けが pitfall です。これらの新しいフィールドに古いバージョンの 
<code>mysqld</code> からアクセスすることはできません。

</p>
<p>
<code>MySQL</code> バージョン 3.22 インストール後、新しいサーバを開始して、
<code>mysql_fix_privilege_tables</code> スクリプトを実行すべきです。これは
<code>GRANT</code> コマンドを使用するために必要な権限を追加します。これを忘れ
ると、<code>ALTER TABLE</code> や <code>CREATE/DROP INDEX</code> を使用しようとした
時に <code>Access denied</code> になります。<strong>MySQL</strong> root ユーザがパスワー
ドを要求する場合、<code>mysql_fix_privilege_tables</code> への引数としてそれを
与えてください。

</p>
<p>
C API インタフェース <code>mysql_real_connect()</code> は変更されました。この
関数を呼び出す古いクライアントプログラムを持っている場合は、新しい 
<code>db</code> 引数に <code>0</code> を置く(またはより速い接続のために <code>db</code> 要
素を送るようにクライアントをコーディングしなおす)必要があります。
<code>mysql_real_connect()</code> を呼び出す前に
<code>mysql_init()</code> を呼ばなくてはなりません！
この変更は、<code>MYSQL</code> の構造体にオプションを保存するための
新しい <code>mysql_options()</code> 関数を有効にします。

</p>
<p>
<code>mysqld</code> 変数 <code>key_buffer</code> は <code>key_buffer_size</code> に名前が
変わりました。しかし、まだ前の名前もスターとアップファイル中で使用できま
す。

</p>



<h3><a name="Upgrading-from-3.20" href="manual.ja_toc.html#Upgrading-from-3.20">4.18.3  バージョン 3.20 から バージョン 3.21 へのアップグレード</a></h3>
<p>
<a name="IDX329"></a>

</p>
<p>
既に バージョン 3.20.28 より前のバージョンが稼働していて、バージョン 3.21.x に変更したい場合は、
次を行なう必要があります:

</p>
<p>
<code>safe_mysqld --old-protocol</code> で <code>mysqld</code> 3.21 サーバを起動すれ
ば、バージョン 3.20 配布からのクライアントでそれを使用できます。この場合、新しいク
ライアント関数 <code>mysql_errno()</code> はサーバのエラーは何も返さず、
<code>CR_UNKNOWN_ERROR</code> だけを返します (ただしクライアントのエラーについ
ては働きます)。そして サーバは古い <code>password()</code> チェックを新しいものの代わ
りに使用します。

</p>
<p>
<code>mysqld</code> に <code>--old-protocol</code> オプションを<em>使わない</em>場合、
次の変更をする必要があります:

</p>

<ul>
<li>

全てのクライアントコードは再コンパイルする必要があります。ODBC を使用し
ている場合は新しい <strong>MyODBC</strong> 2.x ドライバを入手する必要があります。
</li><li>

<code>mysql.user</code> テーブル内の <code>password</code> フィールドを 
<code>CHAR(16)</code> に変換するために、スクリプト 
<code>scripts/add_long_password</code> を実行する必要があります。
</li><li>

全てのパスワードは <code>mysql.user</code> テーブル内に再配置する必要がありま
す(31ビットパスワードの代わりに、62ビットを得るために)。
</li><li>

テーブル形式は変更されていないので、どのテーブルも変換する必要はありませ
ん。
</li></ul>

<p>
<strong>MySQL</strong> バージョン 3.20.28 とそれ以降は、クライアントに影響を及ぼさずに、新
しい <code>user</code> テーブル形式を処理することができます。バージョン 3.20.28 より前の 
<strong>MySQL</strong> バージョンを持っている場合は、<code>user</code> テーブルを変換
すると、パスワードはその上ではもう働きません。安全のため、最初に少なくと
も バージョン 3.20.28 にアップグレードし、それから バージョン 3.21.x に
アップグレードすべきです。

</p>
<p>
<a name="IDX330"></a>
新しいクライアントコードは バージョン 3.20.x <code>mysqld</code> サーバで動作するので、
もし バージョン 3.21.x で問題があった場合は、クライアントをもう一度再コンパイルする必
要はなく、古い バージョン 3.20.x サーバを使用することができます。

</p>
<p>
<code>mysqld</code> に <code>--old-protocol</code> オプションを使用しない場合、古い
クライアントはエラーメッセージを発します:

</p>

<pre>ERROR: Protocol mismatch. Server Version = 10 Client Version = 9
</pre>

<p>
新しい Perl インタフェース <code>DBI</code>/<code>DBD</code> は古い <code>mysqlperl</code> 
インタフェースもサポートします。<code>mysqlperl</code> を使用する場合に行う必
要のある変更は、<code>connect()</code> 関数の引数の変更だけです。新しい引数は:
<code>host</code>, <code>database</code>, <code>user</code>, <code>password</code> (<code>user</code> 
と <code>password</code> 引数の順番が変更されました)。
 「<a href="manual.ja_Clients.html#Perl_DBI_Class">24.2.1.1  The <code>DBI</code> Interface</a>」節参照.

</p>
<p>
次の変更は古いアプリケーションでのクエリに影響します:

</p>

<ul>
<li>

<code>HAVING</code> は現在 <code>ORDER BY</code> 節より前になければいけません。
</li><li>

<code>LOCATE()</code> へのパラメータは交換されました。
</li><li>

新しい予約語がいくつかあります。最も注意すべきは <code>DATE</code>,
<code>TIME</code> そして <code>TIMESTAMP</code> です。
</li></ul>

<p>
<a name="IDX331"></a>


</p><h3><a name="Upgrading-to-arch" href="manual.ja_toc.html#Upgrading-to-arch">4.18.4  他のアーキテクチャへのアップグレード</a></h3>
<p>
<a name="IDX332"></a>

</p>
<p>
もし、<strong>MySQL</strong> バージョン 3.23 を使用しているならば、
違うアーキテクチャのマシンに、<code>.frm</code>, <code>.MYI</code>,<code>.MYD</code> ファイルを
コピーすることが出来ます。
ただし、両者間で、同じ浮動小数点のフォーマットをサポートしている場合に限ります。
(<strong>MySQL</strong> takes care of any byte swapping issues).

</p>
<p>
現在 <strong>MySQL</strong> <code>ISAM</code> データファイルとインデックスファイル
( <tt>`*.ISD'</tt> と <tt>`*.ISM'</tt> ファイル) はアーキテクチャ依存で、
いくつかのケースでは OS 依存です。
アプリケーションを、現在のマシンとは異なるアーキテクチャ/OS を
持つ他のマシンに移したい場合は、単純にファイルを他のマシンにコピーするこ
とでデータベースを移行しようとすべきではありません。<code>mysqldump</code> を
使用すべきです。

</p>
<p>
デフォルトでは <code>mysqldump</code> は、完全な SQL ステートメントファイルを
生成します。それからそのファイルを他のマシンへ転送し、<code>mysql</code> クラ
イアントへの入力として与えることができます。

</p>
<p>
有効なオプションが何かを見るためには、<code>mysqldump --help</code> を試してく
ださい。データを <strong>MySQL</strong> のより新しいバージョンに移す場合、速くコ
ンパクトなダンプを得るために、より新しいバージョンで <code>mysqldump --opt</code> 
を使用すべきです。

</p>
<p>
２つのマシン間でデータベースを移動する最も簡単な (しかし最も速くはない) 
方法は、データベースが置かれているマシン上で次のコマンドを実行することで
す:

</p>

<pre>shell&gt; mysqladmin -h 'other hostname' create db_name
shell&gt; mysqldump --opt db_name \
        | mysql -h 'other hostname' db_name
</pre>

<p>
遅いネットワーク上でリモートマシンからデータベースをコピーしたい場合は、
次を使用できます:

</p>

<pre>shell&gt; mysqladmin create db_name
shell&gt; mysqldump -h 'other hostname' --opt --compress db_name \
        | mysql db_name
</pre>

<p>
ファイル内の結果を格納することもできます (この例では圧縮されています):

</p>

<pre>shell&gt; mysqldump --quick db_name | gzip &gt; db_name.contents.gz
</pre>

<p>
データベースの中身を含んでいるファイルを、目的のマシンに転送して、次のコ
マンドを実行してください:

</p>

<pre>shell&gt; mysqladmin create db_name
shell&gt; gunzip &lt; db_name.contents.gz | mysql db_name
</pre>

<p>
<a name="IDX333"></a>
<a name="IDX334"></a>
データベース転送を実行するために、<code>mysqldump</code> と <code>mysqlimport</code> 
も使用できます。大きなテーブルでは、これは単純な <code>mysqldump</code> の使用
よりもとても速いです。次に示すコマンドでは、<code>DUMPDIR</code> は
<code>mysqldump</code> からの出力を格納するために使用するディレクトリの完全な
パス名を表わしています。

</p>
<p>
まず、出力ファイルのためのディレクトリを作成して、データベースをダンプし
ます:

</p>

<pre>shell&gt; mkdir DUMPDIR
shell&gt; mysqldump --tab=DUMPDIR db_name
</pre>

<p>
それから、<code>DUMPDIR</code> ディレクトリ内のファイルを目的のマシン上の対応
するディレクトリに転送し、<strong>MySQL</strong> にファイルをロードします:

</p>

<pre>shell&gt; mysqladmin create db_name           # create database
shell&gt; cat DUMPDIR/*.sql | mysql db_name   # create tables in database
shell&gt; mysqlimport db_name DUMPDIR/*.txt   # load data into tables
</pre>

<p>
<code>mysql</code> データベースのコピーも忘れないでください。それは承認テーブ
ル (<code>user</code>, <code>db</code>, <code>host</code>) が格納されるためです。
<code>mysql</code> データベースをその場所に置くまで、新しいマシン上では 
<strong>MySQL</strong> <code>root</code> ユーザとしてコマンドを実行する必要があります。

</p>
<p>
新しいマシン上へ <code>mysql</code> データベースを導入した後、サーバが承認テー
ブル情報を再ロードするために、<code>mysqladmin flush-privileges</code> を実行してください。

</p>
<p>
<a name="IDX335"></a>
<a name="IDX336"></a>
<a name="IDX337"></a>
<a name="IDX338"></a>
</p><p></p><hr><p>
Go to the <a href="manual.ja_Introduction.html">first</a>, <a href="manual.ja_Licensing_and_Support.html">previous</a>, <a href="manual.ja_Compatibility.html">next</a>, <a href="manual.ja_Concept_Index.html">last</a> section, <a href="manual.ja_toc.html">table of contents</a>.
 
 
</p></body></html>