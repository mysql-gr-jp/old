<html><head>
  <!-- This HTML file has been created by texi2html 1.52 (hacked by david@detron.se)
     from manual.ja.texi on 20 July 2001 -->

  <title>MySQL Reference Manual for version 3.23.38. - 18  Adding New Procedures to MySQL</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body bgcolor="#FFFFFF" text="#000000" link="#101090" vlink="#7030B0">
Go to the <a href="manual.ja_Introduction.html">first</a>, <a href="manual.ja_Adding_functions.html">previous</a>, <a href="manual.ja_ODBC.html">next</a>, <a href="manual.ja_Concept_Index.html">last</a> section, <a href="manual.ja_toc.html">table of contents</a>.
<p></p><hr><p>


</p><h1><a name="Adding_procedures" href="manual.ja_toc.html#Adding_procedures">18  Adding New Procedures to MySQL</a></h1>

<p>
In <strong>MySQL</strong>, you can define a procedure in C++ that can access and
modify the data in a query before it is sent to the client.  The modification
can be done on row-by-row or <code>GROUP BY</code> level.

</p>
<p>
We have created an example procedure in <strong>MySQL</strong> Version 3.23 to
show you what can be done.

</p>
<p>
Additionally we recommend you to take a look at 'mylua', which you can find in the Contrib directory.  「<a href="manual.ja_Contrib.html#Contrib">D  Contributed Programs</a>」節参照.  Which this you can use the LUA
language to load a procedure at runtime into <code>mysqld</code>.

</p>



<h2><a name="procedure_analyse" href="manual.ja_toc.html#procedure_analyse">18.1  Procedure Analyse</a></h2>

<p>
<code>analyse([max elements,[max memory]])</code>

</p>
<p>
This procedure is defined in the <tt>`sql/sql_analyse.cc'</tt>.  This
examines the result from your query and returns an analysis of the
results:

</p>

<ul>
<li>

<code>max elements</code> (default 256) is the maximum number of distinct values
<code>analyse</code> will notice per column.  This is used by <code>analyse</code> to check if
the optimal column type should be of type <code>ENUM</code>.
</li><li>

<code>max memory</code> (default 8192) is the maximum memory <code>analyse</code> should
allocate per column while trying to find all distinct values.
</li></ul>


<pre>SELECT ... FROM ... WHERE ... PROCEDURE ANALYSE([max elements,[max memory]])
</pre>



<h2><a name="Writing_a_procedure" href="manual.ja_toc.html#Writing_a_procedure">18.2  Writing a Procedure</a></h2>

<p>
For the moment, the only documentation for this is the source.

</p>
<p>
You can find all information about procedures by examining the following files:

</p>

<ul>
<li><tt>`sql/sql_analyse.cc'</tt>

</li><li><tt>`sql/procedure.h'</tt>

</li><li><tt>`sql/procedure.cc'</tt>

</li><li><tt>`sql/sql_select.cc'</tt>

</li></ul>

<p>
<a name="IDX1439"></a>
<a name="IDX1440"></a>
<a name="IDX1441"></a>
</p><p></p><hr><p>
Go to the <a href="manual.ja_Introduction.html">first</a>, <a href="manual.ja_Adding_functions.html">previous</a>, <a href="manual.ja_ODBC.html">next</a>, <a href="manual.ja_Concept_Index.html">last</a> section, <a href="manual.ja_toc.html">table of contents</a>.
 
 
</p></body></html>