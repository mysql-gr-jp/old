  <HTML>
  <HEAD>
  <!-- This HTML file has been created by texi2html 1.52 (hacked by david@detron.se)
     from manual.ja.texi on 20 July 2001 -->

  <TITLE>MySQL Reference Manual for version 3.23.38. - 18  Adding New Procedures to MySQL</TITLE>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=euc-jp">
  </HEAD>
  <BODY BGCOLOR=#FFFFFF TEXT=#000000 LINK=#101090 VLINK=#7030B0>
Go to the <A HREF="manual.ja_Introduction.html">first</A>, <A HREF="manual.ja_Adding_functions.html">previous</A>, <A HREF="manual.ja_ODBC.html">next</A>, <A HREF="manual.ja_Concept_Index.html">last</A> section, <A HREF="manual.ja_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="Adding_procedures" HREF="manual.ja_toc.html#Adding_procedures">18  Adding New Procedures to MySQL</A></H1>

<P>
In <STRONG>MySQL</STRONG>, you can define a procedure in C++ that can access and
modify the data in a query before it is sent to the client.  The modification
can be done on row-by-row or <CODE>GROUP BY</CODE> level.

</P>
<P>
We have created an example procedure in <STRONG>MySQL</STRONG> Version 3.23 to
show you what can be done.

</P>
<P>
Additionally we recommend you to take a look at 'mylua', which you can find in the Contrib directory.  「<A HREF="manual.ja_Contrib.html#Contrib">D  Contributed Programs</A>」節参照.  Which this you can use the LUA
language to load a procedure at runtime into <CODE>mysqld</CODE>.

</P>



<H2><A NAME="procedure_analyse" HREF="manual.ja_toc.html#procedure_analyse">18.1  Procedure Analyse</A></H2>

<P>
<CODE>analyse([max elements,[max memory]])</CODE>

</P>
<P>
This procedure is defined in the <TT>`sql/sql_analyse.cc'</TT>.  This
examines the result from your query and returns an analysis of the
results:

</P>

<UL>
<LI>

<CODE>max elements</CODE> (default 256) is the maximum number of distinct values
<CODE>analyse</CODE> will notice per column.  This is used by <CODE>analyse</CODE> to check if
the optimal column type should be of type <CODE>ENUM</CODE>.
<LI>

<CODE>max memory</CODE> (default 8192) is the maximum memory <CODE>analyse</CODE> should
allocate per column while trying to find all distinct values.
</UL>


<PRE>
SELECT ... FROM ... WHERE ... PROCEDURE ANALYSE([max elements,[max memory]])
</PRE>



<H2><A NAME="Writing_a_procedure" HREF="manual.ja_toc.html#Writing_a_procedure">18.2  Writing a Procedure</A></H2>

<P>
For the moment, the only documentation for this is the source.

</P>
<P>
You can find all information about procedures by examining the following files:

</P>

<UL>
<LI><TT>`sql/sql_analyse.cc'</TT>

<LI><TT>`sql/procedure.h'</TT>

<LI><TT>`sql/procedure.cc'</TT>

<LI><TT>`sql/sql_select.cc'</TT>

</UL>

<P>
<A NAME="IDX1439"></A>
<A NAME="IDX1440"></A>
<A NAME="IDX1441"></A>
<P><HR><P>
Go to the <A HREF="manual.ja_Introduction.html">first</A>, <A HREF="manual.ja_Adding_functions.html">previous</A>, <A HREF="manual.ja_ODBC.html">next</A>, <A HREF="manual.ja_Concept_Index.html">last</A> section, <A HREF="manual.ja_toc.html">table of contents</A>.
 </BODY>
 </HTML>
