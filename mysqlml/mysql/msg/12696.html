<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12696</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="12695.html">[前]</a><a href="12697.html">[次]</a><a href="../list/12601-12700.html">[番号順一覧]</a><a href="../thread/12601-12700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:12696
</p>
<div class="header">
<p>
From: kero &lt;kero &lt;info@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 01 Feb 2006 20:10:25 +0900<br>
Subject: [mysql 12696] テーブルを結合するSQL<br>

</p>
</div>
<div class="body">
<pre>
お世話になります。keroといいます。
2つのテーブルを結合して表示したいのですが、うまくいきません。
単純なSQLの問題で、MySQL固有ではないのですがご教示願えませんでしょうか。

テーブル構成は以下のtbl1とtbl2があり、tbl1のkey、tbl2のidが主キーになり、
tbl2.keyがtbl1.keyに関連付けられています。

tbl1
+------+------+
<span class="quote1">| key  | name |</span>
+------+------+
<span class="quote1">| aa   | 1234 |</span>
<span class="quote1">| bb   | 2345 |</span>
<span class="quote1">| cc   | 3456 |</span>
<span class="quote1">| dd   | 4567 |</span>
<span class="quote1">| ee   | 5678 |</span>
<span class="quote1">| ff   | 6789 |</span>
+------+------+

tbl2
+----+------+
<span class="quote1">| id | key  |</span>
+----+------+
<span class="quote1">|  1 | aa   |</span>
<span class="quote1">|  2 | aa   |</span>
<span class="quote1">|  3 | aa   |</span>
<span class="quote1">|  4 | bb   |</span>
<span class="quote1">|  5 | bb   |</span>
<span class="quote1">|  6 | cc   |</span>
+----+------+

希望としては以下のような結果（tbl2をkeyでグループ化しておのおのの行数を取得
し、tbl1と結合）を得たいと思っています。
+------+-----------+
<span class="quote1">| key  | count(id) |</span>
+------+-----------+
<span class="quote1">| dd   |         0 |</span>
<span class="quote1">| ee   |         0 |</span>
<span class="quote1">| ff   |         0 |</span>
<span class="quote1">| aa   |         3 |</span>
<span class="quote1">| bb   |         2 |</span>
<span class="quote1">| cc   |         1 |</span>
+------+-----------+

以下のようなSQLを記述したのですが、
select tbl1.key,count(id) from tbl1 left outer join tbl2 on tbl1.key=tbl2.key 
group by tbl2.key;
このような結果になってしまいます。
+------+-----------+
<span class="quote1">| key  | count(id) |</span>
+------+-----------+
<span class="quote1">| dd   |         0 |</span>
<span class="quote1">| aa   |         3 |</span>
<span class="quote1">| bb   |         2 |</span>
<span class="quote1">| cc   |         1 |</span>
+------+-----------+

希望する結果を得るためにはどのようなSQLを書けばよろしいでしょうか。
ご教示下さい。
どうぞよろしくお願いします。

</pre>
</div>
<p class="button"><a href="12695.html">[前]</a><a href="12697.html">[次]</a><a href="../list/12601-12700.html">[番号順一覧]</a><a href="../thread/12601-12700.html">[スレッド一覧]</a></p>
</body>
</html>
