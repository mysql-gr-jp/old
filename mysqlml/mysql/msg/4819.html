<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4819</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4818.html">[前]</a><a href="4820.html">[次]</a><a href="../list/4801-4900.html">[番号順一覧]</a><a href="../thread/4801-4900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4819
</p>
<div class="header">
<p>
From: &quot;orita shigeru&quot; &lt;&quot;orita shigeru&quot; &lt;orita18@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 14 Dec 2001 16:18:18 +0900<br>
Subject: [mysql 04819] Re: mysql のログと実際のテーブルの値が一致しない<br>

</p>
</div>
<div class="body">
<pre>
こんにちは。おりたです。

<span class="quote1">&gt; fujiyamaです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; &quot;orita shigeru&quot; &lt;orita18@xxxxxxxxxx&gt; wrote(Thu, 13 Dec 2001 16:05:18</span>
+0900):
<span class="quote1">&gt;</span>
<span class="quote2">&gt; &gt; 現在 Mysql-3.22.32 と php-3.0.15-i18n-ja を使用してある管理プログラムを</span>
<span class="quote2">&gt; &gt; 作成しているのですが</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; mysqlのログと実際のテーブルの値が合わない現象が出ています。</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt; &gt; 1. update tbl_a set col_a = 2,col_b = 2,col_c = 4 where ----</span>
<span class="quote2">&gt; &gt; 2. update tbl_a set col_a = col_a -1,col_b = col_b +1,col_c = col_d -1</span>
<span class="quote2">&gt; &gt; where ----</span>
<span class="quote2">&gt; &gt; 3. update tbl_a set col_a = col_a -1,col_b = col_b +1,col_c = col_d -1</span>
<span class="quote2">&gt; &gt; where ----</span>
<span class="quote2">&gt; &gt; 1.を実行後の各値は         col_a = 2 col_b = 2 col_d = 13</span>
<span class="quote2">&gt; &gt; 2.3.の実行後の値が    col_a = -1 col_b = 5 col_d = 10</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; となる現象が起きています。ログの確認漏れは在りません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ログというのはMySQLで--log-updateをつけて取得したログのことでしょうか？</span>
<span class="quote1">&gt; だとしたら、</span>
<span class="quote1">&gt;</span>
<a href="http://www.mysql.gr.jp/jpdoc/4.0/manual.ja_MySQL_Database_Administration.htm">http://www.mysql.gr.jp/jpdoc/4.0/manual.ja_MySQL_Database_Administration.htm</a>
l#Update_log
<span class="quote1">&gt; を読んだ感じでは、正しい結果かと思いますがどうでしょう？</span>
<span class="quote1">&gt; （＝同じupdate文を発行する時には1回しか書かない）</span>
<span class="quote1">&gt;</span>


<span class="quote1">&gt; ＃プログラムで予測された値が出ないというわけではないですよね？</span>
<span class="quote1">&gt;</span>

プログラムで予測された値と違う結果が出ているのです・・・。

トランザクションも確認しているのですが更新すべきデータは
２件しかないのです。
ところが３回更新されているように見受けられるのです。
また、全ての更新がこのようになるわけでなく
この現象の発生パターンなども特定できていません。

プログラムのロジックを見直しても起きる可能性がありません。
ので、MySQLの方で同じ現象が出ていないかと思っているのです。

<span class="quote1">&gt; -- よろしくお願いします</span>
<span class="quote1">&gt; f.t &lt;fujiyama@xxxxxxxxxx&gt;</span>


</pre>
</div>
<p class="button"><a href="4818.html">[前]</a><a href="4820.html">[次]</a><a href="../list/4801-4900.html">[番号順一覧]</a><a href="../thread/4801-4900.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="4819.html">   4819 2001-12-14 16:18 [&quot;orita shigeru&quot; &lt;ori] Re: mysql のログと実際のテーブルの値が一致しない</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4820.html">   4820 2001-12-14 16:25 ┗[&quot;f.t&quot; &lt;fujiyama@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4821.html">   4821 2001-12-14 16:57 　┗[&quot;orita shigeru&quot; &lt;ori]                                     </a></span>
</pre>
</body>
</html>
