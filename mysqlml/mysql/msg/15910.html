<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15910</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15909.html">[前]</a><a href="15911.html">[次]</a><a href="../list/15901-16000.html">[番号順一覧]</a><a href="../thread/15901-16000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:15910
</p>
<div class="header">
<p>
From: &quot;yoku ts.&quot; &lt;&quot;yoku ts.&quot; &lt;yoku0825@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 8 Jan 2013 18:10:22 +0900<br>
Subject: [mysql 15910] Re: 主キーがないMyISAMの上限行数<br>

</p>
</div>
<div class="body">
<pre>
こんにちは。

5.0.6まではテーブルのサイズが4TBになるように
MAX_ROWSの値が自動設定されていたようです。。

<a href="http://dev.mysql.com/doc/refman/5.0/en/create-table.html">http://dev.mysql.com/doc/refman/5.0/en/create-table.html</a>


yoku ts.

2013年1月8日 15:35 坂田W &lt;w189150@xxxxxxxxxx&gt;:
<span class="quote1">&gt; 坂田と申します。</span>
<span class="quote1">&gt; こちらの情報から教授いただいたと思いますが。</span>
<span class="quote1">&gt; 以前　４千万弱行くらいでデータを追加できなくなり次の設定で可能となりました。</span>
<span class="quote1">&gt; ALTER TABLE テーブル名 MAX_ROWS=80000000;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; それ以降問題なく動いてます。(現在６千万行くらい）</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ----- Original Message ----- From: &quot;yoku ts.&quot; &lt;yoku0825@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt; To: &lt;ml@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt; Sent: Monday, January 07, 2013 10:15 AM</span>
<span class="quote1">&gt; Subject: <a href="15908.html">[mysql 15908]</a> Re: 主キーがないMyISAMの上限行数</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt;&gt; おはようございます。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; ソースコードまでは読んでいませんが、現存する行数だと思います。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; ドキュメントのいわく、MyISAMのMYDファイルは</span>
<span class="quote2">&gt;&gt; row_idのようなものはテーブル構造中に持ち合わせていない様です。</span>
<span class="quote2">&gt;&gt; （16進ダンプで覗いてみましたが、やっぱり持っていないようです）</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; <a href="http://dev.mysql.com/doc/internals/en/myisam-record-structure.html">http://dev.mysql.com/doc/internals/en/myisam-record-structure.html</a></span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; yoku ts.</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 2013年1月7日 9:49 久光 一誠 &lt;ds1i-hsmt@xxxxxxxxxx&gt;:</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; yokuさんありがとうございます。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; おしえていだたいだ情報の</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; There is a limit of (2^32)^2 (1.844E+19) rows in a MyISAM table.</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; というのは文字通り現存する行数の上限なんでしょうか。それとも内部でauto_incrementみたいないカウンタがあってそれが2^64行分を消費すると限界になるという意味なんでしょうか。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; 2^64というとちょうどBIGINTの幅と同じなので、MyISAMは内部でBIGINTのauto_incrementを持っていてそれが上限なのかなとも思うのです。あるいは内部的にBIGINTのキーみたいなものは持っているけどauto_incrementと違ってalter</span>
<span class="quote3">&gt;&gt;&gt; tableをやれば現存する 行数分に整理されて、やっぱり現存する行数が2^64なければそれでいいということなんでしょうか。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; 　これだけの行数があればどっちでも問題にはならないことはわかったので個人的な興味ではあるのですが、どなたか知ってる方いらっしゃいますか？</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; On 2013/01/06, at 15:17, &quot;yoku ts.&quot; &lt;yoku0825@xxxxxxxxxx&gt; wrote:</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote4">&gt;&gt;&gt;&gt; こんにちは、yokuといいます。</span>
<span class="quote4">&gt;&gt;&gt;&gt;</span>
<span class="quote4">&gt;&gt;&gt;&gt; ・2^64行の行数制限</span>
<span class="quote4">&gt;&gt;&gt;&gt; ・(ファイルシステム側のファイルサイズ制限とは別に)256TBのファイルサイズ制限</span>
<span class="quote4">&gt;&gt;&gt;&gt;</span>
<span class="quote4">&gt;&gt;&gt;&gt; がありそうです。</span>
<span class="quote4">&gt;&gt;&gt;&gt; <a href="http://dev.mysql.com/doc/refman/5.5/en/myisam-storage-engine.html">http://dev.mysql.com/doc/refman/5.5/en/myisam-storage-engine.html</a></span>
<span class="quote4">&gt;&gt;&gt;&gt;</span>
<span class="quote4">&gt;&gt;&gt;&gt;</span>
<span class="quote4">&gt;&gt;&gt;&gt; yoku ts.</span>
<span class="quote4">&gt;&gt;&gt;&gt;</span>
<span class="quote4">&gt;&gt;&gt;&gt;</span>
<span class="quote4">&gt;&gt;&gt;&gt;</span>
<span class="quote4">&gt;&gt;&gt;&gt;</span>
<span class="quote4">&gt;&gt;&gt;&gt; 2013年1月6日 11:53 久光 一誠 &lt;ds1i-hsmt@xxxxxxxxxx&gt;:</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt;</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt; 久光と申します。</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt;</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt;</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt; INTを主キーにしているMyISAMはINTの数が行数の上限になると思うのですが、主キーを設定していないテーブルの場合はOSの最大ファイル容量まで作成できるのでしょうか。それとも内部的にユニークな何かが設定されていてINSERTやDELETEを繰り返すしてそれが上限に達するとテーブルのファイルサイズが小さくても限界になってしまうのでしょうか。</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt;</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt;</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt; 自分がやってる仕事では今のところINTを主キーにしていても使い切るのはほぼ不可能な状況なので直面している問題ではないのですが後学のために知っておきたいです。</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt;</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt; 　 よろしくお願いします。</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt;</span>
<span class="quote5">&gt;&gt;&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>

</pre>
</div>
<p class="button"><a href="15909.html">[前]</a><a href="15911.html">[次]</a><a href="../list/15901-16000.html">[番号順一覧]</a><a href="../thread/15901-16000.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="15905.html">  15905 2013-01-06 11:53 [久光 一誠 &lt;ds1i-hsmt] 主キーがないMyISAMの上限行数            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15906.html">  15906 2013-01-06 15:17 ┗[&quot;yoku ts.&quot; &lt;yoku0825]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15907.html">  15907 2013-01-07 09:49 　┗[久光 一誠 &lt;ds1i-hsmt]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15908.html">  15908 2013-01-07 10:15 　　┗[&quot;yoku ts.&quot; &lt;yoku0825]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15909.html">  15909 2013-01-08 15:35 　　　┗[坂田W &lt;w189150@xxxxx]                                 </a></span>
<span class="current">-&gt;&nbsp;<a href="15910.html">  15910 2013-01-08 18:10 　　　　┗[&quot;yoku ts.&quot; &lt;yoku0825]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15911.html">  15911 2013-01-09 11:19 　　　　　┗[久光 一誠 &lt;ds1i-hsmt]                             </a></span>
</pre>
</body>
</html>
