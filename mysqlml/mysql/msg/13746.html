<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13746</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13745.html">[前]</a><a href="13747.html">[次]</a><a href="../list/13701-13800.html">[番号順一覧]</a><a href="../thread/13701-13800.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13746
</p>
<div class="header">
<p>
From: YuGo &lt;YuGo &lt;yu.gotou@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 22 Feb 2007 16:13:07 +0900<br>
Subject: [mysql 13746] Re: mysqlimportでの文字化け<br>

</p>
</div>
<div class="body">
<pre>こんにちは。
1.クライアントのキャラクタセットとサーバーのキャラクタセットは違いますか？
mysql&gt;SHOW VARIBLES LIKE 'char%' ;
の結果
character_set_client ?
character_set_database sjis

2.mysqlimportのオプションを変えてみる
--default-character-set=binary

3.16進数にして、どう置き換わったか調べる。
mysql&gt; SELECT HEX('アイソテック') ;
mysql&gt; SELECT HEX('アイャeック') ;


富士和電子 伊藤浩樹 wrote:
<span class="quote1">&gt; 初級者　いとうと申します。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; mysqlimportにてCSVファイルをテーブルにインポートしています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 困ったことは有る特定の日本語一部が化けてしまい元データと違うデータとなっ</span>
<span class="quote1">&gt; てしまいます。cronを使った半自動化を考えており、load data infileを極力</span>
<span class="quote1">&gt; 使いたく無いのです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 解決へのヒントなど有りましたら、お手数ですが御指南頂きたいと思います。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; mysqlimport -u root --password=***** -d -v </span>
<span class="quote1">&gt; --fields-terminated-by=',' </span>
<span class="quote1">&gt; --default-character-set=sjis</span>
<span class="quote1">&gt; --fields-enclosed-by='"' </span>
<span class="quote1">&gt; --ignore-lines=1 shukei /var/lib/mysql/BUSYOPF.CSV</span>
<span class="quote1">&gt; ****はパスワードを記載しています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 結果は</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; Connecting to localhost</span>
<span class="quote1">&gt; Selecting database shukei</span>
<span class="quote1">&gt; Deleting the old data from table BUSYOPF</span>
<span class="quote1">&gt; Loading data from SERVER file: /var/lib/mysql/BUSYOPF.CSV into BUSYOPF</span>
<span class="quote1">&gt; shukei.BUSYOPF: Records: 300  Deleted: 0  Skipped: 0  Warnings: 0</span>
<span class="quote1">&gt; Disconnecting from localhost</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; と問題がなさそうですが、データの表示をしてみると</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 正しい文字列　　　　　アイソテック</span>
<span class="quote1">&gt; インポート後の文字列　アイャeック</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; となってしまいます。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; load data infileの場合はこのようなことは発生していません。</span>
<span class="quote1">&gt; mysql&gt; load data infile './BUSYOPF.CSV' </span>
<span class="quote1">&gt; 　　　into table BUSYOPF </span>
<span class="quote1">&gt; 　　　fields terminated by ','</span>
<span class="quote1">&gt; 　　　enclosed by '"' ignore 1 lines;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 実行環境は以下の通りです。</span>
<span class="quote1">&gt; OS FedoraCore4　mysql-4.1.19-1.FC4.1</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; mysql  Ver 14.7 Distrib 4.1.19, for redhat-linux-gnu (i386) using readline 4.3</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; Connection id:          3</span>
<span class="quote1">&gt; Current database:</span>
<span class="quote1">&gt; Current user:           root@localhost</span>
<span class="quote1">&gt; SSL:                    Not in use</span>
<span class="quote1">&gt; Current pager:          stdout</span>
<span class="quote1">&gt; Using outfile:          ''</span>
<span class="quote1">&gt; Using delimiter:        ;</span>
<span class="quote1">&gt; Server version:         4.1.19</span>
<span class="quote1">&gt; Protocol version:       10</span>
<span class="quote1">&gt; Connection:             Localhost via UNIX socket</span>
<span class="quote1">&gt; Server characterset:    sjis</span>
<span class="quote1">&gt; Db     characterset:    sjis</span>
<span class="quote1">&gt; Client characterset:    sjis</span>
<span class="quote1">&gt; Conn.  characterset:    sjis</span>
<span class="quote1">&gt; UNIX socket:            /var/lib/mysql/mysql.sock</span>
<span class="quote1">&gt; Uptime:                 22 sec</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; my.cnf</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; [mysqld]</span>
<span class="quote1">&gt; datadir=/var/lib/mysql</span>
<span class="quote1">&gt; socket=/var/lib/mysql/mysql.sock</span>
<span class="quote1">&gt; old_passwords=1</span>
<span class="quote1">&gt; port    =       13306</span>
<span class="quote1">&gt; default-character-set=sjis</span>
<span class="quote1">&gt; skip-character-set-client-handshake</span>
<span class="quote1">&gt; [mysql.server]</span>
<span class="quote1">&gt; user=mysql</span>
<span class="quote1">&gt; basedir=/var/lib</span>
<span class="quote1">&gt; port    =       13306</span>
<span class="quote1">&gt; [mysqld_safe]</span>
<span class="quote1">&gt; err-log=/var/log/mysqld.log</span>
<span class="quote1">&gt; pid-file=/var/run/mysqld/mysqld.pid</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; よろしくお願いいたします。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>

</pre>
</div>
<p class="button"><a href="13745.html">[前]</a><a href="13747.html">[次]</a><a href="../list/13701-13800.html">[番号順一覧]</a><a href="../thread/13701-13800.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="13744.html">  13744 2007-02-22 15:21 [富士和電子 伊藤浩樹 ] mysqlimportでの文字化け                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13745.html">  13745 2007-02-22 15:27 ┣[Tetsuro IKEDA &lt;te.ik]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13747.html">  13747 2007-02-22 16:33 ┃┗[富士和電子 伊藤浩樹 ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13749.html">  13749 2007-02-22 16:52 ┃　┗[Tetsuro IKEDA &lt;te.ik]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13760.html">  13760 2007-02-23 11:37 ┃　　┗[富士和電子 伊藤浩樹 ]                                 </a></span>
<span class="current">-&gt;&nbsp;<a href="13746.html">  13746 2007-02-22 16:13 ┗[YuGo &lt;yu.gotou@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13748.html">  13748 2007-02-22 16:43 　┗[富士和電子 伊藤浩樹 ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13750.html">  13750 2007-02-22 16:57 　　┣[富士和電子 伊藤浩樹 ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13752.html">  13752 2007-02-22 18:06 　　┃┗[YuGo &lt;yu.gotou@xxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13751.html">  13751 2007-02-22 17:51 　　┗[YuGo &lt;yu.gotou@xxxxx]                                   </a></span>
</pre>


</body></html>