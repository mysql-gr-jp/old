<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11623</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="11622">[前]</a><a href="11624">[次]</a><a href="../list/11601-11700">[番号順一覧]</a><a href="../thread/11601-11700">[スレッド一覧]</a></p>
<p class="id">
mysql:11623
</p>
<div class="header">
<p>
From: &quot;T.Sasaki&quot; &lt;&quot;T.Sasaki&quot; &lt;papasan2000@xxxxxxxxxx&gt;&gt;<br>
Date: 24 Jun 2005 16:17:36 +0900<br>
Subject: [mysql 11623] Re: ***.MYI ファイルがこわれる<br>

</p>
</div>
<div class="body">
<pre>
佐々木です。

<span class="quote1">&gt; Changed limits: max_open_file:2048  max_connections:100 table_cache:969</span>
について。

Warinig が出力されるのは昨日織田さんも説明されていましたが、
　max_open_file = 10 + max_connections + table_cache * 2
の計算結果が Windows 版の規定値 2048 を超えているからですね。
MySQL の起動時かクライアントの新規接続がトリガーになると思われます。

また、table_cache の値が端数になっているのは、上記の結果、
table_cache 値が再計算されてしまったことが原因です。
　table_cache(969) = max_open_file(2048) - 10 - max_connections(100) / 2;

下記 URL の「同時読み取り」欄を読む限り、
　<a href="http://dev.mysql.com/doc/mysql/ja/windows-vs-unix.html">http://dev.mysql.com/doc/mysql/ja/windows-vs-unix.html</a>
（近い将来、とありますがまだ対応してません）
open_files_limit ではなく、table_cache の値を調整した方がよさそうです。
イベントビューアの警告については、この調整で消える可能性があります。


<span class="quote1">&gt; ときどき、　ウエッブからの検索中</span>
<span class="quote1">&gt; に　　****.MYI　ファイルがこわれます。</span>
メッセージ内容を正確に提示すれば答えやすくなると思います。


尚、質問１と２については私も良く分かっていないので、
申し訳ありませんが織田さんや他の方の回答を待ちましょう。

</pre>
</div>
<p class="button"><a href="11622">[前]</a><a href="11624">[次]</a><a href="../list/11601-11700">[番号順一覧]</a><a href="../thread/11601-11700">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="11605">  11605 2005-06-23 13:44 [Shu SATO &lt;shu@xxxxxx] CP932/Windows-31J対応版 Connector/J リリース</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11606">  11606 2005-06-23 14:34 ┣[&quot;shamy&quot; &lt;shamy@xxxxx] レンタルサーバ屋さんにMySQLを導入してもらったのですが</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11607">  11607 2005-06-23 14:45 ┃┣[&quot;Ryousuke Wayama&quot; &lt;w]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11609">  11609 2005-06-23 15:01 ┃┃┗[&quot;shamy&quot; &lt;shamy@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11610">  11610 2005-06-23 15:20 ┃┃　┗[&quot;Ryousuke Wayama&quot; &lt;w]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11613">  11613 2005-06-23 15:38 ┃┃　　┗[&quot;system&quot; &lt;hiokisys@x] ***.MYI ファイルがこわれる    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11614">  11614 2005-06-23 17:22 ┃┃　　　┗[Sumito_Oda &lt;oda@xxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11622">  11622 2005-06-24 11:04 ┃┃　　　　┗[&quot;system&quot; &lt;hiokisys@x]                           </a></span>
<span class="current">-&gt;&nbsp;<a href="11623">  11623 2005-06-24 16:17 ┃┃　　　　　┗[&quot;T.Sasaki&quot; &lt;papasan2]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11681">  11681 2005-07-05 14:24 ┃┃　　　　　　┗[&quot;system&quot; &lt;hiokisys@x]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11683">  11683 2005-07-05 14:47 ┃┃　　　　　　　┗[&quot;T.Sasaki&quot; &lt;papasan2]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11684">  11684 2005-07-05 14:49 ┃┃　　　　　　　　┗[&quot;T.Sasaki&quot; &lt;papasan2]                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11611">  11611 2005-06-23 15:16 ┃┣[Manabu Kobayashi &lt;ma]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11612">  11612 2005-06-23 15:19 ┃┣[KIshii &lt;kn-ishi@xxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11617">  11617 2005-06-23 19:21 ┃┃┗[&quot;shamy&quot; &lt;shamy@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11620">  11620 2005-06-24 09:12 ┃┃　┗[&quot;Ryousuke Wayama&quot; &lt;w]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11621">  11621 2005-06-24 10:59 ┃┃　　┗[&quot;shamy&quot; &lt;shamy@xxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11615">  11615 2005-06-23 19:00 ┃┗[&quot;shamy&quot; &lt;shamy@xxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11608">  11608 2005-06-23 14:53 ┣[KAJIYAMA Ryusuke &lt;r-]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11618">  11618 2005-06-24 06:53 ┗[Tetsuro IKEDA &lt;ikdtt]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11619">  11619 2005-06-24 06:56 　┗[Tetsuro IKEDA &lt;ikdtt]                                     </a></span>
</pre>
</body>
</html>
