<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:6350</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="6349.html">[前]</a><a href="6351.html">[次]</a><a href="../list/6301-6400.html">[番号順一覧]</a><a href="../thread/6301-6400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:6350
</p>
<div class="header">
<p>
From: Satoshi Komori &lt;Satoshi Komori &lt;satoshi@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 7 Oct 2002 22:25:05 +0900<br>
Subject: [mysql 06350] Re: servlet では order by rand()    ができない？<br>

</p>
</div>
<div class="body">
<pre>
2002/10/07 19:44:57 +0900に"城" &lt;sora_iro@xxxxxxxxxx&gt;さんに頂いた
「<a href="06347.html">[mysql 06347]</a> Re: servlet では order by rand()   ができない？」への返事です。

komori と申します。

jdk1.3.0_02、win2K、mysql3.23.49で試しましたが、城さんの意図する
結果が出ました。

<span class="quote1">&gt;動かない場合は</span>
<span class="quote1">&gt;やはりJava側で処理するしかないのですか？</span>

そうなってしまいますよねぇ...無駄な処理なんで嫌ですよねぇ...。

<span class="quote1">&gt;僕は下のように処理しています。</span>
<span class="quote1">&gt;おかしなところありましたら指摘お願いします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;別の処理で 0&lt;num&lt;レコード数 のランダムな数numを取得して</span>
<span class="quote1">&gt;int i = 0;</span>
<span class="quote1">&gt;while(rs.next()){</span>
<span class="quote1">&gt;  if(i == num){</span>
<span class="quote1">&gt;    String aisatsu = rs.getString("tango");</span>
<span class="quote1">&gt;    break;</span>
<span class="quote1">&gt;  }</span>
<span class="quote1">&gt;  i++;</span>

ループ回数が決まっているのであれば、

for(int i=1;i&lt;num;i++){
  rs.next();
}
String aisatsu = rs.getString("tango");

の方が、無駄なif文の比較回数が減るのではないでしょうか？


なお、蛇足ですが、

<span class="quote1">&gt;[06339]&gt; rs.next();</span>
<span class="quote1">&gt;[06339]&gt; String resTag = rs.getString("tango");</span>
<span class="quote1">&gt;の両側をループで囲っていないのは不思議だなと感じたのです。</span>

城さんのプログラムで正しいと思います。
このサンプルで実行されているSQLは１件しか戻りがないので、
１回だけnext()してやればOKなんです。whileで括られていなく
てOKです。
というわけで、サンプルプログラムのlimitの使い方も城さんの
意図したもののはずですよ。＞山下さん
＃ 「単一」という日本語の解釈の問題ではないでしょうか？

以上
---

</pre>
</div>
<p class="button"><a href="6349.html">[前]</a><a href="6351.html">[次]</a><a href="../list/6301-6400.html">[番号順一覧]</a><a href="../thread/6301-6400.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="6339.html">   6339 2002-10-07 06:20 ["城" &lt;sora_iro@xxxxx] servlet では order by rand() ができない？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6343.html">   6343 2002-10-07 18:27 ┣["Takashi Yamashita" ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6344.html">   6344 2002-10-07 18:30 ┃┗["Takashi Yamashita" ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6347.html">   6347 2002-10-07 19:44 ┃　┗["城" &lt;sora_iro@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6348.html">   6348 2002-10-07 21:17 ┃　　┣["Takashi Yamashita" ]                                 </a></span>
<span class="current">-&gt;&nbsp;<a href="6350.html">   6350 2002-10-07 22:25 ┃　　┗[Satoshi Komori &lt;sato]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6352.html">   6352 2002-10-08 07:12 ┃　　　┗["城" &lt;sora_iro@xxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6353.html">   6353 2002-10-08 12:06 ┃　　　　┗[Takeyuki Miyagawa &lt;m]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6361.html">   6361 2002-10-08 17:54 ┃　　　　　┗["城" &lt;sora_iro@xxxxx]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6362.html">   6362 2002-10-08 18:15 ┃　　　　　　┗["kosugi" &lt;kosugi@xxx]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6346.html">   6346 2002-10-07 19:05 ┣["kosugi" &lt;kosugi@xxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6349.html">   6349 2002-10-07 21:26 ┣["Takashi Yamashita" ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6363.html">   6363 2002-10-08 18:59 ┣[&lt;rio-t@xxxxxxxxxx&gt;  ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6380.html">   6380 2002-10-09 21:42 ┃┗["城" &lt;sora_iro@xxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6382.html">   6382 2002-10-09 22:58 ┗["小川　修" &lt;shuogawa]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6392.html">   6392 2002-10-10 13:17 　┗["kosugi" &lt;kosugi@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6424.html">   6424 2002-10-13 00:28 　　┗["shuogawa" &lt;shuogawa]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6425.html">   6425 2002-10-14 00:05 　　　┗[Tomoyuki Ishino &lt;ish]                                 </a></span>
</pre>


</body></html>