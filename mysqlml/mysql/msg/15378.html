<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15378</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15377.html">[前]</a><a href="15379.html">[次]</a><a href="../list/15301-15400.html">[番号順一覧]</a><a href="../thread/15301-15400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:15378
</p>
<div class="header">
<p>
From: Etsuo SUMIYA &lt;Etsuo SUMIYA &lt;sumiya-e@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 21 Aug 2010 10:39:39 +0900 (LMT)<br>
Subject: [mysql 15378] Re: int column への2147483648<br>

</p>
</div>
<div class="body">
<pre>
sumiyaといいます。

From: SAKAI Kei &lt;sak2@xxxxxxxxxx&gt;
Subject: <a href="15377.html">[mysql 15377]</a> Re: int column への2147483648
Date: Fri, 20 Aug 2010 22:10:41 +0900
Message-ID: &lt;20100820221039.6D79.51EA1301@xxxxxxxxxx&gt;

<span class="quote2">&gt; &gt; 5.1.xになって、columnの型がunsignedに変わり、  </span>
<span class="quote1">&gt;  </span>
<span class="quote1">&gt;   の部分がとても気になりました。</span>
<span class="quote1">&gt;   バージョンアップをする過程のどこかで、signed int が</span>
<span class="quote1">&gt;   unsigned int になる操作が入ってしまったのだと推測し</span>
<span class="quote1">&gt;   ていますが、心当たりはあるでしょうか。</span>

5.0.47の環境で、columnを作る時、signedで作ってしまい、先の結果とな
りました。混乱させてしまいました。
5.0.47でも、unsigned intのcolumnには-2147483648は書けませんでした。

<span class="quote1">&gt;   </span>
<span class="quote1">&gt;   推測ついでにもうひとつ書くと、</span>
<span class="quote1">&gt;   おそらく 5.0.47 でも unsigned int にしたテーブルで</span>
<span class="quote1">&gt;   同様の操作をすると、同じ結果（0）になると思います。</span>
<span class="quote1">&gt;   処理結果のコードを見ると、Code:1264 の Warning が</span>
<span class="quote1">&gt;   帰ってきていませんか。メッセージはこんな感じです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt;     Out of range value adjusted for column 'c1' at row 1</span>

こちらは、プログラムインタフェースmysql_stmt_execute()の結果は0と
なり、エラーにならないんです。

<span class="quote1">&gt;     INSERT INTO t VALUES (-2147483648);</span>
<span class="quote1">&gt;   </span>
<span class="quote1">&gt;   という文を、signed 型カラムのテーブルに対して実行すれば</span>
<span class="quote1">&gt;   -2147483648 が登録されるし、</span>
<span class="quote1">&gt;   unsigned型のテーブルに対して実行したら 0 になります。</span>
<span class="quote1">&gt;   </span>
<span class="quote1">&gt;   この切り捨てが起きないようにする方法も、最近出た奥野さん</span>
<span class="quote1">&gt;   の本に出ていましたね。（SQL MODE の話）</span>

そうなんですか？ちなみに、何という本でしょうか？調べてみたいと思い
ます。

</pre>
</div>
<p class="button"><a href="15377.html">[前]</a><a href="15379.html">[次]</a><a href="../list/15301-15400.html">[番号順一覧]</a><a href="../thread/15301-15400.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="15374.html">  15374 2010-08-19 20:46 [Etsuo SUMIYA &lt;sumiya] int column への2147483648               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15375.html">  15375 2010-08-19 21:50 ┗[Mikiya Okuno &lt;mikiya]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15376.html">  15376 2010-08-20 08:23 　┗[Etsuo SUMIYA &lt;sumiya]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15377.html">  15377 2010-08-20 22:10 　　┗[SAKAI Kei &lt;sak2@xxxx]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="15378.html">  15378 2010-08-21 10:39 　　　┗[Etsuo SUMIYA &lt;sumiya]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15379.html">  15379 2010-08-21 18:31 　　　　┗[SAKAI Kei &lt;sak2@xxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15381.html">  15381 2010-08-24 08:56 　　　　　┗[&quot;Watanabe Tomoyuki&quot; ]                             </a></span>
</pre>
</body>
</html>
