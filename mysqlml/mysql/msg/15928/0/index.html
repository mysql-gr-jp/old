<HTML xmlns="http://www.w3.org/TR/REC-html40" xmlns:v = 
"urn:schemas-microsoft-com:vml" xmlns:o = 
"urn:schemas-microsoft-com:office:office" xmlns:w = 
"urn:schemas-microsoft-com:office:word" xmlns:m = 
"http://schemas.microsoft.com/office/2004/12/omml"><HEAD>
<META content="text/html; charset=iso-2022-jp" http-equiv=Content-Type>
<META name=Generator content="Microsoft Word 14 (filtered medium)">
<STYLE><!--
/* Font Definitions */
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ＭＳ 明朝";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:"ＭＳ ゴシック";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"ＭＳ ゴシック";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"ＭＳ Ｐゴシック";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"\@ＭＳ ゴシック";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"\@ＭＳ Ｐゴシック";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@ＭＳ 明朝";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0mm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"ＭＳ Ｐゴシック";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-priority:34;
	margin-top:0mm;
	margin-right:0mm;
	margin-bottom:0mm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	mso-para-margin-top:0mm;
	mso-para-margin-right:0mm;
	mso-para-margin-bottom:0mm;
	mso-para-margin-left:4.0gd;
	mso-para-margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"ＭＳ Ｐゴシック";}
span.17
	{mso-style-type:personal-reply;
	font-family:"Arial","sans-serif";
	color:#0D0D0D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:99.25pt 30.0mm 30.0mm 30.0mm;}
div.WordSection1
	{page:WordSection1;}
/* List Definitions */
@list l0
	{mso-list-id:183641628;
	mso-list-type:hybrid;
	mso-list-template-ids:139862510 162835022 67698699 67698701 67698689 67698699 67698701 67698689 67698699 67698701;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;
	font-family:Wingdings;
	mso-fareast-font-family:"ＭＳ ゴシック";
	mso-bidi-font-family:"Times New Roman";}
@list l0:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F0B2;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F0B2;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F0B2;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1
	{mso-list-id:1263606327;
	mso-list-type:hybrid;
	mso-list-template-ids:-1676538460 1298200014 67698711 67698705 67698703 67698711 67698705 67698703 67698711 67698705;}
@list l1:level1
	{mso-level-text:"%1\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l1:level2
	{mso-level-number-format:aiueo-full-width;
	mso-level-text:"\(%2\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;}
@list l1:level3
	{mso-level-number-format:decimal-enclosed-circle;
	mso-level-text:%3;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;}
@list l1:level4
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;}
@list l1:level5
	{mso-level-number-format:aiueo-full-width;
	mso-level-text:"\(%5\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;}
@list l1:level6
	{mso-level-number-format:decimal-enclosed-circle;
	mso-level-text:%6;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;}
@list l1:level7
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;}
@list l1:level8
	{mso-level-number-format:aiueo-full-width;
	mso-level-text:"\(%8\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;}
@list l1:level9
	{mso-level-number-format:decimal-enclosed-circle;
	mso-level-text:%9;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;}
@list l2
	{mso-list-id:1395812204;
	mso-list-type:hybrid;
	mso-list-template-ids:1569627284 1084516186 67698699 67698701 67698689 67698699 67698701 67698689 67698699 67698701;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;
	font-family:Wingdings;
	mso-fareast-font-family:"ＭＳ ゴシック";
	mso-bidi-font-family:"Times New Roman";}
@list l2:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l2:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F0B2;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l2:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l2:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l2:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F0B2;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l2:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l2:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l2:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F0B2;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
ol
	{margin-bottom:0mm;}
ul
	{margin-bottom:0mm;}
--></STYLE>
</HEAD>
<BODY dir=ltr lang=JA vLink=purple link=blue>
<DIV dir=ltr>
<DIV style="FONT-FAMILY: 'Calibri'; COLOR: #000000; FONT-SIZE: 12pt">
<DIV>渡辺様</DIV>
<DIV>&nbsp;</DIV>
<DIV>お忙しいところ、レスポンスいただき、ありがとうございました。</DIV>
<DIV>&nbsp;</DIV>
<BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
  <DIV>-----Original Message----- </DIV>
  <DIV>差出人: Watanabe Tomoyuki </DIV>
  <DIV>日時: 2013年2月14日 9:14 </DIV>
  <DIV>宛先: ml@mysql.gr.jp </DIV>
  <DIV>件名: [mysql 15926] Re: レプリケーション構築について（長文です）（質問） </DIV>
  <DIV>&nbsp;</DIV>
  <DIV>&nbsp;</DIV>
  <DIV>こんにちは。渡辺です。</DIV>
  <DIV>&nbsp;</DIV>
  <DIV>細かい部分まで読み込んでませんが、まだ返信がないようなのでとりあえず自分が気が付いたところを書きます。</DIV>
  <DIV>&nbsp;</DIV>
  <DIV>&gt; 
  なお、下記のマスターの情報はWorkbenchで設定する場所がないので、my.iniファイルの[mysqld]セクションに追加した。</DIV>
  <DIV>&gt; master-host='123.456.789.101'（マスターのIPアドレス）</DIV>
  <DIV>&gt; master-user='repli'（マスターに登録したレプリケーション用ユーザー名）</DIV>
  <DIV>&gt; master-password='password'（マスターに登録したレプリケーション用ユーザーのパスワード）</DIV>
  <DIV>&gt; master-port=3306</DIV>
  <DIV>&nbsp;</DIV>
  <DIV>この部分はまるごと不要です。(MySQL5.5から不要になりました。)</DIV>
  <DIV>masterの情報はCHANGE MASTER TOの文で指定するだけで大丈夫です。</DIV></BLOCKQUOTE>
<DIV dir=ltr>確かに、CHANGE MASTER TOで指定する内容と同じですよね。</DIV>
<DIV dir=ltr>CHANGE MASTER 
TOがエラーになるので、古い解説本（MySQLデータベース構築バイブル，2008年7月21日初版）に「スレーブとして動作させるためには、最低限、次のオプションをmy.cnfに記述する必要があります」とあったので、敢えて入れてみました。</DIV>
<DIV dir=ltr>my.iniファイルから削除しておいたほうがいいでしょうか？</DIV>
<BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
  <DIV>&nbsp;</DIV>
  <DIV>&gt; ”MySQL error log”を見る方法</DIV>
  <DIV>&nbsp;</DIV>
  <DIV>my.ini の log-error=で指定したファイルに書き出されます。</DIV>
  <DIV>&nbsp;</DIV>
  <DIV>“C:/Program Files/MySQL/MySQL Server 5.5/ log-error”</DIV>
  <DIV>&nbsp;</DIV>
  <DIV>がなければ</DIV>
  <DIV>&nbsp;</DIV>
  <DIV>log-error=” C:/ProgramData/MySQL/MySQL Server 5.5/Log/error.log”</DIV>
  <DIV>&nbsp;</DIV>
  <DIV>のように指定してみてください。(指定するディレクトリは作っておく必要があります。)</DIV>
  <DIV>&nbsp;</DIV></BLOCKQUOTE>
<DIV>C:\ProgramData\MySQL\MySQL Server 5.5\dataにlog-error.errがありました。</DIV>
<DIV>このファイルをメモ帳（テキストエディタ）で開こうとすると、「…はほかのアプリケーションで使われているため、アクセスできません。」というダイアログが表示されるので、諦めていましたが、MySQLのサービスを止めたら開けました。</DIV>
<DIV>&nbsp;</DIV>
<DIV>そこで、下記のエラーが発生していたあたりを探したところ、</DIV>
<DIV>ERROR 1201 (HY000): Could not initialize master info structures; more error 
messages can be found in the MySQL error log</DIV>
<DIV>&nbsp;</DIV>
<DIV>以下のログが記録されていました。</DIV>
<DIV>＝＝＝＝＝ここから</DIV>
<DIV>130201 15:29:14 [Note] Plugin 'FEDERATED' is disabled.</DIV>
<DIV>130201 15:29:14 InnoDB: The InnoDB memory heap is disabled</DIV>
<DIV>130201 15:29:14 InnoDB: Mutexes and rw_locks use Windows interlocked 
functions</DIV>
<DIV>130201 15:29:14 InnoDB: Compressed tables use zlib 1.2.3</DIV>
<DIV>130201 15:29:14 InnoDB: Initializing buffer pool, size = 305.0M</DIV>
<DIV>130201 15:29:14 InnoDB: Completed initialization of buffer pool</DIV>
<DIV>130201 15:29:14 InnoDB: highest supported file format is Barracuda.</DIV>
<DIV>130201 15:29:14&nbsp; InnoDB: Waiting for the background threads to 
start</DIV>
<DIV>130201 15:29:15 InnoDB: 1.1.8 started; log sequence number 4571351802</DIV>
<DIV>130201 15:29:15 [Note] Server hostname (bind-address): '0.0.0.0'; port: 
3306　←マスターのIPアドレスと違う</DIV>
<DIV>130201 15:29:15 [Note]&nbsp;&nbsp; - '0.0.0.0' resolves to '0.0.0.0';</DIV>
<DIV>130201 15:29:15 [Note] Server socket created on IP: '0.0.0.0'.</DIV>
<DIV>130201 15:29:16 [ERROR] Failed to open the relay log 
'.\Toshijoho_0427-relay-bin.000001' (relay_log_pos 4)</DIV>
<DIV>　　　　　　　　　　　　　　　　　　　　　　　　　　　　　←このファイルはC:\ProgramData\MySQL\MySQL Server 
5.5\dataにあります。</DIV>
<DIV>130201 15:29:16 [ERROR] Could not find target log during relay log 
initialization</DIV>
<DIV>130201 15:29:16 [ERROR] Failed to initialize the master info 
structure</DIV>
<DIV>　　　　　　　　　　　　　　　　　　　　　　　　　　　　　←master.infoファイルもあります。</DIV>
<DIV>130201 15:29:16 [Note] Event Scheduler: Loaded 0 events</DIV>
<DIV>130201 15:29:16 [Note] C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld: 
ready for connections.</DIV>
<DIV>Version: '5.5.25-log'&nbsp; socket: ''&nbsp; port: 3306&nbsp; MySQL 
Community Server (GPL)</DIV>
<DIV>130201 16:12:33 [ERROR] Failed to open the relay log 
'.\Toshijoho_0427-relay-bin.000001' (relay_log_pos 4)</DIV>
<DIV>130201 16:12:33 [ERROR] Could not find target log during relay log 
initialization</DIV>
<DIV>＝＝＝＝＝ここまで</DIV>
<DIV>&nbsp;</DIV>
<DIV>ほかに、気になることが一つあります。</DIV>
<DIV>MySQLコマンドラインクライアントを起動し、tee コマンドで操作ログをファイルに書き出そうとしました。</DIV>
<DIV>mysql&gt; tee ‘ファイル名’</DIV>
<DIV>C:Program Files\MySQL\MySQL Server 5.5\bin\mysql.exe: Can’t Create/write to 
file ‘ファイル名’ (Errcode: 13)</DIV>
<DIV>Error logging to file ‘ファイル名’ </DIV>
<DIV>mysql&gt;</DIV>
<DIV>&nbsp;</DIV>
<DIV>すると、上記のようにファイルを作れませんでした。</DIV>
<DIV>これは、アクセス権限が影響していると思い、ファイルの保存先をデスクトップにしたら、書き出せました。</DIV>
<DIV>ちなみに、マスターではC:Program Files\MySQL\MySQL Server 5.5\binの下にファイルを書き出せました。</DIV>
<DIV>&nbsp;</DIV>
<DIV>この辺りが影響しているのでしょうか？</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV></DIV></DIV></BODY></HTML>

