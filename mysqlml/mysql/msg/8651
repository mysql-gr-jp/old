<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8651</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8650">[前]</a><a href="8652">[次]</a><a href="../list/8601-8700">[番号順一覧]</a><a href="../thread/8601-8700">[スレッド一覧]</a></p>
<p class="id">
mysql:8651
</p>
<div class="header">
<p>
From: (二見) &lt;&lt;n.futami@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 23 Jan 2004 12:57:47 +0900<br>
Subject: [mysql 08651] Re: LEFT JOIN の NULL 値のソートについて<br>

</p>
</div>
<div class="body">
<pre>
斎藤さま
設計二見です、おつかれさまです

下記ですが

SELECT name, post_title FROM main
  LEFT JOIN post ON main.post_id=post.post_id
  ORDER BY IFNULL(post_order,&quot;99&quot;) ;

こんなんではどうでしょうか？


m-saitoh@xxxxxxxxxxさんが［2004/01/23 12:38:36］に出された
題名「<a href="08650">[mysql 08650]</a> LEFT JOIN の NULL 値のソートについて」に付いての返信です
---------------Original Message-------------------------

<span class="quote1">&gt;斎藤＠大和と申します。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;過去のメールを検索してみたのですが、同じような内容を見つけることが</span>
<span class="quote1">&gt;出来ませんでしたので投稿させて頂きます。</span>
<span class="quote1">&gt;もし、同じような内容が既出でしたら番号だけでも教えて頂ければと思い</span>
<span class="quote1">&gt;ます。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;[環境]</span>
<span class="quote1">&gt;OS : RedHat 9</span>
<span class="quote1">&gt;DB : mysql 3.23.58</span>
<span class="quote1">&gt;PG : php 4.2.2</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;[DB構成]</span>
<span class="quote1">&gt;CREATE TABLE main (</span>
<span class="quote1">&gt;  id smallint unsigned NOT NULL auto_increment,</span>
<span class="quote1">&gt;  post_id smallint unsigned NOT NULL default 0,</span>
<span class="quote1">&gt;  name varchar(255) binary NOT NULL default '',</span>
<span class="quote1">&gt;  PRIMARY KEY  (id)</span>
<span class="quote1">&gt;);</span>
<span class="quote1">&gt;INSERT INTO main VALUES (1,1,'斉藤');</span>
<span class="quote1">&gt;INSERT INTO main VALUES (2,2,'田中');</span>
<span class="quote1">&gt;INSERT INTO main VALUES (3,0,'吉田');</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;CREATE TABLE post (</span>
<span class="quote1">&gt;  post_id smallint unsigned NOT NULL default 0,</span>
<span class="quote1">&gt;  post_order smallint unsigned NOT NULL default 65535,</span>
<span class="quote1">&gt;  post_title varchar(255) binary NOT NULL default '',</span>
<span class="quote1">&gt;  PRIMARY KEY  (post_id)</span>
<span class="quote1">&gt;);</span>
<span class="quote1">&gt;INSERT INTO post VALUES (1,2,'課長');</span>
<span class="quote1">&gt;INSERT INTO post VALUES (2,1,'部長');</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;[質問]</span>
<span class="quote1">&gt;上記の構成で</span>
<span class="quote1">&gt;SELECT name, post_title FROM main</span>
<span class="quote1">&gt;  LEFT JOIN post ON main.post_id=post.post_id</span>
<span class="quote1">&gt;  ORDER BY post_order;</span>
<span class="quote1">&gt;のSQL文を実行した場合</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; name    post_title</span>
<span class="quote1">&gt;-------------------</span>
<span class="quote1">&gt; 吉田    NULL</span>
<span class="quote1">&gt; 斉藤    部長</span>
<span class="quote1">&gt; 田中    課長</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;と結果が帰ってくるのでが、これを</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; name    post_title</span>
<span class="quote1">&gt;-------------------</span>
<span class="quote1">&gt; 斉藤    部長</span>
<span class="quote1">&gt; 田中    課長</span>
<span class="quote1">&gt; 吉田    NULL</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;の順で結果を返す方法はないでしょうか。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;INSERT INTO post VALUES (0,65535,'');</span>
<span class="quote1">&gt;といったようなデータを入れれば出来なくは無いのですが</span>
<span class="quote1">&gt;別の処理で弊害が発生するため入れられません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;LEFT JOIN した際のNULLを置換するような処理</span>
<span class="quote1">&gt;（ post_orderがNULLの時は 65535 に置換える ）</span>
<span class="quote1">&gt;ようなことが出来ると幸いなのですがいろいろ調べてみたの</span>
<span class="quote1">&gt;ですが見つけることが出来ませんでした。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;ご教授よろしくお願いいたします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;-=-=-=-=-=-=-=-=-=-=-=-=-=-</span>
<span class="quote1">&gt;m-saitoh@xxxxxxxxxx</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>

</pre>
</div>
<p class="button"><a href="8650">[前]</a><a href="8652">[次]</a><a href="../list/8601-8700">[番号順一覧]</a><a href="../thread/8601-8700">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8650">   8650 2004-01-23 12:38 [&lt;m-saitoh@xxxxxxxxxx] LEFT JOIN の NULL 値のソートについて    </a></span>
<span class="current">-&gt;&nbsp;<a href="8651">   8651 2004-01-23 12:57 ┗[&lt;n.futami@xxxxxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8652">   8652 2004-01-23 13:34 　┗[&lt;m-saitoh@xxxxxxxxxx]                                     </a></span>
</pre>
</body>
</html>
