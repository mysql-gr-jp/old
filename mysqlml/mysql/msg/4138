<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4138</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4137">[前]</a><a href="4139">[次]</a><a href="../list/4101-4200">[番号順一覧]</a><a href="../thread/4101-4200">[スレッド一覧]</a></p>
<p class="id">
mysql:4138
</p>
<div class="header">
<p>
From: (moeru) &lt;&lt;moeru@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 03 Aug 2001 20:36:03 +0900<br>
Subject: [mysql 04138] Re: メモリの節約方法<br>

</p>
</div>
<div class="body">
<pre>

2001/08/03 06:22:37 +0900にTatsuhiko Miyagawa &lt;miyagawa@xxxxxxxxxx&gt;さんに頂いた
「<a href="04125">[mysql 04125]</a> Re: メモリの節約方法」への返事です。

モエルです。

宮川さん、コメント有り難うございますm(__)m


<span class="quote2">&gt; &gt; メモリの節約方法についての質問です。</span>
<span class="quote1">&gt;こういった質問の場合、OS や mysql のバージョンをかかれたほうがよい</span>
<span class="quote1">&gt;かと思います。</span>

RedHat 6.1J + MySQL3.23.21です。


<span class="quote2">&gt;&gt; Mem:  1036268K av, 657196K used, 379072K free, 122856K shrd, 365396K buff</span>
<span class="quote2">&gt;&gt;   mysql_free_result($result);　</span>
<span class="quote2">&gt;&gt; 　を最近入れまくってますがメモリ使用量は減ってくれません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;PHPに詳しくないのではずしているかもしれませんが、上記はPHPのメモリ</span>
<span class="quote1">&gt;を解放するんであって、mysqld には関係ないということはありませんか？</span>

mysql_free_result()がどこを解放してるのか分からないです(^^;
減らしたいのは、mysqldのリソースもそうなんですが
システムの使用メモリ　657196K used　です。


<span class="quote2">&gt;&gt; 　システム変数をいじるとメモリを節約できるような所があるでしょうか？</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;具体的にどういった数値なのかを出した方が話が早いかと思います。</span>

関係してそうなところを記します。

back_log   50  
join_buffer_size  　　  　131072  
key_buffer_size  　　   33550336  
max_allowed_packet　　　 1048576  
max_join_size  　　　 4294967295  
max_connections   256  
myisam_sort_buffer_size 　  8388608  
net_buffer_length　  16384  
record_buffer   1044480  
sort_buffer   　4194296  
table_cache     512  
thread_stack    65536  
thread_cache_size   0  
tmp_table_size   1048576  



<span class="quote1">&gt;FLUSH TABLES (mysqladmin flush-tables) をかけると、たまってる分を </span>
<span class="quote1">&gt;flush するので、メモリ使用量は若干おさまるようです。</span>

これはどういう使い方をされてますか？
CRONとかで一日に何回かって感じですか？

あと、ユーザーが使用中にFLUSH TABLESをすると
トラブルが出たりしないでしょうか？

mysqld restartかmysqld start|stopのほうが安全だったりしないでしょうか？



モエル

</pre>
</div>
<p class="button"><a href="4137">[前]</a><a href="4139">[次]</a><a href="../list/4101-4200">[番号順一覧]</a><a href="../thread/4101-4200">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="4123">   4123 2001-08-03 03:05 [&lt;moeru@xxxxxxxxxx&gt;  ] メモリの節約方法                        </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4125">   4125 2001-08-03 06:22 ┗[Tatsuhiko Miyagawa &lt;]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="4138">   4138 2001-08-03 20:36 　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4140">   4140 2001-08-04 07:03 　　┗[Tatsuhiko Miyagawa &lt;]                                   </a></span>
</pre>
</body>
</html>
