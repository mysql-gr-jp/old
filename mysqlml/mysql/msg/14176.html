<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14176</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14175.html">[前]</a><a href="14177.html">[次]</a><a href="../list/14101-14200.html">[番号順一覧]</a><a href="../thread/14101-14200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14176
</p>
<div class="header">
<p>
From: &quot;yusuke ito&quot; &lt;&quot;yusuke ito&quot; &lt;ito.ysk@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 14 Aug 2007 17:53:46 +0900<br>
Subject: [mysql 14176] Re: update 時の無条件更新の方法<br>

</p>
</div>
<div class="body">
<pre>
伊東です。こんにちは。

<span class="quote1">&gt; とあるテーブルに TIMESTAMP 型のフィールドがあったとします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; これは、NULL を指定して他のフィールドを update すれば（明</span>
<span class="quote1">&gt; 示的に更新をしないように指定しなければ）自動的に現在時刻に</span>
<span class="quote1">&gt; 更新されます。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; これは、うまく行きます。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ただ、「更新対象の変更が無かったら」現在時刻に更新されませ</span>
<span class="quote1">&gt; ん。知りませんでした。マニュアルには書いてあります。</span>

<a href="http://dev.mysql.com/doc/refman/4.1/ja/datetime.html">http://dev.mysql.com/doc/refman/4.1/ja/datetime.html</a>
の説明は、他のカラムが更新されない場合でも
「TIMESTAMP カラムに値 NULL が明示的に設定された場合」には
現在時刻にアップデートされるように読めます。

なので、TIMESTAMPを更新したいUPDATE文で
  SET (TIMESTAMP型カラム)=NOW()

もしくは
  SET (TIMESTAMP型カラム)=NULL

を追加してやるのが正解だと思います。

<span class="quote1">&gt; 最終的には DATETIME 型を用意して now() を突っ込まなければ</span>
<span class="quote1">&gt; ならないのかと思っているのですが、あたりが多くてやりたくな</span>
<span class="quote1">&gt; い(^^;のです。</span>

ここもわからんのですが、
TIMESTAMP型でもNOW()突っ込めば同じ結果だと思います。

~~~~
あなたの文面からはそう読み取るのは難しいですが、ひょっとして
「今のSQLを変えずにDBの挙動を変えるオプションは無いですか」
って聞いてるんでしょうか？
サーバ起動オプションとかに書かれていない限り、
ソースいじらないと難しいでしょうね。

</pre>
</div>
<p class="button"><a href="14175.html">[前]</a><a href="14177.html">[次]</a><a href="../list/14101-14200.html">[番号順一覧]</a><a href="../thread/14101-14200.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="14174.html">  14174 2007-08-14 17:04 [遠藤 俊裕 &lt;endo@xxxx] update 時の無条件更新の方法             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14175.html">  14175 2007-08-14 17:28 ┣[&quot;SEGAMI, Takashi&quot; &lt;s]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="14176.html">  14176 2007-08-14 17:53 ┣[&quot;yusuke ito&quot; &lt;ito.ys]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14177.html">  14177 2007-08-14 18:06 ┗[遠藤 俊裕 &lt;endo@xxxx]                                       </a></span>
</pre>
</body>
</html>
