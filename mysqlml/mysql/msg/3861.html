<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3861</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="3860.html">[前]</a><a href="3862.html">[次]</a><a href="../list/3801-3900.html">[番号順一覧]</a><a href="../thread/3801-3900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:3861
</p>
<div class="header">
<p>
From: TSUTSUMI Thoru &lt;TSUTSUMI Thoru &lt;tutumi@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 28 Jun 2001 17:36:25 +0900<br>
Subject: [mysql 03861] Re: update した件数をカウントしたい。<br>

</p>
</div>
<div class="body">
<pre>堤です。

マルチなお返事ですみません。

// Thu, 28 Jun 2001 16:46:09 //
// <a href="03860.html">[mysql 03860]</a> Re: update した件数をカウントしたい。 //
// MAO &lt;mao@xxxxxxxxxx&gt;さん // 曰く:

<span class="quote1">&gt;SQLをあんまり発行しないほうが軽くなるかなーっておもったんですけど。。</span>
わたしが気をつけているのはリソース節約のためにconnectと
disconnectを頻繁に利用しないことくらいでしょうか。
SQL文の発行は必要に応じて、深く考えずに行ってしまっている
気がします。

<span class="quote2">&gt;&gt; update tbl_a set serial = 2 where uid = 1 and serial &lt;&gt; 2;</span>
<span class="quote1">&gt;上記のようにすると、</span>
<span class="quote1">&gt;update tbl_a set serial = 2 where uid = 1</span>
<span class="quote1">&gt;に比べると、速度は速くなるのでしょうか？</span>
matchedとchanged が一致すれば悩まなくて済むかなと思いまして…
あまり深い意味はないです。すみません。

レコード数に大差ない限り処理時間自体には、
ほぼ変わりはないのではないでしょうか。

 --

// Thu, 28 Jun 2001 12:17:02 //
// <a href="03856.html">[mysql 03856]</a> Re: update した件数をカウントしたい。 //
// "Kawai,Takanori" &lt;GCD00051@xxxxxxxxxx&gt;さん // 曰く:

<span class="quote1">&gt;SELECT文のdoメソッドの結果として出てくる行数については</span>
<span class="quote1">&gt;あまり信用しないほうがよいでしょう。</span>
<span class="quote1">&gt;DBDの実装に影響を受けるはずです。</span>
確かに環境に依存しそうですね。
ご指摘いただかなければ気づかなかったです。

<span class="quote1">&gt;「prepareが面倒」ということであればselectall_arrayrefを利用しては？</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;ex.</span>
<span class="quote1">&gt;    my $raRes = $hDb-&gt;selectall_arrayref(</span>
<span class="quote1">&gt;          'SELECT COUNT(*) FROM tbl_a WHERE uid=1');</span>
<span class="quote1">&gt;    print "COUNT:", $raRes-&gt;[0]-&gt;[0], "\n" if($raRes);</span>
参考になります。
ありがとうございました。
# 今、運用しているのはとりあえず動いているし、いいかな ^^;

--
堤 徹: tutumi@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="3860.html">[前]</a><a href="3862.html">[次]</a><a href="../list/3801-3900.html">[番号順一覧]</a><a href="../thread/3801-3900.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="3845.html">   3845 2001-06-27 19:00 [MAO &lt;mao@xxxxxxxxxx&gt;] update した件数をカウントしたい。       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3846.html">   3846 2001-06-27 19:31 ┗[TSUTSUMI Thoru &lt;tutu]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3848.html">   3848 2001-06-27 22:41 　┗[MAO &lt;mao@xxxxxxxxxx&gt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3852.html">   3852 2001-06-28 10:31 　　┣[TSUTSUMI Thoru &lt;tutu]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3856.html">   3856 2001-06-28 12:17 　　┃┗["Kawai,Takanori" &lt;GC]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3853.html">   3853 2001-06-28 11:02 　　┗[Akihiko Shinohara &lt;s]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3857.html">   3857 2001-06-28 12:31 　　　┗["Kawai,Takanori" &lt;GC]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3860.html">   3860 2001-06-28 16:46 　　　　┗[MAO &lt;mao@xxxxxxxxxx&gt;]                               </a></span>
<span class="current">-&gt;&nbsp;<a href="3861.html">   3861 2001-06-28 17:36 　　　　　┗[TSUTSUMI Thoru &lt;tutu]                             </a></span>
</pre>


</body></html>