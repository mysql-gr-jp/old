<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14977</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="14976.html">[前]</a><a href="14978.html">[次]</a><a href="../list/14901-15000.html">[番号順一覧]</a><a href="../thread/14901-15000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14977
</p>
<div class="header">
<p>
From: Kota Hada &lt;Kota Hada &lt;kthd.wing@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 18 Jul 2009 01:16:15 +0900<br>
Subject: [mysql 14977] Re: MySQL Clusterのチューニング方法<br>

</p>
</div>
<div class="body">
<pre>
奥野さん

ご返信ありがとうございます。

以下、インラインにて失礼します。

<span class="quote2">&gt;&gt; SELECT * FROM [table_name]　LIMIT 3000,30;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; このようなクエリを実行すると、SQLノードは3000行データノードからフェッチして、</span>
<span class="quote1">&gt; そのまま捨ててしまうことになりますので効率がよくありません。LIMIT句では</span>
<span class="quote1">&gt; オフセットを極力利用しないようにしましょう。その代わりWHERE句で条件の絞り込みを</span>
<span class="quote1">&gt; するようにしましょう。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; MySQL Clusterでは、ORDER BY句を指定しない限り、行がソートされることはありません。</span>
<span class="quote1">&gt; 上記のクエリでは、行の順序とは無関係の結果が返ってくるかも知れません。</span>
<span class="quote1">&gt;</span>

テストでこのようなクエリを実行しておりました。
実際には、WHERE句を使い条件をしぼるようにしてます。
ただ、それでも5〜6秒もかかってしまっています。

<span class="quote1">&gt; また、ネットワークの帯域がボトルネックになるのを防ぐため、* もあまり</span>
<span class="quote1">&gt; 利用するべきではありません。カラムを絞り込むことで性能が改善する場合があります。</span>
<span class="quote1">&gt; MySQL Clusterではネットワークがボトルネックになりやすいので注意しましょう。</span>
<span class="quote1">&gt;</span>

一応、1GbpsのNICでつながっているのですが、
このれでもボトルネックの可能性はありますでしょうか？

<span class="quote1">&gt; テーブルがインメモリ型ではなくディスク型の場合、キャッシュサイズが小さいと</span>
<span class="quote1">&gt; 時間がかかる場合があります。</span>
<span class="quote1">&gt;</span>

なるほど。
ただ、特にディスク型を設定した覚えがありません。
これが原因なのか？？な気がしています。

キャッシュサイズについては、少し調べて試しに設定してみることにします。

<span class="quote1">&gt; JOINは使用していないですよね？</span>

はい。使用していません。

<span class="quote1">&gt; EXPLAINの「type」はALLでしょうか？</span>

はい。ALLでした。

<span class="quote2">&gt;&gt; そもそも、この14秒というのがそこそこの処理速度なのかも</span>
<span class="quote2">&gt;&gt; よく分かっていない状況なのです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 非常に遅いと思います。</span>
<span class="quote1">&gt;</span>

引き続き、ご教授いただければ幸いです。
よろしくお願いいたします。

</pre>
</div>
<p class="button"><a href="14976.html">[前]</a><a href="14978.html">[次]</a><a href="../list/14901-15000.html">[番号順一覧]</a><a href="../thread/14901-15000.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="14975.html">  14975 2009-07-17 22:13 [Kota Hada &lt;kthd.wing] MySQL Clusterのチューニング方法         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14976.html">  14976 2009-07-17 23:00 ┗[Mikiya Okuno &lt;Mikiya]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="14977.html">  14977 2009-07-18 01:16 　┗[Kota Hada &lt;kthd.wing]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14978.html">  14978 2009-07-18 11:14 　　┗[Mikiya Okuno &lt;Mikiya]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14984.html">  14984 2009-07-18 12:42 　　　┗[Kota Hada &lt;kthd.wing]                                 </a></span>
</pre>
</body>
</html>
