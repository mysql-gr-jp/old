<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12814</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="12813.html">[前]</a><a href="12815.html">[次]</a><a href="../list/12801-12900.html">[番号順一覧]</a><a href="../thread/12801-12900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:12814
</p>
<div class="header">
<p>
From: SAKAI Kei &lt;SAKAI Kei &lt;sak@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 27 Feb 2006 19:45:31 +0900<br>
Subject: [mysql 12814] Re: SELECTクエリの速度が安定しない<br>

</p>
</div>
<div class="body">
<pre>
坂井です

<span class="quote1">&gt; サーバにクエリを発行していない状態がしばらく続いた後（1時間くらい？）、</span>
<span class="quote1">&gt; おもむろに発行すると、最初の1回だけ数秒かかってしまいます。</span>

  サーバの状況がわからないので当てずっぽうですが、
  以下の可能性はどうでしょうか。

・しばらくアクセスされないとディスクがスリープモードに入るために、
  １回目のアクセス時に時間がかかる

・２回目以降はOSのキャッシュにデータが乗ってしまうので応答が
  はやい

以上

On Mon, 27 Feb 2006 17:46:58 +0900
shuetsu &lt;shuetsu@xxxxxxxxxx&gt; wrote:
<span class="quote1">&gt; 初めて投稿します。伊藤と申します。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; FreeBSD4.7 + MySQL4.1.14 を用いて開発を行っているのですが、</span>
<span class="quote1">&gt; 以下のような単純なクエリの実行速度が安定しません。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; select * from hoge where fuga &gt; 定数</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 通常であれば一瞬で結果が返ってくるようなクエリなのですが、</span>
<span class="quote1">&gt; サーバにクエリを発行していない状態がしばらく続いた後（1時間くらい？）、</span>
<span class="quote1">&gt; おもむろに発行すると、最初の1回だけ数秒かかってしまいます。</span>
<span class="quote1">&gt; クエリキャッシュのせいなのかなとも思い、</span>
<span class="quote1">&gt; その後すぐに定数の部分だけを変えたクエリを発行してみたのですが、</span>
<span class="quote1">&gt; これも一瞬で処理されました。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; さらに、この後、、、</span>
<span class="quote1">&gt; 別のテーブルに対するselectを発行すると、やはり1度目だけが</span>
<span class="quote1">&gt; 遅く、2回目以降のクエリは一瞬で返ってきます。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; レコードの更新は一切行われていません。</span>
<span class="quote1">&gt; また、何かほかのプロセスがそのときだけ重かったといったことも</span>
<span class="quote1">&gt; ありませんでした。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; とにかく、しばらく時間を空けた後の、</span>
<span class="quote1">&gt; あるテーブルに対する1回目のクエリがなぜか遅いということです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; こういった場合、どのような原因と対処法がが考えられるのでしょうか？</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; -- </span>
<span class="quote1">&gt; shuetsu ito &lt;shuetsu@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt; </span>

-- 
SAKAI Kei &lt;sak@xxxxxxxxxx&gt;


</pre>
</div>
<p class="button"><a href="12813.html">[前]</a><a href="12815.html">[次]</a><a href="../list/12801-12900.html">[番号順一覧]</a><a href="../thread/12801-12900.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="12810.html">  12810 2006-02-27 17:46 [shuetsu &lt;shuetsu@xxx] SELECTクエリの速度が安定しない          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12811.html">  12811 2006-02-27 18:07 ┣[遠藤 俊裕 &lt;endo@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12812.html">  12812 2006-02-27 19:11 ┃┗[shuetsu &lt;shuetsu@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12815.html">  12815 2006-02-27 20:09 ┃　┗[遠藤 俊裕 &lt;endo@xxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12816.html">  12816 2006-02-28 08:33 ┃　　┗[shuetsu &lt;shuetsu@xxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12813.html">  12813 2006-02-27 19:43 ┣[Shuji Yamakawa &lt;hzv0]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="12814.html">  12814 2006-02-27 19:45 ┗[SAKAI Kei &lt;sak@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12817.html">  12817 2006-02-28 10:55 　┗[shuetsu &lt;shuetsu@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12818.html">  12818 2006-02-28 11:29 　　┣[tatematsu &lt;tatemax@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12819.html">  12819 2006-02-28 11:50 　　┃┗[tatematsu &lt;tatemax@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12820.html">  12820 2006-02-28 13:56 　　┃　┗[shuetsu &lt;shuetsu@xxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12821.html">  12821 2006-02-28 14:18 　　┃　　┗[tatematsu &lt;tatemax@x]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12822.html">  12822 2006-02-28 14:37 　　┃　　　┗[shuetsu &lt;shuetsu@xxx]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12823.html">  12823 2006-02-28 14:49 　　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12824.html">  12824 2006-02-28 17:13 　　　┗[shuetsu &lt;shuetsu@xxx]                                 </a></span>
</pre>
</body>
</html>
