<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:7415</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="7414.html">[前]</a><a href="7416.html">[次]</a><a href="../list/7401-7500.html">[番号順一覧]</a><a href="../thread/7401-7500.html">[スレッド一覧]</a></p>
<p class="id">
mysql:7415
</p>
<div class="header">
<p>
From: Daiju Azuma &lt;Daiju Azuma &lt;daiju_azuma@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 07 Apr 2003 20:12:02 +0900<br>
Subject: [mysql 07415] Re: 最新のレコードを○○件残して古いものを削除<br>

</p>
</div>
<div class="body">
<pre>　こんにちは。

On Mon, 07 Apr 2003 19:51:39 +0900
yuji koga &lt;koga-y@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; 最新のレコードを○○件残して古いものを削除するSQL文を発行したいのですが、</span>
<span class="quote1">&gt; どのように書いたらよいのか悩んでおります。</span>

　以下のようなsql文でいいのかなぁと思いますが，どうでしょう。
(総レコード件数が10,000件を超えない場合に10件だけ残すことを
想定しています。)

 delete from db_name order by timestamp desc limit 10,10000;
 
参考
<a href="http://www.mysql.gr.jp/jpdoc/4.0/manual.ja_Reference.html#SELECT">http://www.mysql.gr.jp/jpdoc/4.0/manual.ja_Reference.html#SELECT</a>
LIMIT 節は、 SELECT 構文で返されるレコード数を指定するのに使
用されます。 LIMIT は一つか二つの数字の引数を取ります。 引数
が2つ与えられたならば、最初の引数は最初のレコードからのオフ
セットを示し、 2つめの引数は返すレコードの最大数を示します。
初めのレコードのオフセットは0です(1ではありません)。 To be
compatible with PostgreSQL MySQL also supports the syntax:
LIMIT # OFFSET #. 

　表示だけ10件に限定する方が楽かな。

-- 
神戸市教育委員会庶務課　情報企画係
　東　大樹　tel:078-322-5761 fax:078-322-6145
　Daiju Azuma &lt;daiju_azuma@xxxxxxxxxx&gt;
＞パソコンの時計合ってますか？たまに時間合せをするか
　タイムサーバと同期を取っておきましょう。


</pre>
</div>
<p class="button"><a href="7414.html">[前]</a><a href="7416.html">[次]</a><a href="../list/7401-7500.html">[番号順一覧]</a><a href="../thread/7401-7500.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="7412.html">   7412 2003-04-07 18:35 [Satoshi Iwanaga &lt;iwa] インストール・別サーバへ接続            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7413.html">   7413 2003-04-07 19:08 ┗[doumae &lt;doumae@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7414.html">   7414 2003-04-07 19:51 　┣[yuji koga &lt;koga-y@xx] 最新のレコードを○○件残して古いものを削除</a></span>
<span class="current">-&gt;&nbsp;<a href="7415.html">   7415 2003-04-07 20:12 　┃┣[Daiju Azuma &lt;daiju_a]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7418.html">   7418 2003-04-07 20:57 　┃┃┗[Shinya Kawaji &lt;kawaj]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7420.html">   7420 2003-04-07 21:24 　┃┃　┗[Daiju Azuma &lt;daiju_a]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7422.html">   7422 2003-04-08 09:54 　┃┗[yuji koga &lt;koga-y@xx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7416.html">   7416 2003-04-07 20:16 　┣[Satoshi Iwanaga &lt;iwa]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7423.html">   7423 2003-04-08 15:12 　┃┗[Satoshi Iwanaga &lt;iwa]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7424.html">   7424 2003-04-08 15:47 　┃　┗[doumae &lt;doumae@xxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7425.html">   7425 2003-04-08 16:12 　┃　　┗[Satoshi Iwanaga &lt;iwa]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7426.html">   7426 2003-04-08 16:48 　┃　　　┣["TOYOSHIMA,Masayuki"]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7432.html">   7432 2003-04-09 14:26 　┃　　　┗[Satoshi Iwanaga &lt;iwa]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7417.html">   7417 2003-04-07 20:21 　┗[doumae &lt;doumae@xxxxx]                                     </a></span>
</pre>


</body></html>