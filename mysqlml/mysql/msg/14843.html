<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14843</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="14842.html">[前]</a><a href="14844.html">[次]</a><a href="../list/14801-14900.html">[番号順一覧]</a><a href="../thread/14801-14900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14843
</p>
<div class="header">
<p>
From: Mikiya Okuno &lt;Mikiya Okuno &lt;Mikiya.Okuno@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 12 May 2009 09:41:40 +0900<br>
Subject: [mysql 14843] Re: UNSIGNEDの0からの引き算<br>

</p>
</div>
<div class="body">
<pre>奥野です。

おはようございます。

mysql&gt; SET sql_mode = NO_UNSIGNED_SUBTRACTION;

をお試しあれ。
--
Mikiya Okuno, MySQL Support Engineer
Sun Microsystems KK, Tokyo, Japan
<a href="http://www-jp.mysql.com/">http://www-jp.mysql.com/</a>


On 12/05/2009, at 12:49 AM, mao wrote:

<span class="quote1">&gt; こんばんはMAOです。</span>
<span class="quote1">&gt; すみません。お教えください。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; mysql 3.xx.xxで動いていたプログラムを</span>
<span class="quote1">&gt; mysql 5.0.45に移植中です。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; mysql 3のときですが、</span>
<span class="quote1">&gt; INT UNSIGNEDで0が入っているフィールドから引き算をしても</span>
<span class="quote1">&gt; 0は0のままで0以下になることはなかったのですが、</span>
<span class="quote1">&gt; mysql 5でやった場合は、0から1を引くと4294967295になってしまいます。</span>
<span class="quote1">&gt; これを0にする方法はありませんでしょうか？</span>
<span class="quote1">&gt; 0かどうか確認をして、0だったら、引かないという方法は考えられますが、</span>
<span class="quote1">&gt; フィールド数が多く、プログラムでなく、SQL側で対応できればと考えています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 以上、よろしくお願いいたします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ------ test sql start -------</span>
<span class="quote1">&gt; CREATE TABLE `mtest` (</span>
<span class="quote1">&gt; `fnum` INT UNSIGNED NOT NULL</span>
<span class="quote1">&gt; ) TYPE = MYISAM ;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; INSERT INTO `mtest` ( `fnum` )</span>
<span class="quote1">&gt; VALUES (</span>
<span class="quote1">&gt; '0'</span>
<span class="quote1">&gt; );</span>
<span class="quote1">&gt; update mtest set fnum = fnum -1;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; select fnum from mtest;</span>
<span class="quote1">&gt; ------ test sql end -------</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ■結果</span>
<span class="quote1">&gt; mysql 3.xの場合は　0</span>
<span class="quote1">&gt; mysql 5.xの場合は　4294967295</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>


</pre>
</div>
<p class="button"><a href="14842.html">[前]</a><a href="14844.html">[次]</a><a href="../list/14801-14900.html">[番号順一覧]</a><a href="../thread/14801-14900.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="14841.html">  14841 2009-05-12 00:49 [mao &lt;mao@xxxxxxxxxx&gt;] UNSIGNEDの0からの引き算                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14842.html">  14842 2009-05-12 08:21 ┣[高橋政利 &lt;takahashi@]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="14843.html">  14843 2009-05-12 09:41 ┣[Mikiya Okuno &lt;Mikiya]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14844.html">  14844 2009-05-12 09:46 ┗[HIRATSUKA Sadao &lt;hir]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14847.html">  14847 2009-05-12 21:27 　┗[mao &lt;mao@xxxxxxxxxx&gt;]                                     </a></span>
</pre>


</body></html>