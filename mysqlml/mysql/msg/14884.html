<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14884</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14883.html">[前]</a><a href="14885.html">[次]</a><a href="../list/14801-14900.html">[番号順一覧]</a><a href="../thread/14801-14900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14884
</p>
<div class="header">
<p>
From: (浅山雄三) &lt;&lt;ALCYONE@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 26 May 2009 17:16:02 +0900<br>
Subject: [mysql 14884] バッチ処理のUPDATEでmysqld got signal  11が発生する<br>

</p>
</div>
<div class="body">
<pre>
  浅山と申します。いつもお世話になります。

  約20万件のデータをバッチ処理でUPDATEしている途中でmysqld got
signal 11となり、コネクションが切れてしまいます。同じデータで何回か実行
してみましたが、ある時は数千件目、またある時は10数万件目と、実行する度
にsignal 11が発生するレコードが違っています。
  signal 11を回避する何かいい手立てがありましたらお教えください。

【環境】
REDHAT 5.1
MySQL 5.1.32
PHP 5.2.8

【エラー・ログ】
090526  6:13:28 - mysqld got signal 11 ;
This could be because you hit a bug. It is also possible that this 
binary
or one of the libraries it was linked against is corrupt, improperly 
built,
or misconfigured. This error can also be caused by malfunctioning 
hardware.
We will try our best to scrape up some info that will hopefully help 
diagnose
the problem, but since we have already crashed, something is definitely 
wrong
and this may fail.

key_buffer_size=2147483648
read_buffer_size=2097152
max_used_connections=2
max_threads=200
threads_connected=2
It is possible that mysqld could use up to 
key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 
2917622 K
bytes of memory
Hope that's ok; if not, decrease some variables in the equation.

thd: 0xc7064b8
Attempting backtrace. You can use the following information to find out
where mysqld died. If you see no messages after this, something went
terribly wrong...
stack_bottom = 0x24c513b8 thread_stack 0x30000
Trying to get some variables.
Some pointers may be invalid and cause the dump to abort...
thd-&gt;query at 0xa0bf070 = update tp_catalog set ngram = '～～'
thd-&gt;thread_id=669
thd-&gt;killed=NOT_KILLED
The manual page at <a href="http://dev.mysql.com/doc/mysql/en/crashing.html">http://dev.mysql.com/doc/mysql/en/crashing.html</a> 
contains
information that should help you find out what is causing the crash.
090526 06:13:28 mysqld_safe Number of processes running now: 0
090526 06:13:28 mysqld_safe mysqld restarted
InnoDB: The log sequence number in ibdata files does not match
InnoDB: the log sequence number in the ib_logfiles!
090526  6:13:29  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
090526  6:13:29  InnoDB: Started; log sequence number 0 468460067
090526  6:13:29 [Note] Event Scheduler: Loaded 0 events
090526  6:13:29 [Note] /opac/pp/mysql/bin/bin/mysqld: ready for 
connections.
Version: '5.1.32'  socket: '/tmp/mysql.sock'  port: 3306  MySQL 
Community Server (GPL)



 2009年5月26日 17:11:29 (^o^)浅山雄三


</pre>
</div>
<p class="button"><a href="14883.html">[前]</a><a href="14885.html">[次]</a><a href="../list/14801-14900.html">[番号順一覧]</a><a href="../thread/14801-14900.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="14884.html">  14884 2009-05-26 17:16 [&lt;ALCYONE@xxxxxxxxxx&gt;] バッチ処理のUPDATEでmysqld got signal  11が発生する</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14885.html">  14885 2009-05-26 17:32 ┣[Katsutoshi Nakatomi ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14886.html">  14886 2009-05-26 18:51 ┗[Tetsuro IKEDA &lt;ikdtt]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14888.html">  14888 2009-05-27 09:24 　┗[&lt;ALCYONE@xxxxxxxxxx&gt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14889.html">  14889 2009-05-28 12:52 　　┗[&lt;ALCYONE@xxxxxxxxxx&gt;] Re: バッチ処理のUPDATEでmysqld got signal  11が発生する  【再発】</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14890.html">  14890 2009-06-05 10:49 　　　┗[&lt;ALCYONE@xxxxxxxxxx&gt;] Re: バッチ処理のUPDATEでmysqld got signal  11が発生する  【再発】他に類似事象？有り</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14891.html">  14891 2009-06-05 11:39 　　　　┗[&quot;Kaname Kuji\(Y7\)&quot; ]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14892.html">  14892 2009-06-05 12:16 　　　　　┗[&lt;ALCYONE@xxxxxxxxxx&gt;]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14893.html">  14893 2009-06-05 12:44 　　　　　　┗[&quot;Kaname Kuji\(Y7\)&quot; ]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14894.html">  14894 2009-06-05 12:53 　　　　　　　┗[&lt;ALCYONE@xxxxxxxxxx&gt;]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14895.html">  14895 2009-06-05 14:44 　　　　　　　　┗[&quot;Kaname Kuji\(Y7\)&quot; ]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14913.html">  14913 2009-06-10 12:57 　　　　　　　　　┗[&lt;ALCYONE@xxxxxxxxxx&gt;]                     </a></span>
</pre>
</body>
</html>
