<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15032</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15031.html">[前]</a><a href="15033.html">[次]</a><a href="../list/15001-15100.html">[番号順一覧]</a><a href="../thread/15001-15100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:15032
</p>
<div class="header">
<p>
From: bon &lt;bon &lt;bon@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 12 Oct 2009 12:41:43 +0900<br>
Subject: [mysql 15032] Re: 「２つ以上含む」検索<br>

</p>
</div>
<div class="body">
<pre>

bonです。

興味があったので調べてみました。

SELECT *
FROM `tableA`
WHERE (if(`columnA` LIKE '%||カモ||%',1,0)
    + if(`columnA` LIKE '%||ガチョウ||%',1,0)
    + if(`columnA` LIKE '%||スズメ||%',1,0)) &gt;=2;
でどうでしょう？


Hisamitsu Issei &lt;ds1i-hsmt@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; 久光と申します</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote3">&gt; ||アヒル||カモ||ニワトリ||ガチョウ||スズメ||</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; のように「||」を区切り文字として複数の値が入って </span>
<span class="quote1">&gt; いるカラムがあります。例えば「カモまたはガチョウ </span>
<span class="quote1">&gt; またはスズメが含まれるレコード」なら</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SELECT *</span>
<span class="quote1">&gt; FROM `tableA`</span>
<span class="quote1">&gt; WHERE `columnA` LIKE '%||カモ||%'</span>
<span class="quote1">&gt;     OR `columnA` LIKE '%||ガチョウ||%'</span>
<span class="quote1">&gt;     OR `columnA` LIKE '%||スズメ||%'</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; で抽出できますが、「カモまたはガチョウまたはスズ </span>
<span class="quote1">&gt; メのうちどれか２つ以上が含まれるレコード」の抽出 </span>
<span class="quote1">&gt; 方法がわかりません。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 　「カモが含まれていれば１なければ０、ガチョウが </span>
<span class="quote1">&gt; 含まれていれば１なければ０、スズメが含まれていれ </span>
<span class="quote1">&gt; ば１なければ０」という条件を組み込んで合計値が２ </span>
<span class="quote1">&gt; 以上になるレコードを検索するという方法なのかなあ </span>
<span class="quote1">&gt; と考えたのですが具体的なSQLが思いつかなくて。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 　よろしくお願いいたします。</span>
<span class="quote1">&gt; </span>


--
bon@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="15031.html">[前]</a><a href="15033.html">[次]</a><a href="../list/15001-15100.html">[番号順一覧]</a><a href="../thread/15001-15100.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="15031.html">  15031 2009-10-12 12:16 [Hisamitsu Issei &lt;ds1] 「２つ以上含む」検索                    </a></span>
<span class="current">-&gt;&nbsp;<a href="15032.html">  15032 2009-10-12 12:41 ┗[bon &lt;bon@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15033.html">  15033 2009-10-12 12:57 　┣[ユウシステム 糸瀬 &lt;i]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15035.html">  15035 2009-10-12 13:14 　┃┗[Hisamitsu Issei &lt;ds1]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15034.html">  15034 2009-10-12 13:09 　┗[Hisamitsu Issei &lt;ds1]                                     </a></span>
</pre>
</body>
</html>
