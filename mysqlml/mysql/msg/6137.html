<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:6137</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="6136.html">[前]</a><a href="6138.html">[次]</a><a href="../list/6101-6200.html">[番号順一覧]</a><a href="../thread/6101-6200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:6137
</p>
<div class="header">
<p>
From: &quot;Takashi Yamashita&quot; &lt;&quot;Takashi Yamashita&quot; &lt;takasi@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 13 Sep 2002 16:30:31 +0900<br>
Subject: [mysql 06137] Re: CGI::SpeedyCGI と Mysql  　との組み合わせ<br>

</p>
</div>
<div class="body">
<pre>
お世話になっております。

<span class="quote1">&gt; #!/usr/bin/perl ---&gt;  #!/usr/bin/speedy -- -M100 -t600 -r500</span>
<span class="quote1">&gt; に変更し、</span>
<span class="quote1">&gt; スクリプトの最初に</span>
<span class="quote1">&gt; use CGI::SpeedyCGI;</span>
<span class="quote1">&gt; my $sp = CGI::SpeedyCGI-&gt;new;</span>
<span class="quote1">&gt; undef ($hogehoge);</span>
データベース入出力関連の処理には手を加えていないようですので
Speedyネイティブな問題かもしれません。

<span class="quote1">&gt; 実際に稼動させた所、以下のエラーがApache のエラーログに</span>
<span class="quote1">&gt; 記録されています。</span>
<span class="quote1">&gt; Issuing rollback() for database handle being DESTROY'd without explicit</span>
<span class="quote1">&gt; disconnect() at /var/www/hogehoge.pl line 758.</span>
Apacheでこのようなエラーが発生したとき、
データベース、テーブル、カラムは何らかの損傷を受けましたか？
または、
追加したはずのレコードが存在しなかったり、
更新したはずのレコードが変更されてなかったり、
削除したはずのレコードが残っていたりしましたか？
確認してみてください。

<span class="quote1">&gt; 頻度は　約10000回動いて20回ほどエラーが記録されています。</span>
<span class="quote1">&gt; デバッグの進め方を教えていただければ、</span>
CGIを10000回実行したうち20回エラーが発生したのか、
10000回ループさせたうち20回エラーが発生したのか、
100回回るループを２重にネストさせ合計10000回処理を
実行させた時に20回エラーが発生したのか、
もしくはそれ以外のケースなのかが良く分かりません。
それから、Speedyからperlに戻して同様に10000回動かして
エラーが発生するかどうか確かめた方がいいと思います。
本当にSpeedyのせいでエラーが発生しているのか、
他の原因でエラーが発生しているのかが分かるからです。

<span class="quote1">&gt; CGI::SpeedyCGI　を使った場合のMysql　で</span>
<span class="quote1">&gt; 一般的な注意点はあるのでしょうか？</span>
具体的なケースにおける注意点についてはレスが付くと思います。
一般的な注意点については書籍やWebサイトが紹介される
と思います。

<span class="quote1">&gt; また、せっかくCGI::SpeedyCGIを使っていますので、</span>
<span class="quote1">&gt; データーベースのconnect を毎回しないでよい方法は？</span>
石川様がお考えになっている「毎回」がどのような「毎回」で
あるかがはっきりすれば、レスが付くと思います。
# 例えば、「セッション毎」とか「ページ毎」など。

宜しくお願いします。

------------------------------------------------
山下高司
takasi@xxxxxxxxxx



</pre>
</div>
<p class="button"><a href="6136.html">[前]</a><a href="6138.html">[次]</a><a href="../list/6101-6200.html">[番号順一覧]</a><a href="../thread/6101-6200.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="6136.html">   6136 2002-09-13 15:24 [&lt;ml_mysql@xxxxxxxxxx] CGI::SpeedyCGI と Mysql 　との組み合わせ</a></span>
<span class="current">-&gt;&nbsp;<a href="6137.html">   6137 2002-09-13 16:30 ┗[&quot;Takashi Yamashita&quot; ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6138.html">   6138 2002-09-13 17:30 　┗[&lt;ml_mysql@xxxxxxxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6139.html">   6139 2002-09-13 18:00 　　┗[&quot;Takashi Yamashita&quot; ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6143.html">   6143 2002-09-14 09:33 　　　┗[&quot;KAWAI,Takanori&quot; &lt;GC]                                 </a></span>
</pre>
</body>
</html>
