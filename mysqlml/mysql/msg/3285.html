<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3285</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="3284.html">[前]</a><a href="3286.html">[次]</a><a href="../list/3201-3300.html">[番号順一覧]</a><a href="../thread/3201-3300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:3285
</p>
<div class="header">
<p>
From: Takeharu Masuda &lt;Takeharu Masuda &lt;tac@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 18 Feb 2001 11:36:02 +0900<br>
Subject: [mysql 03285] Re: 無作為に行を抽出する方法<br>

</p>
</div>
<div class="body">
<pre>
On Sun, 18 Feb 2001 00:51:59 +0900
"s.ara" &lt;ml@xxxxxxxxxx&gt; wrote
at <a href="03284.html">[mysql 03284]</a> 無作為に行を抽出する方法
(&lt;010201c098f9$b4f8b250$2dcefea9@NRGZ4LYX0XM212&gt;):

<span class="quote1">&gt; 無作為にテーブル上の１行を抽出したいのですが</span>
<span class="quote1">&gt; 現在、以下の方法を使用しています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SELECT * FROM table;</span>
<span class="quote1">&gt; の実行結果をPHP上で１つ選んでいる。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; この方法で実現はできるのですが、テーブルサイズが大きくなるほど</span>
<span class="quote1">&gt; 処理が重くなってしまいます。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SQLのみで取り出すことは可能でしょうか？</span>

　3.23 であれば、こんな芸当が出来ますね（確認はしていませんが……）。

　SELECT * FROM table ORDER BY RAND() LIMIT 1;

＃RAND() 関数の説明の部分を参照のこと


　他の手としては、まず全体の行数をカウントしておいて、その範囲での乱数を
生成、その結果で
　SELECT * FROM table LIMIT 乱数の値, 1
という SQL を生成して発行するとか。
-- 
written by Takeharu Masuda &lt;tac@xxxxxxxxxx&gt;
with Thinkpad 235 - called "Chandra II" / "Clavius"
2001/02/18 11:31:57


</pre>
</div>
<p class="button"><a href="3284.html">[前]</a><a href="3286.html">[次]</a><a href="../list/3201-3300.html">[番号順一覧]</a><a href="../thread/3201-3300.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="3218.html">   3218 2001-02-09 02:23 ["TOYOSHIMA,Masayuki"] Re: 日本語正規表現 UDF                  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3252.html">   3252 2001-02-14 11:06 ┗["TOYOSHIMA,Masayuki"]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3257.html">   3257 2001-02-15 11:02 　┣[Akihiko Shinohara &lt;s]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3265.html">   3265 2001-02-15 21:42 　┗[とみたまさひろ &lt;tomm]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3283.html">   3283 2001-02-17 21:10 　　┗["TOYOSHIMA,Masayuki"]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3284.html">   3284 2001-02-18 00:51 　　　┣["s.ara" &lt;ml@xxxxxxxx] 無作為に行を抽出する方法        </a></span>
<span class="current">-&gt;&nbsp;<a href="3285.html">   3285 2001-02-18 11:36 　　　┃┗[Takeharu Masuda &lt;tac]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3286.html">   3286 2001-02-18 19:05 　　　┃　┗["s.ara" &lt;ml@xxxxxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3287.html">   3287 2001-02-19 01:18 　　　┗[とみたまさひろ &lt;tomm]                                 </a></span>
</pre>


</body></html>