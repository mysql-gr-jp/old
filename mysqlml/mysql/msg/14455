<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14455</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14454">[前]</a><a href="14456">[次]</a><a href="../list/14401-14500">[番号順一覧]</a><a href="../thread/14401-14500">[スレッド一覧]</a></p>
<p class="id">
mysql:14455
</p>
<div class="header">
<p>
From: trad-ex &lt;trad-ex &lt;trad-ex@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 23 Apr 2008 03:20:43 +0900<br>
Subject: [mysql 14455] Spatial Extentions  について<br>

</p>
</div>
<div class="body">
<pre>
高木といいます。

現在、あるエリア情報をDBに突っ込んで、与えられた点がどのエリアに属するか
を試験しているのですが、どうもうまくいきません。

環境：CentOS4.4　MySQL5.0.45と5.0.24

サーバにssh後、mysqlクライアントで以下を発行

SELECT id FROM test
WHERE MBRContains(geom, GeomFromText('Point(503011177  128470894)'));

テーブル定義は
CREATE TABLE `test` (
  `id` varchar(16) NOT NULL,
  `geom` polygon NOT NULL,
  SPATIAL KEY `geom` (`geom`)
) ENGINE=MyISAM DEFAULT CHARSET=sjis;

testテーブルのデータは添付のinsert.sqlです。
また、グラフソフトで囲まれているエリア、指定された点を描画したものが添付
したimg.gifになります。
赤線がPolygonで囲まれたエリア、青の線が指定された点になります。
グラフ上、明らかに囲まれていないのに、上記クエリだとヒットしてしまってい
ます。
MBRContains(g1,g2)とは、g1がg2を包含するときにTRUEを返す、と思っていたの
ですが、違いますでしょうか？
どなたか、この現象に遭遇した方、いらっしゃいますか？
ちなみに、PolygonをLineStringに変更しても、状況は変わりませんでした。

どのような情報でもいただけると幸いです。
また、なにか情報不足等ありましたら、ご指摘ください。

以上よろしくお願いします。




</pre>
</div>
<div class="attach">
<h3 class="attachtitle">添付ファイル</h3>
<ul>
<li><a href="http://www.mysql.gr.jp/mysqlml/mysql/msg/14455/0/mbrtest.zip">mbrtest.zip [application/x-zip-compressed]</a>
</ul>
</div>
<p class="button"><a href="14454">[前]</a><a href="14456">[次]</a><a href="../list/14401-14500">[番号順一覧]</a><a href="../thread/14401-14500">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="14455">@ 14455 2008-04-23 03:20 [trad-ex &lt;trad-ex@xxx] Spatial Extentions  について            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14456">@ 14456 2008-04-23 06:20 ┗[&quot;KIMURA, Meiji&quot; &lt;kim]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14457">  14457 2008-04-23 12:01 　┗[trad-ex &lt;trad-ex@xxx]                                     </a></span>
</pre>
</body>
</html>
