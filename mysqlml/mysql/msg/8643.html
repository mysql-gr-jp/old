<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8643</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="8642.html">[前]</a><a href="8644.html">[次]</a><a href="../list/8601-8700.html">[番号順一覧]</a><a href="../thread/8601-8700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8643
</p>
<div class="header">
<p>
From: きたぢま &lt;きたぢま &lt;kitajima@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 22 Jan 2004 10:34:50 +0900<br>
Subject: [mysql 08643] Re: 負荷分散（軽減方法）について質問します<br>

</p>
</div>
<div class="body">
<pre>
これは[yabu@xxxxxxxxxx]様が[04/01/22 01:59:40]に送信された、
[<a href="08641.html">[mysql 08641]</a> Re: 負荷分散（軽減方法）について質問します]の返信です。
￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣
CPU使用率100%ですか…。CPU以外のパフォーマンスはどのようになってますか？
(メモリやディスクI/Oなど)上手くチューニングされてますでしょうか。

テーブル構造の見直しや、SQL文の最適化などが良いかと。
MySQLでは遅いSQL文のログを取る機能があります。(指定秒以上かかるSQLを遅い
と定義することも可能)
⇒<a href="http://www.softagency.co.jp/mysql/Manual/html/manual.ja_MySQL_Database_Administration.html#Slow_query_log">http://www.softagency.co.jp/mysql/Manual/html/manual.ja_MySQL_Database_Administration.html#Slow_query_log</a>

このSQL文のExplain結果を見て、意図するインデックスが使われているかどうか
などを検証してみて、もし意図するインデックスを使っていなかったら文を書き
換えるなどの対応が良いかと思います。

この方法がお金がかからず簡単で効果的面な場合が多いです。
これがダメならメモリキャッシュに使うサイズ設定ややテーブル構造の変更など
のチューニングも考えられます。


yabu@xxxxxxxxxx&gt; satoです。
yabu@xxxxxxxxxx&gt; 
yabu@xxxxxxxxxx&gt; とみたさん、ご回答ありがとうございました。
yabu@xxxxxxxxxx&gt; 
yabu@xxxxxxxxxx&gt; &gt;単純に max_connections が少なすぎる…ってことはないでしょうか。
yabu@xxxxxxxxxx&gt; とりあえず、mysql.cnf を書き換えて mysqldを再起動しました。コネクション
yabu@xxxxxxxxxx&gt; 数を100→200に変更したところ、「Too many connections」エラーは激減しまし
yabu@xxxxxxxxxx&gt; た。ありがとうございます。
yabu@xxxxxxxxxx&gt; 
yabu@xxxxxxxxxx&gt; ですが、やはり重いままであることに変わりはありません。（CPU使用率ほぼ100
yabu@xxxxxxxxxx&gt; ％）これはもうプログラム的にどうにもならない事なのでしょうか？


きたぢま &lt;kitajima@xxxxxxxxxx&gt;
日本MySQLユーザ会 <a href="../../../index.html">http://www.mysql.gr.jp/</a>
━━━━────────────────────────────


</pre>
</div>
<p class="button"><a href="8642.html">[前]</a><a href="8644.html">[次]</a><a href="../list/8601-8700.html">[番号順一覧]</a><a href="../thread/8601-8700.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8635.html">   8635 2004-01-21 19:22 [&quot;yabu@xxxxxxxxxx&quot; &lt;y] 負荷分散（軽減方法）について質問します  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8639.html">   8639 2004-01-21 21:02 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8641.html">   8641 2004-01-22 01:59 　┗[&quot;yabu@xxxxxxxxxx&quot; &lt;y]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="8643.html">   8643 2004-01-22 10:34 　　┗[きたぢま &lt;kitajima@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8647.html">   8647 2004-01-22 11:37 　　　┗[&quot;竹本　靖&quot; &lt;take@xxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8673.html">   8673 2004-01-30 01:05 　　　　┗[&lt;konet218@xxxxxxxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8674.html">   8674 2004-01-30 02:20 　　　　　┗[Takashi Mikami &lt;rx78]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8675.html">   8675 2004-01-30 11:17 　　　　　　┗[&lt;lavlav@xxxxxxxxxx&gt; ]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8676.html">   8676 2004-01-30 12:44 　　　　　　　┣[Takashi Mikami &lt;rx78]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8677.html">   8677 2004-01-30 13:38 　　　　　　　┗[ML account &lt;ml@xxxxx]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8678.html">   8678 2004-01-30 13:49 　　　　　　　　┣[&lt;lavlav@xxxxxxxxxx&gt; ]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8679.html">   8679 2004-01-30 14:09 　　　　　　　　┗[&lt;lavlav@xxxxxxxxxx&gt; ]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8680.html">   8680 2004-01-31 10:22 　　　　　　　　　┗[ML account &lt;ml@xxxxx]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8682.html">   8682 2004-02-02 13:25 　　　　　　　　　　┗[とみたまさひろ &lt;tomm]                   </a></span>
</pre>
</body>
</html>
