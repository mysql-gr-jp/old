<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3666</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="3665.html">[前]</a><a href="3667.html">[次]</a><a href="../list/3601-3700.html">[番号順一覧]</a><a href="../thread/3601-3700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:3666
</p>
<div class="header">
<p>
From: Hiroyuki Hasegawa &lt;Hiroyuki Hasegawa &lt;admin@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 24 May 2001 09:24:18 +0900<br>
Subject: [mysql 03666] 3.23.36 以降の問題点<br>

</p>
</div>
<div class="body">
<pre>はせがわです。

最近、なかなか思うように動いてくれませんが、どうも3.23.36になった
とたんにパフォーマンスががた落ちしました。

Redhat7.01J
SRPMにてインストール
gcc &amp; c++
標準オプションに--with-raid を追加
SJISで起動。テーブル、DB名に全角文字使用。

マスタ1台スレーブ5台のレプリケーション
テーブル規模・・一番でかいので60万行・固定長

レプリケーション自体は行われて正常に動きます。

問題はある一定以上の負荷がかかると、
3.23.35だとほとんど問題なく動くものが、3.23.36以上を
走らせた途端、ハングアップに近い状況になります。

3.23.38でも同様の現象です。

show processlist;
だけでも3分ほど硬直します。
-log
オプションで状況を見ましたが、完全停止しているわけではなく
パフォーマンスが著しく落ちるという以外、特にエラーも
吐きません。

気になったのが、show processlist;で確認
したときに、Stateがcleaning upという状況のものが
ちらほらみられます。3.23.35ではみたことがないStateです。

あとはCommandが、quitでStateもInfoもNULL状態のプロセスも多数。

アクセスのない状況にすると、３～４分で戻ります。

結局3.23.35以降、ぜんぜんつかえない状況です。

variableを比較してみましたが、3.23.35のものと全く変わりません。

3.23.36の段階で
Fixed bug when thread creation failed (could happen when doing
a LOT of connections in a short time). 
というFixがありますが、これがあだになっているように思えて仕方ありません。

どういった検証を行えばいいのでしょうね？

開発元にもなんとか認知して欲しいと思っているのですが、
どのあたりにご報告すればいいでしょうか。


</pre>
</div>
<p class="button"><a href="3665.html">[前]</a><a href="3667.html">[次]</a><a href="../list/3601-3700.html">[番号順一覧]</a><a href="../thread/3601-3700.html">[スレッド一覧]</a></p>


</body></html>