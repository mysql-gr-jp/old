<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5792</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="5791.html">[前]</a><a href="5793.html">[次]</a><a href="../list/5701-5800.html">[番号順一覧]</a><a href="../thread/5701-5800.html">[スレッド一覧]</a></p>
<p class="id">
mysql:5792
</p>
<div class="header">
<p>
From: ebihara &lt;ebihara &lt;ebiharaml@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 12 Jul 2002 13:27:09 +0900<br>
Subject: [mysql 05792] Re: 電話番号の検索<br>

</p>
</div>
<div class="body">
<pre>
もと記事の海老原です。

引用順番変更させていたしました。

<span class="quote1">&gt;ちろん、すでに運用されているDBで表の構成変更が難しいと言うことであれば、</span>
<span class="quote2">&gt;&gt; select * from tbl where replace(tel,'-','')='033456aaaa';</span>

了解です。結局検索を優先させたい場合は 033456aaaa のようにーのつかない
カラムを別途用意するのがベストということになるのですね。
今回はdbの変更が難しいということでもないのですが簡易的なdbなので
左辺にrelpace()を置くという方法で対応いたしました。
無事一発で動作いたしました。

大杉眞規 さんは書きました:
<span class="quote2">&gt;&gt; select * from tbl where replace(tel,'-','')='033456aaaa';</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;とするのは左辺加工（ = の左側の項）といってオススメしない…とSIの人にに話</span>
<span class="quote1">&gt;を聞いたことがあります。INDEXが無効化されてしまうとのことです。</span>

<span class="quote1">&gt;くらいであれば、パフォーマンスの劣化は体感できないかもしれません。ただ、</span>
<span class="quote1">&gt;このようなコーディングを日常的にしているとクセになってしまうかもしれませ</span>
<span class="quote1">&gt;ん。</span>

なるほど。勉強になりました。

あと、

MIYATSU Kazunari さんは書きました:
<span class="quote1">&gt;mysql&gt; select * from address where telephone like '1%2%1%1%7%8%7%4%2%1%2%2';</span>
<span class="quote1">&gt;7 rows in set (0.38 sec)</span>
<span class="quote1">&gt;一番最後のIndexをフル利用できるケースは当たり前として、likeの方がreplaceより</span>
<span class="quote1">&gt;はマシってのは意外でした。</span>


このLIKE を使う方法だったら 03(3456)aaaa と記録されていても対応できますね。
勉強になりました。ありがとうございました。



--------------------------------------------------------------------------
海老原祐太郎  ebihara@xxxxxxxxxx
<a href="http://www.si-linux.com/">http://www.si-linux.com/</a>   ←組み込み Linux / Hitachi SH3Linux

</pre>
</div>
<p class="button"><a href="5791.html">[前]</a><a href="5793.html">[次]</a><a href="../list/5701-5800.html">[番号順一覧]</a><a href="../thread/5701-5800.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="5779.html">   5779 2002-07-11 15:02 [ebihara &lt;ebiharaml@x] 電話番号の検索                          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5780.html">   5780 2002-07-11 15:31 ┣[遠藤 俊裕 &lt;endo_t@xx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5781.html">   5781 2002-07-11 15:34 ┣[&quot;Yuya.Nishida.&quot; &lt;yuy]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5782.html">   5782 2002-07-11 15:41 ┗[&quot;MIYATSU Kazunari&quot; &lt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5783.html">   5783 2002-07-11 16:03 　┗[大杉眞規  &lt;osugi@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5784.html">   5784 2002-07-11 17:33 　　┣[&quot;MIYATSU Kazunari&quot; &lt;]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="5792.html">   5792 2002-07-12 13:27 　　┗[ebihara &lt;ebiharaml@x]                                   </a></span>
</pre>
</body>
</html>
