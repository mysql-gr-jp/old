<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14346</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14345.html">[前]</a><a href="14347.html">[次]</a><a href="../list/14301-14400.html">[番号順一覧]</a><a href="../thread/14301-14400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14346
</p>
<div class="header">
<p>
From: とみたまさひろ &lt;とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 17 Jan 2008 01:00:19 +0900<br>
Subject: [mysql 14346] Re: ひらがなが五十音順に並ばない<br>

</p>
</div>
<div class="body">
<pre>
とみたです。

On Wed, 16 Jan 2008 21:35:48 +0900
takahashi nobuyuki &lt;nobusan@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; show create table で</span>
<span class="quote1">&gt; 再度確認したら</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ) ENGINE=MyISAM AUTO_INCREMENT=405 DEFAULT CHARSET=cp932</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; となっていました。</span>
<span class="quote1">&gt; この点では、成功です。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ですが、</span>
<span class="quote1">&gt; HP上で見ると</span>
<span class="quote1">&gt; 今度は五十音順に並んでないと言うよりは、</span>
<span class="quote1">&gt; これまでちゃんと感じが見えていたので、</span>
<span class="quote1">&gt; 全ての文字が????になってます。</span>

まず、テーブル内のデータが本当に「?」になってしまったのかどうかは、次の
ようにして確認できます。

  select hex(shimei) from kiso_t;

これで、3F3F3F... とかが出力されたらアウトです。データが壊れてしまってます。

そうじゃなくて、82A082A282A4... のように出力されるのであれば、データは
多分無事です。クライアントアプリと mysqld との間で charset が合っていな
いために「?」に変換されてしまっているのだと思います。

私は PHP については詳しくないので、正しい対処方法はわかりません。

もし、アプリケーションを変更可能で、mysqld に接続後に「set names cp932;」
というクエリを発行できるのであれば、試しにやってみてください。これで文
字化けしなくなれば、charset が合っていないためだと判断できます。

ただし、set names で cp932 charset に対応するのはセキュリティ的に問題が
あるので、恒久的な対策は set names ではなく PHP としての正しい方法でやっ
てください。

-- 
とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;
日本MySQLユーザ会 <a href="../../../index.html">http://www.mysql.gr.jp</a>

</pre>
</div>
<p class="button"><a href="14345.html">[前]</a><a href="14347.html">[次]</a><a href="../list/14301-14400.html">[番号順一覧]</a><a href="../thread/14301-14400.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="14340.html">  14340 2008-01-13 23:15 [takahashi nobuyuki &lt;] ひらがなが五十音順に並ばない            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14342.html">  14342 2008-01-14 17:57 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14343.html">  14343 2008-01-15 06:56 　┗[takahashi nobuyuki &lt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14344.html">  14344 2008-01-15 07:28 　　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14345.html">  14345 2008-01-16 21:35 　　　┗[takahashi nobuyuki &lt;]                                 </a></span>
<span class="current">-&gt;&nbsp;<a href="14346.html">  14346 2008-01-17 01:00 　　　　┗[とみたまさひろ &lt;tomm]                               </a></span>
</pre>
</body>
</html>
