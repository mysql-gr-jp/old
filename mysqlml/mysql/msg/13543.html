<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13543</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="13542.html">[前]</a><a href="13544.html">[次]</a><a href="../list/13501-13600.html">[番号順一覧]</a><a href="../thread/13501-13600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13543
</p>
<div class="header">
<p>
From: SATOH Fumiyasu &lt;SATOH Fumiyasu &lt;fumiya@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 22 Nov 2006 16:27:12 +0900<br>
Subject: [mysql 13543] Re: [質問]突如データベース接続不能となってしまいました。<br>

</p>
</div>
<div class="body">
<pre>
さとうふみやす @ OSS テクノロジです。

At 22 Nov 2006 15:52:58 +0900,
&lt;xbox@xxxxxxxxxx&gt; wrote:
<span class="quote1">&gt; ii  mysql-client-4.1 4.1.15-0.dotdeb. mysql database client binaries</span>
<span class="quote1">&gt; ii  mysql-common     5.0.24a-2.dotdeb mysql database common files (e.g. /etc/mysql/my.</span>
<span class="quote1">&gt; rc  mysql-common-4.1 4.1.11a-4sarge7  mysql database common files (e.g. /etc/mysql/my.</span>
<span class="quote1">&gt; rc  mysql-server-4.1 4.1.15-0.dotdeb. mysql database server binaries</span>

Debian sarge の MySQL サーバーは mysql-server (MySQL 4.0.x) と
mysql-server-4.1 (MySQL 4.1.x) で、現在のバージョンはそれぞれ
4.0.24-10sarge2 と 4.1.11a-4sarge7 です。バージョン番号に
「dotdeb」というのが含まれているものは公式パッケージには
ありません。

これ↓ですか?
  <a href="http://www.dotdeb.org/">http://www.dotdeb.org/</a>

<span class="quote1">&gt; すみません。</span>
<span class="quote1">&gt; mysqlを起動するに最低限必要なものが何かがわからなくなってき</span>
<span class="quote1">&gt; ました。</span>

誰かが <a href="http://www.dotdeb.org/">http://www.dotdeb.org/</a> の mysql-server-4.1 パッケージを
入れようとして失敗し、そのまま放置されているような感じですね。

<span class="quote1">&gt; そもそも、最初に投稿させていただいた中では</span>
<span class="quote1">&gt; Mysql4.0.24 と書かせていただいたのですが、これの確認は</span>
<span class="quote1">&gt; phpinfoからの情報でした。</span>

phpinfo() の MySQL のバージョンって、ライブラリ
(libmysqlclient* パッケージ) のバージョンなんじゃ
ないでしょうか? (予想)

<span class="quote1">&gt; なぜこのような事態になったのかが、イメージできないのですが。</span>

誰かがやったとしか考えられないですね。

<span class="quote1">&gt; 依存関係で必要なものは出てくるとは思うのですが、最低限必要な</span>
<span class="quote1">&gt; ものはどれなのでしょうか。</span>

MySQL 4.0.x が使いたいなら mysql-server パッケージです。
(sarge 公式パッケージの場合)

<span class="quote2">&gt; &gt; datadir で指定していあるディレクトリ (Debian の mysql-server なら</span>
<span class="quote2">&gt; &gt; デフォルトは /var/lib/mysql) があるなら、そいつをそのまま</span>
<span class="quote2">&gt; &gt; コピーすればバックアップになります。</span>

<span class="quote1">&gt; このデータのリストア方法は、mysqlの再インストール後、必要な</span>
<span class="quote1">&gt; データベースを作成し、その上に上書きインストールで可能なので</span>
<span class="quote1">&gt; しょうか？</span>

/var/lib/mysql が残っているなら、そのままコピーしておいて
(当然パーミッションなども維持)、mysql-server インストールして、
MySQL サーバーを停止し (`/etc/init.d/mysql stop`)、
/var/lib/mysql を削除して、バックアップを /usr/lib/mysql に
リストアして、MySQL サーバーを起動すればいいはずです。
# データ形式って前方/後方互換性ともにあるんでしたっけ?

<span class="quote1">&gt; 既に登録してあるデータを再利用できるように、mysqlをdebパッケー</span>
<span class="quote1">&gt; ジからインストールするには、どのような方法が良いのかを再質問</span>
<span class="quote1">&gt; させていただいてもよろしいでしょうか。</span>

現状で /var/lib/mysql 以下にそれっぽいデータが残っているか
確認し、すぐにバックアップをとることくらいですね。

<span class="quote1">&gt; 最後に再インストールを行おうと考えますが、何か注意点とかあり</span>
<span class="quote1">&gt; ますでしょうか。</span>

Debian と MySQL の勉強をするか、詳しい人を雇うか頼むか…。
そもそもこうなってしまった原因が何なのかも重要かと。

それと全文引用しないこと。:-p

-- 
-- Name: SATOH Fumiyasu / fumiyas @ osstech.co.jp
-- Business Home: <a href="http://www.OSSTech.co.jp">http://www.OSSTech.co.jp</a>
-- Personal Home: <a href="http://www.SFO.jp/blog/">http://www.SFO.jp/blog/</a>

</pre>
</div>
<p class="button"><a href="13542.html">[前]</a><a href="13544.html">[次]</a><a href="../list/13501-13600.html">[番号順一覧]</a><a href="../thread/13501-13600.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13540.html">  13540 2006-11-22 15:52 [&lt;xbox@xxxxxxxxxx&gt;   ] Re: [質問]突如データベース接続不能となってしまいました。</a></span>
<span class="current">-&gt;&nbsp;<a href="13543.html">  13543 2006-11-22 16:27 ┗[SATOH Fumiyasu &lt;fumi]                                       </a></span>
</pre>
</body>
</html>
