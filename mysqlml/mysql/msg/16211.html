<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:16211</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="16210.html">[前]</a><a href="16212.html">[次]</a><a href="../list/16201-16300.html">[番号順一覧]</a><a href="../thread/16201-16300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:16211
</p>
<div class="header">
<p>
From: 田口 浩 &lt;田口 浩 &lt;h-taguchi@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 25 Feb 2015 15:53:33 +0900<br>
Subject: [mysql 16211] PHP/PDOでSQLの実行時間を制限する方法<br>

</p>
</div>
<div class="body">
<pre>※個人情報保護のため、宛先を非表示（ＢＣＣ）にて送信しています。
-----------------------------------------------------

田口と申します。
（Bcc宛てで済みません。システム上の制限です）

PHP/PDOでMySQLを使っていますが、長い時間がかかるSQLを途中で止めることができません。
どなたか、方法を教えて貰えないでしょうか?

やったこと：
①PDO::ATTR_TIMEOUT で、3秒など設定する。
→ $dbh-&gt;setAttribute(PDO::ATTR_TIMEOUT, 3);が、Falseを返し、設定できない。
②set_time_limit()を設定する。
→ 効果なし。
→ set_time_limitの説明には、以下があり、SQL実行中はこの設定の効果がなさそう。
-----------------------------
関数 set_time_limit() と設定ディレクティブ max_execution_time は、
このスクリプト自体の実行時間にのみ影響を与えます。 
system() を用いたシステムコール、ストリーム操作、 データベースクエリ等の
スクリプト実行以外で発生する処理にかかった時間は スクリプトが実行される
最大時間を定義する際には含まれません。 
ただし、Windows ではこれは当てはまりません。 
-----------------------------
サーバースペック：
RedHat Linux
Apache 2.x
PHP Version 5.3.3
MySQL Client 5.1.73
PDO Driver for MySQL 5.1.73

／田口


</pre>
</div>
<p class="button"><a href="16210.html">[前]</a><a href="16212.html">[次]</a><a href="../list/16201-16300.html">[番号順一覧]</a><a href="../thread/16201-16300.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="16211.html">  16211 2015-02-25 15:53 [田口 浩 &lt;h-taguchi@x] PHP/PDOでSQLの実行時間を制限する方法    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16212.html">  16212 2015-02-25 16:56 ┗[Watanabe Tomoyuki &lt;W] RE: [mysql 16211] PHP/PDOでSQLの実行時間を制限する方法</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16213.html">  16213 2015-02-25 17:09 　┣[&lt;masaki.kuroda@xxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16215.html">  16215 2015-02-25 19:43 　┃┗[田口 浩 &lt;h-taguchi@x] RE: [mysql 16213] RE: [mysql 16211] PHP/PDOでSQLの実行時間を制限する方法</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16214.html">  16214 2015-02-25 19:40 　┗[田口 浩 &lt;h-taguchi@x] RE: [mysql 16212] RE: [mysql 16211] PHP/PDOでSQLの実行時間を制限する方法</a></span>
</pre>


</body></html>