<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4484</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4483">[前]</a><a href="4485">[次]</a><a href="../list/4401-4500">[番号順一覧]</a><a href="../thread/4401-4500">[スレッド一覧]</a></p>
<p class="id">
mysql:4484
</p>
<div class="header">
<p>
From: &quot;f.t&quot; &lt;&quot;f.t&quot; &lt;fujiyama@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 15 Oct 2001 12:28:29 +0900<br>
Subject: [mysql 04484] Re: imode の機種の判定<br>

</p>
</div>
<div class="body">
<pre>
fujiyamaです。

On Sat, 13 Oct 2001 17:17:08 +0900
楠吉彦 &lt;moredebu@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; 質問　imode からのアクセスを振り分けたいのですが</span>
<span class="quote1">&gt; imode はスクリプトは動かないし、metaも使えないので</span>
<span class="quote1">&gt; 表示だけしていますが何か方法はないでしょうか。</span>
<span class="quote1">&gt; strrpos の戻り値はint だと思うのですが下のように</span>
<span class="quote1">&gt; 0が戻ってきます。このような評価式でいいのでしょうか</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; &lt;?php</span>
<span class="quote1">&gt; $gev =getenv(HTTP_USER_AGENT);</span>
<span class="quote1">&gt; echo &quot;$gev&quot;;</span>
<span class="quote1">&gt; $iMode = strrpos($gev,&quot;DoCoMo&quot;);</span>
<span class="quote1">&gt; echo &quot; i  は $iMode&quot;;</span>
<span class="quote1">&gt; if ($iMode != '0') {</span>
<span class="quote1">&gt; //PC用URL</span>
<span class="quote1">&gt;   echo &quot;&lt;META HTTP-EQUIV=\&quot;REFRESH\&quot;CONTENT=\&quot;1;URL=<a href="http://www.my-drug.c">http://www.my-drug.c</a></span>
<span class="quote1">&gt; om/xxx_pc.php3\&quot;&gt; &quot;;</span>
<span class="quote1">&gt; } else {</span>
<span class="quote1">&gt; //i-mode用URL</span>
<span class="quote1">&gt;    echo &quot;&lt;a href=\&quot;<a href="http://www.my-drug.com/xxx_i.php3">http://www.my-drug.com/xxx_i.php3</a>\&quot;&gt;go&lt;/a&gt;&quot;;</span>
<span class="quote1">&gt; }</span>
<span class="quote1">&gt; ?&gt;</span>

完全にPHPな話題かと思いますが...
→PHPメーリングリスト：<a href="http://ns1.php.gr.jp/ml.html">http://ns1.php.gr.jp/ml.html</a>

なお、
・strrpos()では文字の先頭は０なので、上記の例で$env=&quot;Dxxxx&quot;ならば返り値
は０です。
・HTTP_USER_AGENTでどんな値があるかは完全には把握していませんが、上記の
条件式だと$env=&quot;Docomo-modoki&quot;とか&quot;Data-center&quot;とかでもi-mode用の処理が
行われます。getenv(HTTP_USER_AGENT)で他に先頭がDではじまる値が返ってこな
いなら問題ないですが。
・他のページにとばすならheader(Location:〜)の方が普通かなと思います（何
か一部のi-modeでは不具合があるという噂もありますが...）


-- よろしくお願いします
f.t &lt;fujiyama@xxxxxxxxxx&gt;


</pre>
</div>
<p class="button"><a href="4483">[前]</a><a href="4485">[次]</a><a href="../list/4401-4500">[番号順一覧]</a><a href="../thread/4401-4500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="4483">   4483 2001-10-13 17:17 [楠吉彦 &lt;moredebu@xxx] imode の機種の判定                      </a></span>
<span class="current">-&gt;&nbsp;<a href="4484">   4484 2001-10-15 12:28 ┗[&quot;f.t&quot; &lt;fujiyama@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4485">   4485 2001-10-15 13:04 　┗[楠吉彦 &lt;moredebu@xxx]                                     </a></span>
</pre>
</body>
</html>
