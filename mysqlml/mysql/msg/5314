<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5314</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="5313">[前]</a><a href="5315">[次]</a><a href="../list/5301-5400">[番号順一覧]</a><a href="../thread/5301-5400">[スレッド一覧]</a></p>
<p class="id">
mysql:5314
</p>
<div class="header">
<p>
From: &quot;KAWAI,Takanori&quot; &lt;&quot;KAWAI,Takanori&quot; &lt;GCD00051@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 5 Apr 2002 04:52:15 +0900<br>
Subject: [mysql 05314] Re: 画像ファイルのインサート<br>

</p>
</div>
<div class="body">
<pre>
川合孝典です。

----- Original Message -----
From: &quot;Tybalt of Capulet&quot; &lt;ice-man@xxxxxxxxxx&gt;
To: &lt;ml@xxxxxxxxxx&gt;
Sent: Friday, April 05, 2002 12:54 AM
Subject: <a href="05313">[mysql 05313]</a> 画像ファイルのインサート


<span class="quote1">&gt; 神崎です。</span>
（中略）
<span class="quote1">&gt; このような感じなのですが上記のSQL文を実行しても全くインサートされません。</span>
<span class="quote1">&gt; REPLACEをINSERTに変えても同じでした。</span>
<span class="quote1">&gt; 更に$photo_bの変数にはちゃんとバイナリファイルが格納されており、</span>
<span class="quote1">&gt; $photo_bをtest.jpgとしてファイルに書き出すと問題なく書き出され</span>
<span class="quote1">&gt; test.jpgを表示できました。</span>
<span class="quote1">&gt; ということはインサート文でこけているか、テーブルの作り方がいけないような</span>
<span class="quote1">&gt; きがするのですがPerlではこのテーブル定義で問題なかったのでなにが</span>
<span class="quote1">&gt; いけないのかがわかりません。</span>
まずは
echo mysql_errno().&quot;: &quot;.mysql_error().&quot;&lt;BR&gt;&quot;;
とでもいれて、エラーが何かを確認されては？

また「Perlではこのテーブル定義で問題なかった」とのことですが、
<span class="quote1">&gt; &quot;REPLACE INTO tmp_img (id,photoimg) VALUES ('1','$photo_b')&quot;</span>
といった具合にバイナリの直値を埋め込んでうまくいくとは
考えにくいんのですが。quoteしてから入れるなり、プレースホルダを
使っていたりということはないですか？
PHPだとどんな風にエスケープすればいいのか知りませんけど
（mysql_escape_stringとかあるけど、使ったこと無いので）

===================================================
川合 孝典 (Hippo2000)
   DBI日本語メーリングリスト管理人、Kansai.pm所属
   kwitknr@xxxxxxxxxx GCD00051@xxxxxxxxxx
   <a href="http://member.nifty.ne.jp/hippo2000">http://member.nifty.ne.jp/hippo2000</a>
   <a href="http://www.hippo2000.info/">http://www.hippo2000.info/</a>
「Perlを256倍使うための本　DBI編」　発売中
<a href="http://member.nifty.ne.jp/hippo2000/p256dbi/p256dbi.htm">http://member.nifty.ne.jp/hippo2000/p256dbi/p256dbi.htm</a>
===================================================


</pre>
</div>
<p class="button"><a href="5313">[前]</a><a href="5315">[次]</a><a href="../list/5301-5400">[番号順一覧]</a><a href="../thread/5301-5400">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="5313">   5313 2002-04-05 00:54 [Tybalt of Capulet &lt;i] 画像ファイルのインサート                </a></span>
<span class="current">-&gt;&nbsp;<a href="5314">   5314 2002-04-05 04:52 ┣[&quot;KAWAI,Takanori&quot; &lt;GC]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5315">   5315 2002-04-05 11:49 ┗[&quot;SADB MIYATSU&quot; &lt;mid@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5316">   5316 2002-04-05 12:24 　┗[Tybalt of Capulet &lt;i]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5325">   5325 2002-04-06 08:19 　　┗[&quot;KAWAI,Takanori&quot; &lt;GC]                                   </a></span>
</pre>
</body>
</html>
