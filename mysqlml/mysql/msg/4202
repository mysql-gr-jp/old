<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4202</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4201">[前]</a><a href="4203">[次]</a><a href="../list/4201-4300">[番号順一覧]</a><a href="../thread/4201-4300">[スレッド一覧]</a></p>
<p class="id">
mysql:4202
</p>
<div class="header">
<p>
From: とみたまさひろ &lt;とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 25 Aug 2001 18:06:37 +0900<br>
Subject: [mysql 04202] Re: Ruby から使えない<br>

</p>
</div>
<div class="body">
<pre>
とみたです。

On Thu, 23 Aug 2001 19:17:57 +0900
e-oohira &lt;e-oohira@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; 原因は、どうも</span>
<span class="quote1">&gt; libmysqlclient.soがないからのようですが、パッケージからインストー</span>
<span class="quote1">&gt; ルしたためか、libmysqlclient.soがどこにもありません。</span>
<span class="quote1">&gt; （libmysqlclient.a はある）</span>

Solaris の MySQL パッケージがどうなっているか良くしりませんが、Linux の
RPM だと MySQL-shared というパッケージが本体とは別になっていて、そっちに
libmysqlclient.so が入っているようです。

<span class="quote1">&gt; bash-2.03# pwd</span>
<span class="quote1">&gt; /space/src/mysql-ruby-2.3.2a</span>
<span class="quote1">&gt; bash-2.03# ruby extconf.rb </span>
<span class="quote1">&gt; creating Makefile</span>
<span class="quote1">&gt; bash-2.03# make</span>
<span class="quote1">&gt; bash-2.03# ruby -I. test.rb sparc.kumage-h.ed.jp</span>
<span class="quote1">&gt; test.rb:11:in `require': ld.so.1: ruby: 重大なエラー: 再配置エラ</span>
<span class="quote1">&gt; ー: ファイル ./mysql.so: シンボル inet_addr: 参照シンボルが見つか</span>
<span class="quote1">&gt; りません。 - ./mysql.so (LoadError)</span>
<span class="quote1">&gt;         from test.rb:11</span>

libmysqlclient.a が必要としているライブラリがあって、それがリンクされて
いないからだと思います。

man inet_addr とすると、必要なライブラリも記述されていると思います。

# ネットワーク関係のライブラリは -lnsl だったかなぁ…。Solaris で開発しなく
# なって久しいので忘れてしまった…。

もしかしたら、他にも -lm とか -lz とかも必要かもしれません。

<span class="quote1">&gt; なお、（別の問題として）ソースからMySQLをコンパイルしようとする</span>
<span class="quote1">&gt; と、</span>
<span class="quote1">&gt; configure時にエラーをはきます。</span>
	〜〜
<span class="quote1">&gt; checking for c++... (cached) c++</span>
<span class="quote1">&gt; checking whether the C++ compiler (c++   ) works... yes</span>
<span class="quote1">&gt; checking whether the C++ compiler (c++   ) is a cross-compiler...</span>
<span class="quote1">&gt; yes</span>
	〜〜
<span class="quote1">&gt; checking return type of sprintf... configure: error: can not run</span>
<span class="quote1">&gt; test program while cross compiling</span>

なんか c++ がクロスコンパイラだと思われているみたいですね…。
それが原因かどうかはわかりませんが、とりあえず c++ じゃなくて gcc を
使ってコンパイルしてみてはいかがでしょうか。

	% env CXX=gcc ./configure 〜〜

--
とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;
日本MySQLユーザ会 <a href="../../../index.html">http://www.mysql.gr.jp</a>

</pre>
</div>
<p class="button"><a href="4201">[前]</a><a href="4203">[次]</a><a href="../list/4201-4300">[番号順一覧]</a><a href="../thread/4201-4300">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="4192">   4192 2001-08-23 19:17 [e-oohira &lt;e-oohira@x] Ruby から使えない                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4198">   4198 2001-08-24 12:19 ┣[&lt;makikuchi@xxxxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4199">   4199 2001-08-24 12:36 ┣[Hiroki TANIKAWA &lt;hir]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="4202">   4202 2001-08-25 18:06 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
</pre>
</body>
</html>
