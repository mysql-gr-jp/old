<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9476</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="9475">[前]</a><a href="9477">[次]</a><a href="../list/9401-9500">[番号順一覧]</a><a href="../thread/9401-9500">[スレッド一覧]</a></p>
<p class="id">
mysql:9476
</p>
<div class="header">
<p>
From: ML account &lt;ML account &lt;ml@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 30 May 2004 11:33:53 +0900<br>
Subject: [mysql 09476] Re: ある値の最も近い周辺値を抜き出す場合、インデックスは使われる？<br>

</p>
</div>
<div class="body">
<pre>
　こんにちは。

OHTSUKA Ko-hei &lt;techml@xxxxxxxxxx&gt;さんの
&lt;20040530090016.3604.TECHML@xxxxxxxxxx&gt;
&quot;<a href="09474">[mysql 09474]</a> ある値の最も近い周辺値を抜き出す場合、インデックスは使われる？&quot;


<span class="quote1">&gt; あるテーブルfooのあるフィールドhogeにインデックスを張っている</span>
<span class="quote1">&gt; としまして、その中である値(例えば200)と比較してもっとも近い値を</span>
<span class="quote1">&gt; 10抜き出す、等とした場合、これまで何気なく</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SELECT hoge FROM foo ORDER BY ABS(200 - hoge) LIMIT 10;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 的な感じでやってたんですが、もしかしてこれだとインデックス</span>
<span class="quote1">&gt; 使われなくて全件参照して比較計算されてしまうんでしょうか。</span>
<span class="quote1">&gt; (というかExplainSQLで使われない事自体は確認したのですが)</span>

　インデックス(の中身)は変動しない静的な情報ですね。ある値との差の絶対値
の「ある値」が静的なものであれば、ある値との差の絶対値のフィールドを設け、
それにインデックスを張れば良いでしょう。

　「ある値」が外部から与えられる変動するものであれば、ある値との差の絶対
値も変動する動的なものでしょう。静的な値が格納されているインデックスから
動的な値を検索しようとする事に無理があると思います。



　　　　松枝知直　　　　&lt;tomom@xxxxxxxxxx&gt;
　　　　　　　　　　　　<a href="http://www.argus.ne.jp/~tomom/">http://www.argus.ne.jp/~tomom/</a>



</pre>
</div>
<p class="button"><a href="9475">[前]</a><a href="9477">[次]</a><a href="../list/9401-9500">[番号順一覧]</a><a href="../thread/9401-9500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="9474">   9474 2004-05-30 09:25 [OHTSUKA Ko-hei &lt;tech] ある値の最も近い周辺値を抜き出す場合、インデックスは使われる？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9475">   9475 2004-05-30 10:39 ┣[OHTSUKA Ko-hei &lt;tech]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="9476">   9476 2004-05-30 11:33 ┗[ML account &lt;ml@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9477">   9477 2004-05-30 11:53 　┗[OHTSUKA Ko-hei &lt;tech]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9478">   9478 2004-05-30 13:35 　　┗[ML account &lt;ml@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9481">   9481 2004-05-31 12:15 　　　┗[OHTSUKA Ko-hei &lt;tech]                                 </a></span>
</pre>
</body>
</html>
