<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11218</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="11217">[前]</a><a href="11219">[次]</a><a href="../list/11201-11300">[番号順一覧]</a><a href="../thread/11201-11300">[スレッド一覧]</a></p>
<p class="id">
mysql:11218
</p>
<div class="header">
<p>
From: Toshinori Kawai &lt;Toshinori Kawai &lt;zan43621@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 20 Mar 2005 18:55:05 +0900<br>
Subject: [mysql 11218] Re: 【自己解決】 MYSQL4.1.9をアンインストールし、MYSQL4.0.23をインストールしたときの状況<br>

</p>
</div>
<div class="body">
<pre>
河合と申します。
お世話になっております。
以前から質問していた、MYSQL4.1.9をアンインストールし、MYSQL4.0.23をイン
ストールしたときに正常に設定できない件ですが、いろいろ試みて解決しました。

１．レジストリエディタを開きHKEYLOCALMACHINE\SOFTWARE内にMYSQL4.1.9のレ
ジストリが残っていたので削除しました。（OSを再起動しました）

２．MYSQLサービスがスタートアップ時に「自動」になっていましたが、「無効
」にしました。

３．MYSQL4.0.23を一旦、OSの「アプリケーションの追加と削除」メニューから
削除しました。

４．MYSQL4.0.23のバイナリ版を再インストールしました。

５．winmysqladminツールを起動し、my.iniメニューを開き、画面左下の「save
mode・・・・」ボタンをクリックしました。

６．かねやんmysqladminツールでrootユーザでログインし、ログオンに成功しま
した。

いろいろとありがとうございました。

On Fri, 18 Mar 2005 17:28:38 +0900
Toshinori Kawai &lt;kawai@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; 河合と申します。</span>
<span class="quote1">&gt; 以前よりお世話になっております。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 結構昔の話なのですが・・・</span>
<span class="quote1">&gt; 現在の状況を・・・・。</span>
<span class="quote1">&gt; 以下の現象の件で「mysqld --print-defaults」を調べようと試みたのですが、</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; こういう現象になりました。</span>
<span class="quote1">&gt; DOSプロンプト上では、</span>
<span class="quote1">&gt; --basedir=C:/mysql </span>
<span class="quote1">&gt; --datadir=c:/mysql/data </span>
<span class="quote1">&gt; --datadir=C:/mysql/data </span>
<span class="quote1">&gt; --language=japanese </span>
<span class="quote1">&gt; --default-character-set=ujis </span>
<span class="quote1">&gt; というパラメータが出力されました。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; その後、OSのMysqlサービスが強制終了されました（予告もなく）。</span>
<span class="quote1">&gt; OSのイベントログを確認してみたのですが、</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ・MySql: 'host.MYI' ・ユ・。・、・・ウォ、ッサ、ャ、ヌ、ュ、″、サ、・(errno: 142)</span>
<span class="quote1">&gt; というログ、</span>
<span class="quote1">&gt; ・Fatal error: Can't open privilege tables: File 'C:\mysql\share\charsets\?.conf' not found (Errcode: 22)</span>
<span class="quote1">&gt; というログ、</span>
<span class="quote1">&gt; ・MySql: Shutdown エーホサ</span>
<span class="quote1">&gt; というログの３つが出力されました。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ちなみにOSはWindowsXP ServicePack2を使用しています。</span>
<span class="quote1">&gt; たしかにMYSQL4.1.9の「何か」の設定は残っていそうですが、これらの情報でわ</span>
<span class="quote1">&gt; かることってありますか？</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; あと、OSの再インストールだけは避けたいので・・・・。</span>
<span class="quote1">&gt; よろしくお願いいたします。</span>
<span class="quote1">&gt; </span>
<span class="quote3">&gt; &gt; &gt; １．現象１</span>
<span class="quote3">&gt; &gt; &gt; </span>
<span class="quote3">&gt; &gt; &gt; MYSQL4.1.9をアンインストールし、MYSQL4.0.23をインスト</span>
<span class="quote2">&gt; &gt; ール。</span>
<span class="quote3">&gt; &gt; &gt; 設定し終え、MYSQLサービスを立ち上げようとすると、</span>
<span class="quote3">&gt; &gt; &gt; 「システムエラーが発生しました。　システムエラー　1067</span>
<span class="quote2">&gt; &gt; が発生しました。　</span>
<span class="quote3">&gt; &gt; &gt; プロセスを途中で強制終了しました」</span>
<span class="quote3">&gt; &gt; &gt; となる。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; ver4.1.9を使用していたときの設定が残っていたりしませんか</span>
<span class="quote2">&gt; &gt; ？</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; インストール/アンインストールを繰り返した場合、</span>
<span class="quote2">&gt; &gt; basedirやdatadirの設定が実は残っていてそれで</span>
<span class="quote2">&gt; &gt; 起動に失敗するというケースがあります。</span>
<span class="quote2">&gt; &gt; （古い設定情報に基づいたパスにはmysqlが無い）</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; まずは、</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; prompt&gt; mysqld --print-defaults</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; などで起動時にどういったパラメータを使用しているか</span>
<span class="quote2">&gt; &gt; 確認されるのが良いと思います。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; また、Windowsのサービスで起動する場合には、サービスの</span>
<span class="quote2">&gt; &gt; プロパティ→全般→実行ファイルのパス、のところで、</span>
<span class="quote2">&gt; &gt; --defaults-file=### が指定されている場合がありますので</span>
<span class="quote2">&gt; &gt; （インストーラを使用した場合）、そこで指定されている</span>
<span class="quote2">&gt; &gt; my.iniの設定も確認する必要があります。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; --defaults-fileが指定されると、C:\my.ini等は読まれません</span>
<span class="quote2">&gt; &gt; 。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>

**********************************
　         河合　俊典
**********************************


</pre>
</div>
<p class="button"><a href="11217">[前]</a><a href="11219">[次]</a><a href="../list/11201-11300">[番号順一覧]</a><a href="../thread/11201-11300">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="11150">  11150 2005-03-10 23:42 [Toshinori Kawai &lt;zan] マルチ質問                              </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11151">  11151 2005-03-11 00:23 ┣[Manabu Kobayashi &lt;ma] Re: [mysql 11150] マルチ質問          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11152">  11152 2005-03-11 09:38 ┣[Tetsuro Ikeda &lt;ikdtt]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11191">  11191 2005-03-18 17:28 ┃┗[Toshinori Kawai &lt;kaw] MYSQL4.1.9をアンインストールし、MYSQL4.0.23をインストールしたときの状況</a></span>
<span class="current">-&gt;&nbsp;<a href="11218">  11218 2005-03-20 18:55 ┃　┗[Toshinori Kawai &lt;zan] Re: 【自己解決】 MYSQL4.1.9をアンインストールし、MYSQL4.0.23をインストールしたときの状況</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11153">  11153 2005-03-11 10:03 ┗[&quot;kondo kondo&quot; &lt;umius]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11154">  11154 2005-03-12 01:28 　┗[&quot;Takashi Hoshizawa&quot; ] MySQLを使ったフリーのサーチエンジン </a></span>
</pre>
</body>
</html>
