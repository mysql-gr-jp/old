<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3846</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="3845">[前]</a><a href="3847">[次]</a><a href="../list/3801-3900">[番号順一覧]</a><a href="../thread/3801-3900">[スレッド一覧]</a></p>
<p class="id">
mysql:3846
</p>
<div class="header">
<p>
From: TSUTSUMI Thoru &lt;TSUTSUMI Thoru &lt;tutumi@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 27 Jun 2001 19:31:42 +0900<br>
Subject: [mysql 03846] Re: update した件数をカウントしたい。<br>

</p>
</div>
<div class="body">
<pre>
堤と申します。はじめまして。

// Wed, 27 Jun 2001 19:00:24 //
// <a href="03845">[mysql 03845]</a> update した件数をカウントしたい。 //
// MAO &lt;mao@xxxxxxxxxx&gt;さん // 曰く:

<span class="quote1">&gt;にしかわともうします。</span>
こんばんわ。

<span class="quote1">&gt;現在、Linux上でMYSQL+DBI+Perlでプログラムを組んでいます。</span>
<span class="quote1">&gt;上記の場合、マッチしたのが1件で変更したのが、1件とわかるのですが、</span>
<span class="quote1">&gt;Perl上でその値を取得する場合はどのようにすればいいのでしょうか？</span>

こんな感じでやると $rv に件数が戻り値として返ってくると思います。

#SQL構文設定 
 $stmt = &quot;update tbl_a set serial = 2 where uid = 1&quot;;
# 準備したSQL構文をデータベース上で実行
 $rv = $dbh-&gt;do($stmt) || die &quot;Cantprepare. Because of $DBI::errstr&quot;;


# updateの場合prepareよりdoの方が$sth-&gt;finish とかする必要がなくてオトクな感じです。


ヒットしなかった場合は'0E0'が返るようなので以下のように処理したりしています。
if ($rv ne '0E0') {
	…
}

環境はこんな感じです。
SunOS	5.6
MySQL	3.22.30
Perl	5.005_03 built for sun4-solaris

--
堤 徹: tutumi@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="3845">[前]</a><a href="3847">[次]</a><a href="../list/3801-3900">[番号順一覧]</a><a href="../thread/3801-3900">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="3845">   3845 2001-06-27 19:00 [MAO &lt;mao@xxxxxxxxxx&gt;] update した件数をカウントしたい。       </a></span>
<span class="current">-&gt;&nbsp;<a href="3846">   3846 2001-06-27 19:31 ┗[TSUTSUMI Thoru &lt;tutu]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3848">   3848 2001-06-27 22:41 　┗[MAO &lt;mao@xxxxxxxxxx&gt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3852">   3852 2001-06-28 10:31 　　┣[TSUTSUMI Thoru &lt;tutu]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3856">   3856 2001-06-28 12:17 　　┃┗[&quot;Kawai,Takanori&quot; &lt;GC]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3853">   3853 2001-06-28 11:02 　　┗[Akihiko Shinohara &lt;s]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3857">   3857 2001-06-28 12:31 　　　┗[&quot;Kawai,Takanori&quot; &lt;GC]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3860">   3860 2001-06-28 16:46 　　　　┗[MAO &lt;mao@xxxxxxxxxx&gt;]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3861">   3861 2001-06-28 17:36 　　　　　┗[TSUTSUMI Thoru &lt;tutu]                             </a></span>
</pre>
</body>
</html>
