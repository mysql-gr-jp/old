<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:7600</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="7599">[前]</a><a href="7601">[次]</a><a href="../list/7501-7600">[番号順一覧]</a><a href="../thread/7501-7600">[スレッド一覧]</a></p>
<p class="id">
mysql:7600
</p>
<div class="header">
<p>
From: &quot;KAWAI,Takanori&quot; &lt;&quot;KAWAI,Takanori&quot; &lt;GCD00051@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 26 Apr 2003 23:42:39 +0900<br>
Subject: [mysql 07600] Re: クォーテーションの扱いについて<br>

</p>
</div>
<div class="body">
<pre>
川合孝典です。

----- Original Message -----
From: &quot;aimitsu katoh&quot; &lt;akimitsu@xxxxxxxxxx&gt;
To: &lt;ml@xxxxxxxxxx&gt;
Sent: Friday, April 25, 2003 8:21 PM
Subject: <a href="07596">[mysql 07596]</a> クォーテーションの扱いについて


<span class="quote1">&gt; katohです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; Perl+DBI+MySQL+HTMLでCGIプログラムを制作しているのですが、</span>
<span class="quote1">&gt; クォーテーション【&quot;】の扱いについて質問します。</span>
<span class="quote1">&gt; 今 PerlでデータベースにINSERTする時は次のように記述しています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ##### (データベースへはconnect済み、エラー処理は記述していません)</span>
<span class="quote1">&gt; $no=150; $text='text_text';</span>
<span class="quote1">&gt; $sql=qq{INSERT tb_A SET id_no=$no,user_name=&quot;$text&quot;};</span>
<span class="quote1">&gt; $sth = $dbh-&gt;prepare($sql);</span>
<span class="quote1">&gt; $rt_value=$sth-&gt;execute();</span>
<span class="quote1">&gt; #####</span>
(以下略）
&quot;&quot;じゃなくて、シングルクォートで囲んで
 $text='Kawai &quot;Hippo2000&quot; Takanori';
 $dbh-&gt;do(qq{INSERT tb_A SET id_no=$no, user_name='$text'});
みたいにするというのは新たに「シングルクォートが入っているとき」の
対応が必要になるわけですが...
quoteというメソッドがありますから

  $text=$dbh-&gt;quote('Kawai &quot;Hippo2000&quot; Takanori');
  $dbh-&gt;do(qq{INSERT tb_A SET id_no=$no, user_name=&quot;$text&quot;});

とすることもできます。
ただし、どっちがよいかといえばプレースホルダを利用する菅原さんの
方法のほうがよいかと思います。

PS.
ついでに、どうもmyが見当たらないのですが、DBIではuse strict;を
利用することは&quot;strongly recommended&quot;です。
きちんと変数を宣言して利用することを強くお勧めします。

===================================================
川合 孝典 (Hippo2000)
   DBI日本語メーリングリスト管理人、Kansai.pm所属
   kwitknr@xxxxxxxxxx GCD00051@xxxxxxxxxx
   <a href="http://member.nifty.ne.jp/hippo2000">http://member.nifty.ne.jp/hippo2000</a>、<a href="http://www.hippo2000.info/">http://www.hippo2000.info/</a>
perldocの日本語化ならperldocjp：翻訳してみませんか？
  <a href="http://sourceforge.jp/projects/perldocjp">http://sourceforge.jp/projects/perldocjp</a>
===================================================


</pre>
</div>
<p class="button"><a href="7599">[前]</a><a href="7601">[次]</a><a href="../list/7501-7600">[番号順一覧]</a><a href="../thread/7501-7600">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="7596">   7596 2003-04-25 20:21 [aimitsu katoh &lt;akimi] クォーテーションの扱いについて          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7597">   7597 2003-04-25 20:45 ┣[SUGAWARA Hajime &lt;sug]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7598">   7598 2003-04-25 23:03 ┃┣[とみたまさひろ &lt;tomm]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7605">   7605 2003-04-28 11:17 ┃┃┗[SUGAWARA Hajime &lt;sug]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7599">   7599 2003-04-26 17:06 ┃┗[Katoh Akimitsu &lt;akim]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="7600">   7600 2003-04-26 23:42 ┗[&quot;KAWAI,Takanori&quot; &lt;GC]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7602">   7602 2003-04-27 05:28 　┗[Katoh Akimitsu &lt;akim]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7603">   7603 2003-04-27 09:16 　　┗[&quot;KAWAI,Takanori&quot; &lt;GC]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7604">   7604 2003-04-27 16:12 　　　┗[Katoh Akimitsu &lt;akim]                                 </a></span>
</pre>
</body>
</html>
