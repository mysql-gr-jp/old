<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13368</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13367">[前]</a><a href="13369">[次]</a><a href="../list/13301-13400">[番号順一覧]</a><a href="../thread/13301-13400">[スレッド一覧]</a></p>
<p class="id">
mysql:13368
</p>
<div class="header">
<p>
From: &lt;hata@xxxxxxxxxx&gt;<br>
Date: Wed, 20 Sep 2006 16:13:12 +0900<br>
Subject: [mysql 13368] Re: 最善の検索方法を教えて下さい<br>

</p>
</div>
<div class="body">
<pre>
こんにちは

ツリー型式の掲示板で、最新の発言を含むツリーから順にN件表示したい。
というパターンであれば項目を１つ追加すればシンプル＆高速に出来ます。
num1,num2が一度決まれば更新されない、と言う条件ですが。

項目num0 を作り、そこに一番親の番号を入れます。MySQL4.0ではトリガが使えないの
で、プログラム側で、
・新規レコード作成時には、自分のnum1をコピー
・子レコードとして追加時には親レコードのnum1をコピー
するようにします。するとデータは下表の様になりますから、後は簡単ですね。
+------+------+------+-----+
<span class="quote1">| num0 | num1 | num2 | sub |</span>
+------+------+------+-----+
<span class="quote1">| 1111 | 1111 |      |  A  |</span>
<span class="quote1">| 2222 | 2222 |      |  B  |</span>
<span class="quote1">| 1111 | 3333 | 1111 |  C  |</span>
<span class="quote1">| 2222 | 4444 | 2222 |  D  |</span>
<span class="quote1">| 1111 | 5555 | 3333 |  E  |</span>
<span class="quote1">| 1111 | 6666 | 3333 |  F  |</span>
+------+------+------+-----+



hata

</pre>
</div>
<p class="button"><a href="13367">[前]</a><a href="13369">[次]</a><a href="../list/13301-13400">[番号順一覧]</a><a href="../thread/13301-13400">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13365">  13365 2006-09-20 15:24 [&quot;megu&quot; &lt;samplemailse] 最善の検索方法を教えて下さい            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13366">  13366 2006-09-20 15:46 ┣[&quot;GotouYutaka&quot; &lt;yu.go]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13367">  13367 2006-09-20 16:00 ┃┗[&quot;megu&quot; &lt;samplemailse]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="13368">  13368 2006-09-20 16:13 ┗[&lt;hata@xxxxxxxxxx&gt;   ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13369">  13369 2006-09-20 16:17 　┣[&lt;hata@xxxxxxxxxx&gt;   ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13370">  13370 2006-09-20 17:19 　┗[&quot;megu&quot; &lt;samplemailse]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13372">  13372 2006-09-21 08:59 　　┗[&lt;hata@xxxxxxxxxx&gt;   ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13373">  13373 2006-09-21 09:31 　　　┗[&quot;megu&quot; &lt;samplemailse]                                 </a></span>
</pre>
</body>
</html>
