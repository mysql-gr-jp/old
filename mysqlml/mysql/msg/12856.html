<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12856</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="12855.html">[前]</a><a href="12857.html">[次]</a><a href="../list/12801-12900.html">[番号順一覧]</a><a href="../thread/12801-12900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:12856
</p>
<div class="header">
<p>
From: &quot;大野博子&quot; &lt;&quot;大野博子&quot; &lt;h-ohno@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 13 Mar 2006 20:05:07 +0900<br>
Subject: [mysql 12856] Re: mysql 3.23.58 + php   で結合クエリ実行時にLost connectionのエラー<br>

</p>
</div>
<div class="body">
<pre>
大野です。

アドバイスありがとうございます。
さっそくmysql-4.1.18でやってみました。

PHPのプログラムを動かすところまではうまくいったのですが、
mysql_queryの結果がなぜか文字化けしまくりでした。
日本語SQLは通ります。

my.cnf でujisを指定し、
PHPのmysql_client_encodingの結果もujisになっています。

スクリプト内で
mysql_query(&quot;SET NAMES 'ujis'&quot;, $db);
mysql_query(&quot;SET CHARACTER SET ujis&quot;, $db);
を指定しています。

コンソールからやると日本語もうまく表示されるのですが、
mysql_fetch_arrayなどはアウトです。
表記とは別の問題だとおもいますが、解決方法をご存知の方はご教授ください。

このような状態ですが、やはり
MYSQL 2013:Lost connection to MySQL server during query
は出ています。
（検証になってるか不明ですが。）

コンソールからの実行はできるのに、
MySQL のバグの可能性があるのですね。
データを見直したり、
設定でなんとかならないかなと思っていたのですが。


<span class="quote1">&gt; -----Original Message-----</span>
<span class="quote1">&gt; From: とみたまさひろ [mailto:tommy@xxxxxxxxxx]</span>
<span class="quote1">&gt; Sent: Sunday, March 12, 2006 10:56 PM</span>
<span class="quote1">&gt; To: ml@xxxxxxxxxx</span>
<span class="quote1">&gt; Subject: <a href="12853.html">[mysql 12853]</a> Re: mysql 3.23.58 + php で結合クエリ実行時にLost</span>
<span class="quote1">&gt; connectionのエラー</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; とみたです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; On Sun, 12 Mar 2006 19:30:25 +0900</span>
<span class="quote1">&gt; &quot;大野博子&quot; &lt;h-ohno@xxxxxxxxxx&gt; wrote:</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt; &gt; MYSQLにデータを追加したところ、</span>
<span class="quote2">&gt; &gt; PHPを使った検索システムのMYSQLクエリ実行時に、</span>
<span class="quote2">&gt; &gt; 下記のエラーが出て、MYSQLが落ちるという障害に悩んでおります。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; MYSQL 2013:Lost connection to MySQL server during query</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; なにかご存じなかたがいらっしゃいましたら、</span>
<span class="quote2">&gt; &gt; どんなことでもかまいませんのでご教授願えませんでしょうか。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; −−−−−−−−−−−</span>
<span class="quote2">&gt; &gt; ●環境：</span>
<span class="quote2">&gt; &gt; FreeBSD 4.10</span>
<span class="quote2">&gt; &gt; php 4.3.10</span>
<span class="quote2">&gt; &gt; mysql 3.23.58　（mysql-4.1にあげてみたのですが解決せず戻しました）</span>
<span class="quote1">&gt;         〜〜</span>
<span class="quote2">&gt; &gt; mysqld got signal 11;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; SIGSEGV で MySQL サーバが落ちてますね…。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; MySQL はソースからコンパイルしたものでしょうか。もしそうだとしたら、</span>
<span class="quote1">&gt; <a href="http://dev.mysql.com/downloads/mysql/4.1.html">http://dev.mysql.com/downloads/mysql/4.1.html</a> で配布されているバイナリ</span>
<span class="quote1">&gt; 版でもおなじことが起きるでしょうか。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; バイナリ配布版の 4.1.x でも同じ現象であれば MySQL のバグだと思いますの</span>
<span class="quote1">&gt; で、バグレポートをあげた方がいいと思います。再現できるデータを提示する</span>
<span class="quote1">&gt; ことができないと、厳しいかもしれませんが…。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; --</span>
<span class="quote1">&gt; とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt; 日本MySQLユーザ会 <a href="../../../index.html">http://www.mysql.gr.jp</a></span>
<span class="quote1">&gt;</span>


</pre>
</div>
<p class="button"><a href="12855.html">[前]</a><a href="12857.html">[次]</a><a href="../list/12801-12900.html">[番号順一覧]</a><a href="../thread/12801-12900.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="12851.html">  12851 2006-03-12 19:30 [&quot;大野博子&quot; &lt;h-ohno@x] mysql 3.23.58 + php  で結合クエリ実行時にLost connectionのエラー</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12853.html">  12853 2006-03-12 22:55 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="12856.html">  12856 2006-03-13 20:05 　┗[&quot;大野博子&quot; &lt;h-ohno@x]                                     </a></span>
</pre>
</body>
</html>
