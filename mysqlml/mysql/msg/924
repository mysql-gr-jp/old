<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:924</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="923">[前]</a><a href="925">[次]</a><a href="../list/901-1000">[番号順一覧]</a><a href="../thread/901-1000">[スレッド一覧]</a></p>
<p class="id">
mysql:924
</p>
<div class="header">
<p>
From: &quot;Satoshi Koiwa&quot; &lt;&quot;Satoshi Koiwa&quot; &lt;koiwa@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 27 May 1999 14:01:56 +0900<br>
Subject: [mysql 00924] RE:  トランザクション処理<br>

</p>
</div>
<div class="body">
<pre>
ども、ユーザ先でこっそりビジネスホンにモデムをつないでいる小岩です。今のとこ
ろ縛り首にはなっていません。

<span class="quote1">&gt;ということは、この仕組みがなければ、同時に何人かでデータベースを</span>
<span class="quote1">&gt;操作することができない、ということになるのでしょうか。</span>


たいてい大丈夫です。在庫を参照する販売処理を想定してみます。
 残在庫5個の商品をAさんが画面で在庫確認した上で4個をX社に売る販売データを入
れます。数秒遅れてBさんが残在庫5個であることを確認して3個をZ社に売る販売デー
タを入れます。画面上OKなはずなのにBさんにはエラーメッセージが返ります。
 販売すると在庫マスタの更新もするし販売履歴マスタにも登録するし顧客マスタに
も更新をする仕組みだったとします。Bさんが「登録」ボタンを押したときに販売履
歴マスタへのデータ追加と顧客マスタの更新が先に走ってしまったら、在庫引き当て
でエラーになるまえにそっちが確定してしまいます。Cさんも数秒遅れでZ社のデータ
を入れていたら復旧させるのが大変です。同様のことは、在庫マスタは問題なくて顧
客マスタに何らかの問題があったときにも当然生じます。実際にはモノが動いていな
いのにコンピュータ上の在庫が減るという、そういうやつです。

<span class="quote1">&gt;今までは、Windowsで、FileMakerをいじってきましたので（業務で</span>
<span class="quote1">&gt;使用しています）、あまり詳しいことがわかりません。お分かりの</span>
<span class="quote1">&gt;かたがいましたら、教えてください。FileMakerは、同時に多人数</span>
<span class="quote1">&gt;でデータベースをいじっても問題を生じないようになっています。</span>
<span class="quote1">&gt;確か、レコードロック機能というのだと思いましたが・・・</span>


私は基本的にMacユーザなので、昔からファイルメーカーを使っています。で、MySQL
にはテーブルをロックする機能がありますんで、その点ではファイルメーカーとほぼ
同等です。
 MySQLではプログラムを工夫すればコミット、ロールバック、排他制御が擬似的に可
能だと思います。たいていの事務処理システムでは本当にトランザクション処理が必
要な部分というのはごく限られた部分だけだと思います。たとえば顧客マスタの追加
・更新処理なんて、確かに排他制御しなければAさんが郵便番号を更新する間にBさん
が電話番号を更新しようとしてどっちかの作業が無効になってしまうということもあ
りますが、高価で高機能なOracleが使われているシステムだってこんな部分では排他
制御なんてしてないことがほとんどだと思います(私の周辺だけか?)。
 気にしない、困ったら対策する、本当にまずそうなところだけは最初から工夫をし
ておく、これでOKなんじゃないかなぁ。


</pre>
</div>
<p class="button"><a href="923">[前]</a><a href="925">[次]</a><a href="../list/901-1000">[番号順一覧]</a><a href="../thread/901-1000">[スレッド一覧]</a></p>
</body>
</html>
