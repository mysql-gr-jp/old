<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15802</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15801">[前]</a><a href="15803">[次]</a><a href="../list/15801-15900">[番号順一覧]</a><a href="../thread/15801-15900">[スレッド一覧]</a></p>
<p class="id">
mysql:15802
</p>
<div class="header">
<p>
From: yoku ts &lt;yoku ts &lt;yoku0825@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 12 Jul 2012 18:55:57 +0900<br>
Subject: [mysql 15802] Re: PHPとutf8mb4<br>

</p>
</div>
<div class="body">
<pre>
こんばんは、yokuといいます。

<span class="quote1">&gt; MySQL-shared-compat-5.5.24-1.rhel5</span>
MySQL-shared-compatは互換性を保つための過去のlibmysqlclient.soの詰め合わせです。
最新のlibmysqlclient.soはMySQL-sharedに入っています。
shared-compatが入っているので、過去のライブラリも導入されています。

php-mysqlでインストールされている.soファイルに対して
lddコマンドを試すと、どのモジュールを実際に使っているのかが見えます。

$ rpm -ql php-mysql
/etc/php.d/mysql.ini
/etc/php.d/mysqli.ini
/etc/php.d/pdo_mysql.ini
/usr/lib64/php/modules/mysql.so
/usr/lib64/php/modules/mysqli.so
/usr/lib64/php/modules/pdo_mysql.so

$ ldd /usr/lib64/php/modules/mysqli.so
..
        libmysqlclient.so.16 =&gt; /usr/lib64/libmysqlclient.so.16
(0x00007ffcc7431000)
..
私の環境ではlibmysqlclient.so.16にリンクされていました。
MySQL5.1のクライアントライブラリです。
(5.5のライブラリは.so.18)

何の解決にもならないのですが、情報まででした。


ts. yoku//

2012年7月12日 18:40 &lt;a2cf@xxxxxxxxxx&gt;:
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 藤田です。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 何度もありがとうございます。</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt; &gt; mysql コマンドと PHP の mysqli 拡張モジュールが同じライブラリとリンクしているとは限りません。</span>
<span class="quote2">&gt; &gt; そして、mysqli-&gt;set_charset() は、libmysql に charset を伝えるものなので、</span>
<span class="quote2">&gt; &gt; libmysql が古ければ新しい charset に失敗することも（多分）あります。</span>
<span class="quote2">&gt; &gt; （実際そのような状態に出くわしたことは無いですが・・・）</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;   rpm -qa | grep -i mysql</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 上記コマンドで確認したところ、やはり5.5.24のものしかないようでした。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; MySQL-shared-5.5.24-1.rhel5</span>
<span class="quote1">&gt; MySQL-server-5.5.24-1.rhel5</span>
<span class="quote1">&gt; MySQL-shared-compat-5.5.24-1.rhel5</span>
<span class="quote1">&gt; MySQL-client-5.5.24-1.rhel5</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt; &gt; PHP 自体をソースからビルドするか、mysqli 拡張モジュールだけでも</span>
<span class="quote2">&gt; &gt; ソースからビルドすれば解決するかもしれません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; やはりそれしかなさそうですか。</span>
<span class="quote1">&gt; 今回のサーバはRPMを使うというのがもともとの要求のため、ソースからのビルドは実施が難しいのですが、</span>
<span class="quote1">&gt; また時間がありましたテストしてみたいと思います。</span>
<span class="quote1">&gt; アドバイスありがとうございました。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 何とぞよろしくお願いいたします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>

</pre>
</div>
<p class="button"><a href="15801">[前]</a><a href="15803">[次]</a><a href="../list/15801-15900">[番号順一覧]</a><a href="../thread/15801-15900">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="15789">  15789 2012-07-11 15:39 [&lt;a2cf@xxxxxxxxxx&gt;   ] PHPとutf8mb4                            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15793">  15793 2012-07-12 01:35 ┗[&lt;gotou1213@xxxxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15797">  15797 2012-07-12 10:09 　┗[&lt;a2cf@xxxxxxxxxx&gt;   ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15798">  15798 2012-07-12 10:37 　　┗[&lt;gotou1213@xxxxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15799">  15799 2012-07-12 13:48 　　　┗[&lt;a2cf@xxxxxxxxxx&gt;   ]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15800">  15800 2012-07-12 17:47 　　　　┗[&lt;gotou1213@xxxxxxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15801">  15801 2012-07-12 18:40 　　　　　┗[&lt;a2cf@xxxxxxxxxx&gt;   ]                             </a></span>
<span class="current">-&gt;&nbsp;<a href="15802">  15802 2012-07-12 18:55 　　　　　　┣[yoku ts &lt;yoku0825@xx]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15805">  15805 2012-07-12 20:49 　　　　　　┃┗[&lt;a2cf@xxxxxxxxxx&gt;   ]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15806">  15806 2012-07-13 11:20 　　　　　　┃　┣[yoku ts &lt;yoku0825@xx]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15807">  15807 2012-07-13 13:38 　　　　　　┃　┃┗[&lt;a2cf@xxxxxxxxxx&gt;   ]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15808">  15808 2012-07-13 13:42 　　　　　　┃　┃　┗[yoku ts &lt;yoku0825@xx]                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15810">  15810 2012-07-13 18:04 　　　　　　┃　┗[&lt;a2cf@xxxxxxxxxx&gt;   ]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15803">  15803 2012-07-12 19:13 　　　　　　┗[Tomohiro 'Tomo-p' KA]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15804">  15804 2012-07-12 20:49 　　　　　　　┗[&lt;a2cf@xxxxxxxxxx&gt;   ]                         </a></span>
</pre>
</body>
</html>
