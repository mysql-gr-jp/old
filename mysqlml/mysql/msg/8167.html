<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8167</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="8166.html">[前]</a><a href="8168.html">[次]</a><a href="../list/8101-8200.html">[番号順一覧]</a><a href="../thread/8101-8200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8167
</p>
<div class="header">
<p>
From: きたぢま &lt;きたぢま &lt;kitajima@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 29 Aug 2003 09:10:45 +0900<br>
Subject: [mysql 08167] Re: ＭＹＳＱＬ　ＵＰＤＡＴＥで「？」を書込と「 NULL 」に化ける <br>

</p>
</div>
<div class="body">
<pre>　これは[山内]様が[03/08/28 23:46:43]に送信された、
　[<a href="08165.html">[mysql 08165]</a> ＭＹＳＱＬ　ＵＰＤＡＴＥで「？」を書込と「 NULL 」に化ける ]への返信です。
〆￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣
きたぢまです。

update bbs_db_tbl set comment = "?" where cnt=35;
                                ↑
                                ダブルクウォーテーションの問題！？
Perlでは？は正規表現の一種です。ダブルクウォーテーションだと
正規表現が有効になります。？は直前の1文字をあらわしますから、
直前の1文字が無い場合はNULLになるのでは？

アプリから
update bbs_db_tbl set comment = '?' where cnt=35;
で発行してみてください。
シングルクウォーテーションで囲むと、正規表現は無効になったはず。


※また、MySQLのSQLログをみても、ちゃんと正しいSQLになっていますか？
PerlのSQL発行直前ではわからないと思います。MySQL自身がどう解釈したか
みてみてくださいな。



山内&gt; ＭＹＳＱＬ　ＵＰＤＡＴＥで「？」を書込と「NULL」に化ける
山内&gt; 
山内&gt; 山内と申します。PERL,MYSQLでCGIを作成しています。
山内&gt; ほぼ確認テストが終わりかけているのですが、表題のトラブルで悩んでいます。
山内&gt; 
山内&gt; 
山内&gt; ■環境　mysql v1.4 for win2000,win/xp、PERL 5.0
山内&gt; ■現象
山内&gt; 　　(1)PERLアプリからｄｂ項目 commentを下記ｓｑｌでアップデート
山内&gt; 　　　　　 update bbs_db_tbl set comment = "?" where cnt=35;
山内&gt;            (半角の？です）
山内&gt; 　　(2)上記項目を同じくアプリから参照すると'ＮＵＬＬ’となってしまう。
山内&gt; 　　　確認のために、ＤＯＳ窓からmysql&gt; select  comment from bbs_db_tbl where
山内&gt; cnt=35;
山内&gt; 　　　とコマンド投入すると確かに下記の通りNULLとなっている。
山内&gt; 　　　　+---------+
山内&gt; 　　　　| comment |
山内&gt; 　　　　+---------+
山内&gt; 　　　　| NULL    |
山内&gt; 　　　　+---------+
山内&gt;     (3)一方、今度はＤＯＳ窓からコマンド　update bbs_db_tbl set comment = "?"
山内&gt; where cnt=35;
山内&gt; 　　　を投入して同じくＳＥＬＥＣＴでデータ内容を確認すると、今度は意図したと
山内&gt; おり'?'になって
山内&gt; 　　　います。
山内&gt; 
山内&gt;    なお、（１）のＵＰＤＡＴＥコマンドはＳＱＬ発行の直前でスナップをとって
山内&gt; comment = "?"
山内&gt; 　　になっていることを確認しています。
山内&gt; 
山内&gt; 　　よろしくご教授ください。
山内&gt; 


きたぢま &lt;kitajima@xxxxxxxxxx&gt;
日本MySQLユーザ会 <a href="http://www.mysql.gr.jp/">http://www.mysql.gr.jp/</a>
━━━━────────────────────────────


</pre>
</div>
<p class="button"><a href="8166.html">[前]</a><a href="8168.html">[次]</a><a href="../list/8101-8200.html">[番号順一覧]</a><a href="../thread/8101-8200.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="8165.html">   8165 2003-08-28 23:46 ["山内" &lt;GEG03466@xxx] ＭＹＳＱＬ　ＵＰＤＡＴＥで「？」を書込と「 NULL 」に化ける</a></span>
<span class="current">-&gt;&nbsp;<a href="8167.html">   8167 2003-08-29 09:10 ┣[きたぢま &lt;kitajima@x]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8168.html">   8168 2003-08-29 09:32 ┣[Shinichi Maruyama &lt;m]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8169.html">   8169 2003-08-29 10:27 ┣[SUGAWARA Hajime &lt;sug]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8175.html">   8175 2003-08-30 06:17 ┃┗["KAWAI,Takanori" &lt;GC]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8176.html">   8176 2003-08-30 11:16 ┃　┣["山内" &lt;GEG03466@xxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8177.html">   8177 2003-08-30 21:58 ┃　┃┗["KAWAI,Takanori" &lt;GC]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8181.html">   8181 2003-09-01 12:19 ┃　┗[SUGAWARA Hajime &lt;sug]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8174.html">   8174 2003-08-30 00:59 ┗["山内" &lt;GEG03466@xxx]                                       </a></span>
</pre>


</body></html>