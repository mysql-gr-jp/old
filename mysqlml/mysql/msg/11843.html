<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11843</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="11842.html">[前]</a><a href="11844.html">[次]</a><a href="../list/11801-11900.html">[番号順一覧]</a><a href="../thread/11801-11900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:11843
</p>
<div class="header">
<p>
From: "Tetsuya Hirotsu" &lt;"Tetsuya Hirotsu" &lt;hirotsu@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 1 Aug 2005 15:48:25 +0900<br>
Subject: [mysql 11843] DELETE FROM table_name;  で AUTO_INCREMENT  値が初期化されない<br>

</p>
</div>
<div class="body">
<pre>お世話になります、広津と申します。


AUTO_INCREMENT カラムを持つテーブルのロック中に、そのテーブルから
全レコードを削除後、ほぼ同じ数のレコードを INSERT するという処理があります。
このとき、INSERT するレコードの AUTO_INCREMENT値を 1 から始めさせたいのですが、
うまくいきません。


5.0.6-beta のマニュアル（<a href="http://dev.mysql.com/doc/mysql/ja/index.html">http://dev.mysql.com/doc/mysql/ja/index.html</a>）に

＞6.5.3. CREATE TABLE 構文
＞AUTO_INCREMENT カラムの最大値が入ったレコードを削除した場合、その値は ISAM テーブルや BDB テーブルでは再利用されるが、
＞MyISAM テーブルや InnoDB テーブルでは再利用されない。
＞DELETE FROM table_name（WHERE 節なし）を AUTOCOMMIT モードで実行してテーブル内のすべてのレコードを削除した場合、
＞InnoDB を除くすべてのテーブル型で、連続値が初めから開始される。

とありますが、当方の環境では、DELETE FROM table_name; の場合も、初期化されずに削除前の
AUTO_INCREMENT カラム値 + 1 がセットされます。
もちろん AUTOCOMMIT = 1 です。

サーバー    WindowsXP
MySQL      4.1.3b-beta-nt（バイナリ）

ローカルの Windows マシンから、MySQL ODBC 3.51 + VBA、および、
MySQL ODBC 3.51 + MySQL Query Browser 1.1.0 gamma で上記結果でした。
バージョン 4 では出来ないのでしょうか？


ALTER TABLE table_name AUTO_INCREMENT = 0; を実行すると、その次からは初期化されますが、
LOCK 中のテーブルのため、ALTER できません。
（ALTER 後のテーブルが非LOCK状態になる　←　これを回避する方法がありましたら、これでも良いのですが、、、）


どなたか情報をお持ちの方はいらっしゃらないでしょうか？ 



</pre>
</div>
<p class="button"><a href="11842.html">[前]</a><a href="11844.html">[次]</a><a href="../list/11801-11900.html">[番号順一覧]</a><a href="../thread/11801-11900.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="11815.html">  11815 2005-07-29 12:29 [H M &lt;hassy_94@xxxxxx] 外部クライアントからの接続              </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11816.html">  11816 2005-07-29 14:17 ┣["T.Sasaki" &lt;papasan2]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11818.html">  11818 2005-07-29 15:41 ┃┗[H M &lt;hassy_94@xxxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11820.html">  11820 2005-07-29 16:15 ┃　┣["T.Sasaki" &lt;papasan2]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11822.html">  11822 2005-07-29 16:29 ┃　┃┣[H M &lt;hassy_94@xxxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11824.html">  11824 2005-07-29 16:37 ┃　┃┃┗["T.Sasaki" &lt;papasan2]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11825.html">  11825 2005-07-29 16:35 ┃　┃┗[遠藤 俊裕 &lt;endo@xxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11826.html">  11826 2005-07-29 16:39 ┃　┃　┣[遠藤 俊裕 &lt;endo@xxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11827.html">  11827 2005-07-29 16:54 ┃　┃　┗["T.Sasaki" &lt;papasan2]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11830.html">  11830 2005-07-29 18:19 ┃　┃　　┗[遠藤 俊裕 &lt;endo@xxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11831.html">  11831 2005-07-29 19:00 ┃　┃　　　┗["T.Sasaki" &lt;papasan2]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11821.html">  11821 2005-07-29 16:17 ┃　┗[toki &lt;toki@xxxxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11823.html">  11823 2005-07-29 16:32 ┃　　┗["T.Sasaki" &lt;papasan2]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11817.html">  11817 2005-07-29 14:25 ┣[SUGIMURA Takashi 杉�]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11819.html">  11819 2005-07-29 16:06 ┃┗[H M &lt;hassy_94@xxxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11828.html">  11828 2005-07-29 17:03 ┣[SATOH Fumiyasu &lt;fumi]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11829.html">  11829 2005-07-29 18:16 ┃┗[遠藤 俊裕 &lt;endo@xxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11832.html">  11832 2005-07-29 23:00 ┗[seidai hirota &lt;seida]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11833.html">  11833 2005-07-30 15:25 　┗[H M &lt;hassy_94@xxxxxx] 調査結果                            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11834.html">  11834 2005-07-30 22:59 　　┣[tateyan &lt;tateyan@xxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11835.html">  11835 2005-07-31 14:56 　　┗["T.Sasaki" &lt;papasan2]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11836.html">  11836 2005-07-31 20:03 　　　┗[H M &lt;hassy_94@xxxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11837.html">  11837 2005-07-31 20:09 　　　　┗[Kazuhiro Yoshida &lt;mo]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11838.html">  11838 2005-07-31 20:16 　　　　　┣[H M &lt;hassy_94@xxxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11840.html">  11840 2005-07-31 20:47 　　　　　┃┣["T.Sasaki" &lt;papasan2]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11841.html">  11841 2005-07-31 22:15 　　　　　┃┗[iida_yuichi &lt;y_iida@]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11842.html">  11842 2005-08-01 09:05 　　　　　┃　┣["T.Sasaki" &lt;papasan2]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11853.html">  11853 2005-08-01 20:55 　　　　　┃　┃┣[iida_yuichi &lt;y_iida@]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11854.html">  11854 2005-08-01 21:50 　　　　　┃　┃┗[H M &lt;hassy_94@xxxxxx]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11858.html">  11858 2005-08-02 12:33 　　　　　┃　┃　┗["T.Sasaki" &lt;papasan2]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11865.html">  11865 2005-08-02 22:55 　　　　　┃　┃　　┗[H M &lt;hassy_94@xxxxxx]                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11868.html">  11868 2005-08-03 09:47 　　　　　┃　┃　　　┗[toki &lt;toki@xxxxxxxxx]                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11870.html">  11870 2005-08-03 10:03 　　　　　┃　┃　　　　┗["T.Sasaki" &lt;papasan2]               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11872.html">  11872 2005-08-03 10:51 　　　　　┃　┃　　　　　┗[&lt;numata@xxxxxxxxxx&gt; ]             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11873.html">  11873 2005-08-03 11:05 　　　　　┃　┃　　　　　　┗["T.Sasaki" &lt;papasan2]           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11874.html">  11874 2005-08-03 15:00 　　　　　┃　┃　　　　　　　┗["T.Sasaki" &lt;papasan2]         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11875.html">  11875 2005-08-03 16:10 　　　　　┃　┃　　　　　　　　┣["T.Sasaki" &lt;papasan2]       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11877.html">  11877 2005-08-03 18:16 　　　　　┃　┃　　　　　　　　┃┗[H M &lt;hassy_94@xxxxxx]     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11876.html">  11876 2005-08-03 17:00 　　　　　┃　┃　　　　　　　　┗["Kenichiro Fuji" &lt;k_]       </a></span>
<span class="current">-&gt;&nbsp;<a href="11843.html">  11843 2005-08-01 15:48 　　　　　┃　┗["Tetsuya Hirotsu" &lt;h] DELETE FROM table_name;  で AUTO_INCREMENT  値が初期化されない</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11844.html">  11844 2005-08-01 15:58 　　　　　┃　　┣["Tetsuya Hirotsu" &lt;h]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11845.html">  11845 2005-08-01 16:24 　　　　　┃　　┣[KIshii &lt;kn-ishi@xxxx]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11846.html">  11846 2005-08-01 16:28 　　　　　┃　　┗["T.Sasaki" &lt;papasan2]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11856.html">  11856 2005-08-02 11:19 　　　　　┃　　　┗["Tetsuya Hirotsu" &lt;h]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11839.html">  11839 2005-07-31 20:27 　　　　　┗[H M &lt;hassy_94@xxxxxx]                             </a></span>
</pre>


</body></html>