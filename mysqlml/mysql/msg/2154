<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:2154</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="2153">[前]</a><a href="2155">[次]</a><a href="../list/2101-2200">[番号順一覧]</a><a href="../thread/2101-2200">[スレッド一覧]</a></p>
<p class="id">
mysql:2154
</p>
<div class="header">
<p>
From: &lt;takeshi@xxxxxxxxxx&gt;<br>
Date: Fri, 02 Jun 2000 17:32:51 +0900<br>
Subject: [mysql 02154] Re: mysql デーモンの負荷テストで不可解な現象<br>

</p>
</div>
<div class="body">
<pre>

At Fri, 02 Jun 2000 11:39:40 +0900,
N.Yoshida &lt;yosh_no@xxxxxxxxxx&gt; wrote:
<span class="quote1">&gt; </span>
<span class="quote1">&gt;   吉田です。</span>
<span class="quote1">&gt;   MySQLを使用したシステムを本運用しようとしてMySQLデーモンの負荷テスト</span>
<span class="quote1">&gt; をしていたところ次のような現象が発生し困っています。何か解決のヒントが</span>
<span class="quote1">&gt; あれば教えていただきたいと思っています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 【環境】</span>
<span class="quote1">&gt;          DBサーバ                         APLサーバ</span>
<span class="quote1">&gt;     ┌────────┐             ┌────────┐</span>
<span class="quote1">&gt;     │                │             │                │</span>
<span class="quote1">&gt;     │    MySQL←───────────テストスクリプト│</span>
<span class="quote1">&gt;     │                │             │                │</span>
<span class="quote1">&gt;     │                │             │                │</span>
<span class="quote1">&gt;     └────────┘             └────────┘</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt;   (DBサーバ)</span>
<span class="quote1">&gt;    OS     Slackware 3.5ベースのLinux kernel(2.2.15)</span>
<span class="quote1">&gt;    MySQL  3.22.32(3.22.30で発生したのでエンハンスしたが同じ現象発生)</span>
<span class="quote1">&gt;    Linuxthread-0.6</span>

現在、Linuxthread は 0.7.1 です

<span class="quote1">&gt;    Data-Dumper-2.09</span>
<span class="quote1">&gt;    DBI-1.13</span>
<span class="quote1">&gt;    Msql-Mysql-modules-1.2209(1.2214でも同じ現象発生)</span>
<span class="quote1">&gt;    Perl5.005_03 + jperl5.005_03-990403.pat</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt;   (APLサーバ)</span>
<span class="quote1">&gt;    OS     TurboLinux 6.0ベースのLinux kernel(2.2.15)</span>
<span class="quote1">&gt;    他はDBサーバと同じ</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 【現象】</span>
<span class="quote1">&gt;      MySQLへコネクトし、テーブルに対してselect *をかけて結果をフェッチ</span>
<span class="quote1">&gt;    しディスコネクトする処理を無限に繰り返すPERLスクリプトを6多重で実行</span>
<span class="quote1">&gt;    したところ10分程度でMySQLデーモンが落ちた。(アベンドまでの時間はさ</span>
<span class="quote1">&gt;    まざま) </span>
<span class="quote1">&gt;      傾向としては多重度を上げればデーモンアベンドする時間が短くなるよう</span>
<span class="quote1">&gt;    です。</span>

同じスクリプトを 20 個で試しました。(3.23.16)
１時間経っても落ちないのです。

まだ情報がたりません。
mysqlbug スクリプトで表示される情報、
テーブル構造とデータ

テスト前に
1.mysqladmin flush-status
2.mysqladmin extended-status
した結果

3.スクリプトの実行 と
mysqladmin extended-status の定期的な実行結果
おちる直前の結果

以上、しらべてみてもらえませんでしょうか

-- 
 村上 毅  takeshi@xxxxxxxxxx
 Soft Agency Co., Ltd. TEL +81-48-661-1527
 PGP fingerprint = 45 5D 54 12 B4 55 77 7F  D4 52 66 EC 03 3F 1B E9

</pre>
</div>
<p class="button"><a href="2153">[前]</a><a href="2155">[次]</a><a href="../list/2101-2200">[番号順一覧]</a><a href="../thread/2101-2200">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="2153">   2153 2000-06-02 11:39 [&quot;N.Yoshida&quot; &lt;yosh_no] mysql デーモンの負荷テストで不可解な現象</a></span>
<span class="current">-&gt;&nbsp;<a href="2154">   2154 2000-06-02 17:32 ┗[&lt;takeshi@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2156">   2156 2000-06-02 20:12 　┗[&quot;N.Yoshida&quot; &lt;yosh_no]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2158">   2158 2000-06-02 22:43 　　┗[&lt;takeshi@xxxxxxxxxx&gt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2163">   2163 2000-06-05 14:58 　　　┗[&quot;N.Yoshida&quot; &lt;yosh_no]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2164">   2164 2000-06-05 16:14 　　　　┗[Seiji Tateyama &lt;tate]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2165">   2165 2000-06-05 19:41 　　　　　┗[&quot;N.Yoshida&quot; &lt;yosh_no]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2166">   2166 2000-06-05 21:44 　　　　　　┣[&lt;takeshi@xxxxxxxxxx&gt;]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2188">   2188 2000-06-10 19:27 　　　　　　┃┗[&quot;N.Yoshida&quot; &lt;yosh_no]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2167">   2167 2000-06-06 01:42 　　　　　　┗[tateyan &lt;tateyan@xxx]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2168">   2168 2000-06-06 10:22 　　　　　　　┗[&quot;N.Yoshida&quot; &lt;yosh_no]                         </a></span>
</pre>
</body>
</html>
