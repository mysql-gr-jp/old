<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8201</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8200.html">[前]</a><a href="8202.html">[次]</a><a href="../list/8201-8300.html">[番号順一覧]</a><a href="../thread/8201-8300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8201
</p>
<div class="header">
<p>
From: Tatsuo Tsuruzawa &lt;Tatsuo Tsuruzawa &lt;ttsuru@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 12 Sep 2003 16:44:00 +0900<br>
Subject: [mysql 08201] ループの中で SELECT 文を発行するとループが途切れます<br>

</p>
</div>
<div class="body">
<pre>
鶴澤と申します。

JSPでプログラミングしています。
MySQLで、SELECT文を発行し、while(rs.next())でFETCHしている中で
更に別にSELECT文を発行すると、全体のループ（while文）が
途切れてしまいます。どうすればループが途切れずに処理されるのか？
ご指導願います。

＜JSPコーディングの抜粋（イメージ）＞
    //対象データの抽出
    str_sql = &quot;SELECT * FROM XXX_TABLE &quot;;
    ResultSet rs=sttSql.executeQuery(str_sql);

    //対象データ終了までループ
    while(rs.next()){

        //存在チェック
        exist_query = &quot;SELECT count(*) FROM YYY_TABLE &quot;;
        exist_query = exist_query + &quot; WHERE file_name = &quot;;
        exist_query = exist_query + db_name; &lt;--XXX_TABLEの項目

        //※以下の３行をコメントアウトすると、全件ループ処理を完了する
        ResultSet rs_exist = sttSql.executeQuery(exist_query);
        rs_exist.next();
        exist_row = rs_exist.getInt(&quot;count(*)&quot;);

        if(exist_row == 0){
            存在しない場合の処置
        }
        else{
            存在した場合の処置
        }
    }



＜環境＞
OS:Windows2000
JAVA2SE 1.4.0
Apache  1.3.24
Tomcat  4.0.3
MySQl   3.23.49

よろしくお願いします。

*=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=*
 Tatsuo Tsuruzawa      e-mail: ttsuru@xxxxxxxxxx


</pre>
</div>
<p class="button"><a href="8200.html">[前]</a><a href="8202.html">[次]</a><a href="../list/8201-8300.html">[番号順一覧]</a><a href="../thread/8201-8300.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="8201.html">   8201 2003-09-12 16:44 [Tatsuo Tsuruzawa &lt;tt] ループの中で SELECT 文を発行するとループが途切れます</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8202.html">   8202 2003-09-12 16:54 ┗[Nakase Hiroaki &lt;h_na]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8204.html">   8204 2003-09-12 17:28 　┗[Tatsuo Tsuruzawa &lt;tt]                                     </a></span>
</pre>
</body>
</html>
