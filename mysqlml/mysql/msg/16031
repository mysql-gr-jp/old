<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:16031</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="16030">[前]</a><a href="16032">[次]</a><a href="../list/16001-16100">[番号順一覧]</a><a href="../thread/16001-16100">[スレッド一覧]</a></p>
<p class="id">
mysql:16031
</p>
<div class="header">
<p>
From: HIRATSUKA Sadao &lt;HIRATSUKA Sadao &lt;hiratsuka.sadao@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 12 Sep 2013 09:53:45 +0900<br>
Subject: [mysql 16031] Re: MySQLのデータ領域が１００％になったとき。。<br>

</p>
</div>
<div class="body">
<pre>
こんにちは、平塚です。

On Wed, 11 Sep 2013 15:16:32 +0900
Hwang Se Won &lt;coolguy318@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; DRBD＋Heartbeat＋MySQLの構成でデータの領域を減らすためには、</span>
<span class="quote1">&gt; どうすればい いでしょうか？</span>

以前<a href="15912">[mysql 15912]</a>で類似の質問をされていますが、
それとは別のサーバですよね。

状況はあまり良くないと思います。
DRBD構成のため、簡単にディスクを増設することができません。

まず、以下のようなコマンドでどのファイルが領域を圧迫しているのか
調べてみてください。

du -am /MYSQL/DATA | sort -k 1 -nr | head -100

＜実行例＞
2349    /var/lib/mysql
1670    /var/lib/mysql/scott
1585    /var/lib/mysql/scott/lineorder.ibd
281     /var/lib/mysql/tpcc
141     /var/lib/mysql/ibdata1
128     /var/lib/mysql/ib_logfile1
128     /var/lib/mysql/ib_logfile0
97      /var/lib/mysql/tpcc/order_line.ibd
85      /var/lib/mysql/tpcc/stock.ibd
56      /var/lib/mysql/scott/part.ibd
45      /var/lib/mysql/tpcc/customer.ibd
20      /var/lib/mysql/scott/customer.ibd
17      /var/lib/mysql/tpcc/item.ibd
16      /var/lib/mysql/tpcc/orders.ibd
16      /var/lib/mysql/tpcc/history.ibd
10      /var/lib/mysql/tpcc/new_orders.ibd
10      /var/lib/mysql/scott/supplier.ibd
…

消してもよいファイルがあれば状況は良くなりますが、
あまり期待はなさらないでください。

新たにDBサーバを構築して、そちらに全データを引っ越すような
対処になる可能性が高いです。

よろしくお願いします。

-- 
平塚貞夫 hiratsuka.sadao@xxxxxxxxxx



</pre>
</div>
<p class="button"><a href="16030">[前]</a><a href="16032">[次]</a><a href="../list/16001-16100">[番号順一覧]</a><a href="../thread/16001-16100">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="16030">@ 16030 2013-09-11 15:16 [Hwang Se Won &lt;coolgu] MySQLのデータ領域が１００％になったとき。。</a></span>
<span class="current">-&gt;&nbsp;<a href="16031">  16031 2013-09-12 09:53 ┗[HIRATSUKA Sadao &lt;hir]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16032">@ 16032 2013-09-12 10:43 　┗[Hwang Se Won &lt;coolgu]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16033">  16033 2013-09-12 11:06 　　┗[HIRATSUKA Sadao &lt;hir]                                   </a></span>
</pre>
</body>
</html>
