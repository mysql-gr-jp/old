<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4157</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4156.html">[前]</a><a href="4158.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4157
</p>
<div class="header">
<p>
From: (moeru) &lt;&lt;moeru@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 07 Aug 2001 18:18:46 +0900<br>
Subject: [mysql 04157] Re: メモリの節約方法<br>

</p>
</div>
<div class="body">
<pre>
モエルです。

宮川さん、御返事遅くなりました。


<span class="quote2">&gt;&gt; あと、ユーザーが使用中にFLUSH TABLESをすると</span>
<span class="quote2">&gt;&gt; トラブルが出たりしないでしょうか？</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;使用中というのが何を意味するかわかりませんが、クエリーのロックなど</span>
<span class="quote1">&gt;は mysqld 側で面倒見てくれると思いますので、問題ないと思いますよ。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;実際、ドキュメントには、以下のようにあります。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;<a href="http://www.mysql.com/doc/M/e/Memory_use.html">http://www.mysql.com/doc/M/e/Memory_use.html</a></span>

わざわざ調べていただいたようで有り難うございますm(__)m

使用中というのは、HTTP経由でMySQLのデータを使用しているユーザーのことでした。

FLUSH TABLESは、実際に試してみましたが、全然減りません(;_:)
目で見て分かるようなツールがあるといいんですが。。


  PID USER     PRI  NI  SIZE  RSS SHARE STAT  LIB %CPU %MEM   TIME COMMAND
19124 root      19   0 31272  30M  1304 S       0  5.5  3.0   0:00 mysqld

FLUSH TABLESとか、システム変数のチューニングで影響するのは
ＴＯＰコマンドで見た、上記の30Mのリソースサイズが減るかどうかってことでしょうか？
ここが知りたいです。

最初、システムをリブートしたあたりのmysqldのリソースサイズは
数ＫＢから始まって38MB辺りで落ち着きます。



  PID USER     PRI  NI  SIZE  RSS SHARE STAT  LIB %CPU %MEM   TIME COMMAND
17302 nobody    12   0  4940 4940  3964 S       0  4.7  0.4   0:06 httpd
17296 nobody     3   0  4852 4852  3948 S       0  1.1  0.4   0:03 httpd

それから、ＰＨＰは、apacheのDSOとして組み込んでるのですが
システム変数のチューニングは
このnobodyアクセスのhttpdのリソースサイズにも影響しますよね？


システム変数の方はまだいじっていないので、
これからちょっとずつ試してみます。


土曜日にメモリが１ＧＢを超えてしまいスワップが始まったので
試しにMySQLのヴァージョンを3.23.40に上げてみました。

２日様子を見てみて、それぞれのプロセスのリソースサイズはあまり変わらないものの
全体のメモリ使用量が４００ＭＢあたりで落ち着いています。

どこかに、メモリーリークがあるんだと思いますが
MySQLのヴァージョンを上げてみたので
すこし様子を見てまたレポートします。



モエル

</pre>
</div>
<p class="button"><a href="4156.html">[前]</a><a href="4158.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>


</body></html>