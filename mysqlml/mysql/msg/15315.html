<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15315</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15314.html">[前]</a><a href="15316.html">[次]</a><a href="../list/15301-15400.html">[番号順一覧]</a><a href="../thread/15301-15400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:15315
</p>
<div class="header">
<p>
From: MATSUNAGA Ichiro &lt;MATSUNAGA Ichiro &lt;vikke.bsd@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 11 May 2010 15:43:03 +0900<br>
Subject: [mysql 15315] InnoDBのfrmとibdのみでのデータ移行<br>

</p>
</div>
<div class="body">
<pre>
松永です。

mysql:15241のrepair tableで修復出来ない状況で相談させてもらいました。
その際はdbを止めないでやる為にrepair tableを使っていましたが、結局他の障害等の問題もあり、dbを止めてのmyisamchkを行なった所、問題は解消しました。

いい機会なので、色々復旧方法や移行方法などを試していました。
MyISAMに関しては、*.frm, *.MYD, *.MYIを別マシンにコピーすればそのまま読める事はわかりました。
問題はInnoDBの方です。
my.cnfでinnodb_file_per_tableを指定し、各テーブル毎にInnoDBのファイルを作っている状態の場合、対応する*.frmと*.ibdを単純にコピーしただけでは読めませんでした。

<a href="http://dev.mysql.com/doc/refman/5.1/en/innodb-backup.html">http://dev.mysql.com/doc/refman/5.1/en/innodb-backup.html</a>

にもibdataと.ibdをコピーせよと書かれています。
ibdataが無い状態では、InnoDBはテーブルの復活はさせられないのでしょうか。

テスト環境は、
FreeBSD 7.2R 無印
MySQL 5.1.40をportsからinstall
した環境です。

以上、よろしくお願い致します。


-- 
MATSUNAGA Ichiro
e-mail: vikke.bsd@xxxxxxxxxx
/.j: <a href="http://slashdot.jp/~vikke/">http://slashdot.jp/~vikke/</a>
last.fm: <a href="http://www.lastfm.jp/user/vikke_bsd/">http://www.lastfm.jp/user/vikke_bsd/</a>
twitter: <a href="http://twitter.com/vikke">http://twitter.com/vikke</a>

Just remember - when you think all is lost, the future remains.
-- Robert H. Goddard

GPG fingerprint = DCEF C86E 2930 45D0 0941  E977 4DCE A95F 3914 4BED


</pre>
</div>
<div class="attach">
<h3 class="attachtitle">添付ファイル</h3>
<ul>
<li><a href="15315/0/index.html"> [application/pgp-signature]</a>
</ul>
</div>
<p class="button"><a href="15314.html">[前]</a><a href="15316.html">[次]</a><a href="../list/15301-15400.html">[番号順一覧]</a><a href="../thread/15301-15400.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="15315.html">@ 15315 2010-05-11 15:43 [MATSUNAGA Ichiro &lt;vi] InnoDBのfrmとibdのみでのデータ移行      </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15316.html">  15316 2010-05-11 15:54 ┗[Mikiya Okuno &lt;Mikiya]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15317.html">@ 15317 2010-05-11 17:01 　┗[MATSUNAGA Ichiro &lt;vi]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15318.html">  15318 2010-05-13 14:10 　　┗[Yasufumi Kinoshita &lt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15320.html">@ 15320 2010-05-16 19:32 　　　┗[MATSUNAGA Ichiro &lt;vi]                                 </a></span>
</pre>
</body>
</html>
