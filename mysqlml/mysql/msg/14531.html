<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14531</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14530.html">[前]</a><a href="14532.html">[次]</a><a href="../list/14501-14600.html">[番号順一覧]</a><a href="../thread/14501-14600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14531
</p>
<div class="header">
<p>
From: oiron &lt;oiron &lt;norio.oiron@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 12 May 2008 18:09:09 +0900<br>
Subject: [mysql 14531] Re: mysqlclusterの最大カラム数について<br>

</p>
</div>
<div class="body">
<pre>
谷口です。
押せ輪になります。

2008/05/10 16:49 oiron &lt;norio.oiron@xxxxxxxxxx&gt;:
<span class="quote1">&gt; 谷口です。</span>
<span class="quote1">&gt; ありがとうございます。</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt;&gt; 私の手元では40カラム以上でも動いていますよ。</span>
<span class="quote1">&gt; おお！！すばらしい情報。</span>
<span class="quote1">&gt; なにも特別な設定は、いりませんか。</span>
<span class="quote2">&gt;&gt; 5.1.6から5.1.8まではバグで4096文字を越えるCREATE文はエラーとなっていまし</span>
<span class="quote2">&gt;&gt; た。5.1.24は問題ないと思うのですが、ALTER文でもカラムを追加できないので</span>
<span class="quote2">&gt;&gt; しょうか？</span>
<span class="quote1">&gt; +-------+---------+------+-----+---------+-------+</span>
<span class="quote2">&gt; | Field | Type    | Null | Key | Default | Extra |</span>
<span class="quote1">&gt; +-------+---------+------+-----+---------+-------+</span>
<span class="quote2">&gt; | no    | int(11) | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | body  | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c1    | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c2    | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c3    | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c4    | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c5    | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c6    | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c7    | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c8    | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c9    | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c10   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c11   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c12   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c13   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c14   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c15   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c16   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c17   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c18   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c19   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c20   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c21   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c22   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c23   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c24   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c25   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c26   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c27   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c28   | text    | YES  |     | NULL    |       |</span>
<span class="quote2">&gt; | c29   | text    | YES  |     | NULL    |       |</span>
<span class="quote1">&gt; +-------+---------+------+-----+---------+-------+</span>
<span class="quote1">&gt; 31 rows in set (0.00 sec)</span>
<span class="quote1">&gt; に対して</span>
<span class="quote1">&gt; mysql&gt; alter table articles add c30 text;</span>
<span class="quote1">&gt; ERROR 1005 (HY000): Can't create table 'hoge.#sql-39a8_88' (errno: 140)</span>
<span class="quote1">&gt; とエラーになります。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; mysql&gt; alter table articles add c30 text;</span>
<span class="quote1">&gt; ERROR 1005 (HY000): Can't create table 'hoge.#sql-39a8_88' (errno: 140)</span>
<span class="quote1">&gt; mysql&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; あと、5.1系はディスクベースのクラスターが構築できるとのことですが、</span>
<span class="quote3">&gt;&gt;&gt; 現在メモリーベースかディスクベースかどちらで動作しているか確認する方法はございますでしょうか。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; SHOW CREATE TABLEをすればすぐに分かります。</span>
<span class="quote2">&gt;&gt; ディスクベースであれば5.1の新機能のTABLESPACEとSTORAGE DISKオプションを</span>
<span class="quote2">&gt;&gt; 指定してあるはずです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; show create table articles\G</span>
<span class="quote1">&gt; *************************** 1. row ***************************</span>
<span class="quote1">&gt;       Table: articles</span>
<span class="quote1">&gt; Create Table: CREATE TABLE `articles` (</span>
<span class="quote1">&gt;  `no` int(11) DEFAULT NULL,</span>
<span class="quote1">&gt;  `body` text,</span>
<span class="quote1">&gt;  `c1` text,</span>
<span class="quote1">&gt;  `c2` text,</span>
<span class="quote1">&gt;  `c3` text,</span>
<span class="quote1">&gt;  `c4` text,</span>
<span class="quote1">&gt;  `c5` text,</span>
<span class="quote1">&gt;  `c6` text,</span>
<span class="quote1">&gt;  `c7` text,</span>
<span class="quote1">&gt;  `c8` text,</span>
<span class="quote1">&gt;  `c9` text,</span>
<span class="quote1">&gt;  `c10` text,</span>
<span class="quote1">&gt;  `c11` text,</span>
<span class="quote1">&gt;  `c12` text,</span>
<span class="quote1">&gt;  `c13` text,</span>
<span class="quote1">&gt;  `c14` text,</span>
<span class="quote1">&gt;  `c15` text,</span>
<span class="quote1">&gt;  `c16` text,</span>
<span class="quote1">&gt;  `c17` text,</span>
<span class="quote1">&gt;  `c18` text,</span>
<span class="quote1">&gt;  `c19` text,</span>
<span class="quote1">&gt;  `c20` text,</span>
<span class="quote1">&gt;  `c21` text,</span>
<span class="quote1">&gt;  `c22` text,</span>
<span class="quote1">&gt;  `c23` text,</span>
<span class="quote1">&gt;  `c24` text,</span>
<span class="quote1">&gt;  `c25` text,</span>
<span class="quote1">&gt;  `c26` text,</span>
<span class="quote1">&gt;  `c27` text,</span>
<span class="quote1">&gt;  `c28` text,</span>
<span class="quote1">&gt;  `c29` text</span>
<span class="quote1">&gt; ) ENGINE=ndbcluster DEFAULT CHARSET=utf8</span>
<span class="quote1">&gt; 1 row in set (0.00 sec)</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; となりどうもディスクベースではないようです。</span>
<span class="quote1">&gt; 特別な設定がいりますでしょうか。どうぞよろしくお願いいたします。</span>
<span class="quote1">&gt;</span>
教えていただきました。参考サイト

mysql&gt; show databases;
+--------------------+
<span class="quote1">| Database           |</span>
+--------------------+
<span class="quote1">| information_schema |</span>
<span class="quote1">| hoge               |</span>
<span class="quote1">| mysql              |</span>
<span class="quote1">| test               |</span>
+--------------------+
use hoge

<span class="quote1">&gt;<a href="http://dev.mysql.com/doc/refman/5.1/ja/mysql-cluster-disk-data.html">http://dev.mysql.com/doc/refman/5.1/ja/mysql-cluster-disk-data.html</a></span>

mysql&gt; create logfile group logfile_group
    -&gt; add undofile 'undo_1.dat' engine ndbcluster）；
Query OK, 0 rows affected (4.97 sec)
mysql&gt; SELECT LOGFILE_GROUP_NAME, LOGFILE_GROUP_NUMBER, EXTRA from
INFORMATION_SCHEMA.FILES
    -&gt; ;
+--------------------+----------------------+-----------------------------------------+
<span class="quote1">| LOGFILE_GROUP_NAME | LOGFILE_GROUP_NUMBER | EXTRA</span>
               |
+--------------------+----------------------+-----------------------------------------+
<span class="quote1">| logfile_group      |                    5 |</span>
CLUSTER_NODE=2;UNDO_BUFFER_SIZE=8388608 |
<span class="quote1">| logfile_group      |                    5 |</span>
CLUSTER_NODE=3;UNDO_BUFFER_SIZE=8388608 |
<span class="quote1">| logfile_group      |                    5 | UNDO_BUFFER_SIZE=8388608</span>
               |
+--------------------+----------------------+-----------------------------------------+
3 rows in set (0.01 sec)



mysql&gt; SELECT LOGFILE_GROUP_NAME, LOGFILE_GROUP_NUMBER, EXTRA from
INFORMATION_SCHEMA.FILES
    -&gt; ;
+--------------------+----------------------+-----------------------------------------+
<span class="quote1">| LOGFILE_GROUP_NAME | LOGFILE_GROUP_NUMBER | EXTRA</span>
               |
+--------------------+----------------------+-----------------------------------------+
<span class="quote1">| logfile_group      |                    5 |</span>
CLUSTER_NODE=2;UNDO_BUFFER_SIZE=8388608 |
<span class="quote1">| logfile_group      |                    5 |</span>
CLUSTER_NODE=3;UNDO_BUFFER_SIZE=8388608 |
<span class="quote1">| logfile_group      |                    5 | UNDO_BUFFER_SIZE=8388608</span>
               |
+--------------------+----------------------+-----------------------------------------+
3 rows in set (0.01 sec)


としてからcreate table してみました。

結果は、
how create table test_lhotse\G
*************************** 1. row ***************************
       Table: test_lhotse
Create Table: CREATE TABLE `test_lhotse` (
  `foo` int(11) DEFAULT NULL,
  `bar` char(16) DEFAULT NULL
) ENGINE=ndbcluster DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

です。
手順を間違えておりますでしょうか。


<span class="quote1">&gt;</span>
<span class="quote1">&gt; --</span>
<span class="quote1">&gt; 谷口&lt;norio.oiron@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt;</span>



-- 
谷口&lt;norio.oiron@xxxxxxxxxx&gt;

</pre>
</div>
<p class="button"><a href="14530.html">[前]</a><a href="14532.html">[次]</a><a href="../list/14501-14600.html">[番号順一覧]</a><a href="../thread/14501-14600.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="14523.html">  14523 2008-05-09 19:12 [oiron &lt;norio.oiron@x] mysqlclusterの最大カラム数について      </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14524.html">  14524 2008-05-09 20:22 ┗[Satoshi Tatsuoka &lt;sa]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14525.html">  14525 2008-05-09 20:56 　┣[Mikiya Okuno &lt;okuno@]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14526.html">  14526 2008-05-10 15:24 　┃┗[oiron &lt;norio.oiron@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14527.html">  14527 2008-05-10 16:49 　┣[oiron &lt;norio.oiron@x]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="14531.html">  14531 2008-05-12 18:09 　┃┗[oiron &lt;norio.oiron@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14528.html">  14528 2008-05-10 16:58 　┗[oiron &lt;norio.oiron@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14529.html">  14529 2008-05-10 19:01 　　┣[Satoshi Tatsuoka &lt;sa]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14530.html">  14530 2008-05-11 21:49 　　┃┗[oiron &lt;norio.oiron@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14532.html">  14532 2008-05-12 19:52 　　┣[oiron &lt;norio.oiron@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14533.html">  14533 2008-05-12 23:34 　　┗[oiron &lt;norio.oiron@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14534.html">  14534 2008-05-13 09:37 　　　┗[Satoshi Tatsuoka &lt;sa]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14535.html">  14535 2008-05-13 11:24 　　　　┗[oiron &lt;norio.oiron@x]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14536.html">  14536 2008-05-14 09:50 　　　　　┣[Satoshi Tatsuoka &lt;sa]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14562.html">  14562 2008-05-19 19:22 　　　　　┃┗[oiron &lt;norio.oiron@x]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14564.html">  14564 2008-05-20 10:58 　　　　　┃　┗[Satoshi Tatsuoka &lt;sa]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14580.html">  14580 2008-05-25 15:55 　　　　　┃　　┗[oiron &lt;norio.oiron@x]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14602.html">  14602 2008-06-17 10:37 　　　　　┃　　　┗[Satoshi Tatsuoka &lt;sa]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14606.html">  14606 2008-06-26 01:11 　　　　　┗[&quot;YasushiInui&quot; &lt;yasus]                             </a></span>
</pre>
</body>
</html>
