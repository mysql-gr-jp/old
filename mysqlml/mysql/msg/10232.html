<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:10232</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="10231.html">[前]</a><a href="10233.html">[次]</a><a href="../list/10201-10300.html">[番号順一覧]</a><a href="../thread/10201-10300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:10232
</p>
<div class="header">
<p>
From: Daiju &lt;Daiju &lt;d.is.here@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 28 Sep 2004 01:18:48 +0900<br>
Subject: [mysql 10232] Re: BENCHMARK関数について<br>

</p>
</div>
<div class="body">
<pre>
　こんにちは。 another Daiju です。

On Tue, 28 Sep 2004 00:37:49 +0900
加藤 大受 &lt;dkato@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; MySQLでSQL文の性能測定を行いたいと思っています。</span>
<span class="quote1">&gt; BENCHMARK関数を利用すれば、SELECT文などの性能測定も</span>
<span class="quote1">&gt; 出来るように思えるのですが、実際にやってみると結果が0秒で</span>
<span class="quote1">&gt; 戻っています。BENCHMARK関数はDML文の測定には使えないの</span>
<span class="quote1">&gt; でしょうか。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; こちらの環境としてはMySQL 4.1のWindows版を利用しており、</span>
<span class="quote1">&gt; エンジン形式はInnoDBです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SELECT BENCHMARK(1,</span>
<span class="quote1">&gt;  'SELECT COUNT(DETAIL_ID),AMOUNT FROM SALES GROUP BY SALES_ID)')</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; といったような形で実行しています。</span>

　マニュアルには，以下の記述があります。

-------------------------------------------------------------
BENCHMARK(count,expr)
  BENCHMARK() 関数は、expr に指定された式を count に指定さ  
  れた回数だけ繰り返し実行する。この関数は、MySQL での式の   
  処理速度を計測するために使用できる。結果の値としては、常   
  に 0 が返る。この関数を mysql クライアントで使用すること   
  によって、クエリの実行時間をレポートすることができる。

mysql&gt; SELECT BENCHMARK(1000000,ENCODE(&quot;hello&quot;,&quot;goodbye&quot;));
+----------------------------------------------+
<span class="quote1">| BENCHMARK(1000000,ENCODE(&quot;hello&quot;,&quot;goodbye&quot;)) |</span>
+----------------------------------------------+
<span class="quote1">|                                            0 |</span>
+----------------------------------------------+
1 row in set (4.74 sec)

　レポートされる時間は、サーバ側の CPU 時間ではなく、クライ
アント側の経過時間である。BENCHMARK() を数回実行し、結果を分
析することによって、サーバマシンの負荷がどれくらいか調べるこ
とができる。 
-------------------------------------------------------------

　ものは試しと，PentiumM 1.0GHz(L2 1MB) で上のコマンドをサー
バー・クライアントともにローカルの環境で実行すると，平均 
0.83 sec となりました。

　PenIII 500MHz(L2 512KB)だと，2.46sec。


-- 
Daiju &lt;d.is.here@xxxxxxxxxx&gt;
<a href="http://opencage.blogspot.com/">http://opencage.blogspot.com/</a>


</pre>
</div>
<p class="button"><a href="10231.html">[前]</a><a href="10233.html">[次]</a><a href="../list/10201-10300.html">[番号順一覧]</a><a href="../thread/10201-10300.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="10231.html">  10231 2004-09-28 00:37 [加藤 大受 &lt;dkato@xxx] BENCHMARK関数について                   </a></span>
<span class="current">-&gt;&nbsp;<a href="10232.html">  10232 2004-09-28 01:18 ┗[Daiju &lt;d.is.here@xxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10233.html">  10233 2004-09-28 01:38 　┗[加藤 大受 &lt;dkato@xxx]                                     </a></span>
</pre>
</body>
</html>
