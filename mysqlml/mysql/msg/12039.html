<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12039</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="12038.html">[前]</a><a href="12040.html">[次]</a><a href="../list/12001-12100.html">[番号順一覧]</a><a href="../thread/12001-12100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:12039
</p>
<div class="header">
<p>
From: &quot;Ryuichiro Munechika/niji-net&quot; &lt;&quot;Ryuichiro Munechika/niji-net&quot; &lt;munetika@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 31 Aug 2005 10:13:05 +0900 (JST)<br>
Subject: [mysql 12039] Re: mysql(DB)を壊した<br>

</p>
</div>
<div class="body">
<pre>
まいパパです

ストレージエンジンがMyISAMであること、またOS(Linux)の
操作をある程度熟知していることを前提に話をします。

一度、mysqldのプロセスをkillします。

で、バックアップを必要とするデータベースのバックアップ
（適当なディレクトリにコピーすることで良いでしょう）して
おく。

例えば、/var/lib/mysql以下にtestディレクトリがあれば
そのディレクトリ以下が、データベースを構成するファイル
になります。

コピーが終わったあと、/var/lib/mysql 全体を消してしまう。

次に、/etc/rc.d/init.d/mysqld start を実行すると初期状態
でデータベースが作成されます。

ここで、rootでパスワード無しでmysqlへログインできるので
rootのパスワードの設定や、適当なデータベースユーザを設定
します。

保存しておいたデータベースファイルを、/var/lib/mysqlへ
書き戻す。

おおよそこれで復旧できると思います。


ShimizuKazuo said:
<span class="quote1">&gt; しみず　です</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; データベースの mysql を壊してしました、復旧/リセット/flush などの</span>
<span class="quote1">&gt; 方法がもしあれば教えていただけませんか？</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ---------------------------------------------------------------</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 皆様の記事をいつも参考にさせていただいております。</span>
<span class="quote1">&gt; mysql を導入して勉強しておりますが、勉強の域を出ておりません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; データベース管理の練習をしておりましたところ・・・、</span>
<span class="quote1">&gt;  mysql.user テーブルをいじっていて、壊してしまったようです。</span>
<span class="quote1">&gt; リブートした後に use mysql; が出来なくなってしまいました。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; use mysql;  を実行すると、次のエラーが出ます。</span>
<span class="quote1">&gt; ERROR 1044: Access denied for user 'root:localhost' to database 'mysql'</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; shell&gt;mysql -u root -p 　起動できます。</span>
<span class="quote1">&gt; mysql&gt;use test; 　　　　できます。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 環境</span>
<span class="quote1">&gt; RedHat 9  (2.4.20-8)</span>
<span class="quote1">&gt; MySql 3.23.58-1</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; よろしく、お願い致します。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>


-- 
宗近
munetika@xxxxxxxxxx


</pre>
</div>
<p class="button"><a href="12038.html">[前]</a><a href="12040.html">[次]</a><a href="../list/12001-12100.html">[番号順一覧]</a><a href="../thread/12001-12100.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="12037.html">  12037 2005-08-31 09:53 [ShimizuKazuo &lt;ozz@xx] mysql(DB)を壊した                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12038.html">  12038 2005-08-31 10:00 ┣[遠藤 俊裕 &lt;endo@xxxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="12039.html">  12039 2005-08-31 10:13 ┗[&quot;Ryuichiro Munechika]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12040.html">  12040 2005-08-31 11:05 　┣[ShimizuKazuo &lt;ozz@xx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12041.html">  12041 2005-08-31 11:23 　┃┗[tatematsu &lt;tatemax@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12043.html">  12043 2005-08-31 12:48 　┃　┗[ShimizuKazuo &lt;ozz@xx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12044.html">  12044 2005-08-31 13:17 　┃　　┗[tatematsu &lt;tatemax@x]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12062.html">  12062 2005-09-03 11:45 　┗[浦本勝久 &lt;katuhisa@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12064.html">  12064 2005-09-03 11:56 　　┗[Tomoyuki Asakawa &lt;to]                                   </a></span>
</pre>
</body>
</html>
