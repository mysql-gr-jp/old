<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14200</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14199.html">[前]</a><a href="14201.html">[次]</a><a href="../list/14101-14200.html">[番号順一覧]</a><a href="../thread/14101-14200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14200
</p>
<div class="header">
<p>
From: &quot;Kensuke Kaneko&quot; &lt;&quot;Kensuke Kaneko&quot; &lt;kyanny@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 13 Sep 2007 18:17:44 +0900<br>
Subject: [mysql 14200] Re: MySql3.23.58でdump時に「'」が文字化け<br>

</p>
</div>
<div class="body">
<pre>
ふたたび、金子です。

復元できてよかったですね :)
ただ、エラーが発生した、という点が気になりました。

元々の話からずれてしまいますが、 auto_increment を外したならば
DB を操作しているアプリケーションもそれに合わせて修正する必要が
出てくると思います（PRIMARY KEY だったならば特に）

復元後に、挿入や参照などの操作も期待した通りに動くことを
十分に確認されたほうがよいと思います。
（エラーメッセージは簡素ですが深刻な問題がおこっていることもあります）


07/09/13 に Shinichi Yoshimura&lt;info@xxxxxxxxxx&gt; さんは書きました:
<span class="quote1">&gt; 金子　様</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; お世話になっております。</span>
<span class="quote1">&gt; 教えていただいた方法でテストしたところ、</span>
<span class="quote1">&gt; 正常に復元を行うことができました。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ありがとうございます。感謝です。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; Duplicate entry 'number' for key number</span>
<span class="quote1">&gt; 途中、上記のエラーが発生しましたが、auto_increament</span>
<span class="quote1">&gt; を無効にすればエラーが出なくなりました。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 皆様の参考になればと思います。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; On Thu, 13 Sep 2007 10:24:30 +0900</span>
<span class="quote1">&gt; &quot;Kensuke Kaneko&quot; &lt;kyanny@xxxxxxxxxx&gt; wrote:</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt; &gt; こんにちは。金子と申します。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; mysqldump の -T オプションは試されましたか？</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; <a href="http://dev.mysql.com/doc/refman/4.1/ja/mysqldump.html">http://dev.mysql.com/doc/refman/4.1/ja/mysqldump.html</a></span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; mysqldump -T /tmp/mysqldump_`date +%Y%m%d` foobar</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; 区切り文字が問題になっているなら、区切り文字の入らないこの方法で回避できると思います。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; SELECT INTO OUTFILE や LOAD DATA INFILE の構文も参考になさってください。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; <a href="http://dev.mysql.com/doc/refman/4.1/ja/select.html">http://dev.mysql.com/doc/refman/4.1/ja/select.html</a></span>
<span class="quote2">&gt; &gt; <a href="http://dev.mysql.com/doc/refman/4.1/ja/load-data.html">http://dev.mysql.com/doc/refman/4.1/ja/load-data.html</a></span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; 07/09/13 に Shinichi Yoshimura&lt;info@xxxxxxxxxx&gt; さんは書きました:</span>
<span class="quote3">&gt; &gt; &gt; こんばんは。</span>
<span class="quote3">&gt; &gt; &gt; 過去ログを検索させていただきましたが、</span>
<span class="quote3">&gt; &gt; &gt; 見当たらなかったので、質問させていただ</span>
<span class="quote3">&gt; &gt; &gt; きました。</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt; □サーババージョン</span>
<span class="quote3">&gt; &gt; &gt; PHP 4.3.2</span>
<span class="quote3">&gt; &gt; &gt; mysql Version 3.23.58</span>
<span class="quote3">&gt; &gt; &gt; MyISAM</span>
<span class="quote3">&gt; &gt; &gt; EUC-JP</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt; ＭＹＳＱＬでＤＵＭＰを行うと、</span>
<span class="quote3">&gt; &gt; &gt; 「'」の区切り文字で文字化けが発生するため、</span>
<span class="quote3">&gt; &gt; &gt; リストア時にエラーが発生します。</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt; これらの問題が行っているレコードの</span>
<span class="quote3">&gt; &gt; &gt; 特徴として、入力チェックが不十分なため、</span>
<span class="quote3">&gt; &gt; &gt; Varcharフィールドの最大バイト数をオーバー</span>
<span class="quote3">&gt; &gt; &gt; したレコードのようです。</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt; 文字コードの知識はあまり豊富では</span>
<span class="quote3">&gt; &gt; &gt; 無いのですが、EUC-JPの２バイト以上の文字が</span>
<span class="quote3">&gt; &gt; &gt; 途中で切れてしまっているのでは？と考えて</span>
<span class="quote3">&gt; &gt; &gt; います。</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt; ※念のため以下のテストを行ってみました。</span>
<span class="quote3">&gt; &gt; &gt; テスト用レコード、Varchar(5) に５以上の漢字を</span>
<span class="quote3">&gt; &gt; &gt; INSERTしたところ、最後の文字が文字化。</span>
<span class="quote3">&gt; &gt; &gt; ＭＹＳＱＬ4.1以降では自動的に調整されました。</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt; かなりのレコード数がありますので、</span>
<span class="quote3">&gt; &gt; &gt; なんとかスマートに解決したいのですが、</span>
<span class="quote3">&gt; &gt; &gt; 良い方法、DUMPオプション等がありましたら</span>
<span class="quote3">&gt; &gt; &gt; 教えていただけると助かります。</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt; どうぞ、よろしくお願い致します。</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; --</span>
<span class="quote2">&gt; &gt; Kensuke Kaneko &lt;kyanny@xxxxxxxxxx&gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; --</span>
<span class="quote1">&gt; トレードブック &lt;info@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>


-- 
Kensuke Kaneko &lt;kyanny@xxxxxxxxxx&gt;

</pre>
</div>
<p class="button"><a href="14199.html">[前]</a><a href="14201.html">[次]</a><a href="../list/14101-14200.html">[番号順一覧]</a><a href="../thread/14101-14200.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="14196.html">  14196 2007-09-13 01:28 [Shinichi Yoshimura &lt;] MySql3.23.58でdump時に「'」が文字化け   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14197.html">  14197 2007-09-13 10:24 ┗[&quot;Kensuke Kaneko&quot; &lt;ky]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14198.html">  14198 2007-09-13 14:06 　┗[Shinichi Yoshimura &lt;]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="14200.html">  14200 2007-09-13 18:17 　　┗[&quot;Kensuke Kaneko&quot; &lt;ky]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14206.html">  14206 2007-09-15 07:44 　　　┗[Shinichi Yoshimura &lt;]                                 </a></span>
</pre>
</body>
</html>
