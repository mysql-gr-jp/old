<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9277</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="9276">[前]</a><a href="9278">[次]</a><a href="../list/9201-9300">[番号順一覧]</a><a href="../thread/9201-9300">[スレッド一覧]</a></p>
<p class="id">
mysql:9277
</p>
<div class="header">
<p>
From: Kenji Irie &lt;Kenji Irie &lt;kenji@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 23 Apr 2004 00:29:56 +0900<br>
Subject: [mysql 09277] Re: auto_incrementで次番号を確認したい。<br>

</p>
</div>
<div class="body">
<pre>
はじめまして入江といいます。

もうスレッドが収束しそうなところへしゃしゃり出て申し訳ありません。

<span class="quote1">&gt;auto_increment型について質問がありまして投稿しました。高橋と申します。</span>

auto_increment型ですがこのように考えたらいかがでしょう。

※※主キーをコンピュータに任せるシステム※※

主キーの役割はご存知ですよね。

※行を特定するための列である。
※他の行と同じものがあってはならない。
※一度設定したら基本的には変更しない。

この特徴があるから他の表との関係を正常化することが出来ます。

当然その為には人が入力する値であれば同一のものが出てこないようにチェックをし
なければならない。

プログラムから生成する場合にも、過去に生成された値と重複しないように管理が必
要になります。

つまりこれを考えるだけで結構な工数が必要になりますよね。

「松枝」さんの言われているようにマルチタスクマルチユーザ環境であればさらにこ
れに衝突しないように同期を取っていかなければなりません。

(シングルとマルチではプログラムの仕方はまるっきり変わってきます。このあたり
は肌で感じるように経験を積んで下さい。)

ちょっと話がそれてしまいましたが、auto_increment型があればそれらを一切考えな
くても重複しない「主キー」値を生成してくれます。

先ほども言いましたが主キーには「データベースアプリケーションが行を特定する」
という意味を与えておけばいい事になります。

僕がシステムを設計する場合には主キーはこの意味以外を与えません。

年度が必要であれば年度列を設けます。連番が必要であれば連番列を設けます。

それが主キーでなければ後での調整もし易いはずです。

そして主キー列は表面には出しません。
(プログラム内、SQL内では使いますが人間の読む場所には出さないって事です)

Accessのオートナンバー型もMySQLのauto_increment型もかなりの人々が連番を付け
る為に利用されてしまいがちですが、数が自動的に増えていくのはあくまでも過去の
値と衝突しない一番簡単な方法をとっているに過ぎません。
(後は挿入順になってくれるってメリットもあるかもしれませんね)

当然auto_increment型は挿入しないとどんな値になるか分からないですよね。
他の表との関係をとっているときには致命傷になります。
ですからLAST_INSERT_ID()でMySQLにどんな値を入れたのか教えてもらう事になりま
す。

もう一度主キーの目的を考えてみて下さい。

それで失礼いたします。

-- 
Kenji Irie mailto:kenji@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="9276">[前]</a><a href="9278">[次]</a><a href="../list/9201-9300">[番号順一覧]</a><a href="../thread/9201-9300">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="9239">   9239 2004-04-20 18:45 [高橋政利 &lt;takahashi@] auto_incrementで次番号を確認したい。    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9240">   9240 2004-04-20 23:29 ┣[Shinya Kawaji &lt;kawaj]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9245">   9245 2004-04-21 09:00 ┃┗[高橋政利 &lt;takahashi@]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9248">   9248 2004-04-21 10:12 ┃　┗[Shinya Kawaji &lt;kawaj]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9250">   9250 2004-04-21 11:20 ┃　　┗[ML account &lt;ml@xxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9246">   9246 2004-04-21 09:15 ┣[&quot;片寄白王&quot; &lt;katayose]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9251">   9251 2004-04-21 17:39 ┃┗[川合孝典 &lt;gcd00051@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9252">   9252 2004-04-21 18:02 ┃　┣[&quot;山本　瑞己&quot; &lt;mizuki]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9253">   9253 2004-04-21 18:53 ┃　┗[ML account &lt;ml@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9254">   9254 2004-04-22 00:19 ┃　　┗[&quot;KATAYOSE hakuo&quot; &lt;ka]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9255">   9255 2004-04-22 01:42 ┃　　　┗[ML account &lt;ml@xxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9256">   9256 2004-04-22 09:02 ┃　　　　┗[&quot;片寄白王&quot; &lt;katayose]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9258">   9258 2004-04-22 09:36 ┃　　　　　┗[高橋政利 &lt;takahashi@]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9265">   9265 2004-04-22 11:44 ┃　　　　　　┗[ML account &lt;ml@xxxxx]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9249">   9249 2004-04-21 10:56 ┣[Seiji Tateyama &lt;tate]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9257">   9257 2004-04-22 09:07 ┣[高橋政利 &lt;takahashi@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9264">   9264 2004-04-22 11:44 ┃┗[ML account &lt;ml@xxxxx]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="9277">   9277 2004-04-23 00:29 ┗[Kenji Irie &lt;kenji@xx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9279">   9279 2004-04-23 08:01 　┗[高橋政利 &lt;takahashi@]                                     </a></span>
</pre>
</body>
</html>
