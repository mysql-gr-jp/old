<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4242</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4241.html">[前]</a><a href="4243.html">[次]</a><a href="../list/4201-4300.html">[番号順一覧]</a><a href="../thread/4201-4300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4242
</p>
<div class="header">
<p>
From: &lt;moeru@xxxxxxxxxx&gt;<br>
Date: Mon, 27 Aug 2001 19:33:43 +0900<br>
Subject: [mysql 04242] Re: 日時が変更されて update  される<br>

</p>
</div>
<div class="body">
<pre>
2001/08/26 00:57:06 +0900にとみたまさひろ &lt;tommy@xxxxxxxxxx&gt;さんに頂いた
「<a href="04203.html">[mysql 04203]</a> Re: 日時が変更されて update される」への返事です。

モエルです。

とみたさん、コメントありがとうございますm(__)m

<span class="quote5">&gt;&gt;&gt; &gt;&gt;update item set ends=1000000000 where itemid = 12345;</span>
<span class="quote5">&gt;&gt;&gt; &gt;&gt;こういうので、なんで数値が変わるのかが謎なんです。。</span>
<span class="quote3">&gt;&gt;&gt; ＳＱＬの書き方が正確じゃなかったです。</span>
<span class="quote3">&gt;&gt;&gt; 実際は、数値をクォートして文字型として入力してます。</span>
<span class="quote3">&gt;&gt;&gt; update item set ends='$ends' where itemid = 12345;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;うちでは再現しませんでした。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;mysql コマンドから、手で update item set ends='1000000000' where ～ と</span>
<span class="quote2">&gt;&gt;入力して、確かめた結果でしょうか？</span>
<span class="quote2">&gt;&gt;</span>

これについて、いろいろテストしてみました。
（コマンド入力もやってます）

同一の内容のデータベースを作ってあるので
そこに問題の日時のデータを全部流し込んで試してみました。

＊ファイルをコピーして、flush tabelsをしました。

でも、この問題は再現しませんでした。。
なんでか分かりません。。

今までほとんどmyisamchkをしてなかったので
これが原因かなとか思ってます。。

テーブルじゃなくて特定フィールドだけ壊れるなんてことは
ありえるんでしょうか？

<span class="quote2">&gt;&gt;あと、show fields from item; の結果も見せてもらえませんか。</span>

mysql&gt; show fields from item;
+---------------+--------------+------+-----+---------+----------------+
<span class="quote1">| Field         | Type         | Null | Key | Default | Extra          |</span>
+---------------+--------------+------+-----+---------+----------------+
<span class="quote1">| itemid        | int(20)      |      | PRI | NULL    | auto_increment |</span>
<span class="quote1">| userid        | int(11)      |      | MUL | 0       |                |</span>
<span class="quote1">| date          | int(16)      |      | MUL | 0       |                |</span>
<span class="quote1">| title         | varchar(100) |      | MUL |         |                |</span>
<span class="quote1">| category      | int(11)      | YES  |     | NULL    |                |</span>
<span class="quote1">| picurl　      | tinytext     | YES  |     | NULL    |                |</span>
<span class="quote1">| mode          | char(1)      | YES  | MUL | NULL    |                |</span>
<span class="quote1">| duration      | char(2)      | YES  |     | NULL    |                |</span>
<span class="quote1">| ends          | int(16)      |      | MUL | 0       |                |</span>
<span class="quote1">| description   | text         | YES  |     | NULL    |                |</span>
<span class="quote1">| location      | char(2)      | YES  |     | NULL    |                |</span>
<span class="quote1">| shipping      | char(1)      | YES  |     | NULL    |                |</span>
<span class="quote1">| payment       | char(1)      | YES  |     | NULL    |                |</span>
<span class="quote1">| price         | varchar(16)  | YES  |     | NULL    |                |</span>
+---------------+--------------+------+-----+---------+----------------+
＊結構長いので一部省略してます。

dateとendsは、今までvarchar(16)でした。
priceは、価格の幅が大きいためファイルサイズの節約で
varchar(16)にしてます。


モエル

</pre>
</div>
<p class="button"><a href="4241.html">[前]</a><a href="4243.html">[次]</a><a href="../list/4201-4300.html">[番号順一覧]</a><a href="../thread/4201-4300.html">[スレッド一覧]</a></p>
</body>
</html>
