<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15971</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15970">[前]</a><a href="15972">[次]</a><a href="../list/15901-16000">[番号順一覧]</a><a href="../thread/15901-16000">[スレッド一覧]</a></p>
<p class="id">
mysql:15971
</p>
<div class="header">
<p>
From: ram &lt;ram &lt;ram@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 14 Jun 2013 13:13:08 +0900<br>
Subject: [mysql 15971] ネットワーク越しでのmysqlの更新がうまくできない？<br>

</p>
</div>
<div class="body">
<pre>
Mysql+phpで日報システムを作っています。

独学でWebサイトの情報を見ながら作っているのですが、
更新系の処理に手間取っています。

前画面でボタンを押すと、以下のようなphpスクリプトを呼び出して、その中で
更新を行い、
結果を画面に出して、リンクタグで前画面に戻すようにしています。
イントラネット上の環境では正常に動作しています。
（前画面）<a href="http://192.168.">http://192.168.</a>*.***/moto.php
（更新処理）<a href="http://192.168.">http://192.168.</a>*.***/dbup.php
ところが、インターネット経由で、リモートアクセス（IPsec）すると、更新処
理までは正常にされているようなのですが、
更新処理のところで固まってしまい、処理結果が表示されません。

照会は正常にできており、更新自体もされてはいますので、
ファイヤウォールでMysqlのポートが開いていないのかと思ったのですが、そう
ではないように思います。

dbup.phpの内容は以下の通りです。
&lt;?php
// MySQL 接続
if (!($cn = mysql_connect(&quot;192.168.*.***&quot;, &quot;user&quot;, &quot;password&quot;))) {
die;
}
// MySQL DB 選択
if (!(mysql_select_db(&quot;mydatabase&quot;,$cn))) {
die;
}
　　（中略）
$SQL=&quot;UPDATE NIPPO SET = ***** &quot;;
　　（中略）
$sts = mysql_query($SQL,$cn);
if (!$sts) {
print &quot;&lt;br&gt;&lt;img src='img/error.jpg' width=32 height=32&gt;&quot;;
print &quot;更新に失敗しました。&quot;;
print &quot;&lt;br&gt;&lt;A HREF='javascript:history.back()'&gt;前のページに戻る&lt;/A&gt;&quot;;
} else {
print &quot;&lt;br&gt;&lt;img src='img/inf.jpg' width=32 height=32&gt;更新しました。&quot;;
print &quot;&lt;br&gt;&lt;A HREF='moto.php'&gt;前のページに戻る&lt;/A&gt;&quot;;
}
}
?&gt;
&lt;/body&gt;
&lt;/html&gt;

ネットワーク越しでmysqlを使うに当っての注意点や、根本的な誤ちのご指摘事項、
何れでも結構ですので、アドバイス頂ければ幸いです。



</pre>
</div>
<p class="button"><a href="15970">[前]</a><a href="15972">[次]</a><a href="../list/15901-16000">[番号順一覧]</a><a href="../thread/15901-16000">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="15971">  15971 2013-06-14 13:13 [ram &lt;ram@xxxxxxxxxx&gt;] ネットワーク越しでのmysqlの更新がうまくできない？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15972">  15972 2013-06-14 13:23 ┣[Isamu Moriyama &lt;mori]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15973">  15973 2013-06-14 14:45 ┃┗[ram &lt;ram@xxxxxxxxxx&gt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15975">  15975 2013-06-14 21:00 ┣[Watanabe Tomoyuki &lt;W]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15976">  15976 2013-06-17 16:11 ┃┗[ram &lt;ram@xxxxxxxxxx&gt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15977">  15977 2013-06-19 09:27 ┗[ram &lt;ram@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15978">  15978 2013-06-19 22:40 　┣[とみたまさひろ &lt;tomm]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15979">  15979 2013-06-20 14:45 　┃┗[ram &lt;ram@xxxxxxxxxx&gt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15980">@ 15980 2013-06-20 14:47 　┗[Yasuo Ohgaki &lt;yohgak]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15981">@ 15981 2013-06-25 11:22 　　┗[ram &lt;ram@xxxxxxxxxx&gt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15982">@ 15982 2013-06-25 13:53 　　　┣[松野弘法 &lt;hiro_matsu]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15983">  15983 2013-06-27 22:33 　　　┗[舘山 聖司 &lt;tateyan@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15984">  15984 2013-06-27 22:54 　　　　┗[舘山 聖司 &lt;tateyan@x]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15985">  15985 2013-06-28 10:51 　　　　　┗[松野弘法 &lt;hiro_matsu]                             </a></span>
</pre>
</body>
</html>
