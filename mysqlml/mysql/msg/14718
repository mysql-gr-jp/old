<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14718</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14717">[前]</a><a href="14719">[次]</a><a href="../list/14701-14800">[番号順一覧]</a><a href="../thread/14701-14800">[スレッド一覧]</a></p>
<p class="id">
mysql:14718
</p>
<div class="header">
<p>
From: Hideki SUNADA &lt;Hideki SUNADA &lt;hideki@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 20 Jan 2009 10:44:41 +0900<br>
Subject: [mysql 14718] Re: sum関数のバージョンによる動作の違い<br>

</p>
</div>
<div class="body">
<pre>
これじゃだめですか？

select sum(if(id is null, 0, id)) from tbl1;

idがnullの場合はゼロを返し、それ以外はidの値を返して
それをSumします。


On Tue, 20 Jan 2009 10:17:07 +0900
柴垣 &lt;akiro@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; 　いつもお世話になっています。</span>
<span class="quote1">&gt; 　mysqlを3.23から5.0に更新したときに、以下のトラブルに</span>
<span class="quote1">&gt; 見舞われました。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; create table tbl1(id int);</span>
<span class="quote1">&gt; insert into tbl1 values(null);</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; としておいて、sumを取ると、</span>
<span class="quote1">&gt; select sum(id) from tbl1;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 3.23.55では0が返され、5.0.45ではnullが返されます。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; これは周知のことなのかどうか、</span>
<span class="quote1">&gt; なにか別の違いから由来するものなのかどうか、</span>
<span class="quote1">&gt; また、nullを計算から除外(0として計算)するのに</span>
<span class="quote1">&gt; 簡単ないい方法があるのかどうか、</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 教えていただければ助かります。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; _/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt;  柴垣　 akiro@xxxxxxxxxx</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; _/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/</span>
<span class="quote1">&gt; </span>



</pre>
</div>
<p class="button"><a href="14717">[前]</a><a href="14719">[次]</a><a href="../list/14701-14800">[番号順一覧]</a><a href="../thread/14701-14800">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="14716">  14716 2009-01-20 10:17 [柴垣 &lt;akiro@xxxxxxxx] sum関数のバージョンによる動作の違い     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14717">@ 14717 2009-01-20 10:25 ┣[chuuken kenkou &lt;ken_]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="14718">  14718 2009-01-20 10:44 ┣[Hideki SUNADA &lt;hidek]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14719">  14719 2009-01-20 12:31 ┗[HIRATSUKA Sadao &lt;hir]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14720">  14720 2009-01-20 13:28 　┗[柴垣 &lt;akiro@xxxxxxxx]                                     </a></span>
</pre>
</body>
</html>
