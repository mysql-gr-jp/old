<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9496</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="9495.html">[前]</a><a href="9497.html">[次]</a><a href="../list/9401-9500.html">[番号順一覧]</a><a href="../thread/9401-9500.html">[スレッド一覧]</a></p>
<p class="id">
mysql:9496
</p>
<div class="header">
<p>
From: "HIROSE, Masaaki" &lt;"HIROSE, Masaaki" &lt;hirose31@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 01 Jun 2004 02:03:56 +0900<br>
Subject: [mysql 09496] Re: 複数のフィールドを絡めた select<br>

</p>
</div>
<div class="body">
<pre>ひろせといいます

# MySQL のバージョンもテーブル定義も不明なのでアレですが、

create table emp (
  ename varchar(8)
 ,hiredate date
 ,firedate date
);

なテーブルだとすると、

on "<a href="09495.html">[mysql 09495]</a> Re: 複数のフィールドを絡めた select"
   &lt;200405311538.i4VFcfrg026410@xxxxxxxxxx&gt;
at Tue, 01 Jun 2004 00:38:42 +0900
   UNO Shintaro &lt;uno@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; ・FROM句にサブクエリーが使えるバージョンの場合</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SELECT * FROM (</span>
<span class="quote1">&gt; SELECT 社員名,'入社' AS 入退社区分,入社日 AS 日付</span>
<span class="quote1">&gt; UNION ALL</span>
<span class="quote1">&gt; SELECT 社員名,'退社' AS 入退社区分,退社日 AS 日付</span>
<span class="quote1">&gt; ) AS X</span>
<span class="quote1">&gt; WHERE 日付 IS NOT NULL</span>
<span class="quote1">&gt; ORDER BY 日付,社員名</span>

『日付 IS NOT NULL』を中に入れちゃえば、

(select ename, '入社' as type, hiredate as date from emp)
union
(select ename, '退社' as type, firedate as date from emp where firedate is not null)
order by date,ename;

な感じで subquery なしでいけるので、union は使えるけど subquery は使え
ない MySQL 4.0.X でも動きますね。

ではでは

-- 
ひろせ
<a href="http://www.irori.org/">http://www.irori.org/</a>

</pre>
</div>
<p class="button"><a href="9495.html">[前]</a><a href="9497.html">[次]</a><a href="../list/9401-9500.html">[番号順一覧]</a><a href="../thread/9401-9500.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="9490.html">   9490 2004-05-31 22:20 [mokonan &lt;mokonan@xxx] 複数のフィールドを絡めた select         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9495.html">   9495 2004-06-01 00:38 ┗[UNO Shintaro &lt;uno@xx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="9496.html">   9496 2004-06-01 02:03 　┗["HIROSE, Masaaki" &lt;h]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9497.html">   9497 2004-06-01 09:46 　　┗[UNO Shintaro &lt;uno@xx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9498.html">   9498 2004-06-01 09:52 　　　┗[UNO Shintaro &lt;uno@xx]                                 </a></span>
</pre>


</body></html>