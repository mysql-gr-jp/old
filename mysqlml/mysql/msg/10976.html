<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:10976</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="10975.html">[前]</a><a href="10977.html">[次]</a><a href="../list/10901-11000.html">[番号順一覧]</a><a href="../thread/10901-11000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:10976
</p>
<div class="header">
<p>
From: naya &lt;naya &lt;SNA02388@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 14 Feb 2005 12:59:41 +0900<br>
Subject: [mysql 10976] MySQL+PHPでファイル／フォルダ名検索システムを作りたい<br>

</p>
</div>
<div class="body">
<pre>こんにちは。nayaと申します。

職場で共有しているファイルサーバーを対象に、Windowsの [F3]キー・ライクな
ファイル／フォルダ名検索システムを作りたいのですが、素人なりに、PHP+MySQL
で実現できないかと考えています。具体的な方法として、

(1) DOS窓で次のようなファイルパスリストを作成する

DIR /s /b c:\ &gt; c:\file.txt

（２～３分ほどかかって、４万行ほどのテキストが出力されます）

(2)出来上がったリストに対し、ファイルパス１行＝１レコードのinsert文に
　なるようにPerlで加工し、次のようなSQL文を実行する

create database url;
use url;
create table t_url(fullpass text);
insert into t_url(fullpass)values('\\\\fileserver\\word\\hoge1.doc');
insert into t_url(fullpass)values('\\\\fileserver\\excl\\hoge2.xls');
insert into t_url(fullpass)values('\\\\fileserver\\pwpt\\hoge3.ppt');
	:(以下４万行)

(3) 出来上がったものMySQLにinsertする

…一応、以上の手順によるプロトタイプはできあがり、検索もうまく動作するよ
うにはなりました。しかしいうまでもなく、ディレクトリ構造は刻々と変化して
いるわけで、せめて１時間に一回程度はデータベースを更新したいと思います。

ですが、自動で更新するためのスマートな方策が思いつきません。

例えば。Windowsのタスクスケジューラで以上の(1)(2)(3)をDOSの batファイル
として一時間に一回更新させるようにすることってできますでしょうか？（ただ
し更新の際は既存のデータベースであるurlをdropしてから(1)～(3)を実行する）

それとも、PHP+MySQLでという発想がそもそも間違っていますでしょうか？

どうしてもWebベースのファイル名／フォルダ名検索システムにしたいのですが
もっと何かいい方法があるようでしたらあわせてご教示いただけますと幸いです。

よろしくお願い致します。

環境：
PHP 5.0.3
MySQL 4.0.14b(Win)（←古いこと承知）
サーバー: IIS 5.1
クライアントは10台程度（全てWindowsXP-SP2、IE6という構成）

--
naya,
SNA02388@xxxxxxxxxx


</pre>
</div>
<p class="button"><a href="10975.html">[前]</a><a href="10977.html">[次]</a><a href="../list/10901-11000.html">[番号順一覧]</a><a href="../thread/10901-11000.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="10976.html">  10976 2005-02-14 12:59 [naya &lt;SNA02388@xxxxx] MySQL+PHPでファイル／フォルダ名検索システムを作りたい</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10977.html">  10977 2005-02-14 13:42 ┣["waya" &lt;wayama@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10978.html">  10978 2005-02-14 14:01 ┣[川合孝典 &lt;gcd00051@x]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10982.html">  10982 2005-02-14 17:21 ┃┗[深海水草 &lt;VYG01106@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10983.html">  10983 2005-02-14 18:16 ┃　┗[okkan ufo &lt;okkanufo@]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10979.html">  10979 2005-02-14 16:08 ┣[bon &lt;bon@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10980.html">  10980 2005-02-14 16:36 ┃┗[bon &lt;bon@xxxxxxxxxx&gt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10981.html">  10981 2005-02-14 16:43 ┣[Kousuke Furuhata &lt;fu]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10984.html">  10984 2005-02-14 21:06 ┣[Hiromasa Ochiai &lt;ohi]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10985.html">  10985 2005-02-14 22:17 ┗[naya &lt;SNA02388@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11013.html">  11013 2005-02-17 14:54 　┗[深海水草 &lt;VYG01106@x]                                     </a></span>
</pre>


</body></html>