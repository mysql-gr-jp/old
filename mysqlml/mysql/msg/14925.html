<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14925</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14924.html">[前]</a><a href="14926.html">[次]</a><a href="../list/14901-15000.html">[番号順一覧]</a><a href="../thread/14901-15000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14925
</p>
<div class="header">
<p>
From: 舞永　裕樹 &lt;舞永　裕樹 &lt;mysql@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 18 Jun 2009 15:46:55 +0900<br>
Subject: [mysql 14925] MySQL5系でセグメント越えの接続が遅い件について<br>

</p>
</div>
<div class="body">
<pre>
初めまして舞永と申します。

掲題の件につきまして自分のスキルでは万策尽きたため、皆様のお知恵を拝借し
たく投稿いたしました。
当方様々な環境で検証した結果、Ｌ３によるルーティングが発生する環境でコネ
クションに時間がかかるという結論に達しております。
またMySQLバージョンに依存することから、何か設定により解決できるのではと
思っております。

具体的にはＬ３を経由してルーティングすればするほど、コネクションに時間が
かかります。
フロアＬ３(複雑な設定なし)のみ：約３秒
基幹Ｌ３＋フロアＬ３：約１５秒
フロアＬ３→基幹Ｌ３→フロアＬ３：約１８秒
などです。一旦コネクトしてしまうとクエリの発行や応答は非常に高速で全く問
題なしです。

下記いろいろな構成を組み合わせて検証したところ、全てのケースでNGなのですが、
MySQL4.1の環境ではサックリ接続できます。
ちなみにIP、DNSアクセス共に同じです。

＜MySQLインストール環境＞
WindowsServer2008＆MySQL5.1
WindowsServer2003＆MySQL5.1とMySQL5.0

＜接続クライアント＞
WindowsXP、Vista、７

＜接続方法＞
ADO
ODBC
Navicat(何を使っているか知りません)

＜L3の機種＞
シスコ：Catalyst4948-10GE
シスコ：Catalyst3750G-24TS
富士通：SH5124T

同一セグメントでのアクセスでは、MySQLサービス起動後の１回目接続だけ約
１３秒待たされることから、
MySQL5系列では初期コネクション時に何かをやっているのでは？と推測します。

こちらのログにある
14631「MySQL5，リモートからの接続が遅い」の設定では変化なし。
12754「コネクション時のレスポンスについて」の事象が恐らく同じものと思わ
れますが解決方法の記載が無い状態です。

どなたか同様の症状で解決したなどありましたら、是非ご教示ください。
よろしくお願いいたします。

</pre>
</div>
<p class="button"><a href="14924.html">[前]</a><a href="14926.html">[次]</a><a href="../list/14901-15000.html">[番号順一覧]</a><a href="../thread/14901-15000.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="14925.html">  14925 2009-06-18 15:46 [舞永　裕樹 &lt;mysql@xx] MySQL5系でセグメント越えの接続が遅い件について</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14926.html">  14926 2009-06-18 16:13 ┗[Mikiya Okuno &lt;Mikiya]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14927.html">  14927 2009-06-18 16:45 　┗[舞永　裕樹 &lt;mysql@xx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14928.html">  14928 2009-06-18 16:51 　　┗[舞永　裕樹 &lt;mysql@xx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14929.html">  14929 2009-06-18 17:50 　　　┗[舞永　裕樹 &lt;mysql@xx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14930.html">  14930 2009-06-18 17:56 　　　　┗[Mikiya Okuno &lt;Mikiya]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14931.html">  14931 2009-06-19 10:33 　　　　　┗[Tetsuro IKEDA &lt;te.ik]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14932.html">  14932 2009-06-19 20:01 　　　　　　┗[舞永　裕樹 &lt;mysql@xx]                           </a></span>
</pre>
</body>
</html>
