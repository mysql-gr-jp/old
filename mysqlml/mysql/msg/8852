<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8852</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8851">[前]</a><a href="8853">[次]</a><a href="../list/8801-8900">[番号順一覧]</a><a href="../thread/8801-8900">[スレッド一覧]</a></p>
<p class="id">
mysql:8852
</p>
<div class="header">
<p>
From: Kazuhiro Yoshida &lt;Kazuhiro Yoshida &lt;moriq@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 22 Feb 2004 02:22:32 +0900<br>
Subject: [mysql 08852] Re: <br>

</p>
</div>
<div class="body">
<pre>
もりきゅうです。

&lt;konet218@xxxxxxxxxx&gt; wrote:
<span class="quote1">&gt; と、申されましても何とも・・・(汗)</span>
^^;
PHPの勉強がてら作ってみました。
* php-4.3.4-Win32.zip

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;title&gt;t1&lt;/title&gt;
&lt;link rel=stylesheet type=&quot;text/css&quot; href=&quot;pi.css&quot;&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=shift_jis&quot;&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;?php
$db = mysql_connect(&quot;localhost&quot;,&quot;user&quot;,&quot;password&quot;); // 変更してください
mysql_select_db(&quot;test&quot;); // 変更してください
$res = mysql_query(&quot;select
    date_format(mail_datetime,'%Y-%m-%d') as mail_date,
    hour(mail_datetime) as mail_hour,
    count(*)
  from master_tb, mail_tb
  where master_group_id = 1
    and mail_to_master_id = master_id
  group by mail_date, mail_hour;&quot;);
while ($row = mysql_fetch_row($res)) {
  list($date, $hour, $count) = $row;
  $count_tb[$date][$hour] = $count;
//  echo join(&quot;\t&quot;, $row), &quot;\n&quot;;
}
mysql_close($db);
?&gt;

&lt;table&gt;
&lt;tr&gt;
&lt;th&gt;日付 / 時刻&lt;/th&gt;
&lt;?php
for ($hour = 0; $hour &lt; 24; $hour++) {
  print &quot;&lt;th&gt;$hour&lt;/th&gt;\n&quot;;
}
?&gt;
&lt;/tr&gt;
&lt;?php
$time = time();
$firstday_time = mktime(0,0,0,
  date(&quot;m&quot;,$time),1,date(&quot;Y&quot;,$time));
$time = $firstday_time;
while (1) {
  $date = date(&quot;Y-m-d&quot;,$time);
?&gt;
&lt;tr&gt;
&lt;td&gt;&lt;?php print $date ?&gt;&lt;/td&gt;
&lt;?php
for ($hour = 0; $hour &lt; 24; $hour++) {
  $count = $count_tb[$date][$hour];
  print &quot;&lt;td&gt;$count&lt;/td&gt;\n&quot;;
}
?&gt;
&lt;/tr&gt;
&lt;?php
  $tomorrow_time = mktime(0,0,0,
    date(&quot;m&quot;,$time),date(&quot;d&quot;,$time)+1,date(&quot;Y&quot;,$time));
  if (date(&quot;m&quot;,$tomorrow_time) != date(&quot;m&quot;,$time))
    break;
  $time = $tomorrow_time;
}
?&gt;
&lt;/table&gt;

&lt;/body&gt;
&lt;/html&gt;

----
YOSHIDA Kazuhiro  moriq@xxxxxxxxxx  <a href="http://www.moriq.com/">http://www.moriq.com/</a>

</pre>
</div>
<p class="button"><a href="8851">[前]</a><a href="8853">[次]</a><a href="../list/8801-8900">[番号順一覧]</a><a href="../thread/8801-8900">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8833">   8833 2004-02-20 17:48 [&lt;lavlav@xxxxxxxxxx&gt; ]                                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8834">   8834 2004-02-20 17:55 ┣[&lt;lavlav@xxxxxxxxxx&gt; ] Re: SQL 文について                    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8836">   8836 2004-02-20 18:09 ┣[遠藤 俊裕 &lt;endo_t@xx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8839">   8839 2004-02-20 18:40 ┃┗[&lt;lavlav@xxxxxxxxxx&gt; ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8841">   8841 2004-02-20 20:23 ┃　┣[&lt;numata@xxxxxxxxxx&gt; ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8844">   8844 2004-02-21 04:51 ┃　┣[Kazuhiro Yoshida &lt;mo]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8846">   8846 2004-02-21 14:24 ┃　┃┗[&lt;konet218@xxxxxxxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8849">   8849 2004-02-21 17:59 ┃　┃　┣[Kazuhiro Yoshida &lt;mo]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8850">   8850 2004-02-21 18:38 ┃　┃　┃┗[&lt;konet218@xxxxxxxxxx]                             </a></span>
<span class="current">-&gt;&nbsp;<a href="8852">   8852 2004-02-22 02:22 ┃　┃　┃　┗[Kazuhiro Yoshida &lt;mo]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8855">   8855 2004-02-22 16:11 ┃　┃　┗[&quot;katayose&quot; &lt;katayose]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8857">   8857 2004-02-23 02:03 ┃　┃　　┗[ML account &lt;ml@xxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8847">   8847 2004-02-21 15:16 ┃　┗[ML account &lt;ml@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8848">   8848 2004-02-21 17:18 ┃　　┗[&lt;konet218@xxxxxxxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8838">   8838 2004-02-20 18:15 ┗[Shingo Yamagai &lt;yama] Re: SQL 文について                    </a></span>
</pre>
</body>
</html>
