<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4969</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="4968.html">[前]</a><a href="4970.html">[次]</a><a href="../list/4901-5000.html">[番号順一覧]</a><a href="../thread/4901-5000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4969
</p>
<div class="header">
<p>
From: "KAWAI,Takanori" &lt;"KAWAI,Takanori" &lt;GCD00051@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 18 Jan 2002 13:44:08 +0900<br>
Subject: [mysql 04969] Re: 数値型の扱いについて<br>

</p>
</div>
<div class="body">
<pre>川合孝典です。

----- Original Message -----
From: "Youhei Hayakawa" &lt;hayakawayuh@xxxxxxxxxx&gt;
To: &lt;ml@xxxxxxxxxx&gt;
Sent: Friday, January 18, 2002 11:38 AM
Subject: <a href="04958.html">[mysql 04958]</a> 数値型の扱いについて


<span class="quote1">&gt; はじめまして</span>
<span class="quote1">&gt; 早川と申します。</span>
（中略）
<span class="quote1">&gt; として作った sql を流す際に $i が NULL ですと、error が</span>
<span class="quote1">&gt; 帰って来ます。</span>
<span class="quote1">&gt; 従って、その対策として</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; $sql = "select * from table";</span>
<span class="quote1">&gt; $sql .= "where hoge = '$i'";</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; の様に、$i を '' で囲ってしまうとエラーが出なくなるので</span>
<span class="quote1">&gt; すが、ホントにこれで良いのかと不安に思っています。</span>
<span class="quote1">&gt; これは対応として mysql 的に正しいのでしょうか？</span>
データが正しくとれないかも知れないという意味では
どうかと思いますが。

$iがundefの場合には0の値がとれて欲しいんでしょうか？
それともNULLの値が取れて欲しいんでしょうか？
＃今のままでは0のものがとれるはずですが
0のものが取れて欲しいのであれば、$iに明示的に0を入れるほうが
正しい対応ではないかとも思います。
# $i = 0 unless($i); とかして

NULLのものをとりたい場合、DBIを使っているのであれば、
ちょいと大掛かりですが、こんな手もありかなと。

$hSt = $hDb-&gt;prepare(
  'SELECT * FROM test where IF(ISNULL(?), hoge is NULL, hoge=?)'
);
$hSt-&gt;execute($i, $i);

===================================================
川合 孝典 (Hippo2000)
   DBI日本語メーリングリスト管理人、Kansai.pm所属
   kwitknr@xxxxxxxxxx GCD00051@xxxxxxxxxx
   <a href="http://member.nifty.ne.jp/hippo2000">http://member.nifty.ne.jp/hippo2000</a>
   <a href="http://www.hippo2000.net/">http://www.hippo2000.net/</a>
===================================================


</pre>
</div>
<p class="button"><a href="4968.html">[前]</a><a href="4970.html">[次]</a><a href="../list/4901-5000.html">[番号順一覧]</a><a href="../thread/4901-5000.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="4958.html">   4958 2002-01-18 11:38 [Youhei Hayakawa &lt;hay] 数値型の扱いについて                    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4959.html">   4959 2002-01-18 11:44 ┣["Ningfeng Yang" &lt;yan]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4960.html">   4960 2002-01-18 11:51 ┣[Satoshi Koiwa &lt;koiwa]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4961.html">   4961 2002-01-18 12:10 ┣[Noriyuki Sakimura &lt;s]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4970.html">   4970 2002-01-18 13:52 ┃┗[Youhei Hayakawa &lt;hay]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="4969.html">   4969 2002-01-18 13:44 ┗["KAWAI,Takanori" &lt;GC]                                       </a></span>
</pre>


</body></html>