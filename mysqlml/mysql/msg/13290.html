<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13290</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13289.html">[前]</a><a href="13291.html">[次]</a><a href="../list/13201-13300.html">[番号順一覧]</a><a href="../thread/13201-13300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13290
</p>
<div class="header">
<p>
From: nomoto &lt;nomoto &lt;shin-1@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 02 Sep 2006 19:03:15 +0900<br>
Subject: [mysql 13290] Re: ひらがな先頭文字のselectができない<br>

</p>
</div>
<div class="body">
<pre>
  こんばんは。nomotoです。

最近似た事をやりましたが、その都度、複雑なSQLを発行するより
テーブルに１フィールド追加して、データ登録時に頭文字を一緒に登録した
ほうが処理が軽くなると思います。そのとき濁点も取ってしまえば楽ですしね。

// 濁点を分離するため、まず半角カタカナに変換
$kana = mb_convert_kana($name, &quot;kh&quot;, &quot;euc&quot;);
// 濁点なしの全角ひらがなに変換することで、濁点なしのひらがな先頭１文字を取り出す
$kashira_moji = substr(mb_convert_kana($kana, &quot;H&quot;, &quot;euc&quot;), 0, 2);
こんな風に変換しました。

私は50音とそれ以外だけ分類すればよかったので、50音のArrayを準備して
おいて、上記で出てきた頭文字がそのArrayに入っているかin_arrayで調べ、
それ以外だったら「その他」としてDB登録しました。

<span class="quote1">&gt;ひらがな（・かたかな）のSELECTがしたいのですがどうしても</span>
<span class="quote1">&gt;うまくいかないのです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;やりたいのは「あるフィールドをあ行、か行、さ行、、わ行、英字、その他に分</span>
<span class="quote1">&gt;類する」ことです。</span>
<span class="quote1">&gt;まずひらがな（・カタカナ）分類を行っていますが</span>
<span class="quote1">&gt;フィールドの先頭のひらがなの前方一致をするところがうまくいきません。</span>


</pre>
</div>
<p class="button"><a href="13289.html">[前]</a><a href="13291.html">[次]</a><a href="../list/13201-13300.html">[番号順一覧]</a><a href="../thread/13201-13300.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13289.html">  13289 2006-09-02 18:16 [Ushiro &lt;ushi9999@xxx] ひらがな先頭文字のselectができない      </a></span>
<span class="current">-&gt;&nbsp;<a href="13290.html">  13290 2006-09-02 19:03 ┗[nomoto &lt;shin-1@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13291.html">  13291 2006-09-04 09:27 　┗[Ushiro &lt;ushi9999@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13292.html">  13292 2006-09-04 09:46 　　┗[Ushiro &lt;ushi9999@xxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13304.html">  13304 2006-09-05 09:35 　　　┗[Ushiro &lt;ushi9999@xxx]                                 </a></span>
</pre>
</body>
</html>
