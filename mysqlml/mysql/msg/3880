<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3880</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="3879">[前]</a><a href="3881">[次]</a><a href="../list/3801-3900">[番号順一覧]</a><a href="../thread/3801-3900">[スレッド一覧]</a></p>
<p class="id">
mysql:3880
</p>
<div class="header">
<p>
From: Tybalt of Capulet &lt;Tybalt of Capulet &lt;ice-man@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 04 Jul 2001 00:53:00 +0900<br>
Subject: [mysql 03880] Re: auto_increment の値の取得について<br>

</p>
</div>
<div class="body">
<pre>
神崎です。

<span class="quote2">&gt; &gt; マニュアルの説明ではmysql_insert_id()は</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 追加で、MySQLのマニュアルのLAST_INSERT_ID関数の説明と</span>

mysql_insert_id()とLAST_INSERT_IDの説明じっくり読みました。
過去ログも読みました。
が、違いがさっぱりわかりません。
理解力なくてすいません・・・
Aというテーブルに対してインサート文を発行してからmysql_insert_id()を得る
までの間に他の違う人がAテーブルに同じインサート文を発行した場合、
auto_incrementフィールド値がmysql_insert_id()を実行することにより
最初にインサート文を発行したidが返ってくるのか、もしくは後のインサートで
発行したidが返ってくるのかがいまいち見えてきません。
マニュアルを読んだ私の理解ですとmysql_insert_id()を使うような
気がするのですが確実ではありません。
過去ログにも「2278」には

<span class="quote1">&gt; LAST_INSERT_ID() は、レコードを INSERT した時に、そのレコードの </span>
<span class="quote1">&gt; AUTO_INCREMENT フィールドに設定された値を知りたい時に使用します。</span>

とLAST_INSERT_ID()を使うとありますし、「1708」には

<span class="quote1">&gt; mysql_db_query(&quot;somedatabase&quot;,&quot;insert into q(id) values(null)&quot;);</span>
<span class="quote1">&gt; echo &quot;Your access ID is :&quot;.mysql_insert_id();</span>

というようにmysql_insert_id()を使うとあります。
どっちが本当なのかわかりません。
申し訳ございませんが教えていただけないでしょうか？

<span class="quote2">&gt; &gt; $insid = mysql_fetch_array( mysql_query( &quot;mysql_insert_id() as ins&quot; ) );</span>
<span class="quote2">&gt; &gt; &lt;? echo $insid[ins] ?&gt;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; PHPのマニュアルのmysql_insert_id()の説明</span>
<span class="quote1">&gt; を読んでみてください。</span>

すいません、マンモス本に書いてありました。
下記のようにしたところ取得できました。

&lt;?
$insid = mysql_insert_id();
?&gt;


________________________________R_y_u_____
神崎 隆
Mail：ice-man@xxxxxxxxxx
_____K_a_n_z_a_k_i________________________


</pre>
</div>
<p class="button"><a href="3879">[前]</a><a href="3881">[次]</a><a href="../list/3801-3900">[番号順一覧]</a><a href="../thread/3801-3900">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="3877">   3877 2001-07-03 18:24 [Tybalt of Capulet &lt;i] auto_increment の値の取得について       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3878">   3878 2001-07-03 19:17 ┗[Akihiko Shinohara &lt;s]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="3880">   3880 2001-07-04 00:53 　┗[Tybalt of Capulet &lt;i]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3881">   3881 2001-07-04 10:11 　　┗[Akihiko Shinohara &lt;s]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3883">   3883 2001-07-04 13:01 　　　┗[Tybalt of Capulet &lt;i]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3884">   3884 2001-07-04 13:32 　　　　┣[Akihiko Shinohara &lt;s]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3892">   3892 2001-07-04 23:46 　　　　┗[とみたまさひろ &lt;tomm]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3897">   3897 2001-07-05 02:47 　　　　　┗[Tybalt of Capulet &lt;i]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3912">   3912 2001-07-05 16:24 　　　　　　┗[とみたまさひろ &lt;tomm]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3913">   3913 2001-07-05 16:54 　　　　　　　┗[Tybalt of Capulet &lt;i]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3914">   3914 2001-07-05 21:04 　　　　　　　　┣[とみたまさひろ &lt;tomm]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3918">   3918 2001-07-06 15:09 　　　　　　　　┗[ken &lt;kenn@xxxxxxxxxx] my.cnf で max_allowed_packet が反映されない？</a></span>
</pre>
</body>
</html>
