<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13681</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13680">[前]</a><a href="13682">[次]</a><a href="../list/13601-13700">[番号順一覧]</a><a href="../thread/13601-13700">[スレッド一覧]</a></p>
<p class="id">
mysql:13681
</p>
<div class="header">
<p>
From: &quot;Mitsuru Araki&quot; &lt;&quot;Mitsuru Araki&quot; &lt;gunny517@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 22 Jan 2007 00:00:09 +0900<br>
Subject: [mysql 13681] トランザクション中のオートインクリメント値<br>

</p>
</div>
<div class="body">
<pre>
いつも勉強させて頂いております。

早速ですが、
トランザクション中のオートインクリメント値について、疑問点がありご質問いたします。
例えば、トランザクションを開始後
１．steatment1:オートインクリメント値を含むテーブルにインサート処理を実行
２．steatment2:last_insert_id()を使ってsteatment1でインサートされたオートインクリメント値を取得
３．steatment3:steatment2で取得したオートインクリメント値を他のテーブルにインサート
4.全てインサートされればコミットする
というような処理を行いたいのですが、steatment2 でsteatment1のオートインクリメント値を取得する事は可能なのでしょうか？
（つまりコミットする前でもlast_insert_id()が目的の値を返すか、それとも、トランザクション開始前の値を返すかという意味です。）

また、もし目的の値を返さない場合で、このような処理をしたい場合、
適切な方法はどのような方法なのでしょうか？

と、ここまで書いていてふと思ったのですが、
もしかして、トランザクションを開始した時点でテーブルがロックされて
自らの問い合わせ（last_insert_id()）も値が戻らないのでしょうか？

よろしくお願い致します。

</pre>
</div>
<p class="button"><a href="13680">[前]</a><a href="13682">[次]</a><a href="../list/13601-13700">[番号順一覧]</a><a href="../thread/13601-13700">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="13681">  13681 2007-01-22 00:00 [&quot;Mitsuru Araki&quot; &lt;gun] トランザクション中のオートインクリメント値</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13682">  13682 2007-01-22 01:03 ┣[kubo &lt;jazzflute@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13683">  13683 2007-01-22 10:42 ┗[&quot;T.Hirotsu&quot; &lt;hirotsu]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13694">  13694 2007-01-25 20:37 　┗[&quot;Mitsuru Araki&quot; &lt;gun]                                     </a></span>
</pre>
</body>
</html>
