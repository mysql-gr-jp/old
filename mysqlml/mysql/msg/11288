<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11288</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="11287">[前]</a><a href="11289">[次]</a><a href="../list/11201-11300">[番号順一覧]</a><a href="../thread/11201-11300">[スレッド一覧]</a></p>
<p class="id">
mysql:11288
</p>
<div class="header">
<p>
From: Manabu Tatesawa &lt;Manabu Tatesawa &lt;mabu@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 28 Mar 2005 21:42:46 +0900<br>
Subject: [mysql 11288] Re: _[mysql_11190]_updat  e文の_set句に集合関数countを使いたい<br>

</p>
</div>
<div class="body">
<pre>
館澤です。

ご返答、どうも有難う御座います。

4.1ではselect結果をテーブルのように扱えること（サブクエリー？）を
利用して、間接的に集合関数の結果を set するのですね。
＃なるほど！です。

4.1以前のMySQLだと、やはりテンポラリテーブルを使うか
delete+insert の方法しかないということで納得です。

非常に参考になりました。
どうも有難う御座います。


Akira Kuroda wrote:
<span class="quote1">&gt; 黒田と申します．</span>
(snip)
<span class="quote1">&gt; 4.1.x ではこういう SQL で更新できました．</span>
<span class="quote1">&gt;  update TCount c, (select name, count(*) as cnt from tname group by name) n</span>
<span class="quote1">&gt;      set c.cnt = n.cnt</span>
<span class="quote1">&gt;    where c.name  = n.name</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; それ以前であれば 2段階に分けるしかないと思います．</span>
<span class="quote1">&gt; 1. tname と tcount を join してマッチするレコードを tcount から delete</span>
<span class="quote1">&gt; 2. tname と tcount を join して count を計算して tcount に insert</span>


-- 
館澤学
mabu@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="11287">[前]</a><a href="11289">[次]</a><a href="../list/11201-11300">[番号順一覧]</a><a href="../thread/11201-11300">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="11190">  11190 2005-03-18 14:26 [Manabu Tatesawa &lt;mab] update文のset句に集合関数countを使いたい</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11287">  11287 2005-03-28 20:56 ┗[Akira Kuroda &lt;akurod] Re: _[mysql_11190]_updat e文の_set句に集合関数co_untを使いたい</a></span>
<span class="current">-&gt;&nbsp;<a href="11288">  11288 2005-03-28 21:42 　┗[Manabu Tatesawa &lt;mab] Re: _[mysql_11190]_updat  e文の_set句に集合関数countを使いたい</a></span>
</pre>
</body>
</html>
