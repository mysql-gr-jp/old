<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:6687</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="6686">[前]</a><a href="6688">[次]</a><a href="../list/6601-6700">[番号順一覧]</a><a href="../thread/6601-6700">[スレッド一覧]</a></p>
<p class="id">
mysql:6687
</p>
<div class="header">
<p>
From: とみたまさひろ &lt;とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 10 Dec 2002 22:19:21 +0900<br>
Subject: [mysql 06687] Re: 小数点を含んだ数値の演算について<br>

</p>
</div>
<div class="body">
<pre>
とみたです。

On Tue, 10 Dec 2002 20:54:52 +0900
&quot;matsuda&quot; &lt;matsuda@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; マニュアルに</span>
<span class="quote1">&gt; ==============================================================</span>
<span class="quote1">&gt; コンピュータでは小数点数は正確な数値としては格納されず、double値</span>
<span class="quote1">&gt; として格納されます。</span>
<span class="quote1">&gt; 次の結果によってだまされるでしょう</span>
<span class="quote1">&gt; TRUNCATE(10.28*100,0) → 1027</span>
<span class="quote1">&gt; 上記は10.28は実際には、10.279999999999999のようなものとして</span>
<span class="quote1">&gt; 格納されるために発生します。</span>
<span class="quote1">&gt; ==============================================================</span>
<span class="quote1">&gt; と記述されているので、TRUNCATE関数を用いることによって小数点以下が</span>
<span class="quote1">&gt; 切り捨てられてしまっていると思われるのですが、こういう場合に</span>
<span class="quote1">&gt; 正確な結果を得たいときには、どうやって回避したら良いのでしょうか？</span>

誤差を出したくないのなら、浮動小数点数は使うべきではないです。たとえば、
suryo の少数点以下が必ず２桁なのなら、100倍した整数として格納しておい
て、結果を出力するときに、100で割って出力するとか…。

<span class="quote1">&gt; たまたまこのような数値の組み合わせで得られた結果だと思うのですが、</span>
<span class="quote1">&gt; 乗算以外や、上記数値以外にもこういった現象が起こりうると考えると</span>
<span class="quote1">&gt; 演算を使用するときには必ず注意した方がいい、</span>
<span class="quote1">&gt; ということになるのでしょうか？</span>

そうですね。よく言われる例では、0.1 を 10回足すと 0.99999... になると
いうのがあります。浮動小数点を使う限り、コンピュータでは誤差は避けられ
ない問題だと思います。

-- 
とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;
日本MySQLユーザ会 <a href="../../../index.html">http://www.mysql.gr.jp</a>

</pre>
</div>
<p class="button"><a href="6686">[前]</a><a href="6688">[次]</a><a href="../list/6601-6700">[番号順一覧]</a><a href="../thread/6601-6700">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="6685">   6685 2002-12-10 20:54 [&quot;matsuda&quot; &lt;matsuda@x] 小数点を含んだ数値の演算について        </a></span>
<span class="current">-&gt;&nbsp;<a href="6687">   6687 2002-12-10 22:19 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6695">   6695 2002-12-11 12:08 ┃┗[SUGAWARA Hajime &lt;sug]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6697">   6697 2002-12-11 13:15 ┃　┗[SUGAWARA Hajime &lt;sug]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6693">   6693 2002-12-11 12:02 ┗[madara &lt;madara@xxxxx]                                       </a></span>
</pre>
</body>
</html>
