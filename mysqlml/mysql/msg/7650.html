<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:7650</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="7649.html">[前]</a><a href="7651.html">[次]</a><a href="../list/7601-7700.html">[番号順一覧]</a><a href="../thread/7601-7700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:7650
</p>
<div class="header">
<p>
From: "m.yamazaki" &lt;"m.yamazaki" &lt;yamazaki.ms@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 6 May 2003 18:29:12 +0900<br>
Subject: [mysql 07650] C 言語の API によるクエリの中断について<br>

</p>
</div>
<div class="body">
<pre>こんにちは
山崎と申します。
いつもいろいろと勉強させていただいております。
下記の質問ですが、どなたかご存知でしたら教えてください。

環境は以下です。
サーバ：Solaris8
MySQL：3.23.53
Cコンパイラ：gcc

使用したCのAPIは以下です。
mysql_init
mysql_real_connect
mysql_query
mysql_close
mysql_thread_id
mysql_kill

例えですが、LOAD DATA文にて
1000万件入っているファイルをテーブルに挿入するのに
2分かかるとします。
それをLOAD DATA文投入1分後に強制的に中断するには
どのようにすればよいのでしょうか？
下記の方法は試したのですが、だめでした。

試した内容
・タイマを張って1分後にmysql_closeする
  →mysql_query関数からは戻ってきますが、
    投入したSQL文が中断せずデータが挿入されてしまいます。

・mysql_thread_idにて接続スレッド取得後、タイマを張って1分後に
  mysql_kill。
  →mysql_query関数から戻ってこないため、mysql_killが
    LOAD DATA文終了後にしか投入されない。

以上です。よろしくお願い致します。


</pre>
</div>
<p class="button"><a href="7649.html">[前]</a><a href="7651.html">[次]</a><a href="../list/7601-7700.html">[番号順一覧]</a><a href="../thread/7601-7700.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="7650.html">   7650 2003-05-06 18:29 ["m.yamazaki" &lt;yamaza] C 言語の API によるクエリの中断について </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7658.html">   7658 2003-05-07 08:09 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7661.html">   7661 2003-05-07 10:12 　┗["m.yamazaki" &lt;yamaza]                                     </a></span>
</pre>


</body></html>