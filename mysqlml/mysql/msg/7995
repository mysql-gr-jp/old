<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:7995</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="7994">[前]</a><a href="7996">[次]</a><a href="../list/7901-8000">[番号順一覧]</a><a href="../thread/7901-8000">[スレッド一覧]</a></p>
<p class="id">
mysql:7995
</p>
<div class="header">
<p>
From: &lt;shin1@xxxxxxxxxx&gt;<br>
Date: Tue, 08 Jul 2003 11:40:56 +0900<br>
Subject: [mysql 07995] select 結果に他テーブルの該当件数を加えたい<br>

</p>
</div>
<div class="body">
<pre>
  こんにちは。野元です。

MySQLのSQL文の機能でこういう事はできるのでしょうか。

現在、ATBLテーブルの内容を取得するselect文を実行して
います。(*の良し悪しは抜きにして)
select ATBL.* from ATBL

新しくATBLのCode(主キー)に対応する複数件の明細をもった
BTBLが追加になりまして、そちらはCode＋No(明細番号)を
持っています。
ATBLの内容を取得する結果に追加でCodeに対応するBテーブル
の件数を拾ってこようと思い、以下のように書いたのですが
エラーになってしまいました。

select ATBL.*, BCNT.cnt from ATBL
 left join
(select Code, count(Code) as cnt from BTBL
 group by Code) as BCNT
on (ATBL.Code=BTBL.Code)

このような書き方はできないのでしょうか。それとも私の
SQLが間違ってるのでしょうか。

</pre>
</div>
<p class="button"><a href="7994">[前]</a><a href="7996">[次]</a><a href="../list/7901-8000">[番号順一覧]</a><a href="../thread/7901-8000">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="7995">   7995 2003-07-08 11:40 [&lt;shin1@xxxxxxxxxx&gt;  ] select 結果に他テーブルの該当件数を加えたい</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7996">   7996 2003-07-08 11:45 ┗[野元 真一 &lt;shin1@xxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7997">   7997 2003-07-08 12:34 　┗[Shinya Kawaji &lt;kawaj]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7998">   7998 2003-07-08 12:55 　　┗[野元 真一 &lt;shin1@xxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7999">   7999 2003-07-08 13:06 　　　┗[野元 真一 &lt;shin1@xxx]                                 </a></span>
</pre>
</body>
</html>
