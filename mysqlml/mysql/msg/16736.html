<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:16736</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="16735.html">[前]</a>[次]<a href="../list/16701-16800.html">[番号順一覧]</a><a href="../thread/16701-16800.html">[スレッド一覧]</a></p>
<p class="id">
mysql:16736
</p>
<div class="header">
<p>
From: 東　兼充 &lt;東　兼充 &lt;kanemitsu@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 24 Dec 2024 21:10:13 +0900 (JST)<br>
Subject: [mysql 16736] Re: [mysql 16735] Re: [mysql 16734] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。<br>

</p>
</div>
<div class="body">
<pre>小山様　ありがとうございました。

$linkに問題があったようです。
名前を変えるとほぼ正常に接続できるようになりました。
ありがとうございました。

東



<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; 小山です。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; おそらく
</span>
<span class="quote1">&gt; 
</span>
<span class="quote2">&gt; &gt; おなじ処理を
</span>
<span class="quote2">&gt; &gt; 少し後の行でおこなうとよみこめなくなり
</span>
<span class="quote2">&gt; &gt; データベースから切断されてしまうようです。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; この間で $link 変数が上書きされて、なんらかの文字列になってしまっているんでしょうね。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; $mysqli = mysqli_connect("$DB_SERVER","$DB_LOGIN", "$DB_PASSWORD");
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; と $mysqli のような明確にわかる変数名に変更して、使用部分は全部おきかえると
</span>
<span class="quote1">&gt; どうでしょうか?
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; On Tue, Dec 24, 2024 at 5:24PM 東　兼充 &lt;kanemitsu@xxxxxxxxxx&gt; wrote:
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote2">&gt; &gt; 皆様コメントありがとうございます。
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote2">&gt; &gt; データーベースにはつながるようです。
</span>
<span class="quote2">&gt; &gt; ためしに
</span>
<span class="quote2">&gt; &gt; echo で出力させると、その部分は出力できました。
</span>
<span class="quote2">&gt; &gt; おなじ処理を
</span>
<span class="quote2">&gt; &gt; 少し後の行でおこなうとよみこめなくなり
</span>
<span class="quote2">&gt; &gt; データベースから切断されてしまうようです。
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote2">&gt; &gt; ためしに
</span>
<span class="quote2">&gt; &gt; mysqli_connect の第四引数にdbnameいれて、mysqli_select_db やめるとどうなりますか。
</span>
<span class="quote2">&gt; &gt; をやってみましたが駄目でした。
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote2">&gt; &gt; ちなみに
</span>
<span class="quote2">&gt; &gt; プログラムは21年前に作成したものです。
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote2">&gt; &gt; 文字コートが何度か変わったりしましたが、なんとか修正して対応してきました。
</span>
<span class="quote2">&gt; &gt; 現在は
</span>
<span class="quote2">&gt; &gt; <a href="https://higashi.us/yoyaku/">https://higashi.us/yoyaku/</a>
</span>
<span class="quote2">&gt; &gt; で動いています。
</span>
<span class="quote2">&gt; &gt; 移動先は
</span>
<span class="quote2">&gt; &gt; <a href="https://higashi.us.2024121823441311931890.onamaeweb.jp/yoyaku/">https://higashi.us.2024121823441311931890.onamaeweb.jp/yoyaku/</a>
</span>
<span class="quote2">&gt; &gt; で作成しています。
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote2">&gt; &gt; データベース接続がきれるような操作が途中にはいっているような感じです。
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote2">&gt; &gt; 原因がよくわからず苦慮しています。
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote2">&gt; &gt; 東
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; ----- Original Message -----
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; From: "東　兼充" &lt;kanemitsu@xxxxxxxxxx&gt;
</span>
<span class="quote3">&gt; &gt; &gt; To: "ml@xxxxxxxxxx" &lt;ml@xxxxxxxxxx&gt;
</span>
<span class="quote3">&gt; &gt; &gt; Date: 2024/12/23 月 17:37
</span>
<span class="quote3">&gt; &gt; &gt; Subject: <a href="16729.html">[mysql 16729]</a> 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; 素人でmysqlを使用しています。
</span>
<span class="quote3">&gt; &gt; &gt; サーバーを契約している会社から閉鎖の連絡がきました。
</span>
<span class="quote3">&gt; &gt; &gt; 仕方なくお名前.comのサーバーへ移植作業したところ
</span>
<span class="quote3">&gt; &gt; &gt; PHPがバージョン7.0以上しか選択できず、
</span>
<span class="quote3">&gt; &gt; &gt; バージョンを7.0にしました。
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; すると
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; mysqlコマンドが使用できずmysqliでしか反応しません。
</span>
<span class="quote3">&gt; &gt; &gt; データーベースの接続法もかわっており
</span>
<span class="quote3">&gt; &gt; &gt; ネットで調べた方法をためしました。
</span>
<span class="quote3">&gt; &gt; &gt; しかし
</span>
<span class="quote3">&gt; &gt; &gt; 途中までは、うまくいくのですが
</span>
<span class="quote3">&gt; &gt; &gt; あとは何度修正してもエラーがでます。
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; $link = mysqli_connect("$DB_SERVER","$DB_LOGIN", "$DB_PASSWORD");
</span>
<span class="quote3">&gt; &gt; &gt; mysqli_select_db($link,$DB);
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; までは動くのですが
</span>
<span class="quote3">&gt; &gt; &gt; あとが
</span>
<span class="quote3">&gt; &gt; &gt; $result_kyuusin=mysqli_query($link,"select * from kyuusin
</span>
<span class="quote3">&gt; &gt; &gt;                       where kyuusinbi = '$yoyakubi' and item='$item'");
</span>
<span class="quote3">&gt; &gt; &gt; で
</span>
<span class="quote3">&gt; &gt; &gt; Warning: mysqli_query() expects parameter 1 to be mysqli, string given in /home/r0792529/public_html/higashi.us/yoyaku/index.php on line 377
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; とエラーがでて対応ができません。
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; かなり前からPHPのバージョンがわったときに、皆様対応されているようですが、
</span>
<span class="quote3">&gt; &gt; &gt; 当方すっと同じレンタルサーバーしようしてきましたので対応せずに正常に動いたいました。
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; 今回突然のサーバー廃業で対応せざるをえなくなり、困っています。
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; なにせ素人の初心者です。
</span>
<span class="quote3">&gt; &gt; &gt; なにかアドバイスいだだければありがたいです。
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt; 東
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote3">&gt; &gt; &gt;
</span>
<span class="quote2">&gt; &gt;
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; -- 
</span>
<span class="quote1">&gt;     小山哲志
</span>
<span class="quote1">&gt;     koyama@xxxxxxxxxx
</span>
<span class="quote1">&gt; 
</span>


</pre>
</div>
<p class="button"><a href="16735.html">[前]</a>[次]<a href="../list/16701-16800.html">[番号順一覧]</a><a href="../thread/16701-16800.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="16729.html">  16729 2024-12-23 17:36 [東　兼充 &lt;kanemitsu@] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16730.html">  16730 2024-12-23 19:41 ┣[&lt;naturelovers@xxxxxx] Re: [mysql 16729] 契約していたサーバーが廃業予定 別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16731.html">  16731 2024-12-23 22:22 ┣[NISHIMURA Yutaka &lt;is]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16732.html">  16732 2024-12-23 23:44 ┣[Takahiro Kambe &lt;taca]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16733.html">@ 16733 2024-12-24 00:17 ┣["Noguchi, Shinichi" ] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16734.html">  16734 2024-12-24 17:24 ┗[東　兼充 &lt;kanemitsu@] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16735.html">  16735 2024-12-24 17:45 　┗[KOYAMA Tetsuji &lt;koya] Re: [mysql 16734] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span class="current">-&gt;&nbsp;<a href="16736.html">  16736 2024-12-24 21:10 　　┗[東　兼充 &lt;kanemitsu@] Re: [mysql 16735] Re: [mysql 16734] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
</pre>


</body></html>