<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:10685</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="10684.html">[前]</a><a href="10686.html">[次]</a><a href="../list/10601-10700.html">[番号順一覧]</a><a href="../thread/10601-10700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:10685
</p>
<div class="header">
<p>
From: SUGAWARA Hajime &lt;SUGAWARA Hajime &lt;sugawara@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 16 Dec 2004 15:12:51 +0900<br>
Subject: [mysql 10685] Re: インデックスの多いテーブルの分割<br>

</p>
</div>
<div class="body">
<pre>
　菅原です。

OHTSUKA Ko-hei &lt;techml@xxxxxxxxxx&gt;さん：
<span class="quote1">&gt; インデックスの非常に多いテーブルを作っています。</span>
<span class="quote1">&gt; あるイベントの履歴テーブルなのですが、イベントの発生毎に</span>
<span class="quote1">&gt; 関連のあるいくつかの値を全て計算して、同じ列に挿入して</span>
<span class="quote1">&gt; います。</span>
<span class="quote1">&gt; それぞれで検索される可能性があり全てにインデックスをつけ</span>
<span class="quote1">&gt; ているので、1テーブルのインデックスが10近くになっている</span>
<span class="quote1">&gt; のですが、1テーブルあたりのインデックスは少ない方がよい</span>
<span class="quote1">&gt; という話なので、分割すべきかどうかで迷っております。</span>
（以下略）

　インデックスが多い場合の問題はINSERT処理が重くなることと、インデックス
のに比例してディスク容量を使うことだと思います。
　インデックス数増加による処理コストの計算式はこちらにあります。
<a href="http://dev.mysql.com/doc/mysql/ja/Insert_speed.html">http://dev.mysql.com/doc/mysql/ja/Insert_speed.html</a>

　テーブルを分割するのはレコードが大きくなるだけでメリットはなさそうです。
<a href="http://dev.mysql.com/doc/mysql/ja/Tips.html">http://dev.mysql.com/doc/mysql/ja/Tips.html</a>


　それはそれとして。
　どのようなクエリーを使うかにもよりますが、単純に全カラムにインデックス
を張っただけでは使われないインデックスが出てくる可能性もあった気がします。

＃１回のクエリーで使われるのは１つのインデックスだけなので。

　そのあたりは大丈夫なんでしょうか。

-- 
菅原はじめ＠うぃーくぽいんと
mailto:sugawara@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="10684.html">[前]</a><a href="10686.html">[次]</a><a href="../list/10601-10700.html">[番号順一覧]</a><a href="../thread/10601-10700.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="10653.html">  10653 2004-12-11 23:46 [OHTSUKA Ko-hei &lt;tech] インデックスの多いテーブルの分割        </a></span>
<span class="current">-&gt;&nbsp;<a href="10685.html">  10685 2004-12-16 15:12 ┗[SUGAWARA Hajime &lt;sug]                                       </a></span>
</pre>
</body>
</html>
