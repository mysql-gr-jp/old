<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13350</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13349">[前]</a><a href="13351">[次]</a><a href="../list/13301-13400">[番号順一覧]</a><a href="../thread/13301-13400">[スレッド一覧]</a></p>
<p class="id">
mysql:13350
</p>
<div class="header">
<p>
From: 早間 &lt;早間 &lt;hayama@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 15 Sep 2006 11:41:20 +0900 (JST)<br>
Subject: [mysql 13350] Re: ２バイト文字の文字コード<br>

</p>
</div>
<div class="body">
<pre>
こんにちは、早間です。

From: Mamiya Masataka &lt;xc8m-mmy@xxxxxxxxxx&gt;
Subject: <a href="13348">[mysql 13348]</a> ２バイト文字の文字コード
Date: Fri, 15 Sep 2006 08:24:18 +0900
Message-ID: &lt;20060915081341.9E57.XC8M-MMY@xxxxxxxxxx&gt;

<span class="quote1">&gt; </span>
<span class="quote1">&gt; 現実的な問題として、次のような問題が発生しました。</span>
<span class="quote1">&gt; 香 = 8D81</span>
<span class="quote1">&gt; 枕（ = 968D8169</span>
<span class="quote1">&gt; となってしまい、枕の後ろ２バイトと（の前２バイトが香と同じ文字コードです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; mySQL で LIKE %香% をすると</span>
<span class="quote1">&gt; 「香」と「枕（」に合致してしまいます。</span>
<span class="quote1">&gt; これを防ぐよい方法はあるのでしょうか？</span>
<span class="quote1">&gt; 皆様のお知恵をお借りしたいと思います。</span>
<span class="quote1">&gt; </span>

私は euc-jp で使用しているので同じ文字で実験が出来ません。
 香 = b9e1
 枕（ = cbeda1ca
多分 euc-jp でも同様の条件のもとでは同様の結果を招くものと考えられ
ます。
mysql 4.0.x では出来ないかも知れませんが内部コードを utf8 にすれば
検索時にマルチバイトの文字コードを認識してくれるかも知れません。
無責任ですが、同時に希望でもあります。

mysql 4.0.x では無意識に euc-jp を使用していたのですが、環境を 
mysql 4.1.21 に変更したとき default の my.conf に
[mysqld]
character-set-server            = utf8
default-character-set           = utf8
とあり、移行データがエラーで全滅しました。
# 単にconfファイルの書き方だけの問題かも知れません、
# 動けばそれ以上 の追求はしません。
今は
[mysqld]
character-set-server            = ujis
default-character-set           = ujis
character_set_client            = ujis
にしています。

移行時に設定ファイルを見たときは厄介だと思いましたが
間宮さんのメールを見て可能性を感じています。

-- 早間 義博

</pre>
</div>
<p class="button"><a href="13349">[前]</a><a href="13351">[次]</a><a href="../list/13301-13400">[番号順一覧]</a><a href="../thread/13301-13400">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13348">  13348 2006-09-15 08:24 [Mamiya Masataka &lt;xc8] ２バイト文字の文字コード                </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13349">  13349 2006-09-15 11:22 ┣[&lt;kiwah@xxxxxxxxxx&gt;  ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13351">  13351 2006-09-15 12:14 ┃┗[Mamiya Masataka &lt;xc8]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="13350">  13350 2006-09-15 11:41 ┗[早間 &lt;hayama@xxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13352">  13352 2006-09-15 13:00 　┗[Mitsuhiro KIZU &lt;kizu]                                     </a></span>
</pre>
</body>
</html>
