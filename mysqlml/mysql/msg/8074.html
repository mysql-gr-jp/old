<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8074</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8073.html">[前]</a><a href="8075.html">[次]</a><a href="../list/8001-8100.html">[番号順一覧]</a><a href="../thread/8001-8100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8074
</p>
<div class="header">
<p>
From: &quot;Takanori Jokura&quot; &lt;&quot;Takanori Jokura&quot; &lt;sora_iro@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 24 Jul 2003 12:51:39 +0900<br>
Subject: [mysql 08074] Out of resources when opening file = ファイルオープン最大数エラー？<br>

</p>
</div>
<div class="body">
<pre>
ご無沙汰しておりました。
城です。

今まで稼動しておりましたシステムが突然不調になりました。

そのシステムですが、
MySQLサーバ windows2kで 3.23.52-ntを動かしております
そこにTCP/IP接続でサーブレットコンテナが最大接続数200で接続しています。

おととい、LANケーブルが断線して接続が断続的になってしまい、
MySQLサーバへのクエリ中などに落ちてしまうことが多数ありました。
そのためまずコネクションエラーによるロックがかかり、
それを
C:\mysqladmin flush-hosts
で解除しました。

これで接続はできるようになったものの、
Out of resources when opening file '.\DB名\テーブル名.MYD'
と言うエラーと
Can't find file  '.\DB名\テーブル名.MYD'
と言うエラーが出てしまいます。

MLのログを調べまして、userの所有権かな？とか思ったんですが
windowsで所有者はEveryoneになっています。

また、気にかかる点として、テーブルの数が約3000個ほどありまして
（この設計はいただけないですね 汗)
もしかしたらファイルオープン最大数に引っかかってるのかなと思いました。
しかしMySQLではリミットなし(0)に設定してあります。
とりあえずOpen_filesを見てみましたところ
Open_files                         4294964669
と膨大な数でした、これはOSのファイルオープン最大数に引っかかってもおかしくな
いです。

この状況について皆様に助言をいただきたいと思います。
これは何が原因で起きてしまっているのでしょうか？
さらに、MySQLサーバはテーブルを見た後にそれをキャッシュして
ファイルを閉じてくれたりはしないんでしょうか？

よろしくお願いいたします。

城
sora_iro@xxxxxxxxxx


</pre>
</div>
<p class="button"><a href="8073.html">[前]</a><a href="8075.html">[次]</a><a href="../list/8001-8100.html">[番号順一覧]</a><a href="../thread/8001-8100.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="8074.html">   8074 2003-07-24 12:51 [&quot;Takanori Jokura&quot; &lt;s] Out of resources when opening file = ファイルオープン最大数エラー？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8093.html">   8093 2003-08-03 12:42 ┗[bon &lt;bon@xxxxxxxxxx&gt;]                                       </a></span>
</pre>
</body>
</html>
