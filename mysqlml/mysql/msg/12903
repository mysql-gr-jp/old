<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12903</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="12902">[前]</a><a href="12904">[次]</a><a href="../list/12901-13000">[番号順一覧]</a><a href="../thread/12901-13000">[スレッド一覧]</a></p>
<p class="id">
mysql:12903
</p>
<div class="header">
<p>
From: 樋口聡 &lt;樋口聡 &lt;satoshi@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 02 Apr 2006 17:35:22 +0900<br>
Subject: [mysql 12903] 集計データ取得のためのSQL文の記述方法<br>

</p>
</div>
<div class="body">
<pre>
いつもお世話になってます。樋口と申します。

MySQLに蓄積された情報を集計しようとSQL文を書いていて、自分の希望する結果
を一つのSQL文で実現できなかったので、ご存知の方がいらっしゃいましたら教
えていただけませんか？

テーブル定義:
id		int		auto_increment
email		varchar(128)			-- メールアドレス
channel		tinyint		default 0	-- 応募経路
create_date	timestamp	default null	-- 作成日時

蓄積されているデータ:
id	email		channel		create_date
1	abc1@xxxxxxxxxx	0		20060301185634
2	abc2@xxxxxxxxxx	1		20060302120503
3	abc3@xxxxxxxxxx	0		20060302190945
4	abc4@xxxxxxxxxx	2		20060303080754
5	abc5@xxxxxxxxxx	0		20060303101234
6	abc6@xxxxxxxxxx	1		20060303112351
7	abc7@xxxxxxxxxx	2		20060303121223
とします。
このとき集計データとして
      DATE	     CHANNEL	    TOTAL
		0	1	2
---------- ------ ------- ------- -------
20060301	1	0	0	1
20060302	1	1	0	2
20060303	1	1	2	4
と出力したいのです。

SELECT SUBSTRING(create_date,1,8) AS DATE,channel AS CHANNEL,count(*)
FROM test_tm6 GROUP BY DATE,CHANNEL;
としてみましたが、
DATE		CHANNEL		count(*)
20060301	0		1
20060302	0		1
20060302	1		1
20060303	0		1
20060303	1		1
20060303	2		2
となってしまいます。私の希望する結果を一つのSQL文で出力する方法はあるで
しょうか？

どなたかご存知でしたら、教えていただけると助かります。
---
樋口 聡


</pre>
</div>
<p class="button"><a href="12902">[前]</a><a href="12904">[次]</a><a href="../list/12901-13000">[番号順一覧]</a><a href="../thread/12901-13000">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="12903">  12903 2006-04-02 17:35 [樋口聡 &lt;satoshi@xxxx] 集計データ取得のためのSQL文の記述方法   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12905">  12905 2006-04-02 20:46 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12906">  12906 2006-04-03 11:16 　┗[樋口聡 &lt;satoshi@xxxx]                                     </a></span>
</pre>
</body>
</html>
