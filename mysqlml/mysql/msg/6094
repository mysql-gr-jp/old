<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:6094</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="6093">[前]</a><a href="6095">[次]</a><a href="../list/6001-6100">[番号順一覧]</a><a href="../thread/6001-6100">[スレッド一覧]</a></p>
<p class="id">
mysql:6094
</p>
<div class="header">
<p>
From: &quot;KAWAI,Takanori&quot; &lt;&quot;KAWAI,Takanori&quot; &lt;GCD00051@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 10 Sep 2002 15:13:07 +0900<br>
Subject: [mysql 06094] Re: 検索が正常に出来ない<br>

</p>
</div>
<div class="body">
<pre>
川合孝典です。

ネタ的にはPHPじゃないの？
と思うのですが。

----- Original Message -----
From: &quot;Tatsuya Kondo&quot; &lt;konet@xxxxxxxxxx&gt;
To: &quot;MySQL メーイングリスト&quot; &lt;ml@xxxxxxxxxx&gt;
Sent: Tuesday, September 10, 2002 2:37 PM
Subject: <a href="06091">[mysql 06091]</a> 検索が正常に出来ない


<span class="quote1">&gt; こんにちわ。</span>
<span class="quote1">&gt; 近藤と申します。</span>
（中略）
<span class="quote1">&gt; として、ＳＱＬ文を以下のようにしました。</span>
<span class="quote1">&gt; -----------------------------------</span>
<span class="quote1">&gt; $sex = $HTTP_POST_VARS[&quot;sex&quot;];</span>
<span class="quote1">&gt; $age = explode(&quot;-&quot;, $HTTP_POST_VARS[&quot;age&quot;]);</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; select * from tablename where sex = '$sex' AND age &gt;= '$age[0]' AND age &lt;=</span>
'$age[1]';
<span class="quote1">&gt; -----------------------------------</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; この「年齢」と似た項目は後２つほどあり、</span>
<span class="quote1">&gt; 全て同じ方法で処理をしています。</span>
<span class="quote1">&gt; ＃ explodeを使って分けてると言う事です</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ちゃんと、全ての配列には値は入ってるのを確認（echoで）しています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; しかし、正常に検索してくれません。</span>
<span class="quote1">&gt; SQL文の何かがおかしいのでしょうか？</span>

実際に組み立てられたSQL文はどうなっているのでしょうか？
「正常に検索してくれない」って実際にはどうなるのでしょうか？
テーブル定義も結果もないのでは、何もわからないでしょう。
ageが文字型になっていて正しく取れていないってこともありえますしね。

<span class="quote1">&gt; select * from tablename where sex = '$sex' AND age &gt;= '$age[0]' AND age &lt;=</span>
'$age[1]';
が
select * from tablename where sex = '$sex' AND age &gt;= 'array[0]' AND age &lt;=
'array[1]'
みたいになってませんか？


<span class="quote1">&gt; それとも、こういったフォームからの受け取り方はよくないですか？</span>
それ以前の問題のほうが大きいのでは？
-$sexの値の漢字コードは大丈夫なのかなぁ
-クライアントに送ったHTMLの通りにいつでも値が帰って来るという
　のは希望であって、実際ではありません。せめてaddslashesをつける
　べきでしょう。($sexの値が &quot;男' and sex='女&quot;なんてトリッキーな値を
　つっこむのは大した問題ではないですから）
ついでに個人的には$_POSTのほうが好き。バージョンによるでしょうけれど。

===================================================
川合 孝典 (Hippo2000)
   DBI日本語メーリングリスト管理人、Kansai.pm所属
   kwitknr@xxxxxxxxxx GCD00051@xxxxxxxxxx
   <a href="http://member.nifty.ne.jp/hippo2000">http://member.nifty.ne.jp/hippo2000</a>、<a href="http://www.hippo2000.info/">http://www.hippo2000.info/</a>
「Cマガジン」でPer DBIの連載はじまります。
   <a href="http://www.cmagazine.jp/">http://www.cmagazine.jp/</a>
===================================================



</pre>
</div>
<p class="button"><a href="6093">[前]</a><a href="6095">[次]</a><a href="../list/6001-6100">[番号順一覧]</a><a href="../thread/6001-6100">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="6091">   6091 2002-09-10 14:37 [&quot;Tatsuya Kondo&quot; &lt;kon] 検索が正常に出来ない                    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6092">   6092 2002-09-10 15:04 ┣[&quot;altana&quot; &lt;altana@xxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="6094">   6094 2002-09-10 15:13 ┣[&quot;KAWAI,Takanori&quot; &lt;GC]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6097">   6097 2002-09-10 16:58 ┃┗[fukuixyz &lt;fukuixyz@x] 「 addslashes をつける」意味        </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6098">   6098 2002-09-10 18:34 ┃　┣[&quot;KAWAI,Takanori&quot; &lt;GC]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6100">   6100 2002-09-10 19:20 ┃　┗[&quot;Takashi Yamashita&quot; ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6106">   6106 2002-09-11 10:04 ┃　　┗[fukuixyz &lt;fukuixyz@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6108">   6108 2002-09-11 11:29 ┃　　　┣[mohri &lt;mohri@xxxxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6118">   6118 2002-09-11 14:30 ┃　　　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6120">   6120 2002-09-11 14:57 ┃　　　　┣[Tomohiro 'Tomo-p' KA]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6122">   6122 2002-09-11 15:24 ┃　　　　┃┣[&quot;Takashi Yamashita&quot; ]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6151">   6151 2002-09-11 18:46 ┃　　　　┃┗[&lt;moeru@xxxxxxxxxx&gt;  ]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6121">   6121 2002-09-11 15:24 ┃　　　　┗[&quot;KAWAI,Takanori&quot; &lt;GC]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6095">   6095 2002-09-10 15:25 ┣[HAMAI Kyoichi &lt;k-ham]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6096">   6096 2002-09-10 15:27 ┣[遠藤 俊裕 &lt;endo_t@xx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6099">   6099 2002-09-10 18:39 ┣[&quot;城&quot; &lt;sora_iro@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6101">   6101 2002-09-10 19:42 ┣[&quot;Takashi Yamashita&quot; ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6102">   6102 2002-09-10 20:24 ┣[楠吉彦 &lt;moredebu@xxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6103">   6103 2002-09-11 01:54 ┃┗[&quot;Tatsuya Kondo&quot; &lt;kon]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6104">   6104 2002-09-11 08:26 ┃　┗[遠藤 俊裕 &lt;endo_t@xx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6105">   6105 2002-09-11 09:46 ┃　　┗[&quot;KAWAI,Takanori&quot; &lt;GC]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6107">   6107 2002-09-11 10:04 ┃　　　┗[遠藤 俊裕 &lt;endo_t@xx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6109">   6109 2002-09-11 11:57 ┃　　　　┗[&quot;城&quot; &lt;sora_iro@xxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6111">   6111 2002-09-11 12:13 ┃　　　　　┣[遠藤 俊裕 &lt;endo_t@xx]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6112">   6112 2002-09-11 12:25 ┃　　　　　┗[&quot;Takashi Yamashita&quot; ]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6114">   6114 2002-09-11 13:32 ┃　　　　　　┗[&quot;城&quot; &lt;sora_iro@xxxxx]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6115">   6115 2002-09-11 14:11 ┃　　　　　　　┣[&quot;Tatsuya Kondo&quot; &lt;kon]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6116">   6116 2002-09-11 14:08 ┃　　　　　　　┗[&quot;Takashi Yamashita&quot; ]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6117">   6117 2002-09-11 14:29 ┃　　　　　　　　┗[&quot;城&quot; &lt;sora_iro@xxxxx]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6119">   6119 2002-09-11 14:47 ┃　　　　　　　　　┗[mohri &lt;mohri@xxxxxxx]                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6123">   6123 2002-09-11 15:32 ┃　　　　　　　　　　┗[&quot;Takashi Yamashita&quot; ]                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6128">   6128 2002-09-11 17:47 ┃　　　　　　　　　　　┗[mohri &lt;mohri@xxxxxxx]               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6129">   6129 2002-09-11 17:58 ┃　　　　　　　　　　　　┗[&quot;城&quot; &lt;sora_iro@xxxxx]             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6131">   6131 2002-09-11 18:20 ┃　　　　　　　　　　　　　┗[&quot;Takashi Yamashita&quot; ]           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6110">   6110 2002-09-11 12:09 ┗[&quot;足田博信&quot; &lt;h_ashida]                                       </a></span>
</pre>
</body>
</html>
