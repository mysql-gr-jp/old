<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13365</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13364">[前]</a><a href="13366">[次]</a><a href="../list/13301-13400">[番号順一覧]</a><a href="../thread/13301-13400">[スレッド一覧]</a></p>
<p class="id">
mysql:13365
</p>
<div class="header">
<p>
From: &quot;megu&quot; &lt;&quot;megu&quot; &lt;samplemailsend@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 20 Sep 2006 15:24:25 +0900<br>
Subject: [mysql 13365] 最善の検索方法を教えて下さい<br>

</p>
</div>
<div class="body">
<pre>
こんにちは、杉本といいます。
いつもML Logを活用させて頂いています。
投稿は今回が初めてです。宜しくお願い致します。

PerlからMySQL4.0へ接続しています。
色々と調べたのですが最善の方法が分からず困っています。
アドバイスをお願いしたいと思います。

以下のようなテーブルがあるとします
テーブル名：tbl1
+------+------+-----+
<span class="quote1">| num1 | num2 | sub |</span>
+------+------------+
<span class="quote1">| 1111 |      |  A  |</span>
<span class="quote1">| 2222 |      |  B  |</span>
<span class="quote1">| 3333 | 1111 |  C  |</span>
<span class="quote1">| 4444 | 2222 |  D  |</span>
<span class="quote1">| 5555 | 3333 |  E  |</span>
<span class="quote1">| 6666 | 3333 |  F  |</span>
+------+-------------+
num1は一意であり、num2は他レコードのnum1、またはカラです。
num2がカラのものは先頭親レコード、カラでないものはいずれかの
先頭親レコードの子レコードとなります。
上の例の場合、

sub=Aとsub=Bが先頭親レコードとなり、
sub=Cはsub=Aの子レコード、
sub=Dはsub=Bの子レコード、
sub=Eはsub=Cの子レコードでありsub=Aの子レコード
sub=Fはsub=Cの子レコードでありsub=Aの子レコード

となります。

何を求めたいかというと、
「大きいnum1を持つレコードの先頭親レコードN件」
です。
先頭親レコード自身が大きなnum1を持つかもしれないし、
末端の子レコードが大きなnum1を持つかもしれない。
先頭親レコードが最小のnum1を持っていても、子レコードが最大のnum1を持っていれ
ば
この親レコードを取得したいのです。
問題なのは、子レコードから直接先頭の親レコードが分からないかもしれないという
ことです。
全てのデータをひっぱってきてループさせながら希望の先頭親レコードを取得するこ
とは
もちろん出来るのですが、
何かもっと速く検索出来る良い方法があるのではないかと思って質問させて頂きまし
た。

宜しくお願い致します。


--------------------------------------
[10th Anniversary] special auction campaign now!
<a href="http://pr.mail.yahoo.co.jp/auction/">http://pr.mail.yahoo.co.jp/auction/</a>

</pre>
</div>
<p class="button"><a href="13364">[前]</a><a href="13366">[次]</a><a href="../list/13301-13400">[番号順一覧]</a><a href="../thread/13301-13400">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="13365">  13365 2006-09-20 15:24 [&quot;megu&quot; &lt;samplemailse] 最善の検索方法を教えて下さい            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13366">  13366 2006-09-20 15:46 ┣[&quot;GotouYutaka&quot; &lt;yu.go]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13367">  13367 2006-09-20 16:00 ┃┗[&quot;megu&quot; &lt;samplemailse]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13368">  13368 2006-09-20 16:13 ┗[&lt;hata@xxxxxxxxxx&gt;   ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13369">  13369 2006-09-20 16:17 　┣[&lt;hata@xxxxxxxxxx&gt;   ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13370">  13370 2006-09-20 17:19 　┗[&quot;megu&quot; &lt;samplemailse]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13372">  13372 2006-09-21 08:59 　　┗[&lt;hata@xxxxxxxxxx&gt;   ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13373">  13373 2006-09-21 09:31 　　　┗[&quot;megu&quot; &lt;samplemailse]                                 </a></span>
</pre>
</body>
</html>
