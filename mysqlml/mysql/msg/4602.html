<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4602</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4601.html">[前]</a><a href="4603.html">[次]</a><a href="../list/4601-4700.html">[番号順一覧]</a><a href="../thread/4601-4700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4602
</p>
<div class="header">
<p>
From: 松嶋祥文 &lt;松嶋祥文 &lt;mats@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 02 Nov 2001 17:19:47 +0900<br>
Subject: [mysql 04602] Re: &quot;@&quot; の入っているデータを検索できません。<br>

</p>
</div>
<div class="body">
<pre>
松嶋＠ITBoost です。

MySQL はあまり詳しくないですが、フォローが無いようですので…。

<span class="quote1">| mysql&gt; select * from table where COMMENT LIKE %@%;</span>
<span class="quote1">| として検索したところ、&quot;@&quot;が入っていないものもヒットしてしまいました。</span>
<span class="quote1">| また、</span>
<span class="quote1">| mysql&gt; select * from table where binary COMMENT LIKE %@%;</span>
<span class="quote1">| とやってみても同じ結果でした。</span>

configure 時のオプションに
  --with-extra-charsets=all --with-charset=sjis
などを指定されましたでしょうか？
このような指定をしないと、マルチバイト対応にならないと思います。
詳しくは
 <a href="http://www.mysql.gr.jp/jpdoc/3.23/manual.ja_Installing.html#Installing">http://www.mysql.gr.jp/jpdoc/3.23/manual.ja_Installing.html#Installing</a>
あたりをごらんください。

<span class="quote1">| これらヒットしたデータを見てみたところ、特に共通した</span>
<span class="quote1">| データというのが存在しておらず、原因がよくわかりません。</span>

検索に引っかかったのは SJIS の 2byte 目に 0x40 (@の ASCII コード) 
が含まれた文字（「ァ」「院」など）が存在するデータではないでしょうか？

<span class="quote1">| たぶんデータコードが何らかの理由で合致して関係のないものまで</span>
<span class="quote1">| ヒットしたものと思われますが、恐れ入りますが対応策がございましたら</span>
<span class="quote1">| アドバイスのほどお願いいたします。</span>

MySQL をコンパイルし直すか、上記の現象を避けるだけならデータを
EUC に変換するというのが考えられます。
EUC にしても、根本的にマルチバイト対応ではありませんので、別の
ケースで即問題が発生します。
ということで、オススメは再コンパイルです。

-- 
                                               ,-------------+
+---------------------------------------------'              |
<span class="quote1">| システム開発＆エンジニアスクール　アイティーブースト       |</span>
<span class="quote1">| 松嶋 祥文 [ mats@xxxxxxxxxx ]                ,-------------+</span>
<span class="quote1">| +----------------------------------------------'              |</span>
<span class="quote2">| | ★ Linux 関連の技術情報満載！    <a href="http://www.itboost.co.jp/">http://www.itboost.co.jp/</a>  |</span>
+-|■■■■■ Web アプリケーション開発、請け負います！■■■■■|
  +-------------------------------------------------------------+


</pre>
</div>
<p class="button"><a href="4601.html">[前]</a><a href="4603.html">[次]</a><a href="../list/4601-4700.html">[番号順一覧]</a><a href="../thread/4601-4700.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="4601.html">   4601 2001-11-02 12:28 [&quot;Akinobu YAMAMOTO&quot; &lt;] &amp;quot;@&amp;quot; の入っているデータを検索できません。</a></span>
<span class="current">-&gt;&nbsp;<a href="4602.html">   4602 2001-11-02 17:19 ┗[松嶋祥文 &lt;mats@xxxxx]                                       </a></span>
</pre>
</body>
</html>
