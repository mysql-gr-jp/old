<html><head></head><body><div dir="ltr"><div dir="ltr">岡善博＠中札内です。</div><div dir="ltr">実は、いつの間にか、zenpakudbが壊れてしまったので、再構築すます。</div><div dir="ltr">昼間の時間で、頭がスッキリしている時に行いますね。</div><div dir="ltr">かなり時間が時間が掛かると思います。</div><div dir="ltr"><br></div><div dir="ltr">一部レスを書いておきます。</div><div dir="ltr"><br></div><div dir="ltr">  &gt; 自宅サーバでWordPressを立ち上げていて、不覚にもデータベースのバックアップ<br>  &gt; 取らずにＯＳをFreeBSD 11.3Rp13から12.2Rp7に上げてしまいました。<br><br>  &gt; wordpressを構築した時は、MySQL5.6でした。<br><br>  OSをバージョンアップした時点でのMySQLはいくつでしたか？<br>以前も書きましたが、WordPressを構築した時は、MySQL5.6で昨年だったか？phpやMySQLを<br>バージョンアップして、MySQL5.7にして、ずっと動いていました。<br>  (その時点のMySQLと合わせたバージョンにするのが望ましいと思っています。<br>  ibdファイルだけ無理矢理インポートするようなイレギュラーなケースなので、<br>  リリースシリーズをまたいだ(たとえば、5.6と5.7)状態で<br>  それが無理矢理できるようなものなのかわかりません)<br><br><br>  &gt; ただ、DISCARD TABLESPACEを実行後、ibdは、消えていませんでしたが、念のため<br><br>  これも何かおかしいです。パスが間違っているか正しくibdファイルをつかめていない気がします。<br><br><br><br>  綺麗に以下のように再実行できますか？<br>  FreeBSDのレイアウトは知らないので、Linux - Generalを使って /usr/local/mysql<br>  の下にもろもろがある状態のコマンド例です。適宜読み替えてください。<br>  ----<br>コマンドは、/usr/local/bin/に有ります。<br>-rwxr-xr-x 1 root wheel 3923608 8月 26 17:11 /usr/local/bin/mysql*<br>-rwxr-xr-x 1 root wheel   5174 8月 26 17:07 /usr/local/bin/mysql_config*<br>-rwxr-xr-x 1 root wheel 3618984 8月 26 17:11 /usr/local/bin/mysql_config_editor*<br>-rwxr-xr-x 1 root wheel 5243608 8月 26 18:21 /usr/local/bin/mysql_install_db*<br>-rwxr-xr-x 1 root wheel 3621384 8月 26 18:21 /usr/local/bin/mysql_plugin*<br>-rwxr-xr-x 1 root wheel 3822320 8月 26 18:21 /usr/local/bin/mysql_secure_installation*<br>-rwxr-xr-x 1 root wheel 3655328 8月 26 17:11 /usr/local/bin/mysql_ssl_rsa_setup*<br>-rwxr-xr-x 1 root wheel 3573640 8月 26 18:21 /usr/local/bin/mysql_tzinfo_to_sql*<br>-rwxr-xr-x 1 root wheel 4453656 8月 26 18:21 /usr/local/bin/mysql_upgrade*<br>-rwxr-xr-x 1 root wheel 3813112 8月 26 17:11 /usr/local/bin/mysqladmin*<br>-rwxr-xr-x 1 root wheel 4063680 8月 26 17:11 /usr/local/bin/mysqlbinlog*<br>-rwxr-xr-x 1 root wheel 3827728 8月 26 17:11 /usr/local/bin/mysqlcheck*<br>-rwxr-xr-x 1 root wheel  27022 8月 26 17:12 /usr/local/bin/mysqld_multi*<br>-rwxr-xr-x 1 root wheel  27868 8月 26 17:12 /usr/local/bin/mysqld_safe*<br>-rwxr-xr-x 1 root wheel 3895288 8月 26 17:11 /usr/local/bin/mysqldump*<br>-rwxr-xr-x 1 root wheel   7850 8月 26 17:12 /usr/local/bin/mysqldumpslow*<br>-rwxr-xr-x 1 root wheel 3808216 8月 26 17:11 /usr/local/bin/mysqlimport*<br>-rwxr-xr-x 1 root wheel 4199256 8月 26 17:11 /usr/local/bin/mysqlpump*<br>-rwxr-xr-x 1 root wheel 3807960 8月 26 17:11 /usr/local/bin/mysqlshow*<br>-rwxr-xr-x 1 root wheel 3826416 8月 26 17:11 /usr/local/bin/mysqlslap*<br>-rwxr-xr-x 1 root wheel 4131120 8月 26 18:21 /usr/local/bin/mysqltest*<br>-rwxr-xr-x 1 root wheel 4494592 8月 26 18:21 /usr/local/bin/mysqlxtest*<br><br>mysqldumpslowのコマンドを使ったら、dump時のコネクションが切れるのが、対応<br>出来たのかも知れません。<br><br>  /usr/local/mysql/bin/mysqladmin shutdown ###<br>  MySQLを止めます。他にコマンドがあるようならこれでなくてかまいません<br>通常は、/usr/local/etc/rc.d/mysql-server stop　で行います。<br>  rm -r /usr/local/mysql/data       ### 一度中身をきれいにします<br>rm -r /var/db/mysql ですね。<br><br>  /usr/local/mysql/bin/mysqld --initialize-insecure --user=mysql<br>  --datadir=/usr/local/mysql/data ### データディレクトリを初期化します<br>  /usr/local/mysql/bin/mysqld --daemonize ###<br>  MySQLを起動します。他にコマンドがあるようならこれでなくてかまいません<br>/usr/local/etc/rc.d/mysql-server start で行います。</div><div dir="ltr"><br></div><div dir="ltr">結果は、また、送らせて頂きます。<br></div><br><div class="gmail_quote"><br></div></div>
</body></html>