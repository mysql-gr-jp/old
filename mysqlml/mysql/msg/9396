<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9396</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="9395">[前]</a><a href="9397">[次]</a><a href="../list/9301-9400">[番号順一覧]</a><a href="../thread/9301-9400">[スレッド一覧]</a></p>
<p class="id">
mysql:9396
</p>
<div class="header">
<p>
From: SUGAWARA Hajime &lt;SUGAWARA Hajime &lt;sugawara@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 20 May 2004 11:46:26 +0900<br>
Subject: [mysql 09396] Re: 巨大テーブルの高速操作<br>

</p>
</div>
<div class="body">
<pre>
　菅原です。
　補足。

&quot;久松大輔&quot; &lt;CQN04630@xxxxxxxxxx&gt;さん：
<span class="quote1">&gt; いんです。ですので、SELECTのプライオリティを下げる（上げるのはHIGH_</span>
<span class="quote1">&gt; PRIORITYがありますけど）か、INSERTに失敗しない設定とかあるといいのです</span>
<span class="quote1">&gt; が…。</span>

　ちなみに、SELECTのプライオリティは（基本的には）最低になっているので、
それ以上下げることはできません。

　ちょっと調べてみたところ、今回の場合はひょっとすると DELAYED で解決す
るかもしれません。

&lt;<a href="http://dev.mysql.com/doc/mysql/ja/INSERT.html">http://dev.mysql.com/doc/mysql/ja/INSERT.html</a>&gt;
<span class="quote1">&gt; キーワード DELAYED が指定されていると、サーバはレコードをバッファに挿</span>
<span class="quote1">&gt; 入する。その後、INSERT DELAYED ステートメントを発行したクライアントは</span>
<span class="quote1">&gt; 処理を続行することができる。テーブルが使用されていると、サーバはレコー</span>
<span class="quote1">&gt; ドを保持する。テーブルが解放されると、サーバはレコードの挿入を開始し、</span>
<span class="quote1">&gt; そのテーブルに対する新しい読み取り要求がないか定期的にチェックする。新</span>
<span class="quote1">&gt; しい読み取り要求があると、そのテーブルが再び解放されるまで、遅延された</span>
<span class="quote1">&gt; レコードのキューの処理は中断される。</span>

&lt;<a href="http://dev.mysql.com/doc/mysql/ja/INSERT_DELAYED.html">http://dev.mysql.com/doc/mysql/ja/INSERT_DELAYED.html</a>&gt;
<span class="quote1">&gt; INSERT の完了を待てないクライアントがある場合、MySQL 固有のオプション</span>
<span class="quote1">&gt; である DELAYED を指定した INSERT ステートメントが非常に役立ちます。こ</span>
<span class="quote1">&gt; のようなクライアントの問題は、MySQL を使用してログを記録する一方で、完</span>
<span class="quote1">&gt; 了までに時間がかかる SELECT や UPDATE ステートメントを定期的に実行して</span>
<span class="quote1">&gt; いる場合によく起こります。DELAYED は、MySQL バージョン 3.22.15 で導入</span>
<span class="quote1">&gt; された、SQL-92 に対する MySQL の拡張です。</span>

-- 
菅原はじめ＠うぃーくぽいんと
mailto:sugawara@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="9395">[前]</a><a href="9397">[次]</a><a href="../list/9301-9400">[番号順一覧]</a><a href="../thread/9301-9400">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="9387">   9387 2004-05-19 15:52 [&quot;久松大輔&quot; &lt;CQN04630] 巨大テーブルの高速操作                  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9390">   9390 2004-05-19 22:45 ┗[SUGAWARA Hajime &lt;sug]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9392">   9392 2004-05-20 09:02 　┗[&quot;久松大輔&quot; &lt;CQN04630]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9395">   9395 2004-05-20 11:30 　　┣[SUGAWARA Hajime &lt;sug]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9397">   9397 2004-05-20 11:56 　　┃┗[SUGAWARA Hajime &lt;sug]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9398">   9398 2004-05-20 12:48 　　┃　┗[&quot;久松大輔&quot; &lt;CQN04630]                               </a></span>
<span class="current">-&gt;&nbsp;<a href="9396">   9396 2004-05-20 11:46 　　┗[SUGAWARA Hajime &lt;sug]                                   </a></span>
</pre>
</body>
</html>
