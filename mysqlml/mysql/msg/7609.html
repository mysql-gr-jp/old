<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:7609</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="7608.html">[前]</a><a href="7610.html">[次]</a><a href="../list/7601-7700.html">[番号順一覧]</a><a href="../thread/7601-7700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:7609
</p>
<div class="header">
<p>
From: "Takeda" &lt;"Takeda" &lt;hide-yan@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 29 Apr 2003 21:58:04 +0900<br>
Subject: [mysql 07609] Re: load 文での load  件数の不一致<br>

</p>
</div>
<div class="body">
<pre>武田です。
とみた様
早速ご回答ありがとうございます。
アドバイス頂きましたようにCSVファイルとロード結果を比べてみました。

<span class="quote2">&gt; &gt; ちょうど半分になってしまう状況ですが、原因が分かりません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; MySQL にロードされたレコードと、ロードされなかったレコードに何か違いが</span>
<span class="quote1">&gt; ないか比べてみてはどうでしょうか。</span>
<span class="quote1">&gt;</span>

①16630レコードのCSVファイルのloadを実行した際の結果
load data infile 'file.csv'
into table table
fields terminated by ','
enclosed by '"'
ignore 1 lines;
Query OK, 8315 rows affected (7.69 sec)
Records: 8315  Deleted: 0  Skipped: 0  Warnings: 8315

②select column_last from table where id='E001';　の実行結果
+---------------------------+
<span class="quote1">| column_last                  |</span>
+---------------------------+
<span class="quote1">| あいう"</span>
"E001 |
+---------------------------+
1 row in set (1.49 sec)

＜ＣＳＶファイル＞
１行目の１列目(id)＝"E001",～～,１行目の最終列(column_last)＝"あいう"
２行目の1列目(id)＝"E002",～～

●推測
このCSVファイルの最終列が実はカンマで区切られていないために２行目の
１列目のカンマまでを１行と認識してloadし、ＣＳＶ２行を１行として取り込んでし
まい、
結果としてload件数がちょうど半分になっているような気がしています。

①でWarnings: 8315となっているのは、CSV２行目の２列目以降が正しく取り込めて
いないために全レコードにWarningが発生したということと理解してよいでしょう
か。

ここまではなんとなく理解できましたが、結局どうすればいいかが分かりません。
lines terminated by 　を追加すればよいような気もしますが、行終端文字は
何にするのが適当でしょうか。
エクセルで普通に開けるファイルなので特別なものではないと思って
いましたが、ファイルによって異なるものなのでしょうか。

なかなか思うようにいかないものですね。。。

以上、どうぞよろしくお願い致します。


</pre>
</div>
<p class="button"><a href="7608.html">[前]</a><a href="7610.html">[次]</a><a href="../list/7601-7700.html">[番号順一覧]</a><a href="../thread/7601-7700.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="7607.html">   7607 2003-04-29 12:27 ["Takeda" &lt;hide-yan@x] load 文での load 件数の不一致           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7608.html">   7608 2003-04-29 19:17 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="7609.html">   7609 2003-04-29 21:58 ┃┗["Takeda" &lt;hide-yan@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7610.html">   7610 2003-04-29 22:10 ┃　┣["Takeda" &lt;hide-yan@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7615.html">   7615 2003-04-30 00:13 ┃　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7617.html">   7617 2003-04-30 10:21 ┗["MORII,Tadashige" &lt;m]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7626.html">   7626 2003-04-30 23:32 　┗["Takeda" &lt;hide-yan@x]                                     </a></span>
</pre>


</body></html>