<div><div class="gmail_msg"><div class="gmail_msg"><div class="gmail_msg"><div class="gmail_quote gmail_msg"><div class="gmail_msg">お世話になっております。藤原と申します。</div><div class="gmail_msg"><br class="gmail_msg"></div><div class="gmail_msg">以下、2つについて質問させてください。</div><div class="gmail_msg">なお、後日実機でも検証する予定です。</div><div class="gmail_msg"><br class="gmail_msg"></div><div class="gmail_msg">一時テーブルのディレクトリの場所と容量、設定について</div><div class="gmail_msg">初期値では、/tmpに一時テーブルが作成されますが、この一時テーブルの領域は、どのように設計することが多いのかご存知であれば設計例を教えていただけますでしょうか。</div><div class="gmail_msg"><br></div><div class="gmail_msg">OS領域とMySQLのデータ領域のディスクパーティションは分けています。</div><div class="gmail_msg"><br></div><div class="gmail_msg">気になるのは大量のSQLが実行され、一時テーブルが作成され、ディスクフルになってしまった時の挙動です。</div><div class="gmail_msg"><br></div><div class="gmail_msg">ディスクフルになるかもしれないことを想定した場合、一時テーブルはOS領域側とMySQLのデータ領域のどちらにしておくのがベターでしょうか。</div><div class="gmail_msg"><br></div><div class="gmail_msg">また、一時テーブルがなるべく作成されないように、tmp_table_sizeとmax_heap_table_sizeはどの程度の容量を指定すべきでしょうか。</div><div class="gmail_msg"><br></div><div class="gmail_msg">以下のページを参考にしています。</div><div class="gmail_msg"><a href="https://dev.mysql.com/doc/refman/5.6/ja/internal-temporary-tables.html" class="gmail_msg" target="_blank">https://dev.mysql.com/doc/refman/5.6/ja/internal-temporary-tables.html</a><br class="gmail_msg"></div><div class="gmail_msg"><a href="https://dev.mysql.com/doc/refman/5.6/ja/temporary-files.html">https://dev.mysql.com/doc/refman/5.6/ja/temporary-files.html</a><br></div><div class="gmail_msg"><a href="http://k-1-ne-jp.blogspot.jp/2012/10/mysqltmpdir.html?m=1">http://k-1-ne-jp.blogspot.jp/2012/10/mysqltmpdir.html?m=1</a><br></div><div class="gmail_msg"><br></div><div class="gmail_msg"><br class="gmail_msg"></div><div class="gmail_msg"><br></div><div class="gmail_msg">パーティション追加時のInnoDBの書き込みロックについて</div><div class="gmail_msg">MySQLの公式ページでは、パーティション操作時は、テーブルの書き込みロックがかかると記載があります。</div><div class="gmail_msg"><br></div><div class="gmail_msg">InnoDBの場合はどうなのかという記載は特に見つからないのですが、ストレージエンジンに関わらず、必ず書き込みロックがかかると考えてよいのでしょうか。</div><div class="gmail_msg"><br></div><div class="gmail_msg">想定しているは、1テーブルに対して、日毎にパーティションを作成しており、一日一回未来日のパーティションを追加しています。この時、InnoDBにおいて、書き込みロックがかかってしまうのかどうか、書き込みロックの回避方法があるのかどうかです。</div><div class="gmail_msg"><br></div><div class="gmail_msg">ご存知の方がおりましたらご教授いただけますと幸いです。</div><div class="gmail_msg"><br></div><div class="gmail_msg">書き込みロックが回避できない場合は、事前に未来日のパーティションを作成しておくことも考えています。1テーブルに対するパーティション作成の上限値は8192ということも理解しています。</div><div class="gmail_msg"><br></div><div class="gmail_msg">以下のページを参考にしています。</div><div class="gmail_msg"><a href="https://dev.mysql.com/doc/refman/5.6/ja/partitioning-limitations.html" class="gmail_msg" target="_blank">https://dev.mysql.com/doc/refman/5.6/ja/partitioning-limitations.html</a><br class="gmail_msg"></div><div class="gmail_msg"><a href="https://dev.mysql.com/doc/refman/5.6/ja/online-ddl-partitioning.html" class="gmail_msg" target="_blank">https://dev.mysql.com/doc/refman/5.6/ja/online-ddl-partitioning.html</a><br class="gmail_msg"></div><div class="gmail_msg"><a href="https://dev.mysql.com/doc/refman/5.6/ja/partitioning-limitations-locking.html" class="gmail_msg" target="_blank">https://dev.mysql.com/doc/refman/5.6/ja/partitioning-limitations-locking.html</a><br class="gmail_msg"></div><div class="gmail_msg"><br class="gmail_msg"></div><div class="gmail_msg">藤原</div></div></div></div></div></div>
