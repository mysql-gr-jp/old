<html><head></head><body><div dir="ltr"><div dir="ltr"><div>岡善博＠中札内です。</div><div>yoku0825さん、ありがとうございます。</div><div><br></div><div>こんな手順で行いました。が、成功していません。</div><div>-------</div><div>MySQLデータベースの復元手順<br><br>・/var/db/mysqlのディレクトリーを削除。<br><br>・/usr/local/etc/rc.d/mysql-server start<br><br>・/usr/local/etc/rc.d/mysql-server stop<br><br>・mysqld_safe --skip-grant-tables &amp; で、起動。<br><br>・mysql -u root<br>　mysql&gt; use mysql;<br>　mysql&gt; update user set authentication_string=password("1234qwer") where user='root';<br>　mysql&gt; commit;<br>　mysql&gt; flush privileges;<br>　mysql&gt; quit<br>　# /usr/local/etc/rc.d/mysql-server restart<br><br>//・rootのパスワードを再設定<br>//　# mysql -u root -p<br>//　mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY '123qwe`;<br>// mysql&gt; set password for root@localhost=password('passwordPASSWORD@999');<br>set password for root@localhost=password('123qwe@123qwe`); <br><br>・zenpakudbのユーザーの作成とデータベース作成<br>　mysql&gt; create user `zenpakudb`@`localhost` IDENTIFIED BY '123qwe';<br>　mysql&gt; create database zenpakudb;<br>　mysql&gt; grant all privileges on zenpakudb.* to zenpakudb@localhost IDENTIFIED BY '123qwe';<br>　<br>・ダンプファイルの復元<br>　# mysql -u zenpakudb -p zenpakudb &lt; /usr/home/oka/BACKUP/mysqldump_zenpakudb20201212.dump<br><br>　# mysql -u root -p<br>　mysql&gt; use zenpakudb;<br>　mysql&gt; show tables;<br>　mysql&gt; show table status;<br>　mysql&gt;show<br>　mysql&gt;<br>　mysql&gt;<br>　<br><br>alter table wp_commentmeta ROW_FORMAT= COMPACT;<br>alter table wp_comments ROW_FORMAT= COMPACT;<br>alter table wp_ktaisession ROW_FORMAT= COMPACT;<br>alter table wp_links ROW_FORMAT= COMPACT;<br>alter table wp_options ROW_FORMAT= COMPACT;<br>alter table wp_postmeta ROW_FORMAT= COMPACT;<br>alter table wp_posts ROW_FORMAT= COMPACT;<br>alter table wp_term_relationships ROW_FORMAT= COMPACT;<br>alter table wp_term_taxonomy ROW_FORMAT= COMPACT;<br>alter table wp_termmeta ROW_FORMAT= COMPACT;<br>alter table wp_terms ROW_FORMAT= COMPACT;<br>alter table wp_usermeta ROW_FORMAT= COMPACT;<br>alter table wp_users ROW_FORMAT= COMPACT;<br>alter table wp_wpmm_subscribers ROW_FORMAT= COMPACT;<br><br>alter table wp_commentmeta DISCARD TABLESPACE;<br>alter table wp_comments DISCARD TABLESPACE;<br>alter table wp_ktaisession DISCARD TABLESPACE;<br>alter table wp_links DISCARD TABLESPACE;<br>alter table wp_options DISCARD TABLESPACE;<br>alter table wp_postmeta DISCARD TABLESPACE;<br>alter table wp_posts DISCARD TABLESPACE;<br>alter table wp_term_relationships DISCARD TABLESPACE;<br>alter table wp_term_taxonomy DISCARD TABLESPACE;<br>alter table wp_termmeta DISCARD TABLESPACE;<br>alter table wp_terms DISCARD TABLESPACE;<br>alter table wp_usermeta DISCARD TABLESPACE;<br>alter table wp_users DISCARD TABLESPACE;<br>alter table wp_wpmm_subscribers DISCARD TABLESPACE;<br><br>ibdファイルのコピー<br># cd /var/db/mysql/zenpakudb<br># cp -a /var/db/mysql20210920/zenpakudb.NEW/*.ibd .<br><br><br>alter table wp_commentmeta ROW_FORMAT= COMPACT;<br>Query OK, 0 rows affected, 1 warning (0.02 sec)<br>＃この時点で、wp_commentmeta.ibdは、消えている。<br>alter table wp_comments ROW_FORMAT= COMPACT;　ここからエラーに成る様です。<br>ERROR 1067 (42000): Invalid default value for 'comment_date'<br>alter table wp_ktaisession ROW_FORMAT= COMPACT;<br>ERROR 1067 (42000): Invalid default value for 'expires'<br>alter table wp_links ROW_FORMAT= COMPACT;<br>alter table wp_options ROW_FORMAT= COMPACT;<br>alter table wp_postmeta ROW_FORMAT= COMPACT;<br>alter table wp_posts ROW_FORMAT= COMPACT;<br>alter table wp_term_relationships ROW_FORMAT= COMPACT;<br>alter table wp_term_taxonomy ROW_FORMAT= COMPACT;<br>alter table wp_termmeta ROW_FORMAT= COMPACT;<br>alter table wp_terms ROW_FORMAT= COMPACT;<br>alter table wp_usermeta ROW_FORMAT= COMPACT;<br>alter table wp_users ROW_FORMAT= COMPACT;<br>alter table wp_wpmm_subscribers ROW_FORMAT= COMPACT;<br><br><br>alter table wp_commentmeta DISCARD TABLESPACE;<br>alter table wp_comments DISCARD TABLESPACE;<br>alter table wp_ktaisession DISCARD TABLESPACE;<br>alter table wp_links DISCARD TABLESPACE;<br>alter table wp_options DISCARD TABLESPACE;<br>alter table wp_postmeta DISCARD TABLESPACE;<br>alter table wp_posts DISCARD TABLESPACE;<br>alter table wp_term_relationships DISCARD TABLESPACE;<br>alter table wp_term_taxonomy DISCARD TABLESPACE;<br>alter table wp_termmeta DISCARD TABLESPACE;<br>alter table wp_terms DISCARD TABLESPACE;<br>alter table wp_usermeta DISCARD TABLESPACE;<br>alter table wp_users DISCARD TABLESPACE;<br>alter table wp_wpmm_subscribers DISCARD TABLESPACE;<br><br><br><br>alter table wp_commentmeta IMPORT TABLESPACE;<br>alter table wp_comments IMPORT TABLESPACE;<br>alter table wp_ktaisession IMPORT TABLESPACE;<br>alter table wp_links IMPORT TABLESPACE;<br>alter table wp_options IMPORT TABLESPACE;<br>alter table wp_postmeta IMPORT TABLESPACE;<br>alter table wp_posts IMPORT TABLESPACE;<br>alter table wp_term_relationships IMPORT TABLESPACE;<br>alter table wp_term_taxonomy IMPORT TABLESPACE;<br>alter table wp_termmeta IMPORT TABLESPACE;<br>alter table wp_terms IMPORT TABLESPACE;<br>alter table wp_usermeta IMPORT TABLESPACE;<br>alter table wp_users IMPORT TABLESPACE;<br>alter table wp_wpmm_subscribers IMPORT TABLESPACE;<br>-------<br>本当は、コマンドのブロックを流し込んだのですが、途中エラーが出ていました。</div><div>ibdファイルのコピーから一行一行実行してみたら、一行目しか、成功して</div><div>いません。</div><div><br></div><div>20201212のバックアップを復元直後は、こんな感じですね。</div><div><br></div><div>何方か？１万円程度で、データ復元のアルバイトしませんか？</div><div>私のスキルで復元出来そうに無いので……。　<br></div></div><br></div>

</body></html>