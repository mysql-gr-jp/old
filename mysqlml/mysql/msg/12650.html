<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12650</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="12649.html">[前]</a><a href="12651.html">[次]</a><a href="../list/12601-12700.html">[番号順一覧]</a><a href="../thread/12601-12700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:12650
</p>
<div class="header">
<p>
From: Shuichi Nakagawa &lt;Shuichi Nakagawa &lt;nakagawa.shui@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 18 Jan 2006 10:40:16 +0900<br>
Subject: [mysql 12650] Re: Insert 構文でaliasって使えない？<br>

</p>
</div>
<div class="body">
<pre>
中川＠FJITです．

おつきあい、ありがとうございます．


<span class="quote1">&gt;tbl_name表の作りの問題でしょ。</span>
<span class="quote1">&gt;select文が期待通りに動いてるなら要するに</span>
<span class="quote1">&gt;insert into tbl_name(col_name1, col_name2, col_name3)</span>
<span class="quote1">&gt;values('aaa', 2, 12);</span>
<span class="quote1">&gt;と同じことなんだから。</span>

「作りの問題」のところを考えて見ます．（長考かも）
変わった作りじゃ無いはずですけど．．．

<span class="quote1">&gt;ちなみにcol_name1がユニークじゃないなら、 B.col_name3 + 1は</span>
<span class="quote1">&gt;max(B.col_name3) + 1にした方がよさげ。</span>
<span class="quote1">&gt;ユニークだからinsertが効かないっぽいけど。</span>

col_name1 + col_name2 でユニークで
where B.col_name1 ='aaa' and B.col_name2 =1　で１レコード取ってくるので
大丈夫です．

<span class="quote1">&gt;</span>
<span class="quote2">&gt;&gt; で、さっそくやってみたのですが、今度はキー違反になります．</span>
<span class="quote2">&gt;&gt; </span>
<span class="quote2">&gt;&gt; tbl_nameは</span>
<span class="quote2">&gt;&gt; col_name1, col_name2, col_name3</span>
<span class="quote2">&gt;&gt; 'aaa'    , 1        , 11         &lt;- これが入っていて</span>
<span class="quote2">&gt;&gt; 'aaa'    , 2        , 12         &lt;- これを追加したい</span>
<span class="quote2">&gt;&gt; </span>
<span class="quote2">&gt;&gt; キーはcol_name1 + col_name2 で</span>
<span class="quote2">&gt;&gt; </span>
<span class="quote2">&gt;&gt; 'aaa'-2 のキー違反といわれます．</span>
<span class="quote2">&gt;&gt; insert 前には存在しないレコードでキー違反と言われてるようですが、</span>
<span class="quote2">&gt;&gt; </span>
<span class="quote2">&gt;&gt; 先のサブクエリの制限と同様の仕様でしょうか．</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;--------------------------------------</span>
<span class="quote1">&gt;GANBARE! NIPPON!</span>
<span class="quote1">&gt;Yahoo! JAPAN JOC OFFICIAL INTERNET PORTAL SITE PARTNER</span>
<span class="quote1">&gt;<a href="http://pr.mail.yahoo.co.jp/ganbare-nippon/">http://pr.mail.yahoo.co.jp/ganbare-nippon/</a></span>
<span class="quote1">&gt;</span>

</pre>
</div>
<p class="button"><a href="12649.html">[前]</a><a href="12651.html">[次]</a><a href="../list/12601-12700.html">[番号順一覧]</a><a href="../thread/12601-12700.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="12642.html">  12642 2006-01-17 21:19 [Shuichi Nakagawa &lt;na] Insert構文でaliasって使えない？         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12643.html">  12643 2006-01-18 07:02 ┗[oppara &lt;mlml@xxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12644.html">  12644 2006-01-18 08:29 　┗[Shuichi Nakagawa &lt;na]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12645.html">  12645 2006-01-18 09:07 　　┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12646.html">  12646 2006-01-18 09:27 　　　┣[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12647.html">  12647 2006-01-18 09:37 　　　┃┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12648.html">  12648 2006-01-18 09:58 　　　┗[Shuichi Nakagawa &lt;na]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12649.html">  12649 2006-01-18 10:12 　　　　┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                               </a></span>
<span class="current">-&gt;&nbsp;<a href="12650.html">  12650 2006-01-18 10:40 　　　　　┗[Shuichi Nakagawa &lt;na]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12651.html">  12651 2006-01-18 11:40 　　　　　　┗[Shuichi Nakagawa &lt;na]                           </a></span>
</pre>
</body>
</html>
