<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:7540</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="7539">[前]</a><a href="7541">[次]</a><a href="../list/7501-7600">[番号順一覧]</a><a href="../thread/7501-7600">[スレッド一覧]</a></p>
<p class="id">
mysql:7540
</p>
<div class="header">
<p>
From: &quot;KAWAI,Takanori&quot; &lt;&quot;KAWAI,Takanori&quot; &lt;GCD00051@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 18 Apr 2003 06:46:01 +0900<br>
Subject: [mysql 07540] Re: insert したデータの KEY  を得るには？<br>

</p>
</div>
<div class="body">
<pre>
川合孝典です。

----- Original Message -----
From: &quot;aimitsu katoh&quot; &lt;akimitsu@xxxxxxxxxx&gt;
To: &lt;ml@xxxxxxxxxx&gt;
Sent: Thursday, April 17, 2003 6:04 PM
Subject: <a href="07529">[mysql 07529]</a> insert したデータの KEY を得るには？


<span class="quote1">&gt; Katoh です。</span>
<span class="quote1">&gt; auto_increment int型 フィールドをKEYに持つデータに、データをinsertした後に</span>
<span class="quote1">&gt; そのinsertしたデータのKEYが何番であったかを知りたいのですがいい方法は</span>
<span class="quote1">&gt; ないでしょうか？</span>
<span class="quote1">&gt; Perl + MySQL +DBI でやっているのですが、insertした行の合計数しか戻り値とし</span>
て
<span class="quote1">&gt; 取得できてない状況です。</span>
DBIはデータベースに依存しないモジュールで、実際にMySQLに対する
操作ということではDBD::mysqlやDBD::mysqlPPが対応することになります。
DBD::mysqlを使っているということであれば、データベースハンドルの
属性としてmysql_insertidを持っていますから、これを利用するとよいでしょう。

&lt;引用 src=&quot;DBD::mysqlのperldoc&quot;&gt;
mysql_insertid

MySQL has the ability to choose unique key values automatically.
If this happened, the new ID will be stored in this attribute.
An alternative way for accessing this attribute is via
$dbh-&gt;{'mysql_insertid'}.
(Note we are using the $dbh in this case!)

&lt;/引用&gt;

もちろん、とみたさんの書かれている方法でも取得できるはずです。

===================================================
川合 孝典 (Hippo2000)
   DBI日本語メーリングリスト管理人、Kansai.pm所属
   kwitknr@xxxxxxxxxx GCD00051@xxxxxxxxxx
   <a href="http://member.nifty.ne.jp/hippo2000">http://member.nifty.ne.jp/hippo2000</a>、<a href="http://www.hippo2000.info/">http://www.hippo2000.info/</a>
perldocの日本語化ならperldocjp：翻訳してみませんか？
  <a href="http://sourceforge.jp/projects/perldocjp">http://sourceforge.jp/projects/perldocjp</a>
===================================================


</pre>
</div>
<p class="button"><a href="7539">[前]</a><a href="7541">[次]</a><a href="../list/7501-7600">[番号順一覧]</a><a href="../thread/7501-7600">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="7529">   7529 2003-04-17 18:04 [aimitsu katoh &lt;akimi] insert したデータの KEY を得るには？    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7532">   7532 2003-04-17 18:32 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7534">   7534 2003-04-17 18:42 ┃┗[aimitsu katoh &lt;akimi]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7536">   7536 2003-04-17 19:22 ┃　┗[Tatsuhiko Miyagawa &lt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7537">   7537 2003-04-17 19:38 ┃　　┗[aimitsu katoh &lt;akimi]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7535">   7535 2003-04-17 18:53 ┣[&quot;TOYOSHIMA,Masayuki&quot;] auto_increment int 型について         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7538">   7538 2003-04-17 23:55 ┃┗[とみたまさひろ &lt;tomm]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="7540">   7540 2003-04-18 06:46 ┗[&quot;KAWAI,Takanori&quot; &lt;GC]                                       </a></span>
</pre>
</body>
</html>
