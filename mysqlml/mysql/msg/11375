<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11375</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="11374">[前]</a><a href="11376">[次]</a><a href="../list/11301-11400">[番号順一覧]</a><a href="../thread/11301-11400">[スレッド一覧]</a></p>
<p class="id">
mysql:11375
</p>
<div class="header">
<p>
From: &quot;Tadashi Watanabe&quot; &lt;&quot;Tadashi Watanabe&quot; &lt;watana-t@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 3 May 2005 10:56:13 +0900<br>
Subject: [mysql 11375] Re: Apache::Session<br>

</p>
</div>
<div class="body">
<pre>
堀内様

ありがとうございました。
お教えいただいたとおりa_sessionカラムをlongblob型で
作成しましたところa_sessionが保存できるようになり、
解決できました。

-----Original Message-----
From: 堀内康弘 [mailto:horiuchi@xxxxxxxxxx] 
Sent: Tuesday, May 03, 2005 12:56 AM
To: ml@xxxxxxxxxx
Subject: <a href="11372">[mysql 11372]</a> Re: Apache::Session

堀内です。

blob型にするという情報ではありませんが、
<a href="http://dev.mysql.com/doc/mysql/ja/upgrading-from-4-0.html">http://dev.mysql.com/doc/mysql/ja/upgrading-from-4-0.html</a>
によるとMySQL4.1での変更点として
「すべてのテーブルと文字列カラムがキャラクタセットを持つようになった」
とあります。
text型は文字列カラムに当たりますが、
このキャラクタセットを持つようになったというのがくせ者で、
設定されたキャラクタセット以外の文字セットのデータを
入れようとするとキャラクタセットに合うように変換します。

ところで、
Apache::Sessionがa_sessionカラムに格納するデータは
Storableでハッシュを文字列化したバイナリデータですから、
キャラクタセットを持つような文字列カラムに格納しようとすると、
データがそのキャラセットに合うよう変換されてしまうため、
再び取り出した際、復元できなくなってしまいます。

ですので、a_sessionカラムの型をキャラクタセットを
持たないlongblog型にすれば解決するのではとなりました。


on 2005/05/02 21:49 Tadashi Watanabe said the following:
<span class="quote1">&gt; 堀内様</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ご回答ありがとうございます。</span>
<span class="quote1">&gt; 渡辺です。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 現在text型です。</span>
<span class="quote1">&gt; CPANのサイトにそのように書いてあるためです。</span>
<span class="quote1">&gt; longblob型で試してみて後ほど報告したします。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; できましたらblob型にするという情報がどこに記載されて</span>
<span class="quote1">&gt; いるのかお教えいただけないでしょうか。</span>
<span class="quote1">&gt; （ご存知の方おりましたら）</span>



</pre>
</div>
<p class="button"><a href="11374">[前]</a><a href="11376">[次]</a><a href="../list/11301-11400">[番号順一覧]</a><a href="../thread/11301-11400">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="11364">  11364 2005-04-29 10:29 [&quot;Tadashi Watanabe&quot; &lt;] Apache::Session                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11365">  11365 2005-05-01 11:53 ┗[sin &lt;panocon@xxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11366">  11366 2005-05-01 16:33 　┗[&quot;Tadashi Watanabe&quot; &lt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11367">  11367 2005-05-01 18:28 　　┗[sin &lt;panocon@xxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11369">  11369 2005-05-02 10:59 　　　┗[堀内康弘 &lt;horiuchi@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11371">  11371 2005-05-02 21:49 　　　　┗[&quot;Tadashi Watanabe&quot; &lt;]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11372">  11372 2005-05-03 00:56 　　　　　┗[堀内康弘 &lt;horiuchi@x]                             </a></span>
<span class="current">-&gt;&nbsp;<a href="11375">  11375 2005-05-03 10:56 　　　　　　┗[&quot;Tadashi Watanabe&quot; &lt;]                           </a></span>
</pre>
</body>
</html>
