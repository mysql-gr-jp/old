<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8467</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8466">[前]</a><a href="8468">[次]</a><a href="../list/8401-8500">[番号順一覧]</a><a href="../thread/8401-8500">[スレッド一覧]</a></p>
<p class="id">
mysql:8467
</p>
<div class="header">
<p>
From: とみたまさひろ &lt;とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 10 Dec 2003 18:28:58 +0900<br>
Subject: [mysql 08467] Re: innoDB の行排他ロックについて<br>

</p>
</div>
<div class="body">
<pre>
とみたです。

On Wed, 10 Dec 2003 14:40:19 +0900
&quot;江口&quot; &lt;eguchi@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; MySQLで大量データを持つ表に対しある処理で一部レコードを更新</span>
<span class="quote1">&gt; しながら別の処理で他のレコードを更新することが実現可能か</span>
<span class="quote1">&gt; どうかの調査を行っており、Oracleでの開発を行った経験から</span>
<span class="quote1">&gt; 双方の処理で行の排他ロックを掛ける必要があると思っています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; しかし、以下の図の様に選択した行以外の行排他ロックを行おう</span>
<span class="quote1">&gt; としてもロック待ちが発生してしまいます。</span>
<span class="quote1">&gt; テーブルロックがかかっているかの様です。</span>

テーブルはどのようにして作成したのでしょうか。

手元の環境(Linux + MySQL 4.0.15)では、次のように作成したテーブルで期待
通りに動きました。

create table a (keyno int, dat1 int, dat2 int, unique (keyno)) type=innodb;

-- 
とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;
日本MySQLユーザ会 <a href="../../../index.html">http://www.mysql.gr.jp</a>

</pre>
</div>
<p class="button"><a href="8466">[前]</a><a href="8468">[次]</a><a href="../list/8401-8500">[番号順一覧]</a><a href="../thread/8401-8500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8466">   8466 2003-12-10 14:40 [&quot;江口&quot; &lt;eguchi@xxxxx] innoDB の行排他ロックについて           </a></span>
<span class="current">-&gt;&nbsp;<a href="8467">   8467 2003-12-10 18:28 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8468">   8468 2003-12-10 18:58 　┣[&quot;江口&quot; &lt;eguchi@xxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8471">   8471 2003-12-10 19:10 　┃┗[&quot;江口&quot; &lt;eguchi@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8469">   8469 2003-12-10 19:08 　┗[&quot;HIROSE, Masaaki&quot; &lt;h]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8472">   8472 2003-12-10 19:22 　　┣[&quot;HIROSE, Masaaki&quot; &lt;h]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8483">   8483 2003-12-11 15:28 　　┗[&quot;江口&quot; &lt;eguchi@xxxxx]                                   </a></span>
</pre>
</body>
</html>
