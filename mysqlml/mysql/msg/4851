<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4851</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4850">[前]</a><a href="4852">[次]</a><a href="../list/4801-4900">[番号順一覧]</a><a href="../thread/4801-4900">[スレッド一覧]</a></p>
<p class="id">
mysql:4851
</p>
<div class="header">
<p>
From: &lt;donald@xxxxxxxxxx&gt;<br>
Date: Thu, 27 Dec 2001 21:31:47 +0900 (JST)<br>
Subject: [mysql 04851] <br>

</p>
</div>
<div class="body">
<pre>
KIDA と申します。

MySQL 3.23.46 を用いて、データベースサーバを構築しております。
現在、バックアップ方法について考えているのですが、
ぜひ皆様のお知恵を拝借したいと思いましたので、投稿させて頂きます。

週に1回はフルバックアップを取り、日々の更新は、
--log-update オプションを用いて差分ログを取ろうと思っています。

ここで、問題が生じました。
load_file()を用いて、ファイルの中身をDBにINSERTしているのですが、
差分ログにはSQL文
  insert into table_name(column_name) 
      values(load_data('/path/filename'));
が出力されるだけで、ファイルの中身までは残りません。
INSERT 後に、使用したファイルは削除するようにしてたものですから、
差分ログからDBを復元させる際は、このINSERT文でエラーに
なってしまうことに気づきました。

このエラーを回避するには、やはり、/path/filename を削除せずに
残しておく方法しかないでしょうか。

主キーが異なり、filename が同じもの、というケースが多数
存在しますので、/path/filename が 一意なものになるよう、
例えば filename.YYYYMMDDHHMMSS という感じで名前を変えてから
INSERT するように変更し、ファイルは残しておく、とするのが
手っ取り早いかな、と思っています。

このようなケースの場合、みなさんならどうしますか？
より良い方法がありましたら、ご教授ください。
よろしくお願いします。
-----
KIDA:donald@xxxxxxxxxx


</pre>
</div>
<p class="button"><a href="4850">[前]</a><a href="4852">[次]</a><a href="../list/4801-4900">[番号順一覧]</a><a href="../thread/4801-4900">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="4851">   4851 2001-12-27 21:31 [&lt;donald@xxxxxxxxxx&gt; ]                                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4865">   4865 2002-01-04 10:46 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4871">   4871 2002-01-07 14:05 　┗[&lt;donald@xxxxxxxxxx&gt; ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4872">   4872 2002-01-07 15:57 　　┣[田倉 &lt;g_sec@xxxxxxxx] MySQL-3.23.45 + MyODBC について   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4978">   4978 2002-01-18 17:58 　　┃┗[ken &lt;kenn@xxxxxxxxxx] mm.mysql.Driver での 2000 年問題？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4979">   4979 2002-01-18 22:01 　　┃　┣[&quot;TAKAHASHI, Tomohiro]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4980">   4980 2002-01-18 22:09 　　┃　┗[&quot;TAKAHASHI, Tomohiro]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4874">   4874 2002-01-08 03:07 　　┣[&quot;Takuji Hidaka&quot; &lt;tak]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4893">   4893 2002-01-10 01:45 　　┃┗[とみたまさひろ &lt;tomm] 排他制御                        </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4894">   4894 2002-01-10 04:31 　　┃　┗[&quot;Takuji Hidaka&quot; &lt;tak]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4891">   4891 2002-01-10 00:59 　　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4895">   4895 2002-01-10 17:36 　　　┗[&lt;donald@xxxxxxxxxx&gt; ]                                 </a></span>
</pre>
</body>
</html>
