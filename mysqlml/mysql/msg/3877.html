<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3877</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="3876.html">[前]</a><a href="3878.html">[次]</a><a href="../list/3801-3900.html">[番号順一覧]</a><a href="../thread/3801-3900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:3877
</p>
<div class="header">
<p>
From: Tybalt of Capulet &lt;Tybalt of Capulet &lt;ice-man@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 03 Jul 2001 18:24:08 +0900<br>
Subject: [mysql 03877] auto_increment の値の取得について<br>

</p>
</div>
<div class="body">
<pre>
神崎です。

現在auto_incrementで自動的に割り振られた値を得ようとして
つまづいております。

下記のようなidがauto_incrementのテーブルが存在します。

create table A (
id INT(9) NOT NULL AUTO_INCREMENT,
name VARCHAR(50) NOT NULL,
primary key (id)
)

マニュアルの説明ではmysql_insert_id()は
「前のクエリによって AUTO_INCREMENT フィールドに生成された ID を返します。」
ということは下記のようなインサートを発行してからmysql_insert_id()を
実行するとこのインサートで割り振られたidを得ることができるのでしょうか？

INSERT INTO A (name) VALUES('$name');

またちょっとひっかかるのが、アクセス過多で同時に複数インサートをしようとした時
mysql_insert_id()の値がずれてしまい同時に行った違うIDを取得してしまうことは
考えられるのでしょうか？

更にここで質問するのは場違いとは思いますがPHP4.0.5でこの処理を行っており、
下記のようにmysql_insert_id()を取得しようとしたのですができませんでした。
実際のmysql_insert_id()の使い方がわかっておりません。

$insid = mysql_fetch_array( mysql_query( &quot;mysql_insert_id() as ins&quot; ) );
&lt;? echo $insid[ins] ?&gt;

どなたかおわかりの方ご教授いただけないでしょうか？


_______________________________R_y_u_____
神崎 隆
Mail：ice-man@xxxxxxxxxx
_____K_a_n_z_a_k_i________________________


</pre>
</div>
<p class="button"><a href="3876.html">[前]</a><a href="3878.html">[次]</a><a href="../list/3801-3900.html">[番号順一覧]</a><a href="../thread/3801-3900.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="3877.html">   3877 2001-07-03 18:24 [Tybalt of Capulet &lt;i] auto_increment の値の取得について       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3878.html">   3878 2001-07-03 19:17 ┗[Akihiko Shinohara &lt;s]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3880.html">   3880 2001-07-04 00:53 　┗[Tybalt of Capulet &lt;i]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3881.html">   3881 2001-07-04 10:11 　　┗[Akihiko Shinohara &lt;s]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3883.html">   3883 2001-07-04 13:01 　　　┗[Tybalt of Capulet &lt;i]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3884.html">   3884 2001-07-04 13:32 　　　　┣[Akihiko Shinohara &lt;s]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3892.html">   3892 2001-07-04 23:46 　　　　┗[とみたまさひろ &lt;tomm]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3897.html">   3897 2001-07-05 02:47 　　　　　┗[Tybalt of Capulet &lt;i]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3912.html">   3912 2001-07-05 16:24 　　　　　　┗[とみたまさひろ &lt;tomm]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3913.html">   3913 2001-07-05 16:54 　　　　　　　┗[Tybalt of Capulet &lt;i]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3914.html">   3914 2001-07-05 21:04 　　　　　　　　┣[とみたまさひろ &lt;tomm]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3918.html">   3918 2001-07-06 15:09 　　　　　　　　┗[ken &lt;kenn@xxxxxxxxxx] my.cnf で max_allowed_packet が反映されない？</a></span>
</pre>
</body>
</html>
