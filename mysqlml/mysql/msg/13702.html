<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13702</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="13701.html">[前]</a><a href="13703.html">[次]</a><a href="../list/13701-13800.html">[番号順一覧]</a><a href="../thread/13701-13800.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13702
</p>
<div class="header">
<p>
From: Haruhiko Otsuki &lt;Haruhiko Otsuki &lt;hotsuki@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 29 Jan 2007 17:42:36 +0900<br>
Subject: [mysql 13702] メモリの制限について<br>

</p>
</div>
<div class="body">
<pre>はじめまして、大槻と申します。

mysqlサーバーを３台運用しています。
すべて同一の環境です。
FreeBSD5.4、MySQL4.0.26、実メモリ１G、スワップ３G
mysqlの設定はmy-large.cnfをコピーしてそのまま使っています。

そのうちの一台で、大量のテーブルの追加作業を行っている途中で調子が
悪くなり、サーバーを再起動すると、Out of memory のエラーでmysqldが
立ち上がらなくなりました。とりあえずkey_bufferのサイズを減らすことで
動くようにはなっているのですが、原因がわかりません。

外部からの接続がない状態でtopコマンドで３台のサーバーのmysqldのメモリ
使用量を調べてみると、同じ設定の２台でもだいぶ違いますし、key_buffer
のサイズをぐっと減らした１台も他の２台とほぼ同じサイズのメモリを食って
います。もともとの３台の差は、実際のデーターベースの構成だけですので、
mysqldが立ち上がるとき、データーベースの構成に依存して、メモリが確保
されているように思えます。

いろいろと情報源をあたってみましたが、グローバルで割り当てられる
メモリの中に、データーベースの構成に依存しているものがあるような
記述は見当たりません。が、状況から判断するとそういったものがある
ようにしか思えません。

mysqldの立ち上がり時のメモリの確保について、詳しい方がおられましたら
お教え下さい。


</pre>
</div>
<p class="button"><a href="13701.html">[前]</a><a href="13703.html">[次]</a><a href="../list/13701-13800.html">[番号順一覧]</a><a href="../thread/13701-13800.html">[スレッド一覧]</a></p>


</body></html>