<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13534</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="13533.html">[前]</a><a href="13535.html">[次]</a><a href="../list/13501-13600.html">[番号順一覧]</a><a href="../thread/13501-13600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13534
</p>
<div class="header">
<p>
From: &lt;xbox@xxxxxxxxxx&gt;<br>
Date: 22 Nov 2006 14:00:51 +0900<br>
Subject: [mysql 13534] [質問]突如データベース接続不能となってしまいました。<br>

</p>
</div>
<div class="body">
<pre>
はじめて投稿させていただきます。
中原と申します。

現在Debian Sage上にてMysql4.0.24 をインストールし、CMSとし
てXoopsを利用していたのですが、昨晩より下記のエラーが発生
し、データーベースへの接続が不能となってしまいました。

Unable to connect to database in file class/database/databasefactory.php line 34

実際にtelnetでログインすると、mysqldが起動されておらず、

/etc/init.d/mysql strat

を実行しても数秒後にメッセージモなくプロンプトが戻ってくる
だけで終了してしまいます。


/var/log/mysql.err にはデータが無くゼロバイト
/var/log/mysql.log もゼロバイトの状態です。

ソケット等を調べようとしたのですが
/var/run/を覗くとmysqldのディレクトリが無く、無いことが異常
なのかも知識が無く、判断できていません。


cnfファイルの確認をしたところ、

debina.cnf：

# Automatically generated for Debian scripts. DO NOT TOUCH!
[client]
host     = localhost
user     = debian-sys-maint
password = XXXXXXXXXXXXXXXXX
socket   = /var/run/mysqld/mysqld.sock


my.cnf：

[client]
port            = 3306
socket          = /var/run/mysqld/mysqld.sock

[mysqld_safe]
socket          = /var/run/mysqld/mysqld.sock
nice            = 0

[mysqld]
#
# * Basic Settings
#
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/lib/mysql
tmpdir          = /tmp
language        = /usr/share/mysql/japanese

上記2ファイルとも/var/run/mysqld/を指し示していました。

そして、上記languageの項目から /usr/share/を覗くと、mysqlと
いうディレクトリそのものがありません。


せめてエラーログに何か溜まれば、推測のしようもあるのですが
・・・
現状このような状態となっております。


つきましては、正常復帰を望んでおりますが、下記件もあわせて、
ご質問させてください。

1./var/runの下にmysqldのディレクトリが無いのは正常なのか？
2./usr/share/の下にmysqlのディレクトリが無いのは正常なのか？
3.mysqldが起動していない状態での、データベースの保存（バッ
  クアップ手段があるのか？）は可能でしょうか？

よろしくお願い申し上げます。

+-----------------+
 Tetsuya NAKAHARA
 xbox@xxxxxxxxxx
+-----------------+

</pre>
</div>
<p class="button"><a href="13533.html">[前]</a><a href="13535.html">[次]</a><a href="../list/13501-13600.html">[番号順一覧]</a><a href="../thread/13501-13600.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="13534.html">  13534 2006-11-22 14:00 [&lt;xbox@xxxxxxxxxx&gt;   ] [質問]突如データベース接続不能となってしまいました。</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13535.html">  13535 2006-11-22 14:34 ┣[&quot;YuGo&quot; &lt;yu.gotou@xxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13536.html">  13536 2006-11-22 14:36 ┣[SATOH Fumiyasu &lt;fumi]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13592.html">  13592 2006-12-07 21:18 ┗[Tetsuya NAKAHARA &lt;xb]                                       </a></span>
</pre>
</body>
</html>
