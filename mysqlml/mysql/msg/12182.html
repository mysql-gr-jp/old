<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12182</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="12181.html">[前]</a><a href="12183.html">[次]</a><a href="../list/12101-12200.html">[番号順一覧]</a><a href="../thread/12101-12200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:12182
</p>
<div class="header">
<p>
From: "Shuichi Tamagawa" &lt;"Shuichi Tamagawa" &lt;shuichi@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 25 Sep 2005 17:38:02 -0700<br>
Subject: [mysql 12182] Re: 複数DBから<br>

</p>
</div>
<div class="body">
<pre>玉川です。

MySQLのバージョンは4.1とのことですが、5.0.3以降であれば
新しく追加されたFEDERATED Storage Enginが使用できると思います。
<a href="http://dev.mysql.com/doc/mysql/en/federated-storage-engine.html">http://dev.mysql.com/doc/mysql/en/federated-storage-engine.html</a>
<a href="http://dev.mysql.com/doc/mysql/en/federated-use.html">http://dev.mysql.com/doc/mysql/en/federated-use.html</a>

Bサーバにて"uriage" DBと"sale"テーブルを作成した後、Aサーバにて

CREATE TABLE sale (
sale_id　...
sale_user_id ...
sale_item ...
sale_date ...
sale_price ...
)
ENGINE=FEDERATED
COMMENT='mysql://ユーザー名@ホスト名:ポート番号/uriage/sale';

といった感じにテーブルを作ればBサーバのテーブルが
ローカルにあるように使用できるのではないでしょうか。

ご参考まで。

<span class="quote1">&gt; -----Original Message-----</span>
<span class="quote1">&gt; From: KIYOSE [mailto:kiyose@xxxxxxxxxx]</span>
<span class="quote1">&gt; Sent: Saturday, September 24, 2005 8:31 AM</span>
<span class="quote1">&gt; To: ml@xxxxxxxxxx</span>
<span class="quote1">&gt; Subject: <a href="12175.html">[mysql 12175]</a> 複数DBから</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; はじめまして　kenji　と申します。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; MySQL初心者です。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; PHPとMySQLを使って</span>
<span class="quote1">&gt; 複数のサーバにあるMySQLのDBからデータを抽出して</span>
<span class="quote1">&gt; 出力する場合の方法をご教授いただきたいと思います。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; やりたい内容は以下のとおりです。</span>
<span class="quote1">&gt; 例：</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; Aサーバ：DB名：cus、テーブル名：customer</span>
<span class="quote1">&gt; Bサーバ：DB名：uriage、テーブル：sale</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; customerテーブルの顧客データを基準として</span>
<span class="quote1">&gt; saleのデータと連動させて</span>
<span class="quote1">&gt; 顧客別売り上げ表を作成したいです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; customerテーブルは以下の２カラムとします。、</span>
<span class="quote1">&gt; user_id</span>
<span class="quote1">&gt; user_name</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; saleテーブルは、以下の５カラムとします。</span>
<span class="quote1">&gt; sale_id</span>
<span class="quote1">&gt; sale_user_id</span>
<span class="quote1">&gt; sale_item</span>
<span class="quote1">&gt; sale_date</span>
<span class="quote1">&gt; sale_price</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; user_id＝sale_user_id　を前提とします。</span>
<span class="quote1">&gt; 最終的には、以下のような表を作成したいです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; user_id　　　　sale_date　　　　　　　sale_item　　　　　　</span>
<span class="quote1">&gt; sale_price	user_name</span>
<span class="quote1">&gt; 001	　　　2005-8-15　　　　　　　yasai　　　　　　　　</span>
<span class="quote1">&gt; 1500		takashi</span>
<span class="quote1">&gt; 001	　　　2005-8-25　　　　　　　niku　　　　　　　　　</span>
<span class="quote1">&gt; 2800		takashi</span>
<span class="quote1">&gt; 003　　　　　　2005-8-12　　　　　　　niku　　　　　　　　　</span>
<span class="quote1">&gt; 1200		noriko</span>
<span class="quote1">&gt; 003　　　　　　2005-8-20　　　　　　　kudamono　　　　　</span>
<span class="quote1">&gt; 3600		noriko</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 同じサーバの同じDBであれば簡単な内容なのでしょうが、</span>
<span class="quote1">&gt; 別サーバの別DBであると、やり方がさっぱりわかりません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; サーバは、LINUXサーバです。</span>
<span class="quote1">&gt; MySQLは4.1</span>
<span class="quote1">&gt; PHPは、4.3.2を想定しています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; よろしくお願い致します。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>


</pre>
</div>
<p class="button"><a href="12181.html">[前]</a><a href="12183.html">[次]</a><a href="../list/12101-12200.html">[番号順一覧]</a><a href="../thread/12101-12200.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="12175.html">  12175 2005-09-25 00:31 ["KIYOSE" &lt;kiyose@xxx] 複数DBから                              </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12181.html">  12181 2005-09-26 08:41 ┣["Keiji Watanabe" &lt;ke]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="12182.html">  12182 2005-09-26 09:38 ┗["Shuichi Tamagawa" &lt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12183.html">  12183 2005-09-26 23:47 　┗["KIYOSE" &lt;kiyose@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12196.html">  12196 2005-09-30 21:09 　　┗["KIYOSE" &lt;kiyose@xxx] 複数DB接続の再質問です。          </a></span>
</pre>


</body></html>