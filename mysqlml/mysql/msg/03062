<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3062</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="3061">[前]</a><a href="3063">[次]</a><a href="../list/3001-3100">[番号順一覧]</a><a href="../thread/3001-3100">[スレッド一覧]</a></p>
<p class="id">
mysql:3062
</p>
<div class="header">
<p>
From: &lt;ky@xxxxxxxxxx&gt;<br>
Date: Fri, 19 Jan 2001 14:26:56 +0900<br>
Subject: [mysql 03062] PHP4 を使った検索ページを作りたい<br>

</p>
</div>
<div class="body">
<pre>
こんにちは、横森と申します。

MySQL3.23.30gammaとIIS5＋PHP4を使った検索ページに挑戦していますが
どうしてもうまく行かないところがあります。

MySQL徹底入門の5項を参考に以下の様な検索のページを作ろうとしています。
またMySQLとIIS、PHPそれぞれは正常に動いているのですが、以下の入力
フォームに英数字を入力するとうまく検索出来るのですが、2バイト文字
を入力すると検索結果０で何も表示されなくなってしまいます。
文字コードがらみの問題かなと思って調べているのですがヒントが見つけ
られません。
分かる方がいらっしゃれば解決のヒントをいただけると助かります。
よろしくおねがいします。

-----------------------search_k.html---------------------------
&lt;body&gt;
電話番号検索&lt;br&gt;
&lt;form method=&quot;post&quot; action=&quot;search_k.php&quot;&gt;
&lt;table&gt;
&lt;tr&gt;&lt;td&gt;名前&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; size=20&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;input type=&quot;submit&quot; VALUE=&quot;検索&quot;&gt;
&lt;tr&gt;&lt;td&gt;&lt;input type=&quot;reset&quot;  VALUE=&quot;入力クリア&quot;&gt;
&lt;/table&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

-----------------------search_k.php----------------------------
&lt;TABLE BORDER&gt;
&lt;?php
include &quot;mysub.php3&quot;;
myopen();
$row=mysql_select_db(&quot;address&quot;,$my_con);
if(!$result=mysql_query(&quot;select * from Konyu where Name like '%$name%'&quot;) )
{
    print &quot;失敗 コード＝&quot;.mysql_errno().&quot;&lt;br&gt;&quot;;
     exit;
}
while($row=mysql_fetch_array($result) ) {

	print &quot;&lt;TR&gt;&lt;TD&gt;&quot; .$row[&quot;Yomi&quot;]. 
	     &quot;&lt;/TD&gt;&lt;TD&gt;&quot; .$row[&quot;Name&quot;].
	     &quot;&lt;/TD&gt;&lt;TD&gt;&quot; .$row[&quot;Tel&quot;]. 
	     &quot;&lt;/TD&gt;&lt;TD&gt;&quot; .$row[&quot;Fax&quot;]. 
	     &quot;&lt;/TD&gt;&lt;TD&gt;&quot; .$row[&quot;Other&quot;]. &quot;&lt;/TD&gt;&lt;/TR&gt;&quot;;
}
mysql_free_result($result);
if( ! @mysql_close($my_con) ) {
    print &quot;${hostname}とのMySQLの切断に失敗しました。&lt;br&gt;&quot;;
}
?&gt;
&lt;/TABLE&gt;
--------------------------------------------------------------
ky@xxxxxxxxxx


</pre>
</div>
<p class="button"><a href="3061">[前]</a><a href="3063">[次]</a><a href="../list/3001-3100">[番号順一覧]</a><a href="../thread/3001-3100">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="3061">   3061 2001-01-19 09:41 [Seiji Tateyama &lt;tate] MySQL 3.23.31                           </a></span>
<span class="current">-&gt;&nbsp;<a href="3062">   3062 2001-01-19 14:26 ┣[&lt;ky@xxxxxxxxxx&gt;     ] PHP4 を使った検索ページを作りたい     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3066">   3066 2001-01-19 16:28 ┃┗[Akihiko Shinohara &lt;s]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3063">   3063 2001-01-19 15:04 ┗[Hiroyuki Sato &lt;hiro@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3064">   3064 2001-01-19 15:08 　┣[Tatsuhiko Miyagawa &lt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3065">   3065 2001-01-19 15:17 　┃┗[Hiroyuki Sato &lt;hiro@]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3078">   3078 2001-01-20 16:54 　┗[Hiroyuki Sato &lt;hiro@]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3086">   3086 2001-01-23 12:38 　　┗[Seiji Tateyama &lt;tate] MySQL 3.23.32( Re: MySQL 3.23.31) </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3089">   3089 2001-01-23 14:12 　　　┣[Hiroyuki Sato &lt;hiro@]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3091">   3091 2001-01-24 12:58 　　　┗[Seiji Tateyama &lt;tate] セキュリティホールのためバージョンアップお勧め</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3092">   3092 2001-01-24 13:10 　　　　┗[Seiji Tateyama &lt;tate]                               </a></span>
</pre>
</body>
</html>
