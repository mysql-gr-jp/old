<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8547</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8546.html">[前]</a><a href="8548.html">[次]</a><a href="../list/8501-8600.html">[番号順一覧]</a><a href="../thread/8501-8600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8547
</p>
<div class="header">
<p>
From: &quot;kato@xxxxxxxxxx&quot; &lt;&quot;kato@xxxxxxxxxx&quot; &lt;kato@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 28 Dec 2003 15:43:09 +0900<br>
Subject: [mysql 08547] PHP から MYSQL に<br>

</p>
</div>
<div class="body">
<pre>
はじめて投稿します。
加藤と申します。

PHP　MYSQLでWEBサイトを構築しているのですが、バージョンなどは下記の通りで
す。
PHP：4.31
MYSQL　： 3.23.54
OS: FreeBSD 4.2
Web Server: Apache 1.3.12

このWEBサーバーにはサブホストを作成していて、そのサブホストにあるphpファイル
からデータをMYSQLにloadします。

※サブホストgreenの下にtest.csvを保存するようにしています。
$sql = &quot;load data infile '/home/green/～/test.csv' ignore into table $table
fields terminated by ','   ignore $offsety lines  &quot;;（ちなみにtest.csvファイ
ルはphpのファイルアップロード機能でアップしてあります。）
if (!$result = db_query(DB_NAME,$sql,$d-&gt;con)) {exit;}

上記のphpファイルでデータをloadしようとすると
Can't get stat of '/home/green/～/test.csv' (Errcode: 13)
というエラーがでます。
おそらく13はパーミッションエラーなので、

ファイルの所有者を調べたところ、下記のとおりです。
15385503 -rw-r--r--  1 www      www       0 Dec 28 05:18 test.csv


そこでやむなく、サブホストのtext.csvをメインの/usr/local/apache/htdocsに
telnetでコピーし、

phpファイルもそのメインのhtdocsにあるそのtext.csvに対してloadを掛けるとうま
く動作します。
$sql = &quot;load data infile '/usr/local/apache/htdocs/test.csv' ignore into
table $table fields terminated by ','   ignore $offsety lines  &quot;;
if (!$result = db_query(DB_NAME,$sql,$d-&gt;con)) {exit;}

ファイルの所有者などは下記のとおりです。
11021875 -rw-r--r--   1 root      webadmin       0 Dec 28 06:27 test.csv
LOAD DATA INFILE &quot;/home/myname/textfile.txt&quot; INTO TABLE tablename


私が考えますに、なにかMYSQL側の設定をかえてあげればサブホストのcsvデータから
でもloadできるのではないかと考えています。
どなたかお分かりになる方、ご教授お願い致します。





</pre>
</div>
<p class="button"><a href="8546.html">[前]</a><a href="8548.html">[次]</a><a href="../list/8501-8600.html">[番号順一覧]</a><a href="../thread/8501-8600.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="8547.html">   8547 2003-12-28 15:43 [&quot;kato@xxxxxxxxxx&quot; &lt;k] PHP から MYSQL に                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8548.html">   8548 2003-12-28 20:06 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8549.html">   8549 2003-12-28 20:29 　┗[&quot;kato@xxxxxxxxxx&quot; &lt;k]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8550.html">   8550 2003-12-28 21:54 　　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8551.html">   8551 2003-12-28 22:25 　　　┗[&quot;kato@xxxxxxxxxx&quot; &lt;k]                                 </a></span>
</pre>
</body>
</html>
