<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:1979</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="1978.html">[前]</a><a href="1980.html">[次]</a><a href="../list/1901-2000.html">[番号順一覧]</a><a href="../thread/1901-2000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:1979
</p>
<div class="header">
<p>
From: (moeru) &lt;&lt;moeru@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 09 May 2000 20:24:33 +0900<br>
Subject: [mysql 01979] Re: AUTO_INCREMENT<br>

</p>
</div>
<div class="body">
<pre>

2000/05/08 23:53:33 +0900にとみたまさひろ &lt;tommy@xxxxxxxxxx&gt;さんに頂いた
「<a href="01978.html">[mysql 01978]</a> Re: AUTO_INCREMENT」への返事です。

とみたさん、こんにちは(^^)

<span class="quote1">&gt;そんなことはありません。AUTO_INCREMENT は自動的に番号をつけてくれるとい</span>
<span class="quote1">&gt;うだけです。</span>

理解しました。便利ですね(^^)

<span class="quote2">&gt;&gt; 	PRIMARY KEY (id,username)</span>
<span class="quote1">&gt;だと、(1,&quot;hoge&quot;), (2, &quot;fuga&quot;), (3, &quot;hoge&quot;), (1, &quot;fuga&quot;) というレコードが</span>
<span class="quote1">&gt;作れてしまうと思うんですが、これは多分意図してないですよね？</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;「id と usrename の組合せが一意である」じゃなくて「id と username それぞ</span>
<span class="quote1">&gt;れ一意である」ようにしたいのなら、</span>

質問して良かったです。。。大変なことになるところでした(^^;

ぼくは、データベースでの「一意」という意味がよく分かってないみたいです(^^;

「一意」がPRIMARY KEY(id)などによって
usersテーブル全体に意味を持たせることができるのか
usersテーブルの中の各フィールドにのみなのかということです。


<span class="quote1">&gt;	PRIMARY KEY(id), UNIQUE (username)</span>
<span class="quote1">&gt;とした方がいいと思います。</span>

UNIQUE (username)なんてあるんですね。


CREATE TABLE users (
	id INT NOT NULL AUTO_INCREMENT,
	username VARCHAR(20) NOT NULL,
	password VARCHAR(20),
	email VARCHAR(50) NOT NULL,
	PRIMARY KEY (id,username)
	INDEX (username) ,
	INDEX (email) ,
);

つまり、このusersテーブルの中で、
UNIQUE (username)とすれば、この後登録されるであろうユーザー名に
同じ名前を使うことができないと理解すればいいでしょうか。


ぼくは、このことをＰＨＰのプログラム側で解決しようと思っていたのですが
これは、データベースの設計上そうしたほうがいいでしょうか。(実行速度的にとか。。)

であれば、

CREATE TABLE users (
	id INT NOT NULL AUTO_INCREMENT,
	username VARCHAR(20) NOT NULL,
	password VARCHAR(20),
	email VARCHAR(50) NOT NULL,
	PRIMARY KEY(id)
	UNIQUE (username,email)
);

で
	INDEX (username) ,
	INDEX (email) ,
はいらないってことですか？
で
usernameに今後同じ名前を許可しない。
emailに今後同じ名前を許可しない。


それと、うちの場合、詐欺防止に必死なんですが(^^;

username-Aの人がemail-Aで登録されたとします。
その後
username-Aの人がusername-Bで登録して
username-B　email-A

を許可したくない場合

UNIQUE (username,email)

でいいでしょうか？

アドバイスいただけたら幸いですm(__)m
どうぞ宜しくお願いします。



モエル
ぐるぐるオークション
<a href="http://www.pileup.com/auction/">http://www.pileup.com/auction/</a>
＊新しいサイト(ぐるぐる)構築の為の仲間募集中です(^^)

</pre>
</div>
<p class="button"><a href="1978.html">[前]</a><a href="1980.html">[次]</a><a href="../list/1901-2000.html">[番号順一覧]</a><a href="../thread/1901-2000.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="1977.html">   1977 2000-05-08 23:37 [&lt;moeru@xxxxxxxxxx&gt;  ] AUTO_INCREMENT                          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1978.html">   1978 2000-05-08 23:53 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="1979.html">   1979 2000-05-09 20:24 　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1980.html">   1980 2000-05-09 21:07 　　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1982.html">   1982 2000-05-09 21:39 　　　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                                 </a></span>
</pre>
</body>
</html>
