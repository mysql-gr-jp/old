<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:2779</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="2778">[前]</a><a href="2780">[次]</a><a href="../list/2701-2800">[番号順一覧]</a><a href="../thread/2701-2800">[スレッド一覧]</a></p>
<p class="id">
mysql:2779
</p>
<div class="header">
<p>
From: (moeru) &lt;&lt;moeru@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 05 Dec 2000 18:08:08 +0900<br>
Subject: [mysql 02779] Re: magic_quotes off 時のメタ文字の扱い<br>

</p>
</div>
<div class="body">
<pre>

2000/12/05 01:01:47 +0900に松並 &lt;matunami@xxxxxxxxxx&gt;さんに頂いた
「<a href="02778">[mysql 02778]</a> Re: magic_quotes off時のメタ文字の扱い」への返事です。

モエルです。

松並さん、コメントありがとうございました。

<span class="quote1">&gt;私の場合、</span>
<span class="quote1">&gt;・MySQLへのinsert時　→　addslashesした値をquery文に入れる</span>
<span class="quote1">&gt;・MySQLからselect時　→　mysql_fetch_xxxするだけで、stripslashesはしない</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;で行ってますけど、特に問題はないようです。</span>

<span class="quote1">&gt;insert時にaddslashesした文字列をmysqlコマンドでselect文をインタラクティブに</span>
<span class="quote1">&gt;実行してみると、エスケープするためにaddslashesしたスラッシュなどがないです。</span>
<span class="quote1">&gt;これをもとに、stripslashesはいらないものかと思ってました。</span>
<span class="quote1">&gt;</span>

ぼくの場合、stripslashes($result);もやってたので
その辺が原因だったようです。

ありがとうございますm(__)m

<span class="quote1">&gt;・MySQLへのinsert時　→　addslashesした値をquery文に入れる</span>
<span class="quote1">&gt;・MySQLからselect時　→　mysql_fetch_xxxするだけで、stripslashesはしない</span>

この状態で、実験してみたのですが、まだ問題あるので
相談に載ってください。

アポストロフィーは、以下のように問題なかったです。

INSERT INTO event VALUES( '25', '1', '2', '946656000', '951840000', 'パソ\コン');
INSERT INTO event VALUES( '26', '1', '2', '946656000', '951840000', 'パソ\コン\'s');


しかし、カンマが問題のようです。

女子高生's ,,,’

というデータを上記条件で入れてみました。
これは、ＷＥＢ上では問題なく表示しています。

しかし、ダンプをとって
INSERT INTO event VALUES( '27', '1', '2', '946656000', '954518400', '女子高生\'s ,,,’');
ってやると

MySQL said: You have an error in your SQL syntax near 's'); 
INSERT INTO event VALUES( '27', '1', '2', '946656000', '954518400', '女子・ at line 1

ってエラーになります。


ＰＨＰを通してINSERT(例えば、他のテーブルにコピーとか)とかは問題なかったりしてますか？

バックアップなどの時にも問題発生しそうですよね？

このへんは、どう解決されてますか？


どうぞ宜しくお願いしますm(__)m


モエル



</pre>
</div>
<p class="button"><a href="2778">[前]</a><a href="2780">[次]</a><a href="../list/2701-2800">[番号順一覧]</a><a href="../thread/2701-2800">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="2777">   2777 2000-12-04 17:47 [&lt;moeru@xxxxxxxxxx&gt;  ] magic_quotes off 時のメタ文字の扱い     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2778">   2778 2000-12-05 01:01 ┗[松並 &lt;matunami@xxxxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="2779">   2779 2000-12-05 18:08 　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2783">   2783 2000-12-06 00:12 　　┗[松並 &lt;matunami@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2792">   2792 2000-12-06 15:55 　　　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2825">   2825 2000-12-07 14:06 　　　　┗[松並 &lt;matunami@xxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2835">   2835 2000-12-07 16:59 　　　　　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                             </a></span>
</pre>
</body>
</html>
