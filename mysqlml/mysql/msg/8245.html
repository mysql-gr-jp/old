<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8245</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8244.html">[前]</a><a href="8246.html">[次]</a><a href="../list/8201-8300.html">[番号順一覧]</a><a href="../thread/8201-8300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8245
</p>
<div class="header">
<p>
From: (Yoshimasa Numata) &lt;&lt;numata@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 01 Oct 2003 17:02:02 +0900<br>
Subject: [mysql 08245] Re: 「高知県」と「香川県」に関しまして。<br>

</p>
</div>
<div class="body">
<pre>
沼田と申します。

支社名をKEYにするのは止めて、支社コードを持ち
支社コードをプライマリーキーにすべきではないでしょうか？



On Wed, 01 Oct 2003 16:57:37 +0900
&quot;A.K.I.&quot; &lt;aki@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; A.K.I. です。</span>
<span class="quote1">&gt; こちらで動いているのはportsで入れた4.0.13なのですが、適当なテーブルを作</span>
<span class="quote1">&gt; り、主キーのフィールドに「香川支社」「高知支社」を入れてみたのですが、問</span>
<span class="quote1">&gt; 題なくはいるようです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; １．今あるテーブルに入ってるのは「高知支社」「香川支社」だけなのか？</span>
<span class="quote1">&gt; ２．新しくテーブルを作ってもその二つは入らないのか？</span>
<span class="quote1">&gt; ３．すでに「高知支社」があるのに「高知支社」をInsertしていないか？</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; あたりがはっきりするともう少しすっきりするかなと思います。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; On Wed, 1 Oct 2003 16:32:15 +0900</span>
<span class="quote1">&gt; &quot;Keisuke Hamanaka&quot; &lt;hamanaka015@xxxxxxxxxx&gt; wrote:</span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt; いつもお世話になっております。</span>
<span class="quote2">&gt; &gt; 濱中と申します。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; 先日、「香川支社」と「高知支社」を登録すると重複エラーがでると、相談させていただ</span>
<span class="quote2">&gt; &gt; いた者です（前回は書き忘れましたが、支社名が主キーになっています）。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; A.K.Iさんからアドバイスいただき、再度MYSQLをインストールする</span>
<span class="quote2">&gt; &gt; ことにしました。</span>
<span class="quote2">&gt; &gt; 具体的には、mysql3.23.58のソースをダウンロードし、Configure時に</span>
<span class="quote2">&gt; &gt; --with-charset=ujis</span>
<span class="quote2">&gt; &gt; をつけました。</span>
<span class="quote2">&gt; &gt; （以下、Configure時の出力画面の一部）</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; checking &quot;character sets&quot;... default: ujis; compiled in: ujis  big5 cp1251</span>
<span class="quote2">&gt; &gt; cp125</span>
<span class="quote2">&gt; &gt; 7 croat czech danish dec8 dos estonia euc_kr gb2312 gbk german1 greek hebrew</span>
<span class="quote2">&gt; &gt; hp8</span>
<span class="quote2">&gt; &gt;  hungarian koi8_ru koi8_ukr latin1 latin2 latin5 swe7 usa7 win1250 win1251</span>
<span class="quote2">&gt; &gt; win12</span>
<span class="quote2">&gt; &gt; 51ukr sjis tis620</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; 結果、状況は一部改善したのですが、相変わらず、データを登録すると</span>
<span class="quote2">&gt; &gt; 重複エラーが出ます。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; &lt;改善した内容&gt;</span>
<span class="quote2">&gt; &gt; 以前は、支社名を「高知」、「香川支社」とすると登録できました。しかし、</span>
<span class="quote2">&gt; &gt; select * from hoge_tbl where shisha like '高%'</span>
<span class="quote2">&gt; &gt; と検索すると、</span>
<span class="quote2">&gt; &gt; 「高知」</span>
<span class="quote2">&gt; &gt; 「香川支社」</span>
<span class="quote2">&gt; &gt; の両方がヒットしました。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; しかし、再インストール後は（--with-charset=ujisをつけた後は）、</span>
<span class="quote2">&gt; &gt; select * from hoge_tbl where shisha like '高%'</span>
<span class="quote2">&gt; &gt; と検索すると</span>
<span class="quote2">&gt; &gt; 「高知」</span>
<span class="quote2">&gt; &gt; だけが出力されるようになりました。</span>
<span class="quote2">&gt; &gt; つまり検索に関しては問題は解決したものと考えています。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; しかし、データを登録しようとすると、どうしても重複エラーが出てしまい、悩んで</span>
<span class="quote2">&gt; &gt; います。</span>
<span class="quote2">&gt; &gt; 皆様の環境ではいかがなものでしょうか？</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; なにかアドバイスがあれば、ご教授いただけませんでしょうか。</span>
<span class="quote2">&gt; &gt; よろしくお願いいたします。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; </span>
<span class="quote3">&gt; &gt; &gt; A.K.I.と申します。</span>
<span class="quote3">&gt; &gt; &gt; FreeBSDのpackagesのものはデフォルトがlatin1になっていたかと思います。</span>
<span class="quote3">&gt; &gt; &gt; charsetのリストの中にも日本語は入っていなかったように思います。</span>
<span class="quote3">&gt; &gt; &gt; （なのでujisを指定すると知らないと言われる）</span>
<span class="quote3">&gt; &gt; &gt; portsからmakeして、WITH_CHARSET=ujis を指定するのがよいかと。</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt; On Fri, 29 Aug 2003 17:38:19 +0900</span>
<span class="quote3">&gt; &gt; &gt; &quot;Keisuke Hamanaka&quot; &lt;hamanaka015@xxxxxxxxxx&gt; wrote:</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote4">&gt; &gt; &gt; &gt; 現在、PHP4.3.1+mySQL3.23.56でデータベースを作っています。</span>
<span class="quote4">&gt; &gt; &gt; &gt; MySQLはfreeBSDのパッケージのものを使用しています。</span>
<span class="quote4">&gt; &gt; &gt; &gt; データベースの登録情報として、「香川支社」、「高知支社」という情報が</span>
<span class="quote4">&gt; &gt; &gt; &gt; あるのですが、両者を登録しようとすると、重複エラーが出てしまいます。</span>
<span class="quote4">&gt; &gt; &gt; &gt; 本MLの過去ログを見たところ、私と同様に、「香川県」と「高知県」で</span>
<span class="quote4">&gt; &gt; &gt; &gt; 同じように悩んでいた方がいまして、「香」、「高」の文字コードが近いことが</span>
<span class="quote4">&gt; &gt; &gt; &gt; 原因であることがわかりました。</span>
<span class="quote4">&gt; &gt; &gt; &gt; 解決策として、/etc/my.cnfに、</span>
<span class="quote4">&gt; &gt; &gt; &gt;</span>
<span class="quote4">&gt; &gt; &gt; &gt; [mysqld]</span>
<span class="quote4">&gt; &gt; &gt; &gt; default-character-set=ujis</span>
<span class="quote4">&gt; &gt; &gt; &gt;</span>
<span class="quote4">&gt; &gt; &gt; &gt; と記述するとあったのですが、この記述を追加するとMysqlサーバが起動しなく</span>
<span class="quote4">&gt; &gt; &gt; &gt; なってしまいます。現在、my.cnfには、</span>
<span class="quote4">&gt; &gt; &gt; &gt;</span>
<span class="quote4">&gt; &gt; &gt; &gt; datadir=/db_data/mysql</span>
<span class="quote4">&gt; &gt; &gt; &gt;</span>
<span class="quote4">&gt; &gt; &gt; &gt; の記述しか書いていないのですが、どこか不都合があるのでしょうか？</span>
<span class="quote4">&gt; &gt; &gt; &gt; どなたかご教授お願いします。</span>
<span class="quote4">&gt; &gt; &gt; &gt;</span>
<span class="quote4">&gt; &gt; &gt; &gt;</span>
<span class="quote4">&gt; &gt; &gt; &gt;</span>
<span class="quote4">&gt; &gt; &gt; &gt; -------------------------------------</span>
<span class="quote4">&gt; &gt; &gt; &gt; 濱中圭介</span>
<span class="quote4">&gt; &gt; &gt; &gt; -------------------------------------</span>
<span class="quote4">&gt; &gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt; -- </span>
<span class="quote3">&gt; &gt; &gt; A.K.I. &lt;aki@xxxxxxxxxx&gt;</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; -- </span>
<span class="quote1">&gt; A.K.I. &lt;aki@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt; </span>



</pre>
</div>
<p class="button"><a href="8244.html">[前]</a><a href="8246.html">[次]</a><a href="../list/8201-8300.html">[番号順一覧]</a><a href="../thread/8201-8300.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8228.html">   8228 2003-08-29 17:38 [&quot;Keisuke Hamanaka&quot; &lt;] 「高知県」と「香川県」に関しまして。    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8229.html">   8229 2003-09-29 17:47 ┗[&quot;A.K.I.&quot; &lt;aki@xxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8243.html">   8243 2003-10-01 16:32 　┗[&quot;Keisuke Hamanaka&quot; &lt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8244.html">   8244 2003-10-01 16:57 　　┣[&quot;A.K.I.&quot; &lt;aki@xxxxxx]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="8245.html">   8245 2003-10-01 17:02 　　┃┗[&lt;numata@xxxxxxxxxx&gt; ]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8246.html">   8246 2003-10-01 17:03 　　┗[&quot;Keisuke Hamanaka&quot; &lt;]                                   </a></span>
</pre>
</body>
</html>
