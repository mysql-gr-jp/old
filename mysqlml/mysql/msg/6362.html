<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:6362</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="6361.html">[前]</a><a href="6363.html">[次]</a><a href="../list/6301-6400.html">[番号順一覧]</a><a href="../thread/6301-6400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:6362
</p>
<div class="header">
<p>
From: &quot;kosugi&quot; &lt;&quot;kosugi&quot; &lt;kosugi@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 8 Oct 2002 18:15:51 +0900<br>
Subject: [mysql 06362] Re: servlet では order by rand()      ができない？<br>

</p>
</div>
<div class="body">
<pre>
こんばんは　小杉です￥


<span class="quote2">&gt;&gt; JDBCのドライバとかバージョンを変えてみてはどうでしょうか？。</span>
<span class="quote1">&gt; 一応Javaのverやgweドライバなど、色々変えてみたのです。</span>
<span class="quote1">&gt; 悲しいな動かないです(涙</span>

JDBCドライバは、mm.mysqlをお使いですよね。
コマンドラインで正常に動いていれば、MySQLの問題ではないですし、
javaプログラムは正しく書かれていると思います。

とすれば、ＪＤＢＣドライバぐらいしか・・・
ＪＤＢＣドライバのバージョンは、最新でしょうか？

ところで、
一応、城さんのソースをＪＳＰ化したものを付けますね。これで、テストしてみてください。
コンパイラの問題かどうかチェックできるかと。

うちでは、これで、リロードするたびに違うレコードを取得できます。
<a href="http://www.kips.gr.jp/lib/SQL.jsp">http://www.kips.gr.jp/lib/SQL.jsp</a>
（↑しばらくしたら、削除します）

&lt;%@ page contentType=&quot;text/html; charset=Shift_JIS&quot; language=&quot;java&quot; import=&quot;java.sql.*&quot; errorPage=&quot;&quot;
%&gt;
&lt;%
String MM_linkGuest_DRIVER = &quot;org.gjt.mm.mysql.Driver&quot;;
String USERNAME = &quot;hogehoge&quot;;
String PASSWORD = &quot;slkdibgwo&quot;;
String con_STRING = &quot;jdbc:mysql://dbHostName/dbName&quot;;

// データベースへ接続
Class.forName(&quot;org.gjt.mm.mysql.Driver&quot;);

ResultSet rs;
Connection con = DriverManager.getConnection(con_STRING,USERNAME,PASSWORD);
Statement stmt = con.createStatement();

//検索クエリ送信
String query = &quot;select * from base order by rand() limit 1&quot;;
rs = stmt.executeQuery(query);
rs.next();
String resTag = rs.getString(&quot;url&quot;);
stmt.close();
con.close();
%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=Shift_JIS&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
クエリ:&lt;%=query%&gt;&lt;br&gt;
ランダムに取得：&lt;a href =&quot;&lt;%=resTag%&gt;&quot;&gt;&lt;%=resTag%&gt;&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;


--
Tomoaki Kosugi
kosugi@xxxxxxxxxx





</pre>
</div>
<p class="button"><a href="6361.html">[前]</a><a href="6363.html">[次]</a><a href="../list/6301-6400.html">[番号順一覧]</a><a href="../thread/6301-6400.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="6339.html">   6339 2002-10-07 06:20 [&quot;城&quot; &lt;sora_iro@xxxxx] servlet では order by rand() ができない？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6343.html">   6343 2002-10-07 18:27 ┣[&quot;Takashi Yamashita&quot; ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6344.html">   6344 2002-10-07 18:30 ┃┗[&quot;Takashi Yamashita&quot; ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6347.html">   6347 2002-10-07 19:44 ┃　┗[&quot;城&quot; &lt;sora_iro@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6348.html">   6348 2002-10-07 21:17 ┃　　┣[&quot;Takashi Yamashita&quot; ]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6350.html">   6350 2002-10-07 22:25 ┃　　┗[Satoshi Komori &lt;sato]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6352.html">   6352 2002-10-08 07:12 ┃　　　┗[&quot;城&quot; &lt;sora_iro@xxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6353.html">   6353 2002-10-08 12:06 ┃　　　　┗[Takeyuki Miyagawa &lt;m]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6361.html">   6361 2002-10-08 17:54 ┃　　　　　┗[&quot;城&quot; &lt;sora_iro@xxxxx]                           </a></span>
<span class="current">-&gt;&nbsp;<a href="6362.html">   6362 2002-10-08 18:15 ┃　　　　　　┗[&quot;kosugi&quot; &lt;kosugi@xxx]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6346.html">   6346 2002-10-07 19:05 ┣[&quot;kosugi&quot; &lt;kosugi@xxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6349.html">   6349 2002-10-07 21:26 ┣[&quot;Takashi Yamashita&quot; ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6363.html">   6363 2002-10-08 18:59 ┣[&lt;rio-t@xxxxxxxxxx&gt;  ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6380.html">   6380 2002-10-09 21:42 ┃┗[&quot;城&quot; &lt;sora_iro@xxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6382.html">   6382 2002-10-09 22:58 ┗[&quot;小川　修&quot; &lt;shuogawa]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6392.html">   6392 2002-10-10 13:17 　┗[&quot;kosugi&quot; &lt;kosugi@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6424.html">   6424 2002-10-13 00:28 　　┗[&quot;shuogawa&quot; &lt;shuogawa]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6425.html">   6425 2002-10-14 00:05 　　　┗[Tomoyuki Ishino &lt;ish]                                 </a></span>
</pre>
</body>
</html>
