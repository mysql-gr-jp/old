<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3294</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="3293">[前]</a><a href="3295">[次]</a><a href="../list/3201-3300">[番号順一覧]</a><a href="../thread/3201-3300">[スレッド一覧]</a></p>
<p class="id">
mysql:3294
</p>
<div class="header">
<p>
From: &quot;MIYATSU Kazunari&quot; &lt;&quot;MIYATSU Kazunari&quot; &lt;mid@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 20 Feb 2001 10:48:33 +0900<br>
Subject: [mysql 03294] Re: max_connection<br>

</p>
</div>
<div class="body">
<pre>
はい。Too many connectionでした。

特に帳票を印刷するActivex.exe内で行毎にかなり面倒な枝分かれ処理内で、再度問
い合わせをしていた場合、行数がある一定値を越えると、次の接続を得られない=処
理が止まってしまいました。

mysqladmin -i1 processlist
を走らせておいて監視すると、印刷処理が始まった途端に異常な数のコネクトが行わ
れていることが判明しました。

私の場合はDAOで特に問題が顕著だったので、接続,レコードセットの生成をAdodcに
変更し、常に接続を
&quot;ActiveConnection=Nothing&quot;で明示的にディスコネクトすることで１クライアント、
1接続まで低減しました。

DAOのドキュメントどおりならオブジェクト変数を解放し、プローシジャが終われば
接続キャッシュに戻されるはずなのですが・・・接続キャッシュを再利用しないか接
続そのものが終了しないか・・・じゃないかと思います。しかもそれらの接続部分を
外の関数に出すと大丈夫だったり、間に処理を入れるとまたダメになったりと、訳解
らなくなったので、ADOに逃げた訳です。

いずれにしても100コネクションも繋ぎっぱなしにしなければ出来ない処理というの
はあまり考え難いので、コネクションを解放することに専念された方がよろしいかと
思います。


</pre>
</div>
<p class="button"><a href="3293">[前]</a><a href="3295">[次]</a><a href="../list/3201-3300">[番号順一覧]</a><a href="../thread/3201-3300">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="3288">   3288 2001-02-19 09:30 [&quot;岩田　雅人&quot; &lt;iwata@] max_connection                          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3289">   3289 2001-02-19 11:30 ┣[Akihiko Shinohara &lt;s]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3290">   3290 2001-02-19 12:35 ┃┗[&quot;岩田　雅人&quot; &lt;iwata@]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3291">   3291 2001-02-19 13:21 ┃　┗[Akihiko Shinohara &lt;s]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3292">   3292 2001-02-19 18:04 ┗[&quot;MIYATSU Kazunari&quot; &lt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3293">   3293 2001-02-19 18:39 　┗[&quot;岩田　雅人&quot; &lt;iwata@]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="3294">   3294 2001-02-20 10:48 　　┗[&quot;MIYATSU Kazunari&quot; &lt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3295">   3295 2001-02-20 11:47 　　　┣[&quot;岩田　雅人&quot; &lt;iwata@]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3296">   3296 2001-02-20 13:13 　　　┃┣[黒岩 &lt;kuroiwa@xxxxxx] MyODBC 経由で Char 型編集不可 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3298">   3298 2001-02-20 13:39 　　　┃┃┣[Kengo Jinno &lt;kengo@x]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3300">   3300 2001-02-20 15:23 　　　┃┃┃┗[黒岩 &lt;kuroiwa@xxxxxx]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3299">   3299 2001-02-20 14:03 　　　┃┃┗[&lt;endo_t@xxxxxxxxxx&gt; ]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3297">   3297 2001-02-20 13:36 　　　┃┗[Akihiko Shinohara &lt;s]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3301">   3301 2001-02-20 18:49 　　　┃　┗[&quot;岩田　雅人&quot; &lt;iwata@]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3302">   3302 2001-02-20 20:11 　　　┃　　┗[Akihiko Shinohara &lt;s]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3303">   3303 2001-02-20 21:39 　　　┗[&quot;MIYATSU Kazunari&quot; &lt;]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3304">   3304 2001-02-20 22:04 　　　　┗[&quot;岩田　雅人&quot; &lt;iwata@]                               </a></span>
</pre>
</body>
</html>
