<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5837</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="5836.html">[前]</a><a href="5838.html">[次]</a><a href="../list/5801-5900.html">[番号順一覧]</a><a href="../thread/5801-5900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:5837
</p>
<div class="header">
<p>
From: &quot;K.Ono&quot; &lt;&quot;K.Ono&quot; &lt;k-ono@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 22 Jul 2002 20:26:55 +0900<br>
Subject: [mysql 05837] Re: INSERT 時に AUTO_INCREMENT  の項目の値を別の項目にも設定する方<br>

</p>
</div>
<div class="body">
<pre>
小野と申します。

小西さんの仰る通り、last_insert_id()関数で対応可能だと思います。

しかし、そもそも１タプルの中に同じ値を持つ列を２つ持つことに意味
がないのではないですか？

もし、

1.初期状態では bbsno と refno が同じ値
2.なんらかの処置をしたのち、refnoに異なる値が入る

というような用途であるなら、insert時にはrefnoは null もしくは 0 
（auto_increment列には 0 は入らないから）にしておけば十分な気が
します。

その状態で、

select bbsno,ifnull(refno,bbsno) refno from BBS;

なり、

select bbsno,if(refno=0,bbsno,refno) refno from BBS;

なりすれば、refnoが初期状態の場合のみ、bbsnoと同じ値がrefnoとし
て取得でき、refnoに有意な値が入っている場合には、refnoがそのまま
refnoとして取得できます。

外していたらごめんなさい。




</pre>
</div>
<p class="button"><a href="5836.html">[前]</a><a href="5838.html">[次]</a><a href="../list/5801-5900.html">[番号順一覧]</a><a href="../thread/5801-5900.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="5807.html">   5807 2002-07-18 10:42 [Sugiyama &lt;sugiyama@x] INSERT 時に AUTO_INCREMENT の項目の値を別の項目にも設定する方法</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5826.html">   5826 2002-07-22 13:58 ┗[Daiju Azuma &lt;daiju_a]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5831.html">   5831 2002-07-22 15:53 　┗[Sugiyama &lt;sugiyama@x] Re: INSERT 時に AUTO_INCREMENT の項目の値を別の項目にも設定する方</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5835.html">   5835 2002-07-22 16:53 　　┗[Daiju Azuma &lt;daiju_a]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5836.html">   5836 2002-07-22 19:50 　　　┣[小西恒紀 &lt;tkonishi@x]                                 </a></span>
<span class="current">-&gt;&nbsp;<a href="5837.html">   5837 2002-07-22 20:26 　　　┃┣[&quot;K.Ono&quot; &lt;k-ono@xxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5838.html">   5838 2002-07-23 01:06 　　　┃┃┣[&quot;T.Konishi&quot; &lt;tkonish]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5842.html">   5842 2002-07-23 10:08 　　　┃┃┃┗[Sugiyama &lt;sugiyama@x]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5841.html">   5841 2002-07-23 10:07 　　　┃┃┗[Sugiyama &lt;sugiyama@x]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5840.html">   5840 2002-07-23 10:01 　　　┃┗[Sugiyama &lt;sugiyama@x]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5839.html">   5839 2002-07-23 09:59 　　　┗[Sugiyama &lt;sugiyama@x]                                 </a></span>
</pre>
</body>
</html>
