<div dir="ltr"><div>香田と申します。初めて投稿させて頂きます。</div><div></div><div>MySQLの負荷分散としてLVS(DSR)を利用し、Postfix(クライアント)からMySQLを</div><div>参照させメール配信を行う検証を行っております。</div><div><br></div><div>--------</div><div>構成</div><div>- Postfix(クライアント) ---&gt; LVS(DSR) ---&gt; MySQL</div><div><br></div><div>バージョン</div><div>- Keepalived 1.2.7</div><div>- MySQL 5.5.36</div><div>- Postfix 2.6.6-6</div><div>--------</div><div><br></div><div>Postfix側でMySQLを参照させ、メール送信を行うと</div><div>送信完了後も、MySQLにconnectionが残り続けるという事象が発生しました。</div><div></div><div>メール配信をする度にconnectionが残り続け、</div><div>最終的にMySQLでmax connectionに到達してしまうという状況です。</div><div><br></div><div>netstatを見ると、MySQL側にESTABLISHEDが残り続け、</div><div>Postfix側にFIN_WAIT1が多発している状況です。</div><div><br></div><div>何か考えられる要因等、アドバイスいただけると幸いです。</div><div>宜しくお願いします。</div><div><br></div></div>
