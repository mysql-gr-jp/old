<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8198</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="8197.html">[前]</a><a href="8199.html">[次]</a><a href="../list/8101-8200.html">[番号順一覧]</a><a href="../thread/8101-8200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8198
</p>
<div class="header">
<p>
From: Tatsuhiko Miyagawa &lt;Tatsuhiko Miyagawa &lt;miyagawa@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 06 Sep 2003 23:17:26 +0900<br>
Subject: [mysql 08198] Re: SELECT GET_LOCK?<br>

</p>
</div>
<div class="body">
<pre>宮川です。

At Sat, 06 Sep 2003 05:55:27 +0900,
OHTSUKA Ko-hei wrote:
 
<span class="quote1">&gt; # Time: 030905 22:47:14</span>
<span class="quote1">&gt; # User@Host: root[root] @ localhost []</span>
<span class="quote1">&gt; # Query_time: 11  Lock_time: 0  Rows_sent: 1  Rows_examined: 0</span>
<span class="quote1">&gt; SELECT GET_LOCK('Apache-Session-0c9bb14471a9906f7c3d993c89714577', 3600);</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; これ自体のQuery Timeは11ですが、これ以降のクエリのQuery Timeは40を下回る</span>
<span class="quote1">&gt; ものはなくなっています。</span>
<span class="quote1">&gt; また発生時間的にも、弊システムのユーザが23時頃から繋がらなくなったと言っていた</span>
<span class="quote1">&gt; のと一致します。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; といった事より、これがダウンに繋がったトリガのクエリくさいのですが、私はプロ</span>
<span class="quote1">&gt; グラムの中でこのSELECT GET_LOCKというSQLは使っていません。</span>
<span class="quote1">&gt; perlのDBI等が内部処理上勝手に発行しているものだと思うのですが、</span>

Apache::Session モジュールが排他処理のために実行しているSQL文です。

<span class="quote1">&gt; これがサーバ</span>
<span class="quote1">&gt; ダウンのトリガになっているという解析は正しいかどうか、また回避するにはどう</span>
<span class="quote1">&gt; すればよいかについて、ご教授賜れば有難く存じます。</span>

これは他の状況がわからないとなんともいえませんが。。

-- 
Tatsuhiko Miyagawa &lt;miyagawa@xxxxxxxxxx&gt;

</pre>
</div>
<p class="button"><a href="8197.html">[前]</a><a href="8199.html">[次]</a><a href="../list/8101-8200.html">[番号順一覧]</a><a href="../thread/8101-8200.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="8196.html">   8196 2003-09-06 05:55 [OHTSUKA Ko-hei &lt;tech] SELECT GET_LOCK?                        </a></span>
<span class="current">-&gt;&nbsp;<a href="8198.html">   8198 2003-09-06 23:17 ┗[Tatsuhiko Miyagawa &lt;]                                       </a></span>
</pre>


</body></html>