<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3789</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="3788">[前]</a><a href="3790">[次]</a><a href="../list/3701-3800">[番号順一覧]</a><a href="../thread/3701-3800">[スレッド一覧]</a></p>
<p class="id">
mysql:3789
</p>
<div class="header">
<p>
From: 松嶋祥文 &lt;松嶋祥文 &lt;mats@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 19 Jun 2001 22:42:01 +0900<br>
Subject: [mysql 03789] Re: リモートからの mysqld の停止と起動 or ロック<br>

</p>
</div>
<div class="body">
<pre>
松嶋＠ITBoost です。

こんにちは、前田さん。
お望みの方法とは違いますが、思いついた方法を。

<span class="quote1">| mysqldumpというコマンドはあるのを見つけたのですが、これは全てのテ</span>
<span class="quote1">| ーブルをロックするオプションはあるものの、テキストに落とすツールの</span>
<span class="quote1">| ようで、テキストではサイズが膨らんでしまいそうなので、今回のような</span>
<span class="quote1">| ディレクトリ丸ごとコピーで済ませたく思っております。</span>

バックアップのファイルを作成するホストから、

<span class="quote2">&gt;&gt;  mysqldump -l -h mysql.server.co.jp -A | gzip &gt; backup.gz</span>

とか、mysql が動いているホストからバックアップ先を NFS マウントして、

<span class="quote2">&gt;&gt;  mysqldump -l -A | gzip &gt; /mnt/backupserver/backup.gz</span>

とかではダメでしょうか？

# NFS につきましては弊社サイト
#   <a href="http://www.itboost.co.jp/inst/">http://www.itboost.co.jp/inst/</a>
# にも掲載しておりますので、そちらをご覧いただければ、と思います。

試してませんので、オプションなど多少違うかもしれません。

-l が、テーブルロックするオプション、-A がすべてのデータベースを
対象とするオプションです。
後、上記の例では gzip を使いましたが、-C という compress
してくれるオプションもあるようです。
「MySQL徹底入門」という本（MySQLユーザ必携？）を参考にしました。

MySQL のデータファイルは非圧縮だと思いますので、サイズ的には
rsync を使うよりも小さくなるような気がします。
# これもやっぱり、試していませんが ^^;

-- 
株式会社 IT Boost／アイティーブースト
松嶋 祥文 mats@xxxxxxxxxx
                                         <a href="http://www.itboost.co.jp/">http://www.itboost.co.jp/</a>
  PHP, Perl, PostgreSQL, MySQL, Apache, Java 他、いろいろあります。


</pre>
</div>
<p class="button"><a href="3788">[前]</a><a href="3790">[次]</a><a href="../list/3701-3800">[番号順一覧]</a><a href="../thread/3701-3800">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="3787">   3787 2001-06-19 19:26 [Masanori Maeda &lt;masa] リモートからの mysqld の停止と起動 or ロック</a></span>
<span class="current">-&gt;&nbsp;<a href="3789">   3789 2001-06-19 22:42 ┣[松嶋祥文 &lt;mats@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3790">   3790 2001-06-19 22:52 ┃┣[Shuhei Tomita &lt;shuhe]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3792">   3792 2001-06-20 01:43 ┃┗[Masanori Maeda &lt;gun@]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3791">   3791 2001-06-19 23:55 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3795">   3795 2001-06-20 15:35 ┗[&quot;Masato OHTA&quot; &lt;heiwa]                                       </a></span>
</pre>
</body>
</html>
