<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3546</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="3545.html">[前]</a><a href="3547.html">[次]</a><a href="../list/3501-3600.html">[番号順一覧]</a><a href="../thread/3501-3600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:3546
</p>
<div class="header">
<p>
From: "kohara" &lt;"kohara" &lt;kohara-m@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 20 Apr 2001 00:19:34 +0900<br>
Subject: [mysql 03546] 配列について<br>

</p>
</div>
<div class="body">
<pre>こはといいます。
前回、日本語の件でお世話になりました。

現在、複数のお店を合わせて販売できるショッピング
カートを作成しています。
簡単に言えば、小規模のショッピングモールです。

こちらの環境は、php3+mysql2.23です。
スクリプトは、アメリカのフリーのものを改造していま
す。（<a href="http://theexchangeproject.org/default.php">http://theexchangeproject.org/default.php</a>）

早速質問ですが、カートの中に入ってる複数店の商品
を、それぞれのお店へそのお店のみの商品をメールで送
信したいのです。
現在は、いろんなお店の商品が混ざった状態で送信され
ます。

まだまだ、初心者の自分が考えた方法は、その配列の中
にどのお店が入ってるかがわかれば後は、select文で検
索できるのではと思いました。
配列の中の何種類のお店があってどのお店がわかる関数
や構文はあるでしょうか？

お店のテーブル　　　　　　　　　shop (id・名前・
メール）
購入された商品のテーブル　　order(id・商品名・数量
・金額・shop_id）

現在のスクリプト

  $products = $cart-&gt;get_products();
  for ($i=0; $i&lt;sizeof($products); $i++) {
    $products_name = $products[$i]['name'];
    $products_price = $products[$i]['price'];
    $total_products_price = ($products_price +
$cart-&gt;attributes_price($products[$i]['id']));
    $products_tax =
tep_get_tax_rate($delivery_values['zone_id'],
$products[$i]['tax_class_id']);
    $products_weight = $products[$i]['weight'];
//これがお店のid

    tep_db_query("insert into orders_products
values ('', '" . $insert_id . "', '" .
$products[$i]['id'] . "', '" .
addslashes($products_name) . "', '" .
$products_price . "', '" . $total_products_price .
"', '" . $products_tax . "', '" .
$products[$i]['quantity'] . "', '" .
$products_weight . "')");


//------insert customer choosen option eof ----
    $total_tax += (($total_products_price *
$products[$i]['quantity']) * $products_tax/100);
    $total_cost += $total_products_price;

    $products_ordered .= $products[$i]['quantity']
. ' x ' . $products_name . ' = ' .
tep_currency_format(($total_products_price *
$products[$i]['quantity'])) . "\n" .
$manu_values['manufacturers_name'] . "\n";  //この
$products_orderedをmail()で送信しています。
  }

これだと複数のお店の商品が混ざって送信されるので、
お店ごとに商品を分けてメールを送りたいのですが、何
か方法はあるのでしょうか？

マニュアルとかもいろいろ見たのですが、わかりません
でした。何日も頭を悩ませています。
これが解決できるととても嬉しいです。

よろしくお願いします。


こは
kohara-m@xxxxxxxxxx



</pre>
</div>
<p class="button"><a href="3545.html">[前]</a><a href="3547.html">[次]</a><a href="../list/3501-3600.html">[番号順一覧]</a><a href="../thread/3501-3600.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="3281.html">   3281 2001-02-17 14:17 ["=?utf-7?B?K01MTXcxV] =?utf-7?B?K01OQXd3ekN2TUtJd3d6RFhNRzVUMWpDS1piay0=?=</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3282.html">   3282 2001-02-17 14:34 ┗[Hiroyuki Hasegawa &lt;a] Re: バックアップの取り方              </a></span>
<span class="current">-&gt;&nbsp;<a href="3546.html">   3546 2001-04-20 00:19 　┗["kohara" &lt;kohara-m@x] 配列について                        </a></span>
</pre>


</body></html>