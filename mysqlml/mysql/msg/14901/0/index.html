<html><head></head><body>奥野さん<br><br>またまた情報ありがとうございます。<br>まさかこのブログの著者だったとは。。。。<br>↓のConnector/Jのエントリとかとても助かりました。<br><a href="http://nippondanji.blogspot.com/2009/02/mysql-cluster.html">http://nippondanji.blogspot.com/2009/02/mysql-cluster.html</a><br>
<br>ブログ、読者になっておきました。<br><br><div class="gmail_quote">2009/06/08 17:24 Mikiya Okuno <span dir="ltr">&lt;<a href="mailto:Mikiya.Okuno@sun.com">Mikiya.Okuno@sun.com</a>&gt;</span>:<br><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
坂井田さん、<br>
<br>
どういたしまして。<br>
<br>
ところで、ディスクテーブル（通称DD）を利用されているようですが、<br>
DDを利用する際にはいくつか注意すべき点があります。<br>
手前味噌ですが、以下のページにまとめてありますのでご覧下さい。<br>
<a href="http://nippondanji.blogspot.com/2008/11/mysql-cluster.html" target="_blank">http://nippondanji.blogspot.com/2008/11/mysql-cluster.html</a><br>
<br>
また、MySQL Cluster 7.0で追加されたオプションを利用すると<br>
もっと幸せになれるかも知れません。<br>
<a href="http://nippondanji.blogspot.com/2009/03/mysql-cluster-704-beta-has-been.html" target="_blank">http://nippondanji.blogspot.com/2009/03/mysql-cluster-704-beta-has-been.html</a><br>
<br>
特にテーブルスペースを作成するためのオプションが便利だと思います。<br>
（もう既に作成してしまっていると思いますが。）<br>
<div class="im"><br>
--<br>
Mikiya Okuno, MySQL Support Engineer<br>
Sun Microsystems KK, Tokyo, Japan<br>
<a href="http://www-jp.mysql.com/" target="_blank">http://www-jp.mysql.com/</a><br>
<br>
</div><div><div></div><div class="h5">On 08/06/2009, at 4:46 PM, 坂井田保彦 wrote:<br>
<br>
&gt; 奥野さん<br>
&gt;<br>
&gt; ご回答ありがとうございます。TEXTの利用を検討します。<br>
&gt;<br>
&gt; オンラインマニュアル、14.13. MySQL Cluster の既知の制限にも<br>
&gt; ”1 行の許可された最大サイズは 8KB です。”という記述がありましたね。<br>
&gt; <a href="http://dev.mysql.com/doc/refman/5.1/ja/mysql-cluster-limitations.html" target="_blank">http://dev.mysql.com/doc/refman/5.1/ja/mysql-cluster-limitations.html</a><br>
&gt;<br>
&gt;<br>
&gt; 2009/06/08 15:48 Mikiya Okuno &lt;<a href="mailto:Mikiya.Okuno@sun.com">Mikiya.Okuno@sun.com</a>&gt;:<br>
&gt; 奥野です。<br>
&gt;<br>
&gt; エラーメッセージにも表示されている通り、MySQL Clusterは内部的に8052バイトという行サイズの上限があります。<br>
&gt; VARCHAR(2700)はutf8の場合、最大で2700 * 3 = 8100バイトになってしまいますので、行サイズの上限を<br>
&gt; 超えてしまうことになりますので作成することが出来ません。<br>
&gt;<br>
&gt; TEXTを利用するか、8052バイトの制限を超えないようにテーブルを設計しましょう。<br>
&gt; --<br>
&gt; Mikiya Okuno, MySQL Support Engineer<br>
&gt; Sun Microsystems KK, Tokyo, Japan<br>
&gt; <a href="http://www-jp.mysql.com/" target="_blank">http://www-jp.mysql.com/</a><br>
&gt;<br>
&gt; On 08/06/2009, at 3:31 PM, 坂井田保彦 wrote:<br>
&gt;<br>
&gt; &gt; 坂井田と申します。<br>
&gt; &gt;<br>
&gt; &gt; MySQL Clusterをディスクベースで使用しています。<br>
&gt; &gt; varcharで2700バイトのカラムを作成しようとすると、ERROR 1118が発生します。<br>
&gt; &gt; クエリのストレージエンジン部分だけをInnoDBに変えて試したところテーブルを作成することができましたので<br>
&gt; &gt; ストレージエンジンの違いによるものだと思うのですが。。。NDBを使用した場合のvarcharのrow sizeの最大値はいくつになるのか<br>
&gt; &gt; お分かりになる方はいらっしゃいますか？<br>
&gt; &gt;<br>
&gt; &gt; ■NDB<br>
&gt; &gt; mysql&gt; CREATE TABLE `lengthtest` ( &nbsp; `hoge` varchar(2700) DEFAULT NULL ) TABLESPACE ts_1 STORAGE DISK ENGINE=NDB DEFAULT CHARSET=utf8;<br>
&gt; &gt; ERROR 1118 (42000): Row size too large. The maximum row size for the used table type, not counting BLOBs, is 8052. You have to change some columns to TEXT or BLOBs<br>
&gt; &gt;<br>
&gt; &gt; ■InnoDB<br>
&gt; &gt; mysql&gt; CREATE TABLE `lengthtest` ( &nbsp; `hoge` varchar(2700) DEFAULT NULL ) TABLESPACE ts_1 STORAGE DISK ENGINE=InnoDB DEFAULT CHARSET=utf8;<br>
&gt; &gt; Query OK, 0 rows affected (0.24 sec)<br>
&gt; &gt;<br>
&gt; &gt; ■テストした環境<br>
&gt; &gt; Red Hat ES 4.6<br>
&gt; &gt; MySQL Cluster 7.0.5(RPM版)<br>
&gt;<br>
&gt;<br>
&gt;<br>
<br>
<br>
</div></div></blockquote></div><br>
</body></html>