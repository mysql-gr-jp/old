<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13535</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13534.html">[前]</a><a href="13536.html">[次]</a><a href="../list/13501-13600.html">[番号順一覧]</a><a href="../thread/13501-13600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13535
</p>
<div class="header">
<p>
From: &quot;YuGo&quot; &lt;&quot;YuGo&quot; &lt;yu.gotou@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 22 Nov 2006 14:34:20 +0900<br>
Subject: [mysql 13535] Re: [質問]突如データベース接続不能となってしまいました。<br>

</p>
</div>
<div class="body">
<pre>
CMSとはなんですか。
データベースサーバがリモートにあるということでしょうか。
このサーバは借り物であるということでしょうか。
持ち主が設定変更したということはないでしょうか。
/etc/init.d/mysql strat
ではなく、
/usr/bin/mysqld_safeとかで起動を試みれば、何かメッセージが返ってきませんか。


1と2について
MySQL4.0.24をインストールしたとありますが、パッケージからインストールされているためわたしはわかりません。
3について
cnfファイルのとおりとすれば、 /var/lib/mysqlにデータがあるはずですから、コピーすればバックアップできると思います。ついでにここに何かログがないでしょうか。

YuGo



<span class="quote1">&gt; 現在Debian Sage上にてMysql4.0.24 をインストールし、CMSとし</span>
<span class="quote1">&gt; てXoopsを利用していたのですが、昨晩より下記のエラーが発生</span>
<span class="quote1">&gt; し、データーベースへの接続が不能となってしまいました。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; Unable to connect to database in file class/database/databasefactory.php </span>
<span class="quote1">&gt; line 34</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 実際にtelnetでログインすると、mysqldが起動されておらず、</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; /etc/init.d/mysql strat</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; を実行しても数秒後にメッセージモなくプロンプトが戻ってくる</span>
<span class="quote1">&gt; だけで終了してしまいます。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; /var/log/mysql.err にはデータが無くゼロバイト</span>
<span class="quote1">&gt; /var/log/mysql.log もゼロバイトの状態です。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ソケット等を調べようとしたのですが</span>
<span class="quote1">&gt; /var/run/を覗くとmysqldのディレクトリが無く、無いことが異常</span>
<span class="quote1">&gt; なのかも知識が無く、判断できていません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; cnfファイルの確認をしたところ、</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; debina.cnf：</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; # Automatically generated for Debian scripts. DO NOT TOUCH!</span>
<span class="quote1">&gt; [client]</span>
<span class="quote1">&gt; host     = localhost</span>
<span class="quote1">&gt; user     = debian-sys-maint</span>
<span class="quote1">&gt; password = XXXXXXXXXXXXXXXXX</span>
<span class="quote1">&gt; socket   = /var/run/mysqld/mysqld.sock</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; my.cnf：</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; [client]</span>
<span class="quote1">&gt; port            = 3306</span>
<span class="quote1">&gt; socket          = /var/run/mysqld/mysqld.sock</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; [mysqld_safe]</span>
<span class="quote1">&gt; socket          = /var/run/mysqld/mysqld.sock</span>
<span class="quote1">&gt; nice            = 0</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; [mysqld]</span>
<span class="quote1">&gt; #</span>
<span class="quote1">&gt; # * Basic Settings</span>
<span class="quote1">&gt; #</span>
<span class="quote1">&gt; user            = mysql</span>
<span class="quote1">&gt; pid-file        = /var/run/mysqld/mysqld.pid</span>
<span class="quote1">&gt; socket          = /var/run/mysqld/mysqld.sock</span>
<span class="quote1">&gt; port            = 3306</span>
<span class="quote1">&gt; basedir         = /usr</span>
<span class="quote1">&gt; datadir         = /var/lib/mysql</span>
<span class="quote1">&gt; tmpdir          = /tmp</span>
<span class="quote1">&gt; language        = /usr/share/mysql/japanese</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 上記2ファイルとも/var/run/mysqld/を指し示していました。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; そして、上記languageの項目から /usr/share/を覗くと、mysqlと</span>
<span class="quote1">&gt; いうディレクトリそのものがありません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; せめてエラーログに何か溜まれば、推測のしようもあるのですが</span>
<span class="quote1">&gt; ・・・</span>
<span class="quote1">&gt; 現状このような状態となっております。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; つきましては、正常復帰を望んでおりますが、下記件もあわせて、</span>
<span class="quote1">&gt; ご質問させてください。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 1./var/runの下にmysqldのディレクトリが無いのは正常なのか？</span>
<span class="quote1">&gt; 2./usr/share/の下にmysqlのディレクトリが無いのは正常なのか？</span>
<span class="quote1">&gt; 3.mysqldが起動していない状態での、データベースの保存（バッ</span>
<span class="quote1">&gt;  クアップ手段があるのか？）は可能でしょうか？</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; よろしくお願い申し上げます。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; +-----------------+</span>
<span class="quote1">&gt; Tetsuya NAKAHARA</span>
<span class="quote1">&gt; xbox@xxxxxxxxxx</span>
<span class="quote1">&gt; +-----------------+</span>
<span class="quote1">&gt; </span>


</pre>
</div>
<p class="button"><a href="13534.html">[前]</a><a href="13536.html">[次]</a><a href="../list/13501-13600.html">[番号順一覧]</a><a href="../thread/13501-13600.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13534.html">  13534 2006-11-22 14:00 [&lt;xbox@xxxxxxxxxx&gt;   ] [質問]突如データベース接続不能となってしまいました。</a></span>
<span class="current">-&gt;&nbsp;<a href="13535.html">  13535 2006-11-22 14:34 ┣[&quot;YuGo&quot; &lt;yu.gotou@xxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13536.html">  13536 2006-11-22 14:36 ┣[SATOH Fumiyasu &lt;fumi]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13592.html">  13592 2006-12-07 21:18 ┗[Tetsuya NAKAHARA &lt;xb]                                       </a></span>
</pre>
</body>
</html>
