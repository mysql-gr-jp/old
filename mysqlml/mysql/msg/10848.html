<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:10848</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="10847.html">[前]</a><a href="10849.html">[次]</a><a href="../list/10801-10900.html">[番号順一覧]</a><a href="../thread/10801-10900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:10848
</p>
<div class="header">
<p>
From: 樋口聡 &lt;樋口聡 &lt;satoshi@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 29 Jan 2005 02:11:09 +0900<br>
Subject: [mysql 10848] Re: mysqldプロセスの数が多い<br>

</p>
</div>
<div class="body">
<pre>
樋口です。

山本さん、松信さんアドバイスありがとうございました。その後試してみました。

OS: Redhat9(Linux 2.4.20-8smp)
MySQL 4.0.18 (ソースからコンパイル)
MySQL 4.0.23 (バイナリー)

MySQL 4.0.18をソースからコンパイルしてインストールした場合はps aux をして
みると、/usr/local/bin/mysqld_safeと[mysqld] の二つのプロセスが確認できま
す。このサーバにMySQL ABからダウンロードしたバイナリー
Linux (x86, glibc-2.2, static, gcc) をインストールして起動すると、最初の
メールに書いたように複数のmysqlプロセスが起動していることが確認できます。
どうもMySQLからダウンロードしたバイナリーをインストールすると複数のプロセ
スが起動して見えるようですね。試しに別なOSにもインストールしてみました。
WBEL Linux 2.4.21-27.0.2.ELにMySQL 4.0.23バイナリーをインストールしても同
様に複数のmysqlプロセスを確認することができます。
つまりMySQL ABからバイナリーをダウンロードしてインストールするとスレッド
がプロセスのように見えるのですね。安心しました。今までソースからコンパイ
ルしていたので、このような現象を見たのが初めてでちょっと驚きました。

アドバイスありがとうございました。

Matsunobu, Yoshinori wrote:
<span class="quote1">&gt; 松信と申します。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 樋口さん</span>
<span class="quote1">&gt; お使いのMySQLが、ソースからコンパイルしたものなのか、</span>
<span class="quote1">&gt; MySQL AB社提供のバイナリ版なのかによっても結果は変わります。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; Linuxカーネル2.6(+RH9,RHEL3,etc)とそれ以前とで、</span>
<span class="quote1">&gt; スレッドライブラリの実装が違うということは山本さんのご指摘の通りなのですが、</span>
<span class="quote1">&gt; MySQL AB社提供のバイナリ版では、現状ではLinuxのバージョンに関わらず、</span>
<span class="quote1">&gt; スレッドライブラリとしてLinuxThreadsを使うように静的コンパイルされています。</span>
<span class="quote1">&gt; そのためpsコマンドなどを使うと、mysqldプロセスが複数存在するように見えます。</span>
<span class="quote1">&gt; 実際にはサーバ側のプロセスは1個で、後は全部スレッドです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; --------------</span>
<span class="quote1">&gt; 松信　嘉範 (Matsunobu Yoshinori)</span>
<span class="quote1">&gt; Yoshinori.Matsunobu@xxxxxxxxxx</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt;&gt;-----Original Message-----</span>
<span class="quote2">&gt;&gt;From: 樋口聡 [mailto:satoshi@xxxxxxxxxx] </span>
<span class="quote2">&gt;&gt;Sent: Monday, January 17, 2005 11:06 AM</span>
<span class="quote2">&gt;&gt;To: ml@xxxxxxxxxx</span>
<span class="quote2">&gt;&gt;Subject: <a href="10809.html">[mysql 10809]</a> Re: mysqldプロセスの数が多い</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;山本さん、</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;OSの環境も含めて再度調査してみます。質問の際は焦っていて、十分な情報を</span>
<span class="quote2">&gt;&gt;提供しないで質問してしまい申し訳ありませんでした。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;アドバイスありがとうございました。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;kuyo@xxxxxxxxxx wrote:</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;山本です。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;樋口さんの環境には OS とそのバージョンが記述されていませんので推測で</span>
<span class="quote3">&gt;&gt;&gt;すが、プロセスが多く見えている環境の OS は Linux のカーネル 2.4 以前で</span>
<span class="quote3">&gt;&gt;&gt;はないでしょうか。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;また、プロセスが一つのみの環境は Red Hat 9 以降の Red Hat ディストリ</span>
<span class="quote3">&gt;&gt;&gt;ビューションか、 Linux 2.6 以降ではないかと考えます。</span>
<span class="quote3">&gt;&gt;&gt;二つの違いは利用しているスレッドライブラリが異なる点です。</span>
<span class="quote3">&gt;&gt;&gt;Linux 2.4 以前で標準的に使用するスレッドライブラリは linuxthread です。</span>
<span class="quote3">&gt;&gt;&gt;これは個々のスレッドをプロセスと同様な方式で管理します。よって ps コ</span>
<span class="quote3">&gt;&gt;&gt;マンドでは個々のスレッドがプロセスとして一つずつ表示されます。(PIDを持</span>
<span class="quote3">&gt;&gt;&gt;っている)</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;Red Hat 9 以降の Red Hat ディストリビューションや Linux 2.6 以降では</span>
<span class="quote3">&gt;&gt;&gt;スレッドライブラリに NPTL を使用します。これは POSIX に準拠した管理を行</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; (以下略)</span>
-- 
Satoshi Higuchi
URL: higuchi.mmp.jp
e-mail: satoshi@xxxxxxxxxx


</pre>
</div>
<p class="button"><a href="10847.html">[前]</a><a href="10849.html">[次]</a><a href="../list/10801-10900.html">[番号順一覧]</a><a href="../thread/10801-10900.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="10810.html">  10810 2005-01-17 11:30 [&quot;Matsunobu, Yoshinor] Re: mysqldプロセスの数が多い            </a></span>
<span class="current">-&gt;&nbsp;<a href="10848.html">  10848 2005-01-29 02:11 ┗[樋口聡 &lt;satoshi@xxxx]                                       </a></span>
</pre>
</body>
</html>
