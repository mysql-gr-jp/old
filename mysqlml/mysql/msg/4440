<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4440</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4439">[前]</a><a href="4441">[次]</a><a href="../list/4401-4500">[番号順一覧]</a><a href="../thread/4401-4500">[スレッド一覧]</a></p>
<p class="id">
mysql:4440
</p>
<div class="header">
<p>
From: YONEMOTO Kazumasa &lt;YONEMOTO Kazumasa &lt;yonemoto@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 05 Oct 2001 19:54:55 +0900<br>
Subject: [mysql 04440] Re: テーブルの差し替えとロック<br>

</p>
</div>
<div class="body">
<pre>
米本です。

From: Takeharu Masuda &lt;tac@xxxxxxxxxx&gt;
Subject: <a href="04436">[mysql 04436]</a> テーブルの差し替えとロック
Date: Fri, 05 Oct 2001 17:45:28 +0900

<span class="quote1">&gt; 　定期的にバッチで内容を更新する、サマリーテーブル tbl_A があります。</span>
<span class="quote1">&gt; 　更新のロジックの関係で、データを全部破棄して作り直す必要があります。</span>
<span class="quote1">&gt; 　テーブル再構築中に使えないと困るため、次のようなロジックを考えています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 1. tbl_A と同一構造を持つ tbl_B を作成</span>
<span class="quote1">&gt; 2. tbl_B に、最新のデータでサマリーを作成</span>
<span class="quote1">&gt; 3. tbl_A を削除（ drop table tbl_A）</span>
<span class="quote1">&gt; 4. tbl_B を tbl_A にリネーム（ rename table tbl_B to tbl_A ）</span>

1. tbl_A と同一構造を持つ temporary tbl_B を作成
2. tbl_B に、最新のデータでサマリーを作成
3. tbl_A を空にする（ delete from tbl_A ）
4. tbl_B を tbl_A へ流し込む（ insert into tbl_B select * from tbl_A ）

とかどうでしょう。
ぱっと思いついただけですので、テストしていませんが。

--------
  米本和正 (YONEMOTO Kazumasa)
  yonemoto@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="4439">[前]</a><a href="4441">[次]</a><a href="../list/4401-4500">[番号順一覧]</a><a href="../thread/4401-4500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="4436">   4436 2001-10-05 17:45 [Takeharu Masuda &lt;tac] テーブルの差し替えとロック              </a></span>
<span class="current">-&gt;&nbsp;<a href="4440">   4440 2001-10-05 19:54 ┗[YONEMOTO Kazumasa &lt;y]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4445">   4445 2001-10-06 00:48 　┗[Takeharu Masuda &lt;tac]                                     </a></span>
</pre>
</body>
</html>
