<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:6469</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="6468.html">[前]</a><a href="6470.html">[次]</a><a href="../list/6401-6500.html">[番号順一覧]</a><a href="../thread/6401-6500.html">[スレッド一覧]</a></p>
<p class="id">
mysql:6469
</p>
<div class="header">
<p>
From: umiushi &lt;umiushi &lt;umichin@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 27 Oct 2002 21:13:45 +0900<br>
Subject: [mysql 06469] MySQL のトランザクション機能について<br>

</p>
</div>
<div class="body">
<pre>近藤と申します。MySQLを始めて数日の初心者です。
以後、よろしくお願いいたします。

それでは、本題です。

MySQLのトランザクション機能について、調査しているのですが、
rollbackを行うとエラーが発生します。トランザクション機能が
うまく動作していないように思えます。トランザクション機能が
使用できるテーブルの作成方法について教えてください。
こちらでMySQLに関する書籍を購入し、その記述どおりに次のように
入力しました。

= MySQL実行内容 ==================================================
mysql&gt; create table test_table_ex5(id char(1))type=BDB;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; set autocommit=0;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; insert into test_table_ex5(id) values(1);
Query OK, 1 row affected (0.00 sec)

mysql&gt; commit;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select * from test_table_ex5;
+------+
<span class="quote1">| id   |</span>
+------+
<span class="quote1">| 1    |</span>
+------+
1 row in set (0.00 sec)

mysql&gt; insert into test_table_ex5(id) values(2);
Query OK, 1 row affected (0.00 sec)

mysql&gt; insert into test_table_ex5(id) values(3);
Query OK, 1 row affected (0.00 sec)

mysql&gt; rollback;
ERROR 1196: Warning:  Some non-transactional changed tables couldn't be rolled b
ack
=================================================================

上記のようにrollbackでエラーになります。
それと気になるのは、show variables の実行の結果、have_bdb=NO になって
います。

= show variables 実行結果 ========================================
mysql&gt; show variables like 'have%';
+---------------+-------+
<span class="quote1">| Variable_name | Value |</span>
+---------------+-------+
<span class="quote1">| have_bdb      | NO    |</span>
<span class="quote1">| have_gemini   | NO    |</span>
<span class="quote1">| have_innodb   | YES   |</span>
<span class="quote1">| have_isam     | YES   |</span>
<span class="quote1">| have_raid     | NO    |</span>
<span class="quote1">| have_openssl  | NO    |</span>
+---------------+-------+
6 rows in set (0.00 sec)
=================================================================

これは、テーブルの作成の仕方に問題があるのでしょうか？

実行環境は次の通りです。
= 実行結果 =======================================================
OS   :Windows2000 SP3
MySQL:3.23.53-max-nt (MySQL起動時に表示されます)
=================================================================

MySQL関係のソフトは、MySQL本体しかインストールしていません。

インストール後にmy.iniに追加した内容は次の通りです。
[mysqld]
default-character-set=sjis
innodb_data_file_path=ibdata1:100M

以上、よろしくお願いいたします。

▼△▼△▼△▼△▼△▼△▼△▼△▼△▼△▼△▼△▼△▼
 近藤 繁延
 E-mail : umichin@xxxxxxxxxx
▲▽▲▽▲▽▲▽▲▽▲▽▲▽▲▽▲▽▲▽▲▽▲▽▲▽▲

</pre>
</div>
<p class="button"><a href="6468.html">[前]</a><a href="6470.html">[次]</a><a href="../list/6401-6500.html">[番号順一覧]</a><a href="../thread/6401-6500.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="6469.html">   6469 2002-10-27 21:13 [umiushi &lt;umichin@xxx] MySQL のトランザクション機能について    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6470.html">   6470 2002-10-28 00:13 ┗[Hideo Oosawa &lt;sawa@x]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6473.html">   6473 2002-10-28 01:07 　┗[umiushi &lt;umichin@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6475.html">   6475 2002-10-28 01:50 　　┗[Hideo Oosawa &lt;sawa@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6477.html">   6477 2002-10-28 02:17 　　　┗[umiushi &lt;umichin@xxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6484.html">   6484 2002-10-28 23:38 　　　　┗[Hideo Oosawa &lt;sawa@x]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6508.html">   6508 2002-10-31 23:09 　　　　　┗[umiushi &lt;umichin@xxx]                             </a></span>
</pre>


</body></html>