<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13075</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13074.html">[前]</a><a href="13076.html">[次]</a><a href="../list/13001-13100.html">[番号順一覧]</a><a href="../thread/13001-13100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13075
</p>
<div class="header">
<p>
From: &quot;Yoshio Kawano&quot; &lt;&quot;Yoshio Kawano&quot; &lt;kawano@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 6 Jun 2006 02:05:49 +0900<br>
Subject: [mysql 13075] Re: グループ化された情報の TOP    １０を取得する方法<br>

</p>
</div>
<div class="body">
<pre>
回答、ありがとうございます。

何かと、ご教示頂きましてありがとうございました。

教えて頂いた、一時表を作成する等の策をろうして、頑張ってみます。


----- Original Message ----- 
From: &quot;F.Y&quot; &lt;fumi_sby@xxxxxxxxxx&gt;
To: &lt;ml@xxxxxxxxxx&gt;
Sent: Monday, June 05, 2006 5:26 PM
Subject: <a href="13069.html">[mysql 13069]</a> Re: グループ化された情報の TOP １０を取得する方法


<span class="quote1">&gt; 失礼、4.0.26って最初に書いてあった…orz</span>
<span class="quote1">&gt; サブクエリ使えないなぁ…</span>
<span class="quote1">&gt; 複数列はconcat(名称1, 名称2)で扱えば終わりだけど。</span>
<span class="quote1">&gt; 一時表用意してそこに入れてから引っ張る、のが簡単だと思う。</span>
<span class="quote1">&gt; というか、老眼気味のわしではサブクエリなしでselect文一発でtop10のみ引っ</span>
<span class="quote1">&gt; 張るのはできんかも。</span>
<span class="quote1">&gt; そこのワカモノ、なんか思いつかない?</span>
<span class="quote1">&gt; あと、気付いてると思うが set @chk = &quot;&quot;, @r1 = 0; をはしょってた。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; --- Yoshio Kawano &lt;kawano@xxxxxxxxxx&gt; からのメッセージ：</span>
<span class="quote2">&gt; &gt; 回答、ありがとうございました。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; 度重なる、説明不足にて、誠に申し訳けありません。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; 名称１，２，３に登録されている名称は、私が皆様に情報のグループ構成に</span>
<span class="quote1">&gt; ついて説</span>
<span class="quote2">&gt; &gt; 明する為に、勝手に付けた情報です。</span>
<span class="quote2">&gt; &gt; 申し訳けありませんでした。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; 実際に名称１，２，３に登録される名称は、色々な単語です。</span>
<span class="quote2">&gt; &gt; 例えば、</span>
<span class="quote2">&gt; &gt; 　　名称１＝ジョン，名称２＝F，名称３＝ケネディ</span>
<span class="quote2">&gt; &gt; 　　名称１＝松下，名称２＝電気，名称３＝パナソニック</span>
<span class="quote2">&gt; &gt; 　　名称１＝松下，名称２＝電気，名称３＝ナショナル</span>
<span class="quote2">&gt; &gt; 　　名称１＝松下，名称２＝冷蔵，名称３＝商品名</span>
<span class="quote2">&gt; &gt; とか、何かしら関係のある名称群が登録されております。</span>
<span class="quote2">&gt; &gt; それを、名称１＋名称２をグループとして、それぞれのTOP１０を抽出する方</span>
<span class="quote1">&gt; 法を模</span>
<span class="quote2">&gt; &gt; 索しております。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; ----- Original Message ----- </span>
<span class="quote2">&gt; &gt; From: &quot;F.Y&quot; &lt;fumi_sby@xxxxxxxxxx&gt;</span>
<span class="quote2">&gt; &gt; To: &lt;ml@xxxxxxxxxx&gt;</span>
<span class="quote2">&gt; &gt; Sent: Monday, June 05, 2006 4:18 PM</span>
<span class="quote2">&gt; &gt; Subject: <a href="13066.html">[mysql 13066]</a> Re: グループ化された情報の TOP</span>
<span class="quote2">&gt; &gt; １０を取得する方法</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote3">&gt; &gt; &gt;</span>
<span class="quote2">&gt; &gt; 名称1の取り得る値が限られているなら、最近出た順位出すユーザ変数使って</span>
<span class="quote1">&gt; み</span>
<span class="quote3">&gt; &gt; &gt; るのも一興。</span>
<span class="quote3">&gt; &gt; &gt; 名称3のハイフンの後ろが順位を示すなら、substring(名称3,</span>
<span class="quote2">&gt; &gt; instr(名称3, '-')</span>
<span class="quote3">&gt; &gt; &gt; + 1)</span>
<span class="quote3">&gt; &gt; &gt; で順位が取り出せる。</span>
<span class="quote3">&gt; &gt; &gt; 名称1の取り得る値が不明で、名称3が順位を示さない場合のヒント。</span>
<span class="quote3">&gt; &gt; &gt; select kcode, kseiseki, a1 from (</span>
<span class="quote3">&gt; &gt; &gt; select kcode, kseiseki, if(kcode &lt;&gt; @chk, @r1 := 1, @r1 := (@r1 +</span>
<span class="quote2">&gt; &gt; 1)) as</span>
<span class="quote3">&gt; &gt; &gt; a1, (@chk := kcode)  as a2 from kdata order by kcode, kseiseki</span>
<span class="quote3">&gt; &gt; &gt; ) as t0</span>
<span class="quote3">&gt; &gt; &gt; where a1 &lt; 11;</span>
<span class="quote3">&gt; &gt; &gt; サブクエリにしないとならんところが美しくない…。</span>
<span class="quote3">&gt; &gt; &gt; げーじつかぼしゅうちう</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; --------------------------------------</span>
<span class="quote1">&gt; Let's start Yahoo! Auction  -  Free Campaign Now!</span>
<span class="quote1">&gt; <a href="http://pr.mail.yahoo.co.jp/auction/">http://pr.mail.yahoo.co.jp/auction/</a></span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>


</pre>
</div>
<p class="button"><a href="13074.html">[前]</a><a href="13076.html">[次]</a><a href="../list/13001-13100.html">[番号順一覧]</a><a href="../thread/13001-13100.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13062.html">@ 13062 2006-06-05 14:49 [&quot;Yoshio Kawano&quot; &lt;kaw] グループ化された情報のTOP１０を取得する方法</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13063.html">  13063 2006-06-05 14:56 ┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13064.html">  13064 2006-06-05 15:48 　┗[&quot;Yoshio Kawano&quot; &lt;kaw]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13065.html">  13065 2006-06-05 15:47 　　┣[遠藤 俊裕 &lt;endo@xxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13067.html">  13067 2006-06-05 16:48 　　┃┗[&quot;Yoshio Kawano&quot; &lt;kaw]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13066.html">  13066 2006-06-05 16:18 　　┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13068.html">  13068 2006-06-05 17:07 　　　┗[&quot;Yoshio Kawano&quot; &lt;kaw]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13069.html">  13069 2006-06-05 17:26 　　　　┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                               </a></span>
<span class="current">-&gt;&nbsp;<a href="13075.html">  13075 2006-06-06 02:05 　　　　　┗[&quot;Yoshio Kawano&quot; &lt;kaw]                             </a></span>
</pre>
</body>
</html>
