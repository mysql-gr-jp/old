<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13683</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13682">[前]</a><a href="13684">[次]</a><a href="../list/13601-13700">[番号順一覧]</a><a href="../thread/13601-13700">[スレッド一覧]</a></p>
<p class="id">
mysql:13683
</p>
<div class="header">
<p>
From: &quot;T.Hirotsu&quot; &lt;&quot;T.Hirotsu&quot; &lt;hirotsu@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 22 Jan 2007 10:42:59 +0900<br>
Subject: [mysql 13683] Re: トランザクション中のオートインクリメント値<br>

</p>
</div>
<div class="body">
<pre>
こんにちは、広津です。
エンジンは InnoDB と仮定します。
Ver. 4.0, 4.1, 5.0 で私もそのようにして使っています。

select LAST_INSERT_ID() は、トランザクション分離レベルや、
トランザクションブロックの内外に関わらず、Connection ごとに、
最後に自動生成された AUTO_INCREMENT カラム値を返すようです。

「最後に自動生成された」とは、「トランザクションが最終的に
Commit か Rollback かは関係なく、とりあえず Insert に成功した」
ということかと。

ですので、Rollback した場合、そのトランザクション中で自動生成
された値は、Rollback 後の自動生成値としては再使用されず欠番となります。

（でないと、逆に使えないですよね、、、(^^;）


</pre>
</div>
<p class="button"><a href="13682">[前]</a><a href="13684">[次]</a><a href="../list/13601-13700">[番号順一覧]</a><a href="../thread/13601-13700">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13681">  13681 2007-01-22 00:00 [&quot;Mitsuru Araki&quot; &lt;gun] トランザクション中のオートインクリメント値</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13682">  13682 2007-01-22 01:03 ┣[kubo &lt;jazzflute@xxxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="13683">  13683 2007-01-22 10:42 ┗[&quot;T.Hirotsu&quot; &lt;hirotsu]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13694">  13694 2007-01-25 20:37 　┗[&quot;Mitsuru Araki&quot; &lt;gun]                                     </a></span>
</pre>
</body>
</html>
