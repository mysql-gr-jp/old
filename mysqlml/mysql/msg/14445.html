<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14445</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="14444.html">[前]</a><a href="14446.html">[次]</a><a href="../list/14401-14500.html">[番号順一覧]</a><a href="../thread/14401-14500.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14445
</p>
<div class="header">
<p>
From: oiron &lt;oiron &lt;norio.oiron@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 17 Apr 2008 14:09:01 +0900<br>
Subject: [mysql 14445] mysqlclusterでのAPIとMGMが接続できない<br>

</p>
</div>
<div class="body">
<pre>はじめまして
プログラマの谷口と申します。
よろしくおねがいします。

<a href="10948.html">http://www.mysql.gr.jp/mysqlml/mysql/msg/10948</a>

を参考にmysqlclusterのセットアップを試みているんですが、
最後のAPI:mysqldとMGMの接続がうまくいきません(起動はうまくいきま
す）。
それぞれのmysqlは、5.0.51aを




としてソースコンパイルしました。

/etc/my.cnfは


[mysqld]
ndbcluster
ndb-connectstring=192.18.0.3        # the IP of the MANAGMENT (THIRD) SERVER
[mysql_cluster]
ndb-connectstring=1923168.0.3        # the IP of the MANAGMENT (THIRD) SERVER



としています。
MGMのconfig.iniは、
━━━━━━━━━━━━━━━━━━━━━━━━
[DB DEFAULT]
NoOfReplicas: 2

[TCP DEFAULT]
PortNumber: 10000

[NDB_MGMD]
HostName:       192.18.0.3
datadir:        /var/cluster/ndb_mgm


[NDBD]
HostName:       192.168.0.1
datadir:        /var/cluster/ndb_mgm
FileSystemPath: /var/cluster/ndb-fs

[NDBD]
HostName:       192.168.0.2
datadir:        /var/cluster/ndb_db
FileSystemPath: /var/cluster/ndb-fs


[MYSQLD]
[MYSQLD]

━━━━━━━━━━━━━━━━━━━━━━━━
としています。

ndb_mgm&gt; show
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=2    @xxxxxxxxxx  (Version: 5.0.51, starting, Nodegroup: 0)
id=3    @xxxxxxxxxx  (Version: 5.0.51, starting, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=1   (Version: 5.0.51)

[mysqld(API)]   2 node(s)
id=4 (not connected, accepting connect from any host)
id=5 (not connected, accepting connect from any host)


となってしまいます。
おおまかな流れは、
<a href="10948.html">http://www.mysql.gr.jp/mysqlml/mysql/msg/10948</a>
と
同じようにしたつもりです。
APIとMGMを正常に接続するには、どのようにすればよろしいいでしょうか。
ちなみに
ndbdも始めうまくいかなかったので、起動オプションにを指定して起動

ndbd --daemon --ndb-connectstring=192.068.0.3
でつながりました。
また

mysql&gt; show engines;
+------------+---------+----------------------------------------------------------------+
<span class="quote1">| Engine     | Support | Comment</span>
                 |
+------------+---------+----------------------------------------------------------------+
<span class="quote1">| MyISAM     | DEFAULT | Default engine as of MySQL 3.23 with great</span>
performance         |
<span class="quote1">| MEMORY     | YES     | Hash based, stored in memory, useful for</span>
temporary tables      |
<span class="quote1">| InnoDB     | YES     | Supports transactions, row-level locking, and</span>
foreign keys     |
<span class="quote1">| BerkeleyDB | NO      | Supports transactions and page-level locking</span>
                 |
<span class="quote1">| BLACKHOLE  | NO      | /dev/null storage engine (anything you write</span>
to it disappears) |
<span class="quote1">| EXAMPLE    | NO      | Example storage engine</span>
                 |
<span class="quote1">| ARCHIVE    | NO      | Archive storage engine</span>
                 |
<span class="quote1">| CSV        | NO      | CSV storage engine</span>
                 |
<span class="quote1">| ndbcluster | YES     | Clustered, fault-tolerant, memory-based</span>
tables                 |
<span class="quote1">| FEDERATED  | NO      | Federated MySQL storage engine</span>
                 |
<span class="quote1">| MRG_MYISAM | YES     | Collection of identical MyISAM tables</span>
                 |
<span class="quote1">| ISAM       | NO      | Obsolete storage engine</span>
                 |
+------------+---------+----------------------------------------------------------------+
12 rows in set (0.00 sec)
となっております。


どうぞよろしくお願いします。

-- 
谷口&lt;norio.oiron@xxxxxxxxxx&gt;

</pre>
</div>
<p class="button"><a href="14444.html">[前]</a><a href="14446.html">[次]</a><a href="../list/14401-14500.html">[番号順一覧]</a><a href="../thread/14401-14500.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="14445.html">  14445 2008-04-17 14:09 [oiron &lt;norio.oiron@x] mysqlclusterでのAPIとMGMが接続できない  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14446.html">  14446 2008-04-17 14:27 ┗[Katsutoshi Nakatomi ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14447.html">  14447 2008-04-17 14:39 　┗[oiron &lt;norio.oiron@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14448.html">  14448 2008-04-17 14:50 　　┗["TOUBOU Junichi" &lt;to]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14449.html">  14449 2008-04-17 15:23 　　　┗[oiron &lt;norio.oiron@x]                                 </a></span>
</pre>


</body></html>