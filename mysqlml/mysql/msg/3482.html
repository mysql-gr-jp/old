<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3482</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="3481.html">[前]</a><a href="3483.html">[次]</a><a href="../list/3401-3500.html">[番号順一覧]</a><a href="../thread/3401-3500.html">[スレッド一覧]</a></p>
<p class="id">
mysql:3482
</p>
<div class="header">
<p>
From: &quot;Akinobu YAMAMOTO&quot; &lt;&quot;Akinobu YAMAMOTO&quot; &lt;ayamamot@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 29 Mar 2001 11:04:44 +0900<br>
Subject: [mysql 03482] Re: 「次の○○件」の作り方<br>

</p>
</div>
<div class="body">
<pre>
どうも、山本です。

これはMySQLというより、PHPネタですので趣旨がはずれるかと思いますが
ここで質問があったのでご回答いたします。
ここにソースを出して説明しようかと考えたのですが、本人に勉強してもらうために
もあるのでここでは掲載いたしません。
しかしこの処理に関する大まかな説明をいたしますので、参考になればと思います。

処理の流れをいいますと...
1)１ページに出す件数を決める。(ここでは20件とします。)
2)何ページ目を表示させたいのかのデータを取得する。(ここでは2ページ目としま
す。)
3)表示開始する件目と表示終了する(ここでは21件目から40件目までですね。)
4)前ページ数と後ページ数を計算する(前ページは1ページ、後ページは3ページです
ね。)
5)select文でキーワードをもとに検索する。
6)select文での検索結果のうち、3)で設定した範囲内を表示する。
7)前ページがあるか(つまりは１ページ目か)を判定し、そうでなければ&quot;前のxx件&quot;を
　表示する。またリンクタグも&lt;A HREF=search.php?page=(前ページ
数)&amp;keyword=$keyword&gt;を
　設定する。
8)最終ページを判定し、そうでなければ&quot;後のxx件&quot;を
　表示する。またリンクタグも&lt;A HREF=search.php?page=(後ページ
目)&amp;keyword=$keyword&gt;を
　設定する。

基本的にはこのようになると思いますが、最終ページの前ページでの&quot;後のxx件&quot;の表
示で
本来ならあと数件しかないのに(ここでは20件未満)&quot;後の20件&quot;と表示するとうそをつ
くことになるので
検索結果件数から表示する件数を割った余りを&quot;後のyy件&quot;と表示する必要がありま
す。

　　　　【山本　明信/ayamamot@xxxxxxxxxx】




</pre>
</div>
<p class="button"><a href="3481.html">[前]</a><a href="3483.html">[次]</a><a href="../list/3401-3500.html">[番号順一覧]</a><a href="../thread/3401-3500.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="3445.html">   3445 2001-03-27 18:10 [崎山　宏之  &lt;sakiyam] 「次の○○件」の作り方                  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3446.html">   3446 2001-03-27 18:31 ┣[Akihiko Shinohara &lt;s]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3447.html">   3447 2001-03-27 18:34 ┣[&quot;Akinobu YAMAMOTO&quot; &lt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3449.html">   3449 2001-03-27 19:18 ┃┗[崎山　宏之  &lt;sakiyam]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="3482.html">   3482 2001-03-29 11:04 ┃　┗[&quot;Akinobu YAMAMOTO&quot; &lt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3483.html">   3483 2001-03-29 13:02 ┃　　┗[崎山　宏之  &lt;sakiyam]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3451.html">   3451 2001-03-27 19:47 ┗[Hiroyuki Hasegawa &lt;a]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3461.html">   3461 2001-03-28 14:44 　┣[崎山　宏之  &lt;sakiyam]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3466.html">   3466 2001-03-28 16:27 　┃┣[Hiroyuki Hasegawa &lt;a]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3468.html">   3468 2001-03-28 16:57 　┃┃┗[崎山　宏之  &lt;sakiyam]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3467.html">@  3467 2001-03-28 16:46 　┃┗[Toyoshima Hiroshi &lt;t]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3469.html">   3469 2001-03-28 17:23 　┃　┗[崎山　宏之  &lt;sakiyam]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3470.html">   3470 2001-03-28 17:40 　┃　　┣[Toyoshima Hiroshi &lt;t]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3477.html">   3477 2001-03-28 23:09 　┃　　┃┗[&quot;崎山　宏之&quot; &lt;sakiya]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3471.html">   3471 2001-03-28 17:41 　┃　　┣[mohri &lt;mohri@xxxxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3476.html">   3476 2001-03-28 20:30 　┃　　┗[Toyoshima Hiroshi &lt;t]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3475.html">   3475 2001-03-28 20:17 　┗[とみたまさひろ &lt;tomm]                                     </a></span>
</pre>
</body>
</html>
