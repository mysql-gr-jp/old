<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4123</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="4122.html">[前]</a><a href="4124.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4123
</p>
<div class="header">
<p>
From: (moeru) &lt;&lt;moeru@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 03 Aug 2001 03:05:18 +0900<br>
Subject: [mysql 04123] メモリの節約方法<br>

</p>
</div>
<div class="body">
<pre>モエルです。


メモリの節約方法についての質問です。

最近、メモリの使われ方が急激に増えてることに気が付き
スワップしないか気になっています。
先日は、９００ＭＢまで行きました。。

とくにアクセス数が増えてるとか言う分けじゃないようです。。

プログラムの作り方かMySQLのチューニング？に問題があるのでしょうか？

現在ＴＯＰコマンドを見ると以下のようになっています。(一部)

Mem:  1036268K av, 657196K used, 379072K free, 122856K shrd, 365396K buff
Swap: 265032K av,      0K used, 265032K free                177792K cached

  PID USER     PRI  NI  SIZE  RSS SHARE STAT  LIB %CPU %MEM   TIME COMMAND
19124 root      19   0 31272  30M  1304 S       0  5.5  3.0   0:00 mysqld
17302 nobody    12   0  4940 4940  3964 S       0  4.7  0.4   0:06 httpd
17296 nobody     3   0  4852 4852  3948 S       0  1.1  0.4   0:03 httpd
17433 nobody     1   0  4944 4944  3964 S       0  0.5  0.4   0:05 httpd
19126 root      18   0 31272  30M  1304 S       0  0.3  3.0   0:00 mysqld
17291 nobody     0   0  4952 4952  4004 S       0  0.1  0.4   0:05 httpd
19125 root      14   0 31272  30M  1304 S       0  0.1  3.0   0:00 mysqld


知りたいこと。

①mysqldのリソースサイズは、日毎に大きくなっていきます。
　40Mくらいまでで落ち着くようですが
　このリソースサイズは、テーブルとかインデックスを
　キャッシュしてるサイズということですか？

②PHPでプログラムを作っています。
  mysql_free_result($result);　
　を最近入れまくってますがメモリ使用量は減ってくれません。

　プログラム終了時にメモリを解放するとあるので
　本来はファイルサイズがメモリサイズを超えるような危険のあるテーブルを
　読むときくらいしか使わなくていいってことですよね？
　
  今、一番大きなテーブルで５ＭＢくらいです。(MYI+MYD+frm)

　でも、プログラムで気をつけるとしたら
　mysql_free_result($result);しかないですよね？

　＊ほんとにメモリを解放してくれてるのかも気になります(^^;

③MySQLのチューニング(システム変数)については、
　ほぼデフォルトか２倍値くらいです。
　システム変数をいじるとメモリを節約できるような所があるでしょうか？

④メモリが何で使われているのかを知るツールがあったりするでしょうか？
  ＊TOPコマンドより詳しく出るもの。



このレベルですが、何かアドバイスいただけたら嬉しいですm(__)m


モエル

</pre>
</div>
<p class="button"><a href="4122.html">[前]</a><a href="4124.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="4123.html">   4123 2001-08-03 03:05 [&lt;moeru@xxxxxxxxxx&gt;  ] メモリの節約方法                        </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4125.html">   4125 2001-08-03 06:22 ┗[Tatsuhiko Miyagawa &lt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4138.html">   4138 2001-08-03 20:36 　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4140.html">   4140 2001-08-04 07:03 　　┗[Tatsuhiko Miyagawa &lt;]                                   </a></span>
</pre>


</body></html>