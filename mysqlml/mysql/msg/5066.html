<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5066</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="5065.html">[前]</a><a href="5067.html">[次]</a><a href="../list/5001-5100.html">[番号順一覧]</a><a href="../thread/5001-5100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:5066
</p>
<div class="header">
<p>
From: &quot;f.t&quot; &lt;&quot;f.t&quot; &lt;fujiyama@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 30 Jan 2002 13:02:04 +0900<br>
Subject: [mysql 05066] Re: 時間のかかる SELECT 文によるテーブルロック<br>

</p>
</div>
<div class="body">
<pre>
fujiyamaです。

&quot;Yasuhide Nomura&quot; &lt;mag@xxxxxxxxxx&gt; wrote(Tue, 29 Jan 2002 20:36:35 +0900):

<span class="quote1">&gt; MySQL3.24による400万ユーザのデータを運用していますが、</span>
<span class="quote1">&gt; 管理者が運用状態を見るために応答に時間がかかるSELECT</span>
<span class="quote1">&gt; によるクエリーを発行した場合、クエリが終了するまで応答速度を</span>
<span class="quote1">&gt; 要求されるアプリケーションからのテーブルロック、UPDATE、DELETE</span>
<span class="quote1">&gt; などの操作が待たされてしまいます。</span>
<span class="quote1">&gt; テーブルがロックされる状態は仕方のないことでしょうか。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; MySQLのマニュアルには、</span>
<span class="quote1">&gt; ｜テーブルロッキングは以下の場合にはあまり良くありません：</span>
<span class="quote1">&gt; ｜</span>
<span class="quote1">&gt; ｜・あるクライアントが実行に長い時間のかかる SELECT を発行。</span>
<span class="quote1">&gt; ｜・その後に、他のクライアントが、使用されているテーブルに対し</span>
<span class="quote1">&gt; ｜　UPDATE を発行；このクライアントは先の SELECT が完了するま</span>
<span class="quote1">&gt; ｜　で待ちます</span>
<span class="quote1">&gt; とありますが、テーブルロックをしていないSELECT文に対しても、</span>
<span class="quote1">&gt; 上記のようなロック状態が発生するのはなぜなのでしょうか。</span>

普通に操作していたら、select時にはREADロックは自動的にかかるもの（そうで
ないとデータが読めない）と考えてましたが、違いました？（求む識者の答え）

で、解決策は、マニュアルのように
・selectが早くなるようにindexなどを工夫する
・必要な読み込み用のテーブルを作る
とかしかないのではないでしょうか？

-- よろしくお願いします
f.t &lt;fujiyama@xxxxxxxxxx&gt;


</pre>
</div>
<p class="button"><a href="5065.html">[前]</a><a href="5067.html">[次]</a><a href="../list/5001-5100.html">[番号順一覧]</a><a href="../thread/5001-5100.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="5053.html">   5053 2002-01-29 20:36 [&quot;Yasuhide Nomura&quot; &lt;m] 時間のかかる SELECT 文によるテーブルロック</a></span>
<span class="current">-&gt;&nbsp;<a href="5066.html">   5066 2002-01-30 13:02 ┗[&quot;f.t&quot; &lt;fujiyama@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5067.html">   5067 2002-01-30 14:38 　┗[&quot;Yasuhide Nomura&quot; &lt;m]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5068.html">   5068 2002-01-30 15:06 　　┗[Noriyuki Sakimura &lt;s]                                   </a></span>
</pre>
</body>
</html>
