<div>岩崎と申します。</div>  <div>いつも皆様MLを参考にさせていただいてます。</div>  <div>&nbsp;</div>  <div>ちょっと皆様のお知恵を拝借したいと思い投稿しました。</div>  <div>&nbsp;</div>  <div>表題にもありますが、該当する「num」の一定期間の最新のデータ</div> 
 <div>10件のうち、diffのベスト5の合計を取りたいので以下のようなクエリで<BR>
取得しましたが、SELECTを何回も重ねるので<BR>
スッキリせずに分かりにくいクエリになっています。<BR>
他に方法はないでしょうか、よろしくお願いします。</div>  <div>&nbsp;</div>  <div>ちなみにベスト5のデータを取るのでしたら、「AS d」の()内の<BR>
クエリで取れます。</div>  <div>&nbsp;</div>  <div>SELECT SUM(di) <BR>
FROM<BR>
(SELECT di FROM <BR>
&nbsp;(SELECT diff AS di <BR>
&nbsp; FROM hd&nbsp; <BR>
&nbsp; WHERE num = 1<BR>
&nbsp;&nbsp; AND day BETWEEN '2010-04-01' AND '2011-03-31'<BR>
&nbsp; ORDER BY day DESC&nbsp; LIMIT 10 <BR>
&nbsp;) AS s <BR>
&nbsp;ORDER BY di <BR>
&nbsp;LIMIT 5<BR>
) AS d</div>  <div><BR>
テーブル作成文<BR>
CREATE TABLE `hd` (</div>  <div>&nbsp; `id` int(11) NOT NULL AUTO_INCREMENT,</div>  <div>&nbsp; `num` int(11) NOT NULL,</div>  <div>&nbsp; `day` date DEFAULT NULL,</div>  <div>&nbsp; `diff` int(11) NOT NULL,</div>  <div>&nbsp; PRIMARY KEY (`id`)</div>  <div>) ENGINE=MyISAM </div> 
 <div>&nbsp;</div>  <div>環境<BR>
OS Windows7 professional SP1<BR>
MySQL Version 5.1.16<BR>
</div>
<div style="line-height: 0; width: 0; height: 5px; clear: both;">&nbsp;</div>

