<html><head></head><body><div>岩崎と申します。</div>  <div>いつも皆様MLを参考にさせていただいてます。</div>  <div>&nbsp;</div>  <div>ちょっと皆様のお知恵を拝借したいと思い投稿しました。</div>  <div>&nbsp;</div>  <div>表題にもありますが、該当する「num」の一定期間の最新のデータ</div> 
 <div>10件のうち、diffのベスト5の合計を取りたいので以下のようなクエリで<br>
取得しましたが、SELECTを何回も重ねるので<br>
スッキリせずに分かりにくいクエリになっています。<br>
他に方法はないでしょうか、よろしくお願いします。</div>  <div>&nbsp;</div>  <div>ちなみにベスト5のデータを取るのでしたら、「AS d」の()内の<br>
クエリで取れます。</div>  <div>&nbsp;</div>  <div>SELECT SUM(di) <br>
FROM<br>
(SELECT di FROM <br>
&nbsp;(SELECT diff AS di <br>
&nbsp; FROM hd&nbsp; <br>
&nbsp; WHERE num = 1<br>
&nbsp;&nbsp; AND day BETWEEN '2010-04-01' AND '2011-03-31'<br>
&nbsp; ORDER BY day DESC&nbsp; LIMIT 10 <br>
&nbsp;) AS s <br>
&nbsp;ORDER BY di <br>
&nbsp;LIMIT 5<br>
) AS d</div>  <div><br>
テーブル作成文<br>
CREATE TABLE `hd` (</div>  <div>&nbsp; `id` int(11) NOT NULL AUTO_INCREMENT,</div>  <div>&nbsp; `num` int(11) NOT NULL,</div>  <div>&nbsp; `day` date DEFAULT NULL,</div>  <div>&nbsp; `diff` int(11) NOT NULL,</div>  <div>&nbsp; PRIMARY KEY (`id`)</div>  <div>) ENGINE=MyISAM </div> 
 <div>&nbsp;</div>  <div>環境<br>
OS Windows7 professional SP1<br>
MySQL Version 5.1.16<br>
</div>
<div style="line-height: 0; width: 0; height: 5px; clear: both;">&nbsp;</div>

</body></html>