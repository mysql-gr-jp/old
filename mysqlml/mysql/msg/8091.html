<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8091</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8090.html">[前]</a><a href="8092.html">[次]</a><a href="../list/8001-8100.html">[番号順一覧]</a><a href="../thread/8001-8100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8091
</p>
<div class="header">
<p>
From: bon &lt;bon &lt;bon@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 02 Aug 2003 04:51:02 +0900<br>
Subject: [mysql 08091] order by で table full<br>

</p>
</div>
<div class="body">
<pre>はじめまして、bonです。

Linux &amp; MySQL3.22.32 &amp; Perl &amp; PHP
で使用しています。

現在あるSQL文でエラーがでるようになりました。
SELECT c.a, c.b, c.d, c.e, m.u, e.p, c.u
 FROM tblc c
 LEFT JOIN tble e on c.e = e.e
 LEFT JOIN tblm m on c.a = m.a
 ORDER BY c.a, m.u desc
エラーがでてなかった時のそれぞれのレコード数はおよそ、
tblc:約590
tblm:約5280
tble:4
です。
エラーがでるようになってレコード数を確認すると、
tblc:約720
tblm:約5250
tble:4
です。
ORDER BYをはずすと結果が正常に戻ります。
それぞれのテーブルの１レコードのサイズはおよそ
tblc:約1300バイト + textフィールド２つ
tblm:約270バイト
tble:約370バイト + textフィールド２つ
です。

で、mysqldのチューニングになるわけですが、
とりあえず現在のサーバ設定を mysqld --help で保存しました。
order byにからみそうな設定として、
[mysqld]
set-variable    = sort_buffer=4M
set-variable    = max_sort_length=2K
を設定しました。前回の設定の２倍にしました。
mysqldを再起動、設定を保存、前回の保存の diff をとり、
設定が反映されていることを確認しました。

実行すると相変わらずエラーです。
set-variable    = sort_buffer=8M
set-variable    = max_sort_length=4K
にしてもだめでした。

何が間違って何がいけないのでしょうか？

よろしくお願いします。


-----------------
bon@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="8090.html">[前]</a><a href="8092.html">[次]</a><a href="../list/8001-8100.html">[番号順一覧]</a><a href="../thread/8001-8100.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="8091.html">   8091 2003-08-02 04:51 [bon &lt;bon@xxxxxxxxxx&gt;] order by で table full                  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8092.html">   8092 2003-08-02 05:58 ┗[bon &lt;bon@xxxxxxxxxx&gt;]                                       </a></span>
</pre>


</body></html>