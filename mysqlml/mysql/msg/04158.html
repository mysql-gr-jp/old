<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4158</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="4157.html">[前]</a><a href="4159.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4158
</p>
<div class="header">
<p>
From: とみたまさひろ &lt;とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 8 Aug 2001 23:19:04 +0900<br>
Subject: [mysql 04158] Re: 条件の値によって Index が使われない<br>

</p>
</div>
<div class="body">
<pre>とみたです。

On Tue, 7 Aug 2001 16:49:00 +0900
"william" &lt;william@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; MySQLで以下のSQLをexplainして、理解できないことがあります。</span>
<span class="quote1">&gt; ケース１とケース２の違いはWHERE文に条件の値だけが違います。</span>
<span class="quote1">&gt; # sampletime は datetime型で、インデックスあり。</span>
	～～
<span class="quote1">&gt; ケース２：７５３件ヒット</span>
<span class="quote1">&gt; explain select name,printedpage from PRTINF</span>
<span class="quote1">&gt; where sampletime&gt;='2001-08-07 00:00:01';</span>
<span class="quote1">&gt; +--------+------+---------------+------+------+------------+</span>
<span class="quote2">&gt; | table  | type | possible_keys | key  | rows | Extra      |</span>
<span class="quote1">&gt; +--------+------+---------------+------+------+------------+</span>
<span class="quote2">&gt; | PRTINF | ALL  | sampletime    | NULL | 5363 | where used |</span>
<span class="quote1">&gt; +--------+------+---------------+------+------+------------+</span>
<span class="quote1">&gt; # これは理解できない。全件の１/５なのに、なぜ総なめになるでしょう</span>
<span class="quote1">&gt; # 使わせる方法はありますか。</span>

マニュアルに

key
    key 項目は、 MySQL が使用すると実際に決めたキーを示します。どのインデックス
    も選ばれなかったならば、キーは NULL です。 MySQL が間違ったインデックスを選
    択する場合、たいていは MySQL に他のインデックスを使用するように強制すること
    ができます。 myisamchk --analyze の使用、「16.1.1 myisamchk 起動構文」節参
    照、または USE INDEX/IGNORE INDEX の使用によって。「7.20 JOIN 構文」節参照。

とあるので、myisamchk --analyze してみてはいかがでしょうか。
または、SELECT 時に USE INDEX (sampletime) してみるとか。

--
とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;
日本MySQLユーザ会 <a href="http://www.mysql.gr.jp">http://www.mysql.gr.jp</a>

</pre>
</div>
<p class="button"><a href="4157.html">[前]</a><a href="4159.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="4155.html">   4155 2001-08-07 16:49 ["william" &lt;william@x] 条件の値によって Index が使われない     </a></span>
<span class="current">-&gt;&nbsp;<a href="4158.html">   4158 2001-08-08 23:19 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4159.html">   4159 2001-08-09 13:23 　┗["william" &lt;william@x]                                     </a></span>
</pre>


</body></html>