<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:1172</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="1171">[前]</a><a href="1173">[次]</a><a href="../list/1101-1200">[番号順一覧]</a><a href="../thread/1101-1200">[スレッド一覧]</a></p>
<p class="id">
mysql:1172
</p>
<div class="header">
<p>
From: 奥田  典子 &lt;奥田  典子 &lt;okud_no@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 28 Aug 1999 10:37:13 +0900<br>
Subject: [mysql 01172] 更新系クエリーが応答なしの時、テーブルがロックされる？<br>

</p>
</div>
<div class="body">
<pre>
奥田です。

今年の５月より、会社の業務でMySQL を使い始めました。
PerlのWin32::ODBC経由でMySQL データベースの更新を行うもので、日々
運用しております。データベースには、複数のテーブルがありますが、
全体で60万件程度、これに対し、毎日、1000〜3000件の更新を行います。

運用を開始してから、月に１〜２回の頻度で発生する問題に悩まされて
います。処理の冒頭でupdate/delete 等の更新系クエリーが挫折??し、
何の応答もないまま、Perlスクリプトが途中で止まったままになります。

このような状況に陥りますと、他の照会系クエリーも、全く実行できない
 (同じようにウェイトして結果が返ってこない) 状態になるため、とりあ
えず、mydb e → mydb s  でMySQL を起動し直すのですが、再起動後も、
照会系クエリーは正常に動作しますが、更新系クエリーは、相変わらずウ
ェイトしてしまい、テーブルがロックされたような状態です。
 (アプリケーションで、LOCK TABLES/ UNLOCK TABLES  は行っていません)

このテーブルのロック状態は、データベースディレクトリをrenameすると
解除されるということが最近判りました。


更新系クエリーが何らかの原因で中断された場合、テーブルがロックされ
たような状態が残ってしまうのでしょうか。

また、データベースディレクトリをrenameすると、この状態が解除される
というのは、何故なのか。

何か情報がありましたら教えていただきたいと思います。
よろしくお願いします。

実行環境は、以下のとおりです。
Windows95/NT 3.51
myodbc.dll  2.50.2100  TCX DataKonsult AB
Jperl       5.003 Build316
MySQL       3.21.30
-----------------------------------------------------------------
奥田  典子 &lt;okud_no@xxxxxxxxxx&gt;


</pre>
</div>
<p class="button"><a href="1171">[前]</a><a href="1173">[次]</a><a href="../list/1101-1200">[番号順一覧]</a><a href="../thread/1101-1200">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="1172">   1172 1999-08-28 10:37 [奥田  典子 &lt;okud_no@] 更新系クエリーが応答なしの時、テーブルがロックされる？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1173">   1173 1999-08-28 12:15 ┗[&lt;takeshi@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1174">   1174 1999-08-28 12:58 　┗[奥田  典子 &lt;okud_no@]                                     </a></span>
</pre>
</body>
</html>
