<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4210</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4209.html">[前]</a><a href="4211.html">[次]</a><a href="../list/4201-4300.html">[番号順一覧]</a><a href="../thread/4201-4300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4210
</p>
<div class="header">
<p>
From: &lt;takeshi@xxxxxxxxxx&gt;<br>
Date: Sun, 26 Aug 2001 19:13:42 +0900<br>
Subject: [mysql 04210] Re: cron から myisamchk を実行するとメールが来ない<br>

</p>
</div>
<div class="body">
<pre>
At Sun, 26 Aug 2001 13:00:24 +0900,
遠藤 俊裕 wrote:

<span class="quote1">&gt; #!/bin/sh</span>
<span class="quote1">&gt; # MyISAM Check sequence</span>
<span class="quote1">&gt; /usr/local/bin/mysqladmin shutdown</span>
<span class="quote1">&gt; cd /usr/local/var/testDB</span>
<span class="quote1">&gt; for P in *.MYI; do</span>
<span class="quote1">&gt;  /usr/local/bin/myisamchk -r $P</span>
<span class="quote1">&gt;  /usr/local/bin/myisamchk -S $P</span>
<span class="quote1">&gt; done</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; /usr/local/etc/rc.d/mysql.server.sh start</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; こんな sh を書いてます。</span>
<span class="quote1">&gt; それを cron から一日一回実行するようにしています。</span>
<span class="quote1">&gt; しかし、cron からメールが来ません。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ps を見ると</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; /usr/sbin/sendmail -FCronDaemon -odi -oem -oi -t</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; こんなプロセスが残ってます。</span>

それ以外のプロセス(sh script にかかれている)が残っているはずです。

<span class="quote1">&gt; そこで、mysqladmin shutdown を実行すると、このプロセスが無く</span>
<span class="quote1">&gt; なって、以下のようなメールが来ます。</span>

先の、--with-mit-pthread のせいかもしれません。
FreeBSD 上で、MIT-Pthread を使用するように MySQL をコンパイルすると、
停止時(mysqladmin shutdown)やその他、いくつか不具合がでます。
(MIT Pthread を使用するのは、FreeBSD2.x までです。)
おそらく、このシェルはまだ終了していなくて、sendmailへのパイプが閉じられ
ていないのでしょう。
あるいはもっと単純な話で、
mysqladmin shutdown に -p がついていて、入力待ちだったり...

-- 
 村上 毅  takeshi@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="4209.html">[前]</a><a href="4211.html">[次]</a><a href="../list/4201-4300.html">[番号順一覧]</a><a href="../thread/4201-4300.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="4204.html">   4204 2001-08-26 13:00 [&lt;endo_t@xxxxxxxxxx&gt; ] cron から myisamchk を実行するとメールが来ない</a></span>
<span class="current">-&gt;&nbsp;<a href="4210.html">   4210 2001-08-26 19:13 ┣[&lt;takeshi@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4212.html">   4212 2001-08-26 20:41 ┃┗[&lt;endo_t@xxxxxxxxxx&gt; ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4214.html">   4214 2001-08-26 20:52 ┗[Yasuhiro Hayase &lt;hay]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4219.html">   4219 2001-08-26 22:04 　┗[&lt;endo_t@xxxxxxxxxx&gt; ]                                     </a></span>
</pre>
</body>
</html>
