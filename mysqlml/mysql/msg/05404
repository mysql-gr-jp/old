<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5404</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="5403">[前]</a><a href="5405">[次]</a><a href="../list/5401-5500">[番号順一覧]</a><a href="../thread/5401-5500">[スレッド一覧]</a></p>
<p class="id">
mysql:5404
</p>
<div class="header">
<p>
From: &quot;KAWAI,Takanori&quot; &lt;&quot;KAWAI,Takanori&quot; &lt;GCD00051@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 25 Apr 2002 14:10:54 +0900<br>
Subject: [mysql 05404] Re: Full-text Search<br>

</p>
</div>
<div class="body">
<pre>
川合孝典です。

----- Original Message -----
From: &lt;moeru@xxxxxxxxxx&gt;
To: &lt;ml@xxxxxxxxxx&gt;
Sent: Thursday, April 25, 2002 12:14 PM
Subject: <a href="05403">[mysql 05403]</a> Re: Full-text Search


<span class="quote1">&gt;</span>
<span class="quote1">&gt; 2002/04/25 11:06:59 +0900に&quot;KAWAI,Takanori&quot; &lt;GCD00051@xxxxxxxxxx&gt;さんに頂</span>
いた
<span class="quote1">&gt; 「<a href="05401">[mysql 05401]</a> Re: Full-text Search」への返事です。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; モエルです。</span>
（中略）
<span class="quote1">&gt; Full Text Searchの速度は、どんなもんですか？</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 1st: 0.00574994087219238</span>
<span class="quote1">&gt; 2nd: 0.00473403930664062</span>
<span class="quote1">&gt; って書いてあったのは、速度ですか？</span>
これはSQLの実行からすべて取り出し終わるまでの時間です
（ミリ秒単位）。

はっきり言って、これくらいの件数だと確実に遅いです(^^;;
＃だってわざわざ単語に分解して、それをベースに検索用の文字列を
＃作ってから検索するわけですから
といっても違いは0.0何秒っていう程度です。
単純に同じデータを10回ずつINSERTした場合には、あっさり
逆転しました。件数が多ければ中間一致に負けることはまずない
でしょう。

ChaSen使い方で活用はすべて終止形で検索文字列を作るようにして
いるので、単純に中間一致した場合とは違いもでてきます。現在は
助詞や記号も検索文字列としているので、「の」とか「が」まで
検索しにいくので、精度が低くなっているようにも感じます。
まぁこの当たりは調整の範囲だと思っていますが。

<span class="quote2">&gt; &gt;myperlあたりでPerlを使ったストアドプロシージャとか用意できれば</span>
<span class="quote2">&gt; &gt;かなり手数も減りますし、他の言語からも呼べるんじゃないかとは</span>
<span class="quote2">&gt; &gt;思いますが（Cで書けばという話もあるかな）</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; このへんは、またまた、ぼくには難しいお話で(^^;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ソース見て、思ったんですけど、ChaSenってPHPとか対応してない</span>
<span class="quote1">&gt; ようなのでperlでデータの分解・登録をバックグラウンド処理するなら</span>
<span class="quote1">&gt; できるかなと思いました。</span>
myperlのソースをちょっと見た感じでは、かなり辛そうですし、
私はPerlを使うので、mysqlのほうはあっさり断念しました。
myperlを見ながらMySQLにCでストアドプロシージャ書けば
いいのかしらんと思いつつ。chasenの初期化とかあるので
素直に行くかどうかちょっと疑問だったりもします。

PHPからCで書かれたライブラリを利用できるようにする方法は
あいにくとしりませんが、とりあえずchasenを外部コマンドとして
呼び出せれば、問題ないかと思います。実行結果を読み込んで
分解するというのは、ルートが多少違っても結局同じことですし。
mod_phpにしているのに外部プログラムを呼び出したんでは...
ということはあるかもしれませんが。

なおWindowsであればCOM連携でComCha.dllが利用できるかも
知れません。
（これは作った本人もあまり信用していなかったりする :-)）

ComCha.dll、ChaDll.dll
<a href="http://member.nifty.ne.jp/hippo2000/ComCha/ComCha.htm">http://member.nifty.ne.jp/hippo2000/ComCha/ComCha.htm</a>

＃って悩むよりPerl使えば？（というのが私の考え(^^))
===================================================
川合 孝典 (Hippo2000)
   DBI日本語メーリングリスト管理人、Kansai.pm所属
   kwitknr@xxxxxxxxxx GCD00051@xxxxxxxxxx
   <a href="http://member.nifty.ne.jp/hippo2000">http://member.nifty.ne.jp/hippo2000</a>
   <a href="http://www.hippo2000.info/">http://www.hippo2000.info/</a>
「Perlを256倍使うための本　DBI編」　発売中
<a href="http://member.nifty.ne.jp/hippo2000/p256dbi/p256dbi.htm">http://member.nifty.ne.jp/hippo2000/p256dbi/p256dbi.htm</a>
===================================================


</pre>
</div>
<p class="button"><a href="5403">[前]</a><a href="5405">[次]</a><a href="../list/5401-5500">[番号順一覧]</a><a href="../thread/5401-5500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="5375">   5375 2002-04-20 22:23 [&lt;moeru@xxxxxxxxxx&gt;  ] Full-text Search                        </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5376">   5376 2002-04-20 23:19 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5377">   5377 2002-04-20 23:35 　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5378">   5378 2002-04-21 00:34 　　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5379">   5379 2002-04-21 00:47 　　　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5381">   5381 2002-04-21 07:37 　　　　┣[&quot;KAWAI,Takanori&quot; &lt;GC]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5383">   5383 2002-04-21 11:13 　　　　┃┗[&lt;moeru@xxxxxxxxxx&gt;  ]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5386">   5386 2002-04-21 23:19 　　　　┃　┗[&quot;KAWAI,Takanori&quot; &lt;GC]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5387">   5387 2002-04-22 00:13 　　　　┃　　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5401">   5401 2002-04-25 11:06 　　　　┃　　　┗[&quot;KAWAI,Takanori&quot; &lt;GC]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5403">   5403 2002-04-25 12:14 　　　　┃　　　　┗[&lt;moeru@xxxxxxxxxx&gt;  ]                     </a></span>
<span class="current">-&gt;&nbsp;<a href="5404">   5404 2002-04-25 14:10 　　　　┃　　　　　┣[&quot;KAWAI,Takanori&quot; &lt;GC]                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5407">   5407 2002-04-26 01:10 　　　　┃　　　　　┃┣[&lt;moeru@xxxxxxxxxx&gt;  ]                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5408">   5408 2002-04-26 07:44 　　　　┃　　　　　┃┃┗[&quot;KAWAI,Takanori&quot; &lt;GC]               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5410">   5410 2002-04-26 09:47 　　　　┃　　　　　┃┃　┗[&lt;moeru@xxxxxxxxxx&gt;  ]             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5411">   5411 2002-04-26 10:52 　　　　┃　　　　　┃┃　　┣[&quot;KAWAI,Takanori&quot; &lt;GC]           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5417">   5417 2002-04-27 00:22 　　　　┃　　　　　┃┃　　┃┣[&lt;moeru@xxxxxxxxxx&gt;  ]         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5419">   5419 2002-04-27 12:30 　　　　┃　　　　　┃┃　　┃┗[Tatsuhiko Miyagawa &lt;]         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5421">   5421 2002-04-27 12:46 　　　　┃　　　　　┃┃　　┃　┣[&quot;TOYOSHIMA, Masayuki]       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5422">   5422 2002-04-27 13:06 　　　　┃　　　　　┃┃　　┃　┃┣[Tatsuhiko Miyagawa &lt;]     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5423">   5423 2002-04-28 11:50 　　　　┃　　　　　┃┃　　┃　┃┃┗[&quot;TOYOSHIMA, Masayuki]   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5424">   5424 2002-04-28 18:36 　　　　┃　　　　　┃┃　　┃　┃┗[&quot;KAWAI,Takanori&quot; &lt;GC]     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5425">   5425 2002-04-28 18:50 　　　　┃　　　　　┃┃　　┃　┗[&quot;KAWAI,Takanori&quot; &lt;GC]       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5432">   5432 2002-05-05 14:58 　　　　┃　　　　　┃┃　　┃　　┗[&lt;moeru@xxxxxxxxxx&gt;  ]     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5416">   5416 2002-04-26 20:20 　　　　┃　　　　　┃┃　　┗[Hidetoshi OKAWA &lt;hid]           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5420">   5420 2002-04-27 12:46 　　　　┃　　　　　┃┗[Tatsuhiko Miyagawa &lt;]                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5405">   5405 2002-04-25 18:33 　　　　┃　　　　　┗[Hidetoshi OKAWA &lt;hid]                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5382">   5382 2002-04-21 08:04 　　　　┗[とみたまさひろ &lt;tomm]                               </a></span>
</pre>
</body>
</html>
