<html><head></head><body><div><div>藤原と申します。</div></div><div><br></div><div>はじめてMLに返信させていただきます。</div><div>よろしくお願い致します。</div><div><br></div><div>最近、似たような案件を手掛けている関係で少し詳しくなりましたので回答させていただきます。</div><div><br></div><div>ただ、要件がよくわかりませんので、何とも言えない部分はあるのですが、みなさんがおっしゃられていることも踏まえてまとめてみると以下のようではないかと思われます。</div><div><br></div><div>①番のお勧め</div><div>無償で、ある程度自分たちで手を動かせる場合</div><div><br></div><div>fluentd、embulkがおすすめです。</div><div>DB to DBの場合は、embulkの方が合うと思います。</div><div><br></div><div>短い間隔でバッチのように起動してデータ転送できるため、ある程度、リアルタイムにすることも可能であり、ダウンタイムも少なくすることができます。</div><div><br></div><div>プラグインについては、林さんがおっしゃられた通りです。情報量も多いので取り掛かりやすいと思います。</div><div><br></div><div>一回限りのマイグレーションなのか、継続的なデータ転送が必要なのかわかりませんが、embulkはそのどちらにも使えると思うので恐らく要件に合うと思います。</div><div><br></div><div>②番</div><div>MySQLだけでやる場合、ある程度の作り込みが必要です。</div><div><br></div><div>sumiyaさんなどがおっしゃられている方法もありますが、mysqldumpはデータ量が多い場合、エクスポート、インポートに時間がかかるため、ある程度のダウンタイムが発生する可能性があるかと思います。</div><div><br></div><div>要件として、ダウンタイムが許容できるならば、最も基本的なやり方かと思います。</div><div><br></div><div>Workbenchでもマイグレーション機能がありますが、こちらは使用したことがないのでよくわかりません。もしすると中々使えるのかもしれません。</div><div><br></div><div>また、別の方法として、ソース側DBでターゲット側DBのスキーマと同様のビューテーブルを作成しておき、それをプログラムで抽出し、ターゲット側DBに差分でインサートする、という方法もあるかもしれません。</div><div><br></div><div>または、ソース側DBでトリガーを使用するという方法や、LOAD DATA INFILE構文を使う方法も考えられます。</div><div><br></div><div>このビューテーブル、トリガー、LOAD DATA INFILEのいずれ方法も作り込みすれば、ダウンタイムの発生を少なくして対応できる可能性があります。</div><div><br></div><div>③番</div><div>ある程度のお金をかけられる場合、ETLツールを使用する方法があります。</div><div><br></div><div>ETLツールは中々高価なため、一回限りのマイグレーション用途というよりは、業務でビッグデータなどを扱うような業務システム、データウェアハウスなどの継続的なデータ転送を必要とする場合に適しています。</div><div><br></div><div>代表的なものとしては、無償版ではTalend、Pentaho、SymmetricDSあたりが有名です。</div><div><br></div><div>また、有償製品で比較的安価なものは、Asteria Warp、DataSpider、DMExpress、Qanatなどがあります。安価といっても、数百万くらいかかります。</div><div><br></div><div>さらに高価なものでは、Oracle Goldengate、Oracle Data Integrator、Attunity、DBMoToなどがあります。</div><div><br></div><div>最近はクラウドでも、ETLのサービスをやっているところもありますし、短期間の使用ならば、FlyDataなどが要件に合うかもしれません。</div><div><br></div><div>以上、よろしくお願い致します。</div><div><br></div><div>藤原</div><div>twitter @yflab</div><div><br><div class="gmail_quote"><div>2017年2月24日(金) 14:02 林如弥 &lt;<a href="mailto:yukiya.hayashi@gmail.com">yukiya.hayashi@gmail.com</a>&gt;:<br></div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div class="gmail_msg">林と申します。<div class="gmail_msg"><br class="gmail_msg"></div><div class="gmail_msg">私もOSSのETLツールのご紹介になりますが、トレジャーデータ社のEmbulkをオススメします。</div><div class="gmail_msg">input,filter,outputの３段階でデータを処理するのですが、豊富なプラグインで柔軟な処理ができます。</div><div class="gmail_msg">※例えばinputをMYSQLに、outputをpostgresに、といった使い方も可能<br class="gmail_msg"></div><div class="gmail_msg"><br class="gmail_msg"></div><div class="gmail_msg">山田さんのケースでは、inputとoutputでmysqlプラグインを使うだけで要件を満たせそうです。</div><div class="gmail_msg">※embulk-output-mysqlのcolumn_optionsのvalue_typeを参照ください</div><div class="gmail_msg"><br class="gmail_msg"></div><div class="gmail_msg">参考1：MySQLのoutputプラグイン</div><div class="gmail_msg">_<a href="https://github.com/embulk/embulk-output-jdbc/tree/master/embulk-output-mysql" class="gmail_msg" target="_blank">https://github.com/embulk/embulk-output-jdbc/tree/master/embulk-output-mysql</a><br class="gmail_msg"></div><div class="gmail_msg"><div class="gmail_msg"><br class="gmail_msg"></div><div class="gmail_msg">参考2：Embulkのプラグイン一覧</div><div class="gmail_msg">_<a href="http://www.embulk.org/plugins/" class="gmail_msg" target="_blank">http://www.embulk.org/plugins/</a><br class="gmail_msg"></div></div><div class="gmail_msg"><br class="gmail_msg"></div><div class="gmail_msg"><br class="gmail_msg"></div></div><div class="gmail_extra gmail_msg"><br class="gmail_msg"><div class="gmail_quote gmail_msg">2017年2月24日 11:13 HIRATSUKA Sadao <span class="gmail_msg">&lt;<a href="mailto:sh2@pop01.odn.ne.jp" class="gmail_msg" target="_blank">sh2@pop01.odn.ne.jp</a>&gt;</span>:<br class="gmail_msg"><blockquote class="gmail_quote gmail_msg" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div class="gmail_msg"><div class="gmail_msg">平塚です。<br class="gmail_msg"><br class="gmail_msg">いわゆるETLツールで対応可能と思います。<br class="gmail_msg">安価に済ませるならTalendというOSSがあります。<br class="gmail_msg"><a href="https://jp.talend.com/products/talend-open-studio" class="gmail_msg" target="_blank">https://jp.talend.com/products/talend-open-studio</a><br class="gmail_msg"><br class="gmail_msg">ただ文面を拝見する限り、ETLツールを持ってくるのは<br class="gmail_msg">牛刀をもって鶏を割く感じを受けます。<br class="gmail_msg"></div><br class="gmail_msg">sumiyaさんからご提案いただいた手順を基本としつつ<br class="gmail_msg">それではどうしてもやりたいことができない場合に<br class="gmail_msg">ETLツールを検討するのがよいと思います。<br class="gmail_msg"></div><div class="gmail_extra gmail_msg"><br class="gmail_msg"><div class="gmail_quote gmail_msg">2017年2月24日 11:00 Etsuo SUMIYA <span class="gmail_msg">&lt;<a href="mailto:sumiya-e@ube-shinko.co.jp" class="gmail_msg" target="_blank">sumiya-e@ube-shinko.co.jp</a>&gt;</span>:<div class="gmail_msg"><div class="m_-2406968451302959433h5 gmail_msg"><br class="gmail_msg"><blockquote class="gmail_quote gmail_msg" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">sumiyaといいます。<br class="gmail_msg">
<br class="gmail_msg">
From: Yamada Shinya &lt;<a href="mailto:yamada_shinya@interfelix.jp" class="gmail_msg" target="_blank">yamada_shinya@interfelix.jp</a>&gt;<br class="gmail_msg">
Subject: [mysql 16383] mysqlのデータベースの移行<br class="gmail_msg">
Date: Fri, 24 Feb 2017 10:41:26 +0900<br class="gmail_msg">
Message-ID: &lt;<a href="mailto:53e44762-94f8-71c6-7d2f-17aac7f1b40c@interfelix.jp" class="gmail_msg" target="_blank">53e44762-94f8-71c6-7d2f-17aac7f1b40c@interfelix.jp</a>&gt;<br class="gmail_msg">
<br class="gmail_msg">
&gt; MySQLのデータベースの移行を検討しています。<br class="gmail_msg">
&gt; 移行元も移行先もMySQLのデータベースです。<br class="gmail_msg">
&gt; 只、構造が違っていて、テーブルのフィールド単位に設定先を決定する必要が<br class="gmail_msg">
&gt; あります。<br class="gmail_msg">
<br class="gmail_msg">
どのような変更が必要なのかわかりませんが、<br class="gmail_msg">
<br class="gmail_msg">
1)古いmysqlでmysqldump<br class="gmail_msg">
2)新しいmysqlでインポート<br class="gmail_msg">
3)必要な変更をALTER tableなどで、行える限り行う。<br class="gmail_msg">
4)それ以上複雑な変更はプログラムを作る<br class="gmail_msg">
<br class="gmail_msg">
以外にないと思います。<br class="gmail_msg">
<br class="gmail_msg">
</blockquote></div></div></div><span class="m_-2406968451302959433HOEnZb gmail_msg"><font color="#888888" class="gmail_msg"><br class="gmail_msg"><br clear="all" class="gmail_msg"></font></span></div></blockquote></div></div><div class="gmail_extra gmail_msg"><div class="gmail_quote gmail_msg"><blockquote class="gmail_quote gmail_msg" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div class="gmail_extra gmail_msg"><span class="m_-2406968451302959433HOEnZb gmail_msg"><font color="#888888" class="gmail_msg"><br class="gmail_msg">-- <br class="gmail_msg"><div class="m_-2406968451302959433m_2048121597692875590gmail_signature gmail_msg" data-smartmail="gmail_signature">平塚貞夫 &lt;<a href="mailto:sh2@pop01.odn.ne.jp" class="gmail_msg" target="_blank">sh2@pop01.odn.ne.jp</a>&gt;<br class="gmail_msg"></div>
</font></span></div></blockquote></div></div></blockquote></div></div>
</body></html>