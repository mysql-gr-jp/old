<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15769</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15768.html">[前]</a><a href="15770.html">[次]</a><a href="../list/15701-15800.html">[番号順一覧]</a><a href="../thread/15701-15800.html">[スレッド一覧]</a></p>
<p class="id">
mysql:15769
</p>
<div class="header">
<p>
From: "ochiai" &lt;"ochiai" &lt;s.ochiai@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 25 May 2012 12:36:08 +0900<br>
Subject: [mysql 15769] ネットワーク構成を変更したときのMySQLサーバへの影響（報告）<br>

</p>
</div>
<div class="body">
<pre>ネットワーク構成を変更したときのMySQLサーバへの影響（報告）

このメールは、私が経験し、混乱に陥ったが、原因と解決策が見つかったので、このメーリングリストでお世話になったお礼の情報提供という意味もありますが、私のメモとして残しておく意味で投稿します。


現象：
ネットワーク構成を変更したとき、Windows 7,Windows Server 2008 R2の何れのマシンもWindowsファイアウォールの設定が初期化されてしまいました。なお、何れのマシンも固定IPにしていました。
ちなみに、WindowsXPの場合は、上記2つのケースの何れの場合もWindowsファイアウォールの設定は維持されていました。

この結果、Windows 7,Windows Server 2008 R2で稼働していたMySQLサーバへクライアントから接続できなくなりました。

行ったネットワーク構成の変更は、下記の2つのケースです。
１）MySQLを稼働していたサーバマシン（Windows 7）が接続しているネットワーク上のルーターを入れ替え、その際、ルータのIPアドレスも変更
２）テスト環境のネットワークは以下で運用していたサーバマシン（Windows Server 
2008 R2）を、物理的にもIP構成も異なる実運用のネットワークに接続

確認した事項：
何れのケースでも、Windowsファイアウォール／MySQLの“受信の規則”がパブリックからローカルに変わってしまった。

解決策：
そこで当初設定していたパブリックに変更したところ、MySQLサーバへクライアントから接続できるようになりました。

当初は、Windowsファイアウォールの設定が勝手に変更されることがあるとは考えてなく、他の原因を探しましたが見当たらず、色々いじっているうちにMySQLが起動しなくなってしまい、パニックになりました。

教訓：
１）ネットワーク構成に影響がある作業を行った場合は、Windowsファイアウォール等の環境の再確認をする。
　　例）ルータ入れ替え、ルータ再起動、テスト環境から運用環境への設置、デフォルトゲートウェイ・DNSサーバ等のIP変更
２）その作業を実施する前に、バックアップとテーブルのイクスポートを行っておく。 


Windowsファイアウォールの設定が初期化される現象は、Windows Vista以降のOSで発生すると聞きましたが、マイクロソフト社の情報を探しても見つかりませんでした。（見つけ方が下手だから？）

落合 




</pre>
</div>
<p class="button"><a href="15768.html">[前]</a><a href="15770.html">[次]</a><a href="../list/15701-15800.html">[番号順一覧]</a><a href="../thread/15701-15800.html">[スレッド一覧]</a></p>


</body></html>