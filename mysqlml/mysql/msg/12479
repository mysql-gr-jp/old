<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12479</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="12478">[前]</a><a href="12480">[次]</a><a href="../list/12401-12500">[番号順一覧]</a><a href="../thread/12401-12500">[スレッド一覧]</a></p>
<p class="id">
mysql:12479
</p>
<div class="header">
<p>
From: Yasufumi Kinoshita &lt;Yasufumi Kinoshita &lt;kinoshita.yasufumi@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 18 Nov 2005 18:06:10 +0900<br>
Subject: [mysql 12479] Re: MySQL 4.1.15 vs 5.0.15           どっちが速い？<br>

</p>
</div>
<div class="body">
<pre>
木下です。

MySQL 5.0.x が遅いという方が多いですが、
私が使用している限りは遅くなった印象を全く受けません。

以前誰かが触れていたと思いますが、多分、原因は
innodb_thread_concurrency
というパラメータの設定にあると思います。

マニュアルによると
(<a href="http://dev.mysql.com/doc/refman/5.0/en/innodb-start.html">http://dev.mysql.com/doc/refman/5.0/en/innodb-start.html</a>)

「Starting with MySQL 5.0.8, the default value is 20,
　and concurrency checking will be disabled if the setting is greater than or equal to 20.」

とのことで、5.0.8からは20以上の値を設定することが無制限と同じことになり、
デフォルトが20（＝無制限）となっていることが分かります。

しかしこのパラメータ、現状ではちゃんとCPUの個数かその倍程度に設定してあげないと、
多くのセッション（100程度以上）で処理を行う際に非常に多くのＣＰＵ資源を消費し
遅くなってしまいます。（バグ？？よくわかりませんが。）

というわけで
innodb_thread_concurrency
は少なくとも 19以下に設定したほうが良いです。

-- 
木下  靖文

e-mail: kinoshita.yasufumi@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="12478">[前]</a><a href="12480">[次]</a><a href="../list/12401-12500">[番号順一覧]</a><a href="../thread/12401-12500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="12311">  12311 2005-10-28 00:25 [とみたまさひろ &lt;tomm] MySQL 4.1.15 vs 5.0.15  どっちが速い？  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12312">  12312 2005-10-28 10:26 ┗[Koji Fukui &lt;foxtrot@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12313">  12313 2005-10-28 11:01 　┣[&quot;Shuichi Tamagawa&quot; &lt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12469">  12469 2005-11-17 16:19 　┗[Koji Fukui &lt;foxtrot@]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12471">  12471 2005-11-17 16:44 　　┗[&quot;Ryuichiro Munechika]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12477">  12477 2005-11-18 14:50 　　　┗[Koji Fukui &lt;foxtrot@]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12478">  12478 2005-11-18 17:39 　　　　┗[Koji Fukui &lt;foxtrot@]                               </a></span>
<span class="current">-&gt;&nbsp;<a href="12479">  12479 2005-11-18 18:06 　　　　　┗[Yasufumi Kinoshita &lt;]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12480">  12480 2005-11-18 19:35 　　　　　　┗[Hiroshi Takenaka &lt;pi]                           </a></span>
</pre>
</body>
</html>
