<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8052</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="8051.html">[前]</a><a href="8053.html">[次]</a><a href="../list/8001-8100.html">[番号順一覧]</a><a href="../thread/8001-8100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8052
</p>
<div class="header">
<p>
From: nisi &lt;nisi &lt;lemo@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 17 Jul 2003 18:57:21 +0900<br>
Subject: [mysql 08052] Re: [mysql 08049] CHAR 型フィールドの一部文字を変更したい<br>

</p>
</div>
<div class="body">
<pre>

 nisi です

<span class="quote1">&gt; ならないのですが、ドメインをID化しているのなら問題ないのですが、</span>
<span class="quote1">&gt; ごく少数のサイトで、CHAR型でxxx@xxxxxxxxxxなどと、そのまま入れて運営しており</span>
<span class="quote1">&gt; ます。</span>

　私は多数そうしてる（そのまま入れる）ですが、もしかして
　「ドメインをID化」するほうが一般的なのでしょうか？


　本題、SQLだけでどうやるかわかんなかったんで・・・
　例えばRuby使ってやるとすれば、

-----
$server = &quot;server&quot; # サーバー
$user   = &quot;user&quot;   # ユーザー
$pass   = &quot;pass&quot;   # パスワード
$db     = &quot;db&quot;     # ＤＢ名

$table  = &quot;table&quot;  # 変更したいテーブル名
$col    = &quot;col&quot;    # 変更したいカラム名

require &quot;mysql&quot;

mydb = Mysql.new($server,$user,$pass,$db)

mydb.query(&quot;SELECT #{$col} FROM #{$table} ;&quot;).each_hash do |myRw|
  if myRw[$col] then
    chs = myRw[$col].sub(/^(.+)@jp-([a-z]).ne.jp/) {
      &quot;#{$1}@#{$2}.vodafone.ne.jp&quot; }
    mydb.query(&quot;UPDATE #{$table} SET #{$col} = '#{chs}' WHERE #{$col} = '#{myRw[$col]}' ;&quot;)
  end
end
-----

　みたいな感じですみますかね・・・

# テストなし/動作保障なし/雰囲気　笑

-- 
nisi &lt;lemo@xxxxxxxxxx&gt;
<a href="http://plantl.org/l/">http://plantl.org/l/</a>


</pre>
</div>
<p class="button"><a href="8051.html">[前]</a><a href="8053.html">[次]</a><a href="../list/8001-8100.html">[番号順一覧]</a><a href="../thread/8001-8100.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8049.html">   8049 2003-07-17 17:25 [&lt;lavlav@xxxxxxxxxx&gt; ] CHAR 型フィールドの一部文字を変更したい </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8050.html">   8050 2003-07-17 18:06 ┣[IWASAKI Dai &lt;dai@xxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8051.html">   8051 2003-07-17 18:07 ┣[Youichi Iwakiri &lt;yiw]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8053.html">   8053 2003-07-17 19:30 ┃┗[とみたまさひろ &lt;tomm]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8055.html">   8055 2003-07-17 21:55 ┃　┣[&lt;lavlav@xxxxxxxxxx&gt; ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8394.html">   8394 2003-11-14 13:24 ┃　┗[HOLA &lt;hola@xxxxxxxxx]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="8052.html">   8052 2003-07-17 18:57 ┗[nisi &lt;lemo@xxxxxxxxx] Re: [mysql 08049] CHAR 型フィールドの一部文字を変更したい</a></span>
</pre>
</body>
</html>
