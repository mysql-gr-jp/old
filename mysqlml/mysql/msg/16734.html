<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:16734</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="16733.html">[前]</a><a href="16735.html">[次]</a><a href="../list/16701-16800.html">[番号順一覧]</a><a href="../thread/16701-16800.html">[スレッド一覧]</a></p>
<p class="id">
mysql:16734
</p>
<div class="header">
<p>
From: 東　兼充 &lt;東　兼充 &lt;kanemitsu@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 24 Dec 2024 17:24:19 +0900 (JST)<br>
Subject: [mysql 16734] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。<br>

</p>
</div>
<div class="body">
<pre>皆様コメントありがとうございます。

データーベースにはつながるようです。
ためしに
echo で出力させると、その部分は出力できました。
おなじ処理を
少し後の行でおこなうとよみこめなくなり
データベースから切断されてしまうようです。

ためしに
mysqli_connect の第四引数にdbnameいれて、mysqli_select_db やめるとどうなりますか。
をやってみましたが駄目でした。

ちなみに
プログラムは21年前に作成したものです。

文字コートが何度か変わったりしましたが、なんとか修正して対応してきました。
現在は
<a href="https://higashi.us/yoyaku/">https://higashi.us/yoyaku/</a>
で動いています。
移動先は
<a href="https://higashi.us.2024121823441311931890.onamaeweb.jp/yoyaku/">https://higashi.us.2024121823441311931890.onamaeweb.jp/yoyaku/</a>
で作成しています。

データベース接続がきれるような操作が途中にはいっているような感じです。

原因がよくわからず苦慮しています。

東


<span class="quote1">&gt; ----- Original Message -----
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; From: "東　兼充" &lt;kanemitsu@xxxxxxxxxx&gt;
</span>
<span class="quote1">&gt; To: "ml@xxxxxxxxxx" &lt;ml@xxxxxxxxxx&gt;
</span>
<span class="quote1">&gt; Date: 2024/12/23 月 17:37
</span>
<span class="quote1">&gt; Subject: <a href="16729.html">[mysql 16729]</a> 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; 素人でmysqlを使用しています。
</span>
<span class="quote1">&gt; サーバーを契約している会社から閉鎖の連絡がきました。
</span>
<span class="quote1">&gt; 仕方なくお名前.comのサーバーへ移植作業したところ
</span>
<span class="quote1">&gt; PHPがバージョン7.0以上しか選択できず、
</span>
<span class="quote1">&gt; バージョンを7.0にしました。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; すると
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; mysqlコマンドが使用できずmysqliでしか反応しません。
</span>
<span class="quote1">&gt; データーベースの接続法もかわっており
</span>
<span class="quote1">&gt; ネットで調べた方法をためしました。
</span>
<span class="quote1">&gt; しかし
</span>
<span class="quote1">&gt; 途中までは、うまくいくのですが
</span>
<span class="quote1">&gt; あとは何度修正してもエラーがでます。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; $link = mysqli_connect("$DB_SERVER","$DB_LOGIN", "$DB_PASSWORD");
</span>
<span class="quote1">&gt; mysqli_select_db($link,$DB); 
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; までは動くのですが
</span>
<span class="quote1">&gt; あとが
</span>
<span class="quote1">&gt; $result_kyuusin=mysqli_query($link,"select * from kyuusin 
</span>
<span class="quote1">&gt; 			where kyuusinbi = '$yoyakubi' and item='$item'");
</span>
<span class="quote1">&gt; で
</span>
<span class="quote1">&gt; Warning: mysqli_query() expects parameter 1 to be mysqli, string given in /home/r0792529/public_html/higashi.us/yoyaku/index.php on line 377
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; とエラーがでて対応ができません。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; かなり前からPHPのバージョンがわったときに、皆様対応されているようですが、
</span>
<span class="quote1">&gt; 当方すっと同じレンタルサーバーしようしてきましたので対応せずに正常に動いたいました。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; 今回突然のサーバー廃業で対応せざるをえなくなり、困っています。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; なにせ素人の初心者です。
</span>
<span class="quote1">&gt; なにかアドバイスいだだければありがたいです。
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; 東
</span>
<span class="quote1">&gt; 
</span>
<span class="quote1">&gt; 
</span>


</pre>
</div>
<p class="button"><a href="16733.html">[前]</a><a href="16735.html">[次]</a><a href="../list/16701-16800.html">[番号順一覧]</a><a href="../thread/16701-16800.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="16729.html">  16729 2024-12-23 17:36 [東　兼充 &lt;kanemitsu@] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16730.html">  16730 2024-12-23 19:41 ┣[&lt;naturelovers@xxxxxx] Re: [mysql 16729] 契約していたサーバーが廃業予定 別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16731.html">  16731 2024-12-23 22:22 ┣[NISHIMURA Yutaka &lt;is]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16732.html">  16732 2024-12-23 23:44 ┣[Takahiro Kambe &lt;taca]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16733.html">@ 16733 2024-12-24 00:17 ┣["Noguchi, Shinichi" ] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span class="current">-&gt;&nbsp;<a href="16734.html">  16734 2024-12-24 17:24 ┗[東　兼充 &lt;kanemitsu@] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16735.html">  16735 2024-12-24 17:45 　┗[KOYAMA Tetsuji &lt;koya] Re: [mysql 16734] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16736.html">  16736 2024-12-24 21:10 　　┗[東　兼充 &lt;kanemitsu@] Re: [mysql 16735] Re: [mysql 16734] Re: [mysql 16729] 契約していたサーバーが廃業予定　別のサーバーに移植しようしたらPHPが7.0以上でmysqlがmysqliでないと動かず。</a></span>
</pre>


</body></html>