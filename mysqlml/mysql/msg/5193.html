<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5193</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="5192.html">[前]</a><a href="5194.html">[次]</a><a href="../list/5101-5200.html">[番号順一覧]</a><a href="../thread/5101-5200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:5193
</p>
<div class="header">
<p>
From: 井田昭一 &lt;井田昭一 &lt;sho@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 24 Feb 2002 17:13:47 +0900<br>
Subject: [mysql 05193] Re: php+mysql での日本語検索<br>

</p>
</div>
<div class="body">
<pre>井田昭一です

とみたさん返事をありがとうございます。

<span class="quote2">&gt; &gt; 　Mysqlのマニュアルによると</span>
<span class="quote2">&gt; &gt; <a href="http://www.softagency.co.jp/mysql/Manual/mysql-3.23.47/">http://www.softagency.co.jp/mysql/Manual/mysql-3.23.47/</a></span>
<span class="quote2">&gt; &gt;                      manual.ja_MySQL_Optimization.html#MySQL_indexes</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; select * from JYUSHO where SHI like "%長野%" MACHI like "%信濃%";</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; 　上記ではindexが使われないとありましたので、遅いのだと思いますが、</span>
<span class="quote2">&gt; &gt; この検索を早くする方法をご存知の方ご教授願えないでしょうか。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; # 本題と関係ないと思いますが、where の条件と条件の間は「and」か「or」</span>
<span class="quote1">&gt; # が必要じゃないかと思うのですが…。</span>

ご指摘の「and」はコピーしたときに抜けたみたいです。

<span class="quote1">&gt; とりあえず、インデックスを使わないで検索を速くする方法としては、</span>
<span class="quote1">&gt; 「varchar を使わずに char を使ってみる」くらいしか思いつきません。</span>

どちらの方法も行ってみたのですが、あまり効果がありませんでした。
この数日いろいろと考えてみて、phpの方で検索項目を作らせることにしました。
これにより、

select * from JYUSHO where SHI like "%長野%" MACHI like "%信濃%";

は

select * from JYUSHO where SHI like "長野市" and MACHI like "信濃%";

のようにして後はPHPで処理をさせるようにしましたら、
劇的に早くなりました。

ありがとうございました。

_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/
　
　Name    : Shoichi Ida 井田　昭一
　E-Mail  : sho@xxxxxxxxxx	

_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/

2002/02/24 12:18:25


</pre>
</div>
<p class="button"><a href="5192.html">[前]</a><a href="5194.html">[次]</a><a href="../list/5101-5200.html">[番号順一覧]</a><a href="../thread/5101-5200.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="5186.html">   5186 2002-02-21 16:47 [井田昭一 &lt;sho@xxxxxx] php+mysql での日本語検索                </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5192.html">   5192 2002-02-24 09:26 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="5193.html">   5193 2002-02-24 17:13 　┗[井田昭一 &lt;sho@xxxxxx]                                     </a></span>
</pre>


</body></html>