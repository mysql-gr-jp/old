<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3567</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="3566.html">[前]</a><a href="3568.html">[次]</a><a href="../list/3501-3600.html">[番号順一覧]</a><a href="../thread/3501-3600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:3567
</p>
<div class="header">
<p>
From: Tybalt of Capulet &lt;Tybalt of Capulet &lt;ice-man@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 27 Apr 2001 17:41:29 +0900<br>
Subject: [mysql 03567] SLELECT 文の作成で悩んでます<br>

</p>
</div>
<div class="body">
<pre>神崎です。

現在お店の検索サイトを構築しています。
検索項目の中に「今日開いているお店」という項目がありその
SELECTでとても悩んでいます。
テーブルは下記のように休日用テーブルが存在します。
holidaytblは各お店の定休日が曜日や日にち指定で入っています。

まず今日が5/3(木)だったとします。
するとholidayが「木」以外かつdate_fからdate_tの間に
2001/5/3が入っていないデータをもってこなければなりません。
しかし00001の顧客は「月」も定休日なので「木」以外のお店を検索しても
検索結果として入ってきてしまいます。
さらに5/3を含んでないというSELECT文が思い浮かびません。
上記の事柄を満たすSQL文が思いつく方はいらっしゃいませんでしょうか？
「木」を含んでるデータや5/3が入っているSQL文は思いつくのですが、
その逆が思いつきません。

下のデータですと00003の顧客のみがヒットして欲しいわけです。

テーブル名：holidaytbl
顧客番号  ：custno VARCHAR(5) -&gt; PK(プライマリキー)
定休日    ：holiday VARCHAR(30) -&gt; PK
休日始め  ：date_f DATE
休日終わり：date_t DATE

&lt;holidaytbl&gt;
<span class="quote1">|custno | holiday | date_f | date_t |</span>
<span class="quote1">|-------|---------|--------|--------|</span>
<span class="quote1">| 00001 |   月    |        |        |</span>
<span class="quote1">| 00001 |   木    |        |        |</span>
<span class="quote1">| 00002 |   GW    |2001/5/1|2001/5/6|</span>
<span class="quote1">| 00003 |   水    |        |        |</span>

何卒お知恵をお貸しいただけませんでしょうか？
よろしくお願いいたします。


_______________________________R_y_u_____
神崎 隆
Mail：ice-man@xxxxxxxxxx
_____K_a_n_z_a_k_i________________________


</pre>
</div>
<p class="button"><a href="3566.html">[前]</a><a href="3568.html">[次]</a><a href="../list/3501-3600.html">[番号順一覧]</a><a href="../thread/3501-3600.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="3567.html">   3567 2001-04-27 17:41 [Tybalt of Capulet &lt;i] SLELECT 文の作成で悩んでます            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3569.html">   3569 2001-04-27 19:47 ┣[sasaki yosito &lt;yosit]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3570.html">   3570 2001-04-27 19:53 ┣[sasaki yosito &lt;yosit]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3571.html">   3571 2001-04-27 20:40 ┗[UNO Shintaro &lt;uno@xx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3572.html">   3572 2001-04-28 00:09 　┗[ice-man &lt;ice-man@xxx]                                     </a></span>
</pre>


</body></html>