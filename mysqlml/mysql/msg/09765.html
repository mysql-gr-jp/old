<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9765</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="9764.html">[前]</a><a href="9766.html">[次]</a><a href="../list/9701-9800.html">[番号順一覧]</a><a href="../thread/9701-9800.html">[スレッド一覧]</a></p>
<p class="id">
mysql:9765
</p>
<div class="header">
<p>
From: 平松 幸治 &lt;平松 幸治 &lt;kouji@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 03 Jul 2004 14:31:51 +0900<br>
Subject: [mysql 09765] SELECT文でCOUNTさせるとき2つのを合計させる方法<br>

</p>
</div>
<div class="body">
<pre>こんにちは　平松です

下記のようなテーブルがあって

CREATE TABLE `record` (
  `rec_00` int(4) NOT NULL auto_increment,	//ID
  `rec_01` varchar(40) default NULL,		//作業場所
  `rec_02` date default NULL,			//作業日
  `rec_03` varchar(40) default NULL,		//作業者
  `rec_04` varchar(40) default NULL,		//作業内容詳細A
  `rec_05` int(6) default NULL,			//作業内容詳細B
  `rec_06` text,				//作業内容詳細C
  `rec_07` varchar(50) default NULL,		//作業内容 (A or B)
  `rec_08` varchar(50) default NULL,		//作業内容詳細D
  `rec_09` time default NULL,			//作業内容詳細E
  `rec_10` varchar(50) default NULL,		//作業内容詳細F
  `rec_11` int(6) default NULL,			//作業内容詳細G
  `rec_12` int(6) default NULL,			//作業内容詳細H
  KEY `rec_00` (`rec_00`)
)


rec_07カラムの　Aの作業をしたら　2ポイント
rec_07カラムの　Bの作業をしたら　1ポイント

を　作業者に与えるとします

その時

だれが月間で一番作業をしたか　把握するのに

Aの作業だけで順位をとるのは
SELECT rec_03 ,COUNT(rec_07) AS rec_07 FROM `record` WHERE rec_02 LIKE '2004-07%' AND rec_07 = 'A' GROUP BY rec_03 ORDER BY rec_07 DESC
Bの作業だけで順位をとるのは
SELECT rec_03 ,COUNT(rec_07) AS rec_07 FROM `record` WHERE rec_02 LIKE '2004-07%' AND rec_07 = 'B' GROUP BY rec_03 ORDER BY rec_07 DESC

と取得できているのですが

A*2とBの作業を合計したものを取得し、順位をつけたいのですが MySQLで可能でしょうか？

環境は
LINUX	PHP 4.3.7 + MySQL 3.23.58 を　使用しています

平松幸治


</pre>
</div>
<p class="button"><a href="9764.html">[前]</a><a href="9766.html">[次]</a><a href="../list/9701-9800.html">[番号順一覧]</a><a href="../thread/9701-9800.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="9765.html">   9765 2004-07-03 14:31 [平松 幸治 &lt;kouji@xxx] SELECT文でCOUNTさせるとき2つのを合計させる方法</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9766.html">   9766 2004-07-03 15:05 ┗[ML account &lt;ml@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9767.html">   9767 2004-07-03 15:21 　┗[平松 幸治 &lt;kouji@xxx]                                     </a></span>
</pre>


</body></html>