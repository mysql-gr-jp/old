<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:6943</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="6942.html">[前]</a><a href="6944.html">[次]</a><a href="../list/6901-7000.html">[番号順一覧]</a><a href="../thread/6901-7000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:6943
</p>
<div class="header">
<p>
From: アシカ &lt;アシカ &lt;asika@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 5 Feb 2003 02:41:04 +0900<br>
Subject: [mysql 06943] Re: mysqlimport の処理結果について<br>

</p>
</div>
<div class="body">
<pre>

----- Original Message -----
From: &quot;Jun Akita&quot; &lt;j-akita@xxxxxxxxxx&gt;
To: &lt;ml@xxxxxxxxxx&gt;
Sent: Tuesday, February 04, 2003 11:25 PM
Subject: <a href="06942.html">[mysql 06942]</a> mysqlimport の処理結果について


<span class="quote1">&gt; こんばんは。</span>
<span class="quote1">&gt; 秋田＠草加市と申します。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; mysqlimport（または load data infile）について質問があります。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 下記のような列a, b にて主キーとなるテーブルがあります。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; -- create table 文 -------------</span>
<span class="quote1">&gt; create table test_tbl (</span>
<span class="quote1">&gt; a char(20) not null,</span>
<span class="quote1">&gt; b int not null,</span>
<span class="quote1">&gt; c char(10) not null,</span>
<span class="quote1">&gt; d int not null,</span>
<span class="quote1">&gt; primary key (a, b)</span>
<span class="quote1">&gt; );</span>
<span class="quote1">&gt; --------------------------------</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; また、このテーブルには下記のデータが入っています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; -- テーブル内容 ----------------</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; +---+---+----+----+</span>
<span class="quote2">&gt; | a | b | c  | d  |</span>
<span class="quote1">&gt; +---+---+----+----+</span>
<span class="quote2">&gt; | a | 1 | aa | 11 |</span>
<span class="quote2">&gt; | b | 2 | bb | 22 |</span>
<span class="quote2">&gt; | c | 3 | cc | 33 |</span>
<span class="quote2">&gt; | d | 4 | dd | 44 |</span>
<span class="quote2">&gt; | e | 5 | ee | 55 |</span>
<span class="quote1">&gt; +---+---+----+----+</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; --------------------------------</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; この状況で下記のテキストファイルをインポートした際、重複する主キーは無視</span>
<span class="quote1">&gt; させたいと考えています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; -- テキストファイル ------------</span>
<span class="quote1">&gt; f 6 ff 66</span>
<span class="quote1">&gt; b 2 bbb 222</span>
<span class="quote1">&gt; g 7 gg 77</span>
<span class="quote1">&gt; h 8 hh 88</span>
<span class="quote1">&gt; --------------------------------</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 従ってインポートする際には</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; $ mysqlimport -i -uUSERNAME -pPASSWORD test_db test_tbl.txt</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; として実行し、希望通り「b 2 bbb 222」のデータのみ挿入さ</span>
<span class="quote1">&gt; れない（Skipped）状況です。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ・・・というところで質問なのですが、上記 mysqlimport を実行した際の詳細</span>
<span class="quote1">&gt; なログが欲しいと思っています</span>
<span class="quote1">&gt; 具体的には mysqlimport 処理結果の Skipped された列の情報を取りたいと思っ</span>
<span class="quote1">&gt; ています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; -- mysqlimport 処理結果 ------------------------------------------------</span>
<span class="quote1">&gt; test_db.test_tbl: Records: 4  Deleted: 0  Skipped: 1  Warnings: 0</span>
<span class="quote1">&gt; ------------------------------------------------------------------------</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; -i 指定をせずに実行した場合は「b 2 bbb 222」でエラーが</span>
<span class="quote1">&gt; 発生したことがわかりますが、そこで処理が中断されてしまうので困っています。</span>
<span class="quote1">&gt; -f 指定をしてもエラー発生部分で終了してしまいましたし、-v 指定をしても欲</span>
<span class="quote1">&gt; しい情報は出力されませんでした。</span>
<span class="quote1">&gt; また、mysql のエラーログにも出力されていませんでした。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; リファレンス（<a href="http://web.kuicr.kyoto-u.ac.jp/manual/mysql/manual.ja_m">http://web.kuicr.kyoto-u.ac.jp/manual/mysql/manual.ja_m</a></span>
<span class="quote1">&gt; ysqlimport.html#mysqlimport）を確認し、ML過去ログ検索もしましたが該当す</span>
<span class="quote1">&gt; るような情報がみつかりませんでした。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; #ぐぐっても見つからないのですが、、、あまり需要はないのでしょうか？</span>
<span class="quote1">&gt; #それとも私が見落としているだけ？？？</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; もしご存じの方がいらっしゃいましたら教えていただければと思います。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; なお環境は下記の通りです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ------------------------------------------------------------------------</span>
<span class="quote1">&gt; OS: MIRACLE LINUX V2.1 Standard</span>
<span class="quote1">&gt; MySQL: 3.23.51</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; $ uname -a</span>
<span class="quote1">&gt; Linux xxx.xxx.xxx 2.4.9-31.22ml #1 Wed Jul 3 22:12:44 JST 2002 i686</span>
unknown
<span class="quote1">&gt; $ mysqlbug</span>
<span class="quote1">&gt; Finding system information for a MySQL bug report</span>
<span class="quote1">&gt; test -x</span>
<span class="quote1">&gt; Could not find a text editor. (tried emacs)</span>
<span class="quote1">&gt; You can change editor by setting the environment variable VISUAL.</span>
<span class="quote1">&gt; If your shell is a bourne shell (sh) do</span>
<span class="quote1">&gt; VISUAL=your_editors_name; export VISUAL</span>
<span class="quote1">&gt; If your shell is a C shell (csh) do</span>
<span class="quote1">&gt; setenv VISUAL your_editors_name</span>
<span class="quote1">&gt; $ ldd /usr/local/mysql/bin/mysql</span>
<span class="quote1">&gt;         libncurses.so.5 =&gt; /usr/lib/libncurses.so.5 (0x4001e000)</span>
<span class="quote1">&gt;         libmysqlclient.so.10 =&gt;</span>
/usr/local/mysql/lib/mysql/libmysqlclient.so.10
<span class="quote1">&gt; (0x40060000)</span>
<span class="quote1">&gt;         libz.so.1 =&gt; /usr/lib/libz.so.1 (0x40099000)</span>
<span class="quote1">&gt;         libcrypt.so.1 =&gt; /lib/libcrypt.so.1 (0x400a7000)</span>
<span class="quote1">&gt;         libnsl.so.1 =&gt; /lib/libnsl.so.1 (0x400d4000)</span>
<span class="quote1">&gt;         libm.so.6 =&gt; /lib/i686/libm.so.6 (0x400ea000)</span>
<span class="quote1">&gt;         libstdc++-libc6.2-2.so.3 =&gt; /usr/lib/libstdc++-libc6.2-2.so.3</span>
(0x4010d00
<span class="quote1">&gt; 0)</span>
<span class="quote1">&gt;         libc.so.6 =&gt; /lib/i686/libc.so.6 (0x40155000)</span>
<span class="quote1">&gt;         /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x40000000)</span>
<span class="quote1">&gt; $ ldd /usr/local/mysql/lib/mysql/libmysqlclient.so</span>
<span class="quote1">&gt;         libz.so.1 =&gt; /usr/lib/libz.so.1 (0x40040000)</span>
<span class="quote1">&gt;         libcrypt.so.1 =&gt; /lib/libcrypt.so.1 (0x4004e000)</span>
<span class="quote1">&gt;         libnsl.so.1 =&gt; /lib/libnsl.so.1 (0x4007c000)</span>
<span class="quote1">&gt;         libm.so.6 =&gt; /lib/i686/libm.so.6 (0x40092000)</span>
<span class="quote1">&gt;         libc.so.6 =&gt; /lib/i686/libc.so.6 (0x400b5000)</span>
<span class="quote1">&gt;         /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x80000000)</span>
<span class="quote1">&gt; ------------------------------------------------------------------------</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; よろしくお願いします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ---</span>
<span class="quote1">&gt; あきた じゅん（j-akita@xxxxxxxxxx）</span>
<span class="quote1">&gt;</span>


</pre>
</div>
<p class="button"><a href="6942.html">[前]</a><a href="6944.html">[次]</a><a href="../list/6901-7000.html">[番号順一覧]</a><a href="../thread/6901-7000.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="6942.html">   6942 2003-02-04 23:25 [&quot;Jun Akita&quot; &lt;j-akita] mysqlimport の処理結果について          </a></span>
<span class="current">-&gt;&nbsp;<a href="6943.html">   6943 2003-02-05 02:41 ┣[アシカ &lt;asika@xxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6946.html">   6946 2003-02-06 11:14 ┗[Takeyuki Miyagawa &lt;m]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6947.html">   6947 2003-02-06 15:19 　┗[&quot;Jun Akita&quot; &lt;j-akita]                                     </a></span>
</pre>
</body>
</html>
