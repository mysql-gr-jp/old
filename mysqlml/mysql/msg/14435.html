<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14435</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14434.html">[前]</a><a href="14436.html">[次]</a><a href="../list/14401-14500.html">[番号順一覧]</a><a href="../thread/14401-14500.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14435
</p>
<div class="header">
<p>
From: sakurai yuichi &lt;sakurai yuichi &lt;yu1sk@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 15 Apr 2008 16:51:50 +0900<br>
Subject: [mysql 14435] バージョンアップによる日本語文字化けからの復旧（操作可能範囲が制限された環境下での）<br>

</p>
</div>
<div class="body">
<pre>
はじめまして、桜井と申します。

＜経験＞
・MySQLについては、phpmyadminにある機能を使った操作のみ経験があり、SQLの
知識はありません。
・DB管理システムは1990年代後半にMS ACCESSとFile Maker、1990年代初めにIBM
等の汎用機のものを使ったぐらいです。


＜助言いただきたい問題＞
ホスティングサービスでXOOPS Cubeを使ったサイトを動かしていたのですが、ホ
スティング業者が今年2月に利用環境（PHPおよびMySQL）をバージョンアップし
たところ、MySQL内の日本語データが文字化けを起こしてしまいました。ホス
ティング業者に抗議したところ、「XOOPS側の問題」という返答が来たのです
が、文字化け発生後に日本語コンテンツをXOOPS経由で新規登録するときちんと
表示されます。

文字化けした日本語データは、phpmyadminからエクスポートして、テキストエ
ディタ上で文字コードを色々変えてみても修復ができませんでした。もちろん
XOOPS側の環境でDBアクセス時の文字コードを決め打ちしてもだめでした。

XOOPSへの表示はともかく、テキストエディタ上でもウェブブラウザ上でも構わ
ないので、日本語のデータを判読可能な状態にしたいのですが良い方法はないで
しょうか？レンタルサーバのユーザとして、DBへのアクセスはphpmyadmin
(2.8.2.4)もしくはphpのプログラムを作成して行うしか方法はありません。ま
た、DBの環境自体の変更はできないという条件なのですが、ご助言いただければ
幸いです。（ホスティング業者の誠実な対応は今のところ望めません…）


＜サーバ環境の変化＞

旧：PHP　v.4.3.9　MySQL　4.1.20 (クライアントバージョン)
※サーバ側の旧バージョン名は不明
MySQL の文字セット:  UTF-8 Unicode (utf8)
文字セットの照合順序：utf8_general_ci
↓
新：PHP　v.5.1.6　MySQL　5.0.27 (クライアントバージョン)
※サーバ側も5.0.27
MySQL の文字セット:  UTF-8 Unicode (utf8)
文字セットの照合順序：latin-1_bin
※その後照合順序をujisやutf-8等に変更して見ましたが、だめでした。


＜文字化けしたデータのテーブル＞
照合順序：　utf8_general_ci


＜試して見たこと＞
MySQLおよびXOOPSのユーザ会のFAQおよびメーリングリスト、Googleでも類似症
例への対処方法を調べて見たのですが、サービスの仕様上手が出せないMySQLと
PHP環境自体の変更以外の方法、具体的には以下の方法を試して見ましたがダメ
でした。

１．phpmyadminで文字セットの照合順序を変更する。
２．XOOPSからDBにアクセスする際の文字セットを指定する。
３．.htaccessで表示する文字セットを指定する。
４．他の（正しく日本語が表示できるサイトがある環境）への移植後、
phpmyadminでのデータ表示およびXOOPSでの表示


＜ご参考＞
同じホスティング業者には別ドメインでもう一件借りていたのですがこちらは
XOOPS側の環境が文字化けサイトと同じでもきちんと表示されました。
phpmyadminでチェックしたところ、やはり（同じホスティングサービスにもかか
わらず）環境が違っていました。

文字化けサイト
MySQL - 5.0.27
phpMyAdmin - 2.8.2.4
MySQL クライアントバージョン: 5.0.27

問題なしサイト
MySQL - 5.0.51a-community
phpMyAdmin - 2.8.2.4
MySQL クライアントバージョン: 4.1.20


何卒よろしくお願い致します。

</pre>
</div>
<p class="button"><a href="14434.html">[前]</a><a href="14436.html">[次]</a><a href="../list/14401-14500.html">[番号順一覧]</a><a href="../thread/14401-14500.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="14435.html">  14435 2008-04-15 16:51 [sakurai yuichi &lt;yu1s] バージョンアップによる日本語文字化けからの復旧（操作可能範囲が制限された環境下での）</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14436.html">  14436 2008-04-15 23:21 ┗[&quot;Yoshio Kawano&quot; &lt;yka]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14438.html">  14438 2008-04-16 12:14 　┗[sakurai yuichi &lt;yu1s]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14439.html">  14439 2008-04-16 14:31 　　┣[&quot;Yoshio Kawano&quot; &lt;yka]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14441.html">  14441 2008-04-16 16:09 　　┃┗[sakurai yuichi &lt;yu1s]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14440.html">  14440 2008-04-16 15:30 　　┗[deppsea &lt;deepsea200x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14442.html">  14442 2008-04-16 20:58 　　　┗[sakurai yuichi &lt;yu1s]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14443.html">  14443 2008-04-16 21:02 　　　　┗[&quot;TOYOSHIMA,Masayuki&quot;]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14444.html">  14444 2008-04-17 00:04 　　　　　┗[sakurai yuichi &lt;yu1s]                             </a></span>
</pre>
</body>
</html>
