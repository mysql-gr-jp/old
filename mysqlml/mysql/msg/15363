<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15363</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15362">[前]</a><a href="15364">[次]</a><a href="../list/15301-15400">[番号順一覧]</a><a href="../thread/15301-15400">[スレッド一覧]</a></p>
<p class="id">
mysql:15363
</p>
<div class="header">
<p>
From: &quot;ktsa5236@xxxxxxxxxx&quot; &lt;&quot;ktsa5236@xxxxxxxxxx&quot; &lt;ktsa5236@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 11 Aug 2010 15:49:19 +0900<br>
Subject: [mysql 15363] rootユーザが消えた?<br>

</p>
</div>
<div class="body">
<pre>
初めまして。いつもお世話になっています。ktsa5236と申します。

表題の件の通りなのですが、
MySQLを運用中に rootユーザ（root@localhost ）がいつの間にか消えてしまいました。

手動では、決して消していません。

具体的には、停電によりUPSよりOS(Windows2003Server)をShutdownコマンド
によりシャットダウン、停電復旧後、再起動後にrootユーザが消えてしまい、
アプリ側からビューの参照ができずに気付いたという状況です。

UPSよりOSをシャットダウンするときは、特にMySQLを終了させずに
OSのみシャットダウンさせています。

停電シャットダウンは、今年に入ってからも数回行っていますが、
今回の事態は初めてです。

ただし、開発環境サーバー
 OS: Windows XP (SP2)
 MySQL: 5.0.4-community-nt-log
では、一度だけ起きたことがあります。どのタイミングで起きたかは、不明です。

どなたか、似たような状況に遭遇された方はいらっしゃいますでしょうか？

あるいは、遭遇されなくてもこの件に関して原因として考えられること、
確かめるべきことがあれば、ご教示頂けませんでしょうか？

環境とシャットダウン−再起動までのMySQLのホスト名.err ログを以下に記述しておきます。

[環境]
OS: Windows Server 2003 R2 Standard Edition SP2 (32bit 英語版)
メモリ2G
RAID6構成
MySQL: 5.1.30-community-log
MySQLはWindowsサービスとして登録されている。
(Windows起動時に自動起動)
レプリケーションマスターとして稼動。
管理用にVNCサーバ常駐。

状況
 電気系統メンテナンスのため、WindowsタスクにてShutdownコマンドを実行。
 再起動後、&quot;root@localhost&quot; が消失。
 なお、MySQLのログ, Windowsのイベントビューアにはエラーの記録はされていない。

[MySQLのホスト名.err ログ] （シャットダウンから再起動までを抜粋）

100808  8:30:06 [Note] D:\MySQL\bin\mysqld: Normal shutdown
100808  8:30:07 [Note] Event Scheduler: Purging the queue. 0 events
100808  8:30:07  InnoDB: Starting shutdown...
100808  8:30:10  InnoDB: Shutdown completed; log sequence number 13
972418764
100808  8:30:10 [Note] D:\MySQL\bin\mysqld: Shutdown complete
100808 20:05:01  InnoDB: Started; log sequence number 13 972418764
100808 20:05:01 [Note] Event Scheduler: Loaded 0 events
100808 20:05:01 [Note] D:\MySQL\bin\mysqld: ready for connections.
Version: '5.1.30-community-log'  socket: ''  port: 3306  MySQL Community
Server (GPL)


 宜しくお願いいたします。


</pre>
</div>
<div class="attach">
<h3 class="attachtitle">添付ファイル</h3>
<ul>
<li><a href="http://www.mysql.gr.jp/mysqlml/mysql/msg/15363/0/"> [text/html]</a>
</ul>
</div>
<p class="button"><a href="15362">[前]</a><a href="15364">[次]</a><a href="../list/15301-15400">[番号順一覧]</a><a href="../thread/15301-15400">[スレッド一覧]</a></p>
</body>
</html>
