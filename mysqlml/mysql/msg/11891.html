<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11891</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="11890.html">[Á°]</a><a href="11892.html">[¼¡]</a><a href="../list/11801-11900.html">[ÈÖ¹æ½ç°ìÍ÷]</a><a href="../thread/11801-11900.html">[¥¹¥ì¥Ã¥É°ìÍ÷]</a></p>
<p class="id">
mysql:11891
</p>
<div class="header">
<p>
From: &quot;T.Sasaki&quot; &lt;&quot;T.Sasaki&quot; &lt;papasan2000@xxxxxxxxxx&gt;&gt;<br>
Date: 5 Aug 2005 12:44:18 +0900<br>
Subject: [mysql 11891] Re: REPAIR TABLE¤Ç¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ<br>

</p>
</div>
<div class="body">
<pre>
º´¡¹ÌÚ¤Ç¤¹¡£
È¾¤ÐÆÈ¤ê¸À¤Ç¤¹¡¦¡¦¡¦¡£

<span class="quote1">&gt; Ä´¤Ù¤Æ¤Ï¤¤¤ë¤Î¤Ç¤¹¤¬¡¢¤É¤ÎÀßÄê¤¬±Æ¶Á¤¹¤ë¤Î¤«¤òÁ´ÉôÄÉ¤¤¤­¤ì¤º¤Ë¤¤¤Þ¤¹¡£</span>
<span class="quote1">&gt; OS Åª¤Ë¤Ï½½Ê¬¤¹¤®¤ë¤Û¤É¶õ¤¤¤Æ¤¤¤Þ¤¹¤Î¤Ç¡¢my.cnf ¤òµ¿¤Ã¤Æ¤¤¤Þ¤¹¡£</span>

·ï¤Î¥¨¥é¡¼¤Ï
myisamchk() -&gt; mi_repair() ¤«¤é¸Æ¤Ð¤ì¤ë sort_get_next_record() ¤È¤¤¤¦
´Ø¿ôÆâ¤ÇÈ¯À¸¤·¤Æ¤¤¤ë¤Î¤Ç¡¢¥½¡¼¥È½èÍý¤Ë»ÈÍÑ¤¹¤ë¥Ð¥Ã¥Õ¥¡¡¢
¤â¤·¤¯¤Ï¤½¤ì¤ò´ÞÍ­¤¹¤ë¥Ñ¥é¥á¡¼¥¿¤Ç¤·¤ç¤¦¤«¡¦¡¦¡¦¡£

¤³¤³¤Ë¿§¡¹¾è¤Ã¤Æ¤Þ¤¹¤Í¡£:-)
<a href="http://dev.mysql.com/doc/mysql/ja/show-variables.html">http://dev.mysql.com/doc/mysql/ja/show-variables.html</a>



&quot;SUGIMURA Takashi ¿ùÂ¼ µ®»Î&quot; &lt;sugimura@xxxxxxxxxx&gt; wrote:
<span class="quote1">&gt; ¿ùÂ¼¤Ç¤¹¡£</span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt; Not enough memory for blob at [sort_param-&gt;start_recpos] (need [block_info.rec_len])</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; ¤È¤¤¤¦¥á¥Ã¥»¡¼¥¸¤Ï¡¢¤½¤Î¥Ð¥Ã¥Õ¥¡¤Ø¤Î¥á¥â¥ê³ÎÊÝ¤Ë¼ºÇÔ¤·¤¿¤È¤­¤Ë½ÐÎÏ¤µ¤ì¤ë¤è¤¦¤Ç¤¹¡£</span>
<span class="quote2">&gt; &gt; ¤Ç¤¹¤«¤é¡¢REPAIR TABLE Ì¿ÎáÈ¯¹Ô¸å¤Î¥á¥â¥ê¾õ¶·¤ä MySQL ¤ÎÀßÄê¤òÄ´ºº¤¹¤ì¤Ð²¿¤«¤ï¤«¤ë¤«¤âÃÎ¤ì¤Þ¤»¤ó¡£</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; Ä´¤Ù¤Æ¤Ï¤¤¤ë¤Î¤Ç¤¹¤¬¡¢¤É¤ÎÀßÄê¤¬±Æ¶Á¤¹¤ë¤Î¤«¤òÁ´ÉôÄÉ¤¤¤­¤ì¤º¤Ë¤¤¤Þ¤¹¡£</span>
<span class="quote1">&gt; OS Åª¤Ë¤Ï½½Ê¬¤¹¤®¤ë¤Û¤É¶õ¤¤¤Æ¤¤¤Þ¤¹¤Î¤Ç¡¢my.cnf ¤òµ¿¤Ã¤Æ¤¤¤Þ¤¹¡£</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt; ¤Þ¤¿¡¢¼¡¤ÎÍ×ÁÇ¤«¤é¤â²¿¤«¥Ò¥ó¥È¤òÆÀ¤é¤ì¤ë¤«¤âÃÎ¤ì¤Þ¤»¤ó¡£</span>
<span class="quote2">&gt; &gt; ¡Ê<a href="http://dev.mysql.com/doc/mysql/ja/repair-table.html">http://dev.mysql.com/doc/mysql/ja/repair-table.html</a> ¤è¤ê¡Ë</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ¤³¤Î¥Ú¡¼¥¸¤ä¤½¤Î¼þÊÕ¤ò¸«¤Þ¤·¤Æ¡¢ÉÔÍ×¤Ê INDEX ¤Îºï½ü¤Þ¤Ç¤Ï¤Ç¤­¤Þ¤·¤¿¡£</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; [DB Ää»ß¾õÂÖ¤Ç myisamchk -e -i]</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; # myisamchk -e -i XXXXXXXXXXXXXX</span>
<span class="quote1">&gt; Checking MyISAM file: XXXXXXXXXXXXXX</span>
<span class="quote1">&gt; Data records:    3413   Deleted blocks:       0</span>
<span class="quote1">&gt; myisamchk: warning: Table is marked as crashed and last repair failed</span>
<span class="quote1">&gt; - check file-size</span>
<span class="quote1">&gt; myisamchk: warning: Size of indexfile is: 1499136       Should be: 171008</span>
<span class="quote1">&gt; - check record delete-chain</span>
<span class="quote1">&gt; - check key delete-chain</span>
<span class="quote1">&gt; - check index reference</span>
<span class="quote1">&gt; - check data record references index: 1</span>
<span class="quote1">&gt; myisamchk: error: Found 3414 keys of 3413</span>
<span class="quote1">&gt; - check data record references index: 2</span>
<span class="quote1">&gt; myisamchk: error: Found 3414 keys of 3413</span>
<span class="quote1">&gt; - check data record references index: 3</span>
<span class="quote1">&gt; myisamchk: error: Found 3414 keys of 3413</span>
<span class="quote1">&gt; - check records and index references</span>
<span class="quote1">&gt; myisamchk: error: Record at:   32577612  Can't find key for index:  1</span>
<span class="quote1">&gt; MyISAM-table 'LOG_PACKETDATA' is corrupted</span>
<span class="quote1">&gt; Fix it using switch &quot;-r&quot; or &quot;-o&quot;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; User time 0.23, System time 0.21</span>
<span class="quote1">&gt; Maximum resident set size 72032, Integral resident set size 9203888</span>
<span class="quote1">&gt; Non-physical pagefaults 17884, Physical pagefaults 0, Swaps 0</span>
<span class="quote1">&gt; Blocks in 0 out 0, Messages in 0 out 0, Signals 0</span>
<span class="quote1">&gt; Voluntary context switches 0, Involuntary context switches 46</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; [¥Á¥§¥Ã¥¯¤·¤Æ¥¨¥é¡¼¤¬¤¢¤Ã¤¿¤Î¤Ç½¤Éü]</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; svsadev# myisamchk --safe-recover XXXXXXXXXXXXXX</span>
<span class="quote1">&gt; - recovering (with keycache) MyISAM-table 'XXXXXXXXXXXXXX'</span>
<span class="quote1">&gt; Data records: 3413</span>
<span class="quote1">&gt; Data records: 30138</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; [MySQLºÆµ¯Æ°¡¢ÌÜÅª¤ÎINDEX¤òºï½ü]</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; mysql&gt; drop index IX_XXXXXXXXXXXXXXXX ON XXXXXXXXXXXXXX;</span>
<span class="quote1">&gt; Query OK, 30138 rows affected (20.94 sec)</span>
<span class="quote1">&gt; Records: 30138  Duplicates: 0  Warnings: 0</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; [¤·¤«¤·ÊÌ¤Ê INDEX ¤òºîÀ®¤·¤è¤¦¤È¤¹¤ë¤È¥¨¥é¡¼]</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; mysql&gt; CREATE INDEX IX_XXXXXXXXXXXXXXXX ON XXXXXXXXXXXXXX (A, B);</span>
<span class="quote1">&gt; ERROR 1030 (HY000): Got error 12 from storage engine</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; % perror 12</span>
<span class="quote1">&gt; OS error code  12:  Cannot allocate memory</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ¤É¤Î¥á¥â¥ê¤¬Â­¤ê¤Ê¤«¤Ã¤¿¤Î¤«¤¬¤ï¤«¤ë¤È¤â¤¦¾¯¡¹ÄÉ¤¤¤ä¤¹¤¤¤Î¤Ç¤¹¤¬¡¢</span>
<span class="quote1">&gt; ¤Ê¤«¤Ê¤«Æñ¤·¤¤¤È¤³¤í¤Ç¤¹¡£</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt; »ÄÇ°¤Ê¤¬¤é»ä¤¬ÎÏ¤Ë¤Ê¤ì¤ë¤Î¤Ï¤³¤ÎÊÕ¤ê¤Þ¤Ç¤Î¤è¤¦¤Ç¤¹¡¦¡¦¡¦¡£</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ¤¤¤¨¤¤¤¨¡£¤¢¤ê¤¬¤È¤¦¤´¤¶¤¤¤Þ¤¹¡£</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ---</span>
<span class="quote1">&gt; ¿ùÂ¼ µ®»Î &lt;sugimura@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt; GnuPG fingerprint: C81B 9835 1C9E BD9B 84BF  9785 0B91 D08B F667 DCED</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>

</pre>
</div>
<p class="button"><a href="11890.html">[Á°]</a><a href="11892.html">[¼¡]</a><a href="../list/11801-11900.html">[ÈÖ¹æ½ç°ìÍ÷]</a><a href="../thread/11801-11900.html">[¥¹¥ì¥Ã¥É°ìÍ÷]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="11880.html">  11880 2005-08-04 17:54 [SUGIMURA Takashi ¿ùÂ] REPAIR TABLE ¤Ç¤Î¥¨¥é¡¼¤Ë¤Ä¤¤¤Æ         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11885.html">  11885 2005-08-05 10:05 ¨²[&quot;T.Sasaki&quot; &lt;papasan2]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11888.html">  11888 2005-08-05 11:03 ¨­¨±[SUGIMURA Takashi ¿ùÂ]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="11891.html">  11891 2005-08-05 12:44 ¨­¡¡¨²[&quot;T.Sasaki&quot; &lt;papasan2]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11892.html">  11892 2005-08-05 12:44 ¨­¡¡¨±[¤È¤ß¤¿¤Þ¤µ¤Ò¤í &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11893.html">  11893 2005-08-05 12:55 ¨­¡¡¡¡¨±[SUGIMURA Takashi ¿ùÂ]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11895.html">  11895 2005-08-05 14:04 ¨±[&lt;takeshi@xxxxxxxxxx&gt;]                                       </a></span>
</pre>
</body>
</html>
