<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5564</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="5563.html">[前]</a><a href="5565.html">[次]</a><a href="../list/5501-5600.html">[番号順一覧]</a><a href="../thread/5501-5600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:5564
</p>
<div class="header">
<p>
From: &lt;office@xxxxxxxxxx&gt;<br>
Date: Mon, 27 May 2002 23:17:22 +0900<br>
Subject: [mysql 05564] Re: OPTIMIZE で最適化できません。<br>

</p>
</div>
<div class="body">
<pre>たけです。
レス遅くなりました。

On Fri, 24 May 2002 11:21:39 +0900
SUGAWARA Hajime &lt;sugawara@xxxxxxxxxx&gt; wrote:
<span class="quote1">&gt; 　菅原です。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 　少なくともこちらではoptimize tableしても同じ値を返しますけど……。</span>

実行したSQLは下記の通りです。
サーバのバージョンはMySQL 3.23.43です。

mysql&gt; show index from kansou_tb;
+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+---------+
<span class="quote1">| Table     | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Comment |</span>
+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+---------+
<span class="quote1">| kansou_tb |          0 | PRIMARY  |            1 | k_id        | A         |      847150 |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | stno     |            1 | stno        | A         |        2150 |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | u_id     |            1 | u_id        | A         |       56476 |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | tokuten  |            1 | tokuten     | A         |          13 |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | mcode    |            1 | mcode       | A         |           1 |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | dkey     |            1 | dkey        | A         |       18024 |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | k_flag   |            1 | k_flag      | A         |           3 |     NULL | NULL   |         |</span>
+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+---------+
7 rows in set (0.00 sec)

mysql&gt; optimize table kansou_tb;
+-----------------+----------+----------+----------+
<span class="quote1">| Table           | Op       | Msg_type | Msg_text |</span>
+-----------------+----------+----------+----------+
<span class="quote1">| t_MA2.kansou_tb | optimize | status   | OK       |</span>
+-----------------+----------+----------+----------+
1 row in set (2.01 sec)

mysql&gt; show index from kansou_tb;
+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+---------+
<span class="quote1">| Table     | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Comment |</span>
+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+---------+
<span class="quote1">| kansou_tb |          0 | PRIMARY  |            1 | k_id        | A         |        NULL |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | stno     |            1 | stno        | A         |        NULL |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | u_id     |            1 | u_id        | A         |        NULL |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | tokuten  |            1 | tokuten     | A         |        NULL |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | mcode    |            1 | mcode       | A         |        NULL |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | dkey     |            1 | dkey        | A         |        NULL |     NULL | NULL   |         |</span>
<span class="quote1">| kansou_tb |          1 | k_flag   |            1 | k_flag      | A         |        NULL |     NULL | NULL   |         |</span>
+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+---------+
7 rows in set (0.00 sec)

やっぱり、カーディナリティがNULLになり、インディックスの効果
がなくなります。なんででしょうね？

-- 
j-ken/take &lt;take@xxxxxxxxxx&gt;

</pre>
</div>
<p class="button"><a href="5563.html">[前]</a><a href="5565.html">[次]</a><a href="../list/5501-5600.html">[番号順一覧]</a><a href="../thread/5501-5600.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="5533.html">   5533 2002-05-22 22:14 [&lt;office@xxxxxxxxxx&gt; ] OPTIMIZE で最適化できません。           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5540.html">   5540 2002-05-23 23:01 ┗[&lt;moeru@xxxxxxxxxx&gt;  ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5542.html">   5542 2002-05-24 02:20 　┗[&lt;office@xxxxxxxxxx&gt; ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5543.html">   5543 2002-05-24 11:21 　　┗[SUGAWARA Hajime &lt;sug]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="5564.html">   5564 2002-05-27 23:17 　　　┗[&lt;office@xxxxxxxxxx&gt; ]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5568.html">   5568 2002-05-28 12:24 　　　　┗[SUGAWARA Hajime &lt;sug]                               </a></span>
</pre>


</body></html>