<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13043</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13042.html">[前]</a><a href="13044.html">[次]</a><a href="../list/13001-13100.html">[番号順一覧]</a><a href="../thread/13001-13100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13043
</p>
<div class="header">
<p>
From: &quot;chappuru21 chappuru21&quot; &lt;&quot;chappuru21 chappuru21&quot; &lt;chappuru21@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 01 Jun 2006 15:02:34 +0000<br>
Subject: [mysql 13043] insertに関して<br>

</p>
</div>
<div class="body">
<pre>
はじめまして、こんばんは。
今回初めて投函させていただく野口と申します。
SQLを触り始めて、まだ1ヶ月足らずの初心者ですが、皆様のお知恵を頂戴したく、こ
ちらのMLに登録させて頂きました。

ところで、つい先日までPHPにて登録できたものが、見よう見真似でフィールドの属
性およびフィールド数を変えたところ、スクリプトに問題があるのかDBに登録出来な
くなってしまいました。

ここ数日、スクリプトを見直したり、直接コマンドプロンプトから登録を試みたりし
ているのですが、どうにも上手く登録させる事が出来ません。お手数お掛けいたしま
すがご教授いただければ幸いです。

環境
OS：winXP
MySQL4.020
PHP4.3.7.7
Apache1.3.29

以下、購入した書籍を参考に記述したスクリプトです。
フィールド数は33ですが、簡素化のため後半は省略しております。）
※試行錯誤を繰り返しているので可笑しなところがあるかと思います。

&lt;?php
extract($_POST);
if($anken&lt;&gt;''){
mysql_connect('localhost','root','****');
mysql_select_db('test');

$sql= &quot;select * from member where loginid like '$id'&quot;;
$result = mysql_query($sql);
$rows = mysql_num_rows($result);
if($rows &lt;&gt; 0){
	echo (&quot;&lt;div align=\&quot;center\&quot;&gt;\n&quot;);
	echo &quot;&lt;font color=\&quot;RED\&quot;&gt;\n&quot;;
	echo &quot;&lt;br&gt;&lt;h4&gt;すでに登録済みです。１つのID で複数の登録は出来ません。
&lt;/h4&gt;&quot;;
	echo &quot;&lt;/font&gt;\n&quot;;
	echo (&quot;&lt;input type=\&quot;button\&quot; value=\&quot;　戻る　\&quot; 
onClick=\&quot;history.back()\&quot;&gt;\n&quot;);
	echo (&quot;&lt;/div&gt;\n&quot;);
	exit;
	}

elseif($category&lt;&gt;1 &amp;&amp; $anken&lt;&gt;&quot;&quot; &amp;&amp; $naiyou&lt;&gt;&quot;&quot; &amp;&amp; $yu1&lt;&gt;&quot;&quot; &amp;&amp; $yu2&lt;&gt;&quot;&quot; &amp;&amp; 
$todoufuken&lt;&gt;1 &amp;&amp; $shikugun&lt;&gt;&quot;&quot; &amp;&amp; $juusho&lt;&gt;&quot;&quot;){
$con = mysql_connect(&quot;localhost&quot;, &quot;root&quot;, &quot;******&quot;);
if (!$con)
{
	print(&quot;MySQLへの接続に失敗しました&quot;);
	exit;
	}
	if (!mysql_select_db(&quot;test&quot;))
	{
	print(&quot;データベースへの接続に失敗しました&quot;);
	exit;
	}

	//mysql_connect('localhost','root','******');
	//mysql_select_db('test');
	$hiduke = date(&quot;y-m-d&quot;);
	$sql = &quot;insert into member values(0, '$hiduke', '$id', '$shamei', 
'$gyoutai', '$gyoushu'. '$jigyou', '$setsuritsu', '$shihon', '$uriage', 
'$shainsuu', '$nam', '$yu1', '$yu2', '$todoufuken', '$shikugun', '$juusho', 
'$url', '$mail1', '$tel', '$fax', '$renraku_mail', '$renraku_tel', 
'$renraku_fax')&quot;;
		mysql_query($sql);
		//$id = '';
		echo (&quot;&lt;div align=\&quot;center\&quot;&gt;\n&quot;);
		echo &quot;&lt;br&gt;&lt;h4&gt;登録が完了いたしました。&lt;/h4&gt;&lt;br&gt;&lt;br /&gt;&quot;;
		echo (&quot;&lt;BUTTON type=\&quot;button\&quot; 
onclick=\&quot;location.href='../../../../index.php'\&quot;&gt;トップへ戻る
&lt;/BUTTON&gt;\n&quot;);
		echo (&quot;&lt;/div&gt;\n&quot;);
		exit;
	}
}
?&gt;


mysql&gt; show fields from member;
+--------------+--------------+------+-----+---------+----------------+
<span class="quote1">| Field        | Type         | Null | Key | Default | Extra          |</span>
+--------------+--------------+------+-----+---------+----------------+
<span class="quote1">| id           | int(11)      |      | PRI | NULL    | auto_increment |</span>
<span class="quote1">| tourokubi    | date         | YES  |     | NULL    |                |</span>
<span class="quote1">| loginid      | varchar(30)  | YES  |     | NULL    |                |</span>
<span class="quote1">| shamei       | varchar(80)  | YES  |     | NULL    |                |</span>
<span class="quote1">| gyoutai      | varchar(20)  | YES  |     | NULL    |                |</span>
<span class="quote1">| gyoushu      | varchar(50)  | YES  |     | NULL    |                |</span>
<span class="quote1">| jigyou       | text         | YES  |     | NULL    |                |</span>
<span class="quote1">| setsuritsu   | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| shihon       | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| uriage       | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| shainsuu     | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| tantousha    | varchar(30)  | YES  |     | NULL    |                |</span>
<span class="quote1">| yu1          | char(3)      | YES  |     | NULL    |                |</span>
<span class="quote1">| yu2          | varchar(4)   | YES  |     | NULL    |                |</span>
<span class="quote1">| todoufuken   | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| shikugun     | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| juusho       | varchar(100) | YES  |     | NULL    |                |</span>
<span class="quote1">| url          | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| mail         | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| tel          | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| fax          | varchar(40)  | YES  |     | NULL    |                |</span>
<span class="quote1">| renraku_mail | varchar(20)  | YES  |     | NULL    |                |</span>
<span class="quote1">| renraku_tel  | varchar(20)  | YES  |     | NULL    |                |</span>
<span class="quote1">| renraku_fax  | varchar(20)  | YES  |     | NULL    |                |</span>
　　　　　　　・
　　　　　　　・
　　　　　　　・
+--------------+--------------+------+-----+---------+----------------+
33 rows in set (0.00 sec)


コマンドプロンプトから登録を試みた際のエラー
ERROR 1136: Column count doesn't match value count at row 1



</pre>
</div>
<p class="button"><a href="13042.html">[前]</a><a href="13044.html">[次]</a><a href="../list/13001-13100.html">[番号順一覧]</a><a href="../thread/13001-13100.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="13043.html">  13043 2006-06-02 00:02 [&quot;chappuru21 chappuru] insertに関して                          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13044.html">  13044 2006-06-02 00:47 ┣[&lt;milk_coffee_2004jp@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13045.html">  13045 2006-06-02 09:44 ┃┗[&quot;chappuru21 chappuru]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13046.html">  13046 2006-06-02 10:12 ┃　┣[Seiichi YANAI &lt;yanai]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13048.html">  13048 2006-06-02 10:49 ┃　┗[高橋政利 &lt;takahashi@]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13049.html">  13049 2006-06-02 12:07 ┃　　┗[&quot;chappuru21 chappuru]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13047.html">  13047 2006-06-02 10:43 ┗[&quot;Takashi Yamashita&quot; ]                                       </a></span>
</pre>
</body>
</html>
