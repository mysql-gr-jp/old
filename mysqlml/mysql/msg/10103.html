<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:10103</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="10102.html">[前]</a><a href="10104.html">[次]</a><a href="../list/10101-10200.html">[番号順一覧]</a><a href="../thread/10101-10200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:10103
</p>
<div class="header">
<p>
From: 渡邊昌之 &lt;渡邊昌之 &lt;mark@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 10 Sep 2004 14:41:45 +0900<br>
Subject: [mysql 10103] Re: IPアドレス格納・検索方法<br>

</p>
</div>
<div class="body">
<pre>はじめまして、渡邊と申します。

INET_ATON(expr) 
と
INET_NTOA(expr) 
という関数がMysqlに用意されていますのでこれを使えば
いいんじゃないでしょうか。

例
mysql&gt; SELECT INET_ATON("209.207.224.40");
       -&gt;  3520061480

mysql&gt; SELECT INET_NTOA(3520061480);
       -&gt;  "209.207.224.40"

型をINTにして、
CIDRで取り出したいと思ったら
ビット演算すればいいんじゃないかと

Yoshiaki Saita &lt;yoshia-s@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; </span>
<span class="quote1">&gt; 斎田と申します。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 今回、テーブルにIPv4アドレスを格納しないといけないのですが、</span>
<span class="quote1">&gt; どのような方法が効率的でしょうか。</span>
<span class="quote1">&gt; 今までは、PostgreSQLを利用しており、</span>
<span class="quote1">&gt; ネットワークアドレスデータ型、関数が利用できてました。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 格納したデータの検索は、</span>
<span class="quote1">&gt; IPアドレスを指定してデータを抽出するのはもちろん、</span>
<span class="quote1">&gt; CIDRなどの記述ででも取り出せるようにする予定です。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 現在では、</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; IPAddress varchar(16)</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; とし、文字列として格納しています。</span>
<span class="quote1">&gt; 検索の時には文字列比較で抽出していますが、</span>
<span class="quote1">&gt; 文字列比較はかなりのコストがかかり相当遅くなるようです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; IPアドレスを何らかの数値に変換して記録できれば</span>
<span class="quote1">&gt; 速度的にかなり速くなると伺ったことがあります。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; レコード数は1000万件以上あります。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 何か効率的な格納、検索方法等ございましたら</span>
<span class="quote1">&gt; ご教授頂ければ幸いです。</span>


_______________________________________
渡邊昌之
mark@xxxxxxxxxx
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

</pre>
</div>
<p class="button"><a href="10102.html">[前]</a><a href="10104.html">[次]</a><a href="../list/10101-10200.html">[番号順一覧]</a><a href="../thread/10101-10200.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="10099.html">  10099 2004-09-10 13:33 [Yoshiaki Saita &lt;yosh] IPアドレス格納・検索方法                </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10100.html">  10100 2004-09-10 13:47 ┣[seiji takegata &lt;take]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10101.html">  10101 2004-09-10 13:53 ┣[hiroshi nagasaka &lt;h-]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10102.html">  10102 2004-09-10 14:13 ┣[坂東健一 &lt;bando@xxxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="10103.html">  10103 2004-09-10 14:41 ┣[渡邊昌之 &lt;mark@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10105.html">  10105 2004-09-10 14:42 ┗[HAMAI Kyoichi &lt;k-ham]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10139.html">  10139 2004-09-14 20:35 　┗[Yoshiaki Saita &lt;yosh]                                     </a></span>
</pre>


</body></html>