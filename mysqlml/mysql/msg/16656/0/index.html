<html><head></head><body><div dir="ltr">初めまして、昨夜「MySQL徹底入門」でこのMLを知って、登録させて頂いた<br>北海道十勝に住む岡 善博と云う者です。<br><br>自宅サーバでWordPressを立ち上げていて、不覚にもデータベースのバックアップ<br>取らずにＯＳをFreeBSD 11.3Rp13から12.2Rp7に上げてしまいました。<br><br>作っていたデータベース(zenpakudb)の*.frmと*.ibdが有る状態です。<br>これらからデータベースの復旧をしたいのです。<br>それらのファイルは、これです。<br>-rw-rw---- 1 mysql mysql    65     4月 21 2017 db.opt<br>-rw-rw---- 1 mysql mysql   3033    4月 21 2017 wp_commentmeta.frm<br>-rw-rw---- 1 mysql mysql  9437184  9月 14 21:43 wp_commentmeta.ibd<br>-rw-rw---- 1 mysql mysql   6679   12月 12 2020 wp_comments.frm<br>-rw-rw---- 1 mysql mysql  9437184  9月 14 21:43 wp_comments.ibd<br>-rw-rw---- 1 mysql mysql   3197   4月 24 2017 wp_ktaisession.frm<br>-rw-rw---- 1 mysql mysql   98304  4月 24 2017 wp_ktaisession.ibd<br>-rw-rw---- 1 mysql mysql   8102   4月 21 2017 wp_links.frm<br>-rw-rw---- 1 mysql mysql  114688  4月 21 2017 wp_links.ibd<br>-rw-rw---- 1 mysql mysql   2854   4月 21 2020 wp_options.frm <br>-rw-rw---- 1 mysql mysql  9437184  9月 18 01:42 wp_options.ibd<br>-rw-rw---- 1 mysql mysql   3030   4月 21 2017 wp_postmeta.frm<br>-rw-rw---- 1 mysql mysql 14680064 9月 16 20:23 wp_postmeta.ibd<br>-rw-rw---- 1 mysql mysql   7211    4月 21 2017 wp_posts.frm<br>-rw-rw---- 1 mysql mysql 14680064 9月 16 20:23 wp_posts.ibd<br>-rw-rw---- 1 mysql mysql   1496   4月 21 2017 wp_term_relationships.frm<br>-rw-rw---- 1 mysql mysql  212992  9月 16 20:22 wp_term_relationships.ibd<br>-rw-rw---- 1 mysql mysql   2209   4月 21 2017 wp_term_taxonomy.frm<br>-rw-rw---- 1 mysql mysql  131072  9月 16 20:23 wp_term_taxonomy.ibd<br>-rw-rw---- 1 mysql mysql   3030   4月 21 2017 wp_termmeta.frm<br>-rw-rw---- 1 mysql mysql  131072  4月 21 2017 wp_termmeta.ibd<br>-rw-rw---- 1 mysql mysql   3592   4月 21 2017 wp_terms.frm<br>-rw-rw---- 1 mysql mysql  131072  8月 15 09:03 wp_terms.ibd<br>-rw-rw---- 1 mysql mysql   3031   4月 21 2017 wp_usermeta.frm<br>-rw-rw---- 1 mysql mysql  131072  9月 16 19:49 wp_usermeta.ibd<br>-rw-rw---- 1 mysql mysql   6962   4月 21 2017 wp_users.frm<br>-rw-rw---- 1 mysql mysql  147456  4月 21 2017 wp_users.ibd<br>-rw-rw---- 1 mysql mysql   1144   4月 24 2017 wp_wpmm_subscribers.frm<br>-rw-rw---- 1 mysql mysql   98304  4月 24 2017 wp_wpmm_subscribers.ibd<br><br>Webを検索して、<br><a href="https://4to.pics/article/post/122">https://4to.pics/article/post/122</a><br>のページを見つけ、これだ～と思って、やってみました。<br>mysql57-server-5.7.35を入れて、ユーザを作り、データベースを作りました。<br>2020.12.12に作ったバックアップで復元させて、復元出来た事確認して、<br>*.frm,*.ibdをコピーして、Webで見つけた手順を試みました。<br>そのままでは、mysqldが起動出来ないので、ib_logfile0,1を消して起動させました。<br>use zenpakudb;<br>show tables; でちゃんと表示され、show table status;では、NULLが表示されたので、<br>alter table wp_commentmeta DISCARD TABLESPACE;　などを実行し、成功。<br>alter table wp_commentmeta IMPORT TABLESPACE; 　を実行すると、<br>ERROR 1808 (HY000): Schema mismatch (Table has ROW_TYPE_DYNAMIC row　\<br>format, .ibd file has ROW_TYPE_COMPACT row format.)<br>のエラーが出てしまいます。<br><br>MySQL 5.6を別なマシンにセットして、試してみましたが、こちらでは、DISCARD TABLESPACの<br>段階でもエラーが出てしまいます。<br><br>ここで、力尽き、*.frmと*.ibdからでデータベース復旧にアドバイスを頂けたら嬉しいです。<br>*.frmと*.ibdからの復旧は、不可能と云うのであれば、2020.12.12でデータでWordPressの<br>復旧させるのですが、半年以上の写真は、残っているので、何とかデータベースを復旧させたい<br>のです。宜しくお願いします。<br><br><br></div>
</body></html>