<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11366</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="11365.html">[前]</a><a href="11367.html">[次]</a><a href="../list/11301-11400.html">[番号順一覧]</a><a href="../thread/11301-11400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:11366
</p>
<div class="header">
<p>
From: &quot;Tadashi Watanabe&quot; &lt;&quot;Tadashi Watanabe&quot; &lt;watana-t@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 1 May 2005 16:33:48 +0900<br>
Subject: [mysql 11366] Re: Apache::Session<br>

</p>
</div>
<div class="body">
<pre>
 玲治様

渡辺です。
ご回答ありがとうございます。
（説明不足でしたが、本問題はPerlからPerlモジュールの
　Apache::Session::MySQLを使用しての問題です）

１.　sessionのIDはMySQL内に保存されています。
２.　cgiでsessionをcloseしています。確認しています。
　とくにエラー等も発生していません。
３.tieした変数にデータが入っているかをclose直前に確認
しました。
４.sessionを読めるか
　初回の処理でsessionを生成し、sessionデータを代入して
　closeし、coookieを生成し送信しています。
　次回の処理でｃｏｏｋｉｅを取得してからMySQLからｓｅｓｓｉｏｎＩＤに
　対応するデータを取り出すのですが、sessionID自体は取得OKで
　データ部分が取得できません（空の状態）。
$データ = $sess_ref-&gt;attr (&quot;データ名&quot;);の処理でデータがない、
ＭｙＳＱＬ上のsessionsテーブルで  a_session の値が入っていない。
という状態となります。

ネットで検索してみますと
-----------------------------------
<a href="http://hori-uchi.com/archives/cat_17.html">http://hori-uchi.com/archives/cat_17.html</a>
より

ujis（EUC)のキャラクタセットをもつTEXTフィールド
（MySQLのsessionテーブル）に
nfreezeしたujis以外の文字コードを含んだデータを
インサートしようとしたため、データが空になってしまう
のでは....
-----------------------------------
等のような記事があり、これに関係してるのかともおもう
のですが、までPerlモジュール（Apache::Session::MySQL）
までは手を入れていません。
（なるべく手をいれない方法をとりたいのですが）


-----Original Message-----
From: sin [mailto:panocon@xxxxxxxxxx]
Sent: Sunday, May 01, 2005 11:53 AM
To: ml@xxxxxxxxxx
Subject: <a href="11365.html">[mysql 11365]</a> Re: Apache::Session

玲治です。

これだけではなかなか分かりかねますが・・・

チェック方法としては、

１.　sessionのデータベースを読んで、ちゃんとIDが保存されているか確認する。

２.　cgiできちんとsessionをcloseしている確認する。

３.tieした変数にデータが入っているか確認する。

４.sessionを読めるか確認する。

どのあたりでコケてるんでしょうか？


</pre>
</div>
<p class="button"><a href="11365.html">[前]</a><a href="11367.html">[次]</a><a href="../list/11301-11400.html">[番号順一覧]</a><a href="../thread/11301-11400.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="11364.html">  11364 2005-04-29 10:29 [&quot;Tadashi Watanabe&quot; &lt;] Apache::Session                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11365.html">  11365 2005-05-01 11:53 ┗[sin &lt;panocon@xxxxxxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="11366.html">  11366 2005-05-01 16:33 　┗[&quot;Tadashi Watanabe&quot; &lt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11367.html">  11367 2005-05-01 18:28 　　┗[sin &lt;panocon@xxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11369.html">  11369 2005-05-02 10:59 　　　┗[堀内康弘 &lt;horiuchi@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11371.html">  11371 2005-05-02 21:49 　　　　┗[&quot;Tadashi Watanabe&quot; &lt;]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11372.html">  11372 2005-05-03 00:56 　　　　　┗[堀内康弘 &lt;horiuchi@x]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11375.html">  11375 2005-05-03 10:56 　　　　　　┗[&quot;Tadashi Watanabe&quot; &lt;]                           </a></span>
</pre>
</body>
</html>
