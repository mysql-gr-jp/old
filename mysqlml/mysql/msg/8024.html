<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8024</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="8023.html">[前]</a><a href="8025.html">[次]</a><a href="../list/8001-8100.html">[番号順一覧]</a><a href="../thread/8001-8100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8024
</p>
<div class="header">
<p>
From: きたぢま &lt;きたぢま &lt;kitajima@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 15 Jul 2003 13:08:30 +0900<br>
Subject: [mysql 08024] Re: processlist のプロセスについて<br>

</p>
</div>
<div class="body">
<pre>
　これは[kobayashi]様が[03/07/14 23:46:36]に送信された、
　[<a href="08022.html">[mysql 08022]</a> processlist のプロセスについて]への返信です。
〆￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣
きたぢまです。

クライアント環境はなにですか？
クライアントがTomcatなどのような常時起動のサーバーの場合、TCPコネク
ションがプールされて、しばらく接続が残っていることがあるかもしれません。
(すみません。検証はしてませんが・・・)
子プロセスは実行後に消滅しますが、実際に接続しているのは親プロセス
だったり、Tomcatの場合のようなJVMが接続していたりすると、コネクションを
咥えたままっていうことがあるかもしれません。

クライアント環境を再起動してみては？
(間違ってたらすみません)

※ちなみにSleepプロセスがMySQLにに残ってても再起動できたと思います。
　Windowsの場合ですが…。


kobayashi&gt; 小林＠長野と申します。
kobayashi&gt; 
kobayashi&gt; 早速ですが、processlist で表示されるプロセスについて質問させ
kobayashi&gt; て下さい。
kobayashi&gt; 
kobayashi&gt; 
kobayashi&gt; processlist コマンドを発行した時点で、この query 自体のIdは 
kobayashi&gt; 9039 となっているのですが、リストの中には、Idが5000番台のも
kobayashi&gt; のが、
kobayashi&gt; 
kobayashi&gt; Command   Time   State
kobayashi&gt; Sleep     10440  
kobayashi&gt; Query     10436  Sorting result
kobayashi&gt; Sleep     6252   
kobayashi&gt; 
kobayashi&gt; といったようにいつまでもプロセスが残ったままになってしまって
kobayashi&gt; います。
kobayashi&gt; 
kobayashi&gt; これらが残ったままだと処理パフォーマンスは低下するのでしょう
kobayashi&gt; か。また、このプロセスを正常に完了させるのはどのような方法が
kobayashi&gt; あるのか、更にこのプロセスが残る原因はどのような事が考えられ
kobayashi&gt; るかなどご教示頂ければ幸いです。
kobayashi&gt; 
kobayashi&gt; 
kobayashi&gt; MySQL : 4.0.5a-beta-log
kobayashi&gt; OS    : FreeBSD4.3
kobayashi&gt; 
kobayashi&gt; 
kobayashi&gt; このプロセスのせいか、mysqladmin の shutdown コマンドで
kobayashi&gt; mysqld_safe が停止してくれません…。
kobayashi&gt; 
kobayashi&gt; 
kobayashi&gt; --
kobayashi&gt; E-Mail  : kobayashi@xxxxxxxxxx
kobayashi&gt; 
kobayashi&gt; 


きたぢま &lt;kitajima@xxxxxxxxxx&gt;
日本MySQLユーザ会 <a href="../../../index.html">http://www.mysql.gr.jp/</a>
━━━━────────────────────────────


</pre>
</div>
<p class="button"><a href="8023.html">[前]</a><a href="8025.html">[次]</a><a href="../list/8001-8100.html">[番号順一覧]</a><a href="../thread/8001-8100.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8022.html">   8022 2003-07-14 23:46 [kobayashi &lt;kobayashi] processlist のプロセスについて          </a></span>
<span class="current">-&gt;&nbsp;<a href="8024.html">   8024 2003-07-15 13:08 ┗[きたぢま &lt;kitajima@x]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8027.html">   8027 2003-07-15 15:17 　┗[kobayashi &lt;kobayashi]                                     </a></span>
</pre>
</body>
</html>
