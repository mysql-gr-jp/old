<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12296</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="12295.html">[前]</a><a href="12297.html">[次]</a><a href="../list/12201-12300.html">[番号順一覧]</a><a href="../thread/12201-12300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:12296
</p>
<div class="header">
<p>
From: Atsushi Odagiri &lt;Atsushi Odagiri &lt;a.odagiri@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 27 Oct 2005 11:39:27 +0900<br>
Subject: [mysql 12296] Re: mySQLでの順位付け<br>

</p>
</div>
<div class="body">
<pre>
小田切です。

<span class="quote1">&gt;mySQLでダウンロード数を管理しているのですが</span>
<span class="quote1">&gt;これを元に、順位の概念を取り入れる事は可能でしょうか？</span>
<span class="quote1">&gt;お手数ですが、ご指南頂けますでしょうか。</span>
<span class="quote1">&gt;  </span>
<span class="quote1">&gt;</span>
クエリだけでやる方法を考えてみました。

CREATE TABLE `practice`.`music` (
`id` int(10) unsigned NOT NULL auto_increment,
`title` varchar(45) NOT NULL,
`download_count` int(10) unsigned NOT NULL,
PRIMARY KEY (`id`),
KEY `download_count_idx` (`download_count`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

SELECT m.id, m.title, m.download_count, count(n.id) + 1
FROM music m
LEFT OUTER JOIN music n
ON m.download_count &lt; n.download_count
GROUP BY m.id, m.title, m.download_count
ORDER BY count(*)

パフォーマンスはどうでしょう?
download_countにインデックスは意味はあるでしょうか?

-- 
/*
 * 日本システム開発 第一事業部 IS部 
 * 小田切篤
 */


</pre>
</div>
<p class="button"><a href="12295.html">[前]</a><a href="12297.html">[次]</a><a href="../list/12201-12300.html">[番号順一覧]</a><a href="../thread/12201-12300.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="12290.html">  12290 2005-10-26 15:37 [&lt;makocan5651@xxxxxxx] mySQLでの順位付け                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12291.html">  12291 2005-10-27 01:15 ┣[Shinya Kawaji &lt;kawaj]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="12296.html">  12296 2005-10-27 11:39 ┗[Atsushi Odagiri &lt;a.o]                                       </a></span>
</pre>
</body>
</html>
