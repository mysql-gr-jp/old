<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4162</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4161.html">[前]</a><a href="4163.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4162
</p>
<div class="header">
<p>
From: "tamuzin2" &lt;"tamuzin2" &lt;tamuzin@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 9 Aug 2001 18:39:22 +0900<br>
Subject: [mysql 04162] 最新日時のデータのファイルを表示<br>

</p>
</div>
<div class="body">
<pre>田中です

前にも似たような質問をしたのですが、結局まだ完璧に解決できなかったので申し訳
ございませんが質問させて下さい。

+------+------------+-------------------+
<span class="quote1">| bagou   | gazou　　        | time　                         |</span>
+------+------------+-------------------+
<span class="quote1">|          1|dezikame.jpg     |2001-08-04 02:17:00   |</span>
+------+------------+-------------------+
<span class="quote1">|          2|pasocon.jpg      |2001-08-05 15:30:00   |</span>
+------+------------+-------------------+
<span class="quote1">|          3|purintaa.jpg      |2001-08-08 12:50:00    |</span>
+------+------------+-------------------+
上記のようなデータベースがあって、その中から最新の日付のフィールド(gazou)の
データを表示させたい時はPerlでの記述はどのようにすればよいのでしょうか？
どなたかよろしければお教え下さい宜しくお願いします。

ちなみに下記の様にPerlで記述しましたがフィールド(gazou)に入っている画像デー
タが全て表示されてしまい、自分がやろうと思っている条件を絞り込んでの表示は成
功しませんでした。

#!perl

use DBI;
use Cwd;

my($dns) = "DBI:mysql:database:localhost";
my($username) = "root";
my($password) = "aaaa";
my($dbh,$sth);
my(@ary);

$dbh = DBI -&gt; connect ($dns,$username,$password) or &amp;Error("データベースへア
クセスできません。");

$sth = $dbh-&gt;prepare("select gazou from table where time &lt; now()");

$sth -&gt; execute() or &amp;Error("select gazou from table where time &lt; now()を実
行できません。");

print "content-type: text/html\; charset=shift_jis\n\n";
print&lt;&lt;"__HTML__";
&lt;html&gt;&lt;head&gt;&lt;title&gt;gazou&lt;/title&gt;&lt;/head&gt;
&lt;body text="#44444" bgcolor="#ffffff"&gt;
__HTML__

while(@ary = $sth -&gt; fetchrow_array()){
print "&lt;img src=\"../tmp/$ary[0]\"&gt;";
}

print&lt;&lt;"__HTML__";
&lt;/body&gt;
&lt;/html&gt;
__HTML__

$sth -&gt; finish();
$dbh -&gt; disconnect();
exit;

sub Error{
#print "content-type: text/html\n\n";
print $_[0];
print qq(&lt;br&gt;&lt;a href="javascript:history.back(1)"&gt;戻る&lt;/a&gt;);
exit;
}


</pre>
</div>
<p class="button"><a href="4161.html">[前]</a><a href="4163.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="4143.html">   4143 2001-08-05 18:48 ["tamuzin2" &lt;tamuzin@] datetime を使用しての比較               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4144.html">   4144 2001-08-05 19:29 ┣[Okamoto RYO &lt;ryo@xxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4145.html">   4145 2001-08-05 21:02 ┃┣[&lt;endo_t@xxxxxxxxxx&gt; ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4146.html">   4146 2001-08-05 22:10 ┃┗["tamuzin2" &lt;tamuzin@]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4147.html">   4147 2001-08-05 22:13 ┃　┗[Tatsuhiko Miyagawa &lt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4148.html">   4148 2001-08-05 22:27 ┃　　┗["tamuzin2" &lt;tamuzin@] Re: datetime を使用しての比較【解決】</a></span>
<span class="current">-&gt;&nbsp;<a href="4162.html">   4162 2001-08-09 18:39 ┗["tamuzin2" &lt;tamuzin@] 最新日時のデータのファイルを表示      </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4163.html">   4163 2001-08-10 07:41 　┗[とみたまさひろ &lt;tomm]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4164.html">   4164 2001-08-10 10:46 　　┗["tamuzin2" &lt;tamuzin@] Re: 最新日時のデータのファイルを表示【解決】</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4165.html">   4165 2001-08-10 11:22 　　　┗[&lt;endo_t@xxxxxxxxxx&gt; ]                                 </a></span>
</pre>


</body></html>