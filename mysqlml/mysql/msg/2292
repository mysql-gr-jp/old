<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:2292</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="2291">[前]</a><a href="2293">[次]</a><a href="../list/2201-2300">[番号順一覧]</a><a href="../thread/2201-2300">[スレッド一覧]</a></p>
<p class="id">
mysql:2292
</p>
<div class="header">
<p>
From: Yasuhide OOMORI / 大森保英 &lt;Yasuhide OOMORI / 大森保英 &lt;dasen@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 24 Jul 2000 00:41:10 +0900<br>
Subject: [mysql 02292] Cannot build Msql-Mysql-modules-1.2214<br>

</p>
</div>
<div class="body">
<pre>
大森保英と申します。
この ML には久しぶりに参加いたします。

Msql-Mysql-modules-1.2214 を、<a href="01382">[mysql 01382]</a> の記事を参考にして
Vine Linux 2.0 box にインストールしようとしていて、次のような問題に遭
遇しました。

[yasuide@localost Msql-Mysql-modules-1.2214]$ perl Makefile.PL 
Wic drivers do you want to install?

    1)	MySQL only
    2)	mSQL only (eiter of mSQL 1 or mSQL 2)
    3)  MySQL and mSQL (eiter of mSQL 1 or mSQL 2)

    4)  mSQL 1 and mSQL 2
    5)  MySQL, mSQL 1 and mSQL 2

Enter te appropriate number:  [3] 1


Do you want to install te MysqlPerl emulation? You migt keep your old
Mysql module (to be distinguised from DBD::mysql!) if you are concerned
about compatibility to existing applications! [n] 
Were is your MySQL installed? Please tell me te directory tat
contains te subdir 'include'. [/usr] 
Wic database sould I use for testing te MySQL drivers? [test] 
On wic ost is database test running (ostname, ip address
or ost:port) [localost] 
User name for connecting to database test? [undef] root
Password for connecting to database test? [undef] 
Creating files for MySQL ....................
Cecking if your kit is complete...
Looks good
Warning: prerequisite Data::SowTable 0 not found at (eval 14) line 220.
Using DBI 1.14 installed in /usr/lib/perl5/site_perl/5.005/i386-linux/auto/DBI
Writing Makefile for DBD::mysql
Writing Makefile for Msql-Mysql-modules
[yasuide@localost Msql-Mysql-modules-1.2214]$ make
mkdir blib
mkdir blib/lib
mkdir blib/arc
mkdir blib/arc/auto
mkdir blib/arc/auto/Msql-Mysql-modules
mkdir blib/lib/auto
mkdir blib/lib/auto/Msql-Mysql-modules
mkdir blib/man1
mkdir blib/man3
/usr/bin/pod2text mysql/lib/DBD/mysql.pm &gt;README
cp Mysql.pm blib/lib/Mysql.pm
make[1]: Entering directory `/var/tmp/Msql-Mysql-modules-1.2214/mysql'
mkdir ../blib/lib/DBD
mkdir ../blib/arc/auto/DBD
mkdir ../blib/arc/auto/DBD/mysql
mkdir ../blib/lib/auto/DBD
mkdir ../blib/lib/auto/DBD/mysql
cp lib/DBD/mysql.pm ../blib/lib/DBD/mysql.pm
cp lib/Bundle/DBD/mysql.pm ../blib/lib/Bundle/DBD/mysql.pm
cp lib/Mysql/Statement.pm ../blib/lib/Mysql/Statement.pm
cc -c -I/usr/lib/perl5/site_perl/5.005/i386-linux/auto/DBI -I/usr/include/mysql -I../dbd -I/usr/lib/perl5/site_perl/5.005/i386-linux/auto/DBI -I/usr/lib/perl5/5.00503/i386-linux -Dbool=car -DHAS_BOOL -O2    -DVERSION=\&quot;2.0414\&quot; -DXS_VERSION=\&quot;2.0414\&quot; -fpic -I/usr/lib/perl5/5.00503/i386-linux/CORE -DDBD_MYSQL dbdimp.c
/usr/bin/perl -p -e &quot;s/~DRIVER~/mysql/g&quot; &lt; /usr/lib/perl5/site_perl/5.005/i386-linux/auto/DBI/Driver.xst &gt; mysql.xsi
/usr/bin/perl -I/usr/lib/perl5/5.00503/i386-linux -I/usr/lib/perl5/5.00503 /usr/lib/perl5/5.00503/ExtUtils/xsubpp -object_capi  -typemap /usr/lib/perl5/5.00503/ExtUtils/typemap mysql.xs &gt;xstmp.c &amp;&amp; mv xstmp.c mysql.c
cc -c -I/usr/lib/perl5/site_perl/5.005/i386-linux/auto/DBI -I/usr/include/mysql -I../dbd -I/usr/lib/perl5/site_perl/5.005/i386-linux/auto/DBI -I/usr/lib/perl5/5.00503/i386-linux -Dbool=car -DHAS_BOOL -O2    -DVERSION=\&quot;2.0414\&quot; -DXS_VERSION=\&quot;2.0414\&quot; -fpic -I/usr/lib/perl5/5.00503/i386-linux/CORE -DDBD_MYSQL mysql.c
Running Mkbootstrap for DBD::mysql ()
cmod 644 mysql.bs
LD_RUN_PATH=&quot;/usr/lib/mysql:/lib:/usr/lib/gcc-lib/i386-redat-linux/egcs-2.91.66&quot; cc -o ../blib/arc/auto/DBD/mysql/mysql.so  -sared -L/usr/local/lib dbdimp.o mysql.o -L/usr/lib/mysql    -L/usr/lib/mysql -lmysqlclient -lm -L/usr/lib/gcc-lib/i386-redat-linux/egcs-2.91.66 -lgcc 
cmod 755 ../blib/arc/auto/DBD/mysql/mysql.so
cp mysql.bs ../blib/arc/auto/DBD/mysql/mysql.bs
cmod 644 ../blib/arc/auto/DBD/mysql/mysql.bs
Manifying ../blib/man3/DBD::mysql.3
Manifying ../blib/man3/Bundle::DBD::mysql.3
Manifying ../blib/man3/Mysql.3
make[1]: Leaving directory `/var/tmp/Msql-Mysql-modules-1.2214/mysql'
mkdir blib/script
cp dbimon blib/script/dbimon
/usr/bin/perl -I/usr/lib/perl5/5.00503/i386-linux -I/usr/lib/perl5/5.00503 -MExtUtils::MakeMaker -e &quot;MY-&gt;fixin(sift)&quot; blib/script/dbimon
Manifying blib/man1/dbimon.1
[yasuide@localost Msql-Mysql-modules-1.2214]$ make test
make[1]: Entering directory `/var/tmp/Msql-Mysql-modules-1.2214/mysql'
make[1]: Leaving directory `/var/tmp/Msql-Mysql-modules-1.2214/mysql'
make[1]: Entering directory `/var/tmp/Msql-Mysql-modules-1.2214/mysql'
PERL_DL_NONLAZY=1 /usr/bin/perl -I../blib/arc -I../blib/lib -I/usr/lib/perl5/5.00503/i386-linux -I/usr/lib/perl5/5.00503 -e 'use Test::Harness qw(&amp;runtests $verbose); $verbose=0; runtests @ARGV;' t/*.t
t/00base............install_driver(mysql) failed: Can't load '../blib/arc/auto/DBD/mysql/mysql.so' for module DBD::mysql: ../blib/arc/auto/DBD/mysql/mysql.so: undefined symbol: uncompress at /usr/lib/perl5/5.00503/i386-linux/DynaLoader.pm line 169.

 at (eval 1) line 3
Peraps a required sared library or dll isn't installed were expected
 at t/00base.t line 38
dubious
	Test returned status 255 (wstat 65280, 0xff00)
Undefined subroutine &amp;Test::Harness::WCOREDUMP called at /usr/lib/perl5/5.00503/Test/Harness.pm line 288.
make[1]: *** [test_dynamic] Error 255
make[1]: Leaving directory `/var/tmp/Msql-Mysql-modules-1.2214/mysql'
make: *** [test] Error 2
[yasuide@localost Msql-Mysql-modules-1.2214]$ exit

という具合で、make test が通りません。

file:///home/yasuhide/doc/www.mysql.gr.jp/jpdoc/3.23/manual.ja_Installing.html#Perl_support_problems

を参考に、perl Makefile.PL -static -config も試みたのですが、同様のエ
ラーが出ます。解決の糸口もつかめないのですが…何か心当たりがございまし
たら、よろしくお教えください。

環境は、<a href="http://www.softagency.co.jp/mysql/TIPS/manners.html">http://www.softagency.co.jp/mysql/TIPS/manners.html</a> の記述に従っ
て調べたところ、以下のような出力が得られました。

$ uname -a
Linux localhost.localdomain 2.2.14-1vl6 #1 Tue Mar 14 09:55:12 JST 2000 i586 unknown
$ ls -la /lib/libc*
-rwxr-xr-x   1 root     root      4121755 Jan 15  2000 /lib/libc-2.1.2.so*
lrwxrwxrwx   1 root     root           13 Jul  9 19:30 /lib/libc.so.6 -&gt; libc-2.1.2.so*
lrwxrwxrwx   1 root     root           17 Jul  9 19:31 /lib/libcom_err.so.2 -&gt; libcom_err.so.2.0*
-rwxr-xr-x   1 root     root         7889 Dec  4  1999 /lib/libcom_err.so.2.0*
-rwxr-xr-x   1 root     root        64611 Jan 15  2000 /lib/libcrypt-2.1.2.so*
lrwxrwxrwx   1 root     root           17 Jul  9 19:30 /lib/libcrypt.so.1 -&gt; libcrypt-2.1.2.so*
$ ls -la /lib/libpth*
-rwxr-xr-x   1 root     root       249971 Jan 15  2000 /lib/libpthread-0.8.so*
lrwxrwxrwx   1 root     root           17 Jul  9 19:30 /lib/libpthread.so.0 -&gt; libpthread-0.8.so*
$ cat /etc/ld.so.conf
/usr/X11R6/lib
/usr/kde/lib
/usr/i486-linux-libc5/lib
/usr/vine/lib
/usr/lib/qt/lib

$ gcc --version
egcs-2.91.66
$ gcc -v
Reading specs from /usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/specs
gcc version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release)
$ gcc -print-libgcc-file-name
/usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/libgcc.a
$ gcc -print-search-dirs
install: /usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/
programs: /usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/:/usr/lib/gcc-lib/i386-redhat-linux/:/usr/lib/gcc/i386-redhat-linux/egcs-2.91.66/:/usr/lib/gcc/i386-redhat-linux/:/usr/i386-redhat-linux/bin/i386-redhat-linux/egcs-2.91.66/:/usr/i386-redhat-linux/bin/
libraries: /usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/:/usr/lib/gcc/i386-redhat-linux/egcs-2.91.66/:/usr/i386-redhat-linux/lib/i386-redhat-linux/egcs-2.91.66/:/usr/i386-redhat-linux/lib/:/usr/lib/i386-redhat-linux/egcs-2.91.66/:/usr/lib/:/lib/i386-redhat-linux/egcs-2.91.66/:/lib/:/usr/lib/i386-redhat-linux/egcs-2.91.66/:/usr/lib/

$ perl -V
Summary of my perl5 (5.0 patchlevel 5 subversion 3) configuration:
  Platform:
    osname=linux, osvers=2.2.5-15, archname=i386-linux
    uname='linux venus.athome 2.2.5-15 #1 mon apr 19 23:00:46 edt 1999 i686 unknown '
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=undef useperlio=undef d_sfio=undef
  Compiler:
    cc='cc', optimize='-O2', gccversion=egcs-2.91.66 19990314/Linux (egcs-1.1.2 release)
    cppflags='-Dbool=char -DHAS_BOOL'
    ccflags ='-Dbool=char -DHAS_BOOL'
    stdchar='char', d_stdstdio=undef, usevfork=false
    intsize=4, longsize=4, ptrsize=4, doublesize=8
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    alignbytes=4, usemymalloc=n, prototype=define
  Linker and Libraries:
    ld='cc', ldflags =' -L/usr/local/lib'
    libpth=/usr/local/lib /lib /usr/lib
    libs=-lnsl -ldl -lm -lc -lposix -lcrypt
    libc=, so=so, useshrplib=false, libperl=libperl.a
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-rdynamic'
    cccdlflags='-fpic', lddlflags='-shared -L/usr/local/lib'


Characteristics of this binary (from libperl): 
  Locally applied patches:
        jperl5.005_03-990822.pat - end of week
  Built under linux
  Compiled at Aug 31 1999 01:02:57
  @INC:
    /usr/lib/perl5/5.00503/i386-linux
    /usr/lib/perl5/5.00503
    /usr/lib/perl5/site_perl/5.005/i386-linux
    /usr/lib/perl5/site_perl/5.005
    .

$ env | grep -i path
PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/usr/vine/bin:/usr/local/bin:/usr/kde/bin:/usr/lib/qt/bin:/home/yasuhide/bin
$ env | grep -i library
(出力なし)

$ mysqlbug

<span class="quote1">&gt;Description:</span>
	&lt;precise description of the problem (multiple lines)&gt;
<span class="quote1">&gt;How-To-Repeat:</span>
	&lt;code/input/activities to reproduce the problem (multiple lines)&gt;
<span class="quote1">&gt;Fix:</span>
	&lt;how to correct or work around the problem, if known (multiple lines)&gt;

<span class="quote1">&gt;Submitter-Id:	&lt;submitter ID&gt;</span>
<span class="quote1">&gt;Originator:	Yasuhide OOMORI</span>
<span class="quote1">&gt;Organization:</span>
  大森保英 / かずさのすけ。
<span class="quote1">&gt;</span>
<span class="quote1">&gt;MySQL support: [none | licence | email support | extended email support ]</span>
<span class="quote1">&gt;Synopsis:	&lt;synopsis of the problem (one line)&gt;</span>
<span class="quote1">&gt;Severity:	&lt;[ non-critical | serious | critical ] (one line)&gt;</span>
<span class="quote1">&gt;Priority:	&lt;[ low | medium | high ] (one line)&gt;</span>
<span class="quote1">&gt;Category:	mysql</span>
<span class="quote1">&gt;Class:		&lt;[ sw-bug | doc-bug | change-request | support ] (one line)&gt;</span>
<span class="quote1">&gt;Release:	mysql-3.23.21-beta (Official MySQL RPM)</span>
<span class="quote1">&gt;Server: /usr/bin/mysqladmin  Ver 8.7 Distrib 3.23.21-beta, for pc-linux-gnu on i586</span>
TCX Datakonsult AB, by Monty

Server version		3.23.21-beta-log
Protocol version	10
Connection		Localhost via UNIX socket
UNIX socket		/var/lib/mysql/mysql.sock
Uptime:			12 hours 9 min 26 sec

Threads: 1  Questions: 104  Slow queries: 0  Opens: 16  Flush tables: 1  Open tables: 7 Queries per second avg: 0.002
<span class="quote1">&gt;Environment:</span>
	&lt;machine, os, target, libraries (multiple lines)&gt;
System: Linux localhost.localdomain 2.2.14-1vl6 #1 Tue Mar 14 09:55:12 JST 2000 i586 unknown
Architecture: i586

Some paths:  /usr/bin/perl /usr/bin/make /usr/bin/gmake /usr/bin/gcc /usr/bin/cc
GCC: Reading specs from /usr/lib/gcc-lib/i386-redhat-linux/egcs-2.91.66/specs
gcc version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release)
Compilation info: CC='egcs'  CFLAGS=' -O6 -fomit-frame-pointer'  CXX='egcs'  CXXFLAGS=' -O6 -fomit-frame-pointer 	          -felide-constructors -fno-exceptions -fno-rtti'  LDFLAGS=''
LIBC: 
lrwxrwxrwx   1 root     root           13 Jul  9 19:30 /lib/libc.so.6 -&gt; libc-2.1.2.so
-rwxr-xr-x   1 root     root      4121755 Jan 15  2000 /lib/libc-2.1.2.so
-rw-r--r--   1 root     root     20049174 Jan 15  2000 /usr/lib/libc.a
-rw-r--r--   1 root     root          178 Jan 15  2000 /usr/lib/libc.so
Configure command: ./configure  --disable-shared --with-mysqld-ldflags=-all-static --with-client-ldflags=-all-static --enable-assembler --with-mysqld-user=mysql --with-unix-socket-path=/var/lib/mysql/mysql.sock --prefix=/ --with-extra-charsets=complex --exec-prefix=/usr --libexecdir=/usr/sbin --sysconfdir=/etc --datadir=/usr/share --localstatedir=/var/lib/mysql --infodir=/usr/info --includedir=/usr/include --mandir=/usr/man '--with-comment=Official MySQL RPM'
Perl: This is perl, version 5.005_03 built for i386-linux
EUC version

$ ldd /usr/bin/mysql
        not a dynamic executable
$ ldd /usr/lib/libmysqlclient.so
        libnsl.so.1 =&gt; /lib/libnsl.so.1 (0x2aada000)
        libm.so.6 =&gt; /lib/libm.so.6 (0x2aaf1000)
        libz.so.1 =&gt; /usr/lib/libz.so.1 (0x2ab0e000)
        libcrypt.so.1 =&gt; /lib/libcrypt.so.1 (0x2ab1d000)
        libpthread.so.0 =&gt; /lib/libpthread.so.0 (0x2ab4a000)
        libc.so.6 =&gt; /lib/libc.so.6 (0x2ab5b000)
        /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x55555000)
-- 
大森保英

</pre>
</div>
<p class="button"><a href="2291">[前]</a><a href="2293">[次]</a><a href="../list/2201-2300">[番号順一覧]</a><a href="../thread/2201-2300">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="2292">   2292 2000-07-24 00:41 [Yasuhide OOMORI / 大] Cannot build Msql-Mysql-modules-1.2214  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2295">   2295 2000-07-24 08:17 ┗[&lt;takeshi@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2304">   2304 2000-07-25 00:17 　┣[Yasuhide OOMORI / 大]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2307">   2307 2000-07-25 12:22 　┃┗[&lt;takeshi@xxxxxxxxxx&gt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2315">   2315 2000-07-27 01:24 　┗[Yasuhide OOMORI / 大] gcc-2.95.2 (Re: Cannot build Msql-Mysql-modules-1.2214)</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2316">   2316 2000-07-27 08:37 　　┗[&lt;takeshi@xxxxxxxxxx&gt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2318">   2318 2000-07-27 10:20 　　　┗[とみたまさひろ &lt;tomm]                                 </a></span>
</pre>
</body>
</html>
