<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:10981</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="10980.html">[前]</a><a href="10982.html">[次]</a><a href="../list/10901-11000.html">[番号順一覧]</a><a href="../thread/10901-11000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:10981
</p>
<div class="header">
<p>
From: Kousuke Furuhata &lt;Kousuke Furuhata &lt;furuhata@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 14 Feb 2005 16:43:44 +0900<br>
Subject: [mysql 10981] Re: MySQL+PHPでファイル／フォルダ名検索システムを作りたい<br>

</p>
</div>
<div class="body">
<pre>
初めまして、古畑と申します。

DBを使う必要はないと思います。

PHPで検索インターフェースを作成し、与えられたファイル名（またはパス？）
を元に対象ディレクトリを検索。
一致したものを表示。

で、十分ではないでしょうか。

DBを使わない分、速度の問題等あるとは思いますが、これは費用対効果で割り切
れるかどうかだと思います。

上記の方法ですと、割とシンプルに実装できると思います。

naya wrote:
<span class="quote1">&gt; こんにちは。nayaと申します。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 職場で共有しているファイルサーバーを対象に、Windowsの [F3]キー・ライクな</span>
<span class="quote1">&gt; ファイル／フォルダ名検索システムを作りたいのですが、素人なりに、PHP+MySQL</span>
<span class="quote1">&gt; で実現できないかと考えています。具体的な方法として、</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; (1) DOS窓で次のようなファイルパスリストを作成する</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; DIR /s /b c:\ &gt; c:\file.txt</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; （２〜３分ほどかかって、４万行ほどのテキストが出力されます）</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; (2)出来上がったリストに対し、ファイルパス１行＝１レコードのinsert文に</span>
<span class="quote1">&gt; 　なるようにPerlで加工し、次のようなSQL文を実行する</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; create database url;</span>
<span class="quote1">&gt; use url;</span>
<span class="quote1">&gt; create table t_url(fullpass text);</span>
<span class="quote1">&gt; insert into t_url(fullpass)values('\\\\fileserver\\word\\hoge1.doc');</span>
<span class="quote1">&gt; insert into t_url(fullpass)values('\\\\fileserver\\excl\\hoge2.xls');</span>
<span class="quote1">&gt; insert into t_url(fullpass)values('\\\\fileserver\\pwpt\\hoge3.ppt');</span>
<span class="quote1">&gt; 	:(以下４万行)</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; (3) 出来上がったものMySQLにinsertする</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; …一応、以上の手順によるプロトタイプはできあがり、検索もうまく動作するよ</span>
<span class="quote1">&gt; うにはなりました。しかしいうまでもなく、ディレクトリ構造は刻々と変化して</span>
<span class="quote1">&gt; いるわけで、せめて１時間に一回程度はデータベースを更新したいと思います。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ですが、自動で更新するためのスマートな方策が思いつきません。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 例えば。Windowsのタスクスケジューラで以上の(1)(2)(3)をDOSの batファイル</span>
<span class="quote1">&gt; として一時間に一回更新させるようにすることってできますでしょうか？（ただ</span>
<span class="quote1">&gt; し更新の際は既存のデータベースであるurlをdropしてから(1)〜(3)を実行する）</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; それとも、PHP+MySQLでという発想がそもそも間違っていますでしょうか？</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; どうしてもWebベースのファイル名／フォルダ名検索システムにしたいのですが</span>
<span class="quote1">&gt; もっと何かいい方法があるようでしたらあわせてご教示いただけますと幸いです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; よろしくお願い致します。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 環境：</span>
<span class="quote1">&gt; PHP 5.0.3</span>
<span class="quote1">&gt; MySQL 4.0.14b(Win)（←古いこと承知）</span>
<span class="quote1">&gt; サーバー: IIS 5.1</span>
<span class="quote1">&gt; クライアントは10台程度（全てWindowsXP-SP2、IE6という構成）</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; --</span>
<span class="quote1">&gt; naya,</span>
<span class="quote1">&gt; SNA02388@xxxxxxxxxx</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>

-- 
-- 住商グレンジャー株式会社(<a href="http://www.monotaro.com">http://www.monotaro.com</a>)
-- 古畑 耕輔 / Furuhata Kousuke
-- TEL：06-6262-3507	FAX:06-6262-3547
-- MAIL:furuhata@xxxxxxxxxx
-- 


</pre>
</div>
<p class="button"><a href="10980.html">[前]</a><a href="10982.html">[次]</a><a href="../list/10901-11000.html">[番号順一覧]</a><a href="../thread/10901-11000.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="10976.html">  10976 2005-02-14 12:59 [naya &lt;SNA02388@xxxxx] MySQL+PHPでファイル／フォルダ名検索システムを作りたい</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10977.html">  10977 2005-02-14 13:42 ┣[&quot;waya&quot; &lt;wayama@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10978.html">  10978 2005-02-14 14:01 ┣[川合孝典 &lt;gcd00051@x]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10982.html">  10982 2005-02-14 17:21 ┃┗[深海水草 &lt;VYG01106@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10983.html">  10983 2005-02-14 18:16 ┃　┗[okkan ufo &lt;okkanufo@]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10979.html">  10979 2005-02-14 16:08 ┣[bon &lt;bon@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10980.html">  10980 2005-02-14 16:36 ┃┗[bon &lt;bon@xxxxxxxxxx&gt;]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="10981.html">  10981 2005-02-14 16:43 ┣[Kousuke Furuhata &lt;fu]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10984.html">  10984 2005-02-14 21:06 ┣[Hiromasa Ochiai &lt;ohi]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10985.html">  10985 2005-02-14 22:17 ┗[naya &lt;SNA02388@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11013.html">  11013 2005-02-17 14:54 　┗[深海水草 &lt;VYG01106@x]                                     </a></span>
</pre>
</body>
</html>
