<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8620</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="8619.html">[前]</a><a href="8621.html">[次]</a><a href="../list/8601-8700.html">[番号順一覧]</a><a href="../thread/8601-8700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8620
</p>
<div class="header">
<p>
From: TORU NOMURA &lt;TORU NOMURA &lt;toru2008@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 16 Jan 2004 22:30:24 +0900<br>
Subject: [mysql 08620] Re: 累積値を求めたいのですが<br>

</p>
</div>
<div class="body">
<pre>野村です


とみたさん、かわじさん、ありがとうございました。今回は、とみたさんから
教えていただいたユーザ変数をつかってみました。便利ですね、ユーザ変数。

実は、以前このMLに相談させていただいた順位づけをどうしても行わなくては
ならなくなった為です。そのとき宇野さんから教えていただいた方法を試した
のですが、テンポラリテーブルではどうしてもうまくいきませんでした。

そこで、
1：順位のないtemporary table（tema）をつくります。
値(ati)
37
16
12
9
9
7

2：値と同じ値の数からなるtemporary table（temb）をつくります。
値(ati)	数(kazu)
37		1
16		1
12		1
9		2
7		1

3：ここで教えていただいた方法で値(ati)に対応した順位を求めます。
set @wjni=0;
update tmpb set jni=(@wjni:=@wjni+kazu)-kazu+1 order by ati desc;
値(ati)	数(kazu)	順位(jni)
37		1		1
16		1		2
12		1		3
9		2		4
7		1		6

4：後は、二つのテーブルを値(ati)でjoinしてあげれば終わりです。





---------+---------+---------+---------+---------+---------+---------+--
■ TORU NOMURA / 野村　亨
■ toru2008@xxxxxxxxxx / torunomura@xxxxxxxxxx
■ <a href="http://www.geocities.jp/toru2008/">http://www.geocities.jp/toru2008/</a>




</pre>
</div>
<p class="button"><a href="8619.html">[前]</a><a href="8621.html">[次]</a><a href="../list/8601-8700.html">[番号順一覧]</a><a href="../thread/8601-8700.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="8613.html">   8613 2004-01-15 23:35 [TORU NOMURA &lt;toru200] 累積値を求めたいのですが                </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8614.html">   8614 2004-01-15 23:49 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="8620.html">   8620 2004-01-16 22:30 ┃┗[TORU NOMURA &lt;toru200]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8615.html">   8615 2004-01-16 00:29 ┗["Kawaji, Shinya" &lt;ka]                                       </a></span>
</pre>


</body></html>