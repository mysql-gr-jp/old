<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:10705</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="10704">[前]</a><a href="10706">[次]</a><a href="../list/10701-10800">[番号順一覧]</a><a href="../thread/10701-10800">[スレッド一覧]</a></p>
<p class="id">
mysql:10705
</p>
<div class="header">
<p>
From: al-kamil &lt;al-kamil &lt;al-kamil@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 20 Dec 2004 10:22:32 +0900<br>
Subject: [mysql 10705] Re: SELECTの速度が遅い<br>

</p>
</div>
<div class="body">
<pre>
MySQLでは、どうか確認はしたことはありませんが
DB2, Oracleでは、Where句のみで結合条件を書いた場合に
抽出速度が低下することがあるようです。
（オプティマイザーの問題で、起こります
　この場合、ＤＢ自体の設定を細かく行わなければなりません。）

Where句のみでの結合を行わずに、Form句でJOINを利用してみては
いかがでしょうか？
DB2, Oracleでは、この方法で速度を上げることができました。



On Mon, 20 Dec 2004 05:56:25 +0900
mattun &lt;mattun@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; みなさま、はじめまして、Mysql初心者の松丸と申します。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 現在仕事上で、phpとmysqlの開発をしています。サーバーの移転作業があり、mysql-3.23.57から、mysql-4.0.21に移行し </span>
<span class="quote1">&gt; ました。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; DBの中で、message、user、二つのテーブルに対して以下ような感じSELECTしています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; select b.id, b.name from messages as a, users as b where a.target=b.id  </span>
<span class="quote1">&gt; and b.sid=53 and a.isread='f' group by b.id order by b.id</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SQLの知識が乏しいためphpMyAdminを使用しているのですが、上記のクエリを行うと、平均0.5ぐらいで結果が返ってきます。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; これを、</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; $db = mysql_connect(&quot;localhost&quot;, &quot;ユーザー名&quot;,&quot;パスワード&quot;);</span>
<span class="quote1">&gt; mysql_select_db(&quot;DB名&quot;,$db);</span>
<span class="quote1">&gt; $query_alart = &quot;select b.id, b.name from messages as a, users as b  </span>
<span class="quote1">&gt; where a.target=b.id and b.sid=53 and a.isread='f' group by b.id order  </span>
<span class="quote1">&gt; by b.id&quot;;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; と書いたphpファイルで実行させると、だいたい５秒ぐらいはかかるんですね。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; これは、php側の処理の問題なのか、それともmysqlのインデックスなり、メモリの割り当てなりが原因なのでしょうか？</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 以上よろしくお願いいたします。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 松丸頒泰</span>
<span class="quote1">&gt; mattun@xxxxxxxxxx</span>
<span class="quote1">&gt; <a href="http://www.meganebu.com/">http://www.meganebu.com/</a></span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>

-- 
al-kamil &lt;al-kamil@xxxxxxxxxx&gt;


</pre>
</div>
<p class="button"><a href="10704">[前]</a><a href="10706">[次]</a><a href="../list/10701-10800">[番号順一覧]</a><a href="../thread/10701-10800">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="10702">  10702 2004-12-20 05:56 [mattun &lt;mattun@xxxxx] SELECTの速度が遅い                      </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10703">  10703 2004-12-20 09:23 ┣[Hideki SUNADA &lt;hidek]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10704">  10704 2004-12-20 10:03 ┣[SUGAWARA Hajime &lt;sug]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="10705">  10705 2004-12-20 10:22 ┗[al-kamil &lt;al-kamil@x]                                       </a></span>
</pre>
</body>
</html>
