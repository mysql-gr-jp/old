<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11326</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="11325.html">[前]</a><a href="11327.html">[次]</a><a href="../list/11301-11400.html">[番号順一覧]</a><a href="../thread/11301-11400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:11326
</p>
<div class="header">
<p>
From: Ryuji Matsushita &lt;Ryuji Matsushita &lt;maturyu@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 15 Apr 2005 09:34:42 +0900<br>
Subject: [mysql 11326] Re: レプリケーションについて<br>

</p>
</div>
<div class="body">
<pre>松下です

もう少し状況をお知らせください。
下記のログはスレーブ側のログですよね。
マスター側のログはどのようになっていますか？
マスターがダウンとは正常にシャットダウンをした場合でしょうか？
ダウン時の挙動をマスター側、スレーブ側で時系列に整理してください。

マスター側のバイナリーログがOPEN出来ないようですが
DBの設定とは異なるところに原因があるのではないでしょうか？

私のところでマスター側を再起動した時のログを貼付けます


<span class="quote1">&gt; 050415  9:25:42  Slave: received 0 length packet from server, apparent master shutdown:</span>
↑ここでマスター側をシャットダウン

<span class="quote1">&gt; 050415  9:25:42  Slave I/O thread: Failed reading log event, reconnecting to retry, log 'ホスト名-bin.001' position XXXXXXX</span>
↑当然バイナリーログが読めない

<span class="quote1">&gt; 050415  9:25:42  Slave I/O thread: error reconnecting to master 'ユーザー名@マスター側ホスト名:3306': Error: 'Lost connection to MySQL server during query'  errno: 2013  retry-time: 60  retries: 86400</span>
↑スレーブ側で設定したマスタ側へのI/Oのユーザーが接続できない。再接続待ち。

<span class="quote1">&gt; 050415  9:26:42  Slave: connected to master 'ユーザー名@マスター側ホスト名:3306',replication resumed in log 'マスター側ホスト名-bin.001' at position XXXXXXXX</span>
↑再接続完了



<span class="quote1">&gt; 050414 22:49:01 Error reading packet from server: Binary log is not open</span>
<span class="quote1">&gt; (server_errno=1236)</span>
<span class="quote1">&gt; 050414 22:49:01 Got fatal error 1236: 'Binary log is not open' from master</span>
<span class="quote1">&gt; when reading data from binary log</span>
<span class="quote1">&gt; 050414 22:49:01 Slave I/O thread exiting, read up to log 'ホスト名-bin.003',</span>
<span class="quote1">&gt; position 628221</span>
<span class="quote1">&gt; /usr/local/mysql/libexec/mysqld: ready for connections.</span>
<span class="quote1">&gt; Version: '4.0.24-max-log'  socket: '/tmp/mysql.sock'  port: 3306  Source</span>
<span class="quote1">&gt; distribution</span>

+++++++++++++++++++++++++++++++++++++++++++++++++++
 Sony Digital Network Applications Inc.(SDNA)
 Navigation Track  Information System
 松下　龍士(Ryuji Matsushita) maturyu@xxxxxxxxxx
+++++++++++++++++++++++++++++++++++++++++++++++++++


</pre>
</div>
<p class="button"><a href="11325.html">[前]</a><a href="11327.html">[次]</a><a href="../list/11301-11400.html">[番号順一覧]</a><a href="../thread/11301-11400.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="11324.html">  11324 2005-04-14 22:59 [柴垣　大樹 &lt;sibagaki] レプリケーションについて                </a></span>
<span class="current">-&gt;&nbsp;<a href="11326.html">  11326 2005-04-15 09:34 ┗[Ryuji Matsushita &lt;ma]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11328.html">  11328 2005-04-15 14:12 　┗[柴垣　大樹 &lt;sibagaki]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11329.html">  11329 2005-04-15 15:32 　　┗[Ryuji Matsushita &lt;ma]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11330.html">  11330 2005-04-15 16:22 　　　┗[柴垣　大樹 &lt;sibagaki]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11331.html">  11331 2005-04-15 17:25 　　　　┗[Ryuji Matsushita &lt;ma]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11333.html">  11333 2005-04-18 14:08 　　　　　┗[柴垣　大樹 &lt;sibagaki]                             </a></span>
</pre>


</body></html>