<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15105</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="15104.html">[前]</a><a href="15106.html">[次]</a><a href="../list/15101-15200.html">[番号順一覧]</a><a href="../thread/15101-15200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:15105
</p>
<div class="header">
<p>
From: Honda Takayuki &lt;Honda Takayuki &lt;hondat10@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 14 Dec 2009 19:00:44 +0900<br>
Subject: [mysql 15105] レプリケーションエラー(server id was not set)<br>

</p>
</div>
<div class="body">
<pre>本多と申します。

master-slave構成のシステムにて、master側のserver_id=4,slave側=2で
動作していたシステムがありました。

システム稼働中に、master側のmy.cnf設定でserver_id=4の項がコメントアウトされており、
あるタイミングでmaster側を再起動したら、

091214 17:46:14 [Note] Slave I/O thread: connected to master
'master1@xxxxxxxxxx:3306',  replication started in log
'master1-bin.000854' at position 4
091214 17:46:14 [ERROR] Error reading packet from server:
Misconfigured master - server id was not set ( server_errno=1236)
091214 17:46:14 [ERROR] Got fatal error 1236: 'Misconfigured master -
server id was not set' from master when reading data from binary log
091214 17:46:14 [Note] Slave I/O thread exiting, read up to log
'master1-bin.000854', position 4

というエラーが出力され、レプリケーションが失敗してしまいました。

my.cnfでmaster側のserver_idを設定して再起動すれば、すぐうまくいくような感じはあるのですが、
都合上簡単に落とせない為、オンラインかslave側でどうにか出来る方法は無いでしょうか。
master側のserver_idをshow variables;で確認すると、defaultの1に設定されているのですが、
なぜserver_idを認識出来ないのでしょう？

環境は
db:mysql 5.0.41
os:CentOS5.3
となっております。

試した事は、
再起動前のbin-log(server_id=4)を全てpurgeした。
slave側のserver_idを5とか6にしてみた。
といったところです（全て失敗でした）。

大変恐縮ですが、お力添えの程よろしくお願い申し上げます。

</pre>
</div>
<p class="button"><a href="15104.html">[前]</a><a href="15106.html">[次]</a><a href="../list/15101-15200.html">[番号順一覧]</a><a href="../thread/15101-15200.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="15105.html">  15105 2009-12-14 19:00 [Honda Takayuki &lt;hond] レプリケーションエラー(server id was not set)</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15106.html">  15106 2009-12-14 20:26 ┗[Honda Takayuki &lt;hond]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15115.html">  15115 2009-12-24 15:54 　┗[岩崎　誠司 &lt;iwasaki_] バイナリデータの取り込みについて    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15116.html">  15116 2009-12-24 16:01 　　┣[&lt;y-iida@xxxxxxxxxx&gt; ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15117.html">  15117 2009-12-24 16:25 　　┣[岩崎　誠司 &lt;iwasaki_]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15118.html">  15118 2009-12-24 17:17 　　┃┗["Eigo Mori" &lt;eigom@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15121.html">  15121 2009-12-24 19:45 　　┣[Yoshiaki Yanagimoto ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15122.html">  15122 2009-12-25 01:59 　　┗[ちさ &lt;admin@xxxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15123.html">  15123 2009-12-25 12:18 　　　┗[岩崎　誠司 &lt;iwasaki_]                                 </a></span>
</pre>


</body></html>