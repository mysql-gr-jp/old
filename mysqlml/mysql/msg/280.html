<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:280</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="279.html">[前]</a><a href="281.html">[次]</a><a href="../list/201-300.html">[番号順一覧]</a><a href="../thread/201-300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:280
</p>
<div class="header">
<p>
From: 民斗 &lt;民斗 &lt;tommy@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 18 Oct 1998 05:21:52 +0900<br>
Subject: [mysql 280] SQL の検索条件について<br>

</p>
</div>
<div class="body">
<pre>

MySQL を使った日本語文書検索システムを作ってみました。

が、会社の業務で作ったので、残念ながら公開できません…(^^;

あらかじめ、chasen で文書を単語毎に区切り、名詞だけを抜き出して、
MySQL で作ったキーワードテーブルに登録しておき、そのテーブルを検索する
という方式です。

まだサンプルデータの数が少ないですが、期待通り(期待以上かも)の速度で
動いてくれてます。


で、一つ質問があります。MySQL というか SQL についての質問なんですが…。

次のようなテーブル(T)に、文書番号(id)とキーワード(str)を登録してあると
します。

	create table T (id int not null, str char(32) not null);
	# index は省略

1) &quot;hoge&quot; というキーワードと &quot;fuga&quot; というキーワードの両方を含む文書を
  検索する時は、次のようにできます。

	select a.id from T as a left join T as b using (id)
	where a.str=&quot;hoge&quot; and b.str=&quot;fuga&quot;;

2) &quot;hoge&quot; または &quot;fuga&quot; を含むという場合は、次でできます。

	select id from T where str=&quot;hoge&quot; or str=&quot;fuga&quot;;

ここまではいいんですが、もっと複雑な条件の時にどうすればいいのか
わかりません。例えば、

	「&quot;hoge&quot; または &quot;fuga&quot; を含み、かつ &quot;herohero&quot; も含む」

とか…。しかもそれをプログラムから自動的に生成したいのです。

どうも、1) と 2) の文法が違いすぎて、SQL では１行で書くのは無理のような
気がしてるのですが…。

なんかうまい方法があるでしょうか？
--
民斗 &lt;tommy@xxxxxxxxxx&gt;

</pre>
</div>
<p class="button"><a href="279.html">[前]</a><a href="281.html">[次]</a><a href="../list/201-300.html">[番号順一覧]</a><a href="../thread/201-300.html">[スレッド一覧]</a></p>
</body>
</html>
