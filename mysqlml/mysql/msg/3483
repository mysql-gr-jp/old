<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3483</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="3482">[前]</a><a href="3484">[次]</a><a href="../list/3401-3500">[番号順一覧]</a><a href="../thread/3401-3500">[スレッド一覧]</a></p>
<p class="id">
mysql:3483
</p>
<div class="header">
<p>
From: 崎山　宏之  &lt;崎山　宏之  &lt;sakiyama@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 29 Mar 2001 13:02:06 +0900<br>
Subject: [mysql 03483] Re: 「次の○○件」の作り方<br>

</p>
</div>
<div class="body">
<pre>

崎山です。
山本さん、ご丁寧なお返事ありがとうございます。


<span class="quote1">&gt; これはMySQLというより、PHPネタですので趣旨がはずれるかと思いますが</span>
今回の質問内容で、色々と本をあさりまして、「この内容は『php-jp メイリング
リスト』などに投げかけた方が、適切だったかな？」と私自身思っておりました。
それでも、皆さんにはたくさんのお返事を頂きまして、大変有難いと思っており
ます。


<span class="quote1">&gt; ここにソースを出して説明しようかと考えたのですが、本人に勉強してもらうために</span>
<span class="quote1">&gt; もあるのでここでは掲載いたしません。</span>
はい。お心遣い、大変嬉しく思っております。


<span class="quote1">&gt; 4)前ページ数と後ページ数を計算する(前ページは1ページ、後ページは3ページです</span>
<span class="quote1">&gt; ね。)</span>
ということは、合計5ページあり現在2ページ目にいる。
つまり検索対象が100件未満の検索をしている場合の話ですね。


<span class="quote1">&gt; 7)前ページがあるか(つまりは１ページ目か)を判定し、そうでなければ&quot;前のxx件&quot;を</span>
<span class="quote1">&gt; 　表示する。またリンクタグも&lt;A HREF=search.php?page=(前ページ</span>
<span class="quote1">&gt; 数)&amp;keyword=$keyword&gt;を</span>
<span class="quote1">&gt; 　設定する。</span>
正直言いますと、「次の20件」をクリックするたびに「select」させるのかどう
か自体を理解しておりませんでした。
※search.phpを呼び出すことは「selcet」している意味に取りました。

今回頂いた例で言いますと、99件のデータがあった場合（100件未満）、1〜20件
目を1ページ目で表示します。残り79件が2〜5ページ目で表示するわけですが、
「その残り79件を引っ張り出すのにselectよりも速い方法があるのか？それとも
無いのか？」と思っておりました。

と言いますのも質問をする前までは、「一度のselect文で99件引っ掛かっている
けれども、頭の 1〜 20件目までしか表示しない。残り79件はキャッシュみたいに
どこかに貯めておいて（別にどこでもいい）、次ページでその残っている79件の
中の 1〜 20件目（実際には 21〜 40件目）を読み出すことが出来るのかな？もし
それが出来ると、毎回 selectするよりも速いのかも !?」と考えておりました。
初歩的な部分から分かっていませんでしたので、山本さんの 1）〜 8）のご説明
は大変参考になりました。

今、自分で書いていて思ったのですが、データを取りに行く場所が、MySQLかキャッ
シュかの差だけであって、余り大きな差は出ない考えですね。結局探しに行く
ということはselectしていることですから、この考えは捨てることにします。
※訳分からない文ですね。すいません。


<span class="quote1">&gt; 検索結果件数から表示する件数を割った余りを&quot;後のyy件&quot;と表示する必要がありま</span>
<span class="quote1">&gt; す。</span>
あっ！これを忘れていました。
検索結果の最終1ページ前で、残りが20件未満なのに、「次の20件」と出ていまし
たら、大変カッコ悪いですね。
本当に完全に忘れていました。助かりました！


山本さんのご意見、参考にさせて頂きます。
ありがとうございました。

</pre>
</div>
<p class="button"><a href="3482">[前]</a><a href="3484">[次]</a><a href="../list/3401-3500">[番号順一覧]</a><a href="../thread/3401-3500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="3445">   3445 2001-03-27 18:10 [崎山　宏之  &lt;sakiyam] 「次の○○件」の作り方                  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3446">   3446 2001-03-27 18:31 ┣[Akihiko Shinohara &lt;s]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3447">   3447 2001-03-27 18:34 ┣[&quot;Akinobu YAMAMOTO&quot; &lt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3449">   3449 2001-03-27 19:18 ┃┗[崎山　宏之  &lt;sakiyam]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3482">   3482 2001-03-29 11:04 ┃　┗[&quot;Akinobu YAMAMOTO&quot; &lt;]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="3483">   3483 2001-03-29 13:02 ┃　　┗[崎山　宏之  &lt;sakiyam]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3451">   3451 2001-03-27 19:47 ┗[Hiroyuki Hasegawa &lt;a]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3461">   3461 2001-03-28 14:44 　┣[崎山　宏之  &lt;sakiyam]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3466">   3466 2001-03-28 16:27 　┃┣[Hiroyuki Hasegawa &lt;a]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3468">   3468 2001-03-28 16:57 　┃┃┗[崎山　宏之  &lt;sakiyam]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3467">@  3467 2001-03-28 16:46 　┃┗[Toyoshima Hiroshi &lt;t]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3469">   3469 2001-03-28 17:23 　┃　┗[崎山　宏之  &lt;sakiyam]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3470">   3470 2001-03-28 17:40 　┃　　┣[Toyoshima Hiroshi &lt;t]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3477">   3477 2001-03-28 23:09 　┃　　┃┗[&quot;崎山　宏之&quot; &lt;sakiya]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3471">   3471 2001-03-28 17:41 　┃　　┣[mohri &lt;mohri@xxxxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3476">   3476 2001-03-28 20:30 　┃　　┗[Toyoshima Hiroshi &lt;t]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3475">   3475 2001-03-28 20:17 　┗[とみたまさひろ &lt;tomm]                                     </a></span>
</pre>
</body>
</html>
