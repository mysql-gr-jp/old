<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15631</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15630">[前]</a><a href="15632">[次]</a><a href="../list/15601-15700">[番号順一覧]</a><a href="../thread/15601-15700">[スレッド一覧]</a></p>
<p class="id">
mysql:15631
</p>
<div class="header">
<p>
From: Takeshi Hayase &lt;Takeshi Hayase &lt;linus@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 20 Sep 2011 12:51:38 +0900<br>
Subject: [mysql 15631] Re: LEFT JOIN で結合先がない場合<br>

</p>
</div>
<div class="body">
<pre>
初めまして。早瀬と申します。

<span class="quote1">&gt; と書いたのですが、これでは結合先がないものは空値またはNULLで返ってこ</span>
ず、期待した結果になりませんでした（情報Aと情報Bの２行しか返ってこなかっ
た）。

where句でshouhin_id = 1で絞り込んでいますので、
2行しか返ってこないのは正しいですね。
こうすると全て出るかと思います。

SELECT  tabJ.jouhou
FROM tabK LEFT JOIN tabJ ON tabK.id = tabJ.kuni_id and shouhin_id = 1
ORDER BY tabK.id

パッと思いつきで記述したので、何か見落としがあったらご容赦を。
以上です。

(2011/09/20 9:58), 久光 一誠 wrote:
<span class="quote1">&gt; 久光と申します</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 下記のような３つのテーブルがあり、</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 商品テーブル(tabS)</span>
<span class="quote1">&gt; [id] [name]</span>
<span class="quote1">&gt; 1 テレビ</span>
<span class="quote1">&gt; 2 洗濯機</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 国テーブル(tabK)</span>
<span class="quote1">&gt; [id] [name]</span>
<span class="quote1">&gt; 1 日本</span>
<span class="quote1">&gt; 2 米国</span>
<span class="quote1">&gt; 3 中国</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 国別情報テーブル(tabJ)</span>
<span class="quote1">&gt; [shouhin_id] [kuni_id] [jouhou]</span>
<span class="quote1">&gt; 1 1 情報A</span>
<span class="quote1">&gt; 1 3 情報B</span>
<span class="quote1">&gt; 2 2 情報C</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; このテーブル構成から例えばテレビに関する国別情報を国テーブルのid順に</span>
<span class="quote1">&gt; 　情報A</span>
<span class="quote1">&gt; 　（空値またはNULL）</span>
<span class="quote1">&gt; 　情報B</span>
<span class="quote1">&gt; という形で取り出そうと思い</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SELECT  tabJ.jouhou</span>
<span class="quote1">&gt; FROM tabK LEFT JOIN tabJ ON tabK.id = tabJ.kuni_id</span>
<span class="quote1">&gt; WHERE shouhin_id = 1</span>
<span class="quote1">&gt; ORDER BY tabK.id</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; と書いたのですが、これでは結合先がないものは空値またはNULLで返ってこず、期待した結果になりませんでした（情報Aと情報Bの２行しか返ってこなかった）。</span>
<span class="quote1">&gt; 上記のテーブル構成で、国テーブルのid順に沿って国別情報テーブルから（情報がない場合は空値またはNULLが返ってくるように）取り出すにはどんなSQL文を書いたらいいでしょうか？</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; なお国別情報テーブルは商品IDと国IDのセットが重複しない仕組みにしてあるので、一つの商品に同じ国の情報が複数現れることはない前提で考えています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; よろしくお願いいたします。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>

</pre>
</div>
<p class="button"><a href="15630">[前]</a><a href="15632">[次]</a><a href="../list/15601-15700">[番号順一覧]</a><a href="../thread/15601-15700">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="15628">  15628 2011-09-20 09:58 [久光 一誠 &lt;ds1i-hsmt] LEFT JOIN で結合先がない場合            </a></span>
<span class="current">-&gt;&nbsp;<a href="15631">  15631 2011-09-20 12:51 ┗[Takeshi Hayase &lt;linu]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15632">  15632 2011-09-20 20:44 　┗[久光 一誠 &lt;ds1i-hsmt]                                     </a></span>
</pre>
</body>
</html>
