<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:16213</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="16212.html">[前]</a><a href="16214.html">[次]</a><a href="../list/16201-16300.html">[番号順一覧]</a><a href="../thread/16201-16300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:16213
</p>
<div class="header">
<p>
From: &lt;masaki.kuroda@xxxxxxxxxx&gt;<br>
Date: Wed, 25 Feb 2015 08:09:41 +0000<br>
Subject: [mysql 16213] RE: [mysql 16211] PHP/PDOでSQLの実行時間を制限する方法<br>

</p>
</div>
<div class="body">
<pre>
黒田と申します。

クエリの実行時間が長くて応答が返ってこないというのであれば、
クエリの方を確認した方が良いとは思いますが・・・

MySQL5.7からはmax_statement_timeで強制的に切断ができたと思います。
試したことがありません。。。

もし対象バージョンで無い場合はごめんなさい。

<span class="quote1">&gt; -----Original Message-----</span>
<span class="quote1">&gt; From: Watanabe Tomoyuki [mailto:WATANABE.TOMOYUKI.2@xxxxxxxxxx]</span>
<span class="quote1">&gt; Sent: Wednesday, February 25, 2015 4:56 PM</span>
<span class="quote1">&gt; To: ml@xxxxxxxxxx</span>
<span class="quote1">&gt; Subject: <a href="16212.html">[mysql 16212]</a> RE: <a href="16211.html">[mysql 16211]</a> PHP/PDOでSQLの実行時間を制限</span>
<span class="quote1">&gt; する方法</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 渡辺と申します。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 半分PHPの話になってしまいますが、私の知っている範囲で。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; MySQLのドライバで mysqlndを使っているのであれば、</span>
<span class="quote1">&gt; php.ini に</span>
<span class="quote1">&gt; mysqlnd.net_read_timeout = 秒数</span>
<span class="quote1">&gt; を追記することで制限できると思います。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; タイムアウトになった時に</span>
<span class="quote1">&gt; SQLSTATE[HY000]: General error: 2006 MySQL server has gone away</span>
<span class="quote1">&gt; が返りますので、必要に応じてうまく処理してください。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 参考</span>
<span class="quote1">&gt; <a href="http://php.net/manual/ja/mysqlnd.config.php#ini.mysqlnd.net-read-timeo">http://php.net/manual/ja/mysqlnd.config.php#ini.mysqlnd.net-read-timeo</a></span>
<span class="quote1">&gt; ut</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 的が外れていたらご容赦ください。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; -----Original Message-----</span>
<span class="quote1">&gt; From: 田口 浩 [mailto:h-taguchi@xxxxxxxxxx]</span>
<span class="quote1">&gt; Sent: Wednesday, February 25, 2015 3:54 PM</span>
<span class="quote1">&gt; To: 田口 浩</span>
<span class="quote1">&gt; Subject: <a href="16211.html">[mysql 16211]</a> PHP/PDOでSQLの実行時間を制限する方法</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ※個人情報保護のため、宛先を非表示（ＢＣＣ）にて送信しています。</span>
<span class="quote1">&gt; -----------------------------------------------------</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 田口と申します。</span>
<span class="quote1">&gt; （Bcc宛てで済みません。システム上の制限です）</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; PHP/PDOでMySQLを使っていますが、長い時間がかかるSQLを途中で止めること</span>
<span class="quote1">&gt; ができません。</span>
<span class="quote1">&gt; どなたか、方法を教えて貰えないでしょうか?</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; (後略</span>

</pre>
</div>
<p class="button"><a href="16212.html">[前]</a><a href="16214.html">[次]</a><a href="../list/16201-16300.html">[番号順一覧]</a><a href="../thread/16201-16300.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="16211.html">  16211 2015-02-25 15:53 [田口 浩 &lt;h-taguchi@x] PHP/PDOでSQLの実行時間を制限する方法    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16212.html">  16212 2015-02-25 16:56 ┗[Watanabe Tomoyuki &lt;W] RE: [mysql 16211] PHP/PDOでSQLの実行時間を制限する方法</a></span>
<span class="current">-&gt;&nbsp;<a href="16213.html">  16213 2015-02-25 17:09 　┣[&lt;masaki.kuroda@xxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16215.html">  16215 2015-02-25 19:43 　┃┗[田口 浩 &lt;h-taguchi@x] RE: [mysql 16213] RE: [mysql 16211] PHP/PDOでSQLの実行時間を制限する方法</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16214.html">  16214 2015-02-25 19:40 　┗[田口 浩 &lt;h-taguchi@x] RE: [mysql 16212] RE: [mysql 16211] PHP/PDOでSQLの実行時間を制限する方法</a></span>
</pre>
</body>
</html>
