<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9402</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="9401">[前]</a><a href="9403">[次]</a><a href="../list/9401-9500">[番号順一覧]</a><a href="../thread/9401-9500">[スレッド一覧]</a></p>
<p class="id">
mysql:9402
</p>
<div class="header">
<p>
From: Naoya Mihara &lt;Naoya Mihara &lt;strat_caster@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 22 May 2004 20:29:50 +0900 (JST)<br>
Subject: [mysql 09402] 外部 MySQL サーバに JDBC 接続失敗（新参者）<br>

</p>
</div>
<div class="body">
<pre>
原と申します。JAVAとLINUX&amp;MYSQLの環境で勉強中です。
よろしくお願いいたします。

他のMLでも質問中なのですが、
WindowsにインストールしているTomcatから、
MySQLを単独で走らせているLinuxサーバに
サーブレットでJDBC接続を試みているのですが
うまくいきません。

●サーブレットのソース；DB接続箇所
　Connection con =null;
（中略）
　try{
　Class.forName(&quot;org.gjt.mm.mysql.Driver&quot;);
　con = DriverManager.getConnection(&quot;jdbc:mysql://Linuxサーバの
アドレス/DB名?user=ユーザ名&amp;password=パスワード&quot;);
（中略）
　con.close();
}catch(ClassNotFoundException e){
　out.println(&quot;Couldn't load database driver: &quot; + e.getMessage());
}catch(SQLException e){
　out.println(&quot;SQLException caught: &quot;+ e.getMessage()); 
}

●サーブレット実行時のエラーメッセージ
SQLException caught: Cannot connect to MySQL server on (Linuxサーバの
アドレス):3306. Is there a MySQL server running on the machine/port 
you are trying to connect to? (java.net.SocketException)

2番目のcatch文が実行されているようです。

ちなみに、TelnetでLinuxサーバにログインし、同じユーザ名とパスワード
ではMySQLにログインできます。

my.cfgではskip-networkingをコメントアウトし、再起動後
mysqladmin variables | grep skip-networkingで確認すると確かにOFFに
なっています。

又netstat -a | grep mysqlで
LISTEN
unix  2      [ ACC ]     STREAM     LISTENING     280744 /tmp/mysql.sock
という結果も確認しています。

接続するユーザは
grant all privileges on DB名.* to user@&quot;%&quot; identified by 'password' with
grant option;
として作成しています。
又/etc/servicesには次の1行を追加してみました。
mysql           3306/tcp                        # MySQLServer

（現在の環境）
WindowsXP：j2sdk-1_4_1_03、Tomcat5、Eclipse2.1.2
TurboLinuxServer7:MySQL4.0.13

過去ログも一通り目を通したつもりなのですが、行き詰っています。
同じ環境で成功している方がいらっしゃいましたらご教示下さい。
よろしくお願いいたします。

</pre>
</div>
<p class="button"><a href="9401">[前]</a><a href="9403">[次]</a><a href="../list/9401-9500">[番号順一覧]</a><a href="../thread/9401-9500">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="9402">   9402 2004-05-22 20:29 [Naoya Mihara &lt;strat_] 外部 MySQL サーバに JDBC 接続失敗（新参者）</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9404">   9404 2004-05-22 23:32 ┗[&quot;TAKAHASHI, Tomohiro]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9405">   9405 2004-05-22 23:51 　┗[Naoya Mihara &lt;strat_]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9406">   9406 2004-05-23 00:23 　　┗[&quot;TAKAHASHI, Tomohiro]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9407">   9407 2004-05-23 00:40 　　　┗[Naoya Mihara &lt;strat_]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9408">   9408 2004-05-23 00:50 　　　　┣[Naoya Mihara &lt;strat_]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9410">   9410 2004-05-24 01:26 　　　　┃┣[&quot;KATAYOSE hakuo&quot; &lt;ka]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9412">   9412 2004-05-24 01:32 　　　　┃┃┗[&quot;KATAYOSE hakuo&quot; &lt;ka]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9411">   9411 2004-05-24 01:27 　　　　┃┗[とみたまさひろ &lt;tomm]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9409">   9409 2004-05-24 01:13 　　　　┗[&quot;KATAYOSE hakuo&quot; &lt;ka]                               </a></span>
</pre>
</body>
</html>
