<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3147</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="3145.html">[前]</a><a href="3148.html">[次]</a><a href="../list/3101-3200.html">[番号順一覧]</a><a href="../thread/3101-3200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:3147
</p>
<div class="header">
<p>
From: 競馬王 &lt;競馬王 &lt;jra_hunter@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 04 Feb 2001 16:05:36 +0900<br>
Subject: [mysql 03147] Re: ソート結果の順位を一つのカラムに取り込みたいのですが<br>

</p>
</div>
<div class="body">
<pre>
遠藤さん、どうもです。

早速有り難うございます。
できました。こうするんですね。

とりあえず、Table2 ではなくQuery1 の方に直接代入してしまいましたが。(^_^;
（結局同じテーブルに戻さないといけないので。）

ただ、気になったのは実行スピードです。
固定長テキストをINSERTするのは0.7秒で完了するのに、
この処理で5〜6秒かかります。

簡単に説明いたしますと、この処理で騎手、調教師のリーディング順位
を出したいわけで、着順回数（1,2,3,4着以下・各３桁の合計１２桁）でソートしています。
本年総合順位
前年総合順位
本年地域別順位
前年地域別順位
本年平地順位
前年平地順位
本年障害順位
前年障害順位
と、合計8回繰り返します。
平均で１項目あたり平均5秒としますと40秒かかります。
ちょっと！ですね。

何とか効率よくする方法はないでしょうか。
気になるのは
<span class="quote1">&gt; 12.5.8 UPDATE クエリの速度</span>
<span class="quote1">&gt; Also, another way to get fast updates is to delay updates and then do many updates in a row later.</span>
<span class="quote1">&gt; 一文で多くの更新を行えば、もしテーブルがロックされていれば、一文で一個づつ更新するよりも、とても速くなります。 </span>
です。
INSERT では INSERT INTO test_table VALUES ('a'),('b'),('c')....
とすることができるとつい先日教えていただいて、0.7秒まで縮めることができましたので
同じようなことができればかなり速くなるのでは？と思いまして....
ですが、構文が解りませんでした。
単純に、UPDATE test_table SET ('a=a'),('a=b'),('a=c').....
では怒られてしまいました。

それと、集計して気づいたのですが、この方法だと
前年平地成績        前年平地順位
（着順回数です）
     :                    :
     :                    :
000000000001              500
000000000001              501
000000000001              502
000000000001              503
000000000001              504
000000000000              505
000000000000              506
000000000000              507
となってしまいますが、通常の順位付けと同じく
500
500
500
500
500
501
501
としたいわけです。
以前の私の質問はこのことを全く考慮されていないものでした。
失礼をお詫びして、再度お知恵を拝借したいと思います。


-- 
競馬王 &lt;jra_hunter@xxxxxxxxxx&gt;


</pre>
</div>
<p class="button"><a href="3145.html">[前]</a><a href="3148.html">[次]</a><a href="../list/3101-3200.html">[番号順一覧]</a><a href="../thread/3101-3200.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="3137.html">   3137 2001-02-03 16:59 [競馬王 &lt;jra_hunter@x] ソート結果の順位を一つのカラムに取り込みたいのですが</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3140.html">   3140 2001-02-03 18:15 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3144.html">   3144 2001-02-04 05:30 　┗[競馬王 &lt;jra_hunter@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3145.html">   3145 2001-02-04 06:07 　　┗[&lt;endo_t@xxxxxxxxxx&gt; ]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="3147.html">   3147 2001-02-04 16:05 　　　┗[競馬王 &lt;jra_hunter@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3148.html">   3148 2001-02-04 21:50 　　　　┣[競馬王 &lt;jra_hunter@x]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3149.html">   3149 2001-02-04 23:46 　　　　┗[&lt;endo_t@xxxxxxxxxx&gt; ]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3150.html">   3150 2001-02-05 00:22 　　　　　┗[競馬王 &lt;jra_hunter@x]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3151.html">   3151 2001-02-05 00:31 　　　　　　┗[&lt;endo_t@xxxxxxxxxx&gt; ]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3153.html">   3153 2001-02-05 01:10 　　　　　　　┗[競馬王 &lt;jra_hunter@x]                         </a></span>
</pre>
</body>
</html>
