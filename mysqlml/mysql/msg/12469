<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12469</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="12468">[前]</a><a href="12470">[次]</a><a href="../list/12401-12500">[番号順一覧]</a><a href="../thread/12401-12500">[スレッド一覧]</a></p>
<p class="id">
mysql:12469
</p>
<div class="header">
<p>
From: Koji Fukui &lt;Koji Fukui &lt;foxtrot@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 17 Nov 2005 16:19:09 +0900<br>
Subject: [mysql 12469] Re: MySQL 4.1.15 vs 5.0.15    どっちが速い？<br>

</p>
</div>
<div class="body">
<pre>
自己レスです
かなり間があいてしまいましたが、幾つか試してみました。

1.TPC-Wもどき
OSDL DBT-1という負荷ツールで測定した結果です。
bogotransactions per secondは、擬似トランザクション
として見てください。
テーブルは全てInnoDBです。変更したサーバパラメータ
は両バージョン共通で使用しています。

V4.1.15 測定値 271.9 bogotransactions per second
V5.0.15 測定値 252.9 bogotransactions per second

このツールでは、V4.1.15の方が高い値が出ます。
因みに、前のメールにある --innodb_thread_concurrency を
デフォルトの 20で測定すると、
V5.0.15 測定値 173.7 bogotransactions per second
とかなり下がってしまいます。
このパターンでは、V4.1.15の方が早いと言えます。

2.mysqlbench
幾つかの環境で試しに走らせてみました。
  mysqlbenchパラメータは&quot;-c 10 -t 100&quot;
  mysqldパラメータはデフォルト
  結果は全てInnoDBのもの
  SUSE系(Pro,ES,他 バラバラです) Kernel2.6

Case1:CPU=P4 3.2GHz Hyper-Threading=ON
  v4.1.15
    tps ( exclude connections establishing)   : 643.358227
  v5.0.15
    tps ( exclude connections establishing)   : 783.802870

Case2:CPU=P4 2.80GHz
  v4.1.15
    tps ( exclude connections establishing)   : 349.929314
  v5.0.15
    tps ( exclude connections establishing)   : 584.750525

Case3:CPU=Transmeta(tm) Crusoe(tm) Processor TM5800 1GHz
  v4.1.15
    tps ( exclude connections establishing)   : 112.246245
  v5.0.15
    tps ( exclude connections establishing)   : 169.056934

mysqlbench では、V5の方がいい結果が出てしまいました。
DBT-1とは逆の結果ですね。

こちらでは、今のところ効果的なパラメータは見つかってい
ません。

<span class="quote1">&gt; ツールの仕様も影響すると思いますが、上記サイトの結</span>
<span class="quote1">&gt; 果も、その辺の値が影響しているのでは無いでしょうか？</span>
<span class="quote1">&gt; (こっちは推測ですが...)</span>
すいません。本当に推測に終わってしまいました。

Xeon 3.6GHz Hyper-Threading=ON 2発のサーバでも試して
見ましたが、両バージョンとも何故か300前後しか出ません
でした。mysqlbenchを&quot;-c 50&quot;で測ると、そこそこ値が上が
るので、また違った傾向がでるのかもしれません。

追試が出来たら、また報告いたします。(いつ出来るのやら...)

-- 
/*-----------------------------------------------
    Koji Fukui
    foxtrot@xxxxxxxxxx
  -----------------------------------------------*/


</pre>
</div>
<p class="button"><a href="12468">[前]</a><a href="12470">[次]</a><a href="../list/12401-12500">[番号順一覧]</a><a href="../thread/12401-12500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="12311">  12311 2005-10-28 00:25 [とみたまさひろ &lt;tomm] MySQL 4.1.15 vs 5.0.15  どっちが速い？  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12312">  12312 2005-10-28 10:26 ┗[Koji Fukui &lt;foxtrot@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12313">  12313 2005-10-28 11:01 　┣[&quot;Shuichi Tamagawa&quot; &lt;]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="12469">  12469 2005-11-17 16:19 　┗[Koji Fukui &lt;foxtrot@]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12471">  12471 2005-11-17 16:44 　　┗[&quot;Ryuichiro Munechika]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12477">  12477 2005-11-18 14:50 　　　┗[Koji Fukui &lt;foxtrot@]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12478">  12478 2005-11-18 17:39 　　　　┗[Koji Fukui &lt;foxtrot@]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12479">  12479 2005-11-18 18:06 　　　　　┗[Yasufumi Kinoshita &lt;]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12480">  12480 2005-11-18 19:35 　　　　　　┗[Hiroshi Takenaka &lt;pi]                           </a></span>
</pre>
</body>
</html>
