<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:16055</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="16054">[前]</a><a href="16056">[次]</a><a href="../list/16001-16100">[番号順一覧]</a><a href="../thread/16001-16100">[スレッド一覧]</a></p>
<p class="id">
mysql:16055
</p>
<div class="header">
<p>
From: Tsuyoshi Nukii &lt;Tsuyoshi Nukii &lt;nukii@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 18 Nov 2013 22:25:10 +0900<br>
Subject: [mysql 16055] Re: MySQL5.6.13のスレーブサーバがアボートしてしまう現象について<br>

</p>
</div>
<div class="body">
<pre>
舘山 様

貫井（ぬきい）です

ご回答いただきましてありがとうございます。

<span class="quote1">&gt; １）　メモリは十分でしょうか？</span>
<span class="quote1">&gt; 　　　ログの情報では mysqldで　約18GB必要と言ってます</span>

この件ですが、最大接続時の計算なのかと考えていました。

実際その時間帯には、外部からの接続が発生していない状況であり
接続数が無ければ、メモリーの消費はもっと低いのかと考えており
ました。
接続が無い場合でも、それほどのメモリーを消費するものなので
しょうか？


<span class="quote1">&gt; ２）　スレーブを行 ベースレプリケーションとのことです</span>
<span class="quote1">&gt; 　　　ので　/tmp は十分な容量がありますか？</span>

約8Gの容量を設定していますので、十分だと考えております。


以上、よろしくお願いします。

(2013/11/16 13:14), 舘山 聖司 wrote:
<span class="quote1">&gt; 舘山です</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 念のためです</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; １）　メモリは十分でしょうか？</span>
<span class="quote1">&gt; 　　　ログの情報では mysqldで　約18GB必要と言ってます</span>
<span class="quote1">&gt; 　　　実際に　32GBなどのサーバでも他のプロセスなどに</span>
<span class="quote1">&gt; 　　　利用されていてぎりぎり使えないなどもありますので</span>
<span class="quote1">&gt; 　　　もしバックアップ専用などであれば　もっと</span>
<span class="quote1">&gt; 　　　key_buffer_size などを含めて小さく調整してみては</span>
<span class="quote1">&gt; 　　　どうでしょう？</span>
<span class="quote1">&gt; 　　　バックアップ専用でなければ当然パフォーマンスに</span>
<span class="quote1">&gt; 　　　影響しますのでこの辺は調整しなければならなくなる</span>
<span class="quote1">&gt; 　　　でしょう。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ２）　スレーブを行 ベースレプリケーションとのことです</span>
<span class="quote1">&gt; 　　　ので　/tmp は十分な容量がありますか？</span>
<span class="quote1">&gt; 　　　RedHat などでは割と少ないパーティションになってい</span>
<span class="quote1">&gt; 　　　る可能性もあり、この変で　リプリケーションの展開に</span>
<span class="quote1">&gt; 　　　必要なサイズを使えない可能性があります</span>
<span class="quote1">&gt; 　　　リプリケーションのbinlog展開で、mysqlのデータに割</span>
<span class="quote1">&gt; 　　　り当てたディレクトリを使っていないケースがCentOS</span>
<span class="quote1">&gt; 　　　で見受けたことあるもので...</span>
<span class="quote1">&gt; 　　　ステートメントベースとちがって多くのbinlog展開に</span>
<span class="quote1">&gt; 　　　なるのでこの辺もわりと見落としてたことあります。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 検証済みとは思いますが、ダンプ情報だけでこれらの情報が含まれていなかった</span>
<span class="quote1">&gt; ので発言してみました。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; (2013/11/13 12:23), Tsuyoshi Nukii wrote:</span>
<span class="quote2">&gt;&gt; yoku様</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 貫井（ぬきい）です</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; ご回答いただきましてありがとうございます。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 今回、問題となったテーブルは、InsertとUpdateのみで運用しています</span>
<span class="quote2">&gt;&gt; ので条件が合わないように思えます。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; インデックスの項目が更新対象となっているので、このあたりでなにか</span>
<span class="quote2">&gt;&gt; あるのですかね。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 以上</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>


-- 
 株式会社 ベストリザーブ
   貫井 剛 （ぬきい つよし）

   mailto:nukii@xxxxxxxxxx
      URL:<a href="http://www.bestrsv.com">http://www.bestrsv.com</a>
      TEL:06-6253-3800
      FAX:06-6253-3801

</pre>
</div>
<p class="button"><a href="16054">[前]</a><a href="16056">[次]</a><a href="../list/16001-16100">[番号順一覧]</a><a href="../thread/16001-16100">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="16051">  16051 2013-11-12 18:52 [Tsuyoshi Nukii &lt;nuki] MySQL5.6.13のスレーブサーバがアボートしてしまう現象について</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16052">  16052 2013-11-13 11:27 ┗[&quot;yoku ts.&quot; &lt;yoku0825]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16053">  16053 2013-11-13 12:23 　┗[Tsuyoshi Nukii &lt;nuki]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16054">  16054 2013-11-16 13:14 　　┗[舘山 聖司 &lt;tateyan@x]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="16055">  16055 2013-11-18 22:25 　　　┗[Tsuyoshi Nukii &lt;nuki]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16057">  16057 2013-11-24 17:50 　　　　┗[舘山 聖司 &lt;tateyan@x]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="16059">  16059 2013-11-26 15:26 　　　　　┗[Tsuyoshi Nukii &lt;nuki]                             </a></span>
</pre>
</body>
</html>
