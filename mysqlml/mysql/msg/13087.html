<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13087</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="13086.html">[前]</a><a href="13088.html">[次]</a><a href="../list/13001-13100.html">[番号順一覧]</a><a href="../thread/13001-13100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13087
</p>
<div class="header">
<p>
From: buda &lt;buda &lt;buda@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 08 Jun 2006 21:08:12 +0900<br>
Subject: [mysql 13087] Re: 順位をつけたいのですが<br>

</p>
</div>
<div class="body">
<pre>
はじめまして


変数を使うのはダメなのでしょうか？

set @rank:=0;
select @rank:=@rank+1,その他
from 
where 
group by 
order by ktime asc,s0.nenrei asc


<span class="quote1">&gt; risuと申します。お世話になっております。</span>
<span class="quote1">&gt; マラソンのタイム順位を出そうと</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SELECT k0.kno, s0.scode, s0.namae,</span>
<span class="quote1">&gt; s0.frigana, sei.seibetsu, s0.nenrei,</span>
<span class="quote1">&gt; MIN(k0.ktime) As ktime, COUNT(k1.ktime) As rank</span>
<span class="quote1">&gt; FROM sensyu As s0, sei, kiroku As k0, kiroku As k1</span>
<span class="quote1">&gt; WHERE s0.scode=k0.scode And s0.seicode=sei.seicode</span>
<span class="quote1">&gt; And k1.ktime &lt;= k0.ktime GROUP BY k0.kno ORDER BY ktime;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; でトータルのTIME順の順位であるrankで順位付けをおこなっているのですが</span>
<span class="quote1">&gt; 現在のSQLでは同着のタイムがあったとき順位が飛んでしまい同じ順位になってしま</span>
<span class="quote1">&gt; います。</span>


<span class="quote1">&gt; </span>
<span class="quote1">&gt; No. ゼッケン     氏名      ふりがな 性別  年齢     TIME      順位</span>
<span class="quote1">&gt; --+------+--------+-------+----+----+-------+-----</span>
<span class="quote1">&gt;  10        5   田中一郎   たなか     男     54      06:59:59     1</span>
<span class="quote1">&gt; --+------+--------+-------+----+----+-------+-----</span>
<span class="quote1">&gt;  11    196    鈴木次郎  すずき      男     42      07:00:00     3</span>
<span class="quote1">&gt; --+------+--------+-------+----+----+-------+-----</span>
<span class="quote1">&gt;    9       7    佐藤三郎   さとう       男     48      07:00:00     3</span>
<span class="quote1">&gt; --+------+--------+-------+----+----+-------+-----</span>
<span class="quote1">&gt; そこで、</span>
<span class="quote1">&gt; 以下のように</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; No. ゼッケン     氏名      ふりがな 性別  年齢     TIME      順位</span>
<span class="quote1">&gt; --+------+--------+-------+----+----+-------+-----</span>
<span class="quote1">&gt;  10        5   田中一郎   たなか     男     54      06:59:59     1</span>
<span class="quote1">&gt; --+------+--------+-------+----+----+-------+-----</span>
<span class="quote1">&gt;    9       7    佐藤三郎   さとう       男     48      07:00:00     2</span>
<span class="quote1">&gt; --+------+--------+-------+----+----+-------+-----</span>
<span class="quote1">&gt;  11    196    鈴木次郎  すずき      男     42      07:00:00     3</span>
<span class="quote1">&gt; --+------+--------+-------+----+----+-------+-----</span>
<span class="quote1">&gt; 「同着ならば年齢が上の人に順位をつける」</span>
<span class="quote1">&gt; というふうにできるでしょうか？</span>
<span class="quote1">&gt; よろしくおねがいします。</span>


</pre>
</div>
<p class="button"><a href="13086.html">[前]</a><a href="13088.html">[次]</a><a href="../list/13001-13100.html">[番号順一覧]</a><a href="../thread/13001-13100.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13086.html">  13086 2006-06-08 17:54 [&quot;rishiri.info&quot; &lt;mail] 順位をつけたいのですが                  </a></span>
<span class="current">-&gt;&nbsp;<a href="13087.html">  13087 2006-06-08 21:08 ┗[buda &lt;buda@xxxxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13088.html">  13088 2006-06-08 21:27 　┗[&quot;rishiri.info&quot; &lt;mail]                                     </a></span>
</pre>
</body>
</html>
