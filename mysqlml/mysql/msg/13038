<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13038</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13037">[前]</a><a href="13039">[次]</a><a href="../list/13001-13100">[番号順一覧]</a><a href="../thread/13001-13100">[スレッド一覧]</a></p>
<p class="id">
mysql:13038
</p>
<div class="header">
<p>
From: &quot;rishiri.info&quot; &lt;&quot;rishiri.info&quot; &lt;mail@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 1 Jun 2006 20:26:37 +0900<br>
Subject: [mysql 13038] UNIONクエリで躓いています<br>

</p>
</div>
<div class="body">
<pre>
こんにちは、rishiri.infoと申します。
過去ログ等みているのですが
どうしてもわからないのでよろしくお願いします。

このような結果を出すにはどうすればよいでしょうか？
+-----+-------+--------+-------+-------+------+
<span class="quote1">| scode | namae   | 4P          | 9P         | 13P       | rank    |</span>
+-----+-------+--------+-------+-------+------+
<span class="quote1">|     3   |  hoge     | 07:10:00 | 08:51:00 | 09:11:00 |     1    |</span>
<span class="quote1">|     1   |  fuga      | 07:55:00 | 10:55:00 | 16:55:00 |     2    |</span>
+-----+-------+--------+-------+-------+------+
現在下記のような
UNIONクエリを使ってみているのですが

SELECT sensyu.scode As scode,sensyu.namae As namae, kiroku.ktime As 4P,
kiroku.ktime As 9P , kiroku.ktime As 13P
FROM kiroku,sensyu,kukan
WHERE kiroku.kcode = 4 AND kiroku.scode = sensyu.scode AND kukan.kcode =
kiroku.kcode
UNION ALL
SELECT sensyu.scode As scode,sensyu.namae As namae, kiroku1.ktime As 4P,
kiroku1.ktime As 9P , kiroku1.ktime As 13P
FROM kiroku As kiroku1, sensyu,kukan
WHERE kiroku1.kcode = 9 AND kiroku1.scode = sensyu.scode AND kukan.kcode =
kiroku1.kcode
UNION ALL
SELECT sensyu.scode As scode,sensyu.namae As namae, kiroku2.ktime As 4P,
kiroku2.ktime As 9P , kiroku2.ktime As 13P
FROM kiroku As kiroku2,sensyu,kukan
WHERE kiroku2.kcode = 13 AND kiroku2.scode = sensyu.scode AND kukan.kcode =
kiroku2.kcode
ORDER BY scode DESC;

+-----+------+-------- +------ +--------+
<span class="quote1">| scode | namae  | 4P          | 9P        | 13P        |</span>
+-----+--- ---+------ -+-------+--------+
<span class="quote1">|     3   |  hoge    | 07:10:00 | 07:10:00 | 07:10:00 |</span>
<span class="quote1">|     3   |  hoge    | 09:11:00 | 09:11:00 | 09:11:00 |</span>
<span class="quote1">|     3   |  hoge    | 08:51:00 | 08:51:00 | 08:51:00 |</span>
<span class="quote1">|     1   | fuga    　| 07:55:00 | 07:55:00 | 07:55:00 |</span>
<span class="quote1">|     1   | fuga      | 16:55:00 | 16:55:00 | 16:55:00 |</span>
<span class="quote1">|     1   | fuga      | 10:55:00 | 10:55:00 | 10:55:00 |</span>
+-----+----- -+---- ---+-------+--------+
6 rows in set (0.02 sec)

という結果になってしまいます。
rank(順位)に関してはACCESSのようにDcount等が使えないため方法がわかりません。
オートナンバーフィールドの追加・削除という方法になるのでしょうか？

あわせて御教授お願いいたします。

--
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.8.0/353 - Release Date: 2006/05/31


</pre>
</div>
<p class="button"><a href="13037">[前]</a><a href="13039">[次]</a><a href="../list/13001-13100">[番号順一覧]</a><a href="../thread/13001-13100">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="13038">  13038 2006-06-01 20:26 [&quot;rishiri.info&quot; &lt;mail] UNIONクエリで躓いています               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13039">  13039 2006-06-01 21:20 ┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13040">  13040 2006-06-01 21:45 　┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13041">  13041 2006-06-01 22:45 　　┗[&quot;rishiri.info&quot; &lt;mail]                                   </a></span>
</pre>
</body>
</html>
