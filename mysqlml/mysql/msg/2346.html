<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:2346</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="2345.html">[前]</a><a href="2347.html">[次]</a><a href="../list/2301-2400.html">[番号順一覧]</a><a href="../thread/2301-2400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:2346
</p>
<div class="header">
<p>
From: とみたまさひろ &lt;とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 04 Aug 2000 15:56:07 +0900<br>
Subject: [mysql 02346] Re: 集計のクエリーの書き方<br>

</p>
</div>
<div class="body">
<pre>とみたです。

At Fri, 04 Aug 2000 14:49:43 +0900,
endo@xxxxxxxxxx (遠藤　俊裕) wrote:

<span class="quote1">&gt; この状態で結果を</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt;    aaa, 10, 4, 40, 2, 20</span>
<span class="quote1">&gt;    bbb, 20, 1, 20, 1, 20</span>
<span class="quote1">&gt;    ccc, 30, 2, 60, 0,  0</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; としたいのですが、どうすれば良いのでしょうか？</span>
<span class="quote1">&gt; 要するにチェック項目によって内数をカウントしたいのです。</span>

<span class="quote1">&gt; 以下の SQL で</span>
<span class="quote1">&gt;    aaa, 10, 4, 40</span>
<span class="quote1">&gt;    bbb, 20, 1, 20</span>
<span class="quote1">&gt;    ccc, 30, 2, 60</span>
<span class="quote1">&gt; とは出来たのですが、これ以上、どうしてもわかりません。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SELECT mast.name, mast.point, COUNT(mast.name), SUM(mast.point) FROM tran</span>
<span class="quote1">&gt; LEFT JOIN mast ON mast.code=tran.code GROUP BY mast.name, mast.point</span>
<span class="quote1">&gt; ORDER BY mast.name</span>

5番目は tran.check の合計で、6番目はそれに mast.point を掛けたものってこ
とでしょうか。

だったら、これ↓でいいんではないかと。

   select mast.name, mast.point, count(mast.name),
   sum(mast.point), sum(tran.check), sum(tran.check)*mast.point from
   tran left join mast on mast.code=tran.code group by mast.name order
   by mast.name;

--
とみたまさひろ &lt;tommy@xxxxxxxxxx&gt; <a href="http://www.tmtm.org">http://www.tmtm.org</a>
日本MySQLユーザ会 <a href="http://www.mysql.gr.jp">http://www.mysql.gr.jp</a>

</pre>
</div>
<p class="button"><a href="2345.html">[前]</a><a href="2347.html">[次]</a><a href="../list/2301-2400.html">[番号順一覧]</a><a href="../thread/2301-2400.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="2345.html">   2345 2000-08-04 14:49 [&lt;endo@xxxxxxxxxx&gt;   ] 集計のクエリーの書き方                  </a></span>
<span class="current">-&gt;&nbsp;<a href="2346.html">   2346 2000-08-04 15:56 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2352.html">   2352 2000-08-05 22:47 　┗[&lt;endo@xxxxxxxxxx&gt;   ]                                     </a></span>
</pre>


</body></html>