<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8885</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8884.html">[前]</a><a href="8886.html">[次]</a><a href="../list/8801-8900.html">[番号順一覧]</a><a href="../thread/8801-8900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8885
</p>
<div class="header">
<p>
From: ML account &lt;ML account &lt;ml@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 02 Mar 2004 16:19:50 +0900<br>
Subject: [mysql 08885] Re: 整数フィールドの次の空きを探す  sql は<br>

</p>
</div>
<div class="body">
<pre>
　こんにちは。

柴垣　顕郎 &lt;akiro@xxxxxxxxxx&gt;さんの
&lt;20040302145937.9F6D.AKIRO@xxxxxxxxxx&gt;
&quot;<a href="08880.html">[mysql 08880]</a> 整数フィールドの次の空きを探す sqlは&quot;


　SQLに於いては、存在しないレコードの値を持ってくる種類の操作は至極困難
だと思います。よって、

(1) 全ての数を含むテーブルから抜けがある数を含むテーブルをLEFT JOINして
    最大/最小の数の抽出を行う。
(2) 全ての数を含み、その数の使用/非使用の情報を持つテーブルに対し最大/
    最小の数の抽出を行う。

等が解法となるでしょう。(1)は多分柴垣さんが考えられた方法と思います。
(2)は、例えば席や部屋の割当等に使用されるでしょう。この様なテーブル定義
になると思います。

create table ROOMS
    ROOMNO int not null primary key,
    USED enum('YES','NO') default 'NO'
    GRADE enum('SUITE','DOUBLE','TWIN','SINGLE'),
    .....
)


　何の目的で数字の抜けを捜さなければならないのかが分からないため、本当に数字
の抜けを捜し再利用しなければならないのかどうかは分かりません。ただセッシ
ョン番号の様なものの場合には、抜けを捜す様な事はせずに、単に最大値より１
つ大きい値を使って行った方が簡単でしょう。



　　　　松枝知直　　　　&lt;tomom@xxxxxxxxxx&gt;
　　　　　　　　　　　　<a href="http://www.argus.ne.jp/~tomom/">http://www.argus.ne.jp/~tomom/</a>



</pre>
</div>
<p class="button"><a href="8884.html">[前]</a><a href="8886.html">[次]</a><a href="../list/8801-8900.html">[番号順一覧]</a><a href="../thread/8801-8900.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8880.html">   8880 2004-03-02 15:16 [柴垣　顕郎 &lt;akiro@xx] 整数フィールドの次の空きを探す sql は   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8882.html">   8882 2004-03-02 15:59 ┣[KAWAJI Shinya &lt;kawaj]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8883.html">   8883 2004-03-02 16:04 ┃┗[KAWAJI Shinya &lt;kawaj]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8888.html">   8888 2004-03-02 20:50 ┃　┗[柴垣 &lt;akiro@xxxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8889.html">   8889 2004-03-02 23:40 ┃　　┗[ML account &lt;ml@xxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8890.html">   8890 2004-03-03 08:47 ┃　　　┗[KAWAJI Shinya &lt;kawaj]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8894.html">   8894 2004-03-03 09:28 ┃　　　　┣[柴垣 &lt;akiro@xxxxxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8899.html">   8899 2004-03-03 12:54 ┃　　　　┃┗[Seiji Uramoto &lt;uramo]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8895.html">   8895 2004-03-03 10:11 ┃　　　　┣[ML account &lt;ml@xxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8898.html">   8898 2004-03-03 12:35 ┃　　　　┗[班石悦夫 &lt;madara@xxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8900.html">   8900 2004-03-03 14:44 ┃　　　　　┗[ML account &lt;ml@xxxxx]                           </a></span>
<span class="current">-&gt;&nbsp;<a href="8885.html">   8885 2004-03-02 16:19 ┣[ML account &lt;ml@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8886.html">   8886 2004-03-02 18:48 ┗[班石悦夫 &lt;madara@xxx]                                       </a></span>
</pre>
</body>
</html>
