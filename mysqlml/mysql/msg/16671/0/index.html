<html><head></head><body><div dir="ltr"><div dir="ltr">岡善博＠中札内です。<br><br>ちょっと気に成る事が有って、再度復元作業をしました。<br>-rw-rw---- 1 mysql mysql 6679 12月 12 2020 wp_comments.frm <br>は、ちゃんとパックアップした日に成っていて、WordPressをアップデートする前に<br>バックアップを取って、バージョンアップで更新されたのかもと思いました。<br><br>で復元手順を進めて行くと、下記のエラーが出ました。<br>ERROR 2013 (HY000): Lost connection to MySQL server during query <br><br><a href="https://qiita.com/shy_azusa/items/9f6ba519cfda626db52b">https://qiita.com/shy_azusa/items/9f6ba519cfda626db52b</a><br>のページの対策をしました。<br>[mysqld]<br>wait_timeout      = 86400 ;これは、全くの追加でした。<br>max_allowed_packet   = 256M  ;16Mから1Gは、どうよと思い256Mにしました。<br>innodb_buffer_pool_size = 1G   ;これは、元々記述されていました。<br><br>mysqldを再起動して、mysqlもコネクションを張り直し、復元作業は、エラー無く<br>出来ました。<br>ただ、DISCARD TABLESPACEを実行後、ibdは、消えていませんでしたが、念のため<br>cpを実行しています。<br><br>/usr/home/oka/BACKUP: mysqldump --single-transaction --no-tablespaces \<br>--set-gtid-purged=OFF -u zenpakudb -p zenpakudb &gt; /home/oka/BACKUP/mysqldump_zenpakudb.dump<br>Enter password:<br>mysqldump: Couldn't execute 'show table status like 'wp\_postmeta'': \<br>Lost connection to MySQL server during query (2013) <br><br>と云うメッセージは、まだ出ます。<br><br>-rw-r--r-- 1 oka  oka  2001654 9月 25 21:20 mysqldump_zenpakudb.dump &lt;=今回。<br>-rw-r--r-- 1 root oka  3070302 2月 23 2019 mysqldump_zenpakudb20190223.dump<br>-rw-r--r-- 1 oka  oka  3966673 10月 4 2019 mysqldump_zenpakudb20191004.dump<br>-rw-r--r-- 1 root oka  3964939 10月 19 2019 mysqldump_zenpakudb20191019.dump<br>-rw-r--r-- 1 root oka  7925810 12月 12 2020 mysqldump_zenpakudb20201212.dump  <br></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">2021年9月25日(土) 1:35 岡善博 &lt;<a href="mailto:zenpaku@gmail.com">zenpaku@gmail.com</a>&gt;:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">岡@中札内です。<br>
ちょっと気に成る事が有ります。<br>
有る時点で、mysql_mode=‘’に設定して、元の状態に戻していません。<br></blockquote><div>この問題は、セッションを張り直したら元の設定に戻っていると云う</div><div>理解であっていますか？<br></div></div></div>
</body></html>