<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:1576</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="1575">[前]</a><a href="1577">[次]</a><a href="../list/1501-1600">[番号順一覧]</a><a href="../thread/1501-1600">[スレッド一覧]</a></p>
<p class="id">
mysql:1576
</p>
<div class="header">
<p>
From: &quot;N.Yoshida&quot; &lt;&quot;N.Yoshida&quot; &lt;yosh_no@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 14 Feb 2000 15:00:08 +0900<br>
Subject: [mysql 01576] Re: mysql-ruby のインストール<br>

</p>
</div>
<div class="body">
<pre>

  吉田です。お世話になります。

<span class="quote1">&gt;linux の dynamic link されたバイナリは、ld-linux.so.X (Xはバージョン番号)</span>
<span class="quote1">&gt;を、フルパス指定で、自分に埋め込んでいます</span>
<span class="quote1">&gt;less, hex 等のバイナリが見れるコマンドで、バイナリの中身を覗いてみると、</span>
<span class="quote1">&gt;ld-linux.so.X が、フルパスで埋め込まれているのが確認できます。</span>
<span class="quote1">&gt;この埋め込まれているものと、マシンに存在するものが</span>
<span class="quote1">&gt;一致しないと、このdynamic link されたバイナリはうごかないです</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;問題は、</span>
<span class="quote1">&gt; ld.so が不正なのか</span>
<span class="quote1">&gt; ldd が不正なのか、</span>
<span class="quote1">&gt; gcc がまちがってリンクしたのか</span>
<span class="quote1">&gt; mysql.so が、単に作成されたときに間違ったのか</span>
<span class="quote1">&gt;あたりだと思います</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;shell$ ruby</span>
<span class="quote1">&gt; は起動するか</span>
<span class="quote1">&gt;shell$ ruby -e &quot;require 'socket'&quot;</span>
<span class="quote1">&gt; は起動するか</span>
<span class="quote1">&gt;socket.so と mysql.so が同じ ld-linux.so を見ているか</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;これらがクリアされているのに、</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;shell$ ruby -e &quot;require 'mysql'&quot;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;が動かないなら、原因は、</span>
<span class="quote1">&gt;  mysql.so を作成したとき、指定するライブラリが足りなかった</span>
<span class="quote1">&gt;  mysql.so が必要としているライブラリが見つからなかった</span>
<span class="quote1">&gt;  libmysqlclient.so へのパスが通っていない</span>
<span class="quote1">&gt;  コンパイルに使用した gcc がわるい</span>
<span class="quote1">&gt;ぐらいしかないと思います</span>

  村上さんのコメントに従いやってみました。以下のようになりました。

-----------------------------------------------------------------------------
fz000785:~# ruby
printf &quot;test(%s)\n&quot;,&quot;TestString&quot;
test(TestString)                       ◆ruby単体は動作している
fz000785:~# ruby -e &quot;require 'socket'&quot; ◆socketモジュールも動作しているようだ
fz000785:~# ruby -e &quot;require 'mysql'&quot;  ◆mysqlモジュールは駄目らしい
/tmp/rba07173:1:in `require': File not found - /usr/local/lib/ruby/1.4/i586-linu
x/mysql.so (LoadError)
        from /tmp/rba07173:1
-----------------------------------------------------------------------------

  私自身よくわかっていないのですが、lddではsocket.soが認識されていないようなのに
rubyからはロードできているように思われるのが不思議です。mysql.soの方は lddでも
rubyからでも正しく認識されていないようです。

  村上さんの指摘のなかで、ひとつ気になる点があります。(次行)

<span class="quote1">&gt;  libmysqlclient.so へのパスが通っていない</span>

  これ(libmysqlclient.so)が私のlinux(/lib,/usr/lib,/usr/local/lib)には無いよう
に思われます。これが最も怪しい。このライブラリはどのようにすればインストールさ
れるのか教えてください。

-------------------------------------------------------------------------
  吉田 伸次(N.Yoshida) E-mail:yosh_no@xxxxxxxxxx
                       nifty :TCN00171@xxxxxxxxxx
-------------------------------------------------------------------------

</pre>
</div>
<p class="button"><a href="1575">[前]</a><a href="1577">[次]</a><a href="../list/1501-1600">[番号順一覧]</a><a href="../thread/1501-1600">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="1562">   1562 2000-02-10 10:06 [&quot;N.Yoshida&quot; &lt;yosh_no] mysql-ruby のインストール               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1563">   1563 2000-02-10 12:22 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1564">   1564 2000-02-10 13:01 　┗[&quot;N.Yoshida&quot; &lt;yosh_no]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1565">   1565 2000-02-10 14:25 　　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1570">   1570 2000-02-14 11:06 　　　┗[&quot;N.Yoshida&quot; &lt;yosh_no]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1571">   1571 2000-02-14 11:29 　　　　┣[とみたまさひろ &lt;tomm]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1572">   1572 2000-02-14 12:50 　　　　┃┗[&quot;N.Yoshida&quot; &lt;yosh_no]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1573">   1573 2000-02-14 13:08 　　　　┃　┗[とみたまさひろ &lt;tomm]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1574">   1574 2000-02-14 13:43 　　　　┗[&lt;takeshi@xxxxxxxxxx&gt;]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1575">   1575 2000-02-14 13:54 　　　　　┣[&lt;takeshi@xxxxxxxxxx&gt;]                             </a></span>
<span class="current">-&gt;&nbsp;<a href="1576">   1576 2000-02-14 15:00 　　　　　┗[&quot;N.Yoshida&quot; &lt;yosh_no]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1577">   1577 2000-02-14 16:34 　　　　　　┗[&lt;takeshi@xxxxxxxxxx&gt;]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1578">   1578 2000-02-15 10:06 　　　　　　　┗[&quot;N.Yoshida&quot; &lt;yosh_no]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1579">   1579 2000-02-15 10:16 　　　　　　　　┗[とみたまさひろ &lt;tomm]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1580">   1580 2000-02-15 10:45 　　　　　　　　　┗[&quot;N.Yoshida&quot; &lt;yosh_no]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1581">   1581 2000-02-15 11:20 　　　　　　　　　　┣[とみたまさひろ &lt;tomm]                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1584">   1584 2000-02-15 13:23 　　　　　　　　　　┗[UENO Kazuaki &lt;kazu@x]                   </a></span>
</pre>
</body>
</html>
