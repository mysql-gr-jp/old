<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4204</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="4203.html">[前]</a><a href="4205.html">[次]</a><a href="../list/4201-4300.html">[番号順一覧]</a><a href="../thread/4201-4300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4204
</p>
<div class="header">
<p>
From: (遠藤 俊裕) &lt;&lt;endo_t@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 26 Aug 2001 13:00:24 +0900<br>
Subject: [mysql 04204] cron から myisamchk を実行するとメールが来ない<br>

</p>
</div>
<div class="body">
<pre>
遠藤です。

もしかしたら、これは Unix の基礎知識なのかもしれませんが、
よく分からないので、お教え下さい。

#!/bin/sh
# MyISAM Check sequence
/usr/local/bin/mysqladmin shutdown
cd /usr/local/var/testDB
for P in *.MYI; do
 /usr/local/bin/myisamchk -r $P
 /usr/local/bin/myisamchk -S $P
done

/usr/local/etc/rc.d/mysql.server.sh start

こんな sh を書いてます。
それを cron から一日一回実行するようにしています。
しかし、cron からメールが来ません。

ps を見ると

/usr/sbin/sendmail -FCronDaemon -odi -oem -oi -t

こんなプロセスが残ってます。

そこで、mysqladmin shutdown を実行すると、このプロセスが無く
なって、以下のようなメールが来ます。

-- ここから --
- recovering (with sort) MyISAM-table 'testTBL1.MYI'
Data records: 1364
- Fixing index 1
- Sorting index for MyISAM-table 'testTBL1.MYI'
- recovering (with sort) MyISAM-table 'testTBL2.MYI'
Data records: 1234
- Fixing index 1
- Sorting index for MyISAM-table 'testTBL2.MYI'
　　：
- recovering (with keycache) MyISAM-table 'testTBLn.MYI'
Data records: 8
- Sorting index for MyISAM-table 'testTBLn.MYI'
Starting mysqld daemon with databases from /usr/local/var
010825 13:08:17  mysqld ended
-- ここまで --

なんで mysql の終了がここで？^^;
myisamchk を実行する前に shutdown はしてるつもりなんですけど。。。^^;

この原因が分かりません。
ご存じの方いらっしゃいませんか？

</pre>
</div>
<p class="button"><a href="4203.html">[前]</a><a href="4205.html">[次]</a><a href="../list/4201-4300.html">[番号順一覧]</a><a href="../thread/4201-4300.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="4204.html">   4204 2001-08-26 13:00 [&lt;endo_t@xxxxxxxxxx&gt; ] cron から myisamchk を実行するとメールが来ない</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4210.html">   4210 2001-08-26 19:13 ┣[&lt;takeshi@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4212.html">   4212 2001-08-26 20:41 ┃┗[&lt;endo_t@xxxxxxxxxx&gt; ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4214.html">   4214 2001-08-26 20:52 ┗[Yasuhiro Hayase &lt;hay]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4219.html">   4219 2001-08-26 22:04 　┗[&lt;endo_t@xxxxxxxxxx&gt; ]                                     </a></span>
</pre>
</body>
</html>
