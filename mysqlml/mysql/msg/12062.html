<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:12062</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="12061.html">[前]</a><a href="12063.html">[次]</a><a href="../list/12001-12100.html">[番号順一覧]</a><a href="../thread/12001-12100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:12062
</p>
<div class="header">
<p>
From: 浦本勝久 &lt;浦本勝久 &lt;katuhisa@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 3 Sep 2005 11:45:20 +0900<br>
Subject: [mysql 12062] Re: mysql(DB)を壊した<br>

</p>
</div>
<div class="body">
<pre>恐ろしい情報を明かされました。
私にはパンドラの箱を開けたと同等の出来事に煮えてしまいます。
Oracle の旧バージョン（8i以前）などにも見られる古き良き時 
代を彷彿とさせる機能？
です。

どこからかで手に入れたDBミラーコピーをこの手法で我がものに 
出来ちゃうんですよね。
Oracle の最近のバージョンは資金が無いので試していませんが。

ルートといっても当該DBのルート権限ですからセキュリティ被害 
は限定的なので、一応。

便利でもあり危険でもある。

MySQL を基幹システムに導入しようというISさんも多いですが、 
ここいら、どうされているんでしょうか？

私は、MySQLをドメイン内の秘密の奥の院にいれて、外部からの 
丸ごとコピーを防いでいるつもりです。
何事も断定できない時代ですので、つもりと書きました。

OSのルートを盗れば、DBのレプリケーションはできちゃうようで 
すよ、外から。
もちろん、FWごしにもね。

こんな事書くとマスマスうさん臭がられてしまうかな？



On 2005/08/31, at 10:13, Ryuichiro Munechika/niji-net wrote:

<span class="quote1">&gt; まいパパです</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ストレージエンジンがMyISAMであること、またOS </span>
<span class="quote1">&gt; (Linux)の</span>
<span class="quote1">&gt; 操作をある程度熟知していることを前提に話をします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 一度、mysqldのプロセスをkillします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; で、バックアップを必要とするデータベースのバックアップ</span>
<span class="quote1">&gt; （適当なディレクトリにコピーすることで良いでしょう）して</span>
<span class="quote1">&gt; おく。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 例えば、/var/lib/mysql以下にtestディレクトリがあれば</span>
<span class="quote1">&gt; そのディレクトリ以下が、データベースを構成するファイル</span>
<span class="quote1">&gt; になります。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; コピーが終わったあと、/var/lib/mysql 全体を消してしまう。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 次に、/etc/rc.d/init.d/mysqld start を実行すると初期状態</span>
<span class="quote1">&gt; でデータベースが作成されます。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ここで、rootでパスワード無しでmysqlへログインでき </span>
<span class="quote1">&gt; るので</span>
<span class="quote1">&gt; rootのパスワードの設定や、適当なデータベースユーザを設定</span>
<span class="quote1">&gt; します。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 保存しておいたデータベースファイルを、/var/lib/mysqlへ</span>
<span class="quote1">&gt; 書き戻す。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; おおよそこれで復旧できると思います。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; ShimizuKazuo said:</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt;&gt; しみず　です</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; データベースの mysql を壊してしました、復旧/リ </span>
<span class="quote2">&gt;&gt; セット/flush などの</span>
<span class="quote2">&gt;&gt; 方法がもしあれば教えていただけませんか？</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; ---------------------------------------------------------------</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 皆様の記事をいつも参考にさせていただいております。</span>
<span class="quote2">&gt;&gt; mysql を導入して勉強しておりますが、勉強の域を出ておりません。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; データベース管理の練習をしておりましたところ・・・、</span>
<span class="quote2">&gt;&gt;  mysql.user テーブルをいじっていて、壊してしまったようです。</span>
<span class="quote2">&gt;&gt; リブートした後に use mysql; が出来なくなってしまいまし </span>
<span class="quote2">&gt;&gt; た。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; use mysql;  を実行すると、次のエラーが出ます。</span>
<span class="quote2">&gt;&gt; ERROR 1044: Access denied for user 'root:localhost' to database  </span>
<span class="quote2">&gt;&gt; 'mysql'</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; shell&gt;mysql -u root -p 　起動できます。</span>
<span class="quote2">&gt;&gt; mysql&gt;use test; 　　　　できます。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 環境</span>
<span class="quote2">&gt;&gt; RedHat 9  (2.4.20-8)</span>
<span class="quote2">&gt;&gt; MySql 3.23.58-1</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; よろしく、お願い致します。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; -- </span>
<span class="quote1">&gt; 宗近</span>
<span class="quote1">&gt; munetika@xxxxxxxxxx</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>



------------------------------------------------------
浦本勝久 URAMOTO Katuhisa
株式会社エクスファ Xfer,Inc.    <a href="http://www.x-fer.co.jp">http://www.x-fer.co.jp</a>
uramotyの視点、書き下し。    <a href="http://uramoty.exblog.jp/">http://uramoty.exblog.jp/</a>
O~sabu                    <a href="http://uramoty.blogspot.com/">http://uramoty.blogspot.com/</a>
[ News ] MyDicWinMac 近日発売  BookmarkWinMac1.2 好評発売中
不正アクセス観測所 ただ今バージョンアップ中　    http:// 
www.x-fer.co.jp/CodeRedX.html
mobileDNS（DDNS） ただ今バージョンアップ中    http:// 
www.x-site.jp/
------------------------------------------------------



</pre>
</div>
<p class="button"><a href="12061.html">[前]</a><a href="12063.html">[次]</a><a href="../list/12001-12100.html">[番号順一覧]</a><a href="../thread/12001-12100.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="12037.html">  12037 2005-08-31 09:53 [ShimizuKazuo &lt;ozz@xx] mysql(DB)を壊した                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12038.html">  12038 2005-08-31 10:00 ┣[遠藤 俊裕 &lt;endo@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12039.html">  12039 2005-08-31 10:13 ┗["Ryuichiro Munechika]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12040.html">  12040 2005-08-31 11:05 　┣[ShimizuKazuo &lt;ozz@xx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12041.html">  12041 2005-08-31 11:23 　┃┗[tatematsu &lt;tatemax@x]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12043.html">  12043 2005-08-31 12:48 　┃　┗[ShimizuKazuo &lt;ozz@xx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12044.html">  12044 2005-08-31 13:17 　┃　　┗[tatematsu &lt;tatemax@x]                               </a></span>
<span class="current">-&gt;&nbsp;<a href="12062.html">  12062 2005-09-03 11:45 　┗[浦本勝久 &lt;katuhisa@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12064.html">  12064 2005-09-03 11:56 　　┗[Tomoyuki Asakawa &lt;to]                                   </a></span>
</pre>


</body></html>