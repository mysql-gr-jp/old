<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4692</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="4691.html">[前]</a><a href="4693.html">[次]</a><a href="../list/4601-4700.html">[番号順一覧]</a><a href="../thread/4601-4700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4692
</p>
<div class="header">
<p>
From: 豊島＠クロスネット &lt;豊島＠クロスネット &lt;toyoshima@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 22 Nov 2001 19:44:03 +0900<br>
Subject: [mysql 04692] Re: 指定した順番でのソート<br>

</p>
</div>
<div class="body">
<pre>
　豊島です。

From: &quot;f.t&quot; &lt;fujiyama@xxxxxxxxxx&gt;
Subject: <a href="04688.html">[mysql 04688]</a> Re: 指定した順番でのソート
Message-ID: &lt;20011122184914.3C5D.FUJIYAMA@xxxxxxxxxx&gt;
<span class="quote1">&gt; 豊島＠クロスネット &lt;toyoshima@xxxxxxxxxx&gt; wrote(Thu, 22 Nov 2001 18:35:</span>
<span class="quote1">&gt; 32 +0900):</span>
<span class="quote1">&gt; </span>
<span class="quote3">&gt; &gt; &gt; データが</span>
<span class="quote3">&gt; &gt; &gt; 1-&gt;指定なし</span>
<span class="quote3">&gt; &gt; &gt; 2-&gt;\100</span>
<span class="quote3">&gt; &gt; &gt; 3-&gt;\200</span>
<span class="quote3">&gt; &gt; &gt; 4-&gt;\300</span>
<span class="quote3">&gt; &gt; &gt; ...</span>
<span class="quote3">&gt; &gt; &gt; となっている時に、結果を値段の安い順に並べたいのだが「指定なし」は一番最</span>
<span class="quote3">&gt; &gt; &gt; 後に表示したいというようなことです。（この場合2→3→4→1にソートする）</span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt; 　「値段の安い順に並べたいのだが」とおっしゃっているのですから、</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; select id,名前,値段 from テーブル</span>
<span class="quote2">&gt; &gt; where id in (1,2,3,4)</span>
<span class="quote2">&gt; &gt; order by 値段</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; 　「指定なし」については、値を&quot;-1&quot;として予約しておくとか。</span>
<span class="quote2">&gt; &gt; 　 （０は違う意味を持っている場合は、 where に 値段 != 0 を付加する。）</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; id＝1,2,3,4…</span>
<span class="quote1">&gt; 値段＝指定なし,\100,\200,\300…</span>
<span class="quote1">&gt; ですよね？</span>
<span class="quote1">&gt; 実は、書き方が不十分だったのですが、</span>
<span class="quote1">&gt; カラム「値段」には\100,\200といったきれいな値だけでなく全角の「￥２００」</span>
<span class="quote1">&gt; や複数の値段「\200(休日は\150)」も入るvarcharデータなのです。なので値段</span>
<span class="quote1">&gt; カラムをソートに使うのは（ソート順の見当がつかないし）あきらめています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; また、SQL部分で負荷を加えたくないので、SQLを2回発行して、1回目はid</span>
<span class="quote1">&gt; in(2,3,4)、2回目はid=1みたいなのも苦しいところです（実際はかなり長い＆そ</span>
<span class="quote1">&gt; の他の条件の多いSQLを使用しているので）</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ＃</span>
<span class="quote1">&gt; 今回はシステムが毎秒動いているようなものでもないので、やっぱり、</span>
<span class="quote1">&gt; コード入力部分を修正（「指定なし」のidを99などの大きな数にする）</span>
<span class="quote1">&gt; ↓</span>
<span class="quote1">&gt; 既に入っているコードid=1をid=99にupdate</span>
<span class="quote1">&gt; ですかねぇ？</span>
<span class="quote1">&gt; 移行の間はちゃんとしたソート順にならない（昔の「指定なし」は先頭に、新し</span>
<span class="quote1">&gt; い「指定なし」は後方に）けどやむをえないところでしょうか。。</span>

　ん？ それでは一つ疑問が残ります。

　「値段」順にするということですが、実際の「値段」順にするロジックはどのように
行うのでしょうか？

　どこかで、結局「￥２００」 や 「\300」 からかならず数値を 抽出しなければなり
ません。
　どうせ抽出しているのであれば、insert もしくは、update する直前に 値段文字列 
から 値段数値 を抽出しておいて、その値段数値をorder by でソートして出力する方法
が考えられます。

・・・‥‥‥……………………‥‥‥・・・
 株式会社 クロスネット IT事業部 豊島 博
  E-Mail  : toyoshima@xxxxxxxxxx
  WebSite : <a href="http://www.crossnet.co.jp">http://www.crossnet.co.jp</a>
・・・‥‥‥……………………‥‥‥・・・


</pre>
</div>
<p class="button"><a href="4691.html">[前]</a><a href="4693.html">[次]</a><a href="../list/4601-4700.html">[番号順一覧]</a><a href="../thread/4601-4700.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="4683.html">   4683 2001-11-22 18:18 [&quot;f.t&quot; &lt;fujiyama@xxxx] 指定した順番でのソート                  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4684.html">   4684 2001-11-22 18:35 ┣[豊島＠クロスネット &lt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4688.html">   4688 2001-11-22 19:12 ┃┗[&quot;f.t&quot; &lt;fujiyama@xxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4690.html">   4690 2001-11-22 19:21 ┃　┣[遠藤 俊裕 &lt;endo_t@xx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4693.html">   4693 2001-11-22 19:45 ┃　┃┗[&quot;f.t&quot; &lt;fujiyama@xxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4695.html">   4695 2001-11-22 21:45 ┃　┃　┗[遠藤 俊裕 &lt;endo_t@xx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4697.html">   4697 2001-11-22 22:56 ┃　┃　　┗[Tomohiro 'Tomo-p' KA]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4698.html">   4698 2001-11-22 23:06 ┃　┃　　　┗[遠藤 俊裕 &lt;endo_t@xx]                           </a></span>
<span class="current">-&gt;&nbsp;<a href="4692.html">   4692 2001-11-22 19:44 ┃　┗[豊島＠クロスネット &lt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4694.html">   4694 2001-11-22 20:23 ┃　　┗[&quot;f.t&quot; &lt;fujiyama@xxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4685.html">   4685 2001-11-22 18:56 ┣[Noriyuki Sakimura &lt;s]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4686.html">   4686 2001-11-22 18:59 ┃┣[Noriyuki Sakimura &lt;s]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4691.html">   4691 2001-11-22 19:39 ┃┗[&quot;f.t&quot; &lt;fujiyama@xxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4689.html">   4689 2001-11-22 19:20 ┣[&quot;古河　謙悟&quot; &lt;furuka]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4696.html">   4696 2001-11-22 22:35 ┗[Hiroshi Takiguchi &lt;t]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4709.html">   4709 2001-11-26 11:16 　┗[&quot;Takafumi oumine&quot; &lt;o] Bakup について                      </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4712.html">   4712 2001-11-26 12:21 　　┗[&quot;f.t&quot; &lt;fujiyama@xxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4713.html">   4713 2001-11-26 13:28 　　　┗[&quot;Takafumi oumine&quot; &lt;o]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4715.html">   4715 2001-11-26 13:45 　　　　┗[Hiroyuki Sato &lt;hiro@]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4717.html">   4717 2001-11-26 16:09 　　　　　┗[&quot;Takafumi oumine&quot; &lt;o]                             </a></span>
</pre>
</body>
</html>
