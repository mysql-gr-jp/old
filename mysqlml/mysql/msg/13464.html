<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13464</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13463.html">[前]</a><a href="13465.html">[次]</a><a href="../list/13401-13500.html">[番号順一覧]</a><a href="../thread/13401-13500.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13464
</p>
<div class="header">
<p>
From: 遠藤 俊裕 &lt;遠藤 俊裕 &lt;endo@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 09 Nov 2006 02:20:01 +0900<br>
Subject: [mysql 13464] Re: MySQLが遅い<br>

</p>
</div>
<div class="body">
<pre>
遠藤です。

その線も考えましたが、２～３分なので、その線は薄いかなぁ、
なんて・・・・

どちらかというと、接続に時間がかかってるような・・・

例えば、サーバサイドで
telnet localhost 3306
とかしたら、すぐ応答が返りますか？
# mysql_query がって言っておられるので問題ないかとも思い
# ますが・・・

というか、
1) 過去ログは当たってみました？
2) MySQL のバイナリログを取ってみて、クエリに時間がかかって
　 いるか確認してみては？
3) その発行している SQL はどのくらい複雑？インデックスは？
等々、もうちょっと情報が欲しいかなぁ・・・・と。
なんせ、情報が若干足りない・・・ような・・・

例えば、インデックス無しのテーブルを検索して、次の検索は
キャッシュに残ってたとか。
まぁ、可能性は色々と・・・(^^;

Thu, 9 Nov 2006 02:08:53 +0900 に、
Vientoこうの &lt;kouno@xxxxxxxxxx&gt; さんは書きました:

<span class="quote1">&gt; もしかして、HDDが省エネモードで止まるようになっていたり</span>
<span class="quote1">&gt; しませんか？。</span>
<span class="quote1">&gt; あ、いや、私のレベルの発想なので見当違いかもしれませんが。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt;遠藤様</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;早速のご回答ありがとうございます。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote3">&gt; &gt;&gt;  ちなみに、そのサーバで mysql コマンドから直接 SQL を</span>
<span class="quote3">&gt; &gt;&gt;  叩くとどうですか？</span>
<span class="quote3">&gt; &gt;&gt;  一回目がすごく遅いですか？</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;mysql コマンドからだと遅くはないですね。</span>
<span class="quote2">&gt; &gt;1回目も2回目も同一の動きをします。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;web上から初回起動し、</span>
<span class="quote2">&gt; &gt;１．検索文字列を入れると（30,000件中800件HIT）表示までに時間</span>
<span class="quote2">&gt; &gt;がかかります。（約2～3分）</span>
<span class="quote2">&gt; &gt;２．再度違う文字列を入れると（30,000件中1000件HIT）瞬時に表示</span>
<span class="quote2">&gt; &gt;されます。（2～3秒）</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;これを何度繰り返しても遅いということはありません。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;30分くらい間を空けて再度実行すると同一現象は現れますが、5分程度</span>
<span class="quote2">&gt; &gt;だと問題なく表示され、再現性がありません。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;おかしなことに同一テーブルを MySQL コマンドから実行した後にweb表示</span>
<span class="quote2">&gt; &gt;を行なうと表示が遅いっていうことはないんです。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote3">&gt; &gt;&gt;  遅くないなら、MySQL 側の問題ではなく、環境回りを疑っ</span>
<span class="quote3">&gt; &gt;&gt;  て見るのも手だと思います。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;環境というのはサーバ側ということですか？</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;渡辺(kij_w@xxxxxxxxxx)</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; --</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; _/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/</span>
<span class="quote1">&gt; _/　　studio  VIENTO</span>
<span class="quote1">&gt; /_/　　　河野　明日路　　　　　　　　　　　　　　　　　</span>
<span class="quote1">&gt; _/_/　　　　</span>
<span class="quote1">&gt; /_/_/　　　e-mail  kouno@xxxxxxxxxx</span>
<span class="quote1">&gt; _/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>

--
えんどう＠あっぷらぼ
mail: endo@xxxxxxxxxx, endo_t@xxxxxxxxxx, endo@xxxxxxxxxx
<a href="http://www.applabo.com/">http://www.applabo.com/</a>
<a href="http://homepage1.nifty.com/EndoT/">http://homepage1.nifty.com/EndoT/</a>


</pre>
</div>
<p class="button"><a href="13463.html">[前]</a><a href="13465.html">[次]</a><a href="../list/13401-13500.html">[番号順一覧]</a><a href="../thread/13401-13500.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13460.html">  13460 2006-11-09 00:06 [&quot;渡辺敬治@nifty&quot; &lt;ki] MySQLが遅い                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13461.html">  13461 2006-11-09 01:03 ┗[遠藤 俊裕 &lt;endo@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13462.html">  13462 2006-11-09 01:41 　┗[&quot;渡辺敬治@nifty&quot; &lt;ki]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13463.html">  13463 2006-11-09 02:08 　　┗[Vientoこうの &lt;kouno@]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="13464.html">  13464 2006-11-09 02:20 　　　┗[遠藤 俊裕 &lt;endo@xxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13465.html">  13465 2006-11-09 03:43 　　　　┗[&quot;渡辺敬治@nifty&quot; &lt;ki]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13466.html">  13466 2006-11-09 03:45 　　　　　┗[&quot;渡辺敬治@nifty&quot; &lt;ki]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13467.html">  13467 2006-11-09 09:10 　　　　　　┗[tatemax &lt;tatemax@xxx]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13468.html">  13468 2006-11-09 12:04 　　　　　　　┗[&quot;渡辺敬治@nifty&quot; &lt;ki]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13469.html">  13469 2006-11-09 12:26 　　　　　　　　┣[遠藤 俊裕 &lt;endo@xxxx]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13470.html">  13470 2006-11-09 12:41 　　　　　　　　┗[Tatematsu &lt;tatemax@x]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13471.html">  13471 2006-11-10 01:22 　　　　　　　　　┗[&quot;渡辺敬治@nifty&quot; &lt;ki]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13472.html">  13472 2006-11-10 08:22 　　　　　　　　　　┗[&lt;admin@xxxxxxxxxx&gt;  ]                   </a></span>
</pre>
</body>
</html>
