<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:1554</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="1553">[前]</a><a href="1555">[次]</a><a href="../list/1501-1600">[番号順一覧]</a><a href="../thread/1501-1600">[スレッド一覧]</a></p>
<p class="id">
mysql:1554
</p>
<div class="header">
<p>
From: &quot;NOGUCHI Masatoshi&quot; &lt;&quot;NOGUCHI Masatoshi&quot; &lt;marlan@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 7 Feb 2000 21:18:05 +0900<br>
Subject: [mysql 01554] Radius+MySQL 成功しました<br>

</p>
</div>
<div class="body">
<pre>
野口@クボタシステム開発です。

さっそくのアドバイスありがとうございます。
おかげさまでMySQL経由のRadius認証に成功しました。


From: takeshi@xxxxxxxxxx
<span class="quote1">&gt; account log を MySQL に記録するように指定すると、</span>
<span class="quote1">&gt; 何のアカウントを記録するべきかを知るために、radiusd は</span>
<span class="quote1">&gt; 起動時にまず radius_acct_attr テーブルを見にいきます。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; radius_acct_attr テーブルと radacct テーブルのフィールドが</span>
<span class="quote1">&gt; 一致していないか、radius_acct_attr テーブルの構造がミスっているかです</span>

ご指摘の通り、field内のNOT NULLを逆にして作成したテーブルが
悪さをしていました。

<span class="quote1">&gt; mysqld --log</span>
<span class="quote1">&gt; radiusd -x</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; として、MySQL はログを吐くようにし、radiusd を debug mode で動かして</span>
<span class="quote1">&gt; 実験してみてください。</span>

debug modeですとMySQL、radiusd共に状況が分かり易く、非常に助かりました。
今後も是非活用させていきたいと思います。

<span class="quote1">&gt; 認証時に出る reject は、今度は radius_acct_attr とは全く別のところで</span>
<span class="quote1">&gt; 引っかかっています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; これは MySQL のログと、radiusd のデバッグ出力で追います</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; mysql.c で全て行っています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; Linux では動いてますが、(PortMaster3, MAX2000,4000,6000)</span>
<span class="quote1">&gt; FreeBSD では動かしたことないのです。</span>
<span class="quote1">&gt; もし、radiusd -x の出力が、どうも正しい値でないというのであれば、</span>
<span class="quote1">&gt; バグかもしれません。</span>

現状では、
FreeBSD 3.2-RELEASE
FreeBSD 3.3-RELEASE
上にてそれぞれ構築,検証(radping)してみましたが、
特に問題はありませんでした。

その他気付いたところはMySQLではないのですが、
起動中のradiusdにHUPシグナルを送るとradiusdが落ちてしまい、
私の力ではPCを再起動しない限りradiusdが
起動しないという場面に遭遇しまました。
MySQLとの関連性を考えてMySQLを一度落として再起動してから
radiusdを起動させようとしましたが、ダメでした。
ですので設定等の変更の際、radiusdにはHUPでなく、
一度radiusdをキチンと落としてから再起動してあげる必要があるようです。

次はMAX4000で実運用レベルでの検証をしてみたいと思います。


_/-_/-_/-_/-_/-_/-_/-_/-_/-_/-_/-_/-_/-_/
  クボタシステム開発株式会社
　ネットワークコンピューティングセンター
　野口昌利 marlan@xxxxxxxxxx
　Tel 03-5562-6257 Fax 03-5562-6268
_/-_/-_/-_/-_/-_/-_/-_/-_/-_/-_/-_/-_/-_/


</pre>
</div>
<p class="button"><a href="1553">[前]</a><a href="1555">[次]</a><a href="../list/1501-1600">[番号順一覧]</a><a href="../thread/1501-1600">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="1541">   1541 2000-02-04 20:54 [&quot;NOGUCHI Masatoshi&quot; ] Radius+MySQL について                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1544">   1544 2000-02-05 12:20 ┗[&lt;takeshi@xxxxxxxxxx&gt;]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="1554">   1554 2000-02-07 21:18 　┗[&quot;NOGUCHI Masatoshi&quot; ] Radius+MySQL 成功しました           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="1556">   1556 2000-02-08 08:41 　　┗[&lt;takeshi@xxxxxxxxxx&gt;]                                   </a></span>
</pre>
</body>
</html>
