<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9560</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="9559">[前]</a><a href="9561">[次]</a><a href="../list/9501-9600">[番号順一覧]</a><a href="../thread/9501-9600">[スレッド一覧]</a></p>
<p class="id">
mysql:9560
</p>
<div class="header">
<p>
From: &quot;KAWAI,Takanori&quot; &lt;&quot;KAWAI,Takanori&quot; &lt;GCD00051@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 7 Jun 2004 23:04:11 +0900<br>
Subject: [mysql 09560] Re: 画像データの登録に関する1064エラー<br>

</p>
</div>
<div class="body">
<pre>
川合孝典@PHPは...な人です。


----- Original Message ----- 
From: &quot;Shiro Ozawa&quot; &lt;shiro@xxxxxxxxxx&gt;
To: &lt;ml@xxxxxxxxxx&gt;
Sent: Monday, June 07, 2004 3:50 PM
Subject: <a href="09541">[mysql 09541]</a> 画像データの登録に関する1064エラー


<span class="quote1">&gt; 小澤と申します．</span>
（中略）
<span class="quote1">&gt; となると，addslashesを疑いたくなるのですが，小さいファイルでは問題なく登</span>
<span class="quote1">&gt; 録できているのでそれもできません．</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; あれこれ調べたのですが，万策尽きた感があります．</span>
<span class="quote1">&gt; 原因として何が考えられますでしょうか？</span>
なにはともあれ実際にどのようなエラーが発生しているか確認してみては？
それも字面だけ（ブラウザに表示されている文字）ではなく実際にどのような
エラーメッセージを出しているのかきちんと調べるべきでしょう。
#1064ってSQL syntaxのエラーでしょうから、その部分がメッセージに
#入ってませんかねぇ。

私としてはやっぱりaddslashesでは役不足と考えますが。
PHPの関数の動きはわかりませんが、ドキュメントを見る限り

&lt;quote src=&quot;<a href="http://jp2.php.net/addslashes">http://jp2.php.net/addslashes</a>&quot;&gt;
データベースへの問い合わせなどに際してクォートされるべき 文字の前に
バックスラッシュを挿入した文字列を返します。クォート されるべき文字とは、
シングルクォート('), ダブルクォート(&quot;),バックスラッシュ (\) ,NUL (NULL バイ
ト)です。
&lt;/quote&gt;
てなこといってますから、バイナリデータをそのまま登録するのには
あまり適していないように思われます。
mysql_escape_stringかmysql_real_escape_stringを使うべきではと
考えますがいかがでしょう？
参考：
<a href="http://jp2.php.net/manual/ja/function.mysql-escape-string.php">http://jp2.php.net/manual/ja/function.mysql-escape-string.php</a>
<a href="http://jp2.php.net/manual/ja/function.mysql-real-escape-string.php">http://jp2.php.net/manual/ja/function.mysql-real-escape-string.php</a>

ちなみにDBD::mysql(2.9003)ではmysql_real_escape_stringを
使ってますね。

===================================================
川合 孝典 (Hippo2000)
   DBI日本語メーリングリスト管理人、Kansai.pm所属
   kwitknr@xxxxxxxxxx GCD00051@xxxxxxxxxx
   <a href="http://member.nifty.ne.jp/hippo2000">http://member.nifty.ne.jp/hippo2000</a>、<a href="http://www.hippo2000.info/">http://www.hippo2000.info/</a>
perldocの日本語情報ならperldocjp：翻訳してみませんか？
  <a href="http://perldocjp.sourceforge.jp/">http://perldocjp.sourceforge.jp/</a>
===================================================


</pre>
</div>
<p class="button"><a href="9559">[前]</a><a href="9561">[次]</a><a href="../list/9501-9600">[番号順一覧]</a><a href="../thread/9501-9600">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="9541">   9541 2004-06-07 15:50 [Shiro Ozawa &lt;shiro@x] 画像データの登録に関する1064エラー      </a></span>
<span class="current">-&gt;&nbsp;<a href="9560">   9560 2004-06-07 23:04 ┗[&quot;KAWAI,Takanori&quot; &lt;GC]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9567">   9567 2004-06-08 09:30 　┗[Shiro Ozawa &lt;shiro@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9582">   9582 2004-06-09 16:43 　　┗[Shiro Ozawa &lt;shiro@x]                                   </a></span>
</pre>
</body>
</html>
