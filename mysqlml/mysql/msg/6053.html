<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:6053</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="6052.html">[前]</a><a href="6054.html">[次]</a><a href="../list/6001-6100.html">[番号順一覧]</a><a href="../thread/6001-6100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:6053
</p>
<div class="header">
<p>
From: 田雑  雅広 &lt;田雑  雅広 &lt;TazouM@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 2 Sep 2002 14:11:24 +0900 <br>
Subject: [mysql 06053] テーブルのロックについて<br>

</p>
</div>
<div class="body">
<pre>はじめまして、田雑と申します。
早速質問なのですが、
いま、伝票番号を発番する処理を作っているところなのですが、
伝票番号テーブルなるものを作って最大の伝票番号を保存するように
しておき、発番するときはテーブルから取得し「プラス１」することで実現しようと
思っています。
その際、Lock Tables と Unlock Tables を使って複数端末で同時アクセスしても
同じ番号をとってこないようにしています。
このとき、ロックしたまま端末がハングアップしてしまった場合、
他の端末もだんまりとなり、デッドロック状態になってしまいます。
（無理やり状況を作って試しました）
この回避方法としてなにかアドバイスいただけないでしょうか。

最後になりましたが、環境としてはこのような感じです。
　サーバーWindows２０００Ｓｅｒｖｅｒ／ＭｙＳＱＬ　３．２３．５１
　クライアントWindows２０００Ｐｒｏ／Ａｃｃｅｓｓ２０００（パススルークエ
リ）

よろしくお願いします。

</pre>
</div>
<p class="button"><a href="6052.html">[前]</a><a href="6054.html">[次]</a><a href="../list/6001-6100.html">[番号順一覧]</a><a href="../thread/6001-6100.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="6053.html">   6053 2002-09-02 14:11 [田雑  雅広 &lt;TazouM@x] テーブルのロックについて                </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="6056.html">   6056 2002-09-02 14:45 ┗[遠藤 俊裕 &lt;endo_t@xx]                                       </a></span>
</pre>


</body></html>