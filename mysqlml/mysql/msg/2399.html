<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:2399</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="2398.html">[前]</a><a href="2400.html">[次]</a><a href="../list/2301-2400.html">[番号順一覧]</a><a href="../thread/2301-2400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:2399
</p>
<div class="header">
<p>
From: &quot;Koichi Shobatake&quot; &lt;&quot;Koichi Shobatake&quot; &lt;kazu@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 23 Aug 2000 19:52:12 +0900<br>
Subject: [mysql 02399] Re: select でインデックスを使用しない場合がある？<br>

</p>
</div>
<div class="body">
<pre>
正畠です。

お返事ありがとうございます。


<span class="quote1">&gt;# ML に投稿する時は Reply-To をつけない方がよろしいかと…</span>

失礼しました。

<span class="quote1">&gt;</span>
<span class="quote1">&gt;同じ SQL ならインデックスも同じように使われるはずです。インデックスを使</span>
<span class="quote1">&gt;用していないという根拠は何でしょうか？</span>
<span class="quote1">&gt;</span>

すみません、「早い」、「遅い」があいまいでした。

テーブルのサイズは、10万件弱なのですが、

「早い」は
・mysqlのクライアントを使用している場合、
・同じテーブルに対して別のIndexを使用してのクエリー、
・問題のSQL文のWEB経由で「早い」場合は、Queryのレスポンスタイム
でレスポンスタイムは1[sec]以下です。

「遅い」は
Queryが帰ってくるのに、DBServerのCPUの使用量が高い状態を保ったまま
20[sec]以上かかっているため、そうなのかなと。
＃まだまだ定性的ですみません。

PHP経由でexplain select **** とかを吐き出すようにする
ことはできれば確実にわかるのですが…。


<span class="quote1">&gt;1回目と2回目で検索速度が異なるのは、単に2回目以降はキャッシュに溜ってい</span>
<span class="quote1">&gt;るから速いだけではないかと思います。</span>


SQL文がキャッシュされているとことでしょうか、それとも、クエリーの結果が
キャッシュにたまるということでしょうか？
数日後に同じQueryを流しても、ページにアクセスしても結果は早いです。
結構頻繁にアクセスを受けているためクエリーの結果がずっとキャッシュ
されているというのは考えにくいのかなと思っておりました。

以上よろしくお願いします。
それでは、失礼いたします。







</pre>
</div>
<p class="button"><a href="2398.html">[前]</a><a href="2400.html">[次]</a><a href="../list/2301-2400.html">[番号順一覧]</a><a href="../thread/2301-2400.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="2399.html">   2399 2000-08-23 19:52 [&quot;Koichi Shobatake&quot; &lt;] Re: select でインデックスを使用しない場合がある？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2400.html">   2400 2000-08-24 15:35 ┗[Satoshi Koiwa &lt;koiwa]                                       </a></span>
</pre>
</body>
</html>
