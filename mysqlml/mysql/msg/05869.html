<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5869</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="5868.html">[前]</a><a href="5870.html">[次]</a><a href="../list/5801-5900.html">[番号順一覧]</a><a href="../thread/5801-5900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:5869
</p>
<div class="header">
<p>
From: KAWAJI Shinya &lt;KAWAJI Shinya &lt;kawaji@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 29 Jul 2002 16:25:51 +0900<br>
Subject: [mysql 05869] Re: 掲示板との連携で、 order by について<br>

</p>
</div>
<div class="body">
<pre>
かわじ、です。


<span class="quote1">&gt; 今回MySQLとPerlで掲示板を作成しているのですが、</span>
<span class="quote1">&gt; 親記事に対して返信があればその記事を一番上に表示するという機能を</span>
<span class="quote1">&gt; 実装したいと考えています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; いろいろ悩んだ結果、idを3つつけて下記のようにしました。</span>
<span class="quote1">&gt; id		通し番号	MySQL側で自動的に付ける</span>
<span class="quote1">&gt; id_res		返信に付ける	親記事の通し番号</span>
<span class="quote1">&gt; id_		返信があった場合に今ある id_ の最大値 +1 の値を付ける</span>


方針が違いますが、id_ の代わりに、data_ を付けて、
返信があったときに、遡って最上位の親記事の date_ を更新しては
いかがでしょう？

つまり、

	date	その記事の投稿日時
	date_	子記事（孫記事）の最新投稿日時（なければ NULL ）

という感じで、以下のようにしては？

	order by ifnull(date_,date) desc

つまり言いたいことは、親記事が、その子孫記事の最新の更新日時を
把握しているのが良いのではないかと、いうことです。
そうすれば、id がどうのこうのではなく、日時でソートすれば
良いのではないか、と。（やりたいことは日時の最新順ですから）



</pre>
</div>
<p class="button"><a href="5868.html">[前]</a><a href="5870.html">[次]</a><a href="../list/5801-5900.html">[番号順一覧]</a><a href="../thread/5801-5900.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="5868.html">   5868 2002-07-29 16:01 [TATSUYA &lt;tatsuya@xxx] 掲示板との連携で、 order by  について   </a></span>
<span class="current">-&gt;&nbsp;<a href="5869.html">   5869 2002-07-29 16:25 ┣[KAWAJI Shinya &lt;kawaj]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5871.html">   5871 2002-07-29 16:40 ┃┗[TATSUYA &lt;tatsuya@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5870.html">   5870 2002-07-29 16:32 ┗[遠藤 俊裕 &lt;endo_t@xx]                                       </a></span>
</pre>
</body>
</html>
