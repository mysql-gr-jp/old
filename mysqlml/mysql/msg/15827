<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15827</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15826">[前]</a><a href="15828">[次]</a><a href="../list/15801-15900">[番号順一覧]</a><a href="../thread/15801-15900">[スレッド一覧]</a></p>
<p class="id">
mysql:15827
</p>
<div class="header">
<p>
From: ひろ &lt;ひろ &lt;hiro@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 28 Aug 2012 00:31:10 +0900<br>
Subject: [mysql 15827] Re: mysqlコマンドで最新のデータを参照したい<br>

</p>
</div>
<div class="body">
<pre>
ひろです。
ご回答ありがとうございます。

実は「もしかして」と思い、例2のパターンと同じようにcommitを試してみたのですが、
再ログインするまで最新の結果は取れませんでした。
そうかと思うと、何もしなくても例１のC3で最新のデータが取れる時もありました。
それで途方に暮れてしまった次第です。
裏で実行するプログラムは手動で起動していますので、完了は見届けてから
selectを発行しています。

自分一人では確認方法に問題が有るかも知れないと思い、同僚にもクロスチェックして
貰いましたが同僚も首をかしげていました。

よろしくお願いします。


2012年8月27日 20:49 Tomohiro 'Tomo-p' KATO &lt;tomop@xxxxxxxxxx&gt;:

<span class="quote1">&gt; こんばんは。かとうです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; On 12/08/27 20:28, ひろ wrote:</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt; &gt; ２ではコミットしていますので、３でその結果が見れるものと思っていたのですが</span>
<span class="quote2">&gt; &gt; 見れたり見れなかったりしたので質問させて頂きました。</span>
<span class="quote2">&gt; &gt; 同じ操作をした時に、常に同じ結果になるなら、それなりに納得もできるのですが、</span>
<span class="quote2">&gt; &gt; 何らかのタイミング？で動作が変わってしまうため困っておりました。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; ２は確かにコミットしている（再ログインで最新の結果が見れるので間違いないはず）のですが、</span>
<span class="quote2">&gt; &gt; なんで見れたり見れなかったりするのか不明です。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;  勘違いされているようですが、私はmysqlコマンド上でのお話をしています。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;   *例1</span>
<span class="quote1">&gt; C1. mysqlコマンドでログイン</span>
<span class="quote1">&gt; C2. select文発行</span>
<span class="quote1">&gt; C3. select文発行</span>
<span class="quote1">&gt; C4. ログアウト</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 例1では、C2.からC4.までが1トランザクションになっており、分離レベル</span>
<span class="quote1">&gt; がREPEATABLE READの場合、C3.ではC2.より前にcommitされたデータが読ま</span>
<span class="quote1">&gt; れています（C2.とC3.での結果が同一となる）。C2.〜C3.の間にcommitされ</span>
<span class="quote1">&gt; たデータを読みたい場合は</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;   *例2</span>
<span class="quote1">&gt; C1. mysqlコマンドでログイン</span>
<span class="quote1">&gt; C2. select文発行</span>
<span class="quote1">&gt; C3. commit/rollback</span>
<span class="quote1">&gt; C4. select文発行</span>
<span class="quote1">&gt; C5. ログアウト</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; のように、mysqlコマンド上でもトランザクション終了を明示する必要があ</span>
<span class="quote1">&gt; ります。例2の場合、C2.〜C3.、C4.〜C5.、の2トランザクションになります。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; --</span>
<span class="quote1">&gt;     __________________________________________________</span>
<span class="quote1">&gt;   _/_/  Tomohiro &quot;Tomo-p&quot; KATO  &lt;tomop@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt;  _/_/  Team Gedoh Network  <a href="http://www.teamgedoh.net/">http://www.teamgedoh.net/</a></span>
<span class="quote1">&gt; _/_/  Key fingerprint = A6D8 3981 3575 9F00 EFC3  9C2B F03A 5383 9287 74D9</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>


</pre>
</div>
<div class="attach">
<h3 class="attachtitle">添付ファイル</h3>
<ul>
<li><a href="http://www.mysql.gr.jp/mysqlml/mysql/msg/15827/0/"> [text/html]</a>
</ul>
</div>
<p class="button"><a href="15826">[前]</a><a href="15828">[次]</a><a href="../list/15801-15900">[番号順一覧]</a><a href="../thread/15801-15900">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="15820">@ 15820 2012-08-27 11:52 [ひろ &lt;hiro@xxxxxxxxx] mysqlコマンドで最新のデータを参照したい </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15822">  15822 2012-08-27 18:31 ┗[yoku ts &lt;yoku0825@xx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15823">@ 15823 2012-08-27 19:39 　┗[ひろ &lt;hiro@xxxxxxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15824">  15824 2012-08-27 20:20 　　┣[Tomohiro 'Tomo-p' KA]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15825">@ 15825 2012-08-27 20:28 　　┃┗[ひろ &lt;hiro@xxxxxxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15826">  15826 2012-08-27 20:49 　　┃　┗[Tomohiro 'Tomo-p' KA]                               </a></span>
<span class="current">-&gt;&nbsp;<a href="15827">@ 15827 2012-08-28 00:31 　　┃　　┗[ひろ &lt;hiro@xxxxxxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15828">  15828 2012-08-28 01:37 　　┃　　　┗[Tomohiro 'Tomo-p' KA]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15829">@ 15829 2012-08-28 10:13 　　┃　　　　┗[ひろ &lt;hiro@xxxxxxxxx]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15830">@ 15830 2012-08-28 11:11 　　┃　　　　　┗[&quot;Mr. Gimmick&quot; &lt;midri]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15831">@ 15831 2012-08-28 11:28 　　┃　　　　　　┗[ひろ &lt;hiro@xxxxxxxxx]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15832">  15832 2012-08-28 21:59 　　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15833">@ 15833 2012-08-29 10:59 　　　┗[ひろ &lt;hiro@xxxxxxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15835">  15835 2012-08-30 09:54 　　　　┗[yoku ts &lt;yoku0825@xx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15836">@ 15836 2012-08-30 11:14 　　　　　┗[ひろ &lt;hiro@xxxxxxxxx]                             </a></span>
</pre>
</body>
</html>
