<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13054</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13053">[前]</a><a href="13055">[次]</a><a href="../list/13001-13100">[番号順一覧]</a><a href="../thread/13001-13100">[スレッド一覧]</a></p>
<p class="id">
mysql:13054
</p>
<div class="header">
<p>
From: &quot;rishiri.info&quot; &lt;&quot;rishiri.info&quot; &lt;mail@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 2 Jun 2006 22:52:01 +0900<br>
Subject: [mysql 13054] Re: 追加で男女別 rank  フィールドを設けたい<br>

</p>
</div>
<div class="body">
<pre>
rishiri.infoです。お騒がせしてすいません。
F.Y 様のヒント（ほぼ答えですね）
<span class="quote1">&gt; set @male = 0, @female = 0;</span>
<span class="quote1">&gt; select if(性別 = '♂', @male := (@male + 1), @female:=(@female + 1)) as</span>
<span class="quote1">&gt; 性別順位</span>
<span class="quote1">&gt; from データ;</span>

のお陰で

SELECT kiroku.scode As scode, sensyu.namae As namae, sei.seibetsu As
seibetsu,
min(if(kiroku.kcode = 4, kiroku.ktime, null)) As 4P,
min(if(kiroku.kcode = 9, kiroku.ktime, null)) As 9P,
min(if(kiroku.kcode = 13, kiroku.ktime, null)) As GP,
timediff(max(if(kiroku.kcode = 13, kiroku.ktime, null)),'06:00:00') As
tdiff,
@r1:=(@r1 + 1) As rank,
if(seibetsu = '男', @male := (@male + 1), @female:=(@female + 1)) As rank2
FROM kiroku,sensyu,kukan,sei
WHERE kiroku.scode = sensyu.scode
AND kukan.kcode = kiroku.kcode
AND sei.seicode = sensyu.seicode
GROUP BY scode, namae, seibetsu
ORDER BY tdiff DESC, rank2 DESC

男女別フィールド rank2 を追加して
男女別でも順位をつけることは可能になりました。
ありがとうございました！

--
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.394 / Virus Database: 268.8.1/354 - Release Date: 2006/06/01


</pre>
</div>
<p class="button"><a href="13053">[前]</a><a href="13055">[次]</a><a href="../list/13001-13100">[番号順一覧]</a><a href="../thread/13001-13100">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13050">  13050 2006-06-02 12:45 [&quot;rishiri.info&quot; &lt;mail] 追加で男女別rankフィールドを設けたい    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13051">  13051 2006-06-02 14:36 ┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="13054">  13054 2006-06-02 22:52 　┗[&quot;rishiri.info&quot; &lt;mail]                                     </a></span>
</pre>
</body>
</html>
