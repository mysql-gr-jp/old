<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8937</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8936.html">[前]</a><a href="8938.html">[次]</a><a href="../list/8901-9000.html">[番号順一覧]</a><a href="../thread/8901-9000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8937
</p>
<div class="header">
<p>
From: (王　穎) &lt;&lt;ouei@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 09 Mar 2004 12:00:59 +0900<br>
Subject: [mysql 08937] Re: Mysql のバックアップとリカバリ<br>

</p>
</div>
<div class="body">
<pre>
沢渡　さん

ご回答いただき、ありがとうございます。

<span class="quote1">&gt;    SET FOREIGN_KEY_CHECKS = 0;</span>
すばらしい、試してみます。

できると思いますが、ただ、
復旧するときに、一行一行insertするですよね、
時間がかかりそうかなと思います。
一応計ってみます。

以上、よろしくお願いします。

Mikage Sawatari さんは書きました:
<span class="quote1">&gt;    </span>
<span class="quote1">&gt;    こんにちは，みかげです．</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;On Mon, 08 Mar 2004 19:23:46 +0900</span>
<span class="quote1">&gt;ouei@xxxxxxxxxx (王　穎) wrote:</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt;&gt; 戻るコマンド：mysql &lt;dumpfile</span>
<span class="quote2">&gt;&gt; で、テーブルの親子関係自動的に識別できないので、</span>
<span class="quote2">&gt;&gt; 利用できません。</span>
<span class="quote1">&gt;    </span>
<span class="quote1">&gt;    以下のようにすればうまくいくかと思います．</span>
<span class="quote1">&gt;    </span>
<span class="quote1">&gt;・バックアップ</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;mysqldump -uroot --all --add-drop-table --quote-names</span>
<span class="quote1">&gt; --single-transaction --disable-keys --extended-insert dbname &gt; dbname.sql</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;・リストア</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;mysql dbname</span>
<span class="quote1">&gt;mysql&gt; SET FOREIGN_KEY_CHECKS = 0;</span>
<span class="quote1">&gt;mysql&gt; \. dbname.sql</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;    </span>
<span class="quote1">&gt;    SET FOREIGN_KEY_CHECKS = 0;</span>
<span class="quote1">&gt;    というのを実行することで，一時的に外部キーチェックを</span>
<span class="quote1">&gt;    しなくなるので，うまくリストア出来るかと思います．</span>
<span class="quote1">&gt;    </span>
<span class="quote1">&gt;    InnoDB のマニュアルに書いてありました．</span>
<span class="quote1">&gt;    （わかりにくく，わたしも見つけるのに苦労しましたが(^^;）</span>
<span class="quote1">&gt;    </span>
<span class="quote1">&gt;    </span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; -----------------------------------------------------------------------</span>
<span class="quote1">&gt; Handle : 沢渡 みかげ (mikage@xxxxxxxxxx)               ☆沢渡 みかげ☆</span>
<span class="quote1">&gt; PGP5 DH/DSS key FP : 76D9 DBB7 5E3C 865B 7A60  A1E8 0A97 3DF0 B130 0941</span>
<span class="quote1">&gt;        You can get my PGP key at <a href="http://www.mikage.to/mikage/mikage.asc">http://www.mikage.to/mikage/mikage.asc</a></span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>

----
WangYing  ouei@xxxxxxxxxx
Tel:3220/8-67-3220/044-969-1461


</pre>
</div>
<p class="button"><a href="8936.html">[前]</a><a href="8938.html">[次]</a><a href="../list/8901-9000.html">[番号順一覧]</a><a href="../thread/8901-9000.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8930.html">   8930 2004-03-08 19:23 [&lt;ouei@xxxxxxxxxx&gt;   ] Mysql のバックアップとリカバリ          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8931.html">   8931 2004-03-09 02:53 ┣[ML account &lt;ml@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8936.html">   8936 2004-03-09 11:55 ┃┗[&lt;ouei@xxxxxxxxxx&gt;   ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8932.html">   8932 2004-03-09 03:48 ┣[Mikage Sawatari &lt;mik]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="8937.html">   8937 2004-03-09 12:00 ┃┗[&lt;ouei@xxxxxxxxxx&gt;   ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8933.html">   8933 2004-03-09 08:57 ┗[yoshi &lt;yosihisa@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8938.html">   8938 2004-03-09 11:38 　┗[&lt;ouei@xxxxxxxxxx&gt;   ]                                     </a></span>
</pre>
</body>
</html>
