<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13251</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13250">[前]</a><a href="13252">[次]</a><a href="../list/13201-13300">[番号順一覧]</a><a href="../thread/13201-13300">[スレッド一覧]</a></p>
<p class="id">
mysql:13251
</p>
<div class="header">
<p>
From: IIDAYUICHI &lt;IIDAYUICHI &lt;y_iida@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 21 Aug 2006 15:15:33 +0900<br>
Subject: [mysql 13251] Re: FOREIGN_KEY_CHECKS=0  で外部参照を回避してリストア<br>

</p>
</div>
<div class="body">
<pre>
IIDA です。

レス有難うございます。参考にさせていただきました。
エラーNO 121 が連発していたので調べてみました所以下になりました。

結果から申しますと参照制約の情報がibdata1,ib_logfile012の中に存在
しているようでそのままデータベースをDropしただけではリストアする
事ができないようです。なのでこれらを削除する事で解決しました。

やったこと

0. dump後対象データベースをDrop。
1. データベースを一度止める。
2. ibdata1,ib_logfile012 を削除。
3. 再度データベースを起動。(logfile再作成)
4. 対象データベースをcreate。
5. dumpファイルからリストア。

その後は何回でも普通にDrop、Createしリストアできるようになりました。


しかしなぜデータベースの参照制約がibdata1,ib_logfile012の中に残って
しまっているのかは不明です。またこの方法が一番なのかはわかりません
が他に良い方法があればご教授いただければ幸です。


環境: mysql-4.1.3


-- 
IIDAYUICHI &lt; y_iida@xxxxxxxxxx &gt;

</pre>
</div>
<p class="button"><a href="13250">[前]</a><a href="13252">[次]</a><a href="../list/13201-13300">[番号順一覧]</a><a href="../thread/13201-13300">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13248">  13248 2006-08-18 20:19 [IIDAYUICHI &lt;y_iida@x] FOREIGN_KEY_CHECKS=0  で外部参照を回避してリストア</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13249">  13249 2006-08-19 00:10 ┣[SATOH Fumiyasu &lt;fumi]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13250">  13250 2006-08-19 09:42 ┣[Koichi Taniguchi &lt;ta]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="13251">  13251 2006-08-21 15:15 ┗[IIDAYUICHI &lt;y_iida@x]                                       </a></span>
</pre>
</body>
</html>
