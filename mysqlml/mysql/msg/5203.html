<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5203</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="5202.html">[前]</a><a href="5204.html">[次]</a><a href="../list/5201-5300.html">[番号順一覧]</a><a href="../thread/5201-5300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:5203
</p>
<div class="header">
<p>
From: &quot;KAWAI,Takanori&quot; &lt;&quot;KAWAI,Takanori&quot; &lt;GCD00051@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 26 Feb 2002 23:09:17 +0900<br>
Subject: [mysql 05203] Re: 全件検索の時間<br>

</p>
</div>
<div class="body">
<pre>
川合孝典です。

----- Original Message -----
From: &quot;fuji&quot; &lt;fujita_n@xxxxxxxxxx&gt;
To: &quot;Mysql ML&quot; &lt;ml@xxxxxxxxxx&gt;
Sent: Tuesday, February 26, 2002 10:22 PM
Subject: <a href="05201.html">[mysql 05201]</a> 全件検索の時間


<span class="quote1">&gt; はじめまして。ふじといいます。</span>
<span class="quote1">&gt; MySQL初心者です。（データベース自体初心者）</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 見よう見真似で、Apache + Perl + MySQL で</span>
<span class="quote1">&gt; ＤＢを作成しました。</span>
DBIのドキュメントはきちんと目を通すことをお勧めします。
今のままでも動くでしょうけれど、後々のことを考えるとあまり
いいコードとは思えないので。
ポイントは
- use strictを使うようにしましょう
- AutoCommitも設定しましょう。さらにRaiseErrorも知っておくと便利でしょう。
- rowsプロパティを信用してはいけません。特にexecuteの直後は。
　（データベースを変えたときに痛い目にあいかねません）

<span class="quote1">&gt; WEBブラウザからPerlを使って検索してみたのですが、</span>
<span class="quote1">&gt; ９万件ぐらいで、５秒ぐらいかかります。</span>
<span class="quote1">&gt; ５千件ぐらいの時は一瞬でした。</span>
<span class="quote1">&gt; 件数が増えるとこういうものなのでしょうか？</span>
<span class="quote1">&gt; もしくは設定が全然ダメなんでしょうか？</span>
（以下略）
ざっとみてポイントは２つかなと。
まず5,000件と90,000件で全件検索させているのであれば、
しかも全部出力するのであれば、単純に考えれば18倍近く
時間が掛かっても仕方ないでしょう。
＃0.3秒が5秒になっても、それほど不思議ではないでしょう。
それに配列にデータを突っ込んでいるみたいですし。

さらに本当に全件検索したいのであれば、WHEREから下の
条件はいらないはず。
＃LIKE '%'っていうのがどのように評価されるのかちょっと
＃分かりかねますが

===================================================
川合 孝典 (Hippo2000)
   DBI日本語メーリングリスト管理人、Kansai.pm所属
   kwitknr@xxxxxxxxxx GCD00051@xxxxxxxxxx
   <a href="http://member.nifty.ne.jp/hippo2000">http://member.nifty.ne.jp/hippo2000</a>
   <a href="http://www.hippo2000.net/">http://www.hippo2000.net/</a>
「Perlを256倍使うための本　DBI編」　3/14発売予定(^^)
===================================================


</pre>
</div>
<p class="button"><a href="5202.html">[前]</a><a href="5204.html">[次]</a><a href="../list/5201-5300.html">[番号順一覧]</a><a href="../thread/5201-5300.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="5201.html">   5201 2002-02-26 22:22 [&quot;fuji&quot; &lt;fujita_n@xxx] 全件検索の時間                          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5202.html">   5202 2002-02-26 23:01 ┣[tateyan &lt;tateyan@xxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="5203.html">   5203 2002-02-26 23:09 ┣[&quot;KAWAI,Takanori&quot; &lt;GC]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5204.html">   5204 2002-02-26 23:09 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5205.html">   5205 2002-02-27 00:11 　┗[tateyan &lt;tateyan@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5206.html">   5206 2002-02-27 03:34 　　┗[&quot;Takuji Hidaka&quot; &lt;tak]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5207.html">   5207 2002-02-27 10:29 　　　┗[&quot;fuji&quot; &lt;fujita_n@xxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5208.html">   5208 2002-02-27 11:51 　　　　┗[&quot;KAWAI,Takanori&quot; &lt;GC]                               </a></span>
</pre>
</body>
</html>
