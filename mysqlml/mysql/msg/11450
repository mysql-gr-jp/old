<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11450</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="11449">[前]</a><a href="11451">[次]</a><a href="../list/11401-11500">[番号順一覧]</a><a href="../thread/11401-11500">[スレッド一覧]</a></p>
<p class="id">
mysql:11450
</p>
<div class="header">
<p>
From: なべ 太郎 &lt;なべ 太郎 &lt;nabenabe0525@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 26 May 2005 19:59:32 +0900<br>
Subject: [mysql 11450] Re: mysql C APIの接続と切断について<br>

</p>
</div>
<div class="body">
<pre>
天野様。お返事ありがとうございます。なべです。

<span class="quote1">&gt;解決法ではないのですが、同様の現象で前々から困っている者の一人として発言し</span>
ます。
<span class="quote1">&gt;</span>
<span class="quote1">&gt;Windows XP または Windows Server 2003 の C++ で mysql に接続・切断を繰り返</span>
すとあ
<span class="quote1">&gt;る時点でエラーになってしまいます。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;私のところで試した例では、大体7000〜8000回のループでストップします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;接続方法は C API でも ODBC 経由でも同じです。</span>
<span class="quote1">&gt;この現象が発生する OS は Windows XP または Windows Server 2003 で、Windows </span>
2000
<span class="quote1">&gt;では発生しません。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;調べたところ接続、切断の度に稼働プロセス数が増えています。つまり、メモリ</span>
リークし
<span class="quote1">&gt;ているのです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;ずいぶん時間をかけて調べましたが、原因はいまだに分かりません。特定の OS の</span>
み発生
<span class="quote1">&gt;するということは、 OS のバグの可能性もあると思います。</span>

　そうですか。
　そういえばＯＳ書いてませんでした・・・。私のところで試したのは
　Windows2003Server、Windows2000Professional　です。
　
　未だ調べている最中ですが、現段階で言えることは
　　・接続回数がmax_connectionsの設定している値を超えると必ず接続できなくな
る。
　　・接続出来なくなるとmysqlを再起動するまで接続できない

　ということしか言えません。
　netstat等を使用してポートも観察しましたが、開放された後でもやっぱり接続出
来ません。
　プロセス、メモリも調べましたが、特にリークしているようには思いませんでし
た。
　その事から考えると天野様の現象とはまた違うのかもしれませんね。
　
　話はそれるのですが、未だ解決してないこの問題をどう回避されているのでしょう
か？
　もし差し支えなければ教えて頂けるとありがたいです。
　

_________________________________________________________________
日本国内最大級570万ユーザーのMSN Hotmail 
<a href="https://registernet.passport.net/reg.srf?id=2&amp;lc=1041">https://registernet.passport.net/reg.srf?id=2&amp;lc=1041</a> 


</pre>
</div>
<p class="button"><a href="11449">[前]</a><a href="11451">[次]</a><a href="../list/11401-11500">[番号順一覧]</a><a href="../thread/11401-11500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="11442">  11442 2005-05-26 10:41 [なべ 太郎 &lt;nabenabe0] mysql C APIの接続と切断について         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11448">  11448 2005-05-26 19:30 ┣[天野　潔 &lt;kiyoshi.am]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="11450">  11450 2005-05-26 19:59 ┃┗[なべ 太郎 &lt;nabenabe0]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11452">  11452 2005-05-26 20:59 ┃　┗[天野　潔 &lt;kiyoshi.am]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11454">  11454 2005-05-26 22:20 ┃　　┗[なべ 太郎 &lt;nabenabe0]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11458">  11458 2005-05-27 10:53 ┃　　　┗[天野　潔 &lt;kiyoshi.am]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11470">  11470 2005-05-30 11:42 ┃　　　　┗[なべ 太郎 &lt;nabenabe0]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11474">  11474 2005-05-30 13:20 ┃　　　　　┗[&quot;TAKAHASHI, Tomohiro]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11480">  11480 2005-05-31 10:54 ┃　　　　　　┗[なべ 太郎 &lt;nabenabe0]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11481">  11481 2005-05-31 12:34 ┃　　　　　　　┗[&quot;TAKAHASHI, Tomohiro]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11482">  11482 2005-05-31 13:29 ┃　　　　　　　　┗[なべ 太郎 &lt;nabenabe0]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11455">  11455 2005-05-26 23:11 ┗[&quot;TAKAHASHI, Tomohiro]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11459">  11459 2005-05-27 15:34 　┗[なべ 太郎 &lt;nabenabe0]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11460">  11460 2005-05-27 15:38 　　┗[&quot;TAKAHASHI, Tomohiro]                                   </a></span>
</pre>
</body>
</html>
