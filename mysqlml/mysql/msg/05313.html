<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:5313</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="5312.html">[前]</a><a href="5314.html">[次]</a><a href="../list/5301-5400.html">[番号順一覧]</a><a href="../thread/5301-5400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:5313
</p>
<div class="header">
<p>
From: Tybalt of Capulet &lt;Tybalt of Capulet &lt;ice-man@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 05 Apr 2002 00:54:21 +0900<br>
Subject: [mysql 05313] 画像ファイルのインサート<br>

</p>
</div>
<div class="body">
<pre>神崎です。

現在アップロードされた画像ファイルをテーブルにインサート
する処理でつまづいてます。

------テーブル定義---------
create table tmp_img (
id VARCHAR(20) NOT NULL,
photoimg BLOB,
primary key (id)
)
---------------------------

-------PHPスクリプト-------------------
$fp = fopen($photo, "r");
  $photo_b = fread($fp, filesize($photo));
fclose($fp);

mysql_query( "REPLACE INTO tmp_img (id,photoimg) VALUES ('1','$photo_b')"
);
---------------------------------------

このような感じなのですが上記のSQL文を実行しても全くインサートされません。
REPLACEをINSERTに変えても同じでした。
更に$photo_bの変数にはちゃんとバイナリファイルが格納されており、
$photo_bをtest.jpgとしてファイルに書き出すと問題なく書き出され
test.jpgを表示できました。
ということはインサート文でこけているか、テーブルの作り方がいけないような
きがするのですがPerlではこのテーブル定義で問題なかったのでなにが
いけないのかがわかりません。
どなたかお分かりのかたご教授いただけないでしょうか？

PHP 4.0.6
MySQL 3.23.38
Apache 1.3.12


________________________________R_y_u_____
神崎 隆
Mail：ice-man@xxxxxxxxxx
_____K_a_n_z_a_k_i________________________


</pre>
</div>
<p class="button"><a href="5312.html">[前]</a><a href="5314.html">[次]</a><a href="../list/5301-5400.html">[番号順一覧]</a><a href="../thread/5301-5400.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="5313.html">   5313 2002-04-05 00:54 [Tybalt of Capulet &lt;i] 画像ファイルのインサート                </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5314.html">   5314 2002-04-05 04:52 ┣["KAWAI,Takanori" &lt;GC]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5315.html">   5315 2002-04-05 11:49 ┗["SADB MIYATSU" &lt;mid@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5316.html">   5316 2002-04-05 12:24 　┗[Tybalt of Capulet &lt;i]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5325.html">   5325 2002-04-06 08:19 　　┗["KAWAI,Takanori" &lt;GC]                                   </a></span>
</pre>


</body></html>