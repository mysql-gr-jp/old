<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:3252</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="3251.html">[前]</a><a href="3253.html">[次]</a><a href="../list/3201-3300.html">[番号順一覧]</a><a href="../thread/3201-3300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:3252
</p>
<div class="header">
<p>
From: &quot;TOYOSHIMA,Masayuki&quot; &lt;&quot;TOYOSHIMA,Masayuki&quot; &lt;mtoyo@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 14 Feb 2001 11:06:08 +0900<br>
Subject: [mysql 03252] Re: 日本語正規表現 UDF<br>

</p>
</div>
<div class="body">
<pre>
豊島(東京外国語大学アジア・アフリカ言語文化研究所)です。

<span class="quote2">&gt; &gt; で、UDF(ユーザ定義関数)ならなんとかなるかな？ ということで、Ruby の</span>
<span class="quote2">&gt; &gt; 正規表現処理部分をそっくりそのまま流用して UDF を作ってみました。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ものすごく遅れて仕舞いましたが、ようやく上記をテストして見ました。</span>
<span class="quote1">&gt; Solaris(sparc) 2.5.1 で *.so がうまく読めずに難渋しましたが、マニュアル </span>
<span class="quote1">&gt; 4.12.1 (Solaris notes) に色々書いてあるのに気付き、なんとか動かしました。</span>

一寸複雑な query で、いきなり  Lost connection to server during query に
なってしまう現象が出て、色々試しています。
複雑といっても where 句が
   where ( ... and ... and ... and ... and... and ... and jregexp() ) 
といった程度です。

  1. jregexp() を rlike に替えると、問題無く動きます。
  2. ... and ... 部分を削除して、jregexp() だけでも、問題なく動きます。
  3. where (... and ... and jregexp()) 位に簡単にしても、動きます。
  4. つまり、where 条件が或る程度以上(閾値不明)複雑になるとダメ?
     或は、それぞれの条件が成立するレコード数(閾値不明)によるか、この辺
     り実験中。
  
マニュアル 20.4.1 の max_allowed_packet を増やす等の手も試みましたが、変
わらず。(jregexp() を rlike にすると動く点からしても、この問題ではないよ
うな気がしますが)。

どういう理由で connection lost になるのか調べたいのですが、どこかにログ/
メッセージが出ているのでしょうか。

-------------

subquery は現状の MySQL にはないので、temp table を作る手で work-around 
出来るかも、とかも考えますが、未了。


豊島正之(とよしま まさゆき) mtoyo@xxxxxxxxxx
<a href="http://jcs.aa.tufs.ac.jp/mtoyo/">http://jcs.aa.tufs.ac.jp/mtoyo/</a>
東京外国語大学アジア・アフリカ言語文化研究所
〒114-8580 東京都北区西ケ原4丁目 FAX 03-5974-3838(乞豊島宛明記)


</pre>
</div>
<p class="button"><a href="3251.html">[前]</a><a href="3253.html">[次]</a><a href="../list/3201-3300.html">[番号順一覧]</a><a href="../thread/3201-3300.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="3218.html">   3218 2001-02-09 02:23 [&quot;TOYOSHIMA,Masayuki&quot;] Re: 日本語正規表現 UDF                  </a></span>
<span class="current">-&gt;&nbsp;<a href="3252.html">   3252 2001-02-14 11:06 ┗[&quot;TOYOSHIMA,Masayuki&quot;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3257.html">   3257 2001-02-15 11:02 　┣[Akihiko Shinohara &lt;s]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3265.html">   3265 2001-02-15 21:42 　┗[とみたまさひろ &lt;tomm]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3283.html">   3283 2001-02-17 21:10 　　┗[&quot;TOYOSHIMA,Masayuki&quot;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3284.html">   3284 2001-02-18 00:51 　　　┣[&quot;s.ara&quot; &lt;ml@xxxxxxxx] 無作為に行を抽出する方法        </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3285.html">   3285 2001-02-18 11:36 　　　┃┗[Takeharu Masuda &lt;tac]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3286.html">   3286 2001-02-18 19:05 　　　┃　┗[&quot;s.ara&quot; &lt;ml@xxxxxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="3287.html">   3287 2001-02-19 01:18 　　　┗[とみたまさひろ &lt;tomm]                                 </a></span>
</pre>
</body>
</html>
