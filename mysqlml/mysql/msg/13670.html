<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13670</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13669.html">[前]</a><a href="13671.html">[次]</a><a href="../list/13601-13700.html">[番号順一覧]</a><a href="../thread/13601-13700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13670
</p>
<div class="header">
<p>
From: Yasufumi Kinoshita &lt;Yasufumi Kinoshita &lt;kinoshita.yasufumi@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 15 Jan 2007 12:25:39 +0900<br>
Subject: [mysql 13670] Re: UTF8 4バイト文字<br>

</p>
</div>
<div class="body">
<pre>木下です。

このFeature requestでしょうか？
<a href="http://bugs.mysql.com/bug.php?id=14052">http://bugs.mysql.com/bug.php?id=14052</a>

一昨年から放置されてるようですね。。
MySQLでは現在内部ではUCS-2(１文字２バイト固定長)なので、
UTF-8では３バイト文字までの範囲しか（文字として）扱えないのですね。

このページのSuggested fixのように、内部表現を
サロゲートペアをサポートするようにするUCS-2( = UTF16)に
拡張すれば辻褄が合うと思うのですが、そうすると固定長だった文字の内部表現が
１文字が２バイトか４バイトの可変長となってしまうわけで、面倒そうです。。
相当アピールしないと必要性を理解してもらえないかもしれませんね。

#さて、困りましたね…
#少し他力本願^^;

#UTF-8の4バイト以上文字が特定の文字（「?」とか）に置き換えられて
#しまうような応急処置なら変更箇所が少なそうなのですぐできそうですが、、
#それでは意味ないですよね？

<span class="quote1">&gt; とみたです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; Windows Vista で JIS第三/四水準がサポートされると、UTF8 の 4バイト文字</span>
<span class="quote1">&gt; が使用される可能性があるのですが、現状の MySQL では UTF8 は 3バイト文</span>
<span class="quote1">&gt; 字までしかサポートしていないようです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; MySQL に 4バイト文字を含む UTF8 文字列を INSERT/UPDATE しようとすると、</span>
<span class="quote1">&gt; 例によってその文字以降がすべて消えてしまいます。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; MySQL の UTF8 4バイト文字のサポート予定とかないんでしょうか…。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; # やはり、ASCII とか BINARY を使用して、MySQL には文字コードに関する余</span>
<span class="quote1">&gt; # 計な処理をさせないようにするのが良いのかなぁ…。</span>
<span class="quote1">&gt; </span>



</pre>
</div>
<p class="button"><a href="13669.html">[前]</a><a href="13671.html">[次]</a><a href="../list/13601-13700.html">[番号順一覧]</a><a href="../thread/13601-13700.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="13666.html">  13666 2007-01-12 22:32 [とみたまさひろ &lt;tomm] UTF8 4バイト文字                        </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13667.html">  13667 2007-01-13 01:48 ┣[SOUMA Yutaka &lt;holon@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13678.html">  13678 2007-01-15 18:16 ┃┗[MORIYAMA Masayuki &lt;m]                                     </a></span>
<span class="current">-&gt;&nbsp;<a href="13670.html">  13670 2007-01-15 12:25 ┗[Yasufumi Kinoshita &lt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13671.html">  13671 2007-01-15 13:42 　┣[&lt;ymatsunobu@xxxxxxxx] Re: UTF8 4$B%P%$%HJ8;z(B          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13679.html">  13679 2007-01-19 00:58 　┃┗[とみたまさひろ &lt;tomm] Re: UTF8 4バイト文字              </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13692.html">  13692 2007-01-25 11:27 　┗["OGAWA Motoyuki (小�]                                     </a></span>
</pre>


</body></html>