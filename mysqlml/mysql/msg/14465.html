<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14465</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14464.html">[前]</a><a href="14466.html">[次]</a><a href="../list/14401-14500.html">[番号順一覧]</a><a href="../thread/14401-14500.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14465
</p>
<div class="header">
<p>
From: Mikiya Okuno &lt;Mikiya Okuno &lt;okuno@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 24 Apr 2008 15:30:29 +0900<br>
Subject: [mysql 14465] Re: myisamchk<br>

</p>
</div>
<div class="body">
<pre>
こんにちは。

残念ですが、コマンドが間違っているようです。

myisamchk は MyISAM テーブルのリペアを行うコマンドであり、
最適化をするには mysqlcheck コマンドを -o オプションで使用するか
OPTIMIZE TABLE ステートメントを使用する必要があります。

また、myisamchk は mysqld オフライン時に使用しなければならないコマンドであり、
もしオンライン時に使用されたのならデータの整合性が取れなくなってしまいます。
残念ですがデータはもう戻らない公算が高いので、バックアップから戻しましょう。

MyISAM は別途レコード件数をメモリ上に保持しているので、
count(*) が結果を返したのだと思います。
--
Mikiya Okuno, Support Engineer
MySQL KK, <a href="http://www-jp.mysql.com/">http://www-jp.mysql.com/</a>
Office: Ebisu IS Building, 6th floor,
        13-6 Ebisu 1-chome,
        Shibuya-ku, Tokyo 150-0013
Tel: 81-(0)3-5918-7523
Fax: 81-(0)3-5918-7510

Are you MySQL certified?  <a href="http://www.mysql.com/certification">http://www.mysql.com/certification</a>

On 2008/04/24, at 14:49, Alex wrote:
<span class="quote1">&gt; ALEXです。</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt;&gt; myisamchk -r テーブル名</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; として725万件のテーブルを最適化しようとしました。</span>
<span class="quote1">&gt; 処理自身はエラーなく完了したのですが、中身を参照することができなくなりま</span>
<span class="quote1">&gt; した。</span>
<span class="quote1">&gt; mysqlクライアントにて、select文を発行してもemptyとなってしまいます。</span>
<span class="quote1">&gt; データが存在しないのかと思って、件数を確認(select count(*) from テーブル</span>
<span class="quote1">&gt; 名)しましたが存在しているようです。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 原因と修復方法をご存知の方はご教授頂きたく、よろしくお願い致します。</span>
<span class="quote1">&gt;</span>


</pre>
</div>
<p class="button"><a href="14464.html">[前]</a><a href="14466.html">[次]</a><a href="../list/14401-14500.html">[番号順一覧]</a><a href="../thread/14401-14500.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="14464.html">  14464 2008-04-24 14:49 [Alex &lt;alex.backspin@] myisamchk                               </a></span>
<span class="current">-&gt;&nbsp;<a href="14465.html">  14465 2008-04-24 15:30 ┗[Mikiya Okuno &lt;okuno@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14468.html">  14468 2008-04-24 17:49 　┗[Alex &lt;alex.backspin@]                                     </a></span>
</pre>
</body>
</html>
