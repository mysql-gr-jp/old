<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:10818</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="10817">[前]</a><a href="10819">[次]</a><a href="../list/10801-10900">[番号順一覧]</a><a href="../thread/10801-10900">[スレッド一覧]</a></p>
<p class="id">
mysql:10818
</p>
<div class="header">
<p>
From: 弥永悦子 &lt;弥永悦子 &lt;minaga@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 20 Jan 2005 15:35:43 +0900<br>
Subject: [mysql 10818] 日本語での蓄積ができません<br>

</p>
</div>
<div class="body">
<pre>
こんにちは、ヤナガです。
またお世話になりにきてしまいました。。。

お陰様でMySQLを少しずつ動かせるようになってきました。
Perlと一緒に動かしたりもしてます。
しかし、日本語のトラブルがどうしても解決できないので、
教えてください！

Redhat Linux9
MySQL：4.1.7
Perl：5.8.0

「徹底入門」にあるスクリプトをそのまま真似して打ってみました。

INSERT INTO guest (id,name,mail) VALUES (1,'うしし','minaga@xxxxxxxxxx');

これをコマンドラインでSELECTで見ると化けないのですが、

$num_rows = $sth-&gt;rows;
print qq(&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=EUC-JP&quot;&gt;\n);
for ($i=0; $i&lt;$num_rows; $i++) {
	@a = $sth-&gt;fetchrow_array;
	print qq(id=$a[0] 名前は$a[1] メールアドレスは$a[2]&lt;br&gt;\n);
}

このようなプログラムでブラウザに表示させると

id=1, 名前は??? メールアドレスはminaga@xxxxxxxxxx

と化けます。

また、
<a href="http://www.atmarkit.co.jp/flinux/rensai/mysql04/mysql04c.html">http://www.atmarkit.co.jp/flinux/rensai/mysql04/mysql04c.html</a>
ここのリスト4を参考にして、データの取得、テーブルへの入力に、
メール送信のルーチンを加えたものを作ってみました。
それを操作してサーバ内でselectで見ると

<span class="quote1">|   1 | 陟霓霓            | minaga@xxxxxxxxxx |</span>

となりますが、メール送信してメーラで見ると全く化けていません。

HTMLもプログラムも全てEUCで書いています。
ちなみに、HTMLフォームからデータを取得する際は、CGI.pmを利用しました。

MySQLをコンパイルするときにはもちろん
--with-extra-charasets=all
--with-charset=ujis
のオプションも付けました。

いろいろ調べたのですが、この文字コードやコンパイルのオプション以外の
ことがヒットしません。
どなたか解決方法を教えてください。宜しくお願いします！


----
弥永悦子
株式会社キッズ
105-0014 東京都港区芝1-5-10 ICビル4F
tel:03-5765-2760 / fax:03-5765-2765

</pre>
</div>
<p class="button"><a href="10817">[前]</a><a href="10819">[次]</a><a href="../list/10801-10900">[番号順一覧]</a><a href="../thread/10801-10900">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="10818">  10818 2005-01-20 15:35 [弥永悦子 &lt;minaga@xxx] 日本語での蓄積ができません              </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10824">  10824 2005-01-22 19:14 ┣[&quot;Yuichi Otake&quot; &lt;you@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10827">  10827 2005-01-24 12:01 ┃┗[弥永悦子 &lt;minaga@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10825">  10825 2005-01-22 22:33 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10828">  10828 2005-01-24 12:09 ┃┗[弥永悦子 &lt;minaga@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10830">  10830 2005-01-24 14:48 ┃　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10832">  10832 2005-01-24 17:39 ┃　　┗[弥永悦子 &lt;minaga@xxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10833">  10833 2005-01-24 17:48 ┃　　　┗[弥永悦子 &lt;minaga@xxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10834">  10834 2005-01-24 19:04 ┃　　　　┗[弥永悦子 &lt;minaga@xxx] できました！(Re:  Re:  日本語での蓄積ができません)</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10829">  10829 2005-01-24 14:40 ┗[KZ &lt;d-parts@xxxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10831">  10831 2005-01-24 15:15 　┗[弥永悦子 &lt;minaga@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10839">  10839 2005-01-28 08:31 　　┗[&lt;milk_coffee_2004jp@]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="10842">  10842 2005-01-28 13:08 　　　┗[弥永悦子 &lt;minaga@xxx]                                 </a></span>
</pre>
</body>
</html>
