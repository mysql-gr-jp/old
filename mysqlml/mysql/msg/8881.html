<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8881</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="8880.html">[前]</a><a href="8882.html">[次]</a><a href="../list/8801-8900.html">[番号順一覧]</a><a href="../thread/8801-8900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8881
</p>
<div class="header">
<p>
From: "TAKT Co.,ltd." &lt;"TAKT Co.,ltd." &lt;t@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 2 Mar 2004 15:44:32 +0900<br>
Subject: [mysql 08881] select の where 指定で件数が正しくない<br>

</p>
</div>
<div class="body">
<pre>清川といいます。はじめまして。

今日はmysqlのselect,whereのトラブルについてお聞きしたくメールさせていただきました。

sql文自体には問題がないと思っているのですが・・・
前半部分はシステムが決めて、後半部分はユーザーが決めるというシステムの都合上、
範囲の限定が無駄になっている部分があります。

mysql&gt; select count(*) from bukken where (((ensen=2197 &amp;&amp; eki BETWEEN 10 AND 110
) || (ensen=2176 &amp;&amp; eki BETWEEN 200 AND 215) || (ensen=2269 &amp;&amp; eki BETWEEN 40 AN
D 100) || (ensen=2256 &amp;&amp; eki BETWEEN 111 AND 230)) &amp;&amp; ((ensen=2269 &amp;&amp; eki=70) ||
 (ensen=2269 &amp;&amp; eki=80) || (ensen=2269 &amp;&amp; eki=90)));
+-----------+
<span class="quote1">| count(*)  |</span>
+-----------+
<span class="quote1">|       272 |</span>
+-----------+
1 row in set (0.01 sec)

で、

mysql&gt; select count(*) from bukken where (((ensen=2197 &amp;&amp; eki BETWEEN 10 AND 110
) || (ensen=2176 &amp;&amp; eki BETWEEN 200 AND 215) || (ensen=2269 &amp;&amp; eki BETWEEN 40 AN
D 100) || (ensen=2256 &amp;&amp; eki BETWEEN 110 AND 230)) &amp;&amp; ((ensen=2269 &amp;&amp; eki=70) ||
 (ensen=2269 &amp;&amp; eki=80) || (ensen=2269 &amp;&amp; eki=90)));
+-----------+
<span class="quote1">| count(*)  |</span>
+-----------+
<span class="quote1">|         0 |</span>
+-----------+
1 row in set (0.00 sec)

になります。本来は、272件の表示をするはずの下のsqlが、0件になってしまいます。
違いは3行目、BETWEEN 110と111の違いだけです。
下のsqlも範囲の指定を一つ削れば、正しいcount272件を表示します。

環境は、redhat 8,mysql  Ver 13.5 Distrib 4.1.0-alpha, for pc-linux (i686)です。

sql文の変更以外で正しい結果を表示させたく思っています。
どなたか、ご教授いただければと思います。
よろしくお願いします。

</pre>
</div>
<p class="button"><a href="8880.html">[前]</a><a href="8882.html">[次]</a><a href="../list/8801-8900.html">[番号順一覧]</a><a href="../thread/8801-8900.html">[スレッド一覧]</a></p>
<pre class="list"><span class="current">-&gt;&nbsp;<a href="8881.html">   8881 2004-03-02 15:44 ["TAKT Co.,ltd." &lt;t@x] select の where 指定で件数が正しくない  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8891.html">   8891 2004-03-03 09:03 ┣[KAWAJI Shinya &lt;kawaj]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8893.html">   8893 2004-03-03 09:17 ┃┗[nagai &lt;w96176sn@xxxx] timeout について                    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8892.html">   8892 2004-03-03 09:08 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8901.html">   8901 2004-03-03 21:48 ┃┗["TAKT Co.,ltd." &lt;t@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8910.html">   8910 2004-03-06 11:21 ┣["片寄白王" &lt;katayose]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8934.html">   8934 2004-03-09 09:21 ┃┗["TAKT Co.,ltd." &lt;t@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8978.html">   8978 2004-03-14 19:59 ┗["TAKT Co.,ltd." &lt;t@x]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8979.html">   8979 2004-03-14 22:30 　┣[とみたまさひろ &lt;tomm]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8984.html">   8984 2004-03-15 09:34 　┗[ML account &lt;ml@xxxxx]                                     </a></span>
</pre>


</body></html>