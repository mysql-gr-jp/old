<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13061</title>
<link rel="stylesheet" type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13060.html">[前]</a><a href="13062.html">[次]</a><a href="../list/13001-13100.html">[番号順一覧]</a><a href="../thread/13001-13100.html">[スレッド一覧]</a></p>
<p class="id">
mysql:13061
</p>
<div class="header">
<p>
From: 関　俊夫 &lt;関　俊夫 &lt;to-seki@xxxxxxxxxx&gt;&gt;<br>
Date: Sun, 4 Jun 2006 10:30:01 +0900<br>
Subject: [mysql 13061] Re: 同一テーブルから階層別に分けるＳＱＬ文をつくりたい<br>

</p>
</div>
<div class="body">
<pre>自己解決しました。
F・Yさんありがとうございました。
実現したSQL文を下に載せておきます。
なお４階層目の"id"を取得するではなく、最下階層の"id"を取得するでした。

SELECT a1, a2, a3, a4, a5
FROM (
SELECT name AS a1, NULL AS a2, NULL AS a3, NULL AS a4, id AS a5
FROM sections
WHERE upper_section_id =0
UNION SELECT t1_0.name AS a1, t1_1.name AS a2, NULL AS a3, NULL AS a4, t1_1.
id AS a5
FROM sections AS t1_0, sections AS t1_1, sections AS t1_2, sections AS t1_3
WHERE t1_0.upper_section_id =0
AND t1_1.upper_section_id = t1_0.id
UNION SELECT t1_0.name AS a1, t1_1.name AS a2, t1_2.name AS a3, NULL AS a4,
t1_2.id AS a5
FROM sections AS t1_0, sections AS t1_1, sections AS t1_2, sections AS t1_3
WHERE t1_0.upper_section_id =0
AND t1_1.upper_section_id = t1_0.id
AND t1_2.upper_section_id = t1_1.id
UNION SELECT t1_0.name AS a1, t1_1.name AS a2, t1_2.name AS a3, t1_3.name AS
a4, t1_3.id AS a5
FROM sections AS t1_0, sections AS t1_1, sections AS t1_2, sections AS t1_3
WHERE t1_0.upper_section_id =0
AND t1_1.upper_section_id = t1_0.id
AND t1_2.upper_section_id = t1_1.id
AND t1_3.upper_section_id = t1_2.id
) AS t0
ORDER BY a1, a2, a3, a4

------------------------
関　俊夫
ダンサーズオンライン
<a href="http://www.dancers-online.com/">http://www.dancers-online.com/</a>



</pre>
</div>
<p class="button"><a href="13060.html">[前]</a><a href="13062.html">[次]</a><a href="../list/13001-13100.html">[番号順一覧]</a><a href="../thread/13001-13100.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="12277.html">  12277 2005-10-25 09:10 ["fujita" &lt;t-fujita@x] MySQL5.0でシンボリックが有効にならない  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12278.html">  12278 2005-10-26 08:14 ┣[Tetsuro IKEDA &lt;tetsu]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12279.html">  12279 2005-10-26 09:49 ┃┗["fujita" &lt;t-fujita@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12280.html">  12280 2005-10-26 09:57 ┃　┗[Tetsuro IKEDA &lt;tetsu]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="12281.html">  12281 2005-10-26 10:30 ┃　　┗["fujita" &lt;t-fujita@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13055.html">  13055 1938-05-16 13:05 ┗[関　俊夫 &lt;to-seki@xx] 同一テーブルから階層別に分けるＳＱＬ文をつくりたい</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13057.html">  13057 2006-06-03 21:06 　┣["F.Y" &lt;fumi_sby@xxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13059.html">  13059 2006-06-04 06:36 　┃┗[関　俊夫 &lt;to-seki@xx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13060.html">  13060 2006-06-04 08:15 　┃　┗[関　俊夫 &lt;to-seki@xx]                                 </a></span>
<span class="current">-&gt;&nbsp;<a href="13061.html">  13061 2006-06-04 10:30 　┃　　┗[関　俊夫 &lt;to-seki@xx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13058.html">  13058 2006-06-04 06:31 　┣[関　俊夫 &lt;to-seki@xx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13180.html">  13180 2006-07-23 03:25 　┗[demanotto &lt;demanotto]                                     </a></span>
</pre>


</body></html>