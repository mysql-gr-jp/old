<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9397</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="9396.html">[前]</a><a href="9398.html">[次]</a><a href="../list/9301-9400.html">[番号順一覧]</a><a href="../thread/9301-9400.html">[スレッド一覧]</a></p>
<p class="id">
mysql:9397
</p>
<div class="header">
<p>
From: SUGAWARA Hajime &lt;SUGAWARA Hajime &lt;sugawara@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 20 May 2004 11:56:07 +0900<br>
Subject: [mysql 09397] Re: 巨大テーブルの高速操作<br>

</p>
</div>
<div class="body">
<pre>
　菅原です。
　さらに補足。

SUGAWARA Hajime &lt;sugawara@xxxxxxxxxx&gt;さん：
<span class="quote1">&gt;     1. DELETEしない。あるいは削除後のホールをなくす。</span>

のやり方ですが、

&lt;<a href="http://dev.mysql.com/doc/mysql/ja/DELETE.html">http://dev.mysql.com/doc/mysql/ja/DELETE.html</a>&gt;
<span class="quote1">&gt; MyISAM テーブルの場合、削除されたレコードはリンクされたリストに維持さ</span>
<span class="quote1">&gt; れ、元のレコード位置が後続の INSERT 操作で再利用されます。使用されてい</span>
<span class="quote1">&gt; ないスペースを取り戻してファイルのサイズを削減するには、OPTIMIZE TABLE </span>
<span class="quote1">&gt; ステートメントまたは myisamchk ユーティリティを使用してテーブルを再編</span>
<span class="quote1">&gt; 成します。 この場合、OPTIMIZE TABLE の方が簡単ですが、myisamchk の方が</span>
<span class="quote1">&gt; 処理が迅速です。section 4.6.1 OPTIMIZE TABLE 構文 および section 4.5.6.</span>
<span class="quote1">&gt; 10 テーブルの最適化 を参照してください。</span>

――とのことなので、DELETEしたあとにOPTIMIZE TABLEすればSELECTとINSERTが
同時に動作するようになるでしょう。たぶん。

＃ただし、OPTIMIZE TABLE中はテーブルがロックされますけれど。
-- 
菅原はじめ＠うぃーくぽいんと
mailto:sugawara@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="9396.html">[前]</a><a href="9398.html">[次]</a><a href="../list/9301-9400.html">[番号順一覧]</a><a href="../thread/9301-9400.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="9387.html">   9387 2004-05-19 15:52 [&quot;久松大輔&quot; &lt;CQN04630] 巨大テーブルの高速操作                  </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9390.html">   9390 2004-05-19 22:45 ┗[SUGAWARA Hajime &lt;sug]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9392.html">   9392 2004-05-20 09:02 　┗[&quot;久松大輔&quot; &lt;CQN04630]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9395.html">   9395 2004-05-20 11:30 　　┣[SUGAWARA Hajime &lt;sug]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="9397.html">   9397 2004-05-20 11:56 　　┃┗[SUGAWARA Hajime &lt;sug]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9398.html">   9398 2004-05-20 12:48 　　┃　┗[&quot;久松大輔&quot; &lt;CQN04630]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9396.html">   9396 2004-05-20 11:46 　　┗[SUGAWARA Hajime &lt;sug]                                   </a></span>
</pre>
</body>
</html>
