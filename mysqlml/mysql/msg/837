<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:837</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="836">[前]</a><a href="838">[次]</a><a href="../list/801-900">[番号順一覧]</a><a href="../thread/801-900">[スレッド一覧]</a></p>
<p class="id">
mysql:837
</p>
<div class="header">
<p>
From: Sakae Kobayashi &lt;Sakae Kobayashi &lt;sakae@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 24 Apr 1999 14:06:05 GMT<br>
Subject: [mysql 00837] Re: How to use blob ?<br>

</p>
</div>
<div class="body">
<pre>
  小林栄です。

<span class="quote2">&gt; &gt; $sql_cmd = qq#INSERT INTO pocket (id, setumei, nandemo) VALUES</span>
<span class="quote2">&gt; &gt;    (&quot;$id&quot;, &quot;$setumei&quot;, &quot;$nandemo&quot;);#</span>
<span class="quote2">&gt; &gt;              </span>
<span class="quote2">&gt; &gt; こんな感じで良いのでしょうか？</span>

これでやると、しっかりエラーになりました。文字列の扱いに問題
ありと思いMySQLの文字列の扱いを調べてみたら、ご指摘の事項がしっかり
記載されてました。

  マニュアルを見てから作業にかかるか
  問題が出たらマニュアルを調べるか

どうも、私は後者の傾向が強いようです。これじゃイカンですね。

<span class="quote1">&gt; $qnandemo = $dbh-&gt;quote($nandemo);</span>

perlのquoteを使えと説明してあったので、 perldoc perlfunc して
quotemeta っていうのを探しあてたのですが、DBIにこんな便利な
ものが用意されているとは知りませんでした。

<span class="quote1">&gt; また、$dbh-&gt;quote()を使用しない場合は、</span>
<span class="quote1">&gt;   $qsetumei = $setumei;</span>
<span class="quote1">&gt;   $qsetumei =~ s/\\/\\\\/g; #\を\\に置換</span>
<span class="quote1">&gt;   $qsetumei =~ s/\0/\\0/g;  #NULL文字を \0 に置換</span>
<span class="quote1">&gt;   $qsetumei =~ s/\'/\\\'/g; #'を \'に置換</span>
<span class="quote1">&gt;   $qsetumei =~ s/\&quot;/\\\&quot;/g; #&quot;を \&quot;に置換  (これは不要？？)</span>
<span class="quote1">&gt;   $qsetumei = &quot;'$qsetumei'&quot;;#両端に'を付加</span>

MySQLの説明に忠実なやりかたですね。
PHPでは、便利な $dbh-&gt;quote()がなさそうなので、忠実なやり方を
しないとだめそうです。

-- 
 Mail: sakae@xxxxxxxxxx
 URL:  <a href="http://www.kumagaya.or.jp/~sakae/">http://www.kumagaya.or.jp/~sakae/</a>

</pre>
</div>
<p class="button"><a href="836">[前]</a><a href="838">[次]</a><a href="../list/801-900">[番号順一覧]</a><a href="../thread/801-900">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="821">    821 1999-04-22 05:18 [Sakae Kobayashi &lt;sak] How to use blob ?                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="827">    827 1999-04-22 11:36 ┗[IMAI Kenichi &lt;kimai@]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="831">    831 1999-04-23 07:54 　┗[Sakae Kobayashi &lt;sak]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="835">    835 1999-04-23 10:23 　　┣[&quot;osamura&quot; &lt;o@xxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="836">    836 1999-04-23 10:55 　　┗[&quot;MINOHATA Norio&quot; &lt;mi]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="837">    837 1999-04-24 23:06 　　　┗[Sakae Kobayashi &lt;sak]                                 </a></span>
</pre>
</body>
</html>
