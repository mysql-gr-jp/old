<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4865</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="4864.html">[前]</a><a href="4866.html">[次]</a><a href="../list/4801-4900.html">[番号順一覧]</a><a href="../thread/4801-4900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4865
</p>
<div class="header">
<p>
From: とみたまさひろ &lt;とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 4 Jan 2002 10:46:48 +0900<br>
Subject: [mysql 04865] Re: <br>

</p>
</div>
<div class="body">
<pre>
とみたです。

On Thu, 27 Dec 2001 21:31:47 +0900 (JST)
donald@xxxxxxxxxx wrote:

<span class="quote1">&gt; 週に1回はフルバックアップを取り、日々の更新は、</span>
<span class="quote1">&gt; --log-update オプションを用いて差分ログを取ろうと思っています。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ここで、問題が生じました。</span>
<span class="quote1">&gt; load_file()を用いて、ファイルの中身をDBにINSERTしているのですが、</span>
<span class="quote1">&gt; 差分ログにはSQL文</span>
<span class="quote1">&gt;   insert into table_name(column_name) </span>
<span class="quote1">&gt;       values(load_data('/path/filename'));</span>
<span class="quote1">&gt; が出力されるだけで、ファイルの中身までは残りません。</span>
<span class="quote1">&gt; INSERT 後に、使用したファイルは削除するようにしてたものですから、</span>
<span class="quote1">&gt; 差分ログからDBを復元させる際は、このINSERT文でエラーに</span>
<span class="quote1">&gt; なってしまうことに気づきました。</span>

<span class="quote1">&gt; このエラーを回避するには、やはり、/path/filename を削除せずに</span>
<span class="quote1">&gt; 残しておく方法しかないでしょうか。</span>

多分それしかないと思います。

<span class="quote1">&gt; このようなケースの場合、みなさんならどうしますか？</span>
<span class="quote1">&gt; より良い方法がありましたら、ご教授ください。</span>

log-update はなんとなく恐いので、私だったら次のようにすると思います。

・総データ量があまり多くない場合は、毎日フルバックアップを取る。
  mysqldump とか BACKUP TABLE 文とかで。

・timestamp フィールドをつけておいて、前回バックアップ時以降に更新された
  レコードだけを取り出すような条件をつけて、mysqldump を実行する。

--
とみたまさひろ &lt;tommy@xxxxxxxxxx&gt;
日本MySQLユーザ会 <a href="../../../index.html">http://www.mysql.gr.jp</a>

</pre>
</div>
<p class="button"><a href="4864.html">[前]</a><a href="4866.html">[次]</a><a href="../list/4801-4900.html">[番号順一覧]</a><a href="../thread/4801-4900.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="4851.html">   4851 2001-12-27 21:31 [&lt;donald@xxxxxxxxxx&gt; ]                                         </a></span>
<span class="current">-&gt;&nbsp;<a href="4865.html">   4865 2002-01-04 10:46 ┗[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4871.html">   4871 2002-01-07 14:05 　┗[&lt;donald@xxxxxxxxxx&gt; ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4872.html">   4872 2002-01-07 15:57 　　┣[田倉 &lt;g_sec@xxxxxxxx] MySQL-3.23.45 + MyODBC について   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4978.html">   4978 2002-01-18 17:58 　　┃┗[ken &lt;kenn@xxxxxxxxxx] mm.mysql.Driver での 2000 年問題？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4979.html">   4979 2002-01-18 22:01 　　┃　┣[&quot;TAKAHASHI, Tomohiro]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4980.html">   4980 2002-01-18 22:09 　　┃　┗[&quot;TAKAHASHI, Tomohiro]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4874.html">   4874 2002-01-08 03:07 　　┣[&quot;Takuji Hidaka&quot; &lt;tak]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4893.html">   4893 2002-01-10 01:45 　　┃┗[とみたまさひろ &lt;tomm] 排他制御                        </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4894.html">   4894 2002-01-10 04:31 　　┃　┗[&quot;Takuji Hidaka&quot; &lt;tak]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4891.html">   4891 2002-01-10 00:59 　　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4895.html">   4895 2002-01-10 17:36 　　　┗[&lt;donald@xxxxxxxxxx&gt; ]                                 </a></span>
</pre>
</body>
</html>
