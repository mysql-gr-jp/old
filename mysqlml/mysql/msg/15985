<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15985</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15984">[前]</a><a href="15986">[次]</a><a href="../list/15901-16000">[番号順一覧]</a><a href="../thread/15901-16000">[スレッド一覧]</a></p>
<p class="id">
mysql:15985
</p>
<div class="header">
<p>
From: 松野弘法 &lt;松野弘法 &lt;hiro_matsuno3@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 28 Jun 2013 10:51:23 +0900<br>
Subject: [mysql 15985] Re: ネットワーク越しでのmysqlの更新がうまくできない？<br>

</p>
</div>
<div class="body">
<pre>
松野です。

まさかのlocation.hrefですか。
これだと直接PHPに飛んでしまいます。
何も表示されないしPHPのコードのみ実行されるだけになってしまいます。
WebのHTML本体側にデータを取ってくるjavascriptが必要になってくると思われ
ます。
やり方としてはデータを取ってくるajaxあればいいと思いますね。

私は自動入力処理で良くphpへjQuery $.ajax経由でデータを取ってくる処理を書
いています。
ajaxは必ず戻り値がないとエラーが表示されますので気をつけてください。

html・js・phpはサーバ側に置きます。

js側に処理をするためのjQueryのajaxだけ書かせて頂きます。

$.ajax({
url:ここに接続するためのURLをかきます。httpから始まるURLも記入可能です,
type:'get'か'post'をかきます（処理です）,
cache: false（データをキャッシュするかしないかの設定です）,
dataType:'text'・'json'・'xml'・'html'（取ってくるデータタイプをかきます）,
data:{'key':'value'},(データを送り込むときに記述します)
success:function(取得後のデータ){
//この下には正常取得できた時の処理をかきます（今書いてあるのはあくまでも
例です）。
$('入れたい場所のHTMLのIDかclassを言れます').val(書き込みたいデータを入
れます);
},
error:function(){
//通信エラー次の処理をかきます（今書いてあるのはあくまでも例です）。
alert('通信エラーが発生しました / Connection Error occurred. (E005)');
}
}); // end of ajax method

とプログラミングしています。

phpからデータの習得が可能になります。
phpは普通にMySQLに実行するSQLを記入しデータ取得を行なってください。
データの格納はjsonで取得した方がいいと思います。
phpでjsonに吐き出すときはecho json_encode()を使います。

試してみてはいかがでしょうか。


(2013/06/27 22:54), 舘山 聖司 wrote:
<span class="quote1">&gt; たてやんっす</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 失礼 パターン２　ポート　mysqlと書いてしまったので</span>
<span class="quote1">&gt; 　　　　　　　　　ポートは httpです</span>
<span class="quote1">&gt; 修正分</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; パターン２</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 　自宅　　　IEを使っているということでWindowsでしょう</span>
<span class="quote1">&gt; 　　　　　　Windwosで　Web / phpも同じマシンで動く</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 　　　　　　　　　　　↓　httpポートで会社のMySQLに接続</span>
<span class="quote1">&gt; 　会社　　MySQL　（これも　Windows か　Linuxか不明）</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; (2013/06/27 22:33), 舘山 聖司 wrote:</span>
<span class="quote2">&gt;&gt; たてやんっす</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; location.href=　でということは　PHP も　MySQLでもなくて　</span>
<span class="quote2">&gt;&gt; JavaScript のお話になりませんでしょうか？</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; このレスが日にちたっていますので解決してしまっていて、このレスは要らない</span>
<span class="quote2">&gt;&gt; ものかもしれませんけど、あちこちで聞くということはあちこちで？？？な状態</span>
<span class="quote2">&gt;&gt; な人が増殖してるということかと思います。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; PHPだと　header 関数で　header(&quot;Location:http://  /&quot;);　などと書いたりす</span>
<span class="quote2">&gt;&gt; るかもですが、これも　php の話では　なく　httpプロトコルレベルですね</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; どうも　ramさんの　環境が見えてこないです</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; IE と一言でいっても　バージョンによってことなったりします</span>
<span class="quote2">&gt;&gt; IE6 はさすがにないかもですが　IE6 とこれ以降では大きく様変わりしたり...</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; それで私が疑問に思った環境　以下のパターンのどちらでしょう</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; パターン１</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 　自宅　　　完全にクライアント　Windows</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;    　　　　　　　　　　↓　httpで会社のWebサーバに接続</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 　会社　　Webサーバ　（phpモジュール）　＋　MySQL</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; パターン２</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 　自宅　　　IEを使っているということでWindowsでしょう</span>
<span class="quote2">&gt;&gt; 　　　　　　Windwosで　Web / phpも同じマシンで動く</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 　　　　　　　　　　　↓　mysqlポートで会社のMySQLに接続</span>
<span class="quote2">&gt;&gt; 　会社　　MySQL　（これも　Windows か　Linuxか不明）</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; なにも記載されてないので　パターン１かと思いますが、PHPから</span>
<span class="quote2">&gt;&gt; MySQLへの接続で　IPアドレスを書いていますので　ひょっとすると</span>
<span class="quote2">&gt;&gt; MySQLサーバ と Webサーバが別ということも考えられます</span>
<span class="quote2">&gt;&gt; （Windowsサーバ上の MySQL Web としても　127.0.0.1 使ったりしますよね）</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; それで　本題に戻りますが　その　location.href= を削ったらどうなります</span>
<span class="quote2">&gt;&gt; か？　もしなんらかの進展あるとしたら、この辺はIEのJavaScriptの仕様関連と</span>
<span class="quote2">&gt;&gt; 思って探してみてください。FireFox / Chromeで動くのですからIEのみの問題</span>
<span class="quote2">&gt;&gt; なのは明確ですし、html で　location.href= の周辺部分のみを書いて　IEで動</span>
<span class="quote2">&gt;&gt; くかも確認してみてはいかがでしょう？</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 最近のIEだと　ファンクションキー F12　で開発者モードで　いろいろ探る方法</span>
<span class="quote2">&gt;&gt; もあったりしますし 、この開発者モードでは　IE7/8/9モードなどを模倣できそ</span>
<span class="quote2">&gt;&gt; うですが...詳しくは調べてません。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; そのスクリプト自体が何も画面表示されないので、なんともデバッグのしよ</span>
<span class="quote3">&gt;&gt;&gt; うが有りません。</span>
<span class="quote2">&gt;&gt; たとえばWireshark (<a href="http://www.wireshark.org/">http://www.wireshark.org/</a>)</span>
<span class="quote2">&gt;&gt; でパケットレベルの　デバックまでやってのけたりする方法もなにか発見できる</span>
<span class="quote2">&gt;&gt; かもしれませんね（そこまでやってという意味ではありません）</span>
<span class="quote2">&gt;&gt; よほどのことがなければ、どこかにデバック方法はあると思います。</span>
<span class="quote2">&gt;&gt; 基本にもどってそれぞれの　htmlまで分解してというのがみなさん言いたいこと</span>
<span class="quote2">&gt;&gt; のように思ったりします。デバックは面倒なものですから楽をしては結果を得ら</span>
<span class="quote2">&gt;&gt; れないことがあります。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; (2013/06/25 11:22), ram wrote:</span>
<span class="quote3">&gt;&gt;&gt; Ohgaki 様　コメント有難うございました。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; レスが遅れまして失礼いたしました。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; その後、別の会議室などで尋ねてみたり、ネットで調べているのですがまだ解決</span>
<span class="quote3">&gt;&gt;&gt; していません。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; 仰る通り、mysqlの原因でないことが判ってきました。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; 画面が真っ白になるphpスクリプトは、元のphpスクリプトから呼び出しているの</span>
<span class="quote3">&gt;&gt;&gt; ですが、</span>
<span class="quote3">&gt;&gt;&gt; そのスクリプト自体が何も画面表示されないので、なんともデバッグのしようが</span>
<span class="quote3">&gt;&gt;&gt; 有りません。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; その時にlocation.href=.....で呼び出しているのがうまくいってない？ような</span>
<span class="quote3">&gt;&gt;&gt; 気がします。</span>
<span class="quote3">&gt;&gt;&gt; mysqlの更新自体はうまくいっているので画面表示ができていないだけなのも不</span>
<span class="quote3">&gt;&gt;&gt; 思議ですが、</span>
<span class="quote3">&gt;&gt;&gt; phpとブラウザの仕様によるものみたいです。</span>
<span class="quote3">&gt;&gt;&gt; phpのフォーラムでこの現象として尋ねてみようと思います。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>


-- 
******************************************************
　　　松野 弘法　
　　　hiro_matsuno3@xxxxxxxxxx
******************************************************


</pre>
</div>
<p class="button"><a href="15984">[前]</a><a href="15986">[次]</a><a href="../list/15901-16000">[番号順一覧]</a><a href="../thread/15901-16000">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="15971">  15971 2013-06-14 13:13 [ram &lt;ram@xxxxxxxxxx&gt;] ネットワーク越しでのmysqlの更新がうまくできない？</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15972">  15972 2013-06-14 13:23 ┣[Isamu Moriyama &lt;mori]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15973">  15973 2013-06-14 14:45 ┃┗[ram &lt;ram@xxxxxxxxxx&gt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15975">  15975 2013-06-14 21:00 ┣[Watanabe Tomoyuki &lt;W]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15976">  15976 2013-06-17 16:11 ┃┗[ram &lt;ram@xxxxxxxxxx&gt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15977">  15977 2013-06-19 09:27 ┗[ram &lt;ram@xxxxxxxxxx&gt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15978">  15978 2013-06-19 22:40 　┣[とみたまさひろ &lt;tomm]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15979">  15979 2013-06-20 14:45 　┃┗[ram &lt;ram@xxxxxxxxxx&gt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15980">@ 15980 2013-06-20 14:47 　┗[Yasuo Ohgaki &lt;yohgak]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15981">@ 15981 2013-06-25 11:22 　　┗[ram &lt;ram@xxxxxxxxxx&gt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15982">@ 15982 2013-06-25 13:53 　　　┣[松野弘法 &lt;hiro_matsu]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15983">  15983 2013-06-27 22:33 　　　┗[舘山 聖司 &lt;tateyan@x]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15984">  15984 2013-06-27 22:54 　　　　┗[舘山 聖司 &lt;tateyan@x]                               </a></span>
<span class="current">-&gt;&nbsp;<a href="15985">  15985 2013-06-28 10:51 　　　　　┗[松野弘法 &lt;hiro_matsu]                             </a></span>
</pre>
</body>
</html>
