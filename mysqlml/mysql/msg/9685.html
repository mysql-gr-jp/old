<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9685</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css.html">
</head>
<body>
<p class="button"><a href="9684.html">[前]</a><a href="9686.html">[次]</a><a href="../list/9601-9700.html">[番号順一覧]</a><a href="../thread/9601-9700.html">[スレッド一覧]</a></p>
<p class="id">
mysql:9685
</p>
<div class="header">
<p>
From: tateyan &lt;tateyan &lt;tateyan@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 18 Jun 2004 01:32:50 +0900<br>
Subject: [mysql 09685] Re: 別サーバーへのデータ移行方法<br>

</p>
</div>
<div class="body">
<pre>
たてやんっす

私なら　というケースで

両方生かすというのはちょっと無理がありそうなんで

手順として
1) Aサーバの会員受付・変更は移行中のためできない旨を表示
2) Bサーバにデータをコピー
3) Bサーバで会員受付・変更が正常にできることを確認
4) DNSを変更
5) Aサーバにアクセスが無くなったことを確認してAサーバ停止

気をつけなければならないのは　Aサーバで受付・変更を時下にブックマーク
している人もいるのでこれへの対処を忘れないようにしないと変更できないは
ずと思っていたら　なぜか変更されていたなんてことになりますね


可能ならばAサーバのWebコンテンツをすべてBサーバのMySQLに向ければいいので
しょうけどこれは答えではないでしょう


私なら　Aサーバ上でBサーバで動くコンテンツ用ディレクトリを作っておいて
この中に　Bサーバで動くコンテンツを作り、apache等のWebサーバのコンフィグ
で移行期間になったら今までのディレクトリからBに変えるというのをしたりと
いう案もあるかなぁと思います

いずれにしても　変更するにはダウンタイム０は実現できない（あらかじめ想定
して設計されてれば別ですが）ので、この際はメンテナンスタイムとして割り切っ
た移行が安心できますけど...


クラスタリング技術を使って
<a href="http://www.mysql.com/products/cluster/">http://www.mysql.com/products/cluster/</a> ってのも使えるのかな？
この辺はまだ私は未知の領域

お金をかけてよいならEMICアプリケーションクラスタなんて使えそうな気もします
（ソフトエイジェンシー（<a href="http://www.softagency.co.jp/">http://www.softagency.co.jp/</a>）さんで販売してます）



題名「<a href="09682.html">[mysql 09682]</a> Re: 別サーバーへのデータ移行方法」のメールからの引用
です
<span class="quote1">&gt; 　こんにちは。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; konet218@xxxxxxxxxxさんの</span>
<span class="quote1">&gt; &lt;20040617234418.12BB.KONET218@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt; &quot;<a href="09681.html">[mysql 09681]</a> Re: 別サーバーへのデータ移行方法&quot;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt; 質問主の近藤です。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; レスがないと言う事は「こんな事普通はしない」と言う事でしょうか。</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; やはりコンテンツのみBサーバーに移してデータベースのみ</span>
<span class="quote2">&gt; &gt; 移行しないでAサーバーで運営するのが普通なのかな...</span>
<span class="quote2">&gt; &gt; </span>
<span class="quote2">&gt; &gt; 例えば何かの問題でレンタルサーバーを変更しないといけないと</span>
<span class="quote2">&gt; &gt; 言った場合、DNSの浸透時間もありますし、どのようにデータの合理性を</span>
<span class="quote2">&gt; &gt; 持たせながら別サーバーにデータを移行するのか疑問でした。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 　あらら。「レスがないと言う事は」云々は、言わない方が吉かもしれませんね。</span>
<span class="quote1">&gt; MLで質問に答える答えないは各人の自由ですから。コンサルにお金を払って、そ</span>
<span class="quote1">&gt; れで返事が無ければ、「レスがないと言う事は」云々どころか、「こっちは金払</span>
<span class="quote1">&gt; ってんだぞぉ、こらぁ！」と声高に罵ってもそれはOKですね。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 　データの移行は、ダンプ＋レプリケーションで行えば良いと思います。ただ、</span>
<span class="quote1">&gt; そう単純な問題なのでしょうか？AサーバとBサーバはインターネット上の別ホス</span>
<span class="quote1">&gt; トでしょうか？それともAサーバをBサーバに置き換える(Aサーバを停止して速攻</span>
<span class="quote1">&gt; で同一 IPアドレスを持つBサーバを稼働させる)のでしょうか？</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 　AサーバをBサーバに置き換えるならば移行計画は比較的単純で、単にダウンタ</span>
<span class="quote1">&gt; イムを最小限にするための準備を十分にする程度が移行計画の中身です。ですが、</span>
<span class="quote1">&gt; 両サーバが別IPを持つなどの場合は、DNSの伝播遅延の対策等、より複雑な計画</span>
<span class="quote1">&gt; を立てる必要があると思いますよ。</span>
 

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  彡彡从        たてやんっす
 d□/□-ｂ      &lt;tateyan@xxxxxxxxxx&gt;
 ヽ&quot;ー&quot;丿

Key fingerprint = 5D56 8EA3 B9FE A721 4866  FB4A 0041 672C 08DD C33A




</pre>
</div>
<p class="button"><a href="9684.html">[前]</a><a href="9686.html">[次]</a><a href="../list/9601-9700.html">[番号順一覧]</a><a href="../thread/9601-9700.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="9664.html">   9664 2004-06-17 00:15 [&lt;konet218@xxxxxxxxxx] 別サーバーへのデータ移行方法            </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9681.html">   9681 2004-06-18 00:13 ┗[&lt;konet218@xxxxxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9682.html">   9682 2004-06-18 00:36 　┗[ML account &lt;ml@xxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9683.html">   9683 2004-06-18 00:51 　　┣[&lt;konet218@xxxxxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9684.html">   9684 2004-06-18 01:27 　　┃┗[ML account &lt;ml@xxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9686.html">   9686 2004-06-18 02:20 　　┃　┗[&lt;konet218@xxxxxxxxxx]                               </a></span>
<span class="current">-&gt;&nbsp;<a href="9685.html">   9685 2004-06-18 01:32 　　┗[tateyan &lt;tateyan@xxx]                                   </a></span>
</pre>
</body>
</html>
