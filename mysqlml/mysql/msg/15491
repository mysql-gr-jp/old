<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15491</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15490">[前]</a><a href="15492">[次]</a><a href="../list/15401-15500">[番号順一覧]</a><a href="../thread/15401-15500">[スレッド一覧]</a></p>
<p class="id">
mysql:15491
</p>
<div class="header">
<p>
From: Mikiya Okuno &lt;Mikiya Okuno &lt;mikiya.okuno@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 26 Jan 2011 14:40:15 +0900<br>
Subject: [mysql 15491] Re: InnoDBがMyISAMに変わってしまう<br>

</p>
</div>
<div class="body">
<pre>
奥野です。こんにちは。

On 01/26/2011 02:10 PM, 杉江正 wrote:
<span class="quote1">&gt; まいパパさん</span>
<span class="quote1">&gt; お久しぶりです。大阪のmemcached勉強会にわざわざ東京から押しかけた杉江です。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; テーブルが途中でMyISAMに変わってしまう現象、以前私のMySQLサーバーでも発生しました。</span>
<span class="quote1">&gt; このときの原因はmy.cnfに設定しているinnodb_buffer_pool_sizeの値が実メモリー以上の値を指したためでした。（クラウド環境でサーバーのボリュームダウン実行時）</span>

このような場合、とみたさんがおっしゃるようにInnoDBが無効化され、
デフォルトであるMyISAMが使われます。Warningが出力されますので、
SHOW WARNINGSで確認してください。

Warningはなかなか気付き難いものですが、mysql開始時に--show-warningsコマンドを
つけると自動的にSHOW WARNINGコマンドを実行してくれるので便利ですよ。

ではでは。
--
奥野 幹也 
<a href="http://nippondanji.blogspot.com/">http://nippondanji.blogspot.com/</a> 
<a href="http://twitter.com/nippondanji">http://twitter.com/nippondanji</a>


<span class="quote1">&gt; </span>
<span class="quote1">&gt; バージョンはMySQL5.1＋InnoDB Plugin 1.0.9です。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 参考になりましたら、幸いです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 2011年1月26日13:53 Ryuichiro Munechika&lt;munetika@xxxxxxxxxx&gt;:</span>
<span class="quote2">&gt;&gt; まいパパです</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; とみたさん、さかいさんありがとうございます。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; さかいさんのレスに続けます。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; (2011/01/26 13:34), SAKAI Kei wrote:</span>
<span class="quote3">&gt;&gt;&gt; 坂井です。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;    普通に考えれば、勝手にストレージエンジンが変わってしまうことは</span>
<span class="quote3">&gt;&gt;&gt; ないと思いますので、宗近さんのメールにある「途中で」の部分で何を</span>
<span class="quote3">&gt;&gt;&gt; したのかを洗い出してみると良いのではないでしょうか。</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; ・本当に最初に InnoDBで作成されていたのか？</span>
<span class="quote3">&gt;&gt;&gt; ・稼働環境が複数あって（開発環境と本番環境とか）、他からダンプ</span>
<span class="quote3">&gt;&gt;&gt;    してきたものを入れたりしていないか</span>
<span class="quote3">&gt;&gt;&gt; ・裏で色々複雑なツールを動かしていて、そいつが変更していないか</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 最初はInnoDBで作成されていたのですが、２番目と３番目はアプリ開発を</span>
<span class="quote2">&gt;&gt; している方で心当たりがあるみたいです。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; この辺から追っかけてみます。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt;    ちなみに、ストレージエンジンの確認とかALTER TABLE 文の実行など</span>
<span class="quote3">&gt;&gt;&gt; は、mysqlクライアントコマンドからですか？</span>
<span class="quote3">&gt;&gt;&gt;</span>
<span class="quote3">&gt;&gt;&gt; ＃「変更ができない」時のエラーメッセージが何なのかも気になりますね</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; はい、mysqlクライアントからコマンド発行しています。</span>
<span class="quote2">&gt;&gt; とみたさんもmysqld.errを確認した方がよさそうですね。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; --</span>
<span class="quote2">&gt;&gt; 宗近龍一郎@gmail</span>
<span class="quote2">&gt;&gt; munetika@xxxxxxxxxx</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>

</pre>
</div>
<p class="button"><a href="15490">[前]</a><a href="15492">[次]</a><a href="../list/15401-15500">[番号順一覧]</a><a href="../thread/15401-15500">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="15486">  15486 2011-01-26 13:01 [Ryuichiro Munechika ] InnoDBがMyISAMに変わってしまう          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15487">  15487 2011-01-26 13:27 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15488">  15488 2011-01-26 13:34 ┗[SAKAI Kei &lt;sak2@xxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15489">  15489 2011-01-26 13:53 　┗[Ryuichiro Munechika ]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15490">  15490 2011-01-26 14:10 　　┗[杉江正 &lt;inagisugie@x]                                   </a></span>
<span class="current">-&gt;&nbsp;<a href="15491">  15491 2011-01-26 14:40 　　　┣[Mikiya Okuno &lt;mikiya]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15493">  15493 2011-01-26 14:54 　　　┃┗[Ryuichiro Munechika/]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15492">  15492 2011-01-26 14:52 　　　┗[Ryuichiro Munechika/]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15494">  15494 2011-01-26 15:47 　　　　┗[SAKAI Kei &lt;sak2@xxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15495">  15495 2011-01-26 15:59 　　　　　┗[Ryuichiro Munechika/]                             </a></span>
</pre>
</body>
</html>
