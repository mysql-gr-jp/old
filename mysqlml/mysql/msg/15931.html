<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:15931</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="15930.html">[前]</a><a href="15932.html">[次]</a><a href="../list/15901-16000.html">[番号順一覧]</a><a href="../thread/15901-16000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:15931
</p>
<div class="header">
<p>
From: &quot;ochiai&quot; &lt;&quot;ochiai&quot; &lt;s.ochiai@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 15 Feb 2013 16:35:50 +0900<br>
Subject: [mysql 15931] RE:[mysql 15929] Re: レプリケーション構築について（長文です）（質問）<br>

</p>
</div>
<div class="body">
<pre>
渡辺様

ありがとうございます。レスポンスがあるとほっとします。

  「MySQLデータベース構築バイブル」は素晴らしい書籍で私も（自宅に）持っています。

  今自宅にいないので確認できませんが、時期的にはおそらくMySQL5.0を前提に書かれているのではないかと推測します。

  （先取りしていたとしてもMySQL5.1まで）

自分が買った本が良書だということが分かって嬉しいです。MySQL5.0〜5.1のようです。


  &gt;my.iniファイルから削除しておいたほうがいいでしょうか？

  私の手元にある環境(MySQL5.5.29 Windows x64)では、master-host=をmy.iniに書いて起動させようとすると、

  エラーで起動できませんでした。

  unknown variable 'master-host=(略

  そちらで起動できている理由はわかりませんが、削除しておく方が良いと思います。

ありがとうございます。削除しておきます。
ただ、ちょっと気になるのが、MySQL起動時に正しいmy.iniを読み込んでいるのかということです。

Workbenchのadmin画面でのOption fileの「Cinfiguration File:」に表示されているは、
C:\ProgramData\MySQL\MySQL Server 5.5\data\my_20130208.ini　です。

設定をいろいろと変えて試すために、ファイル名を変更しています。
Workbenchでオプションを変更すると、このファイルが更新されているので、大丈夫だと思っていますが。


  &gt;Failed to open the relay log

  このキーワードで思い出したのですが、スレーブ側のmy.iniに relay-logの指定があるかを確認してください。

  指定がないとCHANGE MASTER TOしたときに

  “ERROR 1201 (HY000): Could not initialize master info structure; more error messages can be found in the MySQL error log”

  と出るのは確認できました。

  もしmy.iniに記述なければ、以下のように追記してください。

  relay-log = relay-log

  または

  relay-log = &quot;C:\ProgramData\MySQL\MySQL Server 5.5\data\relay-log&quot;

my_20130208.iniに下記のように記述されています。

## Relay log
relay-log = relay-log
relay-log-index = 
relay_log_info_file = relay-log.info

なお、
datadir=&quot;C:/ProgramData/MySQL/MySQL Server 5.5/Data/&quot;で
このフォルダーに以下のファイルがあります。
relay-log.000001〜35
relay-log.index
relay-log.info
hostname-relay-bin.000001
hostname-relay-bin.index

relay-log.indexを開くと、
relay-log.000001〜4までの4つのファイル名が書かれていました。

relay-log.infoの内容は下記のとおりでした。
.\hostname-relay-bin.000001
4
mysql-bin.000001
107

どうも辻褄が合っていないように感じますが、いかがでしょうか？



  &gt; tee コマンドで操作ログをファイルに書き出そうとしました。

  ごめんなさい、こちらは再現できなかったのでわかりませんでした。

アクセス権の設定がうまくいっていないのではないかと考えています。



</pre>
</div>
<div class="attach">
<h3 class="attachtitle">添付ファイル</h3>
<ul>
<li><a href="15931/0/index.html"> [text/html]</a>
</ul>
</div>
<p class="button"><a href="15930.html">[前]</a><a href="15932.html">[次]</a><a href="../list/15901-16000.html">[番号順一覧]</a><a href="../thread/15901-16000.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="15925.html">@ 15925 2013-02-13 16:39 [&quot;ochiai&quot; &lt;s.ochiai@x] レプリケーション構築について（長文です）（質問）</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15926.html">@ 15926 2013-02-14 09:14 ┗[Watanabe Tomoyuki &lt;W]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15928.html">@ 15928 2013-02-15 10:50 　┗[&quot;ochiai&quot; &lt;s.ochiai@x]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15929.html">@ 15929 2013-02-15 14:54 　　┗[Watanabe Tomoyuki &lt;W]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15930.html">  15930 2013-02-15 15:02 　　　┣[&quot;yoku ts.&quot; &lt;yoku0825]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15932.html">@ 15932 2013-02-15 16:48 　　　┃┗[&quot;ochiai&quot; &lt;s.ochiai@x]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15933.html">  15933 2013-02-15 18:47 　　　┃　┗[&quot;yoku ts.&quot; &lt;yoku0825]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15936.html">@ 15936 2013-02-20 11:31 　　　┃　　┗[&quot;ochiai&quot; &lt;s.ochiai@x]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15937.html">  15937 2013-02-20 15:24 　　　┃　　　┗[&quot;yoku ts.&quot; &lt;yoku0825]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15941.html">  15941 2013-02-27 12:28 　　　┃　　　　┗[Watanabe Tomoyuki &lt;W]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15942.html">  15942 2013-02-27 13:03 　　　┃　　　　　┗[&quot;yoku ts.&quot; &lt;yoku0825]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15952.html">  15952 2013-03-13 15:17 　　　┃　　　　　　┗[ochiai &lt;s.ochiai@xxx] Re: レプリケーション構築について（長文です）（質問）_解決まとめ</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15953.html">  15953 2013-03-13 15:38 　　　┃　　　　　　　┗[&quot;yoku ts.&quot; &lt;yoku0825]                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15954.html">  15954 2013-03-13 16:49 　　　┃　　　　　　　　┗[ochiai &lt;s.ochiai@xxx]               </a></span>
<span class="current">-&gt;&nbsp;<a href="15931.html">@ 15931 2013-02-15 16:35 　　　┗[&quot;ochiai&quot; &lt;s.ochiai@x] RE:[mysql 15929] Re: レプリケーション構築について（長文です）（質問）</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="15934.html">@ 15934 2013-02-15 19:06 　　　　┗[Watanabe Tomoyuki &lt;W] RE: [mysql 15931] RE:[mysql 15929] Re: レプリケーション構築について（長文です）（質問）</a></span>
</pre>
</body>
</html>
