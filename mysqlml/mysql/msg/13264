<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:13264</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="13263">[前]</a><a href="13265">[次]</a><a href="../list/13201-13300">[番号順一覧]</a><a href="../thread/13201-13300">[スレッド一覧]</a></p>
<p class="id">
mysql:13264
</p>
<div class="header">
<p>
From: &quot;Hiroshi Kabayama&quot; &lt;&quot;Hiroshi Kabayama&quot; &lt;kaba@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 25 Aug 2006 23:45:05 +0900<br>
Subject: [mysql 13264] Re: MySQL に突如アクセスできなくなる<br>

</p>
</div>
<div class="body">
<pre>
こんばんは、樺山です。
Ｆ．Ｙさんお返事ありがとうございます。

なかなか何を提示して質問をすれば分からないので
情報が足りなすぎましたね。すみませんでした。

<span class="quote1">&gt; 1台のマシン上で1つのMySQLサーバが動いていて、そこに2つデータベースを設</span>
<span class="quote1">&gt; 定していて、片方のデータベースだけが反応しなくなる、ということでいいで</span>
<span class="quote1">&gt; しょうか?</span>
はい、その通りです。

<span class="quote1">&gt; 「デーモンが落ちている」のをどうやって確認しましたか?</span>
あくまで予想です。MySQLについて全く詳しくないので仮定でしかありません。

<span class="quote1">&gt; 再現条件は絞り込めていますか?</span>
全く原因不明です。

<span class="quote1">&gt; 全く何も反応しなくなりますか? 反応するテーブルはありませんか?</span>
TELNETが使えないレンタルサーバで、しかも現象が発生してしまうと
phpMyAdminにはアクセスが出来ない状態になるので確認できません。

<span class="quote1">&gt; 反応しない状態からどうやって復旧していますか? 時間がたつと自然に復旧し</span>
<span class="quote1">&gt; ますか?</span>

時間が経つと自然に復旧します。現象発生から復旧までの時間は様々です。

<span class="quote1">&gt; テーブルの保守はしてみましたか?</span>
すみません、テーブルの保守というのはどういったことでしょうか？

<span class="quote1">&gt; ログは見ましたか? 何か出ていましたか?</span>
サーバのエラーログは見てみたのですが、特に変わった情報はありませんでした。
MySQLサーバのログがあるのか分かりませんが見方が分かりません。

<span class="quote1">&gt; 利用している主なストレージエンジンはなんでしょうか?</span>
ストレージエンジンというのは「MyISAM」のことでよろしいでしょうか？
MySQLでテーブルを作成する時に選択している文字は「MyISAM」です。

<span class="quote1">&gt; MySQLのバージョン、DBサーバのOSのバージョンは何ですか?</span>
分かりません。
MySQLのバージョンについては現在レンタルサーバー管理会社へ
問合せ中です。DBサーバのOSバージョンについても同様です。


この現象について調査を続けているのですが、新しく分かったことは
MySQLが落ちているわけではなく、SELECT文を発行した時点で
エラーが発生しているということでした。

分かる方にはこれで原因が分かるのかもしれませんが、私には
なぜ急にSELECT文で落ちるようになってしまったのかが分かりません。

INSERT文やUPDATE文も同様にエラーが発生してしまって落ちています。

現時点で分かることは以上です。
よろしくお願い致します！


----- Original Message ----- 
From: &quot;F.Y&quot; &lt;fumi_sby@xxxxxxxxxx&gt;
To: &lt;ml@xxxxxxxxxx&gt;
Sent: Friday, August 25, 2006 11:20 PM
Subject: <a href="13263">[mysql 13263]</a> Re: MySQL に突如アクセスできなくなる


<span class="quote1">&gt; 誰も反応しないなぁ…ごく稀に「ですます」で</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; 1台のマシン上で1つのMySQLサーバが動いていて、そこに2つデータベースを設</span>
<span class="quote1">&gt; 定していて、片方のデータベースだけが反応しなくなる、ということでいいで</span>
<span class="quote1">&gt; しょうか?</span>
<span class="quote1">&gt; 「デーモンが落ちている」のをどうやって確認しましたか?</span>
<span class="quote1">&gt; 再現条件は絞り込めていますか?</span>
<span class="quote1">&gt; 全く何も反応しなくなりますか? 反応するテーブルはありませんか? select</span>
<span class="quote1">&gt; SYSDATE();</span>
<span class="quote1">&gt; とかstatus;とかshow variables;とかshow tables;にも反応しませんか?</span>
<span class="quote1">&gt; 反応しない状態からどうやって復旧していますか? 時間がたつと自然に復旧し</span>
<span class="quote1">&gt; ますか?</span>
<span class="quote1">&gt; テーブルの保守はしてみましたか?</span>
<span class="quote1">&gt; ログは見ましたか? 何か出ていましたか?</span>
<span class="quote1">&gt; 利用している主なストレージエンジンはなんでしょうか?</span>
<span class="quote1">&gt; MySQLのバージョン、DBサーバのOSのバージョンは何ですか?</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; --- 樺山 博史 &lt;kaba@xxxxxxxxxx&gt; wrote:</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt;&gt; みなさん初めまして、樺山と申します。</span>
<span class="quote2">&gt;&gt; 教えて頂きたいことがありますのでお願いします。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 現在、レンタルサーバーにてMySQL+PHP+Apacheの</span>
<span class="quote2">&gt;&gt; 環境を利用して、会員制のサイトを運営しています。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; サイト運営開始直後のアクセス殺到時と、ある程度の</span>
<span class="quote2">&gt;&gt; 会員数が集まって来た頃から突如MySQLにアクセスが</span>
<span class="quote2">&gt;&gt; できなくなるという現象が発生しています。</span>
<span class="quote2">&gt;&gt; この現象が数時間に1回程の頻度で発生します。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; 当初はDBサーバが落ちたのだと思い、レンタルサーバの</span>
<span class="quote2">&gt;&gt; 運営会社へ問い合わせたのですが、サーバが落ちた形跡は</span>
<span class="quote2">&gt;&gt; ないと言われました。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; DBは2つ利用しており、片方のDBだけにこのような現象が</span>
<span class="quote2">&gt;&gt; 発生する為、サーバは落ちていないことは分かったのですが</span>
<span class="quote2">&gt;&gt; 今だに突然アクセスできなくなってしまう原因が分かりません。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; この現象が発生すると、phpMyAdminですら画面が真っ白に</span>
<span class="quote2">&gt;&gt; なってしまい接続することができません。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; いろいろ調査してみて、デーモンが落ちたのではないか。</span>
<span class="quote2">&gt;&gt; という予想にたどり着いたのですが、もしそうだとしても</span>
<span class="quote2">&gt;&gt; デーモンが落ちる原因として考えられるものが分からない為</span>
<span class="quote2">&gt;&gt; どうしようもできない状態です。</span>
<span class="quote2">&gt;&gt;</span>
<span class="quote2">&gt;&gt; どなたか同じような経験をされた方や詳しい方がおられましたら</span>
<span class="quote2">&gt;&gt; どうかご教授お願い致します。よろしくお願いします。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; --------------------------------------</span>
<span class="quote1">&gt; For All Sports Lovers!</span>
<span class="quote1">&gt; <a href="http://pr.mail.yahoo.co.jp/yells/">http://pr.mail.yahoo.co.jp/yells/</a></span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; </span>



</pre>
</div>
<p class="button"><a href="13263">[前]</a><a href="13265">[次]</a><a href="../list/13201-13300">[番号順一覧]</a><a href="../thread/13201-13300">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="13255">@ 13255 2006-08-24 16:23 [樺山 博史 &lt;kaba@xxxx] MySQLに突如アクセスできなくなる         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13263">  13263 2006-08-25 23:20 ┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="13264">  13264 2006-08-25 23:45 　┗[&quot;Hiroshi Kabayama&quot; &lt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13265">  13265 2006-08-26 00:02 　　┣[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13270">  13270 2006-08-27 00:53 　　┃┗[&quot;Hiroshi Kabayama&quot; &lt;]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13266">  13266 2006-08-26 01:03 　　┗[buda &lt;buda@xxxxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13271">  13271 2006-08-27 00:54 　　　┗[&quot;Hiroshi Kabayama&quot; &lt;]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13273">  13273 2006-08-27 13:24 　　　　┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13274">  13274 2006-08-27 16:04 　　　　　┣[&quot;Hiroshi Kabayama&quot; &lt;]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13275">  13275 2006-08-27 16:45 　　　　　┃┗[&quot;F.Y&quot; &lt;fumi_sby@xxxx]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13278">  13278 2006-08-27 17:21 　　　　　┃　┗[&quot;Hiroshi Kabayama&quot; &lt;]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13280">  13280 2006-08-28 00:47 　　　　　┃　　┗[info2 &lt;info2@xxxxxxx]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13283">  13283 2006-08-29 18:57 　　　　　┗[&quot;Hiroshi Kabayama&quot; &lt;]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="13288">  13288 2006-09-01 16:15 　　　　　　┗[&quot;Hiroshi Kabayama&quot; &lt;]                           </a></span>
</pre>
</body>
</html>
