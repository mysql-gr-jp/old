<html><head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4121</title>
<link rel="stylesheet" type="text/css" href="/css/w3ml.css">
</head>
<body>
<p class="button"><a href="4120.html">[前]</a><a href="4122.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4121
</p>
<div class="header">
<p>
From: Tatsuhiko Miyagawa &lt;Tatsuhiko Miyagawa &lt;miyagawa@xxxxxxxxxx&gt;&gt;<br>
Date: Fri, 03 Aug 2001 00:17:38 +0900<br>
Subject: [mysql 04121] Re: バイナリーデータを扱う方法は？<br>

</p>
</div>
<div class="body">
<pre>宮川です。

On Wed, 1 Aug 2001 10:55:31 +0900
"tamuzin2" &lt;tamuzin@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; フォームにて</span>
<span class="quote1">&gt; &lt;form method="post" action="bainari.cgi"&gt;</span>
<span class="quote1">&gt; &lt;input type="file" name="file" enctype="multipart/form-data"&gt;</span>
<span class="quote1">&gt; &lt;input type="submit" name="Submit" value="登録"&gt;</span>
<span class="quote1">&gt; のようにファイルを送信させたとき、データベースへの挿入はどうすればよいので</span>
<span class="quote1">&gt; しょうか？</span>

アップロードされたファイルの中身をPerl のスカラ変数に入れて、
INSERT すればよいです。

バイナリデータにSQLメタ文字などが入っている場合はエスケープの必要
がありますが、placeholder の機能を使うとその必要はありません。

  $sth = $dbh-&gt;prepare('INSERT INTO table VALUES (?, ?, ?)');
  $sth-&gt;execute($a, $b, $c);

こんな風に使います。
 
<span class="quote1">&gt; フィールドタイプは「mediumblob」を利用してます。</span>
<span class="quote1">&gt; 後、Perl内では「cgi_lib.pl」を利用してます。</span>

ファイルアップロードの処理は CGI.pm を使うと簡単です。

--
Tatsuhiko Miyagawa                mod_perl Mailing List   
mailto:miyagawa@xxxxxxxxxx   <a href="http://bulknews.net/lib/ml/">http://bulknews.net/lib/ml/</a>


</pre>
</div>
<p class="button"><a href="4120.html">[前]</a><a href="4122.html">[次]</a><a href="../list/4101-4200.html">[番号順一覧]</a><a href="../thread/4101-4200.html">[スレッド一覧]</a></p>
<pre class="list"><span>&nbsp;&nbsp;&nbsp;<a href="4109.html">   4109 2001-08-01 10:55 ["tamuzin2" &lt;tamuzin@] バイナリーデータを扱う方法は？          </a></span>
<span class="current">-&gt;&nbsp;<a href="4121.html">   4121 2001-08-03 00:17 ┗[Tatsuhiko Miyagawa &lt;]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4122.html">   4122 2001-08-03 01:04 　┣["tamuzin2" &lt;tamuzin@]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4124.html">   4124 2001-08-03 06:08 　┃┗[Tatsuhiko Miyagawa &lt;]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4131.html">   4131 2001-08-03 16:26 　┃　┗["tamuzin2" &lt;tamuzin@]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4132.html">   4132 2001-08-03 16:26 　┗["tamuzin2" &lt;tamuzin@] MySQL INSERT コマンドを実行できない </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4133.html">   4133 2001-08-03 16:55 　　┗[A Tsukui &lt;milano@xxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4134.html">   4134 2001-08-03 17:31 　　　┗["tamuzin2" &lt;tamuzin@] Re: MySQL INSERT コマンドを実行できない【解決】</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4135.html">   4135 2001-08-03 17:52 　　　　┣["Kawai,Takanori" &lt;GC]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4136.html">   4136 2001-08-03 18:07 　　　　┗[Yasuhide OMORI / 大�] placeholder (Re: MySQL INSERT コマンドを実行できない【解決】)</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4137.html">   4137 2001-08-03 18:58 　　　　　┗["tamuzin2" &lt;tamuzin@]                             </a></span>
</pre>


</body></html>