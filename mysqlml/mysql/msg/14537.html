<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:14537</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="14536.html">[前]</a><a href="14538.html">[次]</a><a href="../list/14501-14600.html">[番号順一覧]</a><a href="../thread/14501-14600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:14537
</p>
<div class="header">
<p>
From: 浅野 義幸 &lt;浅野 義幸 &lt;asano@xxxxxxxxxx&gt;&gt;<br>
Date: Thu, 15 May 2008 19:04:16 +0900<br>
Subject: [mysql 14537] レプリケーションができません。<br>

</p>
</div>
<div class="body">
<pre>
お世話になっております。浅野と申します。

レプリケーションをしようと思っているのですが、上手く接続できません。

マスター側に、下記コマンドでレプリケーション用のユーザを作成
GRANT REPLICATION SLAVE ON *.* TO 'replication'@'%' IDENTIFIED BY 'pass';
(とりあえず、接続元のIPは%にし、PWはpassとしています）

スレーブ側では、設定ファイルで
server-id=2(マスターはserver-id=1)
としました。

マスターでmysqldumpにてバックアップを作成した時に、バイナリログをスイッ
チしたので、
スイッチ後のバイナリログからスタートするように下記のようにスレーブ側にて
設定しました。

CHANGE MASTER TO MASTER_HOST='マスターのIP',MASTER_PORT=3306,
MASTER_USER='replication',MASTER_PASSWORD='pass',MASTER_LOG_FILE='mysql-host.000011';

その後、
START SLAVE;
にてレプリケーションを開始したのですが、上手くつながっていないようです。

スレーブ側のログには下記のように記録されていました。


080515 18:50:56 mysqld started
080515 18:50:56 InnoDB: Started; log sequence number 0 709982
080515 18:50:56 [Warning] mysql.user table is not updated to new
password format; Disabling new password usage until
mysql_fix_privilege_tables is run
080515 18:50:56 [Warning] Neither --relay-log nor --relay-log-index were
used; so replication may break when this MySQL server acts as a slave
and has his hostname changed!! Please use
'--relay-log=/usr/replication_researchDB/data/mysql-relay-bin' to avoid
this problem.
080515 18:50:56 [Note] /usr/replication_researchDB/bin/mysqld: ready for
connections.
Version: '5.0.45' socket: '/usr/replication_researchDB/data/mysql.sock'
port: 3307 MySQL Community Server (GPL)
080515 18:50:56 [Note] Slave SQL thread initialized, starting
replication in log 'mysql-host.000011' at position 4, relay log
'/usr/replication_researchDB/data/mysql-relay-bin.000003' position: 98
080515 18:50:56 [Note] Slave I/O thread: connected to master
'replication@マスターのIP:3306', replication started in log
'mysql-host.000011' at position 4
080515 18:50:56 [ERROR] While trying to obtain the list of slaves from
the master 'マスターのIP:3306', user 'replication' got the following
error: 'Access denied; you need the REPLICATION SLAVE privilege for this
operation'
080515 18:50:56 [Note] Slave I/O thread exiting, read up to log
'mysql-host.000011', position 4


もちろん、マスター側でアクセス制限などはしておりません。
また、マスター、スレーブ共にバージョンは5.0.45です。
何か考えられそうな事がありましたらアドバイスいただけると助かります。

以上、よろしくお願いいたします。

</pre>
</div>
<p class="button"><a href="14536.html">[前]</a><a href="14538.html">[次]</a><a href="../list/14501-14600.html">[番号順一覧]</a><a href="../thread/14501-14600.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="14537.html">  14537 2008-05-15 19:04 [浅野 義幸 &lt;asano@xxx] レプリケーションができません。          </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14541.html">  14541 2008-05-15 20:27 ┗[Katsutoshi Nakatomi ]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14543.html">  14543 2008-05-16 10:18 　┗[浅野 義幸 &lt;asano@xxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14544.html">  14544 2008-05-16 10:34 　　┣[g-kato &lt;g-kato@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14545.html">  14545 2008-05-16 10:34 　　┣[&quot;Tetsuro IKEDA&quot; &lt;ikd]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14546.html">  14546 2008-05-16 10:40 　　┗[Katsutoshi Nakatomi ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14548.html">  14548 2008-05-16 10:55 　　　┗[浅野 義幸 &lt;asano@xxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14549.html">  14549 2008-05-16 11:00 　　　　┣[Tetsuro IKEDA &lt;te.ik]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14553.html">  14553 2008-05-16 11:58 　　　　┃┗[浅野 義幸 &lt;asano@xxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14555.html">  14555 2008-05-16 12:06 　　　　┃　┗[&quot;Tetsuro IKEDA&quot; &lt;ikd]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14556.html">  14556 2008-05-16 12:15 　　　　┃　　┗[浅野 義幸 &lt;asano@xxx]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14550.html">  14550 2008-05-16 11:14 　　　　┗[Takanori Jokura &lt;jo@]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14551.html">  14551 2008-05-16 11:35 　　　　　┗[浅野 義幸 &lt;asano@xxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14552.html">  14552 2008-05-16 11:46 　　　　　　┗[Katsutoshi Nakatomi ]                           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14554.html">  14554 2008-05-16 12:05 　　　　　　　┗[浅野 義幸 &lt;asano@xxx]                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14557.html">  14557 2008-05-16 12:28 　　　　　　　　┗[Katsutoshi Nakatomi ]                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14558.html">  14558 2008-05-16 13:32 　　　　　　　　　┗[浅野 義幸 &lt;asano@xxx]                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14559.html">  14559 2008-05-16 13:36 　　　　　　　　　　┗[Katsutoshi Nakatomi ]                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="14560.html">  14560 2008-05-16 14:11 　　　　　　　　　　　┗[浅野 義幸 &lt;asano@xxx]                 </a></span>
</pre>
</body>
</html>
