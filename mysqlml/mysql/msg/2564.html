<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:2564</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="2563.html">[前]</a><a href="2565.html">[次]</a><a href="../list/2501-2600.html">[番号順一覧]</a><a href="../thread/2501-2600.html">[スレッド一覧]</a></p>
<p class="id">
mysql:2564
</p>
<div class="header">
<p>
From: &lt;takeshi@xxxxxxxxxx&gt;<br>
Date: Sat, 07 Oct 2000 09:37:59 +0900<br>
Subject: [mysql 02564] Re: Number of processes running now:1 というエラー<br>

</p>
</div>
<div class="body">
<pre>
At Fri, 6 Oct 2000 14:43:24 -0700,
Ueno &lt;nueno@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; kernel ver.: 2.2.14 SMP</span>
<span class="quote1">&gt; libc ver.: 2.1.3</span>
<span class="quote1">&gt; linux thread: linux thread 0.7</span>
<span class="quote1">&gt; architecture: i686</span>
<span class="quote1">&gt; MySQLbug の結果はメールの最後にあります。</span>

<span class="quote1">&gt; Number of processes running now: 1</span>
<span class="quote1">&gt; mysqld process hanging, pid 15861 - killed</span>
<span class="quote1">&gt; mysqld restarted on  Mon Sep 11 12:00:39 JST 2000</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; MySQL上のプロセスを監視していると、MySQLが自動的に作成するtmp tableが原</span>
<span class="quote1">&gt; 因のようです。例えば、ユーザーが</span>
<span class="quote1">&gt; select a.* from main.maindata a, wordcache.cache4272 b where a.Combo =</span>
<span class="quote1">&gt; b.Combo;</span>
<span class="quote1">&gt; という文を実行すると</span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; | 19876 | dbmanager|| wordcache | Query| 37|　Copying to tmp table</span>
<span class="quote2">&gt; | select a.* from main.maindata a, wordcache.cache4272 b where a.Combo =</span>
<span class="quote1">&gt; b.Combo</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; というプロセスが40〜50秒くらいかかってしまい、後からくるプロセスがどんどんた</span>
<span class="quote1">&gt; ま</span>
<span class="quote1">&gt; ってしまうようです。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; この現象をなんとか回避する方法は無いでしょうか？</span>
<span class="quote1">&gt; また、tmp tableがどういう時に作成されて、どういう時に作成されないかについて</span>
<span class="quote1">&gt; 教え</span>
<span class="quote1">&gt; ていただけないでしょうか。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ぜひよろしくお願いいたします。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ＊＊＊＊尚、MySQLbug の実行結果は以下のものです。＊＊＊＊</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; SEND-PR: -*- send-pr -*-</span>
<span class="quote1">&gt; SEND-PR: Lines starting with `SEND-PR' will be removed automatically, as</span>
<span class="quote1">&gt; SEND-PR: will all comments (text enclosed in `&lt;' and `&gt;').</span>
<span class="quote1">&gt; SEND-PR:</span>
<span class="quote1">&gt; From: nobu</span>
<span class="quote1">&gt; To: mysql@xxxxxxxxxx</span>
<span class="quote1">&gt; Subject: [50 character or so descriptive subject here (for reference)]</span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt;Description:</span>
<span class="quote1">&gt; 	&lt;precise description of the problem (multiple lines)&gt;</span>
<span class="quote2">&gt; &gt;How-To-Repeat:</span>
<span class="quote1">&gt; 	&lt;code/input/activities to reproduce the problem (multiple lines)&gt;</span>
<span class="quote2">&gt; &gt;Fix:</span>
<span class="quote1">&gt; 	&lt;how to correct or work around the problem, if known (multiple lines)&gt;</span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt;Submitter-Id:	&lt;submitter ID&gt;</span>
<span class="quote2">&gt; &gt;Originator:</span>
<span class="quote2">&gt; &gt;Organization:</span>
<span class="quote1">&gt;  &lt;organization of PR author (multiple lines)&gt;</span>
<span class="quote2">&gt; &gt;MySQL support: [none | licence | email support | extended email support ]</span>
<span class="quote2">&gt; &gt;Synopsis:	&lt;synopsis of the problem (one line)&gt;</span>
<span class="quote2">&gt; &gt;Severity:	&lt;[ non-critical | serious | critical ] (one line)&gt;</span>
<span class="quote2">&gt; &gt;Priority:	&lt;[ low | medium | high ] (one line)&gt;</span>
<span class="quote2">&gt; &gt;Category:	mysql</span>
<span class="quote2">&gt; &gt;Class:		&lt;[ sw-bug | doc-bug | change-request | support ] (one line)&gt;</span>
<span class="quote2">&gt; &gt;Release:	mysql-3.22.32 (Source distribution)</span>
<span class="quote1">&gt; </span>
<span class="quote2">&gt; &gt;Environment:</span>
<span class="quote1">&gt; 	&lt;machine, os, target, libraries (multiple lines)&gt;</span>
<span class="quote1">&gt; System: Linux bestlot.com 2.2.14-5.0smp #1 SMP Tue Mar 7 21:01:40 EST 2000</span>
<span class="quote1">&gt;  i686 unknownArchitecture: i686</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; Some paths:  /usr/bin/perl /usr/bin/make /usr/bin/gmake /usr/local/pgcc/bin/</span>
<span class="quote1">&gt; gcc /usr/bin/cc</span>
<span class="quote1">&gt; GCC: Reading specs from /usr/local/pgcc/lib/gcc-lib/i686-pc-linux-gnu/</span>
<span class="quote1">&gt; pgcc-2.95.2/specs</span>
<span class="quote1">&gt; gcc version pgcc-2.95.2 19991024 (release)</span>
<span class="quote1">&gt; Compilation info: CC='gcc'  CFLAGS=''  CXX='c++'  CXXFLAGS=''  LDFLAGS=''</span>
<span class="quote1">&gt; Configure command:</span>
<span class="quote1">&gt; ./configure  --prefix=/usr/local/mysql --with-client-ldflags=</span>
<span class="quote1">&gt; -all-static --with-mysqld-ldflags=-all-static --with-charset=sjis</span>


環境について：
0. glibc-2.1.3 は ok.
1. pgcc (pentium optimize の gcc) は使用しないでください。
   通常の gcc-2.95.2 以上を使用します
2. libpthread は、TcX (やミラーサイト) の
    Downlaods/Linux/linuxthreads-2.1.3.tar.gz
   に含まれている libpthread.a を static リンクして試してみてください。
   (glibc-2.1. 上で作成された .a です。)
3. MySQL-3.23 の最新版を試してみてください
(3'. TcX の rpm binary も試してみてください.)
4. 同じデータ、同じクエリを Solaris 等の違う環境下で動作させると同じこと
   (mysqld が死ぬ)が起きるか否か? 
   同じ現象が起きるなら
   debug を有効にして MySQL を再コンパイルし、
   MySQL を debug mode で実行してログを落とします。
   このログやデータ、クエリ、等、関わる物全てを私の方まで送ってください


MySQLサーバーの設定では:
  一時テーブルは通常結合時に使用されますので、キャッシュを増やしてみます

SQL文:
  explain select .... でチェック


-- 
 村上 毅  takeshi@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="2563.html">[前]</a><a href="2565.html">[次]</a><a href="../list/2501-2600.html">[番号順一覧]</a><a href="../thread/2501-2600.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="2561.html">   2561 2000-10-07 06:43 [&quot;Ueno&quot; &lt;nueno@xxxxxx] Number of processes running now:1 というエラー</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="2563.html">   2563 2000-10-07 08:32 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="2564.html">   2564 2000-10-07 09:37 ┗[&lt;takeshi@xxxxxxxxxx&gt;]                                       </a></span>
</pre>
</body>
</html>
