<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:9503</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="9502">[前]</a><a href="9504">[次]</a><a href="../list/9501-9600">[番号順一覧]</a><a href="../thread/9501-9600">[スレッド一覧]</a></p>
<p class="id">
mysql:9503
</p>
<div class="header">
<p>
From: &quot;HIROSE, Masaaki&quot; &lt;&quot;HIROSE, Masaaki&quot; &lt;hirose31@xxxxxxxxxx&gt;&gt;<br>
Date: Tue, 01 Jun 2004 12:59:28 +0900<br>
Subject: [mysql 09503] Re: UTF-8でのUpdate<br>

</p>
</div>
<div class="body">
<pre>
ひろせといいます

on &quot;<a href="09499">[mysql 09499]</a> Re: UTF-8でのUpdate&quot;
   &lt;200406010138.KAA09632@xxxxxxxxxx&gt;
at Tue, 01 Jun 2004 10:38:49 +0900
   yyuji &lt;yyuji@xxxxxxxxxx&gt; wrote:

<span class="quote1">&gt; useUnicode=true&amp;characterEncoding=UTF8</span>
<span class="quote1">&gt; useUnicode=true&amp;characterEncoding=UTF-8</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; ともに     </span>
<span class="quote1">&gt; Illegal mix of collations </span>
<span class="quote1">&gt; になっています。</span>

ドライバをバージョンアップしてみるとか、試しに 3.1 系のドライバを使っ
てみるとか。
# 3.0.12 でいろいろ修正が入っているみたいですし。

それでもダメならば、根本的な解決ではありませんが、
<a href="http://dev.mysql.com/doc/mysql/ja/Charset.html">http://dev.mysql.com/doc/mysql/ja/Charset.html</a>
を一通り読んで、文字列リテラルでキャラクタセットを明示してみるとか。

# MySQL 4.1.2 にしてみるとか…

                                  //

話は変わりますが、

<span class="quote1">&gt; update tbl_test set tx_name = '&quot; + buf_name.toString() + &quot;' </span>
<span class="quote1">&gt;        where TX_UID = '&quot; + uid + &quot;';</span>

PreparedStatement を使えない理由があるのかもしれませんし、uid がどんな
ものかわかりませんが、uid の値に「'」が含まれていたらどうなるんだろうと
か、「foo' or TX_UID != '」だったらどうなるんだろうとか…

SQL injection 対策をしているのかもしれませんが、老婆心ながら心配です。
<a href="http://www.ipa.go.jp/security/awareness/vendor/programming/a02_01.html">http://www.ipa.go.jp/security/awareness/vendor/programming/a02_01.html</a>

ではでは

-- 
ひろせ
<a href="http://www.irori.org/">http://www.irori.org/</a>

</pre>
</div>
<p class="button"><a href="9502">[前]</a><a href="9504">[次]</a><a href="../list/9501-9600">[番号順一覧]</a><a href="../thread/9501-9600">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="9484">   9484 2004-05-31 18:41 [yyuji &lt;yyuji@xxxxxxx] UTF-8でのUpdate                         </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9485">   9485 2004-05-31 19:16 ┣[&lt;yasuyuki@xxxxxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9486">   9486 2004-05-31 19:35 ┃┗[yyuji &lt;yyuji@xxxxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9487">   9487 2004-05-31 20:01 ┃　┗[&lt;yasuyuki@xxxxxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9499">   9499 2004-06-01 10:38 ┃　　┗[yyuji &lt;yyuji@xxxxxxx]                                 </a></span>
<span class="current">-&gt;&nbsp;<a href="9503">   9503 2004-06-01 12:59 ┃　　　┗[&quot;HIROSE, Masaaki&quot; &lt;h]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9504">   9504 2004-06-01 13:18 ┃　　　　┣[yyuji &lt;yyuji@xxxxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9505">   9505 2004-06-01 13:35 ┃　　　　┗[&quot;TAKAHASHI, Tomohiro]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9500">   9500 2004-06-01 11:18 ┗[ML account &lt;ml@xxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9506">   9506 2004-06-01 13:41 　┗[yyuji &lt;yyuji@xxxxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9510">   9510 2004-06-01 16:51 　　┣[&lt;yasuyuki@xxxxxxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9513">   9513 2004-06-01 19:56 　　┃┗[yyuji &lt;yyuji@xxxxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9516">   9516 2004-06-01 20:25 　　┃　┗[&lt;yasuyuki@xxxxxxxxxx]                               </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9524">   9524 2004-06-02 18:07 　　┃　　┗[yyuji &lt;yyuji@xxxxxxx]                             </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9511">   9511 2004-06-01 17:16 　　┗[ML account &lt;ml@xxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9514">   9514 2004-06-01 19:58 　　　┣[yyuji &lt;yyuji@xxxxxxx]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="9515">   9515 2004-06-01 20:22 　　　┗[yyuji &lt;yyuji@xxxxxxx]                                 </a></span>
</pre>
</body>
</html>
