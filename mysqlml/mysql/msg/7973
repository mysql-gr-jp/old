<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:7973</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="7972">[前]</a><a href="7974">[次]</a><a href="../list/7901-8000">[番号順一覧]</a><a href="../thread/7901-8000">[スレッド一覧]</a></p>
<p class="id">
mysql:7973
</p>
<div class="header">
<p>
From: A.K.I. &lt;A.K.I. &lt;aki@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 30 Jun 2003 20:55:47 +0900<br>
Subject: [mysql 07973] Re: Table の更新について<br>

</p>
</div>
<div class="body">
<pre>
A.K.I.です。
（Delphiはわかりません）

<span class="quote1">&gt;全くの初心者satoと申します。</span>
<span class="quote1">&gt;今まで、ParadoxというDataBaseを使っていました。</span>
<span class="quote1">&gt;レコードの追加の際、二重登録の防止のために</span>
<span class="quote1">&gt;たとえば、もし同じcodeのものがあれば、更新し、</span>
<span class="quote1">&gt;なければ、レコードを追加したいのですが。</span>
<span class="quote1">&gt;このような場合SQLでは、</span>
<span class="quote1">&gt;SELECT ****** </span>
<span class="quote1">&gt;としてみて、もし該当するレコードがゼロなら</span>
<span class="quote1">&gt;INSERT *****</span>
<span class="quote1">&gt;と、SQLを二回発行するのでしょうか。</span>

INSERT IGNOREで挿入してからUPDATEとか。
（IGNORE指定するとすでにあるレコードは挿入されません）
逆転の発想でDELETEを先に入れて、INSERTするとか。
（以前しょっちゅうやってました）
上記どちらもプログラム側からは一回のSQL発行で済みます。

。。。で、これを書くためにマニュアルを確認中、もうちょっと下
まで読むとそれっぽいのがありました。
REPLACEというのがそのまんまの動きします。ユニークなインデックス
かプライマリキーがかぶってる場合削除して挿入、そうでない場合
は単純に挿入してくれます。

<a href="http://www.mysql.gr.jp/jpdoc/4.0/manual.ja_Reference.html#REPLACE">http://www.mysql.gr.jp/jpdoc/4.0/manual.ja_Reference.html#REPLACE</a>

#初心者だという自己紹介よりは環境の記述の方が数百倍ありがた
いのにと思っているのは私だけではないハズ。



</pre>
</div>
<p class="button"><a href="7972">[前]</a><a href="7974">[次]</a><a href="../list/7901-8000">[番号順一覧]</a><a href="../thread/7901-8000">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="7972">   7972 2003-06-30 20:02 [sato &lt;satot@xxxxxxxx] Table の更新について                    </a></span>
<span class="current">-&gt;&nbsp;<a href="7973">   7973 2003-06-30 20:55 ┗[A.K.I. &lt;aki@xxxxxxxx]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7980">   7980 2003-07-02 09:04 　┗[sato &lt;satot@xxxxxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7981">   7981 2003-07-02 16:19 　　┣[&quot;Takashi Yamashita&quot; ]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="7982">   7982 2003-07-02 17:00 　　┗[SUGAWARA Hajime &lt;sug]                                   </a></span>
</pre>
</body>
</html>
