<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4833</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4832.html">[前]</a><a href="4834.html">[次]</a><a href="../list/4801-4900.html">[番号順一覧]</a><a href="../thread/4801-4900.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4833
</p>
<div class="header">
<p>
From: SAITO &lt;SAITO &lt;PBB00535@xxxxxxxxxx&gt;&gt;<br>
Date: Sat, 22 Dec 2001 18:04:53 +0900<br>
Subject: [mysql 04833] PHP スクリプト版で MySQL に接続できない<br>

</p>
</div>
<div class="body">
<pre>
はじめまして、斉藤ともうします。

PHP4のコマンドライン版でcronで一定時間にメールでMySQLに前日
格納されたデーター集計を届けるスクリプトを書いております(PHP
のver.は 4.0.6)。

コマンドラインで「$conn = mysql_connect
(localhost,&quot;user&quot;,&quot;pw&quot;)」の行で次のエラーメッセージが表示さ
れMySQLに接続されません。Webでもおなじコマンドを利用しており
ますが、MySQLに接続され集計などの動作が正常に行われていま
す。

==== 以下 ====

File 'NONEXISTENT/charsets/?.conf' not found (Errcode: 2)
Character set '#12' is not a compiled character set and is
not specified in the 'NONEXISTENT/charsets/Index' file

==== 以上 ====

過去の投稿から「#12」をキーワードに検索し、次のURLの説明を読
みました。
　<a href="http://www.softagency.co.jp/mysql/TIPS/clients.html#ujis.conf">http://www.softagency.co.jp/mysql/TIPS/clients.html#ujis.conf</a>

そして「libmysqlclient」の問題ではないかと予想しました。しか
し、Configureでは「-with-extra-charsets=all」を付けておりま
す。

また次のURLの「7-1-4. ライブラリのパス」を読みました。
　<a href="http://www.softagency.co.jp/mysql/TIPS/compile.html#other_module">http://www.softagency.co.jp/mysql/TIPS/compile.html#other_module</a>

「NONEXISTENT」とある事からライブラリを見付ける事ができてい
ないと思い、libmysqlclient.so がある「/usr/local/lib/
mysql/」を LD_LIBRARY_PATH に書き加え「sorce ~./bashrc」も実
行しました。けれども何も症状に変化はありません。「/etc/
ld.so.conf」にも書き加え「ldconfig」を実行しました。

現在、「正しくディレクトリが作られていない」「パスが通ってい
ない」などが原因で、前述の不具合が生じていると考えておりま
す。

RedHat Linuxは色々不具合が多いことも知りました。
　<a href="http://www.softagency.co.jp/mysql/TIPS/compile.html#redhat">http://www.softagency.co.jp/mysql/TIPS/compile.html#redhat</a>

しかしこれらの不具合はcompiler(gcc ver.2.96)のためでしょう
か。Webではなんの不具合も無く動いております。compilerを入れ
替えて再インストールするまでに、エイリアスやディレクトリを移
動させるだけでなんとか動きそうな気がしますが、、どうすればよ
いのか分かりません。

珍しい環境ではないので、同じ経験をされている方がおられると思
います。MLを読んでおられる方からご教授を賜れれば幸いです。

mysqlbug と ldd で表示されたメッセージを末尾に示します。

どうかよろしくお願いいたします。



SEND-PR: -*- send-pr -*-
SEND-PR: Lines starting with `SEND-PR' will be removed automatically, as
SEND-PR: will all comments (text enclosed in `&lt;' and `&gt;').
SEND-PR:
From: saito
To: mysql@xxxxxxxxxx
Subject: [50 character or so descriptive subject here (for reference)]

<span class="quote1">&gt;Description:</span>
        &lt;precise description of the problem (multiple lines)&gt;
<span class="quote1">&gt;How-To-Repeat:</span>
        &lt;code/input/activities to reproduce the problem (multiple lines)&gt;
<span class="quote1">&gt;Fix:</span>
        &lt;how to correct or work around the problem, if known (multiple lines)&gt;

<span class="quote1">&gt;Submitter-Id:  &lt;submitter ID&gt;</span>
<span class="quote1">&gt;Originator:    SAITO</span>
<span class="quote1">&gt;Organization:</span>
 &lt;organization of PR author (multiple lines)&gt;
<span class="quote1">&gt;MySQL support: [none | licence | email support | extended email support ]</span>
<span class="quote1">&gt;Synopsis:      &lt;synopsis of the problem (one line)&gt;</span>
<span class="quote1">&gt;Severity:      &lt;[ non-critical | serious | critical ] (one line)&gt;</span>
<span class="quote1">&gt;Priority:      &lt;[ low | medium | high ] (one line)&gt;</span>
<span class="quote1">&gt;Category:      mysql</span>
<span class="quote1">&gt;Class:         &lt;[ sw-bug | doc-bug | change-request | support ] (one line)&gt;</span>
<span class="quote1">&gt;Release:       mysql-3.23.42 (Source distribution)</span>
<span class="quote1">&gt;Environment:</span>
        &lt;machine, os, target, libraries (multiple lines)&gt;
System: Linux RHL 2.4.2-2 #1 Sun Apr 8 20:41:30 EDT 2001 i686 unknown
Architecture: i686

Some paths:  /usr/bin/perl /usr/bin/make /usr/bin/gmake /usr/bin/gcc /usr/bin/
cc
GCC: Reading specs from /usr/lib/gcc-lib/i386-redhat-linux/2.96/specs
gcc version 2.96 20000731 (Red Hat Linux 7.1 2.96-81)
Compilation info: CC='gcc'  CFLAGS=''  CXX='c++'  CXXFLAGS=''  LDFLAGS=''
LIBC:
lrwxrwxrwx    1 root     root           13  9月 24 07:46 /lib/libc.so.6 -&gt; lib
c-2.2.2.so
-rwxr-xr-x    2 root     root      1236396  4月  7  2001 /lib/libc-2.2.2.so
-rw-r--r--    1 root     root     26350254  4月  7  2001 /usr/lib/libc.a
-rw-r--r--    1 root     root          178  4月  7  2001 /usr/lib/libc.so
Configure command: ./configure  --with-charset=ujis -with-extra-charsets=all -
-with-mysqld-user=mysql


$ ldd /usr/local/bin/mysql
        libncurses.so.5 =&gt; /usr/lib/libncurses.so.5 (0x40023000)
        libmysqlclient.so.10 =&gt; /usr/local/lib/mysql/libmysqlclient.so.10 (0x4
0065000)
        libz.so.1 =&gt; /usr/lib/libz.so.1 (0x4009b000)
        libcrypt.so.1 =&gt; /lib/libcrypt.so.1 (0x400a9000)
        libnsl.so.1 =&gt; /lib/libnsl.so.1 (0x400d7000)
        libm.so.6 =&gt; /lib/i686/libm.so.6 (0x400ee000)
        libstdc++-libc6.2-2.so.3 =&gt; /usr/lib/libstdc++-libc6.2-2.so.3 (0x40112
000)
        libc.so.6 =&gt; /lib/i686/libc.so.6 (0x40156000)
        /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x40000000)
        
        
$ ldd /usr/local/lib/mysql/libmysqlclient.so
        libz.so.1 =&gt; /usr/lib/libz.so.1 (0x40042000)
        libcrypt.so.1 =&gt; /lib/libcrypt.so.1 (0x40050000)
        libnsl.so.1 =&gt; /lib/libnsl.so.1 (0x4007e000)
        libm.so.6 =&gt; /lib/i686/libm.so.6 (0x40095000)
        libc.so.6 =&gt; /lib/i686/libc.so.6 (0x400b9000)
        /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x2aaaa000)

</pre>
</div>
<p class="button"><a href="4832.html">[前]</a><a href="4834.html">[次]</a><a href="../list/4801-4900.html">[番号順一覧]</a><a href="../thread/4801-4900.html">[スレッド一覧]</a></p>
<pre class="list">
<span class="current">-&gt;&nbsp;<a href="4833.html">   4833 2001-12-22 18:04 [SAITO &lt;PBB00535@xxxx] PHP スクリプト版で MySQL に接続できない </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4835.html">   4835 2001-12-25 00:15 ┗[SAITO &lt;PBB00535@xxxx] RE: PHP スクリプト版で MySQ           </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4852.html">   4852 2001-12-27 23:28 　┣[&lt;moeru@xxxxxxxxxx&gt;  ] Re: PHP スクリプト版で MySQL に接続できない</a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4853.html">   4853 2001-12-28 12:04 　┗[Shinichiro HIDA &lt;shi] Re: PHP スクリプト版で MySQL        </a></span>
</pre>
</body>
</html>
