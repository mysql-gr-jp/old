<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:11024</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="11023">[前]</a><a href="11025">[次]</a><a href="../list/11001-11100">[番号順一覧]</a><a href="../thread/11001-11100">[スレッド一覧]</a></p>
<p class="id">
mysql:11024
</p>
<div class="header">
<p>
From: 木下　靖文 &lt;木下　靖文 &lt;kinoshita.yasufumi@xxxxxxxxxx&gt;&gt;<br>
Date: Mon, 21 Feb 2005 10:46:51 +0900<br>
Subject: [mysql 11024] Re: 3桁ごとのカンマ出力<br>

</p>
</div>
<div class="body">
<pre>
木下です。
こんにちは。

FORMAT([数値],[小数点以下の桁数])
という関数で出来たと思います。
<a href="http://dev.mysql.com/doc/mysql/ja/miscellaneous-functions.html">http://dev.mysql.com/doc/mysql/ja/miscellaneous-functions.html</a>

柴垣 wrote:
<span class="quote1">&gt; 柴垣です。</span>
<span class="quote1">&gt; 　MySQL の数値出力に、3桁ごとにカンマを入れたいのです。</span>
<span class="quote1">&gt; MySQLからデータを受け取った後での加工がむずかしい場面な</span>
<span class="quote1">&gt; ので、なんとかMySQL側でフォーマットにしたいのですが、</span>
<span class="quote1">&gt; なかなかうまい方法が見つかりません。</span>
<span class="quote1">&gt; 　とりあえず、下記のようなSQLをつくって動かしていますが、</span>
<span class="quote1">&gt; もっといい方法はないでしょうか。</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; select</span>
<span class="quote1">&gt; concat(</span>
<span class="quote1">&gt; if((Value)&lt;0,'-',''),</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; if(abs(Value)&gt;1000000,concat(floor(abs(Value)/1000000),','),''),</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; if(abs(Value)&gt;1000000,</span>
<span class="quote1">&gt;   concat(lpad(floor(abs(Value)%1000000/1000),3,'0'),','), </span>
<span class="quote1">&gt;   if(abs(Value)&gt;1000,concat(floor(abs(Value)/1000),','),'')),</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; if(abs(Value)&gt;1000,lpad(abs(Value)%1000,3,'0'),abs(Value)%1000))</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; from table;</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; （　※　有効桁は正負ともに10億未満。）</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; _/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt;  柴垣　顕郎 akiro@xxxxxxxxxx</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; _/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; </span>

-- 
木下  靖文
e-mail: kinoshita.yasufumi@xxxxxxxxxx

</pre>
</div>
<p class="button"><a href="11023">[前]</a><a href="11025">[次]</a><a href="../list/11001-11100">[番号順一覧]</a><a href="../thread/11001-11100">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="11023">  11023 2005-02-21 09:45 [柴垣 &lt;akiro@xxxxxxxx] 3桁ごとのカンマ出力                     </a></span>
<span class="current">-&gt;&nbsp;<a href="11024">  11024 2005-02-21 10:46 ┗[木下　靖文 &lt;kinoshit]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="11026">  11026 2005-02-21 13:23 　┗[柴垣 &lt;akiro@xxxxxxxx]                                     </a></span>
</pre>
</body>
</html>
