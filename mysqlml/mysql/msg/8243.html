<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:8243</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="8242.html">[前]</a><a href="8244.html">[次]</a><a href="../list/8201-8300.html">[番号順一覧]</a><a href="../thread/8201-8300.html">[スレッド一覧]</a></p>
<p class="id">
mysql:8243
</p>
<div class="header">
<p>
From: &quot;Keisuke Hamanaka&quot; &lt;&quot;Keisuke Hamanaka&quot; &lt;hamanaka015@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 1 Oct 2003 16:32:15 +0900<br>
Subject: [mysql 08243] Re: 「高知県」と「香川県」に関しまして。<br>

</p>
</div>
<div class="body">
<pre>
いつもお世話になっております。
濱中と申します。

先日、「香川支社」と「高知支社」を登録すると重複エラーがでると、相談させていただ
いた者です（前回は書き忘れましたが、支社名が主キーになっています）。

A.K.Iさんからアドバイスいただき、再度MYSQLをインストールする
ことにしました。
具体的には、mysql3.23.58のソースをダウンロードし、Configure時に
--with-charset=ujis
をつけました。
（以下、Configure時の出力画面の一部）

checking &quot;character sets&quot;... default: ujis; compiled in: ujis  big5 cp1251
cp125
7 croat czech danish dec8 dos estonia euc_kr gb2312 gbk german1 greek hebrew
hp8
 hungarian koi8_ru koi8_ukr latin1 latin2 latin5 swe7 usa7 win1250 win1251
win12
51ukr sjis tis620

結果、状況は一部改善したのですが、相変わらず、データを登録すると
重複エラーが出ます。

&lt;改善した内容&gt;
以前は、支社名を「高知」、「香川支社」とすると登録できました。しかし、
select * from hoge_tbl where shisha like '高%'
と検索すると、
「高知」
「香川支社」
の両方がヒットしました。

しかし、再インストール後は（--with-charset=ujisをつけた後は）、
select * from hoge_tbl where shisha like '高%'
と検索すると
「高知」
だけが出力されるようになりました。
つまり検索に関しては問題は解決したものと考えています。

しかし、データを登録しようとすると、どうしても重複エラーが出てしまい、悩んで
います。
皆様の環境ではいかがなものでしょうか？

なにかアドバイスがあれば、ご教授いただけませんでしょうか。
よろしくお願いいたします。





<span class="quote1">&gt; A.K.I.と申します。</span>
<span class="quote1">&gt; FreeBSDのpackagesのものはデフォルトがlatin1になっていたかと思います。</span>
<span class="quote1">&gt; charsetのリストの中にも日本語は入っていなかったように思います。</span>
<span class="quote1">&gt; （なのでujisを指定すると知らないと言われる）</span>
<span class="quote1">&gt; portsからmakeして、WITH_CHARSET=ujis を指定するのがよいかと。</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; On Fri, 29 Aug 2003 17:38:19 +0900</span>
<span class="quote1">&gt; &quot;Keisuke Hamanaka&quot; &lt;hamanaka015@xxxxxxxxxx&gt; wrote:</span>
<span class="quote1">&gt;</span>
<span class="quote2">&gt; &gt; 現在、PHP4.3.1+mySQL3.23.56でデータベースを作っています。</span>
<span class="quote2">&gt; &gt; MySQLはfreeBSDのパッケージのものを使用しています。</span>
<span class="quote2">&gt; &gt; データベースの登録情報として、「香川支社」、「高知支社」という情報が</span>
<span class="quote2">&gt; &gt; あるのですが、両者を登録しようとすると、重複エラーが出てしまいます。</span>
<span class="quote2">&gt; &gt; 本MLの過去ログを見たところ、私と同様に、「香川県」と「高知県」で</span>
<span class="quote2">&gt; &gt; 同じように悩んでいた方がいまして、「香」、「高」の文字コードが近いことが</span>
<span class="quote2">&gt; &gt; 原因であることがわかりました。</span>
<span class="quote2">&gt; &gt; 解決策として、/etc/my.cnfに、</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; [mysqld]</span>
<span class="quote2">&gt; &gt; default-character-set=ujis</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; と記述するとあったのですが、この記述を追加するとMysqlサーバが起動しなく</span>
<span class="quote2">&gt; &gt; なってしまいます。現在、my.cnfには、</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; datadir=/db_data/mysql</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; の記述しか書いていないのですが、どこか不都合があるのでしょうか？</span>
<span class="quote2">&gt; &gt; どなたかご教授お願いします。</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote2">&gt; &gt; -------------------------------------</span>
<span class="quote2">&gt; &gt; 濱中圭介</span>
<span class="quote2">&gt; &gt; -------------------------------------</span>
<span class="quote2">&gt; &gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt; -- </span>
<span class="quote1">&gt; A.K.I. &lt;aki@xxxxxxxxxx&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>
<span class="quote1">&gt;</span>


</pre>
</div>
<p class="button"><a href="8242.html">[前]</a><a href="8244.html">[次]</a><a href="../list/8201-8300.html">[番号順一覧]</a><a href="../thread/8201-8300.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="8228.html">   8228 2003-08-29 17:38 [&quot;Keisuke Hamanaka&quot; &lt;] 「高知県」と「香川県」に関しまして。    </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8229.html">   8229 2003-09-29 17:47 ┗[&quot;A.K.I.&quot; &lt;aki@xxxxxx]                                       </a></span>
<span class="current">-&gt;&nbsp;<a href="8243.html">   8243 2003-10-01 16:32 　┗[&quot;Keisuke Hamanaka&quot; &lt;]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8244.html">   8244 2003-10-01 16:57 　　┣[&quot;A.K.I.&quot; &lt;aki@xxxxxx]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8245.html">   8245 2003-10-01 17:02 　　┃┗[&lt;numata@xxxxxxxxxx&gt; ]                                 </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="8246.html">   8246 2003-10-01 17:03 　　┗[&quot;Keisuke Hamanaka&quot; &lt;]                                   </a></span>
</pre>
</body>
</html>
