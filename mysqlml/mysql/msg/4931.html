<html>
<head>
<meta http-equiv="Content-Style-Type" context="text/css">
<title>mysql:4931</title>
<link rel=stylesheet type="text/css" href="../../../css/w3ml.css">
</head>
<body>
<p class="button"><a href="4930.html">[前]</a><a href="4932.html">[次]</a><a href="../list/4901-5000.html">[番号順一覧]</a><a href="../thread/4901-5000.html">[スレッド一覧]</a></p>
<p class="id">
mysql:4931
</p>
<div class="header">
<p>
From: &quot;f.t&quot; &lt;&quot;f.t&quot; &lt;fujiyama@xxxxxxxxxx&gt;&gt;<br>
Date: Wed, 16 Jan 2002 13:29:28 +0900<br>
Subject: [mysql 04931] Re: データーのシフトについて<br>

</p>
</div>
<div class="body">
<pre>
fujiyamaです。

本題と外れますが,,,

ml_mysql@xxxxxxxxxx wrote(Tue, 15 Jan 2002 17:13:52 +0900):

<span class="quote1">&gt; テーブル入金Aが</span>
<span class="quote1">&gt; 氏名コード、当月入金額、前月入金額、２ヶ月前入金額、３ヶ月前入金額、累計</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; というようなテーブルで、件数が１万件程度</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; 月末処理で、データーをシフトしたいのですが、</span>
<span class="quote1">&gt; 今考えているSQLは</span>
<span class="quote1">&gt; </span>
<span class="quote1">&gt; LOCK　TABLES テーブル入金　,WRITE</span>
<span class="quote1">&gt; UPDATE  テーブル入金 SET 累計=累計+３ヶ月前入金額</span>
<span class="quote1">&gt; UPDATE  テーブル入金 SET ３ヶ月前入金額=２ヶ月前入金額</span>
<span class="quote1">&gt; UPDATE  テーブル入金 SET ２ヶ月前入金額=前月入金額</span>
<span class="quote1">&gt; UPDATE  テーブル入金 SET 前月入金額=当月入金額</span>
<span class="quote1">&gt; UPDATE  テーブル入金 当月入金額=0</span>
<span class="quote1">&gt; UNLOCK TABLES</span>

データをシフトする必要があるのは何故でしょう？
ディスク容量がない…ということも1万件程度ならなさそうだし、
速度とかを追求してテーブルを作成したいなら近3ヶ月のデータを全体のテーブ
ルから抜き出すようにした方が後々いいかと思うんですが？
3ヶ月でデータの破棄義務があるとか？？

入金メインテーブル｛入金月、入金額、累計｝
入金作業テーブル｛3ヶ月前入金額、2ヶ月前入金額、前月入金額、累計｝
かなと。
深い事情があったらすみません(^^;

-- よろしくお願いします
f.t &lt;fujiyama@xxxxxxxxxx&gt;


</pre>
</div>
<p class="button"><a href="4930.html">[前]</a><a href="4932.html">[次]</a><a href="../list/4901-5000.html">[番号順一覧]</a><a href="../thread/4901-5000.html">[スレッド一覧]</a></p>
<pre class="list">
<span>&nbsp;&nbsp;&nbsp;<a href="4923.html">   4923 2002-01-15 17:13 [&lt;ml_mysql@xxxxxxxxxx] データーのシフトについて                </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4929.html">   4929 2002-01-16 07:41 ┣[とみたまさひろ &lt;tomm]                                       </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4930.html">   4930 2002-01-16 10:14 ┃┗[&lt;ml_mysql@xxxxxxxxxx]                                     </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="4964.html">   4964 2002-01-18 13:12 ┃　┗[とみたまさひろ &lt;tomm]                                   </a></span>
<span>&nbsp;&nbsp;&nbsp;<a href="5021.html">   5021 2002-01-23 21:18 ┃　　┗[&lt;ml_mysql@xxxxxxxxxx]                                 </a></span>
<span class="current">-&gt;&nbsp;<a href="4931.html">   4931 2002-01-16 13:29 ┗[&quot;f.t&quot; &lt;fujiyama@xxxx]                                       </a></span>
</pre>
</body>
</html>
